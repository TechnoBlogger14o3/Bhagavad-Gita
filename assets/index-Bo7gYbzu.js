(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Yy(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var xv={exports:{}},Sd={},_v={exports:{}},ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function cS(){if(dx)return ln;dx=1;var a=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function T(j,ie,Ce){this.props=j,this.context=ie,this.refs=A,this.updater=Ce||_}T.prototype.isReactComponent={},T.prototype.setState=function(j,ie){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ie,"setState")},T.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function w(){}w.prototype=T.prototype;function C(j,ie,Ce){this.props=j,this.context=ie,this.refs=A,this.updater=Ce||_}var R=C.prototype=new w;R.constructor=C,S(R,T.prototype),R.isPureReactComponent=!0;var P=Array.isArray,F=Object.prototype.hasOwnProperty,N={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function G(j,ie,Ce){var Ye,at={},he=null,be=null;if(ie!=null)for(Ye in ie.ref!==void 0&&(be=ie.ref),ie.key!==void 0&&(he=""+ie.key),ie)F.call(ie,Ye)&&!z.hasOwnProperty(Ye)&&(at[Ye]=ie[Ye]);var Fe=arguments.length-2;if(Fe===1)at.children=Ce;else if(1<Fe){for(var it=Array(Fe),st=0;st<Fe;st++)it[st]=arguments[st+2];at.children=it}if(j&&j.defaultProps)for(Ye in Fe=j.defaultProps,Fe)at[Ye]===void 0&&(at[Ye]=Fe[Ye]);return{$$typeof:a,type:j,key:he,ref:be,props:at,_owner:N.current}}function D(j,ie){return{$$typeof:a,type:j.type,key:ie,ref:j.ref,props:j.props,_owner:j._owner}}function L(j){return typeof j=="object"&&j!==null&&j.$$typeof===a}function H(j){var ie={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Ce){return ie[Ce]})}var ee=/\/+/g;function ne(j,ie){return typeof j=="object"&&j!==null&&j.key!=null?H(""+j.key):ie.toString(36)}function me(j,ie,Ce,Ye,at){var he=typeof j;(he==="undefined"||he==="boolean")&&(j=null);var be=!1;if(j===null)be=!0;else switch(he){case"string":case"number":be=!0;break;case"object":switch(j.$$typeof){case a:case e:be=!0}}if(be)return be=j,at=at(be),j=Ye===""?"."+ne(be,0):Ye,P(at)?(Ce="",j!=null&&(Ce=j.replace(ee,"$&/")+"/"),me(at,ie,Ce,"",function(st){return st})):at!=null&&(L(at)&&(at=D(at,Ce+(!at.key||be&&be.key===at.key?"":(""+at.key).replace(ee,"$&/")+"/")+j)),ie.push(at)),1;if(be=0,Ye=Ye===""?".":Ye+":",P(j))for(var Fe=0;Fe<j.length;Fe++){he=j[Fe];var it=Ye+ne(he,Fe);be+=me(he,ie,Ce,it,at)}else if(it=x(j),typeof it=="function")for(j=it.call(j),Fe=0;!(he=j.next()).done;)he=he.value,it=Ye+ne(he,Fe++),be+=me(he,ie,Ce,it,at);else if(he==="object")throw ie=String(j),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return be}function fe(j,ie,Ce){if(j==null)return j;var Ye=[],at=0;return me(j,Ye,"","",function(he){return ie.call(Ce,he,at++)}),Ye}function ye(j){if(j._status===-1){var ie=j._result;ie=ie(),ie.then(function(Ce){(j._status===0||j._status===-1)&&(j._status=1,j._result=Ce)},function(Ce){(j._status===0||j._status===-1)&&(j._status=2,j._result=Ce)}),j._status===-1&&(j._status=0,j._result=ie)}if(j._status===1)return j._result.default;throw j._result}var we={current:null},B={transition:null},Q={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:B,ReactCurrentOwner:N};function K(){throw Error("act(...) is not supported in production builds of React.")}return ln.Children={map:fe,forEach:function(j,ie,Ce){fe(j,function(){ie.apply(this,arguments)},Ce)},count:function(j){var ie=0;return fe(j,function(){ie++}),ie},toArray:function(j){return fe(j,function(ie){return ie})||[]},only:function(j){if(!L(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},ln.Component=T,ln.Fragment=t,ln.Profiler=i,ln.PureComponent=C,ln.StrictMode=n,ln.Suspense=f,ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,ln.act=K,ln.cloneElement=function(j,ie,Ce){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ye=S({},j.props),at=j.key,he=j.ref,be=j._owner;if(ie!=null){if(ie.ref!==void 0&&(he=ie.ref,be=N.current),ie.key!==void 0&&(at=""+ie.key),j.type&&j.type.defaultProps)var Fe=j.type.defaultProps;for(it in ie)F.call(ie,it)&&!z.hasOwnProperty(it)&&(Ye[it]=ie[it]===void 0&&Fe!==void 0?Fe[it]:ie[it])}var it=arguments.length-2;if(it===1)Ye.children=Ce;else if(1<it){Fe=Array(it);for(var st=0;st<it;st++)Fe[st]=arguments[st+2];Ye.children=Fe}return{$$typeof:a,type:j.type,key:at,ref:he,props:Ye,_owner:be}},ln.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:s,_context:j},j.Consumer=j},ln.createElement=G,ln.createFactory=function(j){var ie=G.bind(null,j);return ie.type=j,ie},ln.createRef=function(){return{current:null}},ln.forwardRef=function(j){return{$$typeof:c,render:j}},ln.isValidElement=L,ln.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:ye}},ln.memo=function(j,ie){return{$$typeof:p,type:j,compare:ie===void 0?null:ie}},ln.startTransition=function(j){var ie=B.transition;B.transition={};try{j()}finally{B.transition=ie}},ln.unstable_act=K,ln.useCallback=function(j,ie){return we.current.useCallback(j,ie)},ln.useContext=function(j){return we.current.useContext(j)},ln.useDebugValue=function(){},ln.useDeferredValue=function(j){return we.current.useDeferredValue(j)},ln.useEffect=function(j,ie){return we.current.useEffect(j,ie)},ln.useId=function(){return we.current.useId()},ln.useImperativeHandle=function(j,ie,Ce){return we.current.useImperativeHandle(j,ie,Ce)},ln.useInsertionEffect=function(j,ie){return we.current.useInsertionEffect(j,ie)},ln.useLayoutEffect=function(j,ie){return we.current.useLayoutEffect(j,ie)},ln.useMemo=function(j,ie){return we.current.useMemo(j,ie)},ln.useReducer=function(j,ie,Ce){return we.current.useReducer(j,ie,Ce)},ln.useRef=function(j){return we.current.useRef(j)},ln.useState=function(j){return we.current.useState(j)},ln.useSyncExternalStore=function(j,ie,Ce){return we.current.useSyncExternalStore(j,ie,Ce)},ln.useTransition=function(){return we.current.useTransition()},ln.version="18.3.1",ln}var fx;function og(){return fx||(fx=1,_v.exports=cS()),_v.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function dS(){if(px)return Sd;px=1;var a=og(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,v={},x=null,_=null;p!==void 0&&(x=""+p),f.key!==void 0&&(x=""+f.key),f.ref!==void 0&&(_=f.ref);for(m in f)n.call(f,m)&&!s.hasOwnProperty(m)&&(v[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)v[m]===void 0&&(v[m]=f[m]);return{$$typeof:e,type:c,key:x,ref:_,props:v,_owner:i.current}}return Sd.Fragment=t,Sd.jsx=u,Sd.jsxs=u,Sd}var mx;function fS(){return mx||(mx=1,xv.exports=dS()),xv.exports}var Ie=fS(),je=og();const pS=Yy(je);var yp={},bv={exports:{}},Ir={},wv={exports:{}},Sv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function mS(){return gx||(gx=1,(function(a){function e(B,Q){var K=B.length;B.push(Q);e:for(;0<K;){var j=K-1>>>1,ie=B[j];if(0<i(ie,Q))B[j]=Q,B[K]=ie,K=j;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var Q=B[0],K=B.pop();if(K!==Q){B[0]=K;e:for(var j=0,ie=B.length,Ce=ie>>>1;j<Ce;){var Ye=2*(j+1)-1,at=B[Ye],he=Ye+1,be=B[he];if(0>i(at,K))he<ie&&0>i(be,at)?(B[j]=be,B[he]=K,j=he):(B[j]=at,B[Ye]=K,j=Ye);else if(he<ie&&0>i(be,K))B[j]=be,B[he]=K,j=he;else break e}}return Q}function i(B,Q){var K=B.sortIndex-Q.sortIndex;return K!==0?K:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;a.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();a.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,v=null,x=3,_=!1,S=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(B){for(var Q=t(p);Q!==null;){if(Q.callback===null)n(p);else if(Q.startTime<=B)n(p),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(p)}}function P(B){if(A=!1,R(B),!S)if(t(f)!==null)S=!0,ye(F);else{var Q=t(p);Q!==null&&we(P,Q.startTime-B)}}function F(B,Q){S=!1,A&&(A=!1,w(G),G=-1),_=!0;var K=x;try{for(R(Q),v=t(f);v!==null&&(!(v.expirationTime>Q)||B&&!H());){var j=v.callback;if(typeof j=="function"){v.callback=null,x=v.priorityLevel;var ie=j(v.expirationTime<=Q);Q=a.unstable_now(),typeof ie=="function"?v.callback=ie:v===t(f)&&n(f),R(Q)}else n(f);v=t(f)}if(v!==null)var Ce=!0;else{var Ye=t(p);Ye!==null&&we(P,Ye.startTime-Q),Ce=!1}return Ce}finally{v=null,x=K,_=!1}}var N=!1,z=null,G=-1,D=5,L=-1;function H(){return!(a.unstable_now()-L<D)}function ee(){if(z!==null){var B=a.unstable_now();L=B;var Q=!0;try{Q=z(!0,B)}finally{Q?ne():(N=!1,z=null)}}else N=!1}var ne;if(typeof C=="function")ne=function(){C(ee)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,fe=me.port2;me.port1.onmessage=ee,ne=function(){fe.postMessage(null)}}else ne=function(){T(ee,0)};function ye(B){z=B,N||(N=!0,ne())}function we(B,Q){G=T(function(){B(a.unstable_now())},Q)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(B){B.callback=null},a.unstable_continueExecution=function(){S||_||(S=!0,ye(F))},a.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},a.unstable_getCurrentPriorityLevel=function(){return x},a.unstable_getFirstCallbackNode=function(){return t(f)},a.unstable_next=function(B){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var K=x;x=Q;try{return B()}finally{x=K}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=x;x=B;try{return Q()}finally{x=K}},a.unstable_scheduleCallback=function(B,Q,K){var j=a.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?j+K:j):K=j,B){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=K+ie,B={id:m++,callback:Q,priorityLevel:B,startTime:K,expirationTime:ie,sortIndex:-1},K>j?(B.sortIndex=K,e(p,B),t(f)===null&&B===t(p)&&(A?(w(G),G=-1):A=!0,we(P,K-j))):(B.sortIndex=ie,e(f,B),S||_||(S=!0,ye(F))),B},a.unstable_shouldYield=H,a.unstable_wrapCallback=function(B){var Q=x;return function(){var K=x;x=Q;try{return B.apply(this,arguments)}finally{x=K}}}})(Sv)),Sv}var vx;function gS(){return vx||(vx=1,wv.exports=mS()),wv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function vS(){if(yx)return Ir;yx=1;var a=og(),e=gS();function t(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(r,o){u(r,o),u(r+"Capture",o)}function u(r,o){for(i[r]=o,r=0;r<o.length;r++)n.add(o[r])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function x(r){return f.call(v,r)?!0:f.call(m,r)?!1:p.test(r)?v[r]=!0:(m[r]=!0,!1)}function _(r,o,d,y){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function S(r,o,d,y){if(o===null||typeof o>"u"||_(r,o,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function A(r,o,d,y,M,k,U){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=y,this.attributeNamespace=M,this.mustUseProperty=d,this.propertyName=r,this.type=o,this.sanitizeURL=k,this.removeEmptyString=U}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){T[r]=new A(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];T[o]=new A(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){T[r]=new A(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){T[r]=new A(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){T[r]=new A(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){T[r]=new A(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){T[r]=new A(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){T[r]=new A(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){T[r]=new A(r,5,!1,r.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function C(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(w,C);T[o]=new A(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(w,C);T[o]=new A(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(w,C);T[o]=new A(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){T[r]=new A(r,1,!1,r.toLowerCase(),null,!1,!1)}),T.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){T[r]=new A(r,1,!1,r.toLowerCase(),null,!0,!0)});function R(r,o,d,y){var M=T.hasOwnProperty(o)?T[o]:null;(M!==null?M.type!==0:y||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,d,M,y)&&(d=null),y||M===null?x(o)&&(d===null?r.removeAttribute(o):r.setAttribute(o,""+d)):M.mustUseProperty?r[M.propertyName]=d===null?M.type===3?!1:"":d:(o=M.attributeName,y=M.attributeNamespace,d===null?r.removeAttribute(o):(M=M.type,d=M===3||M===4&&d===!0?"":""+d,y?r.setAttributeNS(y,o,d):r.setAttribute(o,d))))}var P=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),N=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),H=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),B=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=B&&r[B]||r["@@iterator"],typeof r=="function"?r:null)}var K=Object.assign,j;function ie(r){if(j===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);j=o&&o[1]||""}return`
`+j+r}var Ce=!1;function Ye(r,o){if(!r||Ce)return"";Ce=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_e){var y=_e}Reflect.construct(r,[],o)}else{try{o.call()}catch(_e){y=_e}r.call(o.prototype)}else{try{throw Error()}catch(_e){y=_e}r()}}catch(_e){if(_e&&y&&typeof _e.stack=="string"){for(var M=_e.stack.split(`
`),k=y.stack.split(`
`),U=M.length-1,Z=k.length-1;1<=U&&0<=Z&&M[U]!==k[Z];)Z--;for(;1<=U&&0<=Z;U--,Z--)if(M[U]!==k[Z]){if(U!==1||Z!==1)do if(U--,Z--,0>Z||M[U]!==k[Z]){var te=`
`+M[U].replace(" at new "," at ");return r.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",r.displayName)),te}while(1<=U&&0<=Z);break}}}finally{Ce=!1,Error.prepareStackTrace=d}return(r=r?r.displayName||r.name:"")?ie(r):""}function at(r){switch(r.tag){case 5:return ie(r.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return r=Ye(r.type,!1),r;case 11:return r=Ye(r.type.render,!1),r;case 1:return r=Ye(r.type,!0),r;default:return""}}function he(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case N:return"Portal";case D:return"Profiler";case G:return"StrictMode";case ne:return"Suspense";case me:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case H:return(r.displayName||"Context")+".Consumer";case L:return(r._context.displayName||"Context")+".Provider";case ee:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case fe:return o=r.displayName||null,o!==null?o:he(r.type)||"Memo";case ye:o=r._payload,r=r._init;try{return he(r(o))}catch{}}return null}function be(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(o);case 8:return o===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Fe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function it(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function st(r){var o=it(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),y=""+r[o];if(!r.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var M=d.get,k=d.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return M.call(this)},set:function(U){y=""+U,k.call(this,U)}}),Object.defineProperty(r,o,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(U){y=""+U},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Lt(r){r._valueTracker||(r._valueTracker=st(r))}function on(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var d=o.getValue(),y="";return r&&(y=it(r)?r.checked?"true":"false":r.value),r=y,r!==d?(o.setValue(r),!0):!1}function yt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Pe(r,o){var d=o.checked;return K({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??r._wrapperState.initialChecked})}function X(r,o){var d=o.defaultValue==null?"":o.defaultValue,y=o.checked!=null?o.checked:o.defaultChecked;d=Fe(o.value!=null?o.value:d),r._wrapperState={initialChecked:y,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Le(r,o){o=o.checked,o!=null&&R(r,"checked",o,!1)}function Be(r,o){Le(r,o);var d=Fe(o.value),y=o.type;if(d!=null)y==="number"?(d===0&&r.value===""||r.value!=d)&&(r.value=""+d):r.value!==""+d&&(r.value=""+d);else if(y==="submit"||y==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?Oe(r,o.type,d):o.hasOwnProperty("defaultValue")&&Oe(r,o.type,Fe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function Ke(r,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var y=o.type;if(!(y!=="submit"&&y!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,d||o===r.value||(r.value=o),r.defaultValue=o}d=r.name,d!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,d!==""&&(r.name=d)}function Oe(r,o,d){(o!=="number"||yt(r.ownerDocument)!==r)&&(d==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+d&&(r.defaultValue=""+d))}var ot=Array.isArray;function $e(r,o,d,y){if(r=r.options,o){o={};for(var M=0;M<d.length;M++)o["$"+d[M]]=!0;for(d=0;d<r.length;d++)M=o.hasOwnProperty("$"+r[d].value),r[d].selected!==M&&(r[d].selected=M),M&&y&&(r[d].defaultSelected=!0)}else{for(d=""+Fe(d),o=null,M=0;M<r.length;M++){if(r[M].value===d){r[M].selected=!0,y&&(r[M].defaultSelected=!0);return}o!==null||r[M].disabled||(o=r[M])}o!==null&&(o.selected=!0)}}function ht(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function W(r,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(t(92));if(ot(d)){if(1<d.length)throw Error(t(93));d=d[0]}o=d}o==null&&(o=""),d=o}r._wrapperState={initialValue:Fe(d)}}function O(r,o){var d=Fe(o.value),y=Fe(o.defaultValue);d!=null&&(d=""+d,d!==r.value&&(r.value=d),o.defaultValue==null&&r.defaultValue!==d&&(r.defaultValue=d)),y!=null&&(r.defaultValue=""+y)}function ue(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function Te(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Re(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?Te(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Se,Mt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,y,M){MSApp.execUnsafeLocalFunction(function(){return r(o,d,y,M)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(Se=Se||document.createElement("div"),Se.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Se.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function et(r,o){if(o){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=o;return}}r.textContent=o}var Tt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(Tt).forEach(function(r){wt.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),Tt[o]=Tt[r]})});function Ne(r,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||Tt.hasOwnProperty(r)&&Tt[r]?(""+o).trim():o+"px"}function Je(r,o){r=r.style;for(var d in o)if(o.hasOwnProperty(d)){var y=d.indexOf("--")===0,M=Ne(d,o[d],y);d==="float"&&(d="cssFloat"),y?r.setProperty(d,M):r[d]=M}}var Dt=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $(r,o){if(o){if(Dt[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ge(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ze=null;function J(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ve=null,He=null,Ge=null;function We(r){if(r=Aa(r)){if(typeof Ve!="function")throw Error(t(280));var o=r.stateNode;o&&(o=yh(o),Ve(r.stateNode,r.type,o))}}function ke(r){He?Ge?Ge.push(r):Ge=[r]:He=r}function lt(){if(He){var r=He,o=Ge;if(Ge=He=null,We(r),o)for(r=0;r<o.length;r++)We(o[r])}}function Pt(r,o){return r(o)}function un(){}var en=!1;function Xn(r,o,d){if(en)return r(o,d);en=!0;try{return Pt(r,o,d)}finally{en=!1,(He!==null||Ge!==null)&&(un(),lt())}}function Un(r,o){var d=r.stateNode;if(d===null)return null;var y=yh(d);if(y===null)return null;d=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(t(231,o,typeof d));return d}var fl=!1;if(c)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){fl=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{fl=!1}function pl(r,o,d,y,M,k,U,Z,te){var _e=Array.prototype.slice.call(arguments,3);try{o.apply(d,_e)}catch(Ue){this.onError(Ue)}}var Ri=!1,Qa=null,Fr=!1,po=null,mo={onError:function(r){Ri=!0,Qa=r}};function Lu(r,o,d,y,M,k,U,Z,te){Ri=!1,Qa=null,pl.apply(mo,arguments)}function go(r,o,d,y,M,k,U,Z,te){if(Lu.apply(this,arguments),Ri){if(Ri){var _e=Qa;Ri=!1,Qa=null}else throw Error(t(198));Fr||(Fr=!0,po=_e)}}function na(r){var o=r,d=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(d=o.return),r=o.return;while(r)}return o.tag===3?d:null}function ml(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function Nu(r){if(na(r)!==r)throw Error(t(188))}function Du(r){var o=r.alternate;if(!o){if(o=na(r),o===null)throw Error(t(188));return o!==r?null:r}for(var d=r,y=o;;){var M=d.return;if(M===null)break;var k=M.alternate;if(k===null){if(y=M.return,y!==null){d=y;continue}break}if(M.child===k.child){for(k=M.child;k;){if(k===d)return Nu(M),r;if(k===y)return Nu(M),o;k=k.sibling}throw Error(t(188))}if(d.return!==y.return)d=M,y=k;else{for(var U=!1,Z=M.child;Z;){if(Z===d){U=!0,d=M,y=k;break}if(Z===y){U=!0,y=M,d=k;break}Z=Z.sibling}if(!U){for(Z=k.child;Z;){if(Z===d){U=!0,d=k,y=M;break}if(Z===y){U=!0,y=k,d=M;break}Z=Z.sibling}if(!U)throw Error(t(189))}}if(d.alternate!==y)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?r:o}function Ou(r){return r=Du(r),r!==null?Uu(r):null}function Uu(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=Uu(r);if(o!==null)return o;r=r.sibling}return null}var Fu=e.unstable_scheduleCallback,Bu=e.unstable_cancelCallback,V=e.unstable_shouldYield,oe=e.unstable_requestPaint,ce=e.unstable_now,xe=e.unstable_getCurrentPriorityLevel,le=e.unstable_ImmediatePriority,Ze=e.unstable_UserBlockingPriority,ut=e.unstable_NormalPriority,bt=e.unstable_LowPriority,pt=e.unstable_IdlePriority,kt=null,tt=null;function rt(r){if(tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(kt,r,void 0,(r.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:xn,jt=Math.log,an=Math.LN2;function xn(r){return r>>>=0,r===0?32:31-(jt(r)/an|0)|0}var sn=64,gt=4194304;function dn(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function rn(r,o){var d=r.pendingLanes;if(d===0)return 0;var y=0,M=r.suspendedLanes,k=r.pingedLanes,U=d&268435455;if(U!==0){var Z=U&~M;Z!==0?y=dn(Z):(k&=U,k!==0&&(y=dn(k)))}else U=d&~M,U!==0?y=dn(U):k!==0&&(y=dn(k));if(y===0)return 0;if(o!==0&&o!==y&&(o&M)===0&&(M=y&-y,k=o&-o,M>=k||M===16&&(k&4194240)!==0))return o;if((y&4)!==0&&(y|=d&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=y;0<o;)d=31-Nt(o),M=1<<d,y|=r[d],o&=~M;return y}function Si(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Br(r,o){for(var d=r.suspendedLanes,y=r.pingedLanes,M=r.expirationTimes,k=r.pendingLanes;0<k;){var U=31-Nt(k),Z=1<<U,te=M[U];te===-1?((Z&d)===0||(Z&y)!==0)&&(M[U]=Si(Z,o)):te<=o&&(r.expiredLanes|=Z),k&=~Z}}function ri(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ai(){var r=sn;return sn<<=1,(sn&4194240)===0&&(sn=64),r}function Sn(r){for(var o=[],d=0;31>d;d++)o.push(r);return o}function Yn(r,o,d){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-Nt(o),r[o]=d}function Hi(r,o){var d=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var y=r.eventTimes;for(r=r.expirationTimes;0<d;){var M=31-Nt(d),k=1<<M;o[M]=0,y[M]=-1,r[M]=-1,d&=~k}}function Fn(r,o){var d=r.entangledLanes|=o;for(r=r.entanglements;d;){var y=31-Nt(d),M=1<<y;M&o|r[y]&o&&(r[y]|=o),d&=~M}}var zt=0;function ia(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var ir,Cc,Ef,zu,Vu,_s=!1,Hu=[],ra=null,tn=null,xa=null,bs=new Map,vo=new Map,$a=[],Gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $n(r,o){switch(r){case"focusin":case"focusout":ra=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":bs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(o.pointerId)}}function ws(r,o,d,y,M,k){return r===null||r.nativeEvent!==k?(r={blockedOn:o,domEventName:d,eventSystemFlags:y,nativeEvent:k,targetContainers:[M]},o!==null&&(o=Aa(o),o!==null&&Cc(o)),r):(r.eventSystemFlags|=y,o=r.targetContainers,M!==null&&o.indexOf(M)===-1&&o.push(M),r)}function Wg(r,o,d,y,M){switch(o){case"focusin":return ra=ws(ra,r,o,d,y,M),!0;case"dragenter":return tn=ws(tn,r,o,d,y,M),!0;case"mouseover":return xa=ws(xa,r,o,d,y,M),!0;case"pointerover":var k=M.pointerId;return bs.set(k,ws(bs.get(k)||null,r,o,d,y,M)),!0;case"gotpointercapture":return k=M.pointerId,vo.set(k,ws(vo.get(k)||null,r,o,d,y,M)),!0}return!1}function ju(r){var o=ss(r.target);if(o!==null){var d=na(o);if(d!==null){if(o=d.tag,o===13){if(o=ml(d),o!==null){r.blockedOn=o,Vu(r.priority,function(){Ef(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Gu(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var d=br(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(d===null){d=r.nativeEvent;var y=new d.constructor(d.type,d);ze=y,d.target.dispatchEvent(y),ze=null}else return o=Aa(d),o!==null&&Cc(o),r.blockedOn=d,!1;o.shift()}return!0}function gl(r,o,d){Gu(r)&&d.delete(o)}function aa(){_s=!1,ra!==null&&Gu(ra)&&(ra=null),tn!==null&&Gu(tn)&&(tn=null),xa!==null&&Gu(xa)&&(xa=null),bs.forEach(gl),vo.forEach(gl)}function vl(r,o){r.blockedOn===o&&(r.blockedOn=null,_s||(_s=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,aa)))}function yl(r){function o(M){return vl(M,r)}if(0<Hu.length){vl(Hu[0],r);for(var d=1;d<Hu.length;d++){var y=Hu[d];y.blockedOn===r&&(y.blockedOn=null)}}for(ra!==null&&vl(ra,r),tn!==null&&vl(tn,r),xa!==null&&vl(xa,r),bs.forEach(o),vo.forEach(o),d=0;d<$a.length;d++)y=$a[d],y.blockedOn===r&&(y.blockedOn=null);for(;0<$a.length&&(d=$a[0],d.blockedOn===null);)ju(d),d.blockedOn===null&&$a.shift()}var Ii=P.ReactCurrentBatchConfig,_r=!0;function Wu(r,o,d,y){var M=zt,k=Ii.transition;Ii.transition=null;try{zt=1,Xu(r,o,d,y)}finally{zt=M,Ii.transition=k}}function Rc(r,o,d,y){var M=zt,k=Ii.transition;Ii.transition=null;try{zt=4,Xu(r,o,d,y)}finally{zt=M,Ii.transition=k}}function Xu(r,o,d,y){if(_r){var M=br(r,o,d,y);if(M===null)dh(r,o,y,Yu,d),$n(r,y);else if(Wg(M,r,o,d,y))y.stopPropagation();else if($n(r,y),o&4&&-1<Gg.indexOf(r)){for(;M!==null;){var k=Aa(M);if(k!==null&&ir(k),k=br(r,o,d,y),k===null&&dh(r,o,y,Yu,d),k===M)break;M=k}M!==null&&y.stopPropagation()}else dh(r,o,y,null,d)}}var Yu=null;function br(r,o,d,y){if(Yu=null,r=J(y),r=ss(r),r!==null)if(o=na(r),o===null)r=null;else if(d=o.tag,d===13){if(r=ml(o),r!==null)return r;r=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return Yu=r,null}function Af(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xe()){case le:return 1;case Ze:return 4;case ut:case bt:return 16;case pt:return 536870912;default:return 16}default:return 16}}var zr=null,Ic=null,ji=null;function xl(){if(ji)return ji;var r,o=Ic,d=o.length,y,M="value"in zr?zr.value:zr.textContent,k=M.length;for(r=0;r<d&&o[r]===M[r];r++);var U=d-r;for(y=1;y<=U&&o[d-y]===M[k-y];y++);return ji=M.slice(r,1<y?1-y:void 0)}function Ss(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function _a(){return!0}function qu(){return!1}function Pi(r){function o(d,y,M,k,U){this._reactName=d,this._targetInst=M,this.type=y,this.nativeEvent=k,this.target=U,this.currentTarget=null;for(var Z in r)r.hasOwnProperty(Z)&&(d=r[Z],this[Z]=d?d(k):k[Z]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?_a:qu,this.isPropagationStopped=qu,this}return K(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=_a)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=_a)},persist:function(){},isPersistent:_a}),o}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Pi(Ms),Ts=K({},Ms,{view:0,detail:0}),yo=Pi(Ts),Gi,wr,Sr,xo=K({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Sr&&(Sr&&r.type==="mousemove"?(Gi=r.screenX-Sr.screenX,wr=r.screenY-Sr.screenY):wr=Gi=0,Sr=r),Gi)},movementY:function(r){return"movementY"in r?r.movementY:wr}}),Pc=Pi(xo),ba=K({},xo,{dataTransfer:0}),es=Pi(ba),Ku=K({},Ts,{relatedTarget:0}),Zu=Pi(Ku),Ju=K({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),kf=Pi(Ju),Cf=K({},Ms,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Lc=Pi(Cf),Qu=K({},Ms,{data:0}),Nc=Pi(Qu),Rf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},If={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _o(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Dc[r])?!!o[r]:!1}function ts(){return _o}var $u=K({},Ts,{key:function(r){if(r.key){var o=Rf[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Ss(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?If[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(r){return r.type==="keypress"?Ss(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ss(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),eh=Pi($u),Mr=K({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rr=Pi(Mr),Es=K({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),wa=Pi(Es),Sa=K({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),As=Pi(Sa),Pf=K({},xo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Oc=Pi(Pf),Uc=[9,13,27,32],Li=c&&"CompositionEvent"in window,fi=null;c&&"documentMode"in document&&(fi=document.documentMode);var Pn=c&&"TextEvent"in window&&!fi,bo=c&&(!Li||fi&&8<fi&&11>=fi),Tr=" ",Fc=!1;function Bc(r,o){switch(r){case"keyup":return Uc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function th(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ns=!1;function Lf(r,o){switch(r){case"compositionend":return th(o);case"keypress":return o.which!==32?null:(Fc=!0,Tr);case"textInput":return r=o.data,r===Tr&&Fc?null:r;default:return null}}function bl(r,o){if(ns)return r==="compositionend"||!Li&&Bc(r,o)?(r=xl(),ji=Ic=zr=null,ns=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return bo&&o.locale!=="ko"?null:o.data;default:return null}}var wo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!wo[r.type]:o==="textarea"}function So(r,o,d,y){ke(y),o=fh(o,"onChange"),0<o.length&&(d=new _l("onChange","change",null,d,y),r.push({event:d,listeners:o}))}var is=null,Mo=null;function Nf(r){ko(r,0)}function Ma(r){var o=Hn(r);if(on(o))return r}function Df(r,o){if(r==="change")return o}var To=!1;if(c){var Wi;if(c){var ks="oninput"in document;if(!ks){var Cs=document.createElement("div");Cs.setAttribute("oninput","return;"),ks=typeof Cs.oninput=="function"}Wi=ks}else Wi=!1;To=Wi&&(!document.documentMode||9<document.documentMode)}function Vr(){is&&(is.detachEvent("onpropertychange",ih),Mo=is=null)}function ih(r){if(r.propertyName==="value"&&Ma(Mo)){var o=[];So(o,Mo,r,J(r)),Xn(Nf,o)}}function Eo(r,o,d){r==="focusin"?(Vr(),is=o,Mo=d,is.attachEvent("onpropertychange",ih)):r==="focusout"&&Vr()}function Of(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ma(Mo)}function zc(r,o){if(r==="click")return Ma(o)}function Nn(r,o){if(r==="input"||r==="change")return Ma(o)}function rh(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var ar=typeof Object.is=="function"?Object.is:rh;function Rs(r,o){if(ar(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var d=Object.keys(r),y=Object.keys(o);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var M=d[y];if(!f.call(o,M)||!ar(r[M],o[M]))return!1}return!0}function wl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function sr(r,o){var d=wl(r);r=0;for(var y;d;){if(d.nodeType===3){if(y=r+d.textContent.length,r<=o&&y>=o)return{node:d,offset:o-r};r=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=wl(d)}}function Is(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Is(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Dn(){for(var r=window,o=yt();o instanceof r.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)r=o.contentWindow;else break;o=yt(r.document)}return o}function si(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function oi(r){var o=Dn(),d=r.focusedElem,y=r.selectionRange;if(o!==d&&d&&d.ownerDocument&&Is(d.ownerDocument.documentElement,d)){if(y!==null&&si(d)){if(o=y.start,r=y.end,r===void 0&&(r=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(r,d.value.length);else if(r=(o=d.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var M=d.textContent.length,k=Math.min(y.start,M);y=y.end===void 0?k:Math.min(y.end,M),!r.extend&&k>y&&(M=y,y=k,k=M),M=sr(d,k);var U=sr(d,y);M&&U&&(r.rangeCount!==1||r.anchorNode!==M.node||r.anchorOffset!==M.offset||r.focusNode!==U.node||r.focusOffset!==U.offset)&&(o=o.createRange(),o.setStart(M.node,M.offset),r.removeAllRanges(),k>y?(r.addRange(o),r.extend(U.node,U.offset)):(o.setEnd(U.node,U.offset),r.addRange(o)))}}for(o=[],r=d;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)r=o[d],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var ah=c&&"documentMode"in document&&11>=document.documentMode,sa=null,Ps=null,Sl=null,li=!1;function sh(r,o,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;li||sa==null||sa!==yt(y)||(y=sa,"selectionStart"in y&&si(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Sl&&Rs(Sl,y)||(Sl=y,y=fh(Ps,"onSelect"),0<y.length&&(o=new _l("onSelect","select",null,o,d),r.push({event:o,listeners:y}),o.target=sa)))}function Ao(r,o){var d={};return d[r.toLowerCase()]=o.toLowerCase(),d["Webkit"+r]="webkit"+o,d["Moz"+r]="moz"+o,d}var rs={animationend:Ao("Animation","AnimationEnd"),animationiteration:Ao("Animation","AnimationIteration"),animationstart:Ao("Animation","AnimationStart"),transitionend:Ao("Transition","TransitionEnd")},Hr={},jr={};c&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function oa(r){if(Hr[r])return Hr[r];if(!rs[r])return r;var o=rs[r],d;for(d in o)if(o.hasOwnProperty(d)&&d in jr)return Hr[r]=o[d];return r}var Ml=oa("animationend"),Tl=oa("animationiteration"),Vc=oa("animationstart"),Hc=oa("transitionend"),jc=new Map,Gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(r,o){jc.set(r,o),s(o,[r])}for(var oh=0;oh<Gc.length;oh++){var El=Gc[oh],Al=El.toLowerCase(),Uf=El[0].toUpperCase()+El.slice(1);Ta(Al,"on"+Uf)}Ta(Ml,"onAnimationEnd"),Ta(Tl,"onAnimationIteration"),Ta(Vc,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(Hc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lh=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function uh(r,o,d){var y=r.type||"unknown-event";r.currentTarget=d,go(y,o,void 0,r),r.currentTarget=null}function ko(r,o){o=(o&4)!==0;for(var d=0;d<r.length;d++){var y=r[d],M=y.event;y=y.listeners;e:{var k=void 0;if(o)for(var U=y.length-1;0<=U;U--){var Z=y[U],te=Z.instance,_e=Z.currentTarget;if(Z=Z.listener,te!==k&&M.isPropagationStopped())break e;uh(M,Z,_e),k=te}else for(U=0;U<y.length;U++){if(Z=y[U],te=Z.instance,_e=Z.currentTarget,Z=Z.listener,te!==k&&M.isPropagationStopped())break e;uh(M,Z,_e),k=te}}}if(Fr)throw r=po,Fr=!1,po=null,r}function En(r,o){var d=o[Ds];d===void 0&&(d=o[Ds]=new Set);var y=r+"__bubble";d.has(y)||(ch(o,r,2,!1),d.add(y))}function hh(r,o,d){var y=0;o&&(y|=4),ch(d,r,y,o)}var kl="_reactListening"+Math.random().toString(36).slice(2);function Co(r){if(!r[kl]){r[kl]=!0,n.forEach(function(d){d!=="selectionchange"&&(lh.has(d)||hh(d,!1,r),hh(d,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[kl]||(o[kl]=!0,hh("selectionchange",!1,o))}}function ch(r,o,d,y){switch(Af(o)){case 1:var M=Wu;break;case 4:M=Rc;break;default:M=Xu}d=M.bind(null,o,d,r),M=void 0,!fl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(M=!0),y?M!==void 0?r.addEventListener(o,d,{capture:!0,passive:M}):r.addEventListener(o,d,!0):M!==void 0?r.addEventListener(o,d,{passive:M}):r.addEventListener(o,d,!1)}function dh(r,o,d,y,M){var k=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var Z=y.stateNode.containerInfo;if(Z===M||Z.nodeType===8&&Z.parentNode===M)break;if(U===4)for(U=y.return;U!==null;){var te=U.tag;if((te===3||te===4)&&(te=U.stateNode.containerInfo,te===M||te.nodeType===8&&te.parentNode===M))return;U=U.return}for(;Z!==null;){if(U=ss(Z),U===null)return;if(te=U.tag,te===5||te===6){y=k=U;continue e}Z=Z.parentNode}}y=y.return}Xn(function(){var _e=k,Ue=J(d),Xe=[];e:{var De=jc.get(r);if(De!==void 0){var vt=_l,Et=r;switch(r){case"keypress":if(Ss(d)===0)break e;case"keydown":case"keyup":vt=eh;break;case"focusin":Et="focus",vt=Zu;break;case"focusout":Et="blur",vt=Zu;break;case"beforeblur":case"afterblur":vt=Zu;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=Pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=es;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=wa;break;case Ml:case Tl:case Vc:vt=kf;break;case Hc:vt=As;break;case"scroll":vt=yo;break;case"wheel":vt=Oc;break;case"copy":case"cut":case"paste":vt=Lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=rr}var Ct=(o&4)!==0,ti=!Ct&&r==="scroll",de=Ct?De!==null?De+"Capture":null:De;Ct=[];for(var re=_e,pe;re!==null;){pe=re;var Qe=pe.stateNode;if(pe.tag===5&&Qe!==null&&(pe=Qe,de!==null&&(Qe=Un(re,de),Qe!=null&&Ct.push(Ro(re,Qe,pe)))),ti)break;re=re.return}0<Ct.length&&(De=new vt(De,Et,null,d,Ue),Xe.push({event:De,listeners:Ct}))}}if((o&7)===0){e:{if(De=r==="mouseover"||r==="pointerover",vt=r==="mouseout"||r==="pointerout",De&&d!==ze&&(Et=d.relatedTarget||d.fromElement)&&(ss(Et)||Et[or]))break e;if((vt||De)&&(De=Ue.window===Ue?Ue:(De=Ue.ownerDocument)?De.defaultView||De.parentWindow:window,vt?(Et=d.relatedTarget||d.toElement,vt=_e,Et=Et?ss(Et):null,Et!==null&&(ti=na(Et),Et!==ti||Et.tag!==5&&Et.tag!==6)&&(Et=null)):(vt=null,Et=_e),vt!==Et)){if(Ct=Pc,Qe="onMouseLeave",de="onMouseEnter",re="mouse",(r==="pointerout"||r==="pointerover")&&(Ct=rr,Qe="onPointerLeave",de="onPointerEnter",re="pointer"),ti=vt==null?De:Hn(vt),pe=Et==null?De:Hn(Et),De=new Ct(Qe,re+"leave",vt,d,Ue),De.target=ti,De.relatedTarget=pe,Qe=null,ss(Ue)===_e&&(Ct=new Ct(de,re+"enter",Et,d,Ue),Ct.target=pe,Ct.relatedTarget=ti,Qe=Ct),ti=Qe,vt&&Et)t:{for(Ct=vt,de=Et,re=0,pe=Ct;pe;pe=Ls(pe))re++;for(pe=0,Qe=de;Qe;Qe=Ls(Qe))pe++;for(;0<re-pe;)Ct=Ls(Ct),re--;for(;0<pe-re;)de=Ls(de),pe--;for(;re--;){if(Ct===de||de!==null&&Ct===de.alternate)break t;Ct=Ls(Ct),de=Ls(de)}Ct=null}else Ct=null;vt!==null&&Ff(Xe,De,vt,Ct,!1),Et!==null&&ti!==null&&Ff(Xe,ti,Et,Ct,!0)}}e:{if(De=_e?Hn(_e):window,vt=De.nodeName&&De.nodeName.toLowerCase(),vt==="select"||vt==="input"&&De.type==="file")var It=Df;else if(nh(De))if(To)It=Nn;else{It=Of;var Ut=Eo}else(vt=De.nodeName)&&vt.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(It=zc);if(It&&(It=It(r,_e))){So(Xe,It,d,Ue);break e}Ut&&Ut(r,De,_e),r==="focusout"&&(Ut=De._wrapperState)&&Ut.controlled&&De.type==="number"&&Oe(De,"number",De.value)}switch(Ut=_e?Hn(_e):window,r){case"focusin":(nh(Ut)||Ut.contentEditable==="true")&&(sa=Ut,Ps=_e,Sl=null);break;case"focusout":Sl=Ps=sa=null;break;case"mousedown":li=!0;break;case"contextmenu":case"mouseup":case"dragend":li=!1,sh(Xe,d,Ue);break;case"selectionchange":if(ah)break;case"keydown":case"keyup":sh(Xe,d,Ue)}var Ft;if(Li)e:{switch(r){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else ns?Bc(r,d)&&(Gt="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Gt="onCompositionStart");Gt&&(bo&&d.locale!=="ko"&&(ns||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&ns&&(Ft=xl()):(zr=Ue,Ic="value"in zr?zr.value:zr.textContent,ns=!0)),Ut=fh(_e,Gt),0<Ut.length&&(Gt=new Nc(Gt,r,null,d,Ue),Xe.push({event:Gt,listeners:Ut}),Ft?Gt.data=Ft:(Ft=th(d),Ft!==null&&(Gt.data=Ft)))),(Ft=Pn?Lf(r,d):bl(r,d))&&(_e=fh(_e,"onBeforeInput"),0<_e.length&&(Ue=new Nc("onBeforeInput","beforeinput",null,d,Ue),Xe.push({event:Ue,listeners:_e}),Ue.data=Ft))}ko(Xe,o)})}function Ro(r,o,d){return{instance:r,listener:o,currentTarget:d}}function fh(r,o){for(var d=o+"Capture",y=[];r!==null;){var M=r,k=M.stateNode;M.tag===5&&k!==null&&(M=k,k=Un(r,d),k!=null&&y.unshift(Ro(r,k,M)),k=Un(r,o),k!=null&&y.push(Ro(r,k,M))),r=r.return}return y}function Ls(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Ff(r,o,d,y,M){for(var k=o._reactName,U=[];d!==null&&d!==y;){var Z=d,te=Z.alternate,_e=Z.stateNode;if(te!==null&&te===y)break;Z.tag===5&&_e!==null&&(Z=_e,M?(te=Un(d,k),te!=null&&U.unshift(Ro(d,te,Z))):M||(te=Un(d,k),te!=null&&U.push(Ro(d,te,Z)))),d=d.return}U.length!==0&&r.push({event:o,listeners:U})}var Xg=/\r\n?/g,Bf=/\u0000|\uFFFD/g;function Wc(r){return(typeof r=="string"?r:""+r).replace(Xg,`
`).replace(Bf,"")}function Cl(r,o,d){if(o=Wc(o),Wc(r)!==o&&d)throw Error(t(425))}function Rl(){}var Io=null,Xc=null;function Yc(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var qc=typeof setTimeout=="function"?setTimeout:void 0,Kc=typeof clearTimeout=="function"?clearTimeout:void 0,ph=typeof Promise=="function"?Promise:void 0,Yg=typeof queueMicrotask=="function"?queueMicrotask:typeof ph<"u"?function(r){return ph.resolve(null).then(r).catch(zf)}:qc;function zf(r){setTimeout(function(){throw r})}function mh(r,o){var d=o,y=0;do{var M=d.nextSibling;if(r.removeChild(d),M&&M.nodeType===8)if(d=M.data,d==="/$"){if(y===0){r.removeChild(M),yl(o);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=M}while(d);yl(o)}function Ea(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function Zc(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return r;o--}else d==="/$"&&o++}r=r.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),ei="__reactFiber$"+Ns,Po="__reactProps$"+Ns,or="__reactContainer$"+Ns,Ds="__reactEvents$"+Ns,gh="__reactListeners$"+Ns,vh="__reactHandles$"+Ns;function ss(r){var o=r[ei];if(o)return o;for(var d=r.parentNode;d;){if(o=d[or]||d[ei]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(r=Zc(r);r!==null;){if(d=r[ei])return d;r=Zc(r)}return o}r=d,d=r.parentNode}return null}function Aa(r){return r=r[ei]||r[or],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Hn(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function yh(r){return r[Po]||null}var Jc=[],ui=-1;function Bn(r){return{current:r}}function An(r){0>ui||(r.current=Jc[ui],Jc[ui]=null,ui--)}function Mn(r,o){ui++,Jc[ui]=r.current,r.current=o}var ka={},pi=Bn(ka),Ni=Bn(!1),Ca=ka;function Os(r,o){var d=r.type.contextTypes;if(!d)return ka;var y=r.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===o)return y.__reactInternalMemoizedMaskedChildContext;var M={},k;for(k in d)M[k]=o[k];return y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=M),M}function Mi(r){return r=r.childContextTypes,r!=null}function Il(){An(Ni),An(pi)}function Qc(r,o,d){if(pi.current!==ka)throw Error(t(168));Mn(pi,o),Mn(Ni,d)}function Pl(r,o,d){var y=r.stateNode;if(o=o.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var M in y)if(!(M in o))throw Error(t(108,be(r)||"Unknown",M));return K({},d,y)}function Us(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ka,Ca=pi.current,Mn(pi,r),Mn(Ni,Ni.current),!0}function $c(r,o,d){var y=r.stateNode;if(!y)throw Error(t(169));d?(r=Pl(r,o,Ca),y.__reactInternalMemoizedMergedChildContext=r,An(Ni),An(pi),Mn(pi,r)):An(Ni),Mn(Ni,d)}var Gr=null,Ll=!1,xh=!1;function Nl(r){Gr===null?Gr=[r]:Gr.push(r)}function Vf(r){Ll=!0,Nl(r)}function la(){if(!xh&&Gr!==null){xh=!0;var r=0,o=zt;try{var d=Gr;for(zt=1;r<d.length;r++){var y=d[r];do y=y(!0);while(y!==null)}Gr=null,Ll=!1}catch(M){throw Gr!==null&&(Gr=Gr.slice(r+1)),Fu(le,la),M}finally{zt=o,xh=!1}}return null}var Fs=[],Xi=0,_h=null,bh=0,Di=[],hi=0,Bs=null,nt=1,Er="";function Ra(r,o){Fs[Xi++]=bh,Fs[Xi++]=_h,_h=r,bh=o}function ed(r,o,d){Di[hi++]=nt,Di[hi++]=Er,Di[hi++]=Bs,Bs=r;var y=nt;r=Er;var M=32-Nt(y)-1;y&=~(1<<M),d+=1;var k=32-Nt(o)+M;if(30<k){var U=M-M%5;k=(y&(1<<U)-1).toString(32),y>>=U,M-=U,nt=1<<32-Nt(o)+M|d<<M|y,Er=k+r}else nt=1<<k|d<<M|y,Er=r}function td(r){r.return!==null&&(Ra(r,1),ed(r,1,0))}function Ia(r){for(;r===_h;)_h=Fs[--Xi],Fs[Xi]=null,bh=Fs[--Xi],Fs[Xi]=null;for(;r===Bs;)Bs=Di[--hi],Di[hi]=null,Er=Di[--hi],Di[hi]=null,nt=Di[--hi],Di[hi]=null}var mi=null,Oi=null,Rn=!1,Ar=null;function nd(r,o){var d=fa(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=r,o=r.deletions,o===null?(r.deletions=[d],r.flags|=16):o.push(d)}function id(r,o){switch(r.tag){case 5:var d=r.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,mi=r,Oi=Ea(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,mi=r,Oi=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=Bs!==null?{id:nt,overflow:Er}:null,r.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=fa(18,null,null,0),d.stateNode=o,d.return=r,r.child=d,mi=r,Oi=null,!0):!1;default:return!1}}function wh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Sh(r){if(Rn){var o=Oi;if(o){var d=o;if(!id(r,o)){if(wh(r))throw Error(t(418));o=Ea(d.nextSibling);var y=mi;o&&id(r,o)?nd(y,d):(r.flags=r.flags&-4097|2,Rn=!1,mi=r)}}else{if(wh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Rn=!1,mi=r}}}function Mh(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;mi=r}function Lo(r){if(r!==mi)return!1;if(!Rn)return Mh(r),Rn=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!Yc(r.type,r.memoizedProps)),o&&(o=Oi)){if(wh(r))throw rd(),Error(t(418));for(;o;)nd(r,o),o=Ea(o.nextSibling)}if(Mh(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"){if(o===0){Oi=Ea(r.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}r=r.nextSibling}Oi=null}}else Oi=mi?Ea(r.stateNode.nextSibling):null;return!0}function rd(){for(var r=Oi;r;)r=Ea(r.nextSibling)}function os(){Oi=mi=null,Rn=!1}function No(r){Ar===null?Ar=[r]:Ar.push(r)}var qg=P.ReactCurrentBatchConfig;function Dl(r,o,d){if(r=d.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var y=d.stateNode}if(!y)throw Error(t(147,r));var M=y,k=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===k?o.ref:(o=function(U){var Z=M.refs;U===null?delete Z[k]:Z[k]=U},o._stringRef=k,o)}if(typeof r!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,r))}return r}function Ol(r,o){throw r=Object.prototype.toString.call(o),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function ad(r){var o=r._init;return o(r._payload)}function sd(r){function o(de,re){if(r){var pe=de.deletions;pe===null?(de.deletions=[re],de.flags|=16):pe.push(re)}}function d(de,re){if(!r)return null;for(;re!==null;)o(de,re),re=re.sibling;return null}function y(de,re){for(de=new Map;re!==null;)re.key!==null?de.set(re.key,re):de.set(re.index,re),re=re.sibling;return de}function M(de,re){return de=Wo(de,re),de.index=0,de.sibling=null,de}function k(de,re,pe){return de.index=pe,r?(pe=de.alternate,pe!==null?(pe=pe.index,pe<re?(de.flags|=2,re):pe):(de.flags|=2,re)):(de.flags|=1048576,re)}function U(de){return r&&de.alternate===null&&(de.flags|=2),de}function Z(de,re,pe,Qe){return re===null||re.tag!==6?(re=fv(pe,de.mode,Qe),re.return=de,re):(re=M(re,pe),re.return=de,re)}function te(de,re,pe,Qe){var It=pe.type;return It===z?Ue(de,re,pe.props.children,Qe,pe.key):re!==null&&(re.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===ye&&ad(It)===re.type)?(Qe=M(re,pe.props),Qe.ref=Dl(de,re,pe),Qe.return=de,Qe):(Qe=hp(pe.type,pe.key,pe.props,null,de.mode,Qe),Qe.ref=Dl(de,re,pe),Qe.return=de,Qe)}function _e(de,re,pe,Qe){return re===null||re.tag!==4||re.stateNode.containerInfo!==pe.containerInfo||re.stateNode.implementation!==pe.implementation?(re=pv(pe,de.mode,Qe),re.return=de,re):(re=M(re,pe.children||[]),re.return=de,re)}function Ue(de,re,pe,Qe,It){return re===null||re.tag!==7?(re=$l(pe,de.mode,Qe,It),re.return=de,re):(re=M(re,pe),re.return=de,re)}function Xe(de,re,pe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=fv(""+re,de.mode,pe),re.return=de,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case F:return pe=hp(re.type,re.key,re.props,null,de.mode,pe),pe.ref=Dl(de,null,re),pe.return=de,pe;case N:return re=pv(re,de.mode,pe),re.return=de,re;case ye:var Qe=re._init;return Xe(de,Qe(re._payload),pe)}if(ot(re)||Q(re))return re=$l(re,de.mode,pe,null),re.return=de,re;Ol(de,re)}return null}function De(de,re,pe,Qe){var It=re!==null?re.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return It!==null?null:Z(de,re,""+pe,Qe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case F:return pe.key===It?te(de,re,pe,Qe):null;case N:return pe.key===It?_e(de,re,pe,Qe):null;case ye:return It=pe._init,De(de,re,It(pe._payload),Qe)}if(ot(pe)||Q(pe))return It!==null?null:Ue(de,re,pe,Qe,null);Ol(de,pe)}return null}function vt(de,re,pe,Qe,It){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return de=de.get(pe)||null,Z(re,de,""+Qe,It);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case F:return de=de.get(Qe.key===null?pe:Qe.key)||null,te(re,de,Qe,It);case N:return de=de.get(Qe.key===null?pe:Qe.key)||null,_e(re,de,Qe,It);case ye:var Ut=Qe._init;return vt(de,re,pe,Ut(Qe._payload),It)}if(ot(Qe)||Q(Qe))return de=de.get(pe)||null,Ue(re,de,Qe,It,null);Ol(re,Qe)}return null}function Et(de,re,pe,Qe){for(var It=null,Ut=null,Ft=re,Gt=re=0,ki=null;Ft!==null&&Gt<pe.length;Gt++){Ft.index>Gt?(ki=Ft,Ft=null):ki=Ft.sibling;var _n=De(de,Ft,pe[Gt],Qe);if(_n===null){Ft===null&&(Ft=ki);break}r&&Ft&&_n.alternate===null&&o(de,Ft),re=k(_n,re,Gt),Ut===null?It=_n:Ut.sibling=_n,Ut=_n,Ft=ki}if(Gt===pe.length)return d(de,Ft),Rn&&Ra(de,Gt),It;if(Ft===null){for(;Gt<pe.length;Gt++)Ft=Xe(de,pe[Gt],Qe),Ft!==null&&(re=k(Ft,re,Gt),Ut===null?It=Ft:Ut.sibling=Ft,Ut=Ft);return Rn&&Ra(de,Gt),It}for(Ft=y(de,Ft);Gt<pe.length;Gt++)ki=vt(Ft,de,Gt,pe[Gt],Qe),ki!==null&&(r&&ki.alternate!==null&&Ft.delete(ki.key===null?Gt:ki.key),re=k(ki,re,Gt),Ut===null?It=ki:Ut.sibling=ki,Ut=ki);return r&&Ft.forEach(function(Xo){return o(de,Xo)}),Rn&&Ra(de,Gt),It}function Ct(de,re,pe,Qe){var It=Q(pe);if(typeof It!="function")throw Error(t(150));if(pe=It.call(pe),pe==null)throw Error(t(151));for(var Ut=It=null,Ft=re,Gt=re=0,ki=null,_n=pe.next();Ft!==null&&!_n.done;Gt++,_n=pe.next()){Ft.index>Gt?(ki=Ft,Ft=null):ki=Ft.sibling;var Xo=De(de,Ft,_n.value,Qe);if(Xo===null){Ft===null&&(Ft=ki);break}r&&Ft&&Xo.alternate===null&&o(de,Ft),re=k(Xo,re,Gt),Ut===null?It=Xo:Ut.sibling=Xo,Ut=Xo,Ft=ki}if(_n.done)return d(de,Ft),Rn&&Ra(de,Gt),It;if(Ft===null){for(;!_n.done;Gt++,_n=pe.next())_n=Xe(de,_n.value,Qe),_n!==null&&(re=k(_n,re,Gt),Ut===null?It=_n:Ut.sibling=_n,Ut=_n);return Rn&&Ra(de,Gt),It}for(Ft=y(de,Ft);!_n.done;Gt++,_n=pe.next())_n=vt(Ft,de,Gt,_n.value,Qe),_n!==null&&(r&&_n.alternate!==null&&Ft.delete(_n.key===null?Gt:_n.key),re=k(_n,re,Gt),Ut===null?It=_n:Ut.sibling=_n,Ut=_n);return r&&Ft.forEach(function(hS){return o(de,hS)}),Rn&&Ra(de,Gt),It}function ti(de,re,pe,Qe){if(typeof pe=="object"&&pe!==null&&pe.type===z&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case F:e:{for(var It=pe.key,Ut=re;Ut!==null;){if(Ut.key===It){if(It=pe.type,It===z){if(Ut.tag===7){d(de,Ut.sibling),re=M(Ut,pe.props.children),re.return=de,de=re;break e}}else if(Ut.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===ye&&ad(It)===Ut.type){d(de,Ut.sibling),re=M(Ut,pe.props),re.ref=Dl(de,Ut,pe),re.return=de,de=re;break e}d(de,Ut);break}else o(de,Ut);Ut=Ut.sibling}pe.type===z?(re=$l(pe.props.children,de.mode,Qe,pe.key),re.return=de,de=re):(Qe=hp(pe.type,pe.key,pe.props,null,de.mode,Qe),Qe.ref=Dl(de,re,pe),Qe.return=de,de=Qe)}return U(de);case N:e:{for(Ut=pe.key;re!==null;){if(re.key===Ut)if(re.tag===4&&re.stateNode.containerInfo===pe.containerInfo&&re.stateNode.implementation===pe.implementation){d(de,re.sibling),re=M(re,pe.children||[]),re.return=de,de=re;break e}else{d(de,re);break}else o(de,re);re=re.sibling}re=pv(pe,de.mode,Qe),re.return=de,de=re}return U(de);case ye:return Ut=pe._init,ti(de,re,Ut(pe._payload),Qe)}if(ot(pe))return Et(de,re,pe,Qe);if(Q(pe))return Ct(de,re,pe,Qe);Ol(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,re!==null&&re.tag===6?(d(de,re.sibling),re=M(re,pe),re.return=de,de=re):(d(de,re),re=fv(pe,de.mode,Qe),re.return=de,de=re),U(de)):d(de,re)}return ti}var zs=sd(!0),Ul=sd(!1),Vs=Bn(null),Hs=null,Pa=null,Do=null;function js(){Do=Pa=Hs=null}function Fl(r){var o=Vs.current;An(Vs),r._currentValue=o}function Bl(r,o,d){for(;r!==null;){var y=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),r===d)break;r=r.return}}function ls(r,o){Hs=r,Do=Pa=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Qt=!0),r.firstContext=null)}function lr(r){var o=r._currentValue;if(Do!==r)if(r={context:r,memoizedValue:o,next:null},Pa===null){if(Hs===null)throw Error(t(308));Pa=r,Hs.dependencies={lanes:0,firstContext:r}}else Pa=Pa.next=r;return o}var La=null;function od(r){La===null?La=[r]:La.push(r)}function zl(r,o,d,y){var M=o.interleaved;return M===null?(d.next=d,od(o)):(d.next=M.next,M.next=d),o.interleaved=d,Wr(r,y)}function Wr(r,o){r.lanes|=o;var d=r.alternate;for(d!==null&&(d.lanes|=o),d=r,r=r.return;r!==null;)r.childLanes|=o,d=r.alternate,d!==null&&(d.childLanes|=o),d=r,r=r.return;return d.tag===3?d.stateNode:null}var bn=!1;function Kt(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jn(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function wn(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function Ln(r,o,d){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(mn&2)!==0){var M=y.pending;return M===null?o.next=o:(o.next=M.next,M.next=o),y.pending=o,Wr(r,d)}return M=y.interleaved,M===null?(o.next=o,od(y)):(o.next=M.next,M.next=o),y.interleaved=o,Wr(r,d)}function Ti(r,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var y=o.lanes;y&=r.pendingLanes,d|=y,o.lanes=d,Fn(r,d)}}function Gs(r,o){var d=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var M=null,k=null;if(d=d.firstBaseUpdate,d!==null){do{var U={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};k===null?M=k=U:k=k.next=U,d=d.next}while(d!==null);k===null?M=k=o:k=k.next=o}else M=k=o;d={baseState:y.baseState,firstBaseUpdate:M,lastBaseUpdate:k,shared:y.shared,effects:y.effects},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=o:r.next=o,d.lastBaseUpdate=o}function zn(r,o,d,y){var M=r.updateQueue;bn=!1;var k=M.firstBaseUpdate,U=M.lastBaseUpdate,Z=M.shared.pending;if(Z!==null){M.shared.pending=null;var te=Z,_e=te.next;te.next=null,U===null?k=_e:U.next=_e,U=te;var Ue=r.alternate;Ue!==null&&(Ue=Ue.updateQueue,Z=Ue.lastBaseUpdate,Z!==U&&(Z===null?Ue.firstBaseUpdate=_e:Z.next=_e,Ue.lastBaseUpdate=te))}if(k!==null){var Xe=M.baseState;U=0,Ue=_e=te=null,Z=k;do{var De=Z.lane,vt=Z.eventTime;if((y&De)===De){Ue!==null&&(Ue=Ue.next={eventTime:vt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var Et=r,Ct=Z;switch(De=o,vt=d,Ct.tag){case 1:if(Et=Ct.payload,typeof Et=="function"){Xe=Et.call(vt,Xe,De);break e}Xe=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Ct.payload,De=typeof Et=="function"?Et.call(vt,Xe,De):Et,De==null)break e;Xe=K({},Xe,De);break e;case 2:bn=!0}}Z.callback!==null&&Z.lane!==0&&(r.flags|=64,De=M.effects,De===null?M.effects=[Z]:De.push(Z))}else vt={eventTime:vt,lane:De,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ue===null?(_e=Ue=vt,te=Xe):Ue=Ue.next=vt,U|=De;if(Z=Z.next,Z===null){if(Z=M.shared.pending,Z===null)break;De=Z,Z=De.next,De.next=null,M.lastBaseUpdate=De,M.shared.pending=null}}while(!0);if(Ue===null&&(te=Xe),M.baseState=te,M.firstBaseUpdate=_e,M.lastBaseUpdate=Ue,o=M.shared.interleaved,o!==null){M=o;do U|=M.lane,M=M.next;while(M!==o)}else k===null&&(M.shared.lanes=0);Kl|=U,r.lanes=U,r.memoizedState=Xe}}function Oo(r,o,d){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var y=r[o],M=y.callback;if(M!==null){if(y.callback=null,y=d,typeof M!="function")throw Error(t(191,M));M.call(y)}}}var ua={},ur=Bn(ua),Ws=Bn(ua),Na=Bn(ua);function qn(r){if(r===ua)throw Error(t(174));return r}function Vl(r,o){switch(Mn(Na,o),Mn(Ws,r),Mn(ur,ua),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Re(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=Re(o,r)}An(ur),Mn(ur,o)}function us(){An(ur),An(Ws),An(Na)}function Xs(r){qn(Na.current);var o=qn(ur.current),d=Re(o,r.type);o!==d&&(Mn(Ws,r),Mn(ur,d))}function Uo(r){Ws.current===r&&(An(ur),An(Ws))}var In=Bn(0);function Xr(r){for(var o=r;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Fo=[];function ha(){for(var r=0;r<Fo.length;r++)Fo[r]._workInProgressVersionPrimary=null;Fo.length=0}var Ys=P.ReactCurrentDispatcher,qs=P.ReactCurrentBatchConfig,Da=0,kn=null,Vn=null,fn=null,Yr=!1,Ei=!1,hs=0,Yi=0;function gi(){throw Error(t(321))}function Hl(r,o){if(o===null)return!1;for(var d=0;d<o.length&&d<r.length;d++)if(!ar(r[d],o[d]))return!1;return!0}function jl(r,o,d,y,M,k){if(Da=k,kn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ys.current=r===null||r.memoizedState===null?qf:Kf,r=d(y,M),Ei){k=0;do{if(Ei=!1,hs=0,25<=k)throw Error(t(301));k+=1,fn=Vn=null,o.updateQueue=null,Ys.current=Zf,r=d(y,M)}while(Ei)}if(Ys.current=Ih,o=Vn!==null&&Vn.next!==null,Da=0,fn=Vn=kn=null,Yr=!1,o)throw Error(t(300));return r}function ld(){var r=hs!==0;return hs=0,r}function vi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?kn.memoizedState=fn=r:fn=fn.next=r,fn}function hr(){if(Vn===null){var r=kn.alternate;r=r!==null?r.memoizedState:null}else r=Vn.next;var o=fn===null?kn.memoizedState:fn.next;if(o!==null)fn=o,Vn=r;else{if(r===null)throw Error(t(310));Vn=r,r={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},fn===null?kn.memoizedState=fn=r:fn=fn.next=r}return fn}function Bo(r,o){return typeof o=="function"?o(r):o}function Gl(r){var o=hr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=r;var y=Vn,M=y.baseQueue,k=d.pending;if(k!==null){if(M!==null){var U=M.next;M.next=k.next,k.next=U}y.baseQueue=M=k,d.pending=null}if(M!==null){k=M.next,y=y.baseState;var Z=U=null,te=null,_e=k;do{var Ue=_e.lane;if((Da&Ue)===Ue)te!==null&&(te=te.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),y=_e.hasEagerState?_e.eagerState:r(y,_e.action);else{var Xe={lane:Ue,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};te===null?(Z=te=Xe,U=y):te=te.next=Xe,kn.lanes|=Ue,Kl|=Ue}_e=_e.next}while(_e!==null&&_e!==k);te===null?U=y:te.next=Z,ar(y,o.memoizedState)||(Qt=!0),o.memoizedState=y,o.baseState=U,o.baseQueue=te,d.lastRenderedState=y}if(r=d.interleaved,r!==null){M=r;do k=M.lane,kn.lanes|=k,Kl|=k,M=M.next;while(M!==r)}else M===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Oa(r){var o=hr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=r;var y=d.dispatch,M=d.pending,k=o.memoizedState;if(M!==null){d.pending=null;var U=M=M.next;do k=r(k,U.action),U=U.next;while(U!==M);ar(k,o.memoizedState)||(Qt=!0),o.memoizedState=k,o.baseQueue===null&&(o.baseState=k),d.lastRenderedState=k}return[k,y]}function ud(){}function hd(r,o){var d=kn,y=hr(),M=o(),k=!ar(y.memoizedState,M);if(k&&(y.memoizedState=M,Qt=!0),y=y.queue,fd(Hf.bind(null,d,y,r),[r]),y.getSnapshot!==o||k||fn!==null&&fn.memoizedState.tag&1){if(d.flags|=2048,qr(9,Wl.bind(null,d,y,M,o),void 0,null),Ai===null)throw Error(t(349));(Da&30)!==0||Th(d,o,M)}return M}function Th(r,o,d){r.flags|=16384,r={getSnapshot:o,value:d},o=kn.updateQueue,o===null?(o={lastEffect:null,stores:null},kn.updateQueue=o,o.stores=[r]):(d=o.stores,d===null?o.stores=[r]:d.push(r))}function Wl(r,o,d,y){o.value=d,o.getSnapshot=y,jf(o)&&cd(r)}function Hf(r,o,d){return d(function(){jf(o)&&cd(r)})}function jf(r){var o=r.getSnapshot;r=r.value;try{var d=o();return!ar(r,d)}catch{return!0}}function cd(r){var o=Wr(r,1);o!==null&&Va(o,r,1,-1)}function dd(r){var o=vi();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:r},o.queue=r,r=r.dispatch=Ks.bind(null,kn,r),[o.memoizedState,r]}function qr(r,o,d,y){return r={tag:r,create:o,destroy:d,deps:y,next:null},o=kn.updateQueue,o===null?(o={lastEffect:null,stores:null},kn.updateQueue=o,o.lastEffect=r.next=r):(d=o.lastEffect,d===null?o.lastEffect=r.next=r:(y=d.next,d.next=r,r.next=y,o.lastEffect=r)),r}function Gf(){return hr().memoizedState}function ca(r,o,d,y){var M=vi();kn.flags|=r,M.memoizedState=qr(1|o,d,void 0,y===void 0?null:y)}function Xl(r,o,d,y){var M=hr();y=y===void 0?null:y;var k=void 0;if(Vn!==null){var U=Vn.memoizedState;if(k=U.destroy,y!==null&&Hl(y,U.deps)){M.memoizedState=qr(o,d,k,y);return}}kn.flags|=r,M.memoizedState=qr(1|o,d,k,y)}function Ui(r,o){return ca(8390656,8,r,o)}function fd(r,o){return Xl(2048,8,r,o)}function pd(r,o){return Xl(4,2,r,o)}function Wf(r,o){return Xl(4,4,r,o)}function Xf(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function md(r,o,d){return d=d!=null?d.concat([r]):null,Xl(4,4,Xf.bind(null,o,r),d)}function Eh(){}function Yf(r,o){var d=hr();o=o===void 0?null:o;var y=d.memoizedState;return y!==null&&o!==null&&Hl(o,y[1])?y[0]:(d.memoizedState=[r,o],r)}function cr(r,o){var d=hr();o=o===void 0?null:o;var y=d.memoizedState;return y!==null&&o!==null&&Hl(o,y[1])?y[0]:(r=r(),d.memoizedState=[r,o],r)}function Ah(r,o,d){return(Da&21)===0?(r.baseState&&(r.baseState=!1,Qt=!0),r.memoizedState=d):(ar(d,o)||(d=ai(),kn.lanes|=d,Kl|=d,r.baseState=!0),o)}function Kg(r,o){var d=zt;zt=d!==0&&4>d?d:4,r(!0);var y=qs.transition;qs.transition={};try{r(!1),o()}finally{zt=d,qs.transition=y}}function Ua(){return hr().memoizedState}function kh(r,o,d){var y=jo(r);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},Yl(r))Ch(o,d);else if(d=zl(r,o,d,y),d!==null){var M=fr();Va(d,r,y,M),Rh(d,o,y)}}function Ks(r,o,d){var y=jo(r),M={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(Yl(r))Ch(o,M);else{var k=r.alternate;if(r.lanes===0&&(k===null||k.lanes===0)&&(k=o.lastRenderedReducer,k!==null))try{var U=o.lastRenderedState,Z=k(U,d);if(M.hasEagerState=!0,M.eagerState=Z,ar(Z,U)){var te=o.interleaved;te===null?(M.next=M,od(o)):(M.next=te.next,te.next=M),o.interleaved=M;return}}catch{}finally{}d=zl(r,o,M,y),d!==null&&(M=fr(),Va(d,r,y,M),Rh(d,o,y))}}function Yl(r){var o=r.alternate;return r===kn||o!==null&&o===kn}function Ch(r,o){Ei=Yr=!0;var d=r.pending;d===null?o.next=o:(o.next=d.next,d.next=o),r.pending=o}function Rh(r,o,d){if((d&4194240)!==0){var y=o.lanes;y&=r.pendingLanes,d|=y,o.lanes=d,Fn(r,d)}}var Ih={readContext:lr,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},qf={readContext:lr,useCallback:function(r,o){return vi().memoizedState=[r,o===void 0?null:o],r},useContext:lr,useEffect:Ui,useImperativeHandle:function(r,o,d){return d=d!=null?d.concat([r]):null,ca(4194308,4,Xf.bind(null,o,r),d)},useLayoutEffect:function(r,o){return ca(4194308,4,r,o)},useInsertionEffect:function(r,o){return ca(4,2,r,o)},useMemo:function(r,o){var d=vi();return o=o===void 0?null:o,r=r(),d.memoizedState=[r,o],r},useReducer:function(r,o,d){var y=vi();return o=d!==void 0?d(o):o,y.memoizedState=y.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},y.queue=r,r=r.dispatch=kh.bind(null,kn,r),[y.memoizedState,r]},useRef:function(r){var o=vi();return r={current:r},o.memoizedState=r},useState:dd,useDebugValue:Eh,useDeferredValue:function(r){return vi().memoizedState=r},useTransition:function(){var r=dd(!1),o=r[0];return r=Kg.bind(null,r[1]),vi().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,d){var y=kn,M=vi();if(Rn){if(d===void 0)throw Error(t(407));d=d()}else{if(d=o(),Ai===null)throw Error(t(349));(Da&30)!==0||Th(y,o,d)}M.memoizedState=d;var k={value:d,getSnapshot:o};return M.queue=k,Ui(Hf.bind(null,y,k,r),[r]),y.flags|=2048,qr(9,Wl.bind(null,y,k,d,o),void 0,null),d},useId:function(){var r=vi(),o=Ai.identifierPrefix;if(Rn){var d=Er,y=nt;d=(y&~(1<<32-Nt(y)-1)).toString(32)+d,o=":"+o+"R"+d,d=hs++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=Yi++,o=":"+o+"r"+d.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},Kf={readContext:lr,useCallback:Yf,useContext:lr,useEffect:fd,useImperativeHandle:md,useInsertionEffect:pd,useLayoutEffect:Wf,useMemo:cr,useReducer:Gl,useRef:Gf,useState:function(){return Gl(Bo)},useDebugValue:Eh,useDeferredValue:function(r){var o=hr();return Ah(o,Vn.memoizedState,r)},useTransition:function(){var r=Gl(Bo)[0],o=hr().memoizedState;return[r,o]},useMutableSource:ud,useSyncExternalStore:hd,useId:Ua,unstable_isNewReconciler:!1},Zf={readContext:lr,useCallback:Yf,useContext:lr,useEffect:fd,useImperativeHandle:md,useInsertionEffect:pd,useLayoutEffect:Wf,useMemo:cr,useReducer:Oa,useRef:Gf,useState:function(){return Oa(Bo)},useDebugValue:Eh,useDeferredValue:function(r){var o=hr();return Vn===null?o.memoizedState=r:Ah(o,Vn.memoizedState,r)},useTransition:function(){var r=Oa(Bo)[0],o=hr().memoizedState;return[r,o]},useMutableSource:ud,useSyncExternalStore:hd,useId:Ua,unstable_isNewReconciler:!1};function kr(r,o){if(r&&r.defaultProps){o=K({},o),r=r.defaultProps;for(var d in r)o[d]===void 0&&(o[d]=r[d]);return o}return o}function ql(r,o,d,y){o=r.memoizedState,d=d(y,o),d=d==null?o:K({},o,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var Ph={isMounted:function(r){return(r=r._reactInternals)?na(r)===r:!1},enqueueSetState:function(r,o,d){r=r._reactInternals;var y=fr(),M=jo(r),k=wn(y,M);k.payload=o,d!=null&&(k.callback=d),o=Ln(r,k,M),o!==null&&(Va(o,r,M,y),Ti(o,r,M))},enqueueReplaceState:function(r,o,d){r=r._reactInternals;var y=fr(),M=jo(r),k=wn(y,M);k.tag=1,k.payload=o,d!=null&&(k.callback=d),o=Ln(r,k,M),o!==null&&(Va(o,r,M,y),Ti(o,r,M))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var d=fr(),y=jo(r),M=wn(d,y);M.tag=2,o!=null&&(M.callback=o),o=Ln(r,M,y),o!==null&&(Va(o,r,y,d),Ti(o,r,y))}};function Jf(r,o,d,y,M,k,U){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,k,U):o.prototype&&o.prototype.isPureReactComponent?!Rs(d,y)||!Rs(M,k):!0}function l(r,o,d){var y=!1,M=ka,k=o.contextType;return typeof k=="object"&&k!==null?k=lr(k):(M=Mi(o)?Ca:pi.current,y=o.contextTypes,k=(y=y!=null)?Os(r,M):ka),o=new o(d,k),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ph,r.stateNode=o,o._reactInternals=r,y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=M,r.__reactInternalMemoizedMaskedChildContext=k),o}function h(r,o,d,y){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,y),o.state!==r&&Ph.enqueueReplaceState(o,o.state,null)}function g(r,o,d,y){var M=r.stateNode;M.props=d,M.state=r.memoizedState,M.refs={},Kt(r);var k=o.contextType;typeof k=="object"&&k!==null?M.context=lr(k):(k=Mi(o)?Ca:pi.current,M.context=Os(r,k)),M.state=r.memoizedState,k=o.getDerivedStateFromProps,typeof k=="function"&&(ql(r,o,k,d),M.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(o=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),o!==M.state&&Ph.enqueueReplaceState(M,M.state,null),zn(r,d,M,y),M.state=r.memoizedState),typeof M.componentDidMount=="function"&&(r.flags|=4194308)}function b(r,o){try{var d="",y=o;do d+=at(y),y=y.return;while(y);var M=d}catch(k){M=`
Error generating stack: `+k.message+`
`+k.stack}return{value:r,source:o,stack:M,digest:null}}function E(r,o,d){return{value:r,source:null,stack:d??null,digest:o??null}}function I(r,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var q=typeof WeakMap=="function"?WeakMap:Map;function ae(r,o,d){d=wn(-1,d),d.tag=3,d.payload={element:null};var y=o.value;return d.callback=function(){rp||(rp=!0,av=y),I(r,o)},d}function Ee(r,o,d){d=wn(-1,d),d.tag=3;var y=r.type.getDerivedStateFromError;if(typeof y=="function"){var M=o.value;d.payload=function(){return y(M)},d.callback=function(){I(r,o)}}var k=r.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(d.callback=function(){I(r,o),typeof y!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var U=o.stack;this.componentDidCatch(o.value,{componentStack:U!==null?U:""})}),d}function qe(r,o,d){var y=r.pingCache;if(y===null){y=r.pingCache=new q;var M=new Set;y.set(o,M)}else M=y.get(o),M===void 0&&(M=new Set,y.set(o,M));M.has(d)||(M.add(d),r=$w.bind(null,r,o,d),o.then(r,r))}function _t(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Xt(r,o,d,y,M){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=wn(-1,1),o.tag=2,Ln(d,o,1))),d.lanes|=1),r):(r.flags|=65536,r.lanes=M,r)}var Ot=P.ReactCurrentOwner,Qt=!1;function mt(r,o,d,y){o.child=r===null?Ul(o,null,d,y):zs(o,r.child,d,y)}function yi(r,o,d,y,M){d=d.render;var k=o.ref;return ls(o,M),y=jl(r,o,d,y,k,M),d=ld(),r!==null&&!Qt?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~M,Zs(r,o,M)):(Rn&&d&&td(o),o.flags|=1,mt(r,o,y,M),o.child)}function dr(r,o,d,y,M){if(r===null){var k=d.type;return typeof k=="function"&&!dv(k)&&k.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=k,ve(r,o,k,y,M)):(r=hp(d.type,null,y,o,o.mode,M),r.ref=o.ref,r.return=o,o.child=r)}if(k=r.child,(r.lanes&M)===0){var U=k.memoizedProps;if(d=d.compare,d=d!==null?d:Rs,d(U,y)&&r.ref===o.ref)return Zs(r,o,M)}return o.flags|=1,r=Wo(k,y),r.ref=o.ref,r.return=o,o.child=r}function ve(r,o,d,y,M){if(r!==null){var k=r.memoizedProps;if(Rs(k,y)&&r.ref===o.ref)if(Qt=!1,o.pendingProps=y=k,(r.lanes&M)!==0)(r.flags&131072)!==0&&(Qt=!0);else return o.lanes=r.lanes,Zs(r,o,M)}return ct(r,o,d,y,M)}function se(r,o,d){var y=o.pendingProps,M=y.children,k=r!==null?r.memoizedState:null;if(y.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(Nh,Kr),Kr|=d;else{if((d&1073741824)===0)return r=k!==null?k.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,Mn(Nh,Kr),Kr|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=k!==null?k.baseLanes:d,Mn(Nh,Kr),Kr|=y}else k!==null?(y=k.baseLanes|d,o.memoizedState=null):y=d,Mn(Nh,Kr),Kr|=y;return mt(r,o,M,d),o.child}function Me(r,o){var d=o.ref;(r===null&&d!==null||r!==null&&r.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function ct(r,o,d,y,M){var k=Mi(d)?Ca:pi.current;return k=Os(o,k),ls(o,M),d=jl(r,o,d,y,k,M),y=ld(),r!==null&&!Qt?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~M,Zs(r,o,M)):(Rn&&y&&td(o),o.flags|=1,mt(r,o,d,M),o.child)}function Rt(r,o,d,y,M){if(Mi(d)){var k=!0;Us(o)}else k=!1;if(ls(o,M),o.stateNode===null)$f(r,o),l(o,d,y),g(o,d,y,M),y=!0;else if(r===null){var U=o.stateNode,Z=o.memoizedProps;U.props=Z;var te=U.context,_e=d.contextType;typeof _e=="object"&&_e!==null?_e=lr(_e):(_e=Mi(d)?Ca:pi.current,_e=Os(o,_e));var Ue=d.getDerivedStateFromProps,Xe=typeof Ue=="function"||typeof U.getSnapshotBeforeUpdate=="function";Xe||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Z!==y||te!==_e)&&h(o,U,y,_e),bn=!1;var De=o.memoizedState;U.state=De,zn(o,y,U,M),te=o.memoizedState,Z!==y||De!==te||Ni.current||bn?(typeof Ue=="function"&&(ql(o,d,Ue,y),te=o.memoizedState),(Z=bn||Jf(o,d,Z,y,De,te,_e))?(Xe||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(o.flags|=4194308)):(typeof U.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=te),U.props=y,U.state=te,U.context=_e,y=Z):(typeof U.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{U=o.stateNode,jn(r,o),Z=o.memoizedProps,_e=o.type===o.elementType?Z:kr(o.type,Z),U.props=_e,Xe=o.pendingProps,De=U.context,te=d.contextType,typeof te=="object"&&te!==null?te=lr(te):(te=Mi(d)?Ca:pi.current,te=Os(o,te));var vt=d.getDerivedStateFromProps;(Ue=typeof vt=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Z!==Xe||De!==te)&&h(o,U,y,te),bn=!1,De=o.memoizedState,U.state=De,zn(o,y,U,M);var Et=o.memoizedState;Z!==Xe||De!==Et||Ni.current||bn?(typeof vt=="function"&&(ql(o,d,vt,y),Et=o.memoizedState),(_e=bn||Jf(o,d,_e,y,De,Et,te)||!1)?(Ue||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(y,Et,te),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(y,Et,te)),typeof U.componentDidUpdate=="function"&&(o.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof U.componentDidUpdate!="function"||Z===r.memoizedProps&&De===r.memoizedState||(o.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Z===r.memoizedProps&&De===r.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Et),U.props=y,U.state=Et,U.context=te,y=_e):(typeof U.componentDidUpdate!="function"||Z===r.memoizedProps&&De===r.memoizedState||(o.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Z===r.memoizedProps&&De===r.memoizedState||(o.flags|=1024),y=!1)}return qt(r,o,d,y,k,M)}function qt(r,o,d,y,M,k){Me(r,o);var U=(o.flags&128)!==0;if(!y&&!U)return M&&$c(o,d,!1),Zs(r,o,k);y=o.stateNode,Ot.current=o;var Z=U&&typeof d.getDerivedStateFromError!="function"?null:y.render();return o.flags|=1,r!==null&&U?(o.child=zs(o,r.child,null,k),o.child=zs(o,null,Z,k)):mt(r,o,Z,k),o.memoizedState=y.state,M&&$c(o,d,!0),o.child}function Yt(r){var o=r.stateNode;o.pendingContext?Qc(r,o.pendingContext,o.pendingContext!==o.context):o.context&&Qc(r,o.context,!1),Vl(r,o.containerInfo)}function cn(r,o,d,y,M){return os(),No(M),o.flags|=256,mt(r,o,d,y),o.child}var Kn={dehydrated:null,treeContext:null,retryLane:0};function hn(r){return{baseLanes:r,cachePool:null,transitions:null}}function Fa(r,o,d){var y=o.pendingProps,M=In.current,k=!1,U=(o.flags&128)!==0,Z;if((Z=U)||(Z=r!==null&&r.memoizedState===null?!1:(M&2)!==0),Z?(k=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(M|=1),Mn(In,M&1),r===null)return Sh(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(U=y.children,r=y.fallback,k?(y=o.mode,k=o.child,U={mode:"hidden",children:U},(y&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=U):k=cp(U,y,0,null),r=$l(r,y,d,null),k.return=o,r.return=o,k.sibling=r,o.child=k,o.child.memoizedState=hn(d),o.memoizedState=Kn,r):gd(o,U));if(M=r.memoizedState,M!==null&&(Z=M.dehydrated,Z!==null))return Vw(r,o,U,y,Z,M,d);if(k){k=y.fallback,U=o.mode,M=r.child,Z=M.sibling;var te={mode:"hidden",children:y.children};return(U&1)===0&&o.child!==M?(y=o.child,y.childLanes=0,y.pendingProps=te,o.deletions=null):(y=Wo(M,te),y.subtreeFlags=M.subtreeFlags&14680064),Z!==null?k=Wo(Z,k):(k=$l(k,U,d,null),k.flags|=2),k.return=o,y.return=o,y.sibling=k,o.child=y,y=k,k=o.child,U=r.child.memoizedState,U=U===null?hn(d):{baseLanes:U.baseLanes|d,cachePool:null,transitions:U.transitions},k.memoizedState=U,k.childLanes=r.childLanes&~d,o.memoizedState=Kn,y}return k=r.child,r=k.sibling,y=Wo(k,{mode:"visible",children:y.children}),(o.mode&1)===0&&(y.lanes=d),y.return=o,y.sibling=null,r!==null&&(d=o.deletions,d===null?(o.deletions=[r],o.flags|=16):d.push(r)),o.child=y,o.memoizedState=null,y}function gd(r,o){return o=cp({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Qf(r,o,d,y){return y!==null&&No(y),zs(o,r.child,null,d),r=gd(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Vw(r,o,d,y,M,k,U){if(d)return o.flags&256?(o.flags&=-257,y=E(Error(t(422))),Qf(r,o,U,y)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(k=y.fallback,M=o.mode,y=cp({mode:"visible",children:y.children},M,0,null),k=$l(k,M,U,null),k.flags|=2,y.return=o,k.return=o,y.sibling=k,o.child=y,(o.mode&1)!==0&&zs(o,r.child,null,U),o.child.memoizedState=hn(U),o.memoizedState=Kn,k);if((o.mode&1)===0)return Qf(r,o,U,null);if(M.data==="$!"){if(y=M.nextSibling&&M.nextSibling.dataset,y)var Z=y.dgst;return y=Z,k=Error(t(419)),y=E(k,y,void 0),Qf(r,o,U,y)}if(Z=(U&r.childLanes)!==0,Qt||Z){if(y=Ai,y!==null){switch(U&-U){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(y.suspendedLanes|U))!==0?0:M,M!==0&&M!==k.retryLane&&(k.retryLane=M,Wr(r,M),Va(y,r,M,-1))}return cv(),y=E(Error(t(421))),Qf(r,o,U,y)}return M.data==="$?"?(o.flags|=128,o.child=r.child,o=eS.bind(null,r),M._reactRetry=o,null):(r=k.treeContext,Oi=Ea(M.nextSibling),mi=o,Rn=!0,Ar=null,r!==null&&(Di[hi++]=nt,Di[hi++]=Er,Di[hi++]=Bs,nt=r.id,Er=r.overflow,Bs=o),o=gd(o,y.children),o.flags|=4096,o)}function D0(r,o,d){r.lanes|=o;var y=r.alternate;y!==null&&(y.lanes|=o),Bl(r.return,o,d)}function Zg(r,o,d,y,M){var k=r.memoizedState;k===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:M}:(k.isBackwards=o,k.rendering=null,k.renderingStartTime=0,k.last=y,k.tail=d,k.tailMode=M)}function O0(r,o,d){var y=o.pendingProps,M=y.revealOrder,k=y.tail;if(mt(r,o,y.children,d),y=In.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&D0(r,d,o);else if(r.tag===19)D0(r,d,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}if(Mn(In,y),(o.mode&1)===0)o.memoizedState=null;else switch(M){case"forwards":for(d=o.child,M=null;d!==null;)r=d.alternate,r!==null&&Xr(r)===null&&(M=d),d=d.sibling;d=M,d===null?(M=o.child,o.child=null):(M=d.sibling,d.sibling=null),Zg(o,!1,M,d,k);break;case"backwards":for(d=null,M=o.child,o.child=null;M!==null;){if(r=M.alternate,r!==null&&Xr(r)===null){o.child=M;break}r=M.sibling,M.sibling=d,d=M,M=r}Zg(o,!0,d,null,k);break;case"together":Zg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function $f(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function Zs(r,o,d){if(r!==null&&(o.dependencies=r.dependencies),Kl|=o.lanes,(d&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(t(153));if(o.child!==null){for(r=o.child,d=Wo(r,r.pendingProps),o.child=d,d.return=o;r.sibling!==null;)r=r.sibling,d=d.sibling=Wo(r,r.pendingProps),d.return=o;d.sibling=null}return o.child}function Hw(r,o,d){switch(o.tag){case 3:Yt(o),os();break;case 5:Xs(o);break;case 1:Mi(o.type)&&Us(o);break;case 4:Vl(o,o.stateNode.containerInfo);break;case 10:var y=o.type._context,M=o.memoizedProps.value;Mn(Vs,y._currentValue),y._currentValue=M;break;case 13:if(y=o.memoizedState,y!==null)return y.dehydrated!==null?(Mn(In,In.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?Fa(r,o,d):(Mn(In,In.current&1),r=Zs(r,o,d),r!==null?r.sibling:null);Mn(In,In.current&1);break;case 19:if(y=(d&o.childLanes)!==0,(r.flags&128)!==0){if(y)return O0(r,o,d);o.flags|=128}if(M=o.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Mn(In,In.current),y)break;return null;case 22:case 23:return o.lanes=0,se(r,o,d)}return Zs(r,o,d)}var U0,Jg,F0,B0;U0=function(r,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Jg=function(){},F0=function(r,o,d,y){var M=r.memoizedProps;if(M!==y){r=o.stateNode,qn(ur.current);var k=null;switch(d){case"input":M=Pe(r,M),y=Pe(r,y),k=[];break;case"select":M=K({},M,{value:void 0}),y=K({},y,{value:void 0}),k=[];break;case"textarea":M=ht(r,M),y=ht(r,y),k=[];break;default:typeof M.onClick!="function"&&typeof y.onClick=="function"&&(r.onclick=Rl)}$(d,y);var U;d=null;for(_e in M)if(!y.hasOwnProperty(_e)&&M.hasOwnProperty(_e)&&M[_e]!=null)if(_e==="style"){var Z=M[_e];for(U in Z)Z.hasOwnProperty(U)&&(d||(d={}),d[U]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(i.hasOwnProperty(_e)?k||(k=[]):(k=k||[]).push(_e,null));for(_e in y){var te=y[_e];if(Z=M!=null?M[_e]:void 0,y.hasOwnProperty(_e)&&te!==Z&&(te!=null||Z!=null))if(_e==="style")if(Z){for(U in Z)!Z.hasOwnProperty(U)||te&&te.hasOwnProperty(U)||(d||(d={}),d[U]="");for(U in te)te.hasOwnProperty(U)&&Z[U]!==te[U]&&(d||(d={}),d[U]=te[U])}else d||(k||(k=[]),k.push(_e,d)),d=te;else _e==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Z=Z?Z.__html:void 0,te!=null&&Z!==te&&(k=k||[]).push(_e,te)):_e==="children"?typeof te!="string"&&typeof te!="number"||(k=k||[]).push(_e,""+te):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(i.hasOwnProperty(_e)?(te!=null&&_e==="onScroll"&&En("scroll",r),k||Z===te||(k=[])):(k=k||[]).push(_e,te))}d&&(k=k||[]).push("style",d);var _e=k;(o.updateQueue=_e)&&(o.flags|=4)}},B0=function(r,o,d,y){d!==y&&(o.flags|=4)};function vd(r,o){if(!Rn)switch(r.tailMode){case"hidden":o=r.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function qi(r){var o=r.alternate!==null&&r.alternate.child===r.child,d=0,y=0;if(o)for(var M=r.child;M!==null;)d|=M.lanes|M.childLanes,y|=M.subtreeFlags&14680064,y|=M.flags&14680064,M.return=r,M=M.sibling;else for(M=r.child;M!==null;)d|=M.lanes|M.childLanes,y|=M.subtreeFlags,y|=M.flags,M.return=r,M=M.sibling;return r.subtreeFlags|=y,r.childLanes=d,o}function jw(r,o,d){var y=o.pendingProps;switch(Ia(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(o),null;case 1:return Mi(o.type)&&Il(),qi(o),null;case 3:return y=o.stateNode,us(),An(Ni),An(pi),ha(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(r===null||r.child===null)&&(Lo(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ar!==null&&(lv(Ar),Ar=null))),Jg(r,o),qi(o),null;case 5:Uo(o);var M=qn(Na.current);if(d=o.type,r!==null&&o.stateNode!=null)F0(r,o,d,y,M),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!y){if(o.stateNode===null)throw Error(t(166));return qi(o),null}if(r=qn(ur.current),Lo(o)){y=o.stateNode,d=o.type;var k=o.memoizedProps;switch(y[ei]=o,y[Po]=k,r=(o.mode&1)!==0,d){case"dialog":En("cancel",y),En("close",y);break;case"iframe":case"object":case"embed":En("load",y);break;case"video":case"audio":for(M=0;M<as.length;M++)En(as[M],y);break;case"source":En("error",y);break;case"img":case"image":case"link":En("error",y),En("load",y);break;case"details":En("toggle",y);break;case"input":X(y,k),En("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!k.multiple},En("invalid",y);break;case"textarea":W(y,k),En("invalid",y)}$(d,k),M=null;for(var U in k)if(k.hasOwnProperty(U)){var Z=k[U];U==="children"?typeof Z=="string"?y.textContent!==Z&&(k.suppressHydrationWarning!==!0&&Cl(y.textContent,Z,r),M=["children",Z]):typeof Z=="number"&&y.textContent!==""+Z&&(k.suppressHydrationWarning!==!0&&Cl(y.textContent,Z,r),M=["children",""+Z]):i.hasOwnProperty(U)&&Z!=null&&U==="onScroll"&&En("scroll",y)}switch(d){case"input":Lt(y),Ke(y,k,!0);break;case"textarea":Lt(y),ue(y);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(y.onclick=Rl)}y=M,o.updateQueue=y,y!==null&&(o.flags|=4)}else{U=M.nodeType===9?M:M.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Te(d)),r==="http://www.w3.org/1999/xhtml"?d==="script"?(r=U.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof y.is=="string"?r=U.createElement(d,{is:y.is}):(r=U.createElement(d),d==="select"&&(U=r,y.multiple?U.multiple=!0:y.size&&(U.size=y.size))):r=U.createElementNS(r,d),r[ei]=o,r[Po]=y,U0(r,o,!1,!1),o.stateNode=r;e:{switch(U=ge(d,y),d){case"dialog":En("cancel",r),En("close",r),M=y;break;case"iframe":case"object":case"embed":En("load",r),M=y;break;case"video":case"audio":for(M=0;M<as.length;M++)En(as[M],r);M=y;break;case"source":En("error",r),M=y;break;case"img":case"image":case"link":En("error",r),En("load",r),M=y;break;case"details":En("toggle",r),M=y;break;case"input":X(r,y),M=Pe(r,y),En("invalid",r);break;case"option":M=y;break;case"select":r._wrapperState={wasMultiple:!!y.multiple},M=K({},y,{value:void 0}),En("invalid",r);break;case"textarea":W(r,y),M=ht(r,y),En("invalid",r);break;default:M=y}$(d,M),Z=M;for(k in Z)if(Z.hasOwnProperty(k)){var te=Z[k];k==="style"?Je(r,te):k==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Mt(r,te)):k==="children"?typeof te=="string"?(d!=="textarea"||te!=="")&&et(r,te):typeof te=="number"&&et(r,""+te):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?te!=null&&k==="onScroll"&&En("scroll",r):te!=null&&R(r,k,te,U))}switch(d){case"input":Lt(r),Ke(r,y,!1);break;case"textarea":Lt(r),ue(r);break;case"option":y.value!=null&&r.setAttribute("value",""+Fe(y.value));break;case"select":r.multiple=!!y.multiple,k=y.value,k!=null?$e(r,!!y.multiple,k,!1):y.defaultValue!=null&&$e(r,!!y.multiple,y.defaultValue,!0);break;default:typeof M.onClick=="function"&&(r.onclick=Rl)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return qi(o),null;case 6:if(r&&o.stateNode!=null)B0(r,o,r.memoizedProps,y);else{if(typeof y!="string"&&o.stateNode===null)throw Error(t(166));if(d=qn(Na.current),qn(ur.current),Lo(o)){if(y=o.stateNode,d=o.memoizedProps,y[ei]=o,(k=y.nodeValue!==d)&&(r=mi,r!==null))switch(r.tag){case 3:Cl(y.nodeValue,d,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Cl(y.nodeValue,d,(r.mode&1)!==0)}k&&(o.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[ei]=o,o.stateNode=y}return qi(o),null;case 13:if(An(In),y=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Rn&&Oi!==null&&(o.mode&1)!==0&&(o.flags&128)===0)rd(),os(),o.flags|=98560,k=!1;else if(k=Lo(o),y!==null&&y.dehydrated!==null){if(r===null){if(!k)throw Error(t(318));if(k=o.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[ei]=o}else os(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;qi(o),k=!1}else Ar!==null&&(lv(Ar),Ar=null),k=!0;if(!k)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(y=y!==null,y!==(r!==null&&r.memoizedState!==null)&&y&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(In.current&1)!==0?xi===0&&(xi=3):cv())),o.updateQueue!==null&&(o.flags|=4),qi(o),null);case 4:return us(),Jg(r,o),r===null&&Co(o.stateNode.containerInfo),qi(o),null;case 10:return Fl(o.type._context),qi(o),null;case 17:return Mi(o.type)&&Il(),qi(o),null;case 19:if(An(In),k=o.memoizedState,k===null)return qi(o),null;if(y=(o.flags&128)!==0,U=k.rendering,U===null)if(y)vd(k,!1);else{if(xi!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(U=Xr(r),U!==null){for(o.flags|=128,vd(k,!1),y=U.updateQueue,y!==null&&(o.updateQueue=y,o.flags|=4),o.subtreeFlags=0,y=d,d=o.child;d!==null;)k=d,r=y,k.flags&=14680066,U=k.alternate,U===null?(k.childLanes=0,k.lanes=r,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=U.childLanes,k.lanes=U.lanes,k.child=U.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=U.memoizedProps,k.memoizedState=U.memoizedState,k.updateQueue=U.updateQueue,k.type=U.type,r=U.dependencies,k.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),d=d.sibling;return Mn(In,In.current&1|2),o.child}r=r.sibling}k.tail!==null&&ce()>Dh&&(o.flags|=128,y=!0,vd(k,!1),o.lanes=4194304)}else{if(!y)if(r=Xr(U),r!==null){if(o.flags|=128,y=!0,d=r.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),vd(k,!0),k.tail===null&&k.tailMode==="hidden"&&!U.alternate&&!Rn)return qi(o),null}else 2*ce()-k.renderingStartTime>Dh&&d!==1073741824&&(o.flags|=128,y=!0,vd(k,!1),o.lanes=4194304);k.isBackwards?(U.sibling=o.child,o.child=U):(d=k.last,d!==null?d.sibling=U:o.child=U,k.last=U)}return k.tail!==null?(o=k.tail,k.rendering=o,k.tail=o.sibling,k.renderingStartTime=ce(),o.sibling=null,d=In.current,Mn(In,y?d&1|2:d&1),o):(qi(o),null);case 22:case 23:return hv(),y=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==y&&(o.flags|=8192),y&&(o.mode&1)!==0?(Kr&1073741824)!==0&&(qi(o),o.subtreeFlags&6&&(o.flags|=8192)):qi(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Gw(r,o){switch(Ia(o),o.tag){case 1:return Mi(o.type)&&Il(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return us(),An(Ni),An(pi),ha(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Uo(o),null;case 13:if(An(In),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(t(340));os()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return An(In),null;case 4:return us(),null;case 10:return Fl(o.type._context),null;case 22:case 23:return hv(),null;case 24:return null;default:return null}}var ep=!1,Ki=!1,Ww=typeof WeakSet=="function"?WeakSet:Set,St=null;function Lh(r,o){var d=r.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){Zn(r,o,y)}else d.current=null}function Qg(r,o,d){try{d()}catch(y){Zn(r,o,y)}}var z0=!1;function Xw(r,o){if(Io=_r,r=Dn(),si(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var M=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{d.nodeType,k.nodeType}catch{d=null;break e}var U=0,Z=-1,te=-1,_e=0,Ue=0,Xe=r,De=null;t:for(;;){for(var vt;Xe!==d||M!==0&&Xe.nodeType!==3||(Z=U+M),Xe!==k||y!==0&&Xe.nodeType!==3||(te=U+y),Xe.nodeType===3&&(U+=Xe.nodeValue.length),(vt=Xe.firstChild)!==null;)De=Xe,Xe=vt;for(;;){if(Xe===r)break t;if(De===d&&++_e===M&&(Z=U),De===k&&++Ue===y&&(te=U),(vt=Xe.nextSibling)!==null)break;Xe=De,De=Xe.parentNode}Xe=vt}d=Z===-1||te===-1?null:{start:Z,end:te}}else d=null}d=d||{start:0,end:0}}else d=null;for(Xc={focusedElem:r,selectionRange:d},_r=!1,St=o;St!==null;)if(o=St,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,St=r;else for(;St!==null;){o=St;try{var Et=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Et!==null){var Ct=Et.memoizedProps,ti=Et.memoizedState,de=o.stateNode,re=de.getSnapshotBeforeUpdate(o.elementType===o.type?Ct:kr(o.type,Ct),ti);de.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var pe=o.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Qe){Zn(o,o.return,Qe)}if(r=o.sibling,r!==null){r.return=o.return,St=r;break}St=o.return}return Et=z0,z0=!1,Et}function yd(r,o,d){var y=o.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var M=y=y.next;do{if((M.tag&r)===r){var k=M.destroy;M.destroy=void 0,k!==void 0&&Qg(o,d,k)}M=M.next}while(M!==y)}}function tp(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&r)===r){var y=d.create;d.destroy=y()}d=d.next}while(d!==o)}}function $g(r){var o=r.ref;if(o!==null){var d=r.stateNode;switch(r.tag){case 5:r=d;break;default:r=d}typeof o=="function"?o(r):o.current=r}}function V0(r){var o=r.alternate;o!==null&&(r.alternate=null,V0(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[ei],delete o[Po],delete o[Ds],delete o[gh],delete o[vh])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function H0(r){return r.tag===5||r.tag===3||r.tag===4}function j0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||H0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ev(r,o,d){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(r,o):d.insertBefore(r,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(r,d)):(o=d,o.appendChild(r)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Rl));else if(y!==4&&(r=r.child,r!==null))for(ev(r,o,d),r=r.sibling;r!==null;)ev(r,o,d),r=r.sibling}function tv(r,o,d){var y=r.tag;if(y===5||y===6)r=r.stateNode,o?d.insertBefore(r,o):d.appendChild(r);else if(y!==4&&(r=r.child,r!==null))for(tv(r,o,d),r=r.sibling;r!==null;)tv(r,o,d),r=r.sibling}var Fi=null,Ba=!1;function zo(r,o,d){for(d=d.child;d!==null;)G0(r,o,d),d=d.sibling}function G0(r,o,d){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(kt,d)}catch{}switch(d.tag){case 5:Ki||Lh(d,o);case 6:var y=Fi,M=Ba;Fi=null,zo(r,o,d),Fi=y,Ba=M,Fi!==null&&(Ba?(r=Fi,d=d.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)):Fi.removeChild(d.stateNode));break;case 18:Fi!==null&&(Ba?(r=Fi,d=d.stateNode,r.nodeType===8?mh(r.parentNode,d):r.nodeType===1&&mh(r,d),yl(r)):mh(Fi,d.stateNode));break;case 4:y=Fi,M=Ba,Fi=d.stateNode.containerInfo,Ba=!0,zo(r,o,d),Fi=y,Ba=M;break;case 0:case 11:case 14:case 15:if(!Ki&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){M=y=y.next;do{var k=M,U=k.destroy;k=k.tag,U!==void 0&&((k&2)!==0||(k&4)!==0)&&Qg(d,o,U),M=M.next}while(M!==y)}zo(r,o,d);break;case 1:if(!Ki&&(Lh(d,o),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(Z){Zn(d,o,Z)}zo(r,o,d);break;case 21:zo(r,o,d);break;case 22:d.mode&1?(Ki=(y=Ki)||d.memoizedState!==null,zo(r,o,d),Ki=y):zo(r,o,d);break;default:zo(r,o,d)}}function W0(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var d=r.stateNode;d===null&&(d=r.stateNode=new Ww),o.forEach(function(y){var M=tS.bind(null,r,y);d.has(y)||(d.add(y),y.then(M,M))})}}function za(r,o){var d=o.deletions;if(d!==null)for(var y=0;y<d.length;y++){var M=d[y];try{var k=r,U=o,Z=U;e:for(;Z!==null;){switch(Z.tag){case 5:Fi=Z.stateNode,Ba=!1;break e;case 3:Fi=Z.stateNode.containerInfo,Ba=!0;break e;case 4:Fi=Z.stateNode.containerInfo,Ba=!0;break e}Z=Z.return}if(Fi===null)throw Error(t(160));G0(k,U,M),Fi=null,Ba=!1;var te=M.alternate;te!==null&&(te.return=null),M.return=null}catch(_e){Zn(M,o,_e)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)X0(o,r),o=o.sibling}function X0(r,o){var d=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(za(o,r),cs(r),y&4){try{yd(3,r,r.return),tp(3,r)}catch(Ct){Zn(r,r.return,Ct)}try{yd(5,r,r.return)}catch(Ct){Zn(r,r.return,Ct)}}break;case 1:za(o,r),cs(r),y&512&&d!==null&&Lh(d,d.return);break;case 5:if(za(o,r),cs(r),y&512&&d!==null&&Lh(d,d.return),r.flags&32){var M=r.stateNode;try{et(M,"")}catch(Ct){Zn(r,r.return,Ct)}}if(y&4&&(M=r.stateNode,M!=null)){var k=r.memoizedProps,U=d!==null?d.memoizedProps:k,Z=r.type,te=r.updateQueue;if(r.updateQueue=null,te!==null)try{Z==="input"&&k.type==="radio"&&k.name!=null&&Le(M,k),ge(Z,U);var _e=ge(Z,k);for(U=0;U<te.length;U+=2){var Ue=te[U],Xe=te[U+1];Ue==="style"?Je(M,Xe):Ue==="dangerouslySetInnerHTML"?Mt(M,Xe):Ue==="children"?et(M,Xe):R(M,Ue,Xe,_e)}switch(Z){case"input":Be(M,k);break;case"textarea":O(M,k);break;case"select":var De=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!k.multiple;var vt=k.value;vt!=null?$e(M,!!k.multiple,vt,!1):De!==!!k.multiple&&(k.defaultValue!=null?$e(M,!!k.multiple,k.defaultValue,!0):$e(M,!!k.multiple,k.multiple?[]:"",!1))}M[Po]=k}catch(Ct){Zn(r,r.return,Ct)}}break;case 6:if(za(o,r),cs(r),y&4){if(r.stateNode===null)throw Error(t(162));M=r.stateNode,k=r.memoizedProps;try{M.nodeValue=k}catch(Ct){Zn(r,r.return,Ct)}}break;case 3:if(za(o,r),cs(r),y&4&&d!==null&&d.memoizedState.isDehydrated)try{yl(o.containerInfo)}catch(Ct){Zn(r,r.return,Ct)}break;case 4:za(o,r),cs(r);break;case 13:za(o,r),cs(r),M=r.child,M.flags&8192&&(k=M.memoizedState!==null,M.stateNode.isHidden=k,!k||M.alternate!==null&&M.alternate.memoizedState!==null||(rv=ce())),y&4&&W0(r);break;case 22:if(Ue=d!==null&&d.memoizedState!==null,r.mode&1?(Ki=(_e=Ki)||Ue,za(o,r),Ki=_e):za(o,r),cs(r),y&8192){if(_e=r.memoizedState!==null,(r.stateNode.isHidden=_e)&&!Ue&&(r.mode&1)!==0)for(St=r,Ue=r.child;Ue!==null;){for(Xe=St=Ue;St!==null;){switch(De=St,vt=De.child,De.tag){case 0:case 11:case 14:case 15:yd(4,De,De.return);break;case 1:Lh(De,De.return);var Et=De.stateNode;if(typeof Et.componentWillUnmount=="function"){y=De,d=De.return;try{o=y,Et.props=o.memoizedProps,Et.state=o.memoizedState,Et.componentWillUnmount()}catch(Ct){Zn(y,d,Ct)}}break;case 5:Lh(De,De.return);break;case 22:if(De.memoizedState!==null){K0(Xe);continue}}vt!==null?(vt.return=De,St=vt):K0(Xe)}Ue=Ue.sibling}e:for(Ue=null,Xe=r;;){if(Xe.tag===5){if(Ue===null){Ue=Xe;try{M=Xe.stateNode,_e?(k=M.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(Z=Xe.stateNode,te=Xe.memoizedProps.style,U=te!=null&&te.hasOwnProperty("display")?te.display:null,Z.style.display=Ne("display",U))}catch(Ct){Zn(r,r.return,Ct)}}}else if(Xe.tag===6){if(Ue===null)try{Xe.stateNode.nodeValue=_e?"":Xe.memoizedProps}catch(Ct){Zn(r,r.return,Ct)}}else if((Xe.tag!==22&&Xe.tag!==23||Xe.memoizedState===null||Xe===r)&&Xe.child!==null){Xe.child.return=Xe,Xe=Xe.child;continue}if(Xe===r)break e;for(;Xe.sibling===null;){if(Xe.return===null||Xe.return===r)break e;Ue===Xe&&(Ue=null),Xe=Xe.return}Ue===Xe&&(Ue=null),Xe.sibling.return=Xe.return,Xe=Xe.sibling}}break;case 19:za(o,r),cs(r),y&4&&W0(r);break;case 21:break;default:za(o,r),cs(r)}}function cs(r){var o=r.flags;if(o&2){try{e:{for(var d=r.return;d!==null;){if(H0(d)){var y=d;break e}d=d.return}throw Error(t(160))}switch(y.tag){case 5:var M=y.stateNode;y.flags&32&&(et(M,""),y.flags&=-33);var k=j0(r);tv(r,k,M);break;case 3:case 4:var U=y.stateNode.containerInfo,Z=j0(r);ev(r,Z,U);break;default:throw Error(t(161))}}catch(te){Zn(r,r.return,te)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Yw(r,o,d){St=r,Y0(r)}function Y0(r,o,d){for(var y=(r.mode&1)!==0;St!==null;){var M=St,k=M.child;if(M.tag===22&&y){var U=M.memoizedState!==null||ep;if(!U){var Z=M.alternate,te=Z!==null&&Z.memoizedState!==null||Ki;Z=ep;var _e=Ki;if(ep=U,(Ki=te)&&!_e)for(St=M;St!==null;)U=St,te=U.child,U.tag===22&&U.memoizedState!==null?Z0(M):te!==null?(te.return=U,St=te):Z0(M);for(;k!==null;)St=k,Y0(k),k=k.sibling;St=M,ep=Z,Ki=_e}q0(r)}else(M.subtreeFlags&8772)!==0&&k!==null?(k.return=M,St=k):q0(r)}}function q0(r){for(;St!==null;){var o=St;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ki||tp(5,o);break;case 1:var y=o.stateNode;if(o.flags&4&&!Ki)if(d===null)y.componentDidMount();else{var M=o.elementType===o.type?d.memoizedProps:kr(o.type,d.memoizedProps);y.componentDidUpdate(M,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var k=o.updateQueue;k!==null&&Oo(o,k,y);break;case 3:var U=o.updateQueue;if(U!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}Oo(o,U,d)}break;case 5:var Z=o.stateNode;if(d===null&&o.flags&4){d=Z;var te=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&d.focus();break;case"img":te.src&&(d.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _e=o.alternate;if(_e!==null){var Ue=_e.memoizedState;if(Ue!==null){var Xe=Ue.dehydrated;Xe!==null&&yl(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ki||o.flags&512&&$g(o)}catch(De){Zn(o,o.return,De)}}if(o===r){St=null;break}if(d=o.sibling,d!==null){d.return=o.return,St=d;break}St=o.return}}function K0(r){for(;St!==null;){var o=St;if(o===r){St=null;break}var d=o.sibling;if(d!==null){d.return=o.return,St=d;break}St=o.return}}function Z0(r){for(;St!==null;){var o=St;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{tp(4,o)}catch(te){Zn(o,d,te)}break;case 1:var y=o.stateNode;if(typeof y.componentDidMount=="function"){var M=o.return;try{y.componentDidMount()}catch(te){Zn(o,M,te)}}var k=o.return;try{$g(o)}catch(te){Zn(o,k,te)}break;case 5:var U=o.return;try{$g(o)}catch(te){Zn(o,U,te)}}}catch(te){Zn(o,o.return,te)}if(o===r){St=null;break}var Z=o.sibling;if(Z!==null){Z.return=o.return,St=Z;break}St=o.return}}var qw=Math.ceil,np=P.ReactCurrentDispatcher,nv=P.ReactCurrentOwner,da=P.ReactCurrentBatchConfig,mn=0,Ai=null,ci=null,Bi=0,Kr=0,Nh=Bn(0),xi=0,xd=null,Kl=0,ip=0,iv=0,_d=null,Cr=null,rv=0,Dh=1/0,Js=null,rp=!1,av=null,Vo=null,ap=!1,Ho=null,sp=0,bd=0,sv=null,op=-1,lp=0;function fr(){return(mn&6)!==0?ce():op!==-1?op:op=ce()}function jo(r){return(r.mode&1)===0?1:(mn&2)!==0&&Bi!==0?Bi&-Bi:qg.transition!==null?(lp===0&&(lp=ai()),lp):(r=zt,r!==0||(r=window.event,r=r===void 0?16:Af(r.type)),r)}function Va(r,o,d,y){if(50<bd)throw bd=0,sv=null,Error(t(185));Yn(r,d,y),((mn&2)===0||r!==Ai)&&(r===Ai&&((mn&2)===0&&(ip|=d),xi===4&&Go(r,Bi)),Rr(r,y),d===1&&mn===0&&(o.mode&1)===0&&(Dh=ce()+500,Ll&&la()))}function Rr(r,o){var d=r.callbackNode;Br(r,o);var y=rn(r,r===Ai?Bi:0);if(y===0)d!==null&&Bu(d),r.callbackNode=null,r.callbackPriority=0;else if(o=y&-y,r.callbackPriority!==o){if(d!=null&&Bu(d),o===1)r.tag===0?Vf(Q0.bind(null,r)):Nl(Q0.bind(null,r)),Yg(function(){(mn&6)===0&&la()}),d=null;else{switch(ia(y)){case 1:d=le;break;case 4:d=Ze;break;case 16:d=ut;break;case 536870912:d=pt;break;default:d=ut}d=sx(d,J0.bind(null,r))}r.callbackPriority=o,r.callbackNode=d}}function J0(r,o){if(op=-1,lp=0,(mn&6)!==0)throw Error(t(327));var d=r.callbackNode;if(Oh()&&r.callbackNode!==d)return null;var y=rn(r,r===Ai?Bi:0);if(y===0)return null;if((y&30)!==0||(y&r.expiredLanes)!==0||o)o=up(r,y);else{o=y;var M=mn;mn|=2;var k=ex();(Ai!==r||Bi!==o)&&(Js=null,Dh=ce()+500,Jl(r,o));do try{Jw();break}catch(Z){$0(r,Z)}while(!0);js(),np.current=k,mn=M,ci!==null?o=0:(Ai=null,Bi=0,o=xi)}if(o!==0){if(o===2&&(M=ri(r),M!==0&&(y=M,o=ov(r,M))),o===1)throw d=xd,Jl(r,0),Go(r,y),Rr(r,ce()),d;if(o===6)Go(r,y);else{if(M=r.current.alternate,(y&30)===0&&!Kw(M)&&(o=up(r,y),o===2&&(k=ri(r),k!==0&&(y=k,o=ov(r,k))),o===1))throw d=xd,Jl(r,0),Go(r,y),Rr(r,ce()),d;switch(r.finishedWork=M,r.finishedLanes=y,o){case 0:case 1:throw Error(t(345));case 2:Ql(r,Cr,Js);break;case 3:if(Go(r,y),(y&130023424)===y&&(o=rv+500-ce(),10<o)){if(rn(r,0)!==0)break;if(M=r.suspendedLanes,(M&y)!==y){fr(),r.pingedLanes|=r.suspendedLanes&M;break}r.timeoutHandle=qc(Ql.bind(null,r,Cr,Js),o);break}Ql(r,Cr,Js);break;case 4:if(Go(r,y),(y&4194240)===y)break;for(o=r.eventTimes,M=-1;0<y;){var U=31-Nt(y);k=1<<U,U=o[U],U>M&&(M=U),y&=~k}if(y=M,y=ce()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*qw(y/1960))-y,10<y){r.timeoutHandle=qc(Ql.bind(null,r,Cr,Js),y);break}Ql(r,Cr,Js);break;case 5:Ql(r,Cr,Js);break;default:throw Error(t(329))}}}return Rr(r,ce()),r.callbackNode===d?J0.bind(null,r):null}function ov(r,o){var d=_d;return r.current.memoizedState.isDehydrated&&(Jl(r,o).flags|=256),r=up(r,o),r!==2&&(o=Cr,Cr=d,o!==null&&lv(o)),r}function lv(r){Cr===null?Cr=r:Cr.push.apply(Cr,r)}function Kw(r){for(var o=r;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var M=d[y],k=M.getSnapshot;M=M.value;try{if(!ar(k(),M))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Go(r,o){for(o&=~iv,o&=~ip,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var d=31-Nt(o),y=1<<d;r[d]=-1,o&=~y}}function Q0(r){if((mn&6)!==0)throw Error(t(327));Oh();var o=rn(r,0);if((o&1)===0)return Rr(r,ce()),null;var d=up(r,o);if(r.tag!==0&&d===2){var y=ri(r);y!==0&&(o=y,d=ov(r,y))}if(d===1)throw d=xd,Jl(r,0),Go(r,o),Rr(r,ce()),d;if(d===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Ql(r,Cr,Js),Rr(r,ce()),null}function uv(r,o){var d=mn;mn|=1;try{return r(o)}finally{mn=d,mn===0&&(Dh=ce()+500,Ll&&la())}}function Zl(r){Ho!==null&&Ho.tag===0&&(mn&6)===0&&Oh();var o=mn;mn|=1;var d=da.transition,y=zt;try{if(da.transition=null,zt=1,r)return r()}finally{zt=y,da.transition=d,mn=o,(mn&6)===0&&la()}}function hv(){Kr=Nh.current,An(Nh)}function Jl(r,o){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;if(d!==-1&&(r.timeoutHandle=-1,Kc(d)),ci!==null)for(d=ci.return;d!==null;){var y=d;switch(Ia(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Il();break;case 3:us(),An(Ni),An(pi),ha();break;case 5:Uo(y);break;case 4:us();break;case 13:An(In);break;case 19:An(In);break;case 10:Fl(y.type._context);break;case 22:case 23:hv()}d=d.return}if(Ai=r,ci=r=Wo(r.current,null),Bi=Kr=o,xi=0,xd=null,iv=ip=Kl=0,Cr=_d=null,La!==null){for(o=0;o<La.length;o++)if(d=La[o],y=d.interleaved,y!==null){d.interleaved=null;var M=y.next,k=d.pending;if(k!==null){var U=k.next;k.next=M,y.next=U}d.pending=y}La=null}return r}function $0(r,o){do{var d=ci;try{if(js(),Ys.current=Ih,Yr){for(var y=kn.memoizedState;y!==null;){var M=y.queue;M!==null&&(M.pending=null),y=y.next}Yr=!1}if(Da=0,fn=Vn=kn=null,Ei=!1,hs=0,nv.current=null,d===null||d.return===null){xi=1,xd=o,ci=null;break}e:{var k=r,U=d.return,Z=d,te=o;if(o=Bi,Z.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var _e=te,Ue=Z,Xe=Ue.tag;if((Ue.mode&1)===0&&(Xe===0||Xe===11||Xe===15)){var De=Ue.alternate;De?(Ue.updateQueue=De.updateQueue,Ue.memoizedState=De.memoizedState,Ue.lanes=De.lanes):(Ue.updateQueue=null,Ue.memoizedState=null)}var vt=_t(U);if(vt!==null){vt.flags&=-257,Xt(vt,U,Z,k,o),vt.mode&1&&qe(k,_e,o),o=vt,te=_e;var Et=o.updateQueue;if(Et===null){var Ct=new Set;Ct.add(te),o.updateQueue=Ct}else Et.add(te);break e}else{if((o&1)===0){qe(k,_e,o),cv();break e}te=Error(t(426))}}else if(Rn&&Z.mode&1){var ti=_t(U);if(ti!==null){(ti.flags&65536)===0&&(ti.flags|=256),Xt(ti,U,Z,k,o),No(b(te,Z));break e}}k=te=b(te,Z),xi!==4&&(xi=2),_d===null?_d=[k]:_d.push(k),k=U;do{switch(k.tag){case 3:k.flags|=65536,o&=-o,k.lanes|=o;var de=ae(k,te,o);Gs(k,de);break e;case 1:Z=te;var re=k.type,pe=k.stateNode;if((k.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Vo===null||!Vo.has(pe)))){k.flags|=65536,o&=-o,k.lanes|=o;var Qe=Ee(k,Z,o);Gs(k,Qe);break e}}k=k.return}while(k!==null)}nx(d)}catch(It){o=It,ci===d&&d!==null&&(ci=d=d.return);continue}break}while(!0)}function ex(){var r=np.current;return np.current=Ih,r===null?Ih:r}function cv(){(xi===0||xi===3||xi===2)&&(xi=4),Ai===null||(Kl&268435455)===0&&(ip&268435455)===0||Go(Ai,Bi)}function up(r,o){var d=mn;mn|=2;var y=ex();(Ai!==r||Bi!==o)&&(Js=null,Jl(r,o));do try{Zw();break}catch(M){$0(r,M)}while(!0);if(js(),mn=d,np.current=y,ci!==null)throw Error(t(261));return Ai=null,Bi=0,xi}function Zw(){for(;ci!==null;)tx(ci)}function Jw(){for(;ci!==null&&!V();)tx(ci)}function tx(r){var o=ax(r.alternate,r,Kr);r.memoizedProps=r.pendingProps,o===null?nx(r):ci=o,nv.current=null}function nx(r){var o=r;do{var d=o.alternate;if(r=o.return,(o.flags&32768)===0){if(d=jw(d,o,Kr),d!==null){ci=d;return}}else{if(d=Gw(d,o),d!==null){d.flags&=32767,ci=d;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{xi=6,ci=null;return}}if(o=o.sibling,o!==null){ci=o;return}ci=o=r}while(o!==null);xi===0&&(xi=5)}function Ql(r,o,d){var y=zt,M=da.transition;try{da.transition=null,zt=1,Qw(r,o,d,y)}finally{da.transition=M,zt=y}return null}function Qw(r,o,d,y){do Oh();while(Ho!==null);if((mn&6)!==0)throw Error(t(327));d=r.finishedWork;var M=r.finishedLanes;if(d===null)return null;if(r.finishedWork=null,r.finishedLanes=0,d===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var k=d.lanes|d.childLanes;if(Hi(r,k),r===Ai&&(ci=Ai=null,Bi=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||ap||(ap=!0,sx(ut,function(){return Oh(),null})),k=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||k){k=da.transition,da.transition=null;var U=zt;zt=1;var Z=mn;mn|=4,nv.current=null,Xw(r,d),X0(d,r),oi(Xc),_r=!!Io,Xc=Io=null,r.current=d,Yw(d),oe(),mn=Z,zt=U,da.transition=k}else r.current=d;if(ap&&(ap=!1,Ho=r,sp=M),k=r.pendingLanes,k===0&&(Vo=null),rt(d.stateNode),Rr(r,ce()),o!==null)for(y=r.onRecoverableError,d=0;d<o.length;d++)M=o[d],y(M.value,{componentStack:M.stack,digest:M.digest});if(rp)throw rp=!1,r=av,av=null,r;return(sp&1)!==0&&r.tag!==0&&Oh(),k=r.pendingLanes,(k&1)!==0?r===sv?bd++:(bd=0,sv=r):bd=0,la(),null}function Oh(){if(Ho!==null){var r=ia(sp),o=da.transition,d=zt;try{if(da.transition=null,zt=16>r?16:r,Ho===null)var y=!1;else{if(r=Ho,Ho=null,sp=0,(mn&6)!==0)throw Error(t(331));var M=mn;for(mn|=4,St=r.current;St!==null;){var k=St,U=k.child;if((St.flags&16)!==0){var Z=k.deletions;if(Z!==null){for(var te=0;te<Z.length;te++){var _e=Z[te];for(St=_e;St!==null;){var Ue=St;switch(Ue.tag){case 0:case 11:case 15:yd(8,Ue,k)}var Xe=Ue.child;if(Xe!==null)Xe.return=Ue,St=Xe;else for(;St!==null;){Ue=St;var De=Ue.sibling,vt=Ue.return;if(V0(Ue),Ue===_e){St=null;break}if(De!==null){De.return=vt,St=De;break}St=vt}}}var Et=k.alternate;if(Et!==null){var Ct=Et.child;if(Ct!==null){Et.child=null;do{var ti=Ct.sibling;Ct.sibling=null,Ct=ti}while(Ct!==null)}}St=k}}if((k.subtreeFlags&2064)!==0&&U!==null)U.return=k,St=U;else e:for(;St!==null;){if(k=St,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:yd(9,k,k.return)}var de=k.sibling;if(de!==null){de.return=k.return,St=de;break e}St=k.return}}var re=r.current;for(St=re;St!==null;){U=St;var pe=U.child;if((U.subtreeFlags&2064)!==0&&pe!==null)pe.return=U,St=pe;else e:for(U=re;St!==null;){if(Z=St,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:tp(9,Z)}}catch(It){Zn(Z,Z.return,It)}if(Z===U){St=null;break e}var Qe=Z.sibling;if(Qe!==null){Qe.return=Z.return,St=Qe;break e}St=Z.return}}if(mn=M,la(),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(kt,r)}catch{}y=!0}return y}finally{zt=d,da.transition=o}}return!1}function ix(r,o,d){o=b(d,o),o=ae(r,o,1),r=Ln(r,o,1),o=fr(),r!==null&&(Yn(r,1,o),Rr(r,o))}function Zn(r,o,d){if(r.tag===3)ix(r,r,d);else for(;o!==null;){if(o.tag===3){ix(o,r,d);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Vo===null||!Vo.has(y))){r=b(d,r),r=Ee(o,r,1),o=Ln(o,r,1),r=fr(),o!==null&&(Yn(o,1,r),Rr(o,r));break}}o=o.return}}function $w(r,o,d){var y=r.pingCache;y!==null&&y.delete(o),o=fr(),r.pingedLanes|=r.suspendedLanes&d,Ai===r&&(Bi&d)===d&&(xi===4||xi===3&&(Bi&130023424)===Bi&&500>ce()-rv?Jl(r,0):iv|=d),Rr(r,o)}function rx(r,o){o===0&&((r.mode&1)===0?o=1:(o=gt,gt<<=1,(gt&130023424)===0&&(gt=4194304)));var d=fr();r=Wr(r,o),r!==null&&(Yn(r,o,d),Rr(r,d))}function eS(r){var o=r.memoizedState,d=0;o!==null&&(d=o.retryLane),rx(r,d)}function tS(r,o){var d=0;switch(r.tag){case 13:var y=r.stateNode,M=r.memoizedState;M!==null&&(d=M.retryLane);break;case 19:y=r.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(o),rx(r,d)}var ax;ax=function(r,o,d){if(r!==null)if(r.memoizedProps!==o.pendingProps||Ni.current)Qt=!0;else{if((r.lanes&d)===0&&(o.flags&128)===0)return Qt=!1,Hw(r,o,d);Qt=(r.flags&131072)!==0}else Qt=!1,Rn&&(o.flags&1048576)!==0&&ed(o,bh,o.index);switch(o.lanes=0,o.tag){case 2:var y=o.type;$f(r,o),r=o.pendingProps;var M=Os(o,pi.current);ls(o,d),M=jl(null,o,y,r,M,d);var k=ld();return o.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Mi(y)?(k=!0,Us(o)):k=!1,o.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,Kt(o),M.updater=Ph,o.stateNode=M,M._reactInternals=o,g(o,y,r,d),o=qt(null,o,y,!0,k,d)):(o.tag=0,Rn&&k&&td(o),mt(null,o,M,d),o=o.child),o;case 16:y=o.elementType;e:{switch($f(r,o),r=o.pendingProps,M=y._init,y=M(y._payload),o.type=y,M=o.tag=iS(y),r=kr(y,r),M){case 0:o=ct(null,o,y,r,d);break e;case 1:o=Rt(null,o,y,r,d);break e;case 11:o=yi(null,o,y,r,d);break e;case 14:o=dr(null,o,y,kr(y.type,r),d);break e}throw Error(t(306,y,""))}return o;case 0:return y=o.type,M=o.pendingProps,M=o.elementType===y?M:kr(y,M),ct(r,o,y,M,d);case 1:return y=o.type,M=o.pendingProps,M=o.elementType===y?M:kr(y,M),Rt(r,o,y,M,d);case 3:e:{if(Yt(o),r===null)throw Error(t(387));y=o.pendingProps,k=o.memoizedState,M=k.element,jn(r,o),zn(o,y,null,d);var U=o.memoizedState;if(y=U.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},o.updateQueue.baseState=k,o.memoizedState=k,o.flags&256){M=b(Error(t(423)),o),o=cn(r,o,y,d,M);break e}else if(y!==M){M=b(Error(t(424)),o),o=cn(r,o,y,d,M);break e}else for(Oi=Ea(o.stateNode.containerInfo.firstChild),mi=o,Rn=!0,Ar=null,d=Ul(o,null,y,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(os(),y===M){o=Zs(r,o,d);break e}mt(r,o,y,d)}o=o.child}return o;case 5:return Xs(o),r===null&&Sh(o),y=o.type,M=o.pendingProps,k=r!==null?r.memoizedProps:null,U=M.children,Yc(y,M)?U=null:k!==null&&Yc(y,k)&&(o.flags|=32),Me(r,o),mt(r,o,U,d),o.child;case 6:return r===null&&Sh(o),null;case 13:return Fa(r,o,d);case 4:return Vl(o,o.stateNode.containerInfo),y=o.pendingProps,r===null?o.child=zs(o,null,y,d):mt(r,o,y,d),o.child;case 11:return y=o.type,M=o.pendingProps,M=o.elementType===y?M:kr(y,M),yi(r,o,y,M,d);case 7:return mt(r,o,o.pendingProps,d),o.child;case 8:return mt(r,o,o.pendingProps.children,d),o.child;case 12:return mt(r,o,o.pendingProps.children,d),o.child;case 10:e:{if(y=o.type._context,M=o.pendingProps,k=o.memoizedProps,U=M.value,Mn(Vs,y._currentValue),y._currentValue=U,k!==null)if(ar(k.value,U)){if(k.children===M.children&&!Ni.current){o=Zs(r,o,d);break e}}else for(k=o.child,k!==null&&(k.return=o);k!==null;){var Z=k.dependencies;if(Z!==null){U=k.child;for(var te=Z.firstContext;te!==null;){if(te.context===y){if(k.tag===1){te=wn(-1,d&-d),te.tag=2;var _e=k.updateQueue;if(_e!==null){_e=_e.shared;var Ue=_e.pending;Ue===null?te.next=te:(te.next=Ue.next,Ue.next=te),_e.pending=te}}k.lanes|=d,te=k.alternate,te!==null&&(te.lanes|=d),Bl(k.return,d,o),Z.lanes|=d;break}te=te.next}}else if(k.tag===10)U=k.type===o.type?null:k.child;else if(k.tag===18){if(U=k.return,U===null)throw Error(t(341));U.lanes|=d,Z=U.alternate,Z!==null&&(Z.lanes|=d),Bl(U,d,o),U=k.sibling}else U=k.child;if(U!==null)U.return=k;else for(U=k;U!==null;){if(U===o){U=null;break}if(k=U.sibling,k!==null){k.return=U.return,U=k;break}U=U.return}k=U}mt(r,o,M.children,d),o=o.child}return o;case 9:return M=o.type,y=o.pendingProps.children,ls(o,d),M=lr(M),y=y(M),o.flags|=1,mt(r,o,y,d),o.child;case 14:return y=o.type,M=kr(y,o.pendingProps),M=kr(y.type,M),dr(r,o,y,M,d);case 15:return ve(r,o,o.type,o.pendingProps,d);case 17:return y=o.type,M=o.pendingProps,M=o.elementType===y?M:kr(y,M),$f(r,o),o.tag=1,Mi(y)?(r=!0,Us(o)):r=!1,ls(o,d),l(o,y,M),g(o,y,M,d),qt(null,o,y,!0,r,d);case 19:return O0(r,o,d);case 22:return se(r,o,d)}throw Error(t(156,o.tag))};function sx(r,o){return Fu(r,o)}function nS(r,o,d,y){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(r,o,d,y){return new nS(r,o,d,y)}function dv(r){return r=r.prototype,!(!r||!r.isReactComponent)}function iS(r){if(typeof r=="function")return dv(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ee)return 11;if(r===fe)return 14}return 2}function Wo(r,o){var d=r.alternate;return d===null?(d=fa(r.tag,o,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=o,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&14680064,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,o=r.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d}function hp(r,o,d,y,M,k){var U=2;if(y=r,typeof r=="function")dv(r)&&(U=1);else if(typeof r=="string")U=5;else e:switch(r){case z:return $l(d.children,M,k,o);case G:U=8,M|=8;break;case D:return r=fa(12,d,o,M|2),r.elementType=D,r.lanes=k,r;case ne:return r=fa(13,d,o,M),r.elementType=ne,r.lanes=k,r;case me:return r=fa(19,d,o,M),r.elementType=me,r.lanes=k,r;case we:return cp(d,M,k,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:U=10;break e;case H:U=9;break e;case ee:U=11;break e;case fe:U=14;break e;case ye:U=16,y=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return o=fa(U,d,o,M),o.elementType=r,o.type=y,o.lanes=k,o}function $l(r,o,d,y){return r=fa(7,r,y,o),r.lanes=d,r}function cp(r,o,d,y){return r=fa(22,r,y,o),r.elementType=we,r.lanes=d,r.stateNode={isHidden:!1},r}function fv(r,o,d){return r=fa(6,r,null,o),r.lanes=d,r}function pv(r,o,d){return o=fa(4,r.children!==null?r.children:[],r.key,o),o.lanes=d,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function rS(r,o,d,y,M){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sn(0),this.expirationTimes=Sn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sn(0),this.identifierPrefix=y,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function mv(r,o,d,y,M,k,U,Z,te){return r=new rS(r,o,d,Z,te),o===1?(o=1,k===!0&&(o|=8)):o=0,k=fa(3,null,null,o),r.current=k,k.stateNode=r,k.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kt(k),r}function aS(r,o,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:y==null?null:""+y,children:r,containerInfo:o,implementation:d}}function ox(r){if(!r)return ka;r=r._reactInternals;e:{if(na(r)!==r||r.tag!==1)throw Error(t(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Mi(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(r.tag===1){var d=r.type;if(Mi(d))return Pl(r,d,o)}return o}function lx(r,o,d,y,M,k,U,Z,te){return r=mv(d,y,!0,r,M,k,U,Z,te),r.context=ox(null),d=r.current,y=fr(),M=jo(d),k=wn(y,M),k.callback=o??null,Ln(d,k,M),r.current.lanes=M,Yn(r,M,y),Rr(r,y),r}function dp(r,o,d,y){var M=o.current,k=fr(),U=jo(M);return d=ox(d),o.context===null?o.context=d:o.pendingContext=d,o=wn(k,U),o.payload={element:r},y=y===void 0?null:y,y!==null&&(o.callback=y),r=Ln(M,o,U),r!==null&&(Va(r,M,U,k),Ti(r,M,U)),U}function fp(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ux(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<o?d:o}}function gv(r,o){ux(r,o),(r=r.alternate)&&ux(r,o)}function sS(){return null}var hx=typeof reportError=="function"?reportError:function(r){console.error(r)};function vv(r){this._internalRoot=r}pp.prototype.render=vv.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(t(409));dp(r,o,null,null)},pp.prototype.unmount=vv.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Zl(function(){dp(null,r,null,null)}),o[or]=null}};function pp(r){this._internalRoot=r}pp.prototype.unstable_scheduleHydration=function(r){if(r){var o=zu();r={blockedOn:null,target:r,priority:o};for(var d=0;d<$a.length&&o!==0&&o<$a[d].priority;d++);$a.splice(d,0,r),d===0&&ju(r)}};function yv(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function mp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function cx(){}function oS(r,o,d,y,M){if(M){if(typeof y=="function"){var k=y;y=function(){var _e=fp(U);k.call(_e)}}var U=lx(o,y,r,0,null,!1,!1,"",cx);return r._reactRootContainer=U,r[or]=U.current,Co(r.nodeType===8?r.parentNode:r),Zl(),U}for(;M=r.lastChild;)r.removeChild(M);if(typeof y=="function"){var Z=y;y=function(){var _e=fp(te);Z.call(_e)}}var te=mv(r,0,!1,null,null,!1,!1,"",cx);return r._reactRootContainer=te,r[or]=te.current,Co(r.nodeType===8?r.parentNode:r),Zl(function(){dp(o,te,d,y)}),te}function gp(r,o,d,y,M){var k=d._reactRootContainer;if(k){var U=k;if(typeof M=="function"){var Z=M;M=function(){var te=fp(U);Z.call(te)}}dp(o,U,r,M)}else U=oS(d,o,r,M,y);return fp(U)}ir=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var d=dn(o.pendingLanes);d!==0&&(Fn(o,d|1),Rr(o,ce()),(mn&6)===0&&(Dh=ce()+500,la()))}break;case 13:Zl(function(){var y=Wr(r,1);if(y!==null){var M=fr();Va(y,r,1,M)}}),gv(r,1)}},Cc=function(r){if(r.tag===13){var o=Wr(r,134217728);if(o!==null){var d=fr();Va(o,r,134217728,d)}gv(r,134217728)}},Ef=function(r){if(r.tag===13){var o=jo(r),d=Wr(r,o);if(d!==null){var y=fr();Va(d,r,o,y)}gv(r,o)}},zu=function(){return zt},Vu=function(r,o){var d=zt;try{return zt=r,o()}finally{zt=d}},Ve=function(r,o,d){switch(o){case"input":if(Be(r,d),o=d.name,d.type==="radio"&&o!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var y=d[o];if(y!==r&&y.form===r.form){var M=yh(y);if(!M)throw Error(t(90));on(y),Be(y,M)}}}break;case"textarea":O(r,d);break;case"select":o=d.value,o!=null&&$e(r,!!d.multiple,o,!1)}},Pt=uv,un=Zl;var lS={usingClientEntryPoint:!1,Events:[Aa,Hn,yh,ke,lt,uv]},wd={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uS={bundleType:wd.bundleType,version:wd.version,rendererPackageName:wd.rendererPackageName,rendererConfig:wd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ou(r),r===null?null:r.stateNode},findFiberByHostInstance:wd.findFiberByHostInstance||sS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vp.isDisabled&&vp.supportsFiber)try{kt=vp.inject(uS),tt=vp}catch{}}return Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lS,Ir.createPortal=function(r,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yv(o))throw Error(t(200));return aS(r,o,null,d)},Ir.createRoot=function(r,o){if(!yv(r))throw Error(t(299));var d=!1,y="",M=hx;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=mv(r,1,!1,null,null,d,!1,y,M),r[or]=o.current,Co(r.nodeType===8?r.parentNode:r),new vv(o)},Ir.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Ou(o),r=r===null?null:r.stateNode,r},Ir.flushSync=function(r){return Zl(r)},Ir.hydrate=function(r,o,d){if(!mp(o))throw Error(t(200));return gp(null,r,o,!0,d)},Ir.hydrateRoot=function(r,o,d){if(!yv(r))throw Error(t(405));var y=d!=null&&d.hydratedSources||null,M=!1,k="",U=hx;if(d!=null&&(d.unstable_strictMode===!0&&(M=!0),d.identifierPrefix!==void 0&&(k=d.identifierPrefix),d.onRecoverableError!==void 0&&(U=d.onRecoverableError)),o=lx(o,null,r,1,d??null,M,!1,k,U),r[or]=o.current,Co(r),y)for(r=0;r<y.length;r++)d=y[r],M=d._getVersion,M=M(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,M]:o.mutableSourceEagerHydrationData.push(d,M);return new pp(o)},Ir.render=function(r,o,d){if(!mp(o))throw Error(t(200));return gp(null,r,o,!1,d)},Ir.unmountComponentAtNode=function(r){if(!mp(r))throw Error(t(40));return r._reactRootContainer?(Zl(function(){gp(null,null,r,!1,function(){r._reactRootContainer=null,r[or]=null})}),!0):!1},Ir.unstable_batchedUpdates=uv,Ir.unstable_renderSubtreeIntoContainer=function(r,o,d,y){if(!mp(d))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return gp(r,o,d,!1,y)},Ir.version="18.3.1-next-f1338f8080-20240426",Ir}var xx;function yS(){if(xx)return bv.exports;xx=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),bv.exports=vS(),bv.exports}var _x;function xS(){if(_x)return yp;_x=1;var a=yS();return yp.createRoot=a.createRoot,yp.hydrateRoot=a.hydrateRoot,yp}var _S=xS();const bS=Yy(_S),wS=[{id:1,name:"",name_meaning:"Arjuna's Despondency",chapter_number:1,verses_count:47,summary:"On the battlefield of Kurukshetra, Arjuna faces a moral dilemma as he sees his relatives and teachers in the opposing army. Overwhelmed with grief, he lays down his weapons.",verses:[{id:1,verse_number:1,chapter_number:1,text:`  |
    |
    ||-||`,transliteration:`dhitarhtra uvcha
dharma-khetre kuru-khetre samavet yuyutsava
mmak pavhchaiva kim akurvata sajaya`,meaning:"Dhritarashtra said: O Sanjaya, after my sons and the sons of Pandu assembled in the place of pilgrimage at Kurukshetra, desiring to fight, what did they do?"},{id:2,verse_number:2,chapter_number:1,text:`  |
     |
   ||-||`,transliteration:`sajaya uvcha
dihv tu pavnka vyha duryodhanas tad
chryam upasagamya rj vachanam abravt`,meaning:"Sanjaya said: O King, after looking at the army of the Pandavas drawn in military array, King Duryodhana went to his teacher Dronacharya and spoke the following words."},{id:3,verse_number:3,chapter_number:1,text:`    |
     ||-||`,transliteration:`pahyait pu-putrm chrya mahat chamm
vyh drupada-putrea tava hihyea dhmat`,meaning:"O my teacher, behold the great army of the sons of Pandu, so expertly arranged by your intelligent disciple, the son of Drupada."},{id:4,verse_number:4,chapter_number:1,text:`     |
    ||-||`,transliteration:`atra hr mahehvs bhmrjuna-sam yudhi
yuyudhno virah cha drupadah cha mah-ratha`,meaning:"Here in this army are many heroic bowmen equal in fighting to Bhima and Arjuna; there are also great fighters like Yuyudhana, Virata, and Drupada."},{id:5,verse_number:5,chapter_number:1,text:`   |
   ||-||`,transliteration:`dhihaketuh chekitna khirjah cha vryavn
purujit kuntibhojah cha haibyah cha nara-pugava`,meaning:"There are also Dhrishtaketu, Cekitana, Kasiraja, Purujit, Kuntibhoja, and Saibya, all possessing great prowess and strength."},{id:6,verse_number:6,chapter_number:1,text:`    |
     ||-||`,transliteration:`yudhmanyuh cha vikrnta uttamaujh cha vryavn
saubhadro draupadeyh cha sarva eva mah-rath`,meaning:"There are the mighty Yudhamanyu, the very powerful Uttamaujas, the son of Subhadra and the sons of Draupadi. All these warriors are great chariot fighters."},{id:7,verse_number:7,chapter_number:1,text:`      |
      ||-||`,transliteration:`asmka tu vihih ye tn nibodha dwijottama
nyak mama sainyasya sajrtha tn bravmi te`,meaning:"But for your information, O best of the brahmanas, let me tell you about the captains who are especially qualified to lead my military force."},{id:8,verse_number:8,chapter_number:1,text:`    |
    ||-||`,transliteration:`bhavn bhhmah cha karah cha kipah cha samitijaya
ahvatthm vikarah cha saumadattis tathaiva cha`,meaning:"There are personalities like yourself, Bhishma, Karna, Kripa, Asvatthama, Vikarna, and the son of Somadatta called Bhurisrava, who are always victorious in battle."},{id:9,verse_number:9,chapter_number:1,text:`      |
   ||-||`,transliteration:`anye cha bahava hr mad-arthe tyakta-jvit
nn-hastra-prahara sarve yuddha-vihrad`,meaning:"There are many other heroes who are prepared to lay down their lives for my sake. All of them are well equipped with different kinds of weapons, and all are experienced in military science."},{id:10,verse_number:10,chapter_number:1,text:`    |
    ||-||`,transliteration:`aparypta tad asmka bala bhhmbhirakhitam
parypta tv idam eteh bala bhmbhirakhitam`,meaning:"Our strength is immeasurable, and we are perfectly protected by Grandfather Bhishma, whereas the strength of the Pandavas, carefully protected by Bhima, is limited."},{id:11,verse_number:11,chapter_number:1,text:`    |
     ||-||`,transliteration:`ayanehu cha sarvehu yath-bhgam avasthit
bhhmam evbhirakhantu bhavanta sarva eva hi`,meaning:"Now all of you must give full support to Grandfather Bhishma, as you stand at your respective strategic points of entrance into the phalanx of the army."},{id:12,verse_number:12,chapter_number:1,text:`    |
     ||-||`,transliteration:`tasya sajanayan harha kuru-viddha pitmaha
siha-nda vinadyochchai hakha dadhmau pratpavn`,meaning:"Then Bhishma, the great valiant grandsire of the Kuru dynasty, the grandfather of the fighters, blew his conchshell very loudly, making a sound like the roar of a lion, giving Duryodhana joy."},{id:13,verse_number:13,chapter_number:1,text:`    |
   ||-||`,transliteration:`tata hakhh cha bheryah cha paavnaka-gomukh
sahasaivbhyahanyanta sa habdas tumulo bhavat`,meaning:"After that, the conchshells, drums, bugles, trumpets and horns were all suddenly sounded, and the combined sound was tumultuous."},{id:14,verse_number:14,chapter_number:1,text:`     |
     ||-||`,transliteration:`tata hvetair hayair yukte mahati syandane sthitau
mdhava pavah chaiva divyau hakhau pradadhmatu`,meaning:"On the other side, both Lord Krishna and Arjuna, stationed on a great chariot drawn by white horses, sounded their transcendental conchshells."},{id:15,verse_number:15,chapter_number:1,text:`    |
     ||-||`,transliteration:`pchajanya hihkeho devadatta dhanajaya
paura dadhmau mah-hakha bhma-karm vikodara`,meaning:"Lord Krishna blew His conchshell, called Pancajanya; Arjuna blew his, the Devadatta; and Bhima, the voracious eater and performer of Herculean tasks, blew his terrific conchshell, called Paundra."},{id:16,verse_number:16,chapter_number:1,text:`    |
   ||-||`,transliteration:`anantavijaya rj kunt-putro yudhihhira
nakula sahadevah cha sughoha-maipuhpakau`,meaning:"King Yudhishthira, the son of Kunti, blew his conchshell, the Anantavijaya, and Nakula and Sahadeva blew the Sughosha and Manipushpaka."},{id:17,verse_number:17,chapter_number:1,text:`     |
   ||-||`,transliteration:`khyah cha paramehvsa hikha cha mah-ratha
dhihadyumno virah cha styakih chparjita`,meaning:"That great archer the King of Kasi, the great fighter Sikhandi, Dhrishtadyumna, Virata, the unconquerable Satyaki..."},{id:18,verse_number:18,chapter_number:1,text:`    |
    ||-||`,transliteration:`drupado draupadeyh cha sarvaha pithiv-pate
saubhadrah cha mah-bhu hakhn dadhmu pithak pithak`,meaning:"Drupada, the sons of Draupadi, and the others, O King, such as the mighty-armed son of Subhadra, all blew their respective conchshells."},{id:19,verse_number:19,chapter_number:1,text:`     |
     ||-||`,transliteration:`sa ghoho dhrtarhr hidayni vyadrayat
nabhah cha pithiv chaiva tumulo vyanundayan`,meaning:"The blowing of these different conchshells became uproarious. Vibrating both in the sky and on the earth, it shattered the hearts of the sons of Dhritarashtra."},{id:20,verse_number:20,chapter_number:1,text:`    |
    |
    ||-||`,transliteration:`atha vyavasthitn dihv dhrtarhrn kapi-dhwaja
pravitte hastra-sampte dhanur udyamya pava
hihkeha tad vkyam idam ha mah-pate`,meaning:"At that time Arjuna, the son of Pandu, seated in the chariot bearing the flag of Hanuman, took up his bow and prepared to shoot his arrows. O King, after looking at the sons of Dhritarashtra drawn in military array, Arjuna then spoke to Lord Krishna these words."},{id:21,verse_number:21,chapter_number:1,text:`  |
    |
  ||-||`,transliteration:`arjuna uvcha
senayor ubhayor madhye ratha sthpaya me chyuta
yvad etn nirkhe ha yoddhu-kmn avasthitn`,meaning:"Arjuna said: O infallible one, please draw my chariot between the two armies so that I may see those present here, who desire to fight, and with whom I must contend in this great trial of arms."},{id:22,verse_number:22,chapter_number:1,text:"   ||-||",transliteration:"kair may saha yoddhavyam asmin raa-samudyame",meaning:"Let me see those who have come here to fight, wishing to please the evil-minded son of Dhritarashtra."},{id:23,verse_number:23,chapter_number:1,text:`  |
    |
   ||-||`,transliteration:`sajaya uvcha
evam ukto hihkeho gukehena bhrata
senayor ubhayor madhye sthpayitv rathottamam`,meaning:"Sanjaya said: O descendant of Bharata, having been thus addressed by Arjuna, Lord Krishna drew up the fine chariot in the midst of the armies of both parties."},{id:24,verse_number:24,chapter_number:1,text:`    |
   ||-||`,transliteration:`bhhma-droa-pramukhata sarveh cha mah-khitm
uvcha prtha pahyaitn samavetn kurn iti`,meaning:"In the presence of Bhishma, Drona and all the other chieftains of the world, the Lord said, Just behold, Partha, all the Kurus assembled here."},{id:25,verse_number:25,chapter_number:1,text:`   |
 ||-||`,transliteration:`tatrpahyat sthitn prtha pitin atha pitmahn
chryn mtuln bhrtin putrn pautrn sakhs tath`,meaning:"There Arjuna could see, within the midst of the armies of both parties, his fathers, grandfathers, teachers, maternal uncles, brothers, sons, grandsons, friends..."},{id:26,verse_number:26,chapter_number:1,text:`  |
    ||-||`,transliteration:`hvahurn suhidah chaiva senayor ubhayor api
tn samkhya sa kaunteya sarvn bandhn avasthitn`,meaning:"...and also his fathers-in-law and well-wishers. When the son of Kunti, Arjuna, saw all these different grades of friends and relatives, he became overwhelmed with compassion and spoke thus."},{id:27,verse_number:27,chapter_number:1,text:`   |
  |
     ||-||`,transliteration:`kipay parayviho vihdann idam abravt
arjuna uvcha
dihvema sva-jana kiha yuyutsu samupasthitam`,meaning:"Arjuna said: My dear Krishna, seeing my friends and relatives present before me in such a fighting spirit, I feel the limbs of my body quivering and my mouth drying up."},{id:28,verse_number:28,chapter_number:1,text:`      |
     ||-||`,transliteration:`sdanti mama gtri mukha cha parihuhyati
vepathuh cha harre me roma-harhah cha jyate`,meaning:"My whole body is trembling, my hair is standing on end, my bow Gandiva is slipping from my hand, and my skin is burning."},{id:29,verse_number:29,chapter_number:1,text:`    |
       ||-||`,transliteration:`gva srasate hastt tvak chaiva paridahyate
na cha haknomy avasthtu bhramatva cha me mana`,meaning:"I am now unable to stand here any longer. I am forgetting myself, and my mind is reeling. I see only causes of misfortune, O Krishna, killer of the Kesi demon."},{id:30,verse_number:30,chapter_number:1,text:`     |
     ||-||`,transliteration:`nimittni cha pahymi vipartni kehava
na cha hreyo nupahymi hatv sva-janam have`,meaning:"I do not see how any good can come from killing my own kinsmen in this battle, nor can I, my dear Krishna, desire any subsequent victory, kingdom, or happiness."},{id:31,verse_number:31,chapter_number:1,text:`         |
       ||-||`,transliteration:`na kkhe vijaya kiha na cha rjya sukhni cha
ki no rjyena govinda ki bhogair jvitena v`,meaning:"O Govinda, of what avail to us are a kingdom, happiness or even life itself when all those for whom we may desire them are now arrayed on this battlefield?"},{id:32,verse_number:32,chapter_number:1,text:`       |
      ||-||`,transliteration:`yehm arthe kkhita no rjya bhog sukhni cha
ta ime vasthit yuddhe prs tyaktv dhanni cha`,meaning:"O Madhusudana, when teachers, fathers, sons, grandfathers, maternal uncles, fathers-in-law, grandsons, brothers-in-law and other relatives are ready to give up their lives and properties and are standing before me, why should I wish to kill them, even though they might otherwise kill me?"},{id:33,verse_number:33,chapter_number:1,text:`     |
     ||-||`,transliteration:`chry pitara putrs tathaiva cha pitmah
mtul hvahur pautr hyl sambandhinas tath`,meaning:"Teachers, fathers, sons, grandfathers, maternal uncles, fathers-in-law, grandsons, brothers-in-law and other relatives are ready to give up their lives and properties and are standing before me."},{id:34,verse_number:34,chapter_number:1,text:`    |
      ||-||`,transliteration:`etn na hantum ichchhmi ghnato pi madhusdana
api trailokya-rjyasya heto ki nu mah-kite`,meaning:"O maintainer of all living entities, I am not prepared to fight with them even in exchange for the three worlds, let alone this earth. What pleasure will we derive from killing the sons of Dhritarashtra?"},{id:35,verse_number:35,chapter_number:1,text:`     |
 ||-||`,transliteration:`nihatya dhrtarhrn na k prti syj janrdana
ppam evhrayed asmn hatvaitn tatyina`,meaning:"Sin will overcome us if we slay such aggressors. Therefore it is not proper for us to kill the sons of Dhritarashtra and our friends. What should we gain, O Krishna, husband of the goddess of fortune, and how could we be happy by killing our own kinsmen?"},{id:36,verse_number:36,chapter_number:1,text:`    |
       ||-||`,transliteration:`tasmn nrh vaya hantu dhrtarhrn sa-bndhavn
sva-jana hi katha hatv sukhina syma mdhava`,meaning:"Therefore, it is not proper for us to kill the sons of Dhritarashtra and our friends. What should we gain, O Krishna, husband of the goddess of fortune, and how could we be happy by killing our own kinsmen?"},{id:37,verse_number:37,chapter_number:1,text:`    |
     ||-||`,transliteration:`yady apy ete na pahyanti lobhopahata-chetasa
kula-khaya-kita doha mitra-drohe cha ptakam`,meaning:"O Janardana, although these men, their hearts overtaken by greed, see no fault in killing ones family or quarreling with friends, why should we, who can see the crime in destroying a family, engage in these acts of sin?"},{id:38,verse_number:38,chapter_number:1,text:`    |
   ||-||`,transliteration:`katha na jeyam asmbhi ppd asmn nivartitum
kula-khaya-kita doha prapahyadbhir janrdana`,meaning:"Why should we, who can see the crime in destroying a family, engage in these acts of sin?"},{id:39,verse_number:39,chapter_number:1,text:`    |
    ||-||`,transliteration:`kula-khaye praahyanti kula-dharm santan
dharme nahe kula kitsnam adharmo bhibhavaty uta`,meaning:"With the destruction of dynasty, the eternal family tradition is vanquished, and thus the rest of the family becomes involved in irreligion."},{id:40,verse_number:40,chapter_number:1,text:`   |
     ||-||`,transliteration:`adharmbhibhavt kiha praduhyanti kula-striya
strhu duhsu vrheya jyate vara-sakara`,meaning:"When irreligion is prominent in the family, O Krishna, the women of the family become polluted, and from the degradation of womanhood, O descendant of Vrishni, comes unwanted progeny."},{id:41,verse_number:41,chapter_number:1,text:`     |
    ||-||`,transliteration:`sakaro narakyaiva kula-ghnn kulasya cha
patanti pitaro hy eh lupta-piodaka-kriy`,meaning:"An increase of unwanted population certainly causes hellish life both for the family and for those who destroy the family tradition. The ancestors of such corrupt families fall down, because the performances for offering them food and water are entirely stopped."},{id:42,verse_number:42,chapter_number:1,text:`   |
    ||-||`,transliteration:`dohair etai kula-ghnn vara-sakara-krakai
utsdyante jti-dharm kula-dharmh cha hhvat`,meaning:"By the evil deeds of those who destroy the family tradition and thus give rise to unwanted children, all kinds of community projects and family welfare activities are devastated."},{id:43,verse_number:43,chapter_number:1,text:`   |
    ||-||`,transliteration:`utsanna-kula-dharm manuhy janrdana
narake niyata vso bhavatty anuhuhruma`,meaning:"O Krishna, maintainer of the people, I have heard by disciplic succession that those who destroy family traditions dwell always in hell."},{id:44,verse_number:44,chapter_number:1,text:`      |
   ||-||`,transliteration:`aho bata mahat ppa kartu vyavasit vayam
yad rjya-sukha-lobhena hantu sva-janam udyat`,meaning:"Alas, how strange it is that we are preparing to commit greatly sinful acts. Driven by the desire to enjoy royal happiness, we are intent on killing our own kinsmen."},{id:45,verse_number:45,chapter_number:1,text:`   |
     ||-||`,transliteration:`yadi mm apratkram ahastra hastra-paya
dhrtarhr rae hanyus tan me khematara bhavet`,meaning:"Better for me if the sons of Dhritarashtra, weapons in hand, were to kill me unarmed and unresisting on the battlefield."},{id:46,verse_number:46,chapter_number:1,text:`  |
    |
    ||-||`,transliteration:`sajaya uvcha
evam uktv rjuna sakhye rathopastha upvihat
visijya sa-hara chpa hoka-savigna-mnasa`,meaning:"Sanjaya said: Arjuna, having thus spoken on the battlefield, cast aside his bow and arrows and sat down on the chariot, his mind overwhelmed with grief."},{id:47,verse_number:47,chapter_number:1,text:`  
  
  `,transliteration:`o tat sad iti hrmad bhagavad gtspanihatsu
brahma vidyy yoga hstre hr kihrjuna savde
arjuna vihdayogo nma prathamo dhyya`,meaning:"Thus in the Upanishads of the glorious Bhagavad Gita, the science of the Eternal, the scripture of Yoga, the dialogue between Sri Krishna and Arjuna, ends the first discourse entitled: The Yoga of Arjuna's Dejection."}]},{id:2,name:"",name_meaning:"The Yoga of Knowledge",chapter_number:2,verses_count:72,summary:"Lord Krishna imparts wisdom to the grieving Arjuna, explaining the eternal nature of the soul, the concept of duty (dharma), and the path of selfless action (Karma Yoga).",verses:[{id:48,verse_number:1,chapter_number:2,text:`  |
   |
   ||-||`,transliteration:`sajaya uvcha
ta tath kipayviham ahru-prkulekhaam
vihdantam ida vkyam uvcha madhusdana`,meaning:"Sanjaya said: Seeing Arjuna full of compassion, his mind depressed, his eyes full of tears, Madhusudana, Krishna, spoke the following words."},{id:49,verse_number:2,chapter_number:2,text:` |
    |
 ||-||`,transliteration:`hr bhagavn uvcha
kutas tv kahmalam ida vihame samupasthitam
anrya-juham asvargyam akrti-karam arjuna`,meaning:"The Supreme Personality of Godhead said: My dear Arjuna, how have these impurities come upon you? They are not at all befitting a man who knows the value of life. They lead not to higher planets but to infamy."},{id:50,verse_number:3,chapter_number:2,text:`      |
    ||-||`,transliteration:`klaibya m sma gama prtha naitat tvayy upapadyate
khudra hidaya-daurbalya tyaktvottihha parantapa`,meaning:"O son of Pritha, do not yield to this degrading impotence. It does not become you. Give up such petty weakness of heart and arise, O chastiser of the enemy."},{id:51,verse_number:4,chapter_number:2,text:`  |
      |
   ||-||`,transliteration:`arjuna uvcha
katha bhhmam aha sakhye droa cha madhusdana
ihubhi pratiyotsymi pjrhv arisdana`,meaning:"Arjuna said: O killer of enemies, O killer of Madhu, how can I counterattack with arrows in battle men like Bhishma and Drona, who are worthy of my worship?"},{id:52,verse_number:5,chapter_number:2,text:`  
    |
 
  ||-||`,transliteration:`gurn ahatv hi mahnubhvn
hreyo bhoktu bhaikhyam apha loke
hatvrtha-kms tu gurn ihaiva
bhujya bhogn rudhira-pradigdhn`,meaning:"It would be better to live in this world by begging than to live at the cost of the lives of great souls who are my teachers. Even though desiring worldly gain, they are superiors. If they are killed, everything we enjoy will be tainted with blood."},{id:53,verse_number:6,chapter_number:2,text:`   
      |
   
   ||-||`,transliteration:`na chaitad vidma kataran no garyo
yad v jayema yadi v no jayeyu
yn eva hatv na jijvihmas
te vasthit pramukhe dhrtarhr`,meaning:"Nor do we know which is betterconquering them or being conquered by them. If we killed the sons of Dhritarashtra, we should not care to live. Yet they are now standing before us on the battlefield."},{id:54,verse_number:7,chapter_number:2,text:`
   |
   
     ||-||`,transliteration:`krpaya-dohopahata-svabhva
pichchhmi tv dharma-sammha-chet
yach chhreya syn nihchita brhi tan me
hihyas te ha hdhi m tv prapannam`,meaning:"Now I am confused about my duty and have lost all composure because of miserly weakness. In this condition I am asking You to tell me for certain what is best for me. Now I am Your disciple, and a soul surrendered unto You. Please instruct me."},{id:55,verse_number:8,chapter_number:2,text:`   
 |
 
   ||-||`,transliteration:`na hi prapahymi mampanudyd
yach chhokam uchchhohaam indriym
avpya bhmv asapatnam iddha
rjya surm api chdhipatyam`,meaning:"I can find no means to drive away this grief which is drying up my senses. I will not be able to dispel it even if I win a prosperous, unrivaled kingdom on earth with sovereignty like the demigods in heaven."},{id:56,verse_number:9,chapter_number:2,text:`  |
    |
       ||-||`,transliteration:`sajaya uvcha
evam uktv hihkeha gukeha parantapa
na yotsya iti govindam uktv th babhva ha`,meaning:"Sanjaya said: Having spoken thus, Arjuna, chastiser of enemies, told Krishna, 'Govinda, I shall not fight,' and fell silent."},{id:57,verse_number:10,chapter_number:2,text:`    |
   ||-||`,transliteration:`tam uvcha hihkeha prahasann iva bhrata
senayor ubhayor madhye vihdantam ida vacha`,meaning:"O descendant of Bharata, at that time Krishna, smiling, in the midst of both the armies, spoke the following words to the grief-stricken Arjuna."},{id:58,verse_number:11,chapter_number:2,text:` |
   |
   ||-||`,transliteration:`hr bhagavn uvcha
ahochyn anvahochas tva praj-vdh cha bhhase
gatsn agatsh cha nnuhochanti pait`,meaning:"The Supreme Personality of Godhead said: While speaking learned words, you are mourning for what is not worthy of grief. Those who are wise lament neither for the living nor for the dead."},{id:59,verse_number:12,chapter_number:2,text:`        |
       ||-||`,transliteration:`na tv evha jtu nsa na tva neme jandhip
na chaiva na bhavihyma sarve vayam ata param`,meaning:"Never was there a time when I did not exist, nor you, nor all these kings; nor in the future shall any of us cease to be."},{id:60,verse_number:13,chapter_number:2,text:`     |
    ||-||`,transliteration:`dehino smin yath dehe kaumra yauvana jar
tath dehntara-prptir dhras tatra na muhyati`,meaning:"As the embodied soul continuously passes, in this body, from boyhood to youth to old age, the soul similarly passes into another body at death. A sober person is not bewildered by such a change."},{id:61,verse_number:14,chapter_number:2,text:`   |
  ||-||`,transliteration:`mtr-sparhs tu kaunteya htoha-sukha-dukha-d
gampyino nitys ts titikhasva bhrata`,meaning:"O son of Kunti, the nonpermanent appearance of happiness and distress, and their disappearance in due course, are like the appearance and disappearance of winter and summer seasons. They arise from sense perception, O scion of Bharata, and one must learn to tolerate them without being disturbed."},{id:62,verse_number:15,chapter_number:2,text:`      |
    ||-||`,transliteration:`ya hi na vyathayanty ete puruha puruharhabha
sama-dukha-sukha dhra so mitatvya kalpate`,meaning:"O best among men [Arjuna], the person who is not disturbed by happiness and distress and is steady in both is certainly eligible for liberation."},{id:63,verse_number:16,chapter_number:2,text:`      |
  ||-||`,transliteration:`nsato vidyate bhvo nbhvo vidyate sata
ubhayor api diho ntas tv anayos tattva-darhibhi`,meaning:"Those who are seers of the truth have concluded that of the nonexistent [the material body] there is no endurance and of the eternal [the soul] there is no change. This they have concluded by studying the nature of both."},{id:64,verse_number:17,chapter_number:2,text:`      |
   ||-||`,transliteration:`avinhi tu tad viddhi yena sarvam ida tatam
vinham avyayasysya na kahchit kartum arhati`,meaning:"That which pervades the entire body you should know to be indestructible. No one is able to destroy that imperishable soul."},{id:65,verse_number:18,chapter_number:2,text:`     |
   ||-||`,transliteration:`antavanta ime deh nityasyokt harria
anhino prameyasya tasmd yudhyasva bhrata`,meaning:"The material body of the indestructible, immeasurable and eternal living entity is sure to come to an end; therefore, fight, O descendant of Bharata."},{id:66,verse_number:19,chapter_number:2,text:`       |
        ||-||`,transliteration:`ya ena vetti hantra yah chaina manyate hatam
ubhau tau na vijnto nya hanti na hanyate`,meaning:"Neither he who thinks the living entity the slayer nor he who thinks it slain is in knowledge, for the self slays not nor is slain."},{id:67,verse_number:20,chapter_number:2,text:`    
      |
   
    ||-||`,transliteration:`na jyate mriyate v kadchin
nya bhtv bhavit v na bhya
ajo nitya hhvato ya puro
na hanyate hanyamne harre`,meaning:"For the soul there is neither birth nor death at any time. He has not come into being, does not come into being, and will not come into being. He is unborn, eternal, ever-existing and primeval. He is not slain when the body is slain."},{id:68,verse_number:21,chapter_number:2,text:`    |
        ||-||`,transliteration:`vedvinhina nitya ya enam ajam avyayam
katha sa puruha prtha ka ghtayati hanti kam`,meaning:"O Partha, how can a person who knows that the soul is indestructible, eternal, unborn and immutable kill anyone or cause anyone to kill?"},{id:69,verse_number:22,chapter_number:2,text:`   
   |
   
    ||-||`,transliteration:`vssi jrni yath vihya
navni gihti naro pari
tath harri vihya jrny
anyni sayti navni deh`,meaning:"As a person puts on new garments, giving up old ones, the soul similarly accepts new material bodies, giving up the old and useless ones."},{id:70,verse_number:23,chapter_number:2,text:`      |
      ||-||`,transliteration:`naina chhindanti hastri naina dahati pvaka
na chaina kledayanty po na hohayati mruta`,meaning:"The soul can never be cut to pieces by any weapon, nor burned by fire, nor moistened by water, nor withered by the wind."},{id:71,verse_number:24,chapter_number:2,text:`   |
    ||-||`,transliteration:`achchhedyo yam adhyo yam akledyo hohya eva cha
nitya sarva-gata sthur achalo ya santana`,meaning:"This individual soul is unbreakable and insoluble, and can be neither burned nor dried. He is everlasting, present everywhere, unchangeable, immovable and eternally the same."},{id:72,verse_number:25,chapter_number:2,text:` |
   ||-||`,transliteration:`avyakto yam achintyo yam avikryo yam uchyate
tasmd eva viditvaina nnuhochitum arhasi`,meaning:"It is said that the soul is invisible, inconceivable and immutable. Knowing this, you should not grieve for the body."},{id:73,verse_number:26,chapter_number:2,text:`       |
     ||-||`,transliteration:`atha chaina nitya-jta nitya v manyase mitam
tathpi tva mah-bho naina hochitum arhasi`,meaning:"If, however, you think that the soul [or the symptoms of life] is always born and dies forever, you still have no reason to lament, O mighty-armed."},{id:74,verse_number:27,chapter_number:2,text:`       |
   h ||-||`,transliteration:`jtasya hi dhruvo mityur dhruva janma mitasya cha
tasmd aparihrye rthe na tva hochitum arhasi`,meaning:"One who has taken his birth is sure to die, and after death one is sure to take birth again. Therefore, in the unavoidable discharge of your duty, you should not lament."},{id:75,verse_number:28,chapter_number:2,text:`    |
    ||-||`,transliteration:`avyaktdni bhtni vyakta-madhyni bhrata
avyakta-nidhanny eva tatra k paridevan`,meaning:"All created beings are unmanifest in their beginning, manifest in their interim state, and unmanifest again when annihilated. So what need is there for lamentation?"},{id:76,verse_number:29,chapter_number:2,text:` 
   |
 
     ||-||`,transliteration:`hcharya-vat pahyati kahchid enam
hcharya-vad vadati tathaiva chnya
hcharya-vach chainam anya hioti
hrutvpy ena veda na chaiva kahchit`,meaning:"Some look on the soul as amazing, some describe him as amazing, and some hear of him as amazing, while others, even after hearing about him, cannot understand him at all."},{id:77,verse_number:30,chapter_number:2,text:`     |
     ||-||`,transliteration:`deh nityam avadhyo ya dehe sarvasya bhrata
tasmt sarvi bhtni na tva hochitum arhasi`,meaning:"O descendant of Bharata, he who dwells in the body can never be slain. Therefore you need not grieve for any living being."},{id:78,verse_number:31,chapter_number:2,text:`    |
    ||-||`,transliteration:`sva-dharmam api chvekhya na vikampitum arhasi
dharmyd dhi yuddhch chhreyo nyat khatriyasya na vidyate`,meaning:"Considering your specific duty as a kshatriya, you should know that there is no better engagement for you than fighting on religious principles; and so there is no need for hesitation."},{id:79,verse_number:32,chapter_number:2,text:`   |
     ||-||`,transliteration:`yadichchhay chopapanna svarga-dvram apvitam
sukhina khatriy prtha labhante yuddham diham`,meaning:"O Partha, happy are the kshatriyas to whom such fighting opportunities come unsought, opening for them the doors of the heavenly planets."},{id:80,verse_number:33,chapter_number:2,text:`      |
      ||-||`,transliteration:`atha chet tvam ima dharmya sagrma na karihyasi
tata sva-dharma krti cha hitv ppam avpsyasi`,meaning:"If, however, you do not perform your religious duty of fighting, then you will certainly incur sins for neglecting your duties and thus lose your reputation as a fighter."},{id:81,verse_number:34,chapter_number:2,text:`     |
  ||-||`,transliteration:`akrti chpi bhtni kathayihyanti te vyaym
sambhvitasya chkrtir marad atirichyate`,meaning:"People will always speak of your infamy, and for a respectable person, dishonor is worse than death."},{id:82,verse_number:35,chapter_number:2,text:`    |
       ||-||`,transliteration:`bhayd rad uparata masyante tv mah-rath
yeh cha tva bahu-mato bhtv ysyasi lghavam`,meaning:"The great generals who have held your name and fame in high esteem will think that you have left the battlefield out of fear only, and thus they will consider you insignificant."},{id:83,verse_number:36,chapter_number:2,text:`   |
      ||-||`,transliteration:`avchya-vdh cha bahn vadihyanti tavhit
nindantas tava smarthya tato dukhatara nu kim`,meaning:"Your enemies will describe you in many unkind words and scorn your ability. What could be more painful for you?"},{id:84,verse_number:37,chapter_number:2,text:`        |
    ||-||`,transliteration:`hato v prpsyasi svarga jitv v bhokhyase mahm
tasmd uttihha kaunteya yuddhya kita-nihchaya`,meaning:"O son of Kunti, either you will be killed on the battlefield and attain the heavenly planets, or you will conquer and enjoy the earthly kingdom. Therefore, get up with determination and fight."},{id:85,verse_number:38,chapter_number:2,text:`     |
     ||-||`,transliteration:`sukha-dukhe same kitv lbhlbhau jayjayau
tato yuddhya yujyasva naiva ppam avpsyasi`,meaning:"Do thou fight for the sake of fighting, without considering happiness or distress, loss or gain, victory or defeatand by so doing you shall never incur sin."},{id:86,verse_number:39,chapter_number:2,text:`      |
      ||-||`,transliteration:`eh te bhihit skhye buddhir yoge tv im hiu
buddhy yukto yay prtha karma-bandha prahsyasi`,meaning:"Thus far I have described this knowledge to you through analytical study. Now listen as I explain it in terms of working without fruitive results. O son of Pritha, when you act in such knowledge you can free yourself from the bondage of works."},{id:87,verse_number:40,chapter_number:2,text:`    |
     ||-||`,transliteration:`nehbhikrama-nho sti pratyavyo na vidyate
sv-alpam apy asya dharmasya tryate mahato bhayt`,meaning:"In this endeavor there is no loss or diminution, and a little advancement on this path can protect one from the most dangerous type of fear."},{id:88,verse_number:41,chapter_number:2,text:`   |
   ||-||`,transliteration:`vyavasytmik buddhir ekeha kuru-nandana
bahu-hkh hy ananth cha buddhayo vyavasyinm`,meaning:"Those who are on this path are resolute in purpose, and their aim is one. O beloved child of the Kurus, the intelligence of those who are irresolute is many-branched."},{id:89,verse_number:42,chapter_number:2,text:`    |
    ||-||`,transliteration:`ym im puhpit vcha pravadanty avipahchita
veda-vda-rat prtha nnyad astti vdina`,meaning:"Men of small knowledge are very much attached to the flowery words of the Vedas, which recommend various fruitive activities for elevation to heavenly planets, resultant good birth, power, and so forth."},{id:90,verse_number:43,chapter_number:2,text:`   |
   ||-||`,transliteration:`kmtmna svarga-par janma-karma-phala-pradm
kriy-viheha-bahul bhogaihvarya-gati prati`,meaning:"Being desirous of sense gratification and opulent life, they say that there is nothing more than this."},{id:91,verse_number:44,chapter_number:2,text:`  |
     ||-||`,transliteration:`bhogaihvarya-prasaktn taypahita-chetasm
vyavasytmik buddhi samdhau na vidhyate`,meaning:"In the minds of those who are too attached to sense enjoyment and material opulence, and who are bewildered by such things, the resolute determination for devotional service to the Supreme Lord does not take place."},{id:92,verse_number:45,chapter_number:2,text:`    |
    ||-||`,transliteration:`trai-guya-vihay ved nistrai-guyo bhavrjuna
nirdvandvo nitya-sattva-stho niryoga-khema tmavn`,meaning:"The Vedas deal mainly with the subject of the three modes of material nature. O Arjuna, become transcendental to these three modes. Be free from all dualities and from all anxieties for gain and safety, and be established in the self."},{id:93,verse_number:46,chapter_number:2,text:`    |
    ||-||`,transliteration:`yvn artha udapne sarvata samplutodake
tvn sarvehu vedehu brhmaasya vijnata`,meaning:"All purposes served by a small well can at once be served by a great reservoir of water. Similarly, all the purposes of the Vedas can be served to one who knows the purpose behind them."},{id:94,verse_number:47,chapter_number:2,text:`    |
    ||-||`,transliteration:`karmay-evdhikras te m phalehu kadchana
m karma-phala-hetur bhr m te sago stvakarmai`,meaning:"You have a right to perform your prescribed duty, but you are not entitled to the fruits of action. Never consider yourself the cause of the results of your activities, and never be attached to not doing your duty."},{id:95,verse_number:48,chapter_number:2,text:`      |
      ||-||`,transliteration:`yoga-stha kuru karmi saga tyaktv dhanajaya
siddhy-asiddhyo samo bhtv samatva yoga uchyate`,meaning:"Perform your duty equipoised, O Arjuna, abandoning all attachment to success or failure. Such equanimity is called yoga."},{id:96,verse_number:49,chapter_number:2,text:`    |
    ||-||`,transliteration:`drea hy avara karma buddhi-yogd dhanajaya
buddhau haraam anvichchha kipa phala-hetava`,meaning:"O Dhananjaya, keep all abominable activities far distant by devotional service, and in that consciousness surrender unto the Lord. Those who want to enjoy the fruits of their work are misers."},{id:97,verse_number:50,chapter_number:2,text:`    |
     ||-||`,transliteration:`buddhi-yukto jahtha ubhe sukita-duhkite
tasmd yogya yujyasva yoga karmasu kauhalam`,meaning:"A man engaged in devotional service rids himself of both good and bad actions even in this life. Therefore strive for yoga, which is the art of all work."},{id:98,verse_number:51,chapter_number:2,text:`      |
   ||-||`,transliteration:`karma-ja buddhi-yukt hi phala tyaktv manhia
janma-bandha-vinirmukt pada gachchhanty anmayam`,meaning:"By thus engaging in devotional service to the Lord, great sages or devotees free themselves from the results of work in the material world. In this way they become free from the cycle of birth and death and attain the state beyond all miseries [by going back to Godhead]."},{id:99,verse_number:52,chapter_number:2,text:`    |
      ||-||`,transliteration:`yad te moha-kalila buddhir vyatitarihyati
tad gantsi nirveda hrotavyasya hrutasya cha`,meaning:"When your intelligence has passed out of the dense forest of delusion, you shall become indifferent to all that has been heard and all that is to be heard."},{id:100,verse_number:53,chapter_number:2,text:`     |
   ||-||`,transliteration:`hruti-vipratipann te yad sthsyati nihchal
samdhv achal buddhis tad yogam avpsyasi`,meaning:"When your mind is no longer disturbed by the flowery language of the Vedas, and when it remains fixed in the trance of self-realization, then you will have attained the divine consciousness."},{id:101,verse_number:54,chapter_number:2,text:`  |
     |
      ||-||`,transliteration:`arjuna uvcha
sthita-prajasya k bhh samdhi-sthasya kehava
sthita-dh ki prabhheta kim sta vrajeta kim`,meaning:"Arjuna said: O Krishna, what are the symptoms of one whose consciousness is thus merged in transcendence? How does he speak, and what is his language? How does he sit, and how does he walk?"},{id:102,verse_number:55,chapter_number:2,text:` |
    |
   ||-||`,transliteration:`hr bhagavn uvcha
prajahti yad kmn sarvn prtha mano-gatn
tmany evtman tuha sthita-prajas tadochyate`,meaning:"The Supreme Personality of Godhead said: O Partha, when a man gives up all varieties of desire for sense gratification, which arise from mental concoction, and when his mind, thus purified, finds satisfaction in the self alone, then he is said to be in pure transcendental consciousness."},{id:103,verse_number:56,chapter_number:2,text:`   |
  ||-||`,transliteration:`dukhehv anudvigna-man sukhehu vigata-spiha
vta-rga-bhaya-krodha sthita-dhr munir uchyate`,meaning:"One who is not disturbed in mind even amidst the threefold miseries or elated when there is happiness, and who is free from attachment, fear and anger, is called a sage of steady mind."},{id:104,verse_number:57,chapter_number:2,text:`   |
      ||-||`,transliteration:`ya sarvatrn abhisnehas tat tat prpya hubhhubham
nbhinandati na dvehi tasya praj pratihhit`,meaning:"In the material world, one who is unaffected by whatever good or evil he may obtain, neither praising it nor despising it, is firmly fixed in perfect knowledge."},{id:105,verse_number:58,chapter_number:2,text:`     |
   ||-||`,transliteration:`yad saharate chya krmo gnva sarvaha
indriyndriyrthebyas tasya praj pratihhit`,meaning:"One who is able to withdraw his senses from sense objects, as the tortoise draws its limbs within the shell, is firmly fixed in perfect consciousness."},{id:106,verse_number:59,chapter_number:2,text:`    |
     ||-||`,transliteration:`vihay vinivartante nirhrasya dehina
rasa-varja raso py asya para dihv nivartate`,meaning:"Though the embodied soul may be restricted from sense enjoyment, the taste for sense objects remains. But, ceasing such engagements by experiencing a higher taste, he is fixed in consciousness."},{id:107,verse_number:60,chapter_number:2,text:`     |
     ||-||`,transliteration:`yatato hy api kaunteya puruhasya vipahchita
indriyi pramthni haranti prasabha mana`,meaning:"The senses are so strong and impetuous, O Arjuna, that they forcibly carry away the mind even of a man of discrimination who is endeavoring to control them."},{id:108,verse_number:61,chapter_number:2,text:`      |
      ||-||`,transliteration:`tni sarvi sayamya yukta sta mat-para
vahe hi yasyendriyi tasya praj pratihhit`,meaning:"One who restrains his senses, keeping them under full control, and fixes his consciousness upon Me, is known as a man of steady intelligence."},{id:109,verse_number:62,chapter_number:2,text:`   |
   ||-||`,transliteration:`dhyyato vihayn pusa sagas tehpajyate
sagt sajyate kma kmt krodho bhijyate`,meaning:"While contemplating the objects of the senses, a person develops attachment for them, and from such attachment lust develops, and from lust anger arises."},{id:110,verse_number:63,chapter_number:2,text:`   |
  ||-||`,transliteration:`krodhd bhavati sammoha sammoht smiti-vibhrama
smiti-bhrahd buddhi-nho buddhi-nht praahyati`,meaning:"From anger, complete delusion arises, and from delusion bewilderment of memory. When memory is bewildered, intelligence is lost, and when intelligence is lost one falls down again into the material pool."},{id:111,verse_number:64,chapter_number:2,text:`  |
  ||-||`,transliteration:`rga-dveha-vimuktais tu vihayn indriyaih charan
tma-vahyair vidheytm prasdam adhigachchhati`,meaning:"But a person free from all attachment and aversion and able to control his senses through regulative principles of freedom can obtain the complete mercy of the Lord."},{id:112,verse_number:65,chapter_number:2,text:`   |
    ||-||`,transliteration:`prasde sarva-dukhn hnir asyopajyate
prasanna-chetaso hy hu buddhi paryavatihhate`,meaning:"For one thus satisfied [in Krishna consciousness], the threefold miseries of material existence exist no longer; in such satisfied consciousness, ones intelligence is soon well established."},{id:113,verse_number:66,chapter_number:2,text:`     |
     ||-||`,transliteration:`nsti buddhir ayuktasya na chyuktasya bhvan
na chbhvayata hntir ahntasya kuta sukham`,meaning:"One who is not connected with the Supreme [in Krishna consciousness] can have neither transcendental intelligence nor a steady mind, without which there is no possibility of peace. And how can there be any happiness without peace?"},{id:114,verse_number:67,chapter_number:2,text:`    |
    ||-||`,transliteration:`indriy hi charat yan mano nuvidhyate
tad asya harati praj vyur nvam ivmbhasi`,meaning:"As a strong wind sweeps away a boat on the water, even one of the roaming senses on which the mind focuses can carry away a mans intelligence."},{id:115,verse_number:68,chapter_number:2,text:`    |
   ||-||`,transliteration:`tasmd yasya mah-bho nigihtni sarvaha
indriyndriyrthebyas tasya praj pratihhit`,meaning:"Therefore, O mighty-armed Arjuna, one whose senses are restrained from their objects is certainly of steady intelligence."},{id:116,verse_number:69,chapter_number:2,text:`      |
       ||-||`,transliteration:`y nih sarva-bhtn tasy jgarti sayam
yasy jgrati bhtni s nih pahyato mune`,meaning:"What is night for all beings is the time of awakening for the self-controlled; and the time of awakening for all beings is night for the introspective sage."},{id:117,verse_number:70,chapter_number:2,text:`
   |
   
    ||-||`,transliteration:`pryamam achala-pratihha
samudram pa pravihanti yadvat
tadvat km ya pravihanti sarve
sa hntim pnoti na kma-km`,meaning:"A person who is not disturbed by the incessant flow of desiresthat enter like rivers into the ocean, which is ever being filled but is always stillcan alone achieve peace, and not the man who strives to satisfy such desires."},{id:118,verse_number:71,chapter_number:2,text:`    |
    ||-||`,transliteration:`vihya kmn ya sarvn pumnh charati nispiha
nirmamo nirahakra sa hntim adhigachchhati`,meaning:"A person who has given up all desires for sense gratification, who lives free from desires, who has given up all sense of proprietorship and is devoid of false egohe alone can attain real peace."},{id:119,verse_number:72,chapter_number:2,text:`       |
  ||-||`,transliteration:`eh brhm sthiti prtha nain prpya vimuhyati
sthitvsym anta-kle pi brahma-nirvam ichchhati`,meaning:"That is the way of the spiritual and godly life, after attaining which a man is not bewildered. If one is thus situated even at the hour of death, one can enter into the kingdom of God."}]},{id:3,name:"",name_meaning:"The Yoga of Action",chapter_number:3,verses_count:43,summary:"Krishna elaborates on Karma Yoga, the path of selfless action. He emphasizes that performing one's duties without attachment to the results is the key to spiritual progress and liberation.",verses:[{id:120,verse_number:1,chapter_number:3,text:`  |
    |
      ||-||`,transliteration:`arjuna uvcha
jyyas chet karmaas te mat buddhir janrdana
tat ki karmai ghore m niyojayasi kehava`,meaning:"Arjuna said: O Janardana, O Kesava, why do You want to engage me in this ghastly warfare, if You think that intelligence is better than fruitive work?"},{id:121,verse_number:2,chapter_number:3,text:`     |
     ||-||`,transliteration:`vymihreeva vkyena buddhi mohayasva me
tad eka vada nihchitya yena hreyo ham pnuym`,meaning:"My intelligence is bewildered by Your equivocal instructions. Therefore, please tell me decisively which will be most beneficial for me."},{id:122,verse_number:3,chapter_number:3,text:` |
     |
    ||-||`,transliteration:`hr bhagavn uvcha
loke smin dvi-vidh nihh pur prokt maynagha
jna-yogena skhyn karma-yogena yoginm`,meaning:"The Supreme Personality of Godhead said: O sinless Arjuna, I have already explained that there are two classes of men who try to realize the self. Some are inclined to understand it by empirical, philosophical speculation, and others by devotional service."},{id:123,verse_number:4,chapter_number:3,text:`   |
     ||-||`,transliteration:`na karmam anrambhn naihkarmya puruho hnute
na cha sannyasand eva siddhi samadhigachchhati`,meaning:"Not by merely abstaining from work can one achieve freedom from reaction, nor by renunciation alone can one attain perfection."},{id:124,verse_number:5,chapter_number:3,text:`     |
     ||-||`,transliteration:`na hi kahchit khaam api jtu tihhaty akarma-kit
kryate hy avaha karma sarva prakiti-jair guai`,meaning:"Everyone is forced to act helplessly according to the qualities he has acquired from the modes of material nature; therefore no one can refrain from doing something, not even for a moment."},{id:125,verse_number:6,chapter_number:3,text:`      |
    ||-||`,transliteration:`karmendriyi sayamya ya ste manas smaran
indriyrthn vimhtm mithychra sa uchyate`,meaning:"One who restrains the senses of action but whose mind dwells on sense objects certainly deludes himself and is called a pretender."},{id:126,verse_number:7,chapter_number:3,text:`   |
    ||-||`,transliteration:`yas tv indriyi manas niyamyrabhate rjuna
karmendriyai karma-yogam asakta sa vihihyate`,meaning:"On the other hand, if a sincere person tries to control the active senses by the mind and begins karma-yoga [in Krishna consciousness] without attachment, he is by far superior."},{id:127,verse_number:8,chapter_number:3,text:`       |
     ||-||`,transliteration:`niyata kuru karma tva karma jyyo hy akarmaa
harra-ytrpi cha te na prasiddhyed akarmaa`,meaning:"Perform your prescribed duty, for doing so is better than not working. One cannot even maintain ones physical body without work."},{id:128,verse_number:9,chapter_number:3,text:`   |
     ||-||`,transliteration:`yajrtht karmao nyatra loko ya karma-bandhana
tad-artha karma kaunteya mukta-saga samchara`,meaning:"Work done as a sacrifice for Vishnu has to be performed; otherwise work causes bondage in this material world. Therefore, O son of Kunti, perform your prescribed duties for His satisfaction, and in that way you will always remain free from bondage."},{id:129,verse_number:10,chapter_number:3,text:`     |
   ||-||`,transliteration:`saha-yaj praj sihv purovcha prajpati
anena prasavihyadhvam eha vo stv iha-kma-dhuk`,meaning:"In the beginning of creation, the Lord of all creatures sent forth generations of men and demigods, along with sacrifices for Vishnu, and blessed them by saying, Be thou happy by this yajna [sacrifice] because its performance will bestow upon you everything desirable for living happily and achieving liberation."},{id:130,verse_number:11,chapter_number:3,text:`     |
    ||-||`,transliteration:`devn bhvayatnena te dev bhvayantu va
paraspara bhvayanta hreya param avpsyatha`,meaning:"The demigods, being pleased by sacrifices, will also please you, and thus, by cooperation between men and demigods, prosperity will reign for all."},{id:131,verse_number:12,chapter_number:3,text:`     |
      ||-||`,transliteration:`ihn bhogn hi vo dev dsyante yaja-bhvit
tair dattn apradyaibhyo yo bhukte stena eva sa`,meaning:"In charge of the various necessities of life, the demigods, being satisfied by the performance of yajna [sacrifice], will supply all necessities to you. But he who enjoys such gifts without offering them to the demigods in return is certainly a thief."},{id:132,verse_number:13,chapter_number:3,text:`    |
      ||-||`,transliteration:`yaja-hihhina santo muchyante sarva-kilbihai
bhujate te tv agha pp ye pachanty tma-krat`,meaning:"The devotees of the Lord are released from all kinds of sins because they eat food which is offered first for sacrifice. Others, who prepare food for personal sense enjoyment, verily eat only sin."},{id:133,verse_number:14,chapter_number:3,text:`   |
    ||-||`,transliteration:`annd bhavanti bhtni parjanyd anna-sambhava
yajd bhavati parjanyo yaja karma-samudbhava`,meaning:"All living bodies subsist on food grains, which are produced from rains. Rains are produced by performance of yajna [sacrifice], and yajna is born of prescribed duties."},{id:134,verse_number:15,chapter_number:3,text:`    |
     ||-||`,transliteration:`karma brahmodbhava viddhi brahmkhara-samudbhavam
tasmt sarva-gata brahma nitya yaje pratihhitam`,meaning:"Regulated activities are prescribed in the Vedas, and the Vedas are directly manifested from the Supreme Personality of Godhead. Consequently the all-pervading Transcendence is eternally situated in acts of sacrifice."},{id:135,verse_number:16,chapter_number:3,text:`     |
     ||-||`,transliteration:`eva pravartita chakra nnuvartayatha ya
aghyur indriyrmo mogha prtha sa jvati`,meaning:"My dear Arjuna, one who does not follow in human life the cycle of sacrifice thus established by the Vedas certainly leads a life full of sin. Living only for the satisfaction of the senses, such a person lives in vain."},{id:136,verse_number:17,chapter_number:3,text:`   |
      ||-||`,transliteration:`yas tv tma-ratir eva syd tma-tiptah cha mnava
tmany eva cha santuhas tasya krya na vidyate`,meaning:"But for one who takes pleasure in the self, whose human life is one of self-realization, and who is satisfied in the self only, fully satiatedfor him there is no duty."},{id:137,verse_number:18,chapter_number:3,text:`     |
    ||-||`,transliteration:`naiva tasya kitenrtho nkiteneha kahchana
na chsya sarva-bhtehu kahchid artha-vyaphraya`,meaning:"A self-realized man has no purpose to fulfill in the discharge of his prescribed duties, nor has he any reason not to perform such work. Nor has he any need to depend on any other living being."},{id:138,verse_number:19,chapter_number:3,text:`     |
    ||-||`,transliteration:`tasmd asakta satata krya karma samchara
asakto hy charan karma param pnoti pruha`,meaning:"Therefore, without being attached to the fruits of activities, one should act as a matter of duty, for by working without attachment one attains the Supreme."},{id:139,verse_number:20,chapter_number:3,text:`    |
  ||-||`,transliteration:`karmaaiva hi sasiddhim sthit janakdaya
loka-sagraham evpi sampahyan kartum arhasi`,meaning:"Kings such as Janaka attained perfection solely by performance of prescribed duties. Therefore, just for the sake of educating the people in general, you should perform your work."},{id:140,verse_number:21,chapter_number:3,text:`   |
    ||-||`,transliteration:`yad yad charati hrehhas tat tad evetaro jana
sa yat prama kurute lokas tad anuvartate`,meaning:"Whatever action a great man performs, common men follow. And whatever standards he sets by exemplary acts, all the world pursues."},{id:141,verse_number:22,chapter_number:3,text:`       |
     ||-||`,transliteration:`na me prthsti kartavya trihu lokehu kichana
nnavptam avptavya varta eva cha karmai`,meaning:"O son of Pritha, there is no work prescribed for Me within all the three planetary systems. Nor am I in want of anything, nor have I a need to obtain anythingand yet I am engaged in prescribed duties."},{id:142,verse_number:23,chapter_number:3,text:`      |
     ||-||`,transliteration:`yadi hy aha na varteya jtu karmay atandrita
mama vartmnuvartante manuhy prtha sarvaha`,meaning:"For if I ever failed to engage in carefully performing prescribed duties, O Partha, certainly all men would follow My path."},{id:143,verse_number:24,chapter_number:3,text:`      |
     ||-||`,transliteration:`utsdeyur ime lok na kury karma ched aham
sakarasya cha kart sym upahanym im praj`,meaning:"If I did not perform prescribed duties, all these worlds would be put to ruination. I would be the cause of creating unwanted population, and I would thereby destroy the peace of all living beings."},{id:144,verse_number:25,chapter_number:3,text:`     |
 ||-||`,transliteration:`sakt karmay avidvso yath kurvanti bhrata
kuryd vidvs tathsaktah chikrhur loka-sagraham`,meaning:"As the ignorant perform their duties with attachment to results, the learned may similarly act, but without attachment, for the sake of leading people on the right path."},{id:145,verse_number:26,chapter_number:3,text:`    |
   ||-||`,transliteration:`na buddhi-bheda janayed ajn karma-saginm
johayet sarva-karmi vidvn yukta samcharan`,meaning:"So as not to disrupt the minds of ignorant men attached to the fruitive results of prescribed duties, a learned person should not induce them to stop work. Rather, by working in the spirit of devotion, he should engage them in all sorts of activities [for the gradual development of Krishna consciousness]."},{id:146,verse_number:27,chapter_number:3,text:`     |
   ||-||`,transliteration:`prakite kriyamni guai karmi sarvaha
ahakra-vimhtm kartham iti manyate`,meaning:"The spirit soul bewildered by the influence of false ego thinks himself the doer of activities that are in actuality carried out by the three modes of material nature."},{id:147,verse_number:28,chapter_number:3,text:`   |
       ||-||`,transliteration:`tattva-vit tu mah-bho gua-karma-vibhgayo
gu guehu vartanta iti matv na sajjate`,meaning:"One who is in knowledge of the Absolute Truth, O mighty-armed, does not engage himself in the senses and sense gratification, knowing well the differences between work in devotion and work for fruitive results."},{id:148,verse_number:29,chapter_number:3,text:`   |
   ||-||`,transliteration:`prakiter gua-sammh sajjante gua-karmasu
tn akitsna-vido mandn kitsna-vin na vichlayet`,meaning:"Bewildered by the modes of material nature, the ignorant fully engage themselves in material activities and become attached. But the wise should not unsettle them, although these duties are inferior due to the performers lack of knowledge."},{id:149,verse_number:30,chapter_number:3,text:`    |
    ||-||`,transliteration:`mayi sarvi karmi sannyasydhytma-chetas
nirhr nirmamo bhtv yudhyasva vigata-jvara`,meaning:"Therefore, O Arjuna, surrendering all your works unto Me, with full knowledge of Me, without desires for profit, with no claims to proprietorship, and free from lethargy, fight."},{id:150,verse_number:31,chapter_number:3,text:`     |
    ||-||`,transliteration:`ye me matam ida nityam anutihhanti mnav
hraddhvanto nasyanto muchyante te pi karmabhi`,meaning:"Those persons who execute their duties according to My injunctions and who follow this teaching faithfully, without envy, become free from the bondage of fruitive actions."},{id:151,verse_number:32,chapter_number:3,text:`     |
  ||-||`,transliteration:`ye tv etad abhyasyanto nnutihhanti me matam
sarva-jna-vimhs tn viddhi nahn achetasa`,meaning:"But those who, out of envy, disregard these teachings and do not follow them are to be considered bereft of all knowledge, befooled, and ruined in their endeavors for perfection."},{id:152,verse_number:33,chapter_number:3,text:`    |
      ||-||`,transliteration:`sadiha chehate svasy prakiter jnavn api
prakiti ynti bhtni nigraha ki karihyati`,meaning:"Even a man of knowledge acts according to his own nature, for everyone follows the nature he has acquired from the three modes. What can repression accomplish?"},{id:153,verse_number:34,chapter_number:3,text:`   |
    ||-||`,transliteration:`indriyasyendriyasyrthe rga-dvehau vyavasthitau
tayor na vaham gachchhet tau hy asya paripanthinau`,meaning:"There are principles to regulate attachment and aversion pertaining to the senses and their objects. One should not come under the control of such attachment and aversion, because they are stumbling blocks on the path of self-realization."},{id:154,verse_number:35,chapter_number:3,text:`   |
     ||-||`,transliteration:`hreyn sva-dharmo vigua para-dharmt sv-anuhhitt
sva-dharme nidhana hreya para-dharmo bhayvaha`,meaning:"It is far better to discharge ones prescribed duties, even though faultily, than anothers duties perfectly. Destruction in the course of performing ones own duty is better than engaging in anothers duties, for to follow anothers path is dangerous."},{id:155,verse_number:36,chapter_number:3,text:`  |
      |
    ||-||`,transliteration:`arjuna uvcha
atha kena prayukto ya ppa charati pruha
anichchhann api vrheya bald iva niyojita`,meaning:"Arjuna said: O descendant of Vrishni, by what is one impelled to sinful acts, even unwillingly, as if engaged by force?"},{id:156,verse_number:37,chapter_number:3,text:` |
     |
    ||-||`,transliteration:`hr bhagavn uvcha
kma eha krodha eha rajo-gua-samudbhava
mahhano mah-ppm viddhy enam iha vairiam`,meaning:"The Supreme Personality of Godhead said: It is lust only, Arjuna, which is born of contact with the material mode of passion and later transformed into wrath, and which is the all-devouring sinful enemy of this world."},{id:157,verse_number:38,chapter_number:3,text:`    |
   ||-||`,transliteration:`dhmenvriyate vahnir yathdarho malena cha
yatholbenvito garbhas tath tenedam vitam`,meaning:"As fire is covered by smoke, as a mirror is covered by dust, or as the embryo is covered by the womb, the living entity is similarly covered by different degrees of this lust."},{id:158,verse_number:39,chapter_number:3,text:`    |
    ||-||`,transliteration:`vita jnam etena jnino nitya-vairi
kma-rpea kaunteya duhprenalena cha`,meaning:"Thus the wise living entitys pure consciousness becomes covered by his eternal enemy in the form of lust, which is never satisfied and which burns like fire."},{id:159,verse_number:40,chapter_number:3,text:`   |
   ||-||`,transliteration:`indriyi mano buddhir asydhihhnam uchyate
etair vimohayaty eha jnam vitya dehinam`,meaning:"The senses, the mind and the intelligence are the sitting places of this lust. Through them lust covers the real knowledge of the living entity and bewilders him."},{id:160,verse_number:41,chapter_number:3,text:`   |
    ||-||`,transliteration:`tasmt tvam indriyy dau niyamya bharatarhabha
ppmna prajahi hy ena jna-vijna-nhanam`,meaning:"Therefore, O Arjuna, best of the Bharatas, in the very beginning curb this great symbol of sin [lust] by regulating the senses, and slay this destroyer of knowledge and self-realization."},{id:161,verse_number:42,chapter_number:3,text:`    |
      ||-||`,transliteration:`indriyi pary hur indriyebhya para mana
manasas tu par buddhir yo buddhe paratas tu sa`,meaning:"The working senses are superior to dull matter; mind is higher than the senses; intelligence is still higher than the mind; and he [the soul] is even higher than the intelligence."},{id:162,verse_number:43,chapter_number:3,text:`     |
     ||-||`,transliteration:`eva buddhe para buddhv sastabhytmnam tman
jahi hatru mah-bho kma-rpa dursadam`,meaning:"Thus knowing oneself to be transcendental to the material senses, mind and intelligence, O mighty-armed Arjuna, one should steady the mind by deliberate spiritual intelligence [Krishna consciousness] and thusby spiritual strengthconquer this insatiable enemy known as lust."}]},{id:4,name:"",name_meaning:"The Yoga of Knowledge and the Renunciation of Action",chapter_number:4,verses_count:42,summary:"Krishna reveals the ancient history of this divine knowledge, explaining that He has taught it in previous ages. He discusses the nature of divine incarnations (avatars) and the importance of finding a true spiritual master.",verses:[{id:163,verse_number:1,chapter_number:4,text:` |
    |
   ||-||`,transliteration:`hr bhagavn uvcha
ima vivasvate yoga proktavn aham avyayam
vivasvn manave prha manur ikhvkave bravt`,meaning:"The Personality of Godhead, Lord Sri Krishna, said: I instructed this imperishable science of yoga to the sun-god, Vivasvan, and Vivasvan instructed it to Manu, the father of mankind, and Manu in turn instructed it to Iksvaku."},{id:164,verse_number:2,chapter_number:4,text:`    |
      ||-||`,transliteration:`eva parampar-prptam ima rjarhayo vidu
sa kleneha mahat yogo naha parantapa`,meaning:"This supreme science was thus received through the chain of disciplic succession, and the saintly kings understood it in that way. But in course of time the succession was broken, and therefore the science as it is appears to be lost."},{id:165,verse_number:3,chapter_number:4,text:`       |
      ||-||`,transliteration:`sa evya may te dya yoga prokta purtana
bhakto si me sakh cheti rahasya hy etad uttamam`,meaning:"That very ancient science of the relationship with the Supreme is today told by Me to you because you are My devotee as well as My friend and can therefore understand the transcendental mystery of this science."},{id:166,verse_number:4,chapter_number:4,text:`  |
      |
   ||-||`,transliteration:`arjuna uvcha
apara bhavato janma para janma vivasvata
katham etad vijny tvam dau proktavn iti`,meaning:"Arjuna said: The sun-god Vivasvan is senior by birth to You. How am I to understand that in the beginning You instructed this science to him?"},{id:167,verse_number:5,chapter_number:4,text:` |
      |
       ||-||`,transliteration:`hr bhagavn uvcha
bahni me vyattni janmni tava chrjuna
tny aha veda sarvi na tva vettha parantapa`,meaning:"The Personality of Godhead said: Many, many births both you and I have passed. I can remember all of them, but you cannot, O subduer of the enemy!"},{id:168,verse_number:6,chapter_number:4,text:`    |
   ||-||`,transliteration:`ajo pi sann avyaytm bhtnm hvaro pi san
prakiti svm adhihhya sambhavmy tma-myay`,meaning:"Although I am unborn and My transcendental body never deteriorates, and although I am the Lord of all living entities, I still appear in every millennium in My original transcendental form."},{id:169,verse_number:7,chapter_number:4,text:`      |
   ||-||`,transliteration:`yad yad hi dharmasya glnir bhavati bhrata
abhyutthnam adharmasya tadtmna sijmy aham`,meaning:"Whenever and wherever there is a decline in religious practice, O descendant of Bharata, and a predominant rise of irreligionat that time I descend Myself."},{id:170,verse_number:8,chapter_number:4,text:`     |
    ||-||`,transliteration:`paritrya sdhn vinhya cha duhkitm
dharma-sasthpanrthya sambhavmi yuge yuge`,meaning:"To deliver the pious and to annihilate the miscreants, as well as to reestablish the principles of religion, I Myself appear, millennium after millennium."},{id:171,verse_number:9,chapter_number:4,text:`        |
 h     ||-||`,transliteration:`janma karma cha me divyam eva yo vetti tattvata
tyaktv deha punar janma naiti mm eti so rjuna`,meaning:"One who knows the transcendental nature of My appearance and activities does not, upon leaving the body, take his birth again in this material world, but attains My eternal abode, O Arjuna."},{id:172,verse_number:10,chapter_number:4,text:`   |
    ||-||`,transliteration:`vta-rga-bhaya-krodh man-may mm uphrit
bahavo jna-tapas pt mad-bhvam gat`,meaning:"Being freed from attachment, fear and anger, being fully absorbed in Me and taking refuge in Me, many, many persons in the past became purified by knowledge of Meand thus they all attained transcendental love for Me."},{id:173,verse_number:11,chapter_number:4,text:`      |
     ||-||`,transliteration:`ye yath m prapadyante ts tathaiva bhajmy aham
mama vartmnuvartante manuhy prtha sarvaha`,meaning:"As all surrender unto Me, I reward them accordingly. Everyone follows My path in all respects, O son of Pritha."},{id:174,verse_number:12,chapter_number:4,text:`      |
      ||-||`,transliteration:`kkhanta karma siddhi yajanta iha devat
khipra hi mnuhe loke siddhir bhavati karma-j`,meaning:"Men in this world desire success in fruitive activities, and therefore they worship the demigods. Quickly, of course, men get results from fruitive work in this world."},{id:175,verse_number:13,chapter_number:4,text:`    |
    ||-||`,transliteration:`chtur-varya may siha gua-karma-vibhgaha
tasya kartram api m viddhy akartram avyayam`,meaning:"According to the three modes of material nature and the work associated with them, the four divisions of human society are created by Me. And although I am the creator of this system, you should know that I am yet the nondoer, being unchangeable."},{id:176,verse_number:14,chapter_number:4,text:`        |
      ||-||`,transliteration:`na m karmi limpanti na me karma-phale spih
iti m yo bhijnti karmabhir na sa badhyate`,meaning:"There is no work that affects Me; nor do I aspire for the fruits of action. One who understands this truth about Me also does not become entangled in the fruitive reactions of work."},{id:177,verse_number:15,chapter_number:4,text:`      |
      ||-||`,transliteration:`eva jtv kita karma prvair api mumukhubhi
kuru karmaiva tasmt tva prvai prvatara kitam`,meaning:"All the liberated souls in ancient times acted with this understanding of My transcendental nature. Therefore you should perform your duty, following in their footsteps."},{id:178,verse_number:16,chapter_number:4,text:`     |
     ||-||`,transliteration:`ki karma kim akarmeti kavayo py atra mohit
tat te karma pravakhymi yaj jtv mokhyase hubht`,meaning:"Even the intelligent are bewildered in determining what is action and what is inaction. Now I shall explain to you what action is, knowing which you shall be liberated from all misfortune."},{id:179,verse_number:17,chapter_number:4,text:`      |
     ||-||`,transliteration:`karmao hy api boddhavya boddhavya cha vikarmaa
akarmaah cha boddhavya gahan karmao gati`,meaning:"The intricacies of action are very hard to understand. Therefore one should know properly what action is, what forbidden action is, and what inaction is."},{id:180,verse_number:18,chapter_number:4,text:`      |
     ||-||`,transliteration:`karmay akarma ya pahyed akarmai cha karma ya
sa buddhimn manuhyehu sa yukta kitsna-karma-kit`,meaning:"One who sees inaction in action, and action in inaction, is intelligent among men, and he is in the transcendental position, although engaged in all sorts of activities."},{id:181,verse_number:19,chapter_number:4,text:`    |
    ||-||`,transliteration:`yasya sarve samrambh kma-sakalpa-varjit
jngni-dagdha-karma tam hu paita budh`,meaning:"One is understood to be in full knowledge whose every endeavor is devoid of desire for sense gratification. He is said by sages to be a worker for whom the reactions of work have been burned up by the fire of perfect knowledge."},{id:182,verse_number:20,chapter_number:4,text:`    |
    ||-||`,transliteration:`tyaktv karma-phalsaga nitya-tipto nirhraya
karmay abhipravitto pi naiva kichit karoti sa`,meaning:"Abandoning all attachment to the results of his activities, ever satisfied and independent, he performs no fruitive action, although engaged in all kinds of undertakings."},{id:183,verse_number:21,chapter_number:4,text:`  |
     ||-||`,transliteration:`nirhr yata-chitttm tyakta-sarva-parigraha
hrra kevala karma kurvan npnoti kilbiham`,meaning:"Such a man of understanding acts with mind and intelligence perfectly controlled, gives up all sense of proprietorship over his possessions, and acts only for the bare necessities of life. Thus working, he is not affected by sinful reactions."},{id:184,verse_number:22,chapter_number:4,text:`   |
      ||-||`,transliteration:`yadichchh-lbha-santuho dvandvtto vimatsara
sama siddhv asiddhau cha kitvpi na nibadhyate`,meaning:"He who is satisfied with gain which comes of its own accord, who is free from duality and does not envy, who is steady in both success and failure, is never entangled, although performing actions."},{id:185,verse_number:23,chapter_number:4,text:`   |
    ||-||`,transliteration:`gata-sagasya muktasya jnvasthita-chetasa
yajycharata karma samagra pravilyate`,meaning:"The work of a man who is unattached to the modes of material nature and who is fully situated in transcendental knowledge merges entirely into transcendence."},{id:186,verse_number:24,chapter_number:4,text:`     |
    ||-||`,transliteration:`brahmrpaa brahma havir brahmgnau brahma hutam
brahmaiva tena gantavya brahma-karma-samdhin`,meaning:"A person who is fully absorbed in Krishna consciousness is sure to attain the spiritual kingdom because of his full contribution to spiritual activities, in which the consummation is absolute and that which is offered is of the same spiritual nature."},{id:187,verse_number:25,chapter_number:4,text:`    |
   ||-||`,transliteration:`daivam evpare yaja yogina paryupsate
brahmgnv apare yaja yajenaivopajuhvati`,meaning:"Some yogis perfectly worship the demigods by offering different sacrifices to them, and some of them offer sacrifices in the fire of the Supreme Brahman."},{id:188,verse_number:26,chapter_number:4,text:`   |
   ||-||`,transliteration:`hrotrdnndriyy anye sayamgnihu juhvati
habddn vihayn anya indriygnihu juhvati`,meaning:"Some [the unadulterated brahmacharis] sacrifice the hearing process and the senses in the fire of mental control, and others [the regulated householders] sacrifice the objects of the senses in the fire of the senses."},{id:189,verse_number:27,chapter_number:4,text:`   |
   ||-||`,transliteration:`sarvndriya-karmi pra-karmi chpare
tma-sayama-yoggnau juhvati jna-dpite`,meaning:"Others, who are interested in achieving self-realization through control of the mind and senses, offer the functions of all the senses, and of the life breath, as oblations into the fire of the controlled mind."},{id:190,verse_number:28,chapter_number:4,text:`  |
   ||-||`,transliteration:`dravya-yajs tapo-yaj yoga-yajs tathpare
svdhyya-jna-yajh cha yataya sahita-vrat`,meaning:"Having accepted strict vows, some become enlightened by sacrificing their possessions, and others by performing severe austerities, by practicing the yoga of eightfold mysticism, or by studying the Vedas to advance in transcendental knowledge."},{id:191,verse_number:29,chapter_number:4,text:`     |
   |
    ||-||`,transliteration:`apne juhvati pra pre pna tathpare
prpna-gat ruddhv pryma-parya
apare niyathr prn prehu juhvati`,meaning:"Still others, who are inclined to the process of breath restraint to remain in trance, practice by offering the movement of the outgoing breath into the incoming, and the incoming breath into the outgoing, and thus at last remain in trance, stopping all breathing. Others, curtailing the eating process, offer the outgoing breath into itself as a sacrifice."},{id:192,verse_number:30,chapter_number:4,text:`   |
    ||-||`,transliteration:`sarve py ete yaja-vido yaja-khapita-kalmah
yaja-hihmita-bhujo ynti brahma santanam`,meaning:"All these performers who know the meaning of sacrifice become cleansed of sinful reactions, and, having tasted the nectar of the results of sacrifices, they advance toward the supreme eternal atmosphere."},{id:193,verse_number:31,chapter_number:4,text:"    ||-||",transliteration:"nya loko sty ayajasya kuto nya kuru-sattama",meaning:"O best of the Kuru dynasty, without sacrifice one can never live happily on this planet or in this life: what then of the next?"},{id:194,verse_number:32,chapter_number:4,text:`      |
    ||-||`,transliteration:`eva bahu-vidh yaj vitat brahmao mukhe
karma-jn viddhi tn sarvn eva jtv vimokhyase`,meaning:"All these different types of sacrifice are approved by the Vedas, and all of them are born of different types of work. Knowing them as such, you will become liberated."},{id:195,verse_number:33,chapter_number:4,text:`  |
     ||-||`,transliteration:`hreyn dravya-mayd yajj jna-yaja parantapa
sarva karmkhila prtha jne parisampyate`,meaning:"O chastiser of the enemy, the sacrifice performed in knowledge is better than the mere sacrifice of material possessions. After all, O son of Pritha, all sacrifices of work culminate in transcendental knowledge."},{id:196,verse_number:34,chapter_number:4,text:`    |
    ||-||`,transliteration:`tad viddhi praiptena pariprahnena sevay
upadekhyanti te jna jninas tattva-darhina`,meaning:"Just try to learn the truth by approaching a spiritual master. Inquire from him submissively and render service unto him. The self-realized souls can impart knowledge unto you because they have seen the truth."},{id:197,verse_number:35,chapter_number:4,text:`     |
    ||-||`,transliteration:`yaj jtv na punar moham eva ysyasi pava
yena bhtny ahehea drakhyasy tmany atho mayi`,meaning:"Having obtained real knowledge from a self-realized soul, you will never fall again into such illusion, for by this knowledge you will see that all living beings are but part of the Supreme, or, in other words, that they are Mine."},{id:198,verse_number:36,chapter_number:4,text:`     |
    ||-||`,transliteration:`api ched asi ppebhya sarvebhya ppa-kit-tama
sarva jna-plavenaiva vijina santarihyasi`,meaning:"Even if you are considered to be the most sinful of all sinners, when you are situated in the boat of transcendental knowledge you will be able to cross over the ocean of miseries."},{id:199,verse_number:37,chapter_number:4,text:`  |
    ||-||`,transliteration:`yathaidhsi samiddho gnir bhasma-st kurute rjuna
jngni sarva-karmi bhasma-st kurute tath`,meaning:"As a blazing fire turns firewood to ashes, O Arjuna, so does the fire of knowledge burn to ashes all reactions to material activities."},{id:200,verse_number:38,chapter_number:4,text:`      |
    ||-||`,transliteration:`na hi jnena sadiha pavitram iha vidyate
tat svaya yoga-sasiddha klentmani vindati`,meaning:"In this world, there is nothing so sublime and pure as transcendental knowledge. Such knowledge is the mature fruit of all mysticism. And one who has become accomplished in the practice of devotional service enjoys this knowledge within himself in due course of time."},{id:201,verse_number:39,chapter_number:4,text:`    |
    ||-||`,transliteration:`hraddhv labhate jna tat-para sayatendriya
jna labdhv par hntim achiredhigachchhati`,meaning:"A faithful man who is dedicated to transcendental knowledge and who subdues his senses is eligible to achieve such knowledge, and having achieved it he quickly attains the supreme spiritual peace."},{id:202,verse_number:40,chapter_number:4,text:`   |
       ||-||`,transliteration:`ajah chhraddadhnah cha sahaytm vinahyati
nya loko sti na paro na sukha sahaytmana`,meaning:"But ignorant and faithless persons who doubt the revealed scriptures do not attain God consciousness; they fall down. For the doubting soul there is happiness neither in this world nor in the next."},{id:203,verse_number:41,chapter_number:4,text:`  |
     ||-||`,transliteration:`yoga-sannyasta-karma jna-sachhinna-sahayam
tmavanta na karmi nibadhnanti dhanajaya`,meaning:"One who acts in devotional service, renouncing the fruits of his actions, and whose doubts have been destroyed by transcendental knowledge, is situated factually in the self. Thus he is not bound by the reactions of work, O conqueror of riches."},{id:204,verse_number:42,chapter_number:4,text:`   |
    ||-||`,transliteration:`tasmd ajna-sambhta hit-stha jnsintmana
chhittvaina sahaya yogam tihhottihha bhrata`,meaning:"Therefore the doubts which have arisen in your heart out of ignorance should be slashed by the weapon of knowledge. Armed with yoga, O Bharata, stand and fight."}]},{id:5,name:"",name_meaning:"The Yoga of Renunciation of Action",chapter_number:5,verses_count:29,summary:"Arjuna is confused about whether it is better to renounce actions or perform them. Krishna clarifies that both paths can lead to liberation, but acting without attachment (Karma Yoga) is superior and more practical for most people.",verses:[{id:205,verse_number:1,chapter_number:5,text:`  |
      |
     ||-||`,transliteration:`arjuna uvcha
sannysa karma kiha punar yoga cha hasasi
yach chhreya etayor eka tan me brhi sunihchitam`,meaning:"Arjuna said: O Krishna, first of all You ask me to renounce work, and then again You recommend work with devotion. Now will You kindly tell me definitely which of the two is more beneficial?"},{id:206,verse_number:2,chapter_number:5,text:` |
   |
   ||-||`,transliteration:`hr bhagavn uvcha
sannysa karma-yogah cha nihreyasa-karv ubhau
tayos tu karma-sannyst karma-yogo vihihyate`,meaning:"The Personality of Godhead replied: The renunciation of work and work in devotion are both good for liberation. But, of the two, work in devotional service is better than renunciation of work."},{id:207,verse_number:3,chapter_number:5,text:`        |
     ||-||`,transliteration:`jeya sa nitya-sannys yo na dvehi na kkhati
nirdvandvo hi mah-bho sukha bandht pramuchyate`,meaning:"One who neither hates nor desires the fruits of his activities is known to be always renounced. Such a person, free from all dualities, easily overcomes material bondage and is completely liberated, O mighty-armed Arjuna."},{id:208,verse_number:4,chapter_number:5,text:`     |
   ||-||`,transliteration:`skhya-yogau pithag bl pravadanti na pait
ekam apy sthita samyag ubhayor vindate phalam`,meaning:"Only the ignorant speak of devotional service [karma-yoga] as being different from the analytical study of the material world [Sankhya]. Those who are actually learned say that he who applies himself well to one of these paths achieves the results of both."},{id:209,verse_number:5,chapter_number:5,text:`     |
         ||-||`,transliteration:`yat skhyai prpyate sthna tad yogair api gamyate
eka skhya cha yoga cha ya pahyati sa pahyati`,meaning:"One who knows that the position reached by means of analytical study can also be attained by devotional service, and who therefore sees analytical study and devotional service to be on the same level, sees things as they are."},{id:210,verse_number:6,chapter_number:5,text:`   |
   ||-||`,transliteration:`sannysas tu mah-bho dukham ptum ayogata
yoga-yukto munir brahma na chiredhigachchhati`,meaning:"Merely renouncing all activities yet not engaging in the devotional service of the Lord cannot make one happy. But a thoughtful person engaged in devotional service can achieve the Supreme without delay."},{id:211,verse_number:7,chapter_number:5,text:`    |
    ||-||`,transliteration:`yoga-yukto vihuddhtm vijittm jitendriya
sarva-bhttma-bhttm kurvann api na lipyate`,meaning:"One who works in devotion, who is a pure soul, and who controls his mind and senses is dear to everyone, and everyone is dear to him. Though always working, such a man is never entangled."},{id:212,verse_number:8,chapter_number:5,text:`     |
 ||-||`,transliteration:`naiva kichit karomti yukto manyeta tattva-vit
pahya hivan spiha jighrann ahnan gachchhan svapan hvasan`,meaning:"A person in the divine consciousness, although engaged in seeing, hearing, touching, smelling, eating, moving about, sleeping and breathing, always knows within himself that he actually does nothing at all."},{id:213,verse_number:9,chapter_number:5,text:` |
    ||-||`,transliteration:`pralapan visijan gihann unmihan nimihann api
indriyndriyrthehu vartanta iti dhrayan`,meaning:"Because while speaking, evacuating, receiving, or opening or closing his eyes, he always knows that only the material senses are engaged with their objects and that he is aloof from them."},{id:214,verse_number:10,chapter_number:5,text:`      |
     ||-||`,transliteration:`brahmay dhya karmi saga tyaktv karoti ya
lipyate na sa ppena padma-patram ivmbhas`,meaning:"One who performs his duty without attachment, surrendering the results unto the Supreme Lord, is unaffected by sinful action, as the lotus leaf is untouched by water."},{id:215,verse_number:11,chapter_number:5,text:`    |
     ||-||`,transliteration:`kyena manas buddhy kevalair indriyair api
yogina karma kurvanti saga tyaktvtma-huddhaye`,meaning:"The yogis, abandoning attachment, act with body, mind, intelligence and even with the senses, only for the purpose of purification."},{id:216,verse_number:12,chapter_number:5,text:`     |
     ||-||`,transliteration:`yukta karma-phala tyaktv hntim pnoti naihhikm
ayukta kma-krea phale sakto nibadhyate`,meaning:"The steadily devoted soul attains unadulterated peace because he offers the result of all activities to Me; whereas a person who is not in union with the Divine, who is greedy for the fruits of his labor, becomes entangled."},{id:217,verse_number:13,chapter_number:5,text:`     |
      ||-||`,transliteration:`sarva-karmi manas sannyasyste sukha vah
nava-dvre pure deh naiva kurvan na krayan`,meaning:"When the embodied living being controls his nature and mentally renounces all actions, he resides happily in the city of nine gates [the material body], neither working nor causing work to be done."},{id:218,verse_number:14,chapter_number:5,text:`       |
    ||-||`,transliteration:`na kartitva na karmi lokasya sijati prabhu
na karma-phala-sayoga svabhvas tu pravartate`,meaning:"The embodied spirit, master of the city of his body, does not create activities, nor does he induce people to act, nor does he create the fruits of action. All this is enacted by the modes of material nature."},{id:219,verse_number:15,chapter_number:5,text:`      |
     ||-||`,transliteration:`ndatte kasyachit ppa na chaiva sukita vibhu
ajnenvita jna tena muhyanti jantava`,meaning:"Nor does the Supreme Lord assume anyones sinful or pious activities. Embodied beings, however, are bewildered because of the ignorance which covers their real knowledge."},{id:220,verse_number:16,chapter_number:5,text:`     |
   ||-||`,transliteration:`jnena tu tad ajna yeh nhitam tmana
tehm ditya-vaj jna prakhayati tat param`,meaning:"When, however, one is enlightened with the knowledge by which nescience is destroyed, then his knowledge reveals everything, as the sun lights up everything in the daytime."},{id:221,verse_number:17,chapter_number:5,text:` |
  ||-||`,transliteration:`tad-buddhayas tad-tmnas tan-nihhs tat-parya
gachchhanty apunar-vitti jna-nirdhta-kalmah`,meaning:"When ones intelligence, mind, faith and refuge are all fixed in the Supreme, then one becomes fully cleansed of misgivings through complete knowledge and thus proceeds straight on the path of liberation."},{id:222,verse_number:18,chapter_number:5,text:`    |
      ||-||`,transliteration:`vidy-vinaya-sampanne brhmae gavi hastini
huni chaiva hva-pke cha pait sama-darhina`,meaning:"The humble sages, by virtue of true knowledge, see with equal vision a learned and gentle brahmana, a cow, an elephant, a dog and a dog-eater [outcaste]."},{id:223,verse_number:19,chapter_number:5,text:`       |
       ||-||`,transliteration:`ihaiva tair jita sargo yeh smye sthita mana
nirdoha hi sama brahma tasmd brahmai te sthit`,meaning:"Those whose minds are established in sameness and equanimity have already conquered the conditions of birth and death. They are flawless like Brahman, and thus they are already situated in Brahman."},{id:224,verse_number:20,chapter_number:5,text:`     |
   ||-||`,transliteration:`na prahihyet priya prpya nodvijet prpya chpriyam
sthira-buddhir asammho brahma-vid brahmai sthita`,meaning:"A person who neither rejoices upon achieving something pleasant nor laments upon obtaining something unpleasant, who is self-intelligent, who is unbewildered, and who knows the science of God, is already situated in transcendence."},{id:225,verse_number:21,chapter_number:5,text:`   |
   ||-||`,transliteration:`bhya-sparhehv asakttm vindaty tmani yat sukham
sa brahma-yoga-yukttm sukham akhayam ahnute`,meaning:"Such a liberated person is not attracted to material sense pleasure but is always in trance, enjoying the pleasure within. In this way the self-realized person enjoys unlimited happiness, for he concentrates on the Supreme."},{id:226,verse_number:22,chapter_number:5,text:`       |
      ||-||`,transliteration:`ye hi sasparha-j bhog dukha-yonaya eva te
dy-antavanta kaunteya na tehu ramate budha`,meaning:"An intelligent person does not take part in the sources of misery, which are due to contact with the material senses. O son of Kunti, such pleasures have a beginning and an end, and so the wise man does not delight in them."},{id:227,verse_number:23,chapter_number:5,text:`    |
       ||-||`,transliteration:`haknothaiva ya sohu prk harra-vimokhat
kma-krodhodbhava vega sa yukta sa sukh nara`,meaning:"Before giving up this present body, if one is able to tolerate the urges of the material senses and check the force of desire and anger, he is well situated and is happy in this world."},{id:228,verse_number:24,chapter_number:5,text:`  |
    ||-||`,transliteration:`yo nta-sukho ntar-rmas tathntar-jyotir eva ya
sa yog brahma-nirva brahma-bhto dhigachchhati`,meaning:"One whose happiness is within, who is active and rejoices within, and whose aim is inward is actually the perfect mystic. He is liberated in the Supreme, and ultimately he attains the Supreme."},{id:229,verse_number:25,chapter_number:5,text:`   |
    ||-||`,transliteration:`labhante brahma-nirvam ihaya kha-kalmah
chhinna-dvaidh yattmna sarva-bhta-hite rat`,meaning:"Those who are beyond the dualities that arise from doubts, whose minds are engaged within, who are always busy working for the welfare of all living beings, and who are free from all sins achieve liberation in the Supreme."},{id:230,verse_number:26,chapter_number:5,text:`   |
    ||-||`,transliteration:`kma-krodha-vimuktn yatn yata-chetasm
abhito brahma-nirva vartate vidittmanm`,meaning:"Those who are free from anger and all material desires, who are self-realized, self-disciplined and constantly endeavoring for perfection, are assured of liberation in the Supreme in the very near future."},{id:231,verse_number:27,chapter_number:5,text:`   |
    ||-||`,transliteration:`sparhn kitv bahir bhyh chakhuh chaivntare bhruvo
prpnau samau kitv nsbhyantara-chriau`,meaning:"Shutting out all external sense objects, keeping the eyes and vision concentrated between the two eyebrows, suspending the inward and outward breaths within the nostrils..."},{id:232,verse_number:28,chapter_number:5,text:` |
      ||-||`,transliteration:`yatendriya-mano-buddhir munir mokha-paryaa
vigatechchh-bhaya-krodho ya sad mukta eva sa`,meaning:"...and thus controlling the mind, senses and intelligence, the transcendentalist aiming at liberation becomes free from desire, fear and anger. One who is always in this state is certainly liberated."},{id:233,verse_number:29,chapter_number:5,text:`   |
     ||-||`,transliteration:`bhoktra yaja-tapas sarva-loka-mahehvaram
suhida sarva-bhtn jtv m hntim ichchhati`,meaning:"A person in full consciousness of Me, knowing Me to be the ultimate beneficiary of all sacrifices and austerities, the Supreme Lord of all planets and demigods, and the benefactor and well-wisher of all living entities, attains peace from the pangs of material miseries."}]},{id:6,name:"",name_meaning:"The Yoga of Self-Control",chapter_number:6,verses_count:47,summary:"Krishna describes the practice of meditation (Dhyana Yoga) as a means to control the mind and senses. He outlines the lifestyle, posture, and focus required for successful meditation and explains what happens to a yogi who is unsuccessful.",verses:[{id:234,verse_number:1,chapter_number:6,text:` |
      |
        ||-||`,transliteration:`hr bhagavn uvcha
anhrita karma-phala krya karma karoti ya
sa sannys cha yog cha na niragnir na chkriya`,meaning:"The Supreme Personality of Godhead said: One who is unattached to the fruits of his work and who works as he is obligated is in the renounced order of life, and he is the true mystic, not he who lights no fire and performs no duty."},{id:235,verse_number:2,chapter_number:6,text:`      |
     ||-||`,transliteration:`ya sannysam iti prhur yoga ta viddhi pava
na hy asannyasta-sakalpo yog bhavati kahchana`,meaning:"What is called renunciation you should know to be the same as yoga, or linking oneself with the Supreme, O son of Pandu, for one can never become a yogi unless he renounces the desire for sense gratification."},{id:236,verse_number:3,chapter_number:6,text:`   |
    ||-||`,transliteration:`rurukhor muner yoga karma kraam uchyate
yogrhasya tasyaiva hama kraam uchyate`,meaning:"For one who is a neophyte in the eightfold yoga system, work is said to be the means; and for one who is already elevated in yoga, cessation of all material activities is said to be the means."},{id:237,verse_number:4,chapter_number:6,text:`     |
  ||-||`,transliteration:`yad hi nendriyrthehu na karmasv anuhajjate
sarva-sakalpa-sannys yogrhas tadochyate`,meaning:"A person is said to be elevated in yoga when, having renounced all material desires, he neither acts for sense gratification nor engages in fruitive activities."},{id:238,verse_number:5,chapter_number:6,text:`  |
    ||-||`,transliteration:`uddhared tmantmna ntmnam avasdayet
tmaiva hy tmano bandhur tmaiva ripur tmana`,meaning:"One must deliver himself with the help of his mind, and not degrade himself. The mind is the friend of the conditioned soul, and his enemy as well."},{id:239,verse_number:6,chapter_number:6,text:`   |
    ||-||`,transliteration:`bandhur tmtmanas tasya yentmaivtman jita
antmanas tu hatrutve vartettmaiva hatru-vat`,meaning:"For him who has conquered the mind, the mind is the best of friends; but for one who has failed to do so, his mind will remain the greatest enemy."},{id:240,verse_number:7,chapter_number:6,text:`    |
   ||-||`,transliteration:`jittmana prahntasya paramtm samhita
htoha-sukha-dukhehu tath mnpamnayo`,meaning:"For one who has conquered the mind, the Supersoul is already reached, for he has attained tranquility. To such a man happiness and distress, heat and cold, honor and dishonor are all the same."},{id:241,verse_number:8,chapter_number:6,text:`   |
    ||-||`,transliteration:`jna-vijna-tipttm ka-stho vijitendriya
yukta ity uchyate yog sama-lohrhma-kchana`,meaning:"A person is said to be established in self-realization and is called a yogi [or mystic] when he is fully satisfied by virtue of acquired knowledge and realization. Such a person is situated in transcendence and is self-controlled. He sees everythingwhether it be pebbles, stones or goldas the same."},{id:242,verse_number:9,chapter_number:6,text:` |
    ||-||`,transliteration:`suhin-mitrry-udsna-madhyastha-dvehya-bandhuhu
sdhuhv api cha ppehu sama-buddhir vihihyate`,meaning:"A person is considered still further advanced when he regards allthe honest well-wisher, friends and enemies, the envious, the pious, the sinner and those who are indifferent and impartialwith an equal mind."},{id:243,verse_number:10,chapter_number:6,text:`     |
   ||-||`,transliteration:`yog yujta satatam tmna rahasi sthita
ekk yata-chitttm nirhr aparigraha`,meaning:"A transcendentalist should always engage his body, mind and self in relationship with the Supreme; he should live alone in a secluded place and should always carefully control his mind. He should be free from desires and feelings of possessiveness."},{id:244,verse_number:11,chapter_number:6,text:`    |
   ||-||`,transliteration:`huchau dehe pratihhpya sthiram sanam tmana
nty-uchchhrita nti-ncha chailjina-kuhottaram`,meaning:"To practice yoga, one should go to a secluded place and should lay kusa grass on the ground and then cover it with a deerskin and a soft cloth. The seat should be neither too high nor too low and should be situated in a sacred place."},{id:245,verse_number:12,chapter_number:6,text:`    |
  ||-||`,transliteration:`tatraikgra mana kitv yata-chittendriya-kriya
upavihysane yujyd yogam tma-vihuddhaye`,meaning:"The yogi should then sit on it very firmly and practice yoga to purify the heart by controlling his mind, senses and activities and fixing the mind on one point."},{id:246,verse_number:13,chapter_number:6,text:`    |
    ||-||`,transliteration:`sama kya-hiro-grva dhrayann achala sthira
samprekhya nsikgra sva dihah chnavalokayan`,meaning:"One should hold ones body, neck and head erect in a straight line and stare steadily at the tip of the nose."},{id:247,verse_number:14,chapter_number:6,text:`   |
      ||-||`,transliteration:`prahnttm vigata-bhr brahmachri-vrate sthita
mana sayamya mach-chitto yukta sta mat-para`,meaning:"Thus, with an unagitated, subdued mind, devoid of fear, completely free from sex life, one should meditate upon Me within the heart and make Me the ultimate goal of life."},{id:248,verse_number:15,chapter_number:6,text:`    |
   ||-||`,transliteration:`yujann eva sadtmna yog niyata-mnasa
hnti nirva-param mat-sasthm adhigachchhati`,meaning:"Thus practicing constant control of the body, mind and activities, the mystic transcendentalist, his mind regulated, attains to the kingdom of God [or the abode of Krishna] by cessation of material existence."},{id:249,verse_number:16,chapter_number:6,text:`    |
      ||-||`,transliteration:`ntyahnatas tu yogo sti na chaikntam anahnata
na chti-svapna-hlasya jgrato naiva chrjuna`,meaning:"There is no possibility of ones becoming a yogi, O Arjuna, if one eats too much or eats too little, sleeps too much or does not sleep enough."},{id:250,verse_number:17,chapter_number:6,text:`   |
    ||-||`,transliteration:`yukthra-vihrasya yukta-chehasya karmasu
yukta-svapnvabodhasya yogo bhavati dukha-h`,meaning:"He who is regulated in his habits of eating, sleeping, recreation and work can mitigate all material pains by practicing the yoga system."},{id:251,verse_number:18,chapter_number:6,text:`   |
     ||-||`,transliteration:`yad viniyata chittam tmany evvatihhate
nispiha sarva-kmebhyo yukta ity uchyate tad`,meaning:"When the yogi, by practice of yoga, disciplines his mental activities and becomes situated in transcendencedevoid of all material desireshe is said to be well established in yoga."},{id:252,verse_number:19,chapter_number:6,text:`      |
    ||-||`,transliteration:`yath dpo nivta-stho negate sopam smit
yogino yata-chittasya yujato yogam tmana`,meaning:"As a lamp in a windless place does not waver, so the transcendentalist, whose mind is controlled, remains always steady in his meditation on the transcendent self."},{id:253,verse_number:20,chapter_number:6,text:`    |
    ||-||`,transliteration:`yatroparamate chitta niruddha yoga-sevay
yatra chaivtmantmna pahyann tmani tuhyati`,meaning:"In the stage of perfection called trance, or samadhi, ones mind is completely restrained from material mental activities by practice of yoga. This perfection is characterized by ones ability to see the self by the pure mind and to relish and rejoice in the self."},{id:254,verse_number:21,chapter_number:6,text:`  |
      ||-||`,transliteration:`sukham tyantika yat tad buddhi-grhyam atndriyam
vetti yatra na chaivya sthitah chalati tattvata`,meaning:"In that joyous state, one is situated in boundless transcendental happiness and enjoys himself through transcendental senses. Established thus, one never departs from the truth."},{id:255,verse_number:22,chapter_number:6,text:`       |
     ||-||`,transliteration:`ya labdhv chpara lbha manyate ndhika tata
yasmin sthito na dukhena gurupi vichlyate`,meaning:"And upon gaining this he thinks there is no greater gain. Being situated in such a position, one is never shaken, even in the midst of greatest difficulty."},{id:256,verse_number:23,chapter_number:6,text:`   |
    ||-||`,transliteration:`ta vidyd dukha-sayoga-viyoga yoga-sajitam
sa nihchayena yoktavyo yogo nirvia-chetas`,meaning:"This indeed is actual freedom from all miseries arising from material contact. One should engage oneself in the practice of yoga with determination and faith and not be deviated from the path."},{id:257,verse_number:24,chapter_number:6,text:`  |
   ||-||`,transliteration:`sakalpa-prabhavn kms tyaktv sarvn ahehata
manasaivendriya-grma viniyamya samantata`,meaning:"One should abandon without exception all material desires born of mental speculation and thus control all the senses on all sides by the mind."},{id:258,verse_number:25,chapter_number:6,text:`   |
      ||-||`,transliteration:`hanai hanair uparamed buddhy dhiti-gihtay
tma-sastha mana kitv na kichid api chintayet`,meaning:"Gradually, step by step, one should become situated in trance by means of intelligence sustained by full conviction, and thus the mind should be fixed on the self alone and should think of nothing else."},{id:259,verse_number:26,chapter_number:6,text:`    |
    ||-||`,transliteration:`yato yato nihcharati manah chachalam asthiram
tatas tato niyamyaitad tmany eva vaha nayet`,meaning:"From wherever the mind wanders due to its flickering and unsteady nature, one must certainly withdraw it and bring it back under the control of the self."},{id:260,verse_number:27,chapter_number:6,text:`    |
   ||-||`,transliteration:`prahnta-manasa hy ena yogina sukham uttamam
upaiti hnta-rajasa brahma-bhtam akalmaham`,meaning:"The yogi whose mind is fixed on Me verily attains the highest perfection of transcendental happiness. He is beyond the mode of passion, he realizes his qualitative identity with the Supreme, and thus he is freed from all reactions to past deeds."},{id:261,verse_number:28,chapter_number:6,text:`    |
   ||-||`,transliteration:`yujann eva sadtmna yog vigata-kalmaha
sukhena brahma-sasparham atyanta sukham ahnute`,meaning:"Thus the self-controlled yogi, constantly engaged in yoga practice, becomes free from all material contamination and achieves the highest stage of perfect happiness in transcendental loving service to the Lord."},{id:262,verse_number:29,chapter_number:6,text:`   |
    ||-||`,transliteration:`sarva-bhta-stham tmna sarva-bhtni chtmani
khate yoga-yukttm sarvatra sama-darhana`,meaning:"A true yogi observes Me in all beings and also sees every being in Me. Indeed, the self-realized person sees Me, the same Supreme Lord, everywhere."},{id:263,verse_number:30,chapter_number:6,text:`        |
        ||-||`,transliteration:`yo m pahyati sarvatra sarva cha mayi pahyati
tasyha na praahymi sa cha me na praahyati`,meaning:"For one who sees Me everywhere and sees everything in Me, I am never lost, nor is he ever lost to Me."},{id:264,verse_number:31,chapter_number:6,text:`    |
      ||-||`,transliteration:`sarva-bhta-sthita yo m bhajaty ekatvam sthita
sarvath vartamno pi sa yog mayi vartate`,meaning:"Such a yogi, who engages in the worshipful service of the Supersoul, knowing that I and the Supersoul are one, remains always in Me in all circumstances."},{id:265,verse_number:32,chapter_number:6,text:`     |
         ||-||`,transliteration:`tmaupamyena sarvatra sama pahyati yo rjuna
sukha v yadi v dukha sa yog paramo mata`,meaning:"He is a perfect yogi who, by comparison to his own self, sees the true equality of all beings, in both their happiness and their distress, O Arjuna!"},{id:266,verse_number:33,chapter_number:6,text:`  |
     |
     ||-||`,transliteration:`arjuna uvcha
yo ya yogas tvay prokta smyena madhusdana
etasyha na pahymi chachalatvt sthiti sthirm`,meaning:"Arjuna said: O Madhusudana, the system of yoga which You have summarized appears impractical and unendurable to me, for the mind is restless and unsteady."},{id:267,verse_number:34,chapter_number:6,text:`      |
     ||-||`,transliteration:`chachala hi mana kiha pramthi balavad diham
tasyha nigraha manye vyor iva su-duhkaram`,meaning:"For the mind is restless, turbulent, obstinate and very strong, O Krishna, and to subdue it, I think, is more difficult than controlling the wind."},{id:268,verse_number:35,chapter_number:6,text:` |
     |
      ||-||`,transliteration:`hr bhagavn uvcha
asahaya mah-bho mano durnigraha chalam
abhysena tu kaunteya vairgyea cha gihyate`,meaning:"Lord Sri Krishna said: O mighty-armed son of Kunti, it is undoubtedly very difficult to curb the restless mind, but it is possible by suitable practice and by detachment."},{id:269,verse_number:36,chapter_number:6,text:`      |
    ||-||`,transliteration:`asayattman yogo duhprpa iti me mati
vahytman tu yatat hakyo vptum upyata`,meaning:"For one whose mind is unbridled, self-realization is difficult work. But he whose mind is controlled and who strives by appropriate means is assured of success. That is My opinion."},{id:270,verse_number:37,chapter_number:6,text:`  |
   |
      ||-||`,transliteration:`arjuna uvcha
ayati hraddhayopeto yogch chalita-mnasa
aprpya yoga-sasiddhi k gati kiha gachchhati`,meaning:"Arjuna said: O Krishna, what is the destination of the unsuccessful transcendentalist, who in the beginning takes to the process of self-realization with faith but who later desists due to worldly-mindedness and thus does not attain perfection in mysticism?"},{id:271,verse_number:38,chapter_number:6,text:`  |
     ||-||`,transliteration:`kachchin nobhaya-vibhrahah chhinnbhram iva nahyati
apratihho mah-bho vimho brahmaa pathi`,meaning:"O mighty-armed Krishna, does not such a man, being deviated from the path of Transcendence, perish like a riven cloud, with no position in any sphere?"},{id:272,verse_number:39,chapter_number:6,text:`    |
     ||-||`,transliteration:`etan me sahaya kiha chhettum arhasy ahehata
tvad-anya sahayasysya chhett na hy upapadyate`,meaning:"This is my doubt, O Krishna, and I ask You to dispel it completely. But for You, no one is to be found who can destroy this doubt."},{id:273,verse_number:40,chapter_number:6,text:` |
     |
     ||-||`,transliteration:`hr bhagavn uvcha
prtha naiveha nmutra vinhas tasya vidyate
na hi kalya-kit kahchid durgati tta gachchhati`,meaning:"The Supreme Personality of Godhead said: Son of Pritha, a transcendentalist engaged in auspicious activities does not meet with destruction either in this world or in the spiritual world; one who does good, My friend, is never overcome by evil."},{id:274,verse_number:41,chapter_number:6,text:`     |
    ||-||`,transliteration:`prpya puya-kit lokn uhitv hhvat sam
huchn hrmat gehe yoga-bhraho bhijyate`,meaning:"The unsuccessful yogi, after many, many years of enjoyment on the planets of the pious living entities, is born into a family of righteous people, or into a family of rich aristocracy."},{id:275,verse_number:42,chapter_number:6,text:`     |
     ||-||`,transliteration:`athav yoginm eva kule bhavati dhmatm
etad dhi durlabhatara loke janma yad diham`,meaning:"Or [if unsuccessful after long practice of yoga] he takes his birth in a family of transcendentalists who are surely great in wisdom. Certainly, such a birth is rare in this world."},{id:276,verse_number:43,chapter_number:6,text:`     |
      ||-||`,transliteration:`tatra ta buddhi-sayoga labhate paurva-dehikam
yatate cha tato bhya sasiddhau kuru-nandana`,meaning:"On taking such a birth, he revives the divine consciousness of his previous life, and he again tries to make further progress in order to achieve complete success, O son of Kuru."},{id:277,verse_number:44,chapter_number:6,text:`     |
   ||-||`,transliteration:`prvbhysena tenaiva hriyate hy avaho pi sa
jijsur api yogasya habda-brahmtivartate`,meaning:"By virtue of the divine consciousness of his previous life, he automatically becomes attracted to the yogic principleseven without seeking them. Such an inquisitive transcendentalist stands always above the ritualistic principles of the scriptures."},{id:278,verse_number:45,chapter_number:6,text:`   |
    ||-||`,transliteration:`prayatnd yatamnas tu yog sahuddha-kilbiha
aneka-janma-sasiddhas tato yti par gatim`,meaning:"And when the yogi engages himself with sincere endeavor in making further progress, being washed of all contaminations, then ultimately, achieving perfection after many, many births of practice, he attains the supreme goal."},{id:279,verse_number:46,chapter_number:6,text:`    |
    ||-||`,transliteration:`tapasvibhyo dhiko yog jnibhyo pi mato dhika
karmibhyah chdhiko yog tasmd yog bhavrjuna`,meaning:"A yogi is greater than the ascetic, greater than the empiricist and greater than the fruitive worker. Therefore, O Arjuna, in all circumstances, be a yogi."},{id:280,verse_number:47,chapter_number:6,text:`   |
       ||-||`,transliteration:`yoginm api sarveh mad-gatenntar-tman
hraddhvn bhajate yo m sa me yuktatamo mata`,meaning:"And of all yogis, the one with great faith who always abides in Me, thinks of Me within himself, and renders transcendental loving service to Mehe is the most intimately united with Me in yoga and is the highest of all. That is My opinion."}]},{id:7,name:"",name_meaning:"The Yoga of Knowledge and Realization",chapter_number:7,verses_count:30,summary:"Krishna explains the nature of the Absolute Truth. He describes His material and spiritual energies and reveals Himself as the source of all creation. He also discusses who can and cannot surrender to Him.",verses:[{id:281,verse_number:1,chapter_number:7,text:` |
    |
      ||-||`,transliteration:`hr bhagavn uvcha
mayy sakta-man prtha yoga yujan mad-hraya
asahaya samagra m yath jsyasi tach chhiu`,meaning:"The Supreme Personality of Godhead said: Now hear, O son of Pritha, how by practicing yoga in full consciousness of Me, with mind attached to Me, you can know Me in full, free from doubt."},{id:282,verse_number:2,chapter_number:7,text:`    |
   ||-||`,transliteration:`jna te ha sa-vijnam ida vakhymy ahehata
yaj jtv neha bhyo nyaj jtavyam avahihyate`,meaning:"I shall now declare unto you in full this knowledge, both phenomenal and numinous. This being known, nothing further shall remain for you to know."},{id:283,verse_number:3,chapter_number:7,text:`    |
     ||-||`,transliteration:`manuhy sahasrehu kahchid yatati siddhaye
yatatm api siddhn kahchin m vetti tattvata`,meaning:"Out of many thousands among men, one may endeavor for perfection, and of those who have achieved perfection, hardly one knows Me in truth."},{id:284,verse_number:4,chapter_number:7,text:`      |
     ||-||`,transliteration:`bhmir po nalo vyu kha mano buddhir eva cha
ahakra itya me bhinn prakitir ahadh`,meaning:"Earth, water, fire, air, ether, mind, intelligence and false egoall together these eight constitute My separated material energies."},{id:285,verse_number:5,chapter_number:7,text:`     |
     ||-||`,transliteration:`apareyam itas tv any prakiti viddhi me parm
jva-bht mah-bho yayeda dhryate jagat`,meaning:"Besides these, O mighty-armed Arjuna, there is another, superior energy of Mine, which comprises the living entities who are exploiting the resources of this material, inferior nature."},{id:286,verse_number:6,chapter_number:7,text:`   |
     ||-||`,transliteration:`etad-yonni bhtni sarvty upadhraya
aha kitsnasya jagata prabhava pralayas tath`,meaning:"All created beings have their source in these two natures. Of all that is material and all that is spiritual in this world, know for certain that I am both the origin and the dissolution."},{id:287,verse_number:7,chapter_number:7,text:`    |
      ||-||`,transliteration:`matta paratara nnyat kichid asti dhanajaya
mayi sarvam ida prota stre mai-ga iva`,meaning:"O conqueror of wealth, there is no truth superior to Me. Everything rests upon Me, as pearls are strung on a thread."},{id:288,verse_number:8,chapter_number:7,text:`    |
      ||-||`,transliteration:`raso ham apsu kaunteya prabhsmi hahi-sryayo
praava sarva-vedehu habda khe pauruha nihu`,meaning:"O son of Kunti, I am the taste of water, the light of the sun and the moon, the syllable om in the Vedic mantras; I am the sound in ether and ability in man."},{id:289,verse_number:9,chapter_number:7,text:`      |
    ||-||`,transliteration:`puyo gandha pithivy cha tejah chsmi vibhvasau
jvana sarva-bhtehu tapah chsmi tapasvihu`,meaning:"I am the original fragrance of the earth, and I am the heat in fire. I am the life of all that lives, and I am the penances of all ascetics."},{id:290,verse_number:10,chapter_number:7,text:`      |
  ||-||`,transliteration:`bja m sarva-bhtn viddhi prtha santanam
buddhir buddhimatm asmi tejas tejasvinm aham`,meaning:"O son of Pritha, know that I am the original seed of all existences, the intelligence of the intelligent, and the prowess of all powerful men."},{id:291,verse_number:11,chapter_number:7,text:`    |
    ||-||`,transliteration:`bala balavat chha kma-rga-vivarjitam
dharmviruddho bhtehu kmo smi bharatarhabha`,meaning:"I am the strength of the strong, devoid of passion and desire. I am sex life which is not contrary to religious principles, O lord of the Bharatas [Arjuna]."},{id:292,verse_number:12,chapter_number:7,text:`      |
        ||-||`,transliteration:`ye chaiva sttvik bhv rjass tmash cha ye
matta eveti tn viddhi na tv aha tehu te mayi`,meaning:"Know that all states of beingbe they of goodness, passion or ignoranceare manifested by My energy. I am, in one sense, everything, but I am independent. I am not under the modes of material nature, for they, on the contrary, are within Me."},{id:293,verse_number:13,chapter_number:7,text:`   |
    ||-||`,transliteration:`tribhir gua-mayair bhvair ebhi sarvam ida jagat
mohita nbhijnti mm ebhya param avyayam`,meaning:"Deluded by the three modes [goodness, passion and ignorance], the whole world does not know Me, who am above the modes and inexhaustible."},{id:294,verse_number:14,chapter_number:7,text:`      |
      ||-||`,transliteration:`daiv hy eh gua-may mama my duratyay
mm eva ye prapadyante mym et taranti te`,meaning:"This divine energy of Mine, consisting of the three modes of material nature, is difficult to overcome. But those who have surrendered unto Me can easily cross beyond it."},{id:295,verse_number:15,chapter_number:7,text:`      |
   ||-||`,transliteration:`na m duhkitino mh prapadyante nardham
myaypahita-jn sura bhvam hrit`,meaning:"Those miscreants who are grossly foolish, who are lowest among mankind, whose knowledge is stolen by illusion, and who partake of the atheistic nature of demons do not surrender unto Me."},{id:296,verse_number:16,chapter_number:7,text:`     |
     ||-||`,transliteration:`chatur-vidh bhajante m jan sukitino rjuna
rto jijsur arthrth jn cha bharatarhabha`,meaning:"O best among the Bharatas, four kinds of pious men begin to render devotional service unto Methe distressed, the desirer of wealth, the inquisitive, and he who is searching for knowledge of the Absolute."},{id:297,verse_number:17,chapter_number:7,text:`    |
       ||-||`,transliteration:`teh jn nitya-yukta eka-bhaktir vihihyate
priyo hi jnino tyartham aha sa cha mama priya`,meaning:"Of these, the one who is in full knowledge and who is always engaged in pure devotional service is the best. For I am very dear to him, and he is dear to Me."},{id:298,verse_number:18,chapter_number:7,text:`       |
      ||-||`,transliteration:`udr sarva evaite jn tv tmaiva me matam
sthita sa hi yukttm mm evnuttam gatim`,meaning:"All these devotees are undoubtedly magnanimous souls, but he who is situated in knowledge of Me I consider to be just like My own self. Being engaged in My transcendental service, he is sure to attain Me, the highest and most perfect goal."},{id:299,verse_number:19,chapter_number:7,text:`    |
     ||-||`,transliteration:`bahn janmanm ante jnavn m prapadyate
vsudeva sarvam iti sa mahtm su-durlabha`,meaning:"After many births and deaths, he who is actually in knowledge surrenders unto Me, knowing Me to be the cause of all causes and all that is. Such a great soul is very rare."},{id:300,verse_number:20,chapter_number:7,text:`  |
      ||-||`,transliteration:`kmais tais tair hita-jn prapadyante nya-devat
ta ta niyamam sthya prakity niyat svay`,meaning:"Those whose intelligence has been stolen by material desires surrender unto demigods and follow the particular rules and regulations of worship according to their own natures."},{id:301,verse_number:21,chapter_number:7,text:`       |
     ||-||`,transliteration:`yo yo y y tanu bhakta hraddhayrchitum ichchhati
tasya tasychal hraddh tm eva vidadhmy aham`,meaning:"I am in everyones heart as the Supersoul. As soon as one desires to worship some demigod, I make his faith steady so that he can devote himself to that particular deity."},{id:302,verse_number:22,chapter_number:7,text:`    |
      ||-||`,transliteration:`sa tay hraddhay yuktas tasyrdhanam hate
labhate cha tata kmn mayaiva vihitn hi tn`,meaning:"Endowed with such a faith, he endeavors to worship a particular demigod and obtains his desires. But in actuality these benefits are bestowed by Me alone."},{id:303,verse_number:23,chapter_number:7,text:`    |
     ||-||`,transliteration:`antavat tu phala teh tad bhavaty alpa-medhasm
devn deva-yajo ynti mad-bhakt ynti mm api`,meaning:"Men of small intelligence worship the demigods, and their fruits are limited and temporary. Those who worship the demigods go to the planets of the demigods, but My devotees ultimately reach My supreme planet."},{id:304,verse_number:24,chapter_number:7,text:`    |
   ||-||`,transliteration:`avyakta vyaktim panna manyante mm abuddhaya
para bhvam ajnanto mamvyayam anuttamam`,meaning:"Unintelligent men, who do not know Me perfectly, think that I, the Supreme Personality of Godhead, Krishna, was impersonal before and have now assumed this personality. Due to their small knowledge, they do not know My higher nature, which is imperishable and supreme."},{id:305,verse_number:25,chapter_number:7,text:`    |
    ||-||`,transliteration:`nha prakha sarvasya yoga-my-samvita
mho ya nbhijnti loko mm ajam avyayam`,meaning:"I am never manifest to the foolish and unintelligent. For them I am covered by My internal potency, and therefore they do not know that I am unborn and infallible."},{id:306,verse_number:26,chapter_number:7,text:`    |
        ||-||`,transliteration:`vedha samattni vartamnni chrjuna
bhavihyi cha bhtni m tu veda na kahchana`,meaning:"O Arjuna, as the Supreme Personality of Godhead, I know everything that has happened in the past, all that is happening in the present, and all things that are yet to come. I also know all living entities; but Me no one knows."},{id:307,verse_number:27,chapter_number:7,text:`   |
     ||-||`,transliteration:`ichchh-dveha-samutthena dvandva-mohena bhrata
sarva-bhtni sammoha sarge ynti parantapa`,meaning:"O scion of Bharata, O conqueror of the foe, all living entities are born into delusion, bewildered by the dualities arising from desire and hate."},{id:308,verse_number:28,chapter_number:7,text:`     |
     ||-||`,transliteration:`yeh tv anta-gata ppa jann puya-karmam
te dvandva-moha-nirmukt bhajante m diha-vrat`,meaning:"Persons who have acted piously in previous lives and in this life and whose sinful actions are completely eradicated are freed from the dualities of delusion, and they engage themselves in My service with determination."},{id:309,verse_number:29,chapter_number:7,text:`    |
      ||-||`,transliteration:`jar-maraa-mokhya mm hritya yatanti ye
te brahma tad vidu kitsnam adhytma karma chkhilam`,meaning:"Intelligent persons who are endeavoring for liberation from old age and death take refuge in Me in devotional service. They are actually Brahman because they entirely know everything about transcendental activities."},{id:310,verse_number:30,chapter_number:7,text:`      |
     ||-||`,transliteration:`sdhibhtdhidaiva m sdhiyaja cha ye vidu
praya-kle pi cha m te vidur yukta-chetasa`,meaning:"Those in full consciousness of Me, who know Me, the Supreme Lord, to be the governing principle of the material manifestation, of the demigods, and of all methods of sacrifice, can understand and know Me, the Supreme Personality of Godhead, even at the time of death."}]},{id:8,name:"",name_meaning:"The Yoga of the Imperishable Brahman",chapter_number:8,verses_count:28,summary:"Arjuna asks several questions about Brahman, karma, and the nature of the divine. Krishna answers these and explains how one can attain the supreme abode by remembering Him at the time of death.",verses:[{id:311,verse_number:1,chapter_number:8,text:`  |
      |
     ||-||`,transliteration:`arjuna uvcha
ki tad brahma kim adhytma ki karma puruhottama
adhibhta cha ki proktam adhidaiva kim uchyate`,meaning:"Arjuna inquired: O my Lord, O Supreme Person, what is Brahman? What is the self? What are fruitive activities? What is this material manifestation? And what are the demigods? Please explain this to me."},{id:312,verse_number:2,chapter_number:8,text:`    |
     ||-||`,transliteration:`adhiyaja katha ko tra dehe smin madhusdana
praya-kle cha katha jeyo si niyattmabhi`,meaning:"Who is the Lord of sacrifice, and how does He live in the body, O Madhusudana? And how can those engaged in devotional service know You at the time of death?"},{id:313,verse_number:3,chapter_number:8,text:` |
    |
   ||-||`,transliteration:`hr bhagavn uvcha
akhara brahma parama svabhvo dhytmam uchyate
bhta-bhvodbhava-karo visarga karma-sajita`,meaning:"The Supreme Personality of Godhead said: The indestructible, transcendental living entity is called Brahman, and his eternal nature is called adhyatma, the self. Action pertaining to the development of the material bodies of the living entities is called karma, or fruitive activities."},{id:314,verse_number:4,chapter_number:8,text:`    |
    ||-||`,transliteration:`adhibhta kharo bhva puruhah chdhidaivatam
adhiyajo ham evtra dehe deha-bhit vara`,meaning:"O best of the embodied beings, the physical nature, which is constantly changing, is called adhibhuta [the material manifestation]. The universal form of the Lord, which includes all the demigods, like the sun and moon, is called adhidaiva. And I, the Supreme Lord, represented as the Supersoul in the heart of every embodied being, am called adhiyajna [the Lord of sacrifice]."},{id:315,verse_number:5,chapter_number:8,text:`     |
       ||-||`,transliteration:`anta-kle cha mm eva smaran muktv kalevaram
ya prayti sa mad-bhva yti nsty atra sahaya`,meaning:"And whoever, at the end of his life, quits his body, remembering Me alone, at once attains My nature. Of this there is no doubt."},{id:316,verse_number:6,chapter_number:8,text:`      |
     ||-||`,transliteration:`ya ya vpi smaran bhva tyajaty ante kalevaram
ta tam evaiti kaunteya sad tad-bhva-bhvita`,meaning:"Whatever state of being one remembers when he quits his body, O son of Kunti, that state he will attain without fail."},{id:317,verse_number:7,chapter_number:8,text:`     |
 ||-||`,transliteration:`tasmt sarvehu klehu mm anusmara yudhya cha
mayy arpita-mano-buddhir mm evaihyasy asahayam`,meaning:"Therefore, Arjuna, you should always think of Me in the form of Krishna and at the same time carry out your prescribed duty of fighting. With your activities dedicated to Me and your mind and intelligence fixed on Me, you will attain Me without doubt."},{id:318,verse_number:8,chapter_number:8,text:`   |
     ||-||`,transliteration:`abhysa-yoga-yuktena chetas nnya-gmin
parama puruha divya yti prthnuchintayan`,meaning:"He who meditates on Me as the Supreme Personality of Godhead, his mind constantly engaged in remembering Me, undeviated from the path, he, O Partha, is sure to reach Me."},{id:319,verse_number:9,chapter_number:8,text:` 
 |
 -
   ||-||`,transliteration:`kavi puram anuhsitra
aor aynsam anusmared ya
sarvasya dhtram achintya-rpam
ditya-vara tamasa parastt`,meaning:"One should meditate upon the Supreme Person as the one who knows everything, as He who is the oldest, who is the controller, who is smaller than the smallest, who is the maintainer of everything, who is beyond all material conception, who is inconceivable, and who is always a person. He is luminous like the sun, and He is transcendental, beyond this material nature."},{id:484,verse_number:10,chapter_number:8,text:` 
    |
  
     ||-||`,transliteration:`praya-kle manaschalena
bhakty yukto yoga-balena chaiva
bhruvor madhye pram vehya samyak
sa ta para puruham upaiti divyam`,meaning:"One who, at the time of death, fixes his life air between the eyebrows and, by the strength of yoga, engages himself in remembering the Supreme Lord with full devotion, will certainly attain to the Supreme Personality of Godhead."},{id:485,verse_number:11,chapter_number:8,text:`  
   |
  
    ||-||`,transliteration:`yad akhara veda-vido vadanti
vihanti yad yatayo vta-rg
yad ichchhanto brahmacharya charanti
tat te pada sagrahea pravakhye`,meaning:"Persons who are learned in the Vedas, who utter omkara and who are great sages in the renounced order enter into Brahman. Desiring such perfection, one practices celibacy. I shall now briefly explain to you this process by which one may attain salvation."},{id:486,verse_number:12,chapter_number:8,text:`      |
   ||-||`,transliteration:`sarva-dvri sayamya mano hidi nirudhya cha
mrdhny dhytmana pram sthito yoga-dhram`,meaning:"The yogic situation is that of detachment from all sensual engagements. Closing all the doors of the senses and fixing the mind on the heart and the life air at the top of the head, one establishes himself in yoga."},{id:487,verse_number:13,chapter_number:8,text:`   |
       ||-||`,transliteration:`o ity ekkhara brahma vyharan mm anusmaran
ya prayti tyajan deha sa yti param gatim`,meaning:"After being situated in this yoga practice and vibrating the sacred syllable om, the supreme combination of letters, if one thinks of the Supreme Personality of Godhead and quits his body, he will certainly reach the spiritual planets."},{id:488,verse_number:14,chapter_number:8,text:`      |
     ||-||`,transliteration:`ananya-chet satata yo m smarati nityaha
tasyha sulabha prtha nitya-yuktasya yogina`,meaning:"For one who always remembers Me without deviation, I am easy to obtain, O son of Pritha, because of his constant engagement in devotional service."},{id:489,verse_number:15,chapter_number:8,text:`   |
     ||-||`,transliteration:`mm upetya punar janma dukhlayam ahhvatam
npnuvanti mahtmna sasiddhi param gat`,meaning:"After attaining Me, the great souls, who are yogis in devotion, never return to this temporary world, which is full of miseries, because they have attained the highest perfection."},{id:490,verse_number:16,chapter_number:8,text:`  |
      ||-||`,transliteration:`-brahma-bhuvanl lok punar vartino rjuna
mm upetya tu kaunteya punar janma na vidyate`,meaning:"From the highest planet in the material world down to the lowest, all are places of misery wherein repeated birth and death take place. But one who attains to My abode, O son of Kunti, never takes birth again."},{id:491,verse_number:17,chapter_number:8,text:`  |
    ||-||`,transliteration:`sahasra-yuga-paryantam ahar yad brahmao vidu
rtri yuga-sahasrnt te ho-rtra-vido jan`,meaning:"By human calculation, a thousand ages taken together form the duration of Brahmas one day. And such also is the duration of his night."},{id:492,verse_number:18,chapter_number:8,text:`   |
   ||-||`,transliteration:`avyaktd vyaktaya sarv prabhavanty ahar-game
rtry-game pralyante tatraivvyakta-sajake`,meaning:"At the beginning of Brahmas day, all living entities become manifest from the unmanifest state, and thereafter, when the night falls, they are merged into the unmanifest again."},{id:493,verse_number:19,chapter_number:8,text:`      |
   ||-||`,transliteration:`bhta-grma sa evya bhtv bhtv pralyate
rtry-game vaha prtha prabhavaty ahar-game`,meaning:"Again and again, when Brahmas day arrives, all living entities come into being, and with the arrival of Brahmas night they are helplessly annihilated."},{id:494,verse_number:20,chapter_number:8,text:`  |
       ||-||`,transliteration:`paras tasmt tu bhvo nyo vyakto vyaktt santana
ya sa sarvehu bhtehu nahyatsu na vinahyati`,meaning:"Yet there is another unmanifest nature, which is eternal and is transcendental to this manifested and unmanifested matter. It is supreme and is never annihilated. When all in this world is annihilated, that part remains as it is."},{id:495,verse_number:21,chapter_number:8,text:`    |
       ||-||`,transliteration:`avyakto khara ity uktas tam hu param gatim
ya prpya na nivartante tad dhma parama mama`,meaning:"That which the Vedantists describe as unmanifest and infallible, that which is known as the supreme destination, that place from which, having attained it, one never returnsthat is My supreme abode."},{id:496,verse_number:22,chapter_number:8,text:`      |
     ||-||`,transliteration:`puruha sa para prtha bhakty labhyas tv ananyay
yasynta-sthni bhtni yena sarvam ida tatam`,meaning:"The Supreme Personality of Godhead, who is greater than all, is attainable by unalloyed devotion. Although He is present in His abode, He is all-pervading, and everything is situated within Him."},{id:497,verse_number:23,chapter_number:8,text:`     |
      ||-||`,transliteration:`yatra kle tv anvittim vitti chaiva yogina
prayt ynti ta kla vakhymi bharatarhabha`,meaning:"O best of the Bharatas, I shall now explain to you the different times at which, passing away from this world, the yogi does or does not come back."},{id:498,verse_number:24,chapter_number:8,text:`    |
      ||-||`,transliteration:`agnir jyotir aha hukla ha-ms uttaryaam
tatra prayt gachchhanti brahma brahma-vido jan`,meaning:"Those who know the Supreme Brahman attain that Supreme by passing away from the world during the influence of the fiery god, in the light, at an auspicious moment of the day, during the fortnight of the waxing moon, or during the six months when the sun travels in the north."},{id:499,verse_number:25,chapter_number:8,text:`     |
     ||-||`,transliteration:`dhmo rtris tath kiha ha-ms dakhiyanam
tatra chndramasa jyotir yog prpya nivartate`,meaning:"The mystic who passes away from this world during the smoke, the night, the fortnight of the waning moon, or the six months when the sun passes to the south reaches the moon planet but again comes back."},{id:500,verse_number:26,chapter_number:8,text:`      |
   ||-||`,transliteration:`hukla-kihe gat hy ete jagata hhvate mate
ekay yty anvittim anyayvartate puna`,meaning:"According to Vedic opinion, there are two ways of passing from this worldone in light and one in darkness. When one passes in light, he does not come back; but when one passes in darkness, he returns."},{id:501,verse_number:27,chapter_number:8,text:`      |
    ||-||`,transliteration:`naite sit prtha jnan yog muhyati kahchana
tasmt sarvehu klehu yoga-yukto bhavrjuna`,meaning:"Although the devotees know these two paths, O Arjuna, they are never bewildered. Therefore be always fixed in devotion."},{id:502,verse_number:28,chapter_number:8,text:`   
   |
  
    ||-||`,transliteration:`vedehu yajehu tapasu chaiva
dnehu yat puya-phala pradiham
atyeti tat sarvam ida viditv
yog para sthnam upaiti chdyam`,meaning:"A person who accepts the path of devotional service is not bereft of the results derived from studying the Vedas, performing austere sacrifices, giving charity or pursuing philosophical and fruitive activities. Simply by performing devotional service, he attains all these, and at the end he reaches the supreme eternal abode."}]},{id:9,name:"",name_meaning:"The Yoga of the Kingly Science and the Kingly Secret",chapter_number:9,verses_count:34,summary:"Krishna reveals the 'king of all knowledge,' the most confidential wisdom about His supreme nature. He explains that all beings are in Him, but He is not in them, and describes the path of pure devotion (Bhakti Yoga).",verses:[{id:320,verse_number:1,chapter_number:9,text:` |
     |
    ||-||`,transliteration:`hr bhagavn uvcha
ida tu te guhyatama pravakhymy anasyave
jna vijna-sahita yaj jtv mokhyase hubht`,meaning:"The Supreme Personality of Godhead said: My dear Arjuna, because you are never envious of Me, I shall impart to you this most confidential knowledge and realization, knowing which you shall be relieved of the miseries of material existence."},{id:321,verse_number:2,chapter_number:9,text:`   |
    ||-||`,transliteration:`rja-vidy rja-guhya pavitram idam uttamam
pratyakhvagama dharmya su-sukha kartum avyayam`,meaning:"This knowledge is the king of education, the most secret of all secrets. It is the purest knowledge, and because it gives direct perception of the self by realization, it is the perfection of religion. It is everlasting, and it is joyfully performed."},{id:322,verse_number:3,chapter_number:9,text:`    |
    ||-||`,transliteration:`ahraddadhn puruh dharmasysya parantapa
aprpya m nivartante mityu-sasra-vartmani`,meaning:"Those who are not faithful in this devotional service cannot attain Me, O conqueror of enemies. Therefore they return to the path of birth and death in this material world."},{id:323,verse_number:4,chapter_number:9,text:`    |
     ||-||`,transliteration:`may tatam ida sarva jagad avyakta-mrtin
mat-sthni sarva-bhtni na chha tehv avasthita`,meaning:"By Me, in My unmanifested form, this entire universe is pervaded. All beings are in Me, but I am not in them."},{id:324,verse_number:5,chapter_number:9,text:`       |
     ||-||`,transliteration:`na cha mat-sthni bhtni pahya me yogam aihvaram
bhta-bhin na cha bhta-stho mamtm bhta-bhvana`,meaning:"And yet everything that is created does not rest in Me. Behold My mystic opulence! Although I am the maintainer of all living entities and although I am everywhere, I am not a part of this cosmic manifestation, for My Self is the very source of creation."},{id:325,verse_number:6,chapter_number:9,text:`     |
    ||-||`,transliteration:`yathkha-sthito nitya vyu sarvatra-go mahn
tath sarvi bhtni mat-sthnty upadhraya`,meaning:"Understand that as the mighty wind, blowing everywhere, rests always in the sky, all created beings rest in Me."},{id:326,verse_number:7,chapter_number:9,text:`     |
    ||-||`,transliteration:`sarva-bhtni kaunteya prakiti ynti mmikm
kalpa-khaye punas tni kalpdau visijmy aham`,meaning:"O son of Kunti, at the end of the millennium all material manifestations enter into My nature, and at the beginning of another millennium, by My potency, I create them again."},{id:327,verse_number:8,chapter_number:9,text:`     |
   ||-||`,transliteration:`prakiti svm avahabhya visijmi puna puna
bhta-grmam ima kitsnam avaha prakiter vaht`,meaning:"The whole cosmic order is under Me. Under My will it is automatically manifested again and again, and under My will it is annihilated at the end."},{id:328,verse_number:9,chapter_number:9,text:`       |
   ||-||`,transliteration:`na cha m tni karmi nibadhnanti dhanajaya
udsna-vad snam asakta tehu karmasu`,meaning:"O Dhananjaya, all this work cannot bind Me. I am ever detached from all these material activities, seated as though neutral."},{id:329,verse_number:10,chapter_number:9,text:`    |
   ||-||`,transliteration:`maydhyakhea prakiti syate sa-charcharam
hetunnena kaunteya jagad viparivartate`,meaning:"This material nature, which is one of My energies, is working under My direction, O son of Kunti, producing all moving and nonmoving beings. Under its rule this manifestation is created and annihilated again and again."},{id:330,verse_number:11,chapter_number:9,text:`     |
    ||-||`,transliteration:`avajnanti m mh mnuh tanum hritam
para bhvam ajnanto mama bhta-mahehvaram`,meaning:"Fools deride Me when I descend in the human form. They do not know My transcendental nature as the Supreme Lord of all that be."},{id:331,verse_number:12,chapter_number:9,text:`    |
     ||-||`,transliteration:`moghh mogha-karmo mogha-jn vichetasa
rkhasm sur chaiva prakiti mohin hrit`,meaning:"Those who are thus bewildered are attracted by demonic and atheistic views. In that deluded condition, their hopes for liberation, their fruitive activities, and their culture of knowledge are all defeated."},{id:332,verse_number:13,chapter_number:9,text:`     |
   ||-||`,transliteration:`mahtmnas tu m prtha daiv prakitim hrit
bhajanty ananya-manaso jtv bhtdim avyayam`,meaning:"O son of Pritha, those who are not deluded, the great souls, are under the protection of the divine nature. They are fully engaged in devotional service because they know Me as the Supreme Personality of Godhead, original and inexhaustible."},{id:333,verse_number:14,chapter_number:9,text:`     |
     ||-||`,transliteration:`satata krtayanto m yatantah cha diha-vrat
namasyantah cha m bhakty nitya-yukt upsate`,meaning:"Always chanting My glories, endeavoring with great determination, bowing down before Me, these great souls perpetually worship Me with devotion."},{id:334,verse_number:15,chapter_number:9,text:`    |
    ||-||`,transliteration:`jna-yajena chpy anye yajanto mm upsate
ekatvena pithaktvena bahudh vihvato-mukham`,meaning:"Others, who engage in sacrifice by the cultivation of knowledge, worship the Supreme Lord as the one without a second, as diverse in many, and in the universal form."},{id:335,verse_number:16,chapter_number:9,text:`    |
  ||-||`,transliteration:`aha kratur aha yaja svadhham aham auhadham
mantro ham aham evjyam aham agnir aha hutam`,meaning:"But it is I who am the ritual, I the sacrifice, the offering to the ancestors, the healing herb, the transcendental chant. I am the butter and the fire and the offering."},{id:336,verse_number:17,chapter_number:9,text:`     |
     ||-||`,transliteration:`pitham asya jagato mt dht pitmaha
vedya pavitram okra ik sma yajur eva cha`,meaning:"I am the father of this universe, the mother, the support and the grandsire. I am the object of knowledge, the purifier and the syllable om. I am also the Rig, the Sama and the Yajur Vedas."},{id:337,verse_number:18,chapter_number:9,text:`      |
     ||-||`,transliteration:`gatir bhart prabhu skh nivsa haraa suhit
prabhava pralaya sthna nidhna bjam avyayam`,meaning:"I am the goal, the sustainer, the master, the witness, the abode, the refuge and the most dear friend. I am the creation and the annihilation, the basis of everything, the resting place and the eternal seed."},{id:338,verse_number:19,chapter_number:9,text:`    |
    ||-||`,transliteration:`tapmy aham aha varha nigihmy utsijmi cha
amita chaiva mityuh cha sad asach chham arjuna`,meaning:"O Arjuna, I give heat, and I withhold and send forth the rain. I am immortality, and I am also death personified. Both spirit and matter are in Me."},{id:339,verse_number:20,chapter_number:9,text:`   
   |
  
   ||-||`,transliteration:`trai-vidy m soma-p pta-pp
yajair ihv svar-gati prrthayante
te puyam sdya surendra-lokam
ahnanti divyn divi deva-bhogn`,meaning:"Those who study the Vedas and drink the soma juice, seeking the heavenly planets, worship Me indirectly. Purified of sinful reactions, they take birth on the pious, heavenly planet of Indra, where they enjoy godly delights."},{id:340,verse_number:21,chapter_number:9,text:`    
    |
 
   ||-||`,transliteration:`te ta bhuktv svarga-loka vihla
khe puye martya-loka vihanti
eva tray-dharmam anuprapann
gatgata kma-km labhante`,meaning:"When they have thus enjoyed vast heavenly sense pleasure and the results of their pious activities are exhausted, they return to this mortal planet again. Thus those who seek sense enjoyment by adhering to the principles of the three Vedas achieve only repeated birth and death."},{id:341,verse_number:22,chapter_number:9,text:`     |
    ||-||`,transliteration:`ananyh chintayanto m ye jan paryupsate
teh nitybhiyuktn yoga-khema vahmy aham`,meaning:"But those who always worship Me with exclusive devotion, meditating on My transcendental formto them I carry what they lack, and I preserve what they have."},{id:342,verse_number:23,chapter_number:9,text:`   |
    ||-||`,transliteration:`ye py anya-devat-bhakt yajante hraddhaynvit
te pi mm eva kaunteya yajanty avidhi-prvakam`,meaning:"Those who are devotees of other gods and who worship them with faith actually worship only Me, O son of Kunti, but they do so in a wrong way."},{id:343,verse_number:24,chapter_number:9,text:`       |
     ||-||`,transliteration:`aha hi sarva-yajn bhokt cha prabhur eva cha
na tu mm abhijnanti tattventah chyavanti te`,meaning:"I am the only enjoyer and master of all sacrifices. Therefore, those who do not recognize My true transcendental nature fall down."},{id:344,verse_number:25,chapter_number:9,text:`    |
      ||-||`,transliteration:`ynti deva-vrat devn pitn ynti piti-vrat
bhtni ynti bhtejy ynti mad-yjino pi mm`,meaning:"Those who worship the demigods will take birth among the demigods; those who worship the ancestors go to the ancestors; those who worship ghosts and spirits will take birth among such beings; and those who worship Me will live with Me."},{id:345,verse_number:26,chapter_number:9,text:`        |
   ||-||`,transliteration:`patra puhpa phala toya yo me bhakty prayachchhati
tad aha bhakty-upahitam ahnmi prayattmana`,meaning:"If one offers Me with love and devotion a leaf, a flower, a fruit or water, I will accept it."},{id:346,verse_number:27,chapter_number:9,text:`     |
    ||-||`,transliteration:`yat karohi yad ahnsi yaj juhohi dadsi yat
yat tapasyasi kaunteya tat kuruhva mad-arpaam`,meaning:"Whatever you do, whatever you eat, whatever you offer or give away, and whatever austerities you performdo that, O son of Kunti, as an offering to Me."},{id:347,verse_number:28,chapter_number:9,text:`   |
   ||-||`,transliteration:`hubhhubha-phalair eva mokhyase karma-bandhanai
sannysa-yoga-yukttm vimukto mm upaihyasi`,meaning:"In this way you will be freed from bondage to work and its auspicious and inauspicious results. With your mind fixed on Me in this principle of renunciation, you will be liberated and come to Me."},{id:348,verse_number:29,chapter_number:9,text:`       |
         ||-||`,transliteration:`samo ha sarva-bhtehu na me dvehyo sti na priya
ye bhajanti tu m bhakty mayi te tehu chpy aham`,meaning:"I envy no one, nor am I partial to anyone. I am equal to all. But whoever renders service unto Me in devotion is a friend, is in Me, and I am also a friend to him."},{id:349,verse_number:30,chapter_number:9,text:`    |
      ||-||`,transliteration:`api chet su-durchro bhajate mm ananya-bhk
sdhur eva sa mantavya samyag vyavasito hi sa`,meaning:"Even if one commits the most abominable action, if he is engaged in devotional service he is to be considered saintly because he is properly situated in his determination."},{id:350,verse_number:31,chapter_number:9,text:`     |
      ||-||`,transliteration:`khipra bhavati dharmtm hahvach-chhnti nigachchhati
kaunteya pratijnhi na me bhakta praahyati`,meaning:"He quickly becomes righteous and attains lasting peace. O son of Kunti, declare it boldly that My devotee never perishes."},{id:351,verse_number:32,chapter_number:9,text:`       |
      ||-||`,transliteration:`m hi prtha vyaphritya ye pi syu ppa-yonaya
striyo vaihys tath hdrs te pi ynti par gatim`,meaning:"O son of Pritha, those who take shelter in Me, though they be of lower birthwomen, vaisyas [merchants] and sudras [laborers]can approach the supreme destination."},{id:352,verse_number:33,chapter_number:9,text:`     |
     ||-||`,transliteration:`ki punar brhma puy bhakt rjarhayas tath
anityam asukha lokam ima prpya bhajasva mm`,meaning:"How much more this is so of the righteous brahmanas, the devotees and the saintly kings. Therefore, having come to this temporary, miserable world, engage in loving service unto Me."},{id:353,verse_number:34,chapter_number:9,text:`      |
   ||-||`,transliteration:`man-man bhava mad-bhakto mad-yj m namaskuru
mm evaihyasi yuktvaivam tmna mat-paryaa`,meaning:"Engage your mind always in thinking of Me, become My devotee, offer obeisances to Me and worship Me. Being completely absorbed in Me, surely you will come to Me."}]},{id:10,name:"",name_meaning:"The Yoga of Divine Glories",chapter_number:10,verses_count:42,summary:"Arjuna asks to hear more about Krishna's divine glories. Krishna describes His opulences, explaining that He is the source of all gods and sages and is manifest in the best of everything in creation.",verses:[{id:354,verse_number:1,chapter_number:10,text:` |
       |
    ||-||`,transliteration:`hr bhagavn uvcha
bhya eva mah-bho hiu me parama vacha
yat te ha pryamya vakhymi hita-kmyay`,meaning:"The Supreme Personality of Godhead said: Listen again, O mighty-armed Arjuna. Because you are My dear friend, for your benefit I shall speak to you further, giving knowledge that is better than what I have already explained."},{id:355,verse_number:2,chapter_number:10,text:`       |
     ||-||`,transliteration:`na me vidu sura-ga prabhava na maharhaya
aham dir hi devn maharh cha sarvaha`,meaning:"Neither the hosts of demigods nor the great sages know My origin or opulences, for, in every respect, I am the source of the demigods and sages."},{id:356,verse_number:3,chapter_number:10,text:`     |
     ||-||`,transliteration:`yo mm ajam andi cha vetti loka-mahehvaram
asammha sa martyehu sarva-ppai pramuchyate`,meaning:"He who knows Me as the unborn, as the beginningless, as the Supreme Lord of all the worldshe only, undeluded among men, is freed from all sins."},{id:357,verse_number:4,chapter_number:10,text:`     |
      ||-||`,transliteration:`buddhir jnam asammoha kham satya dama hama
sukha dukha bhavo bhvo bhaya chbhayam eva cha`,meaning:"Intelligence, knowledge, freedom from doubt and delusion, forgiveness, truthfulness, control of the senses, control of the mind, happiness and distress, birth, death, fear, fearlessness..."},{id:358,verse_number:5,chapter_number:10,text:`     |
      ||-||`,transliteration:`ahis samat tuhis tapo dna yaho yaha
bhavanti bhv bhtn matta eva pithag-vidh`,meaning:"Nonviolence, equanimity, satisfaction, austerity, charity, fame and infamyall these various qualities of living beings are created by Me alone."},{id:359,verse_number:6,chapter_number:10,text:`     |
       ||-||`,transliteration:`maharhaya sapta prve chatvro manavas tath
mad-bhv mnas jt yeh loka im praj`,meaning:"The seven great sages and before them the four other great sages and the Manus [progenitors of mankind] come from Me, born from My mind, and all the living beings populating the various planets descend from them."},{id:360,verse_number:7,chapter_number:10,text:`        |
     ||-||`,transliteration:`et vibhti yoga cha mama yo vetti tattvata
so vikampena yogena yujyate ntra sahaya`,meaning:"One who is factually convinced of this opulence and mystic power of Mine engages in unalloyed devotional service; of this there is no doubt."},{id:361,verse_number:8,chapter_number:10,text:`      |
      ||-||`,transliteration:`aha sarvasya prabhavo matta sarva pravartate
iti matv bhajante m budh bhva-samanvit`,meaning:"I am the source of all spiritual and material worlds. Everything emanates from Me. The wise who perfectly know this engage in My devotional service and worship Me with all their hearts."},{id:362,verse_number:9,chapter_number:10,text:`    |
       ||-||`,transliteration:`mach-chitt mad-gata-pr bodhayanta parasparam
kathayantah cha m nitya tuhyanti cha ramanti cha`,meaning:"The thoughts of My pure devotees dwell in Me, their lives are fully devoted to My service, and they derive great satisfaction and bliss from always enlightening one another and conversing about Me."},{id:363,verse_number:10,chapter_number:10,text:`    |
      ||-||`,transliteration:`teh satata-yuktn bhajat prti-prvakam
dadmi buddhi-yoga ta yena mm upaynti te`,meaning:"To those who are constantly devoted to serving Me with love, I give the understanding by which they can come to Me."},{id:364,verse_number:11,chapter_number:10,text:`  |
   ||-||`,transliteration:`tehm evnukamprtham aham ajna-ja tama
nhaymy tma-bhva-stho jna-dpena bhsvat`,meaning:"To show them special mercy, I, dwelling in their hearts, destroy with the shining lamp of knowledge the darkness born of ignorance."},{id:365,verse_number:12,chapter_number:10,text:`  |
       |
    ||-||`,transliteration:`arjuna uvcha
para brahma para dhma pavitra parama bhavn
puruha hhvata divyam di-devam aja vibhum`,meaning:"Arjuna said: You are the Supreme Personality of Godhead, the ultimate abode, the purest, the Absolute Truth. You are the eternal, transcendental, original person, the unborn, the greatest."},{id:366,verse_number:13,chapter_number:10,text:`   |
       ||-||`,transliteration:`hus tvm ihaya sarve devarhir nradas tath
asito devalo vysa svaya chaiva bravhi me`,meaning:"All the great sages such as Narada, Asita, Devala and Vyasa confirm this truth about You, and now You Yourself are declaring it to me."},{id:367,verse_number:14,chapter_number:10,text:`     |
       ||-||`,transliteration:`sarvam etad ita manye yan m vadasi kehava
na hi te bhagavan vyakti vidur dev na dnav`,meaning:"O Krishna, I totally accept as truth all that You have told me. Neither the demigods nor the demons, O Lord, can understand Your personality."},{id:368,verse_number:15,chapter_number:10,text:`    |
    ||-||`,transliteration:`svayam evtmantmna vettha tva puruhottama
bhta-bhvana bhteha deva-deva jagat-pate`,meaning:"Indeed, You alone know Yourself by Your own internal potency, O Supreme Person, origin of all, Lord of all beings, God of gods, Lord of the universe!"},{id:369,verse_number:16,chapter_number:10,text:`   |
   ||-||`,transliteration:`vaktum arhasy ahehea divy hy tma-vibhtaya
ybhir vibhtibhir lokn ims tva vypya tihhasi`,meaning:"Please tell me in detail of Your divine opulences by which You pervade all these worlds."},{id:370,verse_number:17,chapter_number:10,text:`     |
      ||-||`,transliteration:`katha vidym aha yogis tv sad parichintayan
kehu kehu cha bhvehu chintyo si bhagavan may`,meaning:"O Krishna, O supreme mystic, how shall I constantly think of You, and how shall I know You? In what various forms are You to be remembered, O Supreme Personality of Godhead?"},{id:371,verse_number:18,chapter_number:10,text:`     |
      ||-||`,transliteration:`vistaretmano yoga vibhti cha janrdana
bhya kathaya tiptir hi hivato nsti me mitam`,meaning:"O Janardana, again please describe in detail the mystic power of Your opulences. I am never satiated in hearing about You, for the more I hear the more I want to taste the nectar of Your words."},{id:372,verse_number:19,chapter_number:10,text:` |
     |
     ||-||`,transliteration:`hr bhagavn uvcha
hanta te kathayihymi divy hy tma-vibhtaya
prdhnyata kuru-hrehha nsty anto vistarasya me`,meaning:"The Supreme Personality of Godhead said: Yes, I will tell you of My splendorous manifestations, but only of those which are prominent, O Arjuna, for My opulence is limitless."},{id:373,verse_number:20,chapter_number:10,text:`   |
      ||-||`,transliteration:`aham tm gukeha sarva-bhthaya-sthita
aham dih cha madhya cha bhtnm anta eva cha`,meaning:"I am the Supersoul, O Arjuna, seated in the hearts of all living entities. I am the beginning, the middle and the end of all beings."},{id:374,verse_number:21,chapter_number:10,text:`   |
   ||-||`,transliteration:`ditynm aha vihur jyotih ravir ahumn
marchir marutm asmi nakhatrm aha hah`,meaning:"Of the Adityas I am Vishnu, of lights I am the radiant sun, of the Maruts I am Marici, and among the stars I am the moon."},{id:375,verse_number:22,chapter_number:10,text:`    |
    ||-||`,transliteration:`vedn sma-vedo smi devnm asmi vsava
indriy manah chsmi bhtnm asmi chetan`,meaning:"Of the Vedas I am the Sama Veda; of the demigods I am Indra, the king of heaven; of the senses I am the mind; and in living beings I am the living force [consciousness]."},{id:376,verse_number:23,chapter_number:10,text:`    |
    ||-||`,transliteration:`rudr hakarah chsmi vitteho yakha-rakhasm
vasn pvakah chsmi meru hikharim aham`,meaning:"Of all the Rudras I am Lord Shiva, of the Yaksas and Raksasas I am the Lord of wealth [Kuvera], of the Vasus I am fire [Agni], and of mountains I am Meru."},{id:377,verse_number:24,chapter_number:10,text:`       |
    ||-||`,transliteration:`purodhas cha mukhya m viddhi prtha bihaspatim
sennnm aha skanda sarasm asmi sgara`,meaning:"Of priests, O Arjuna, know Me to be the chief, Brihaspati. Of generals I am Kartikeya, and of bodies of water I am the ocean."},{id:378,verse_number:25,chapter_number:10,text:`   |
    ||-||`,transliteration:`maharh bhigur aha girm asmy ekam akharam
yajn japa-yajo smi sthvar himlaya`,meaning:"Of the great sages I am Bhrigu; of vibrations I am the transcendental om. Of sacrifices I am the chanting of the holy names [japa], and of immovable things I am the Himalayas."},{id:379,verse_number:26,chapter_number:10,text:`     |
     ||-||`,transliteration:`ahvattha sarva-vikh devarh cha nrada
gandharv chitraratha siddhn kapilo muni`,meaning:"Of all trees I am the banyan tree, and of the sages among the demigods I am Narada. Of the Gandharvas I am Citraratha, and among perfected beings I am the sage Kapila."},{id:380,verse_number:27,chapter_number:10,text:`   |
     ||-||`,transliteration:`uchchaihravasam ahvn viddhi mm amitodbhavam
airvata gajendr nar cha nardhipam`,meaning:"Of horses know Me to be Uccaihsrava, produced during the churning of the ocean for nectar. Of lordly elephants I am Airavata, and among men I am the monarch."},{id:381,verse_number:28,chapter_number:10,text:`    |
    ||-||`,transliteration:`yudhnm aha vajra dhennm asmi kmadhuk
prajanah chsmi kandarpa sarpm asmi vsuki`,meaning:"Of weapons I am the thunderbolt; among cows I am the surabhi. Of causes for procreation I am Kandarpa, the god of love, and of serpents I am Vasuki."},{id:382,verse_number:29,chapter_number:10,text:`    |
    ||-||`,transliteration:`anantah chsmi ngn varuo ydasm aham
pitm aryam chsmi yama sayamatm aham`,meaning:"Of the many-hooded Nagas I am Ananta, and among the aquatics I am the demigod Varuna. Of departed ancestors I am Aryama, and among the dispensers of law I am Yama, the lord of death."},{id:383,verse_number:30,chapter_number:10,text:`    |
     ||-||`,transliteration:`prahldah chsmi daityn kla kalayatm aham
mig cha migendro ha vainateyah cha pakhim`,meaning:"Among the Daitya demons I am the devoted Prahlada, among subduers I am time, among beasts I am the lion, and among birds I am Garuda."},{id:384,verse_number:31,chapter_number:10,text:`    |
    ||-||`,transliteration:`pavana pavatm asmi rma hastra-bhitm aham
jhah makarah chsmi srotasm asmi jhnav`,meaning:"Of purifiers I am the wind, of the wielders of weapons I am Rama, of fishes I am the shark, and of flowing rivers I am the Ganges."},{id:385,verse_number:32,chapter_number:10,text:`   |
    ||-||`,transliteration:`sargm dir antah cha madhya chaivham arjuna
adhytma-vidy vidyn vda pravadatm aham`,meaning:"Of all creations I am the beginning and the end and also the middle, O Arjuna. Of all sciences I am the spiritual science of the self, and among logicians I am the conclusive truth."},{id:386,verse_number:33,chapter_number:10,text:`    |
    ||-||`,transliteration:`akharm a-kro smi dvandva smsikasya cha
aham evkhaya klo dhtha vihvato-mukha`,meaning:"Of letters I am the letter A, and among compound words I am the dual compound. I am also inexhaustible time, and of creators I am Brahma."},{id:387,verse_number:34,chapter_number:10,text:`   |
      ||-||`,transliteration:`mityu sarva-harah chham udbhavah cha bhavihyatm
krti hrr vk cha nr smitir medh dhiti kham`,meaning:"I am all-devouring death, and I am the generating principle of all that is yet to be. Among women I am fame, fortune, fine speech, memory, intelligence, steadfastness and patience."},{id:388,verse_number:35,chapter_number:10,text:`     |
   ||-||`,transliteration:`bihat-sma tath smn gyatr chhandasm aham
msn mrga-hrho ham itn kusumkara`,meaning:"Of the hymns in the Sama Veda I am the Brihat-sama, and of poetry I am the Gayatri. Of months I am Margasirsa [November-December], and of seasons I am flower-bearing spring."},{id:389,verse_number:36,chapter_number:10,text:`   |
    ||-||`,transliteration:`dyta chhalayatm asmi tejas tejasvinm aham
jayo smi vyavasyo smi sattva sattvavatm aham`,meaning:"I am also the gambling of cheats, and of the splendid I am the splendor. I am victory, I am adventure, and I am the strength of the strong."},{id:390,verse_number:37,chapter_number:10,text:`    |
    ||-||`,transliteration:`vihn vsudevo smi pavn dhanajaya
munnm apy aha vysa kavnm uhan kavi`,meaning:"Of the descendants of Vrishni I am Vasudeva, and of the Pandavas I am Arjuna. Of the sages I am Vyasa, and among great thinkers I am Usana."},{id:391,verse_number:38,chapter_number:10,text:`    |
     ||-||`,transliteration:`dao damayatm asmi ntir asmi jighatm
mauna chaivsmi guhyn jna jnavatm aham`,meaning:"Among all means of suppressing lawlessness I am punishment, and of those who seek victory I am morality. Of secret things I am silence, and of the wise I am the wisdom."},{id:392,verse_number:39,chapter_number:10,text:`    |
      ||-||`,transliteration:`yach chpi sarva-bhtn bja tad aham arjuna
na tad asti vin yat syn may bhta charcharam`,meaning:"Furthermore, O Arjuna, I am the generating seed of all existences. There is no beingmoving or nonmovingthat can exist without Me."},{id:393,verse_number:40,chapter_number:10,text:`     |
     ||-||`,transliteration:`nnto sti mama divyn vibhtn parantapa
eha tddehata prokto vibhter vistaro may`,meaning:"O mighty conqueror of enemies, there is no end to My divine manifestations. What I have spoken to you is but a mere indication of My infinite opulences."},{id:394,verse_number:41,chapter_number:10,text:`   |
    ||-||`,transliteration:`yad yad vibhtimat sattva hrmad rjitam eva v
tat tad evvagachchha tva mama tejo-ha-sambhavam`,meaning:"Know that all opulent, beautiful and glorious creations spring from but a spark of My splendor."},{id:395,verse_number:42,chapter_number:10,text:`     |
    ||-||`,transliteration:`athav bahunaitena ki jtena tavrjuna
vihabhyham ida kitsnam ekhena sthito jagat`,meaning:"But what need is there, Arjuna, for all this detailed knowledge? With a single fragment of Myself I pervade and support this entire universe."}]},{id:11,name:"",name_meaning:"The Yoga of the Vision of the Cosmic Form",chapter_number:11,verses_count:55,summary:"Arjuna requests to see Krishna's universal form (Vishvarupa). Krishna grants him divine vision and reveals His awe-inspiring, cosmic form, which contains all universes and all beings. Overwhelmed, Arjuna offers prayers and asks Krishna to return to His gentle, four-armed form.",verses:[{id:396,verse_number:1,chapter_number:11,text:`  |
   |
     ||-||`,transliteration:`arjuna uvcha
mad-anugrahya parama guhyam adhytma-sajitam
yat tvayokta vachas tena moho ya vigato mama`,meaning:"Arjuna said: By my hearing the instructions You have kindly given me about these most confidential spiritual subjects, my illusion has now been dispelled."},{id:397,verse_number:2,chapter_number:11,text:`      |
    ||-||`,transliteration:`bhavpyayau hi bhtn hrutau vistaraho may
tvatta kamala-patrkha mhtmyam api chvyayam`,meaning:"O lotus-eyed one, I have heard from You in detail about the appearance and disappearance of every living entity and have realized Your inexhaustible glories."},{id:398,verse_number:3,chapter_number:11,text:`   |
    ||-||`,transliteration:`evam etad yathttha tvam tmna paramehvara
drahum ichchhmi te rpam aihvara puruhottama`,meaning:"O greatest of all personalities, O supreme form, though I see You here before me in Your actual position, as You have described Yourself, I wish to see how You have entered into this cosmic manifestation. I want to see that form of Yours."},{id:399,verse_number:4,chapter_number:11,text:`      |
     ||-||`,transliteration:`manyase yadi tach chhakya may drahum iti prabho
yogehvara tato me tva darhaytmnam avyayam`,meaning:"If You think that I am able to behold Your cosmic form, O my Lord, O master of all mystic power, then kindly show me that universal Self."},{id:400,verse_number:5,chapter_number:11,text:` |
      |
    ||-||`,transliteration:`hr bhagavn uvcha
pahya me prtha rpi hataho tha sahasraha
nn-vidhni divyni nn-varkitni cha`,meaning:"The Supreme Personality of Godhead said: My dear Arjuna, O son of Pritha, see now My opulences, hundreds of thousands of varied divine and multicolored forms."},{id:401,verse_number:6,chapter_number:11,text:`  |
   ||-||`,transliteration:`pahydityn vasn rudrn ahvinau marutas tath
bahny adiha-prvi pahyhcharyi bhrata`,meaning:"O best of the Bharatas, see here the different manifestations of Adityas, Vasus, Rudras, Asvini-kumaras and all the other demigods. Behold the many wonderful things which no one has ever seen or heard of before."},{id:402,verse_number:7,chapter_number:11,text:`    |
    ||-||`,transliteration:`ihaika-stha jagat kitsna pahydya sa-charcharam
mama dehe gukeha yach chnyad drahum ichchhasi`,meaning:"O Arjuna, whatever you wish to see, behold at once in this body of Mine! This universal form can show you whatever you now desire to see and whatever you may want to see in the future. Everythingmoving and nonmovingis here completely, in one place."},{id:403,verse_number:8,chapter_number:11,text:`      |
       ||-||`,transliteration:`na tu m hakyase drahum anenaiva sva-chakhuh
divya dadmi te chakhu pahya me yogam aihvaram`,meaning:"But you cannot see Me with your present eyes. Therefore I give you divine eyes. Behold My mystic opulence!"},{id:404,verse_number:9,chapter_number:11,text:`  |
    |
    ||-||`,transliteration:`sajaya uvcha
evam uktv tato rjan mah-yogehvaro hari
darhaym sa prthya parama rpam aihvaram`,meaning:"Sanjaya said: O King, having spoken thus, the Supreme Lord of all mystic power, the Personality of Godhead, displayed His universal form to Arjuna."},{id:405,verse_number:10,chapter_number:11,text:` |
  ||-||`,transliteration:`aneka-vaktra-nayanam anekdbhuta-darhanam
aneka-divybharaa divynekodyatyudham`,meaning:"Arjuna saw in that universal form unlimited mouths, unlimited eyes, unlimited wonderful visions. The form was decorated with many celestial ornaments and bore many divine upraised weapons."},{id:406,verse_number:11,chapter_number:11,text:`  |
   ||-||`,transliteration:`divya-mlymbara-dhara divya-gandhnulepanam
sarvhcharya-maya devam ananta vihvato-mukham`,meaning:"He wore celestial garlands and garments, and many divine scents were smeared over His body. All was wondrous, brilliant, unlimited, all-expanding."},{id:407,verse_number:12,chapter_number:11,text:`   |
      ||-||`,transliteration:`divi srya-sahasrasya bhaved yugapad utthit
yadi bh sadih s syd bhsas tasya mahtmana`,meaning:"If hundreds of thousands of suns were to rise at once into the sky, their radiance might resemble the effulgence of the Supreme Person in that universal form."},{id:408,verse_number:13,chapter_number:11,text:`   |
   ||-||`,transliteration:`tatraika-stha jagat kitsna pravibhaktam anekadh
apahyad deva-devasya harre pavas tad`,meaning:"At that time Arjuna could see in the universal form of the Lord the unlimited expansions of the universe situated in one place although divided into many, many thousands."},{id:409,verse_number:14,chapter_number:11,text:`     |
    ||-||`,transliteration:`tata sa vismayviho hiha-rom dhanajaya
praamya hiras deva kitjalir abhhata`,meaning:"Then, bewildered and astonished, his hair standing on end, Arjuna bowed his head to offer obeisances and with folded hands began to pray to the Supreme Lord."},{id:410,verse_number:15,chapter_number:11,text:`  |
   
  |
 
   ||-||`,transliteration:`arjuna uvcha
pahymi devs tava deva dehe
sarvs tath bhta-viheha-saghn
brahmam ha kamalsana-stham
ihh cha sarvn uragh cha divyn`,meaning:"Arjuna said: My dear Lord Krishna, I see assembled in Your body all the demigods and various other living entities. I see Brahma sitting on the lotus flower, as well as Lord Shiva and all the sages and divine serpents."},{id:411,verse_number:16,chapter_number:11,text:`
   |
    
   ||-||`,transliteration:`aneka-bhdara-vaktra-netra
pahymi tv sarvato nanta-rpam
nnta na madhya na punas tavdi
pahymi vihvehvara vihva-rpa`,meaning:"O Lord of the universe, O universal form, I see in Your body many, many arms, bellies, mouths and eyes, expanded everywhere, without limit. I see in You no end, no middle and no beginning."},{id:412,verse_number:17,chapter_number:11,text:`   
   |
   
 ||-||`,transliteration:`kirina gadina chakria cha
tejo-rhi sarvato dptimantam
pahymi tv durnirkhya samantd
dptnalrka-dyutim aprameyam`,meaning:"Your form is difficult to see because of its glaring effulgence, spreading on all sides, like blazing fire or the immeasurable radiance of the sun. Yet I see this glowing form everywhere, adorned with various crowns, clubs and discs."},{id:413,verse_number:18,chapter_number:11,text:`  
    |
 
    ||-||`,transliteration:`tvam akhara parama veditavya
tvam asya vihvasya para nidhnam
tvam avyaya hhvata-dharma-gopt
santanas tva puruho mato me`,meaning:"You are the supreme primal objective. You are the ultimate resting place of all this universe. You are inexhaustible, and You are the oldest. You are the maintainer of the eternal religion, the Personality of Godhead. This is my opinion."},{id:414,verse_number:19,chapter_number:11,text:`
  |
  
   ||-||`,transliteration:`andi-madhyntam ananta-vryam
ananta-bhu hahi-srya-netram
pahymi tv dpta-hutha-vaktra
sva-tejas vihvam ida tapantam`,meaning:"You are without origin, middle or end. Your glory is unlimited. You have numberless arms, and the sun and moon are Your eyes. I see You with blazing fire coming forth from Your mouth, burning this entire universe by Your own radiance."},{id:415,verse_number:20,chapter_number:11,text:` 
    |
  
   ||-||`,transliteration:`dyv -pithivyor idam antara hi
vypta tvayaikena dihah cha sarv
dihvdbhuta rpam ugra taveda
loka-traya pravyathita mahtman`,meaning:"Although You are one, You spread throughout the sky and the planets and all space between. O great one, seeing this wondrous and terrible form, all the planetary systems are perturbed."},{id:416,verse_number:21,chapter_number:11,text:`    
   |
 
    ||-||`,transliteration:`am hi tv sura-sagh vihanti
kechid bht prjalayo gianti
svastty uktv maharhi-siddha-sagh
stuvanti tv stutibhi puhkalbhi`,meaning:"All the hosts of demigods are surrendering before You and entering into You. Some of them, very much afraid, are offering prayers with folded hands. Hosts of great sages and perfected beings, crying All peace! are praying to You by singing the Vedic hymns."},{id:417,verse_number:22,chapter_number:11,text:`    
  |

    ||-||`,transliteration:`rudrdity vasavo ye cha sdhy
vihve hvinau marutah chohmaph cha
gandharva-yakhsura-siddha-sagh
vkhante tv vismith chaiva sarve`,meaning:"All the various manifestations of Lord Shiva, the Adityas, the Vasus, the Sadhyas, the Visvedevas, the two Asvis, the Maruts, the forefathers, the Gandharvas, the Yaksas, the Asuras and the perfected demigods are beholding You in wonder."},{id:418,verse_number:23,chapter_number:11,text:`  
  |
 
   ||-||`,transliteration:`rpa mahat te bahu-vaktra-netra
mah-bho bahu-bhru-pdam
bahdara bahu-dahr-karla
dihv lok pravyathits tathham`,meaning:"O mighty-armed one, all the planets with their demigods are perturbed at seeing Your great form, with its many faces, eyes, arms, thighs, legs, and bellies and Your many terrible teeth; and as they are perturbed, so am I."},{id:419,verse_number:24,chapter_number:11,text:` 
  |
   
      ||-||`,transliteration:`nabha-spiha dptam aneka-vara
vyttnana dpta-vihla-netram
dihv hi tv pravyathitntar-tm
dhiti na vindmi hama cha viho`,meaning:"O all-pervading Vishnu, seeing You with Your many radiant colors touching the sky, Your gaping mouths, and Your great glowing eyes, my mind is perturbed by fear. I can no longer maintain my steadiness or equilibrium of mind."},{id:420,verse_number:25,chapter_number:11,text:`   
  |
      
   ||-||`,transliteration:`dahr-karlni cha te mukhni
dihvaiva klnala-sannibhni
diho na jne na labhe cha harma
prasda deveha jagan-nivsa`,meaning:"O Lord of lords, O refuge of the worlds, please be gracious to me. I cannot keep my balance seeing thus Your blazing deathlike faces and awful teeth. In all directions I am bewildered."},{id:421,verse_number:26,chapter_number:11,text:`    
  |
  
  ||-||`,transliteration:`am cha tv dhitarhrasya putr
sarve sahaivvani-pla-saghai
bhhmo droa sta-putras tathsau
sahsmadyair api yodha-mukhyai`,meaning:"All the sons of Dhritarashtra, along with their allied kings, and Bhishma, Drona, Karnaand our chief soldiers alsoare rushing into Your fearful mouths."},{id:422,verse_number:27,chapter_number:11,text:`   
  |
 
  ||-||`,transliteration:`vaktri te tvaram vihanti
dahr-karlni bhaynakni
kechid vilagn dahanntarehu
sandihyante chritair uttamgai`,meaning:"And some I see trapped with their heads smashed between Your teeth."},{id:423,verse_number:28,chapter_number:11,text:`  
  |
  
  ||-||`,transliteration:`yath nadn bahavo mbu-veg
samudram evbhimukh dravanti
tath tavm nara-loka-vr
vihanti vaktry abhivijvalanti`,meaning:"As the many waves of the rivers flow into the ocean, so do all these great warriors enter Your blazing mouths."},{id:424,verse_number:29,chapter_number:11,text:`   
   |
   
   ||-||`,transliteration:`yath pradpta jvalana patag
vihanti nhya samiddha-veg
tathaiva nhya vihanti loks
tavpi vaktri samiddha-veg`,meaning:"I see all people rushing full speed into Your mouths, as moths dash to destruction in a blazing fire."},{id:425,verse_number:30,chapter_number:11,text:`  
 |
 
   ||-||`,transliteration:`lelihyase grasamna samantl
lokn samagrn vadanair jvaladbhi
tejobhir prya jagat samagra
bhsas tavogr pratapanti viho`,meaning:"O Vishnu, I see You devouring all people from all sides with Your flaming mouths. Covering all the universe with Your effulgence, You are manifest with terrible, scorching rays."},{id:426,verse_number:31,chapter_number:11,text:`   
    |
 
     ||-||`,transliteration:`khyhi me ko bhavn ugra-rpo
namo stu te deva-vara prasda
vijtum ichchhmi bhavantam dya
na hi prajnmi tava pravittim`,meaning:"O Lord of lords, so fierce of form, please tell me who You are. I offer my obeisances unto You; please be gracious to me. You are the primal Lord. I want to know about You, for I do not know what Your mission is."},{id:427,verse_number:32,chapter_number:11,text:` |
 
  |
    
   ||-||`,transliteration:`hr bhagavn uvcha
klo smi loka-khaya-kit praviddho
lokn samhartum iha pravitta
ite pi tv na bhavihyanti sarve
ye vasthit pratyankehu yodh`,meaning:"The Supreme Personality of Godhead said: Time I am, the great destroyer of the worlds, and I have come here to destroy all people. With the exception of you [the Pandavas], all the soldiers here on both sides will be slain."},{id:428,verse_number:33,chapter_number:11,text:`  
    |
  
   ||-||`,transliteration:`tasmt tvam uttihha yaho labhasva
jitv hatrn bhukhva rjya samiddham
 Mayaivaita nihat prvam eva
 nimitta-mtra bhava savya-schin`,meaning:"Therefore get up. Prepare to fight and win glory. Conquer your enemies and enjoy a flourishing kingdom. They are already put to death by My arrangement, and you, O Savyasaci, can be but an instrument in the fight."},{id:429,verse_number:34,chapter_number:11,text:`     
   |
    
    ||-||`,transliteration:`droa cha bhhma cha jayadratha cha
kara tathnyn api yodha-vrn
may hats tva jahi m vyathihh
yudhyasva jetsi rae sapatnn`,meaning:"Drona, Bhishma, Jayadratha, Karna and the other great warriors have already been destroyed by Me. Therefore, kill them and do not be disturbed. Simply fight, and you will vanquish your enemies in battle."},{id:430,verse_number:35,chapter_number:11,text:`  |
  
  |
   
   ||-||`,transliteration:`sajaya uvcha
etach chhrutv vachana kehavasya
kitjalir vepamna kir
namaskitv bhya evha kiha
sa-gadgada bhta-bhta praamya`,meaning:"Sanjaya said to Dhritarashtra: O King, after hearing these words from the Supreme Personality of Godhead, the trembling Arjuna offered obeisances with folded hands again and again. He spoke in a faltering voice, out of great fear."},{id:431,verse_number:36,chapter_number:11,text:`  |
   
  |
   
    ||-||`,transliteration:`arjuna uvcha
sthne hihkeha tava prakrty
jagat prahihyaty anurajyate cha
rakhsi bhtni diho dravanti
sarve namasyanti cha siddha-sagh`,meaning:"Arjuna said: O master of the senses, the world becomes joyful upon hearing Your name, and thus everyone becomes attached to You. Although the perfected beings offer You their respectful homage, the demons are afraid, and they flee here and there. All this is rightly done."},{id:432,verse_number:37,chapter_number:11,text:`   
  |
  
   ||-||`,transliteration:`kasmch cha te na nameran mahtman
garyase brahmao py di-kartre
ananta deveha jagan-nivsa
tvam akhara sad-asat tat para yat`,meaning:"O great one, who stands above even Brahma, You are the original master. Why should they not offer their respectful obeisances unto You? O limitless one, God of gods, refuge of the universe! You are the invincible source, the cause of all causes, transcendental to this material manifestation."},{id:433,verse_number:38,chapter_number:11,text:`  
    |
     
   ||-||`,transliteration:`tvam di-deva puruha puras
tvam asya vihvasya para nidhnam
vettsi vedya cha para cha dhma
tvay tata vihvam ananta-rpa`,meaning:"You are the original Personality of Godhead, the oldest, the ultimate sanctuary of this manifested cosmic world. You are the knower of everything, and You are all that is knowable. You are the supreme refuge, above the material modes. O limitless form! This whole cosmic manifestation is pervaded by You!"},{id:434,verse_number:39,chapter_number:11,text:` 
  |
  
    ||-||`,transliteration:`vyur yamo gnir varua hahka
prajpatis tva prapitmahah cha
namo namas te stu sahasra-kitva
punah cha bhyo pi namo namas te`,meaning:"You are air, and You are the supreme controller! You are fire, You are water, and You are the moon! You are Brahma, the first living creature, and You are the great-grandfather. I therefore offer my respectful obeisances unto You a thousand times, and again and yet again!"},{id:435,verse_number:40,chapter_number:11,text:`  
     |

    ||-||`,transliteration:`nama purastd atha pihhatas te
namo stu te sarvata eva sarva
ananta-vrymita-vikramas tva
sarva sampnohi tato si sarva`,meaning:"Obeisances to You from the front, from behind and from all sides! O unbounded power, You are the master of limitless might! You are all-pervading, and thus You are everything!"},{id:436,verse_number:41,chapter_number:11,text:`   
      |
  
   ||-||`,transliteration:`sakheti matv prasabha yad ukta
he kiha he ydava he sakheti
ajanat mahimna taveda
may pramdt praayena vpi`,meaning:"Thinking of You as my friend, I have rashly addressed You O Krishna, O Yadava, O my friend, not knowing Your glories. Please forgive whatever I may have done in madness or in love."},{id:437,verse_number:42,chapter_number:11,text:`
 |
 
  ||-||`,transliteration:`yach chvahsrtham asat-kito si
vihra-hayysana-bhojanehu
eko thavpy achyuta tat-samakha
tat khmaye tvm aham aprameyam`,meaning:"I have dishonored You many times, jesting as we relaxed, lay on the same bed, or sat or ate together, sometimes alone and sometimes in front of many friends. O infallible one, please excuse me for all those offenses."},{id:438,verse_number:43,chapter_number:11,text:`  
   |
  
 ||-||`,transliteration:`pitsi lokasya charcharasya
tvam asya pjyah cha gurur garyn
na tvat-samo sty abhyadhika kuto nyo
loka-traye py apratima-prabhva`,meaning:"You are the father of this complete cosmic manifestation, of the moving and the nonmoving. You are its worshipable chief, the supreme spiritual master. No one is greater than You, nor can anyone be one with You. How then could there be anyone greater than You within the three worlds, O Lord of immeasurable power?"},{id:439,verse_number:44,chapter_number:11,text:`  
  |
   
    ||-||`,transliteration:`tasmt praamya praidhya kya
prasdaye tvm aham ham yam
piteva putrasya sakheva sakhyu
priya priyyrhasi deva sohum`,meaning:"You are the Supreme Lord, to be worshiped by every living being. Thus I fall down to offer You my respectful obeisances and ask Your mercy. As a father tolerates the impudence of his son, or a friend tolerates the impertinence of a friend, or a husband tolerates the familiarity of his wife, please tolerate the wrongs I may have done You."},{id:440,verse_number:45,chapter_number:11,text:`  
     |
    
   ||-||`,transliteration:`adiha-prva hihito smi dihv
bhayena cha pravyathita mano me
tad eva me darhaya deva rpa
prasda deveha jagan-nivsa`,meaning:"After seeing this universal form, which I have never seen before, I am gladdened, but at the same time my mind is disturbed with fear. Therefore please bestow Your grace upon me and reveal again Your form as the Personality of Godhead, O Lord of lords, O abode of the universe."},{id:441,verse_number:46,chapter_number:11,text:`  
    |
  
   ||-||`,transliteration:`kirina gadina chakra-hastam
ichchhmi tv drahum aha tathaiva
tenaiva rpea chatur-bhujena
sahasra-bho bhava vihva-mrte`,meaning:"O universal form, O thousand-armed Lord, I wish to see You in Your four-armed form, with helmeted head and with club, wheel, conch and lotus flower in Your hands. I long to see You in that form."},{id:442,verse_number:47,chapter_number:11,text:` |
  
   |
 
    ||-||`,transliteration:`hr bhagavn uvcha
may prasannena tavrjuneda
rpa para darhitam tma-yogt
tejo-maya vihvam anantam dya
yan me tvad-anyena na diha-prvam`,meaning:"The Supreme Personality of Godhead said: My dear Arjuna, happily have I shown you, by My internal potency, this supreme universal form within the material world. No one before you has ever seen this primal form, unlimited and full of glaring effulgence."},{id:443,verse_number:48,chapter_number:11,text:`  
    |
   
   ||-||`,transliteration:`na veda-yajdhyayanair na dnair
na cha kriybhir na tapobhir ugrai
eva-rpa hakya aha ni-loke
drahu tvad-anyena kuru-pravra`,meaning:"O best of the Kuru warriors, no one before you has ever seen this universal form of Mine, for neither by studying the Vedas, nor by performing sacrifices, nor by charity, nor by pious activities, nor by severe penances can I be seen in this form in the material world."},{id:444,verse_number:49,chapter_number:11,text:`     
   |
  
    ||-||`,transliteration:`m te vyath m cha vimha-bhvo
dihv rpa ghoram di mamedam
vyapeta-bh prta-man punas tva
tad eva me rpam ida prapahya`,meaning:"You have been perturbed and bewildered by seeing this horrible feature of Mine. Now let it be finished. My devotee, be free again from all disturbances. With a peaceful mind you can now see the form you desire."},{id:445,verse_number:50,chapter_number:11,text:`  |
 
    |
  
   ||-||`,transliteration:`sajaya uvcha
ity arjuna vsudevas tathoktv
svaka rpa darhaym sa bhya
hvsaym sa cha bhtam ena
bhtv puna saumya-vapur mahtm`,meaning:"Sanjaya said to Dhritarashtra: The Supreme Personality of Godhead, Krishna, having spoken thus to Arjuna, displayed His real four-armed form and at last showed His two-armed form, thus encouraging the fearful Arjuna."},{id:446,verse_number:51,chapter_number:11,text:`  |
      |
     ||-||`,transliteration:`arjuna uvcha
dihveda mnuha rpa tava saumya janrdana
idnm asmi savitta sa-chet prakiti gata`,meaning:"When Arjuna thus saw Krishna in His original form, he said: O Janardana, seeing this humanlike form, so very beautiful, I am now composed in mind, and I am restored to my original nature."},{id:447,verse_number:52,chapter_number:11,text:` |
    |
     ||-||`,transliteration:`hr bhagavn uvcha
su-durdarham ida rpa dihavn asi yan mama
dev apy asya rpasya nitya darhana-kkhia`,meaning:"The Supreme Personality of Godhead said: My dear Arjuna, this form of Mine you are now seeing is very difficult to behold. Even the demigods are ever seeking the opportunity to see this form, which is so dear."},{id:448,verse_number:53,chapter_number:11,text:`       |
      ||-||`,transliteration:`nha vedair na tapas na dnena na chejyay
hakya eva-vidho drahu dihavn asi m yath`,meaning:"The form you are seeing with your transcendental eyes cannot be understood simply by studying the Vedas, nor by undergoing serious penances, nor by charity, nor by worship. It is not by these means that one can see Me as I am."},{id:449,verse_number:54,chapter_number:11,text:`    |
       ||-||`,transliteration:`bhakty tv ananyay hakya aham eva-vidho rjuna
jtu drahu cha tattvena pravehu cha parantapa`,meaning:"My dear Arjuna, only by undivided devotional service can I be understood as I am, standing before you, and can thus be seen directly. Only in this way can you enter into the mysteries of My understanding."},{id:450,verse_number:55,chapter_number:11,text:`   |
      ||-||`,transliteration:`mat-karma-kin mat-paramo mad-bhakta saga-varjita
nirvaira sarva-bhtehu ya sa mm eti pava`,meaning:"My dear Arjuna, he who engages in My pure devotional service, free from the contaminations of fruitive activities and mental speculation, he who works for Me, who makes Me the supreme goal of his life, and who is friendly to every living beinghe certainly comes to Me."}]},{id:12,name:"",name_meaning:"The Yoga of Devotion",chapter_number:12,verses_count:20,summary:"Arjuna asks whether it is better to worship Krishna's personal form or the impersonal, unmanifest Brahman. Krishna declares that the path of devotion to His personal form is the highest and easiest, and He describes the qualities of His dear devotees.",verses:[{id:451,verse_number:1,chapter_number:12,text:`  |
     |
     ||-||`,transliteration:`arjuna uvcha
eva satata-yukt ye bhakts tv paryupsate
ye chpy akharam avyakta teh ke yoga-vittam`,meaning:"Arjuna inquired: Which are considered to be more perfect, those who are always properly engaged in Your devotional service or those who worship the impersonal Brahman, the unmanifested?"},{id:452,verse_number:2,chapter_number:12,text:` |
      |
     ||-||`,transliteration:`hr bhagavn uvcha
mayy vehya mano ye m nitya-yukt upsate
hraddhay parayopets te me yuktatam mat`,meaning:"The Supreme Personality of Godhead said: Those who fix their minds on My personal form and are always engaged in worshiping Me with great and transcendental faith are considered by Me to be most perfect."},{id:453,verse_number:3,chapter_number:12,text:`   |
    ||-||`,transliteration:`ye tv akharam anirdehyam avyakta paryupsate
sarvatra-gam achintya cha ka-stham achala dhruvam`,meaning:"But those who fully worship the unmanifested, that which lies beyond the perception of the senses, the all-pervading, inconceivable, unchanging, fixed and immovablethe impersonal conception of the Absolute Truth..."},{id:454,verse_number:4,chapter_number:12,text:`   |
     ||-||`,transliteration:`sanniyamyendriya-grma sarvatra sama-buddhaya
te prpnuvanti mm eva sarva-bhta-hite rat`,meaning:"...by controlling the various senses and being equally disposed to everyone, such persons, engaged in the welfare of all, at last achieve Me."},{id:455,verse_number:5,chapter_number:12,text:` |
    ||-||`,transliteration:`kleho dhikataras tehm avyaktsakta-chetasm
avyakt hi gatir dukha dehavadbhir avpyate`,meaning:"For those whose minds are attached to the unmanifested, impersonal feature of the Supreme, advancement is very troublesome. To make progress in that discipline is always difficult for those who are embodied."},{id:456,verse_number:6,chapter_number:12,text:`       |
     ||-||`,transliteration:`ye tu sarvi karmi mayi sannyasya mat-par
ananyenaiva yogena m dhyyanta upsate`,meaning:"But those who worship Me, giving up all their activities unto Me and being devoted to Me without deviation, engaged in devotional service and always meditating upon Me..."},{id:457,verse_number:7,chapter_number:12,text:`   |
   ||-||`,transliteration:`tehm aha samuddhart mityu-sasra-sgart
bhavmi na chirt prtha mayy vehita-chetasm`,meaning:"...having fixed their minds upon Me, O son of Prithafor them I am the swift deliverer from the ocean of birth and death."},{id:458,verse_number:8,chapter_number:12,text:`      |
      ||-||`,transliteration:`mayy eva mana dhatsva mayi buddhi nivehaya
nivasihyasi mayy eva ata rdhva na sahaya`,meaning:"Just fix your mind upon Me, the Supreme Personality of Godhead, and engage all your intelligence in Me. Thus you will live in Me always, without a doubt."},{id:459,verse_number:9,chapter_number:12,text:`       |
    ||-||`,transliteration:`atha chitta samdhtu na haknohi mayi sthiram
abhysa-yogena tato mm ichchhptu dhanajaya`,meaning:"My dear Arjuna, O winner of wealth, if you cannot fix your mind upon Me without deviation, then follow the regulative principles of bhakti-yoga. In this way develop a desire to attain Me."},{id:460,verse_number:10,chapter_number:12,text:`   |
   ||-||`,transliteration:`abhyse py asamartho si mat-karma-paramo bhava
mad-artham api karmi kurvan siddhim avpsyasi`,meaning:"If you cannot practice the regulations of bhakti-yoga, then just try to work for Me, because by working for Me you will come to the perfect stage."},{id:461,verse_number:11,chapter_number:12,text:`   |
    ||-||`,transliteration:`athaitad apy ahakto si kartu mad-yogam hrita
sarva-karma-phala-tyga tata kuru yattmavn`,meaning:"If, however, you are unable to work in this consciousness of Me, then try to act giving up all results of your work and try to be self-situated."},{id:462,verse_number:12,chapter_number:12,text:`    |
 ||-||`,transliteration:`hreyo hi jnam abhysj jnd dhyna vihihyate
dhynt karma-phala-tygas tygch chhntir anantaram`,meaning:"If you cannot take to this practice, then engage yourself in the cultivation of knowledge. Better than knowledge, however, is meditation, and better than meditation is renunciation of the fruits of action, for by such renunciation one can attain peace of mind."},{id:463,verse_number:13,chapter_number:12,text:`      |
    ||-||`,transliteration:`adveh sarva-bhtn maitra karua eva cha
nirmamo nirahakra sama-dukha-sukha kham`,meaning:"One who is not envious but is a kind friend to all living entities, who does not think himself a proprietor and is free from false ego, who is equal in both happiness and distress, who is tolerant..."},{id:464,verse_number:14,chapter_number:12,text:`     |
     ||-||`,transliteration:`santuha satata yog yattm diha-nihchaya
mayy arpita-mano-buddhir yo mad-bhakta sa me priya`,meaning:"...always satisfied, self-controlled, and engaged in devotional service with determination, his mind and intelligence fixed on Mesuch a devotee of Mine is very dear to Me."},{id:465,verse_number:15,chapter_number:12,text:`     |
      ||-||`,transliteration:`yasmn nodvijate loko lokn nodvijate cha ya
harhmarha-bhayodvegair mukto ya sa cha me priya`,meaning:"He by whom no one is put into difficulty and who is not disturbed by anyone, who is equipoised in happiness and distress, fear and anxiety, is very dear to Me."},{id:466,verse_number:16,chapter_number:12,text:`    |
      ||-||`,transliteration:`anapekha huchir dakha udsno gata-vyatha
sarvrambha-parityg yo mad-bhakta sa me priya`,meaning:"My devotee who is not dependent on the ordinary course of activities, who is pure, expert, without cares, free from all pains, and not striving for some result, is very dear to Me."},{id:467,verse_number:17,chapter_number:12,text:`         |
     ||-||`,transliteration:`yo na hihyati na dvehi na hochati na kkhati
hubhhubha-parityg bhaktimn ya sa me priya`,meaning:"One who neither rejoices nor grieves, who neither laments nor desires, and who renounces both auspicious and inauspicious thingssuch a devotee is very dear to Me."},{id:468,verse_number:18,chapter_number:12,text:`       |
   ||-||`,transliteration:`sama hatrau cha mitre cha tath mnpamnayo
htoha-sukha-dukhehu sama saga-vivarjita`,meaning:"One who is equal to friends and enemies, who is equipoised in honor and dishonor, heat and cold, happiness and distress, fame and infamy, who is always free from contaminating association..."},{id:469,verse_number:19,chapter_number:12,text:`    |
    ||-||`,transliteration:`tulya-nind-stutir maun santuho yena kenachit
aniketa sthira-matir bhaktimn me priyo nara`,meaning:"...who is always silent and satisfied with anything, who doesnt care for any residence, who is fixed in knowledge and who is engaged in devotional servicesuch a person is very dear to Me."},{id:470,verse_number:20,chapter_number:12,text:`     |
     ||-||`,transliteration:`ye tu dharmymitam ida yathokta paryupsate
hraddadhn mat-param bhakts te tva me priy`,meaning:"Those who follow this imperishable path of devotional service and who completely engage themselves with faith, making Me the supreme goal, are very, very dear to Me."}]},{id:13,name:"",name_meaning:"The Yoga of the Field and the Knower of the Field",chapter_number:13,verses_count:35,summary:"Krishna explains the difference between the physical body (the field, or 'kshetra') and the eternal soul (the knower of the field, or 'kshetrajna'). He describes the components of the material world and the qualities required to attain true knowledge.",verses:[{id:471,verse_number:1,chapter_number:13,text:`  |
      |
     ||-||`,transliteration:`arjuna uvcha
prakiti puruha chaiva khetra khetrajam eva cha
etad veditum ichchhmi jna jeya cha kehava`,meaning:"Arjuna said: O my dear Krishna, I wish to know about nature [prakriti], the enjoyer [purusha], and the field and the knower of the field, and of knowledge and the object of knowledge."},{id:472,verse_number:2,chapter_number:13,text:` |
    |
       ||-||`,transliteration:`hr bhagavn uvcha
ida harra kaunteya khetram ity abhidhyate
etad yo vetti ta prhu khetraja iti tad-vida`,meaning:"The Supreme Personality of Godhead said: This body, O son of Kunti, is called the field, and one who knows this body is called the knower of the field."},{id:473,verse_number:3,chapter_number:13,text:`      |
    ||-||`,transliteration:`khetraja chpi m viddhi sarva-khetrehu bhrata
khetra-khetrajayor jna yat taj jna mata mama`,meaning:"O scion of Bharata, you should understand that I am also the knower in all bodies, and to understand this body and its knower is called knowledge. That is My opinion."},{id:474,verse_number:4,chapter_number:13,text:`      |
       ||-||`,transliteration:`tat khetra yach cha ydik cha yad-vikri yatah cha yat
sa cha yo yat-prabhvah cha tat samsena me hiu`,meaning:"Now please hear My brief description of this field of activity and how it is constituted, what its changes are, whence it is produced, who that knower of the field of activities is, and what his influences are."},{id:475,verse_number:5,chapter_number:13,text:`    |
  ||-||`,transliteration:`ihibhir bahudh gta chhandobhir vividhai pithak
brahma-stra-padaih chaiva hetumadbhir vinihchitai`,meaning:"That knowledge of the field of activities and of the knower of activities is described by various sages in various Vedic writings. It is especially presented in Vedanta-sutra with all reasoning as to cause and effect."},{id:476,verse_number:6,chapter_number:13,text:`   |
     ||-||`,transliteration:`mah-bhtny ahakro buddhir avyaktam eva cha
indriyi dahaika cha pacha chendriya-gochar`,meaning:"The five great elements, false ego, intelligence, the unmanifested, the ten senses and the mind, the five sense objects..."},{id:477,verse_number:7,chapter_number:13,text:`      |
   ||-||`,transliteration:`ichchh dveha sukha dukha saghtah chetan dhiti
etat khetra samsena sa-vikram udhitam`,meaning:"Desire, hatred, happiness, distress, the aggregate, the life symptoms, and convictionsall these are considered, in summary, to be the interactions of the field of activities."},{id:478,verse_number:8,chapter_number:13,text:`  |
   ||-||`,transliteration:`amnitvam adambhitvam ahis khntir rjavam
chryopsana haucha sthairyam tma-vinigraha`,meaning:"Humility; pridelessness; nonviolence; tolerance; simplicity; approaching a bona fide spiritual master; cleanliness; steadiness; self-control;"},{id:479,verse_number:9,chapter_number:13,text:`    |
 ||-||`,transliteration:`indriyrthehu vairgyam anahakra eva cha
janma-mityu-jar-vydhi-dukha-dohnudarhanam`,meaning:"renunciation of the objects of sense gratification; absence of false ego; the perception of the evil of birth, death, old age and disease;"},{id:480,verse_number:10,chapter_number:13,text:`  |
   ||-||`,transliteration:`asaktir anabhihvaga putra-dra-gihdihu
nitya cha sama-chittatvam ihnihopapattihu`,meaning:"detachment; freedom from entanglement with children, wife, home and the rest; even-mindedness amid pleasant and unpleasant events;"},{id:481,verse_number:11,chapter_number:13,text:`   |
 ||-||`,transliteration:`mayi chnanya-yogena bhaktir avyabhichri
vivikta-deha-sevitvam aratir jana-sasadi`,meaning:"constant and unalloyed devotion to Me; aspiring to live in a solitary place; detachment from the general mass of people;"},{id:482,verse_number:12,chapter_number:13,text:`  |
   ||-||`,transliteration:`adhytma-jna-nityatva tattva-jnrtha-darhanam
etaj jnam iti proktam ajna yad ato nyath`,meaning:"accepting the importance of self-realization; and philosophical search for the Absolute Truthall these I declare to be knowledge, and besides this whatever there may be is ignorance."},{id:483,verse_number:13,chapter_number:13,text:`   |
    ||-||`,transliteration:`jeya yat tat pravakhymi yaj jtvmitam ahnute
andi mat-para brahma na sat tan nsad uchyate`,meaning:"I shall now explain the knowable, knowing which you will taste the eternal. Brahman, the spirit, beginningless and subordinate to Me, lies beyond the cause and effect of this material world."},{id:484,verse_number:14,chapter_number:13,text:`   |
    ||-||`,transliteration:`sarvata pi-pda tat sarvato khi-hiro-mukham
sarvata hrutimal loke sarvam vitya tihhati`,meaning:"Everywhere are His hands and legs, His eyes, heads and faces, and He has ears everywhere. In this way the Supersoul exists, pervading everything."},{id:485,verse_number:15,chapter_number:13,text:`  |
     ||-||`,transliteration:`sarvendriya-gubhsa sarvendriya-vivarjitam
asakta sarva-bhich chaiva nirgua gua-bhokti cha`,meaning:"The Supersoul is the original source of all senses, yet He is without senses. He is unattached, although He is the maintainer of all living beings. He transcends the modes of nature, and at the same time He is the master of all the modes of material nature."},{id:486,verse_number:16,chapter_number:13,text:`    |
     ||-||`,transliteration:`bahir antah cha bhtnm achara charam eva cha
skhmatvt tad avijeya dra-stha chntike cha tat`,meaning:"The Supreme Truth exists outside and inside of all living beings, the moving and the nonmoving. Because He is subtle, He is beyond the power of the material senses to see or to know. Although far, far away, He is also near to all."},{id:487,verse_number:17,chapter_number:13,text:`      |
      ||-||`,transliteration:`avibhakta cha bhtehu vibhaktam iva cha sthitam
bhta-bharti cha taj jeya grasihu prabhavihu cha`,meaning:"Although the Supersoul appears to be divided among all beings, He is never divided. He is situated as one. Although He is the maintainer of every living entity, it is to be understood that He devours and develops all."},{id:488,verse_number:18,chapter_number:13,text:`   |
      ||-||`,transliteration:`jyotihm api taj jyotis tamasa param uchyate
jna jeya jna-gamya hidi sarvasya vihhitam`,meaning:"He is the source of light in all luminous objects. He is beyond the darkness of matter and is unmanifested. He is knowledge, He is the object of knowledge, and He is the goal of knowledge. He is situated in everyones heart."},{id:489,verse_number:19,chapter_number:13,text:`       |
   ||-||`,transliteration:`iti khetra tath jna jeya chokta samsata
mad-bhakta etad vijya mad-bhvyopapadyate`,meaning:"Thus the field of activities [the body], knowledge and the knowable have been summarily described by Me. Only My devotees can understand this thoroughly and thus attain to My nature."},{id:490,verse_number:20,chapter_number:13,text:`     |
    ||-||`,transliteration:`prakiti puruha chaiva viddhy and ubhv api
vikrh cha guh chaiva viddhi prakiti-sambhavn`,meaning:"Material nature and the living entities should be understood to be beginningless. Their transformations and the modes of matter are products of material nature."},{id:491,verse_number:21,chapter_number:13,text:`   |
    ||-||`,transliteration:`krya-kraa-kartitve hetu prakitir uchyate
puruha sukha-dukhn bhoktitve hetur uchyate`,meaning:"Nature is said to be the cause of all material causes and effects, whereas the living entity is the cause of the various sufferings and enjoyments in this world."},{id:492,verse_number:22,chapter_number:13,text:`     |
   ||-||`,transliteration:`puruha prakiti-stho hi bhukte prakiti-jn gun
kraa gua-sago sya sad-asad-yoni-janmasu`,meaning:"The living entity in material nature thus follows the ways of life, enjoying the three modes of nature. This is due to his association with that material nature. Thus he meets with good and evil among various species."},{id:493,verse_number:23,chapter_number:13,text:`     |
    ||-||`,transliteration:`upadrahnumant cha bhart bhokt mahehvara
paramtmeti chpy ukto dehe smin puruha para`,meaning:"Yet in this body there is another, a transcendental enjoyer, who is the Lord, the supreme proprietor, who exists as the overseer and permitter, and who is known as the Supersoul."},{id:494,verse_number:24,chapter_number:13,text:`        |
     ||-||`,transliteration:`ya eva vetti puruha prakiti cha guai saha
sarvath vartamno pi na sa bhyo bhijyate`,meaning:"One who understands this philosophy concerning material nature, the living entity and the interaction of the modes of nature is sure to attain liberation. He will not take birth here again, regardless of his present position."},{id:495,verse_number:25,chapter_number:13,text:`   |
     ||-||`,transliteration:`dhynentmani pahyanti kechid tmnam tman
anye skhyena yogena karma-yogena chpare`,meaning:"Some perceive the Supersoul within themselves through meditation, others through the cultivation of knowledge, and still others through working without fruitive desires."},{id:496,verse_number:26,chapter_number:13,text:`    |
    ||-||`,transliteration:`anye tv evam ajnanta hrutvnyebhya upsate
te pi chtitaranty eva mityu hruti-parya`,meaning:"Again there are those who, although not conversant in spiritual knowledge, begin to worship the Supreme Person upon hearing about Him from others. Because of their tendency to hear from authorities, they also transcend the path of birth and death."},{id:497,verse_number:27,chapter_number:13,text:`   |
  ||-||`,transliteration:`yvat sajyate kichit sattva sthvara-jagamam
khetra-khetraja-sayogt tad viddhi bharatarhabha`,meaning:"O chief of the Bharatas, know that whatever you see in existence, both the moving and the nonmoving, is only a combination of the field of activities and the knower of the field."},{id:498,verse_number:28,chapter_number:13,text:`     |
     ||-||`,transliteration:`sama sarvehu bhtehu tihhanta paramehvaram
vinahyatsv avinahyanta ya pahyati sa pahyati`,meaning:"One who sees the Supersoul accompanying the individual soul in all bodies, and who understands that neither the soul nor the Supersoul within the destructible body is ever destroyed, actually sees."},{id:499,verse_number:29,chapter_number:13,text:`    |
      ||-||`,transliteration:`sama pahyan hi sarvatra samavasthitam hvaram
na hinasty tmantmna tato yti par gatim`,meaning:"One who sees the Supersoul equally present everywhere, in every living being, does not degrade himself by his mind. Thus he approaches the transcendental destination."},{id:500,verse_number:30,chapter_number:13,text:`     |
     ||-||`,transliteration:`prakityaiva cha karmi kriyamni sarvaha
ya pahyati tathtmnam akartra sa pahyati`,meaning:"One who can see that all activities are performed by the body, which is created of material nature, and sees that the self does nothing, actually sees."},{id:501,verse_number:31,chapter_number:13,text:`  |
       ||-||`,transliteration:`yad bhta-pithag-bhvam eka-stham anupahyati
tata eva cha vistra brahma sampadyate tad`,meaning:"When a sensible man ceases to see different identities due to different material bodies and he sees how beings are expanded everywhere, he attains to the Brahman conception."},{id:502,verse_number:32,chapter_number:13,text:` |
      ||-||`,transliteration:`anditvn nirguatvt paramtmyam avyaya
harra-stho pi kaunteya na karoti na lipyate`,meaning:"Those with the vision of eternity can see that the imperishable soul is transcendental, eternal, and beyond the modes of nature. Despite contact with the material body, O Arjuna, the soul does neither anything nor is entangled."},{id:503,verse_number:33,chapter_number:13,text:`    |
    ||-||`,transliteration:`yath sarva-gata saukhmyd kha nopalipyate
sarvatrvasthito dehe tathtm nopalipyate`,meaning:"The sky, due to its subtle nature, does not mix with anything, although it is all-pervading. Similarly, the soul situated in Brahman vision does not mix with the body, though situated in that body."},{id:504,verse_number:34,chapter_number:13,text:`     |
      ||-||`,transliteration:`yath prakhayaty eka kitsna lokam ima ravi
khetra khetr tath kitsna prakhayati bhrata`,meaning:"O son of Bharata, as the sun alone illuminates all this universe, so does the living entity, one within the body, illuminate the entire body by consciousness."},{id:505,verse_number:35,chapter_number:13,text:`  |
      ||-||`,transliteration:`khetra-khetrajayor evam antara jna-chakhuh
bhta-prakiti-mokha cha ye vidur ynti te param`,meaning:"Those who see with eyes of knowledge the difference between the body and the knower of the body, and can also understand the process of liberation from bondage in material nature, attain to the supreme goal."}]},{id:14,name:"",name_meaning:"The Yoga of the Three Gunas",chapter_number:14,verses_count:27,summary:"Krishna explains the three modes (gunas) of material nature: goodness (sattva), passion (rajas), and ignorance (tamas). He describes how these modes bind the soul to the material world and what qualities one must develop to transcend them.",verses:[{id:506,verse_number:1,chapter_number:14,text:` |
     |
      ||-||`,transliteration:`hr bhagavn uvcha
para bhya pravakhymi jnn jnam uttamam
yaj jtv munaya sarve par siddhim ito gat`,meaning:"The Supreme Personality of Godhead said: Again I shall declare to you this supreme wisdom, the best of all knowledge, knowing which all the sages have attained the supreme perfection."},{id:507,verse_number:2,chapter_number:14,text:`    |
      ||-||`,transliteration:`ida jnam uphritya mama sdharmyam gat
sarge pi nopajyante pralaye na vyathanti cha`,meaning:"By becoming fixed in this knowledge, one can attain to the transcendental nature like My own. Thus established, one is not born at the time of creation or disturbed at the time of dissolution."},{id:508,verse_number:3,chapter_number:14,text:`    |
     ||-||`,transliteration:`mama yonir mahad brahma tasmin garbha dadhmy aham
sambhava sarva-bhtn tato bhavati bhrata`,meaning:"The total material substance, called Brahman, is the source of birth, and it is that Brahman that I impregnate, making possible the births of all living beings, O son of Bharata."},{id:509,verse_number:4,chapter_number:14,text:`     |
     ||-||`,transliteration:`sarva-yonihu kaunteya mrtaya sambhavanti y
ts brahma mahad yonir aha bja-prada pit`,meaning:"It should be understood that all species of life, O son of Kunti, are made possible by birth in this material nature, and that I am the seed-giving father."},{id:510,verse_number:5,chapter_number:14,text:`     |
    ||-||`,transliteration:`sattva rajas tama iti gu prakiti-sambhav
nibadhnanti mah-bho dehe dehinam avyayam`,meaning:"Material nature consists of three modesgoodness, passion and ignorance. When the eternal living entity comes in contact with nature, O mighty-armed Arjuna, he becomes conditioned by these modes."},{id:511,verse_number:6,chapter_number:14,text:`   |
    ||-||`,transliteration:`tatra sattva nirmalatvt prakhakam anmayam
sukha-sagena badhnti jna-sagena chnagha`,meaning:"O sinless one, the mode of goodness, being purer than the others, is illuminating, and it frees one from all sinful reactions. Those situated in that mode become conditioned by a sense of happiness and knowledge."},{id:512,verse_number:7,chapter_number:14,text:`    |
    ||-||`,transliteration:`rajo rgtmaka viddhi tih-saga-samudbhavam
tan nibadhnti kaunteya karma-sagena dehinam`,meaning:"The mode of passion is born of unlimited desires and longings, O son of Kunti, and because of this the embodied living entity is bound to material fruitive actions."},{id:513,verse_number:8,chapter_number:14,text:`    |
  ||-||`,transliteration:`tamas tv ajna-ja viddhi mohana sarva-dehinm
pramdlasya-nidrbhis tan nibadhnti bhrata`,meaning:"O son of Bharata, know that the mode of darkness, born of ignorance, is the delusion of all embodied living entities. The results of this mode are madness, indolence and sleep, which bind the conditioned soul."},{id:514,verse_number:9,chapter_number:14,text:`      |
     ||-||`,transliteration:`sattva sukhe sajayati raja karmai bhrata
jnam vitya tu tama pramde sajayaty uta`,meaning:"O son of Bharata, the mode of goodness conditions one to happiness; passion conditions one to fruitive action; and ignorance, covering ones knowledge, binds one to madness."},{id:515,verse_number:10,chapter_number:14,text:`    |
      ||-||`,transliteration:`rajas tamah chbhibhya sattva bhavati bhrata
raja sattva tamah chaiva tama sattva rajas tath`,meaning:"Sometimes the mode of goodness becomes prominent, defeating the modes of passion and ignorance, O son of Bharata. Sometimes the mode of passion defeats goodness and ignorance, and at other times ignorance defeats goodness and passion. In this way there is always competition for supremacy."},{id:516,verse_number:11,chapter_number:14,text:`   |
     ||-||`,transliteration:`sarva-dvrehu dehe smin prakha upajyate
jna yad tad vidyd vividdha sattvam ity uta`,meaning:"The manifestation of the mode of goodness can be experienced when all the gates of the body are illuminated by knowledge."},{id:517,verse_number:12,chapter_number:14,text:`    |
    ||-||`,transliteration:`lobha pravittir rambha karmam ahama spih
rajasy etni jyante vividdhe bharatarhabha`,meaning:"O chief of the Bharatas, when there is an increase in the mode of passion the symptoms of great attachment, fruitive activity, intense endeavor, and uncontrollable desire and hankering develop."},{id:518,verse_number:13,chapter_number:14,text:`     |
    ||-||`,transliteration:`aprakho pravittih cha pramdo moha eva cha
tamasy etni jyante vividdhe kuru-nandana`,meaning:"When there is an increase in the mode of ignorance, O son of Kuru, darkness, inertia, madness and illusion are manifested."},{id:519,verse_number:14,chapter_number:14,text:`       |
  ||-||`,transliteration:`yad sattve praviddhe tu pralaya yti deha-bhit
tadottama-vid lokn amaln pratipadyate`,meaning:"When one dies in the mode of goodness, he attains to the pure higher planets of the great sages."},{id:520,verse_number:15,chapter_number:14,text:`     |
    ||-||`,transliteration:`rajasi pralaya gatv karma-sagihu jyate
tath pralnas tamasi mha-yonihu jyate`,meaning:"When one dies in the mode of passion, he takes birth among those engaged in fruitive activities; and when one dies in the mode of ignorance, he takes birth in the animal kingdom."},{id:521,verse_number:16,chapter_number:14,text:`     |
     ||-||`,transliteration:`karmaa sukitasyhu sttvika nirmala phalam
rajasas tu phala dukham ajna tamasa phalam`,meaning:"The result of pious action is pure and is said to be in the mode of goodness. But action done in the mode of passion results in misery, and action performed in the mode of ignorance results in foolishness."},{id:522,verse_number:17,chapter_number:14,text:`      |
    ||-||`,transliteration:`sattvt sajyate jna rajaso lobha eva cha
pramda-mohau tamaso bhavato jnam eva cha`,meaning:"From the mode of goodness, real knowledge develops; from the mode of passion, greed develops; and from the mode of ignorance develop foolishness, madness and illusion."},{id:523,verse_number:18,chapter_number:14,text:`      |
    ||-||`,transliteration:`rdhva gachchhanti sattva-sth madhye tihhanti rjas
jaghanya-gua-vitti-sth adho gachchhanti tmas`,meaning:"Those situated in the mode of goodness gradually go upward to the higher planets; those in the mode of passion live on the earthly planets; and those in the abominable mode of ignorance go down to the hellish worlds."},{id:524,verse_number:19,chapter_number:14,text:`     |
     ||-||`,transliteration:`nnya guebhya kartra yad drahnupahyati
guebhyah cha para vetti mad-bhva so dhigachchhati`,meaning:"When one properly sees that in all activities no other performer is at work than these modes of nature and he knows the Supreme Lord, who is transcendental to all these modes, he attains My spiritual nature."},{id:525,verse_number:20,chapter_number:14,text:`   |
 ||-||`,transliteration:`gun etn attya trn deh deha-samudbhavn
janma-mityu-jar-dukhair vimukto mitam ahnute`,meaning:"When the embodied being is able to transcend these three modes associated with the material body, he can become free from birth, death, old age and their distresses and can enjoy nectar even in this life."},{id:526,verse_number:21,chapter_number:14,text:`  |
   |
   ||-||`,transliteration:`arjuna uvcha
kair ligais trn gun etn atto bhavati prabho
kim-chra katha chaits trn gun ativartate`,meaning:"Arjuna inquired: O my dear Lord, by which signs is one known who is transcendental to these three modes? What is his behavior? And how does he transcend the modes of nature?"},{id:527,verse_number:22,chapter_number:14,text:` |
       |
      ||-||`,transliteration:`hr bhagavn uvcha
prakha cha pravitti cha moham eva cha pava
na dvehi sampravittni na nivittni kkhati`,meaning:"The Supreme Personality of Godhead said: O son of Pandu, he who does not hate illumination, attachment and delusion when they are present or long for them when they disappear;"},{id:528,verse_number:23,chapter_number:14,text:`    |
     ||-||`,transliteration:`udsna-vad sno guair yo na vichlyate
gu vartanta ity eva yo vatihhati negate`,meaning:"who is unwavering and undisturbed through all these reactions of the material qualities, remaining neutral and transcendental, knowing that the modes alone are active;"},{id:529,verse_number:24,chapter_number:14,text:`   |
  ||-||`,transliteration:`sama-dukha-sukha svastha sama-lohrhma-kchana
tulya-priypriyo dhras tulya-nindtma-sastuti`,meaning:"who is situated in the self and regards alike happiness and distress; who looks upon a lump of earth, a stone and a piece of gold with an equal eye; who is equal toward the desirable and the undesirable; who is steady, situated equally well in praise and blame, honor and dishonor;"},{id:530,verse_number:25,chapter_number:14,text:`  |
    ||-||`,transliteration:`mnpamnayos tulyas tulyo mitrri-pakhayo
sarvrambha-parityg gutta sa uchyate`,meaning:"who treats the friend and the enemy alike; and who has renounced all material activitiessuch a person is said to have transcended the modes of nature."},{id:531,verse_number:26,chapter_number:14,text:`     |
   ||-||`,transliteration:`m cha yo vyabhichrea bhakti-yogena sevate
sa gun samattyaitn brahma-bhyya kalpate`,meaning:"One who engages in full devotional service, unfailing in all circumstances, at once transcends the modes of material nature and thus comes to the level of Brahman."},{id:532,verse_number:27,chapter_number:14,text:`    |
     ||-||`,transliteration:`brahmao hi pratihhham amitasyvyayasya cha
hhvatasya cha dharmasya sukhasyaikntikasya cha`,meaning:"And I am the basis of the impersonal Brahman, which is immortal, imperishable and eternal and is the constitutional position of ultimate happiness."}]},{id:15,name:"",name_meaning:"The Yoga of the Supreme Person",chapter_number:15,verses_count:20,summary:"Krishna uses the metaphor of an upside-down banyan tree to describe the material world. He explains how to cut the roots of this tree with the axe of detachment and surrender to the Supreme Person, thus attaining His eternal abode.",verses:[{id:533,verse_number:1,chapter_number:15,text:` |
  |
       ||-||`,transliteration:`hr bhagavn uvcha
rdhva-mlam adha-hkham ahvattha prhur avyayam
chhandsi yasya parni yas ta veda sa veda-vit`,meaning:"The Supreme Personality of Godhead said: It is said that there is an imperishable banyan tree that has its roots upward and its branches down and whose leaves are the Vedic hymns. One who knows this tree is the knower of the Vedas."},{id:534,verse_number:2,chapter_number:15,text:`  
  |
 
  ||-||`,transliteration:`adhah chordhva prasits tasya hkh
gua-praviddh vihaya-pravl
adhah cha mlny anusantatni
karma-nubandhni manuhya-loke`,meaning:"The branches of this tree extend downward and upward, nourished by the three modes of material nature. The twigs are the objects of the senses. This tree also has roots going down, and these are bound to the fruitive actions of human society."},{id:535,verse_number:3,chapter_number:15,text:`  
     |
 
   ||-||`,transliteration:`na rpam asyeha tathopalabhyate
nnto na chdir na cha sampratihh
ahvattham ena su-virha-mlam
asaga-hastrea dihena chhittv`,meaning:"The real form of this tree cannot be perceived in this world. No one can understand where it ends, where it begins, or where its foundation is. But with determination one must cut down this strongly rooted tree with the weapon of detachment."},{id:536,verse_number:4,chapter_number:15,text:`  
    |
   
    ||-||`,transliteration:`tata pada tat parimrgitavya
yasmin gat na nivartanti bhya
tam eva chdya puruha prapadye
yata pravitti prasit pur`,meaning:"Thereafter, one must seek that place from which, having gone, one never returns, and there surrender to that Supreme Personality of Godhead from whom everything began and from whom everything has extended since time immemorial."},{id:537,verse_number:5,chapter_number:15,text:` 
  |
 
   ||-||`,transliteration:`nirmna-moh jita-saga-doh
adhytma-nity vinivitta-km
dvandvair vimukt sukha-dukha-sajair
gachchhanty amh padam avyaya tat`,meaning:"Those who are free from false prestige, illusion and false association, who understand the eternal, who are done with material lust, who are freed from the dualities of happiness and distress, and who, unbewildered, know how to surrender unto the Supreme Person attain to that eternal kingdom."},{id:538,verse_number:6,chapter_number:15,text:`       |
      ||-||`,transliteration:`na tad bhsayate sryo na hahko na pvaka
yad gatv na nivartante tad dhma parama mama`,meaning:"That supreme abode of Mine is not illumined by the sun or moon, nor by fire or electricity. Those who reach it never return to this material world."},{id:539,verse_number:7,chapter_number:15,text:`    |
   ||-||`,transliteration:`mamaivho jva-loke jva-bhta santana
mana-hahhnndriyi prakiti-sthni karhati`,meaning:"The living entities in this conditioned world are My eternal fragmental parts. Due to conditioned life, they are struggling very hard with the six senses, which include the mind."},{id:540,verse_number:8,chapter_number:15,text:`   |
   ||-||`,transliteration:`harra yad avpnoti yach chpy utkrmathvara
gihtvaitni sayti vyur gandhn ivhayt`,meaning:"The living entity in the material world carries his different conceptions of life from one body to another as the air carries aromas. Thus he takes one kind of body and again quits it to take another."},{id:541,verse_number:9,chapter_number:15,text:`       |
   ||-||`,transliteration:`hrotra chakhu sparhana cha rasana ghram eva cha
adhihhya manah chya vihayn upasevate`,meaning:"The living entity, thus taking another gross body, obtains a certain type of ear, eye, tongue, nose and sense of touch, which are grouped about the mind. He thus enjoys a particular set of sense objects."},{id:542,verse_number:10,chapter_number:15,text:`      |
    ||-||`,transliteration:`utkrmanta sthita vpi bhujna v gunvitam
vimh nnupahyanti pahyanti jna-chakhuha`,meaning:"The foolish cannot understand how a living entity can quit his body, nor can they understand what sort of body he enjoys under the spell of the modes of nature. But one whose eyes are trained in knowledge can see all this."},{id:543,verse_number:11,chapter_number:15,text:`   |
   ||-||`,transliteration:`yatanto yoginah chaina pahyanty tmany avasthitam
yatanto py akittmno naina pahyanty achetasa`,meaning:"The endeavoring transcendentalists who are situated in self-realization can see all this clearly. But those whose minds are not developed and who are not situated in self-realization cannot see what is taking place, though they may try."},{id:544,verse_number:12,chapter_number:15,text:`   |
     ||-||`,transliteration:`yad ditya-gata tejo jagad bhsayate khilam
yach chandramasi yach chgnau tat tejo viddhi mmakam`,meaning:"The splendor of the sun, which dissipates the darkness of this whole world, comes from Me. And the splendor of the moon and the splendor of fire are also from Me."},{id:545,verse_number:13,chapter_number:15,text:`    |
      ||-||`,transliteration:`gm vihya cha bhtni dhraymy aham ojas
puhmi chauhadh sarv somo bhtv rastmaka`,meaning:"I enter into each planet, and by My energy they stay in orbit. I become the moon and thereby supply the juice of life to all vegetables."},{id:546,verse_number:14,chapter_number:15,text:`     |
   ||-||`,transliteration:`aha vaihvnaro bhtv prin deham hrita
prpna-samyukta pachmy anna chatur-vidham`,meaning:"I am the fire of digestion in the bodies of all living entities, and I join with the air of life, outgoing and incoming, to digest the four kinds of foodstuff."},{id:547,verse_number:15,chapter_number:15,text:`   
   |
  
  ||-||`,transliteration:`sarvasya chha hidi sanniviho
matta smitir jnam apohana cha
vedaih cha sarvair aham eva vedyo
vednta-kid veda-vid eva chham`,meaning:"I am seated in everyones heart, and from Me come remembrance, knowledge and forgetfulness. By all the Vedas, I am to be known. Indeed, I am the compiler of Vedanta, and I am the knower of the Vedas."},{id:548,verse_number:16,chapter_number:15,text:`      |
     ||-||`,transliteration:`dvv imau puruhau loke kharah chkhara eva cha
khara sarvi bhtni ka-stho khara uchyate`,meaning:"There are two classes of beings, the fallible and the infallible. In the material world every living entity is fallible, and in the spiritual world every living entity is called infallible."},{id:549,verse_number:17,chapter_number:15,text:`   |
    ||-||`,transliteration:`uttama puruhas tv anya paramtmety udhita
yo loka-trayam vihya bibharty avyaya hvara`,meaning:"Besides these two, there is the greatest living personality, the Supreme Soul, the imperishable Lord Himself, who has entered the three worlds and is maintaining them."},{id:550,verse_number:18,chapter_number:15,text:`  |
      ||-||`,transliteration:`yasmt kharam atto ham akhard api chottama
ato smi loke vede cha prathita puruhottama`,meaning:"Because I am transcendental, beyond both the fallible and the infallible, and because I am the greatest, I am celebrated both in the world and in the Vedas as that Supreme Person."},{id:551,verse_number:19,chapter_number:15,text:`    |
     ||-||`,transliteration:`yo mm evam asammho jnti puruhottamam
sa sarva-vid bhajati m sarva-bhvena bhrata`,meaning:"Whoever knows Me as the Supreme Personality of Godhead, without doubting, is the knower of everything. He therefore engages himself in full devotional service to Me, O son of Bharata."},{id:552,verse_number:20,chapter_number:15,text:`    |
   ||-||`,transliteration:`iti guhyatama hstram idam ukta maynagha
etad buddhv buddhimn syt kita-kityah cha bhrata`,meaning:"This is the most confidential part of the Vedic scriptures, O sinless one, and it is disclosed now by Me. Whoever understands this will become wise, and his endeavors will know perfection."}]},{id:16,name:"",name_meaning:"The Yoga of the Divine and Demoniac Natures",chapter_number:16,verses_count:24,summary:"Krishna describes the qualities of those with a divine nature (daivi sampad) and those with a demoniac nature (asuri sampad). He explains how these qualities determine one's actions and ultimate destiny.",verses:[{id:553,verse_number:1,chapter_number:16,text:` |
  |
     ||-||`,transliteration:`hr bhagavn uvcha
abhaya sattva-sahuddhir jna-yoga-vyavasthiti
dna damah cha yajah cha svdhyyas tapa rjavam`,meaning:"The Supreme Personality of Godhead said: Fearlessness; purification of ones existence; cultivation of spiritual knowledge; charity; self-control; performance of sacrifice; study of the Vedas; austerity; simplicity;"},{id:554,verse_number:2,chapter_number:16,text:`   |
    ||-||`,transliteration:`ahis satyam akrodhas tyga hntir apaihunam
day bhtehv aloluptva mrdava hrr achpalam`,meaning:"nonviolence; truthfulness; freedom from anger; renunciation; tranquility; aversion to faultfinding; compassion for all living entities; freedom from covetousness; gentleness; modesty; steady determination;"},{id:555,verse_number:3,chapter_number:16,text:`     |
    ||-||`,transliteration:`teja kham dhiti haucham adroho nti-mnit
bhavanti sampada daivm abhijtasya bhrata`,meaning:"vigor; forgiveness; fortitude; cleanliness; and freedom from envy and from the passion for honorthese transcendental qualities, O son of Bharata, belong to godly men endowed with divine nature."},{id:556,verse_number:4,chapter_number:16,text:`     |
    ||-||`,transliteration:`dambho darpo bhimnah cha krodha pruhyam eva cha
ajna chbhijtasya prtha sampadam surm`,meaning:"Pride, arrogance, conceit, anger, harshness and ignorancethese qualities belong to those of demonic nature, O son of Pritha."},{id:557,verse_number:5,chapter_number:16,text:`    |
     ||-||`,transliteration:`daiv sampad vimokhya nibandhysur mat
m hucha sampada daivm abhijto si pava`,meaning:"The transcendental qualities are conducive to liberation, whereas the demonic qualities make for bondage. Do not worry, O son of Pandu, for you are born with the divine qualities."},{id:558,verse_number:6,chapter_number:16,text:`      |
       ||-||`,transliteration:`dvau bhta-sargau loke smin daiva sura eva cha
daivo vistaraha prokta sura prtha me hiu`,meaning:"O son of Pritha, in this world there are two kinds of created beings. One is called the divine and the other demonic. I have already explained to you at length the divine qualities. Now hear from Me of the demonic."},{id:559,verse_number:7,chapter_number:16,text:`       |
        ||-||`,transliteration:`pravitti cha nivitti cha jan na vidur sur
na haucha npi chchro na satya tehu vidyate`,meaning:"Those who are demonic do not know what is to be done and what is not to be done. Neither cleanliness nor proper behavior nor truth is found in them."},{id:560,verse_number:8,chapter_number:16,text:`   |
  ||-||`,transliteration:`asatyam apratihha te jagad hur anhvaram
aparaspara-sambhta kim anyat kma-haitukam`,meaning:"They say that this world is unreal, with no foundation, no God in control. They say it is produced of sex desire and has no cause other than lust."},{id:561,verse_number:9,chapter_number:16,text:`   |
   ||-||`,transliteration:`et dihim avahabhya nahtmno lpa-buddhaya
prabhavanty ugra-karma khayya jagato hit`,meaning:"Following such conclusions, the demonic, who are lost to themselves and who have no intelligence, engage in unbeneficial, horrible works meant to destroy the world."},{id:562,verse_number:10,chapter_number:16,text:`   |
 ||-||`,transliteration:`kmam hritya duhpra dambha-mna-madnvit
mohd gihtvsad-grhn pravartante huchi-vrat`,meaning:"Taking shelter of insatiable lust and absorbed in the conceit of pride and false prestige, the demonic, thus illusioned, are always sworn to unclean work, attracted by the impermanent."},{id:563,verse_number:11,chapter_number:16,text:`   |
   ||-||`,transliteration:`chintm aparimey cha pralayntm uphrit
kmopabhoga-param etvad iti nihchit`,meaning:"They believe that to gratify the senses is the prime necessity of human civilization. Thus until the end of life their anxiety is immeasurable. Bound by a network of hundreds of thousands of desires and absorbed in lust and anger, they secure money by illegal means for sense gratification."},{id:564,verse_number:12,chapter_number:16,text:`  |
  ||-||`,transliteration:`h-pha-hatair baddh kma-krodha-parya
hante kma-bhogrtham anyyenrtha-sachayn`,meaning:"Bound by a network of hundreds of thousands of desires and absorbed in lust and anger, they secure money by illegal means for sense gratification."},{id:565,verse_number:13,chapter_number:16,text:`     |
    ||-||`,transliteration:`idam adya may labdham ima prpsye manoratham
idam astdam api me bhavihyati punar dhanam`,meaning:"The demonic person thinks: So much wealth do I have today, and I will gain more according to my schemes. So much is mine now, and it will increase in the future, more and more."},{id:566,verse_number:14,chapter_number:16,text:`     |
    ||-||`,transliteration:`asau may hata hatrur hanihye chparn api
hvaro ham aha bhog siddho ha balavn sukh`,meaning:"He is my enemy, and I have killed him, and my other enemies will also be killed. I am the lord of everything. I am the enjoyer. I am perfect, powerful and happy."},{id:567,verse_number:15,chapter_number:16,text:`    |
    ||-||`,transliteration:`hyo bhijanavn asmi ko nyo sti sadiho may
yakhye dsymi modihya ity ajna-vimohit`,meaning:"I am the richest man, surrounded by aristocratic relatives. There is none so powerful and happy as I am. I shall perform sacrifices, I shall give some charity, and thus I shall rejoice. In this way, such persons are deluded by ignorance."},{id:568,verse_number:16,chapter_number:16,text:`  |
    ||-||`,transliteration:`aneka-chitta-vibhrnt moha-jla-samvit
prasakt kma-bhogehu patanti narake huchau`,meaning:"Thus perplexed by various anxieties and bound by a network of illusions, they become too strongly attached to sense enjoyment and fall down into hell."},{id:569,verse_number:17,chapter_number:16,text:`   |
   ||-||`,transliteration:`tma-sambhvit stabdh dhana-mna-madnvit
yajante nma-yajais te dambhenvidhi-prvakam`,meaning:"Self-complacent and always impudent, deluded by wealth and false prestige, they sometimes proudly perform sacrifices in name only, without following any rules or regulations."},{id:570,verse_number:18,chapter_number:16,text:`       |
  ||-||`,transliteration:`ahakra bala darpa kma krodha cha sahrit
mm tma-para-dehehu pradvihanto bhyasyak`,meaning:"Bewildered by false ego, strength, pride, lust and anger, the demons become envious of the Supreme Personality of Godhead, who is situated in their own bodies and in the bodies of others, and blaspheme against the real religion."},{id:571,verse_number:19,chapter_number:16,text:`    |
  ||-||`,transliteration:`tn aha dvihata krrn sasrehu nardhamn
khipmy ajasram ahubhn surhv eva yonihu`,meaning:"Those who are envious and mischievous, who are the lowest among men, I perpetually cast into the ocean of material existence, into various demonic species of life."},{id:572,verse_number:20,chapter_number:16,text:`     |
     ||-||`,transliteration:`sur yonim pann mh janmani janmani
mm aprpyaiva kaunteya tato ynty adham gatim`,meaning:"Attaining repeated birth amongst the species of demonic life, O son of Kunti, such persons can never approach Me. Gradually they sink down to the most abominable type of existence."},{id:573,verse_number:21,chapter_number:16,text:`    |
    ||-||`,transliteration:`tri-vidha narakasyeda dvra nhanam tmana
kma krodhas tath lobhas tasmd etat traya tyajet`,meaning:"There are three gates leading to this helllust, anger and greed. Every sane man should give these up, for they lead to the degradation of the soul."},{id:574,verse_number:22,chapter_number:16,text:`   |
     ||-||`,transliteration:`etair vimukta kaunteya tamo-dvrais tribhir nara
charaty tmana hreyas tato yti par gatim`,meaning:"The man who has escaped these three gates of hell, O son of Kunti, performs acts conducive to self-realization and thus gradually attains the supreme destination."},{id:575,verse_number:23,chapter_number:16,text:`    |
        ||-||`,transliteration:`ya hstra-vidhim utsijya vartate kma-krata
na sa siddhim avpnoti na sukha na par gatim`,meaning:"He who discards scriptural injunctions and acts according to his own whims attains neither perfection, nor happiness, nor the supreme destination."},{id:576,verse_number:24,chapter_number:16,text:`    |
    ||-||`,transliteration:`tasmch chhstra prama te krykrya-vyavasthitau
jtv hstra-vidhnokta karma kartum ihrhasi`,meaning:"One should therefore understand what is duty and what is not duty by the regulations of the scriptures. Knowing such rules and regulations, one should act so that he may gradually be elevated."}]},{id:17,name:"",name_meaning:"The Yoga of the Threefold Faith",chapter_number:17,verses_count:28,summary:"Arjuna asks about those who worship with faith but without following the scriptures. Krishna explains that faith can be of three typessattvic, rajasic, or tamasicdepending on one's nature. This threefold division also applies to food, sacrifice, austerity, and charity.",verses:[{id:577,verse_number:1,chapter_number:17,text:`  |
    |
       ||-||`,transliteration:`arjuna uvcha
ye hstra-vidhim utsijya yajante hraddhaynvit
teh nihh tu k kiha sattvam ho rajas tama`,meaning:"Arjuna inquired: O Krishna, what is the situation of those who do not follow the principles of scripture but worship according to their own imagination? Are they in goodness, in passion or in ignorance?"},{id:578,verse_number:2,chapter_number:17,text:` |
      |
       ||-||`,transliteration:`hr bhagavn uvcha
tri-vidh bhavati hraddh dehin s svabhva-j
sttvik rjas chaiva tmas cheti t hiu`,meaning:"The Supreme Personality of Godhead said: According to the modes of nature acquired by the embodied soul, ones faith can be of three kindsin goodness, in passion or in ignorance. Now hear about this."},{id:579,verse_number:3,chapter_number:17,text:`     |
       ||-||`,transliteration:`sattvnurp sarvasya hraddh bhavati bhrata
hraddh-mayo ya puruho yo yach-chhraddha sa eva sa`,meaning:"O son of Bharata, according to ones existence under the various modes of nature, one evolves a particular kind of faith. The living being is said to be of a particular faith according to the modes he has acquired."},{id:580,verse_number:4,chapter_number:17,text:`    |
    ||-||`,transliteration:`yajante sttvik devn yakha-rakhsi rjas
pretn bhta-gah chnye yajante tmas jan`,meaning:"Men in the mode of goodness worship the demigods; those in the mode of passion worship the demons; and those in the mode of ignorance worship ghosts and spirits."},{id:581,verse_number:5,chapter_number:17,text:`      |
  ||-||`,transliteration:`ahstra-vihita ghora tapyante ye tapo jan
dambhhakra-sayukt kma-rga-balnvit`,meaning:"Those who undergo severe austerities and penances not recommended in the scriptures, performing them out of pride and egoism, who are impelled by lust and attachment..."},{id:582,verse_number:6,chapter_number:17,text:`   |
   ||-||`,transliteration:`karhayanta harra-stha bhta-grmam achetasa
m chaivnta-harra-stha tn viddhy sura-nihchayn`,meaning:"...who are fools and who torture the material elements within the body as well as the Supersoul dwelling within, are to be known as demons."},{id:583,verse_number:7,chapter_number:17,text:`     |
     ||-||`,transliteration:`hras tv api sarvasya tri-vidho bhavati priya
yajas tapas tath dna teh bhedam ima hiu`,meaning:"Even the food each person prefers is of three kinds, according to the three modes of material nature. The same is true of sacrifices, austerities and charity. Now hear of the distinctions between them."},{id:584,verse_number:8,chapter_number:17,text:` |
      ||-||`,transliteration:`yu-sattva-balrogya-sukha-prti-vivardhan
rasy snigdh sthir hidy hr sttvika-priy`,meaning:"Foods dear to those in the mode of goodness increase the duration of life, purify ones existence and give strength, health, happiness and satisfaction. Such foods are juicy, fatty, wholesome, and pleasing to the heart."},{id:585,verse_number:9,chapter_number:17,text:` |
   ||-||`,transliteration:`kav-amla-lavaty-uha-tkha-rkha-vidhina
hr rjasasyeh dukha-hokmaya-prad`,meaning:"Foods that are too bitter, too sour, too salty, too hot, pungent, dry and burning are dear to those in the mode of passion. Such foods cause distress, misery and disease."},{id:586,verse_number:10,chapter_number:17,text:`      |
    ||-||`,transliteration:`yta-yma gata-rasa pti paryuhita cha yat
uchchhiham api chmedhya bhojana tmasa-priyam`,meaning:"Food prepared more than three hours before being eaten, food that is tasteless, decomposed and putrid, and food consisting of remnants and untouchable things is dear to those in the mode of darkness."}]}],SS=({chapter:a,onSelectChapter:e})=>{const t=je.useRef(null),[n,i]=je.useState(!1),s=c=>{if(!t.current)return;const f=t.current,p=f.getBoundingClientRect(),m=c.clientX-p.left,v=c.clientY-p.top,x=p.width/2,_=p.height/2,S=(v-_)/10,A=(x-m)/10;f.style.transform=`perspective(1000px) rotateX(${S}deg) rotateY(${A}deg) scale3d(1.05, 1.05, 1.05)`},u=()=>{t.current&&(t.current.style.transform="perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)"),i(!1)};return Ie.jsxs("div",{ref:t,onClick:()=>e(a),onMouseMove:s,onMouseEnter:()=>i(!0),onMouseLeave:u,className:"bg-white/50 border border-orange-200/50 rounded-xl shadow-lg p-6 cursor-pointer transition-all duration-300 hover:shadow-2xl relative",style:{transformStyle:"preserve-3d",transition:"transform 0.1s ease-out, box-shadow 0.3s ease"},children:[Ie.jsxs("div",{className:"flex items-center mb-4",style:{transform:"translateZ(20px)"},children:[Ie.jsx("span",{className:"bg-orange-800 text-white rounded-full w-12 h-12 flex items-center justify-center font-bold text-xl mr-4",style:{transform:"translateZ(30px)"},children:a.chapter_number}),Ie.jsxs("div",{style:{transform:"translateZ(20px)"},children:[Ie.jsx("h2",{className:"text-2xl font-bold text-orange-900 font-sanskrit",children:a.name}),Ie.jsx("p",{className:"text-orange-700",children:a.name_meaning})]})]}),Ie.jsx("p",{className:"text-gray-600 leading-relaxed",style:{transform:"translateZ(10px)"},children:a.summary}),n&&Ie.jsx("div",{className:"absolute inset-0 rounded-xl opacity-20 pointer-events-none",style:{background:"radial-gradient(circle at center, rgba(251, 146, 60, 0.4) 0%, transparent 70%)",transform:"translateZ(-10px)"}})]})},MS=({chapters:a,onSelectChapter:e})=>Ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map(t=>Ie.jsx(SS,{chapter:t,onSelectChapter:e},t.id))}),TS=()=>Ie.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),ES=()=>Ie.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),AS=({chapter:a})=>{const[e,t]=je.useState(0),[n,i]=je.useState(!1),[s,u]=je.useState({x:0,y:0,isHovering:!1}),[c,f]=je.useState(!1),[p,m]=je.useState(0),[v,x]=je.useState(1),[_,S]=je.useState({x:50,y:50}),[A,T]=je.useState(-100),w=je.useRef(null),C=je.useRef(null),R=a.verses[e];je.useEffect(()=>{w.current&&(w.current.style.transform="rotateY(0deg)")},[e]),je.useEffect(()=>{const G=setInterval(()=>{x(D=>D===1?1.05:1)},2e3);return()=>clearInterval(G)},[]),je.useEffect(()=>{if(s.isHovering){const G=setInterval(()=>{T(D=>D>=200?-100:D+5)},16);return()=>clearInterval(G)}else T(-100)},[s.isHovering]);const P=()=>{e<a.verses.length-1&&!n&&(i(!0),f(!0),m(p+360),C.current&&(C.current.style.transform="translateZ(-10px) scale(0.95)"),w.current&&(w.current.style.transform="rotateY(-90deg)"),setTimeout(()=>{t(e+1),w.current&&(w.current.style.transform="rotateY(90deg)"),setTimeout(()=>{w.current&&(w.current.style.transform="rotateY(0deg)"),i(!1),f(!1),C.current&&(C.current.style.transform="")},150)},300))},F=G=>{if(C.current&&!c){const D=C.current.getBoundingClientRect(),L=G.clientX-D.left,H=G.clientY-D.top,ee=D.width/2,ne=D.height/2,me=(H-ne)/ne*15,fe=(ee-L)/ee*15;u({x:me,y:fe,isHovering:!0}),S({x:L/D.width*100,y:H/D.height*100}),C.current&&(C.current.style.transform=`perspective(1000px) rotateX(${me}deg) rotateY(${fe}deg) translateZ(10px) scale(${v})`)}},N=()=>{u({x:0,y:0,isHovering:!1}),C.current&&!c&&(C.current.style.transform="")},z=()=>{e>0&&!n&&(i(!0),w.current&&(w.current.style.transform="rotateY(90deg)"),setTimeout(()=>{t(e-1),w.current&&(w.current.style.transform="rotateY(-90deg)"),setTimeout(()=>{w.current&&(w.current.style.transform="rotateY(0deg)"),i(!1)},150)},300))};return Ie.jsx("div",{className:"w-full",children:Ie.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[Ie.jsx("div",{style:{perspective:"1000px",perspectiveOrigin:"center center"},className:"relative",children:Ie.jsx("div",{ref:w,className:"bg-white/60 backdrop-blur-sm border border-orange-200/50 rounded-xl shadow-lg p-6 md:p-8 text-center",style:{transformStyle:"preserve-3d",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",transform:"rotateY(0deg)"},children:Ie.jsxs("div",{style:{backfaceVisibility:"hidden"},children:[Ie.jsx("p",{className:"font-sanskrit text-2xl md:text-3xl text-orange-900 leading-relaxed mb-4",children:R.text}),Ie.jsx("p",{className:"text-lg md:text-xl text-orange-800 italic mb-6",children:R.transliteration}),Ie.jsx("p",{className:"text-gray-700 leading-relaxed",children:R.meaning})]})})}),Ie.jsxs("div",{className:"flex justify-between items-center mt-6",children:[Ie.jsxs("button",{onClick:z,disabled:e===0,className:"flex items-center px-4 py-2 bg-orange-800 text-white rounded-lg shadow-md hover:bg-orange-900 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[Ie.jsx(TS,{}),Ie.jsx("span",{className:"ml-2",children:"Previous"})]}),Ie.jsxs("span",{className:"text-orange-800 font-semibold",children:["Verse ",R.verse_number," of ",a.verses_count]}),Ie.jsx("div",{style:{perspective:"1000px",perspectiveOrigin:"center center"},children:Ie.jsxs("button",{ref:C,onClick:P,onMouseMove:F,onMouseLeave:N,disabled:e===a.verses.length-1,className:"flex items-center px-4 py-2 bg-orange-800 text-white rounded-lg shadow-md hover:bg-orange-900 disabled:bg-gray-400 disabled:cursor-not-allowed relative overflow-hidden",style:{transformStyle:"preserve-3d",transition:c?"transform 0.1s ease-out":"transform 0.2s ease-out, box-shadow 0.2s ease-out",boxShadow:s.isHovering?"0 20px 40px rgba(251, 146, 60, 0.4), 0 0 20px rgba(251, 146, 60, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)":"0 10px 20px rgba(0, 0, 0, 0.2)",background:s.isHovering?"linear-gradient(135deg, #ea580c 0%, #c2410c 50%, #ea580c 100%)":"linear-gradient(135deg, #9a3412 0%, #7c2d12 100%)",backgroundSize:s.isHovering?"200% 200%":"100% 100%",animation:s.isHovering?"gradientShift 3s ease infinite":"none"},children:[Ie.jsx("style",{children:`
                  @keyframes gradientShift {
                    0%, 100% { background-position: 0% 50%; }
                    50% { background-position: 100% 50%; }
                  }
                  @keyframes pulse {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                  }
                  @keyframes ripple {
                    0% { transform: scale(0); opacity: 1; }
                    100% { transform: scale(4); opacity: 0; }
                  }
                  @keyframes shimmer {
                    0% { transform: translateX(-100%) skewX(-20deg); }
                    100% { transform: translateX(200%) skewX(-20deg); }
                  }
                  @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-3px); }
                  }
                  @keyframes rotateBorder {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                  }
                `}),s.isHovering&&Ie.jsx("div",{className:"absolute -inset-0.5 rounded-lg opacity-75",style:{background:"linear-gradient(45deg, #ff8c42, #ffb84d, #ff8c42, #ffd700)",backgroundSize:"400% 400%",animation:"gradientShift 3s ease infinite",pointerEvents:"none",zIndex:-1,filter:"blur(1px)"}}),s.isHovering&&Ie.jsx("div",{className:"absolute rounded-full bg-white/30",style:{left:`${_.x}%`,top:`${_.y}%`,width:"20px",height:"20px",transform:"translate(-50%, -50%)",animation:"ripple 1s ease-out infinite",pointerEvents:"none"}}),s.isHovering&&Ie.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%)",transform:`translateX(${A}%) skewX(-20deg)`,animation:"shimmer 2s infinite",pointerEvents:"none"}}),s.isHovering&&Ie.jsx(Ie.Fragment,{children:[...Array(5)].map((G,D)=>Ie.jsx("div",{className:"absolute rounded-full bg-white/40",style:{width:"4px",height:"4px",left:`${20+D*15}%`,top:"50%",transform:"translate(-50%, -50%)",animation:"float 1.5s ease-in-out infinite",animationDelay:`${D*.2}s`,pointerEvents:"none"}},D))}),s.isHovering&&Ie.jsx("div",{className:"absolute inset-0 rounded-lg opacity-50",style:{background:"radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, transparent 70%)",transform:"translateZ(5px)",pointerEvents:"none",animation:"pulse 2s ease-in-out infinite"}}),Ie.jsx("span",{className:"mr-2 font-semibold relative z-10",style:{transform:"translateZ(10px)",textShadow:s.isHovering?"0 2px 10px rgba(255, 255, 255, 0.5)":"none",animation:s.isHovering?"float 2s ease-in-out infinite":"none"},children:"Next"}),Ie.jsx("div",{style:{transform:`translateZ(10px) rotateZ(${p}deg)`,transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",animation:s.isHovering?"float 2s ease-in-out infinite 0.3s":"none"},className:"relative z-10",children:Ie.jsx(ES,{})}),Ie.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-white/20",style:{transform:"translateZ(5px)",pointerEvents:"none",animation:s.isHovering?"pulse 2s ease-in-out infinite":"none"}})]})})]})]})})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const lg="181",pu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},mu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},wb=0,ky=1,Sb=2,kS=3,Mb=0,ug=1,Hd=2,Wa=3,uo=0,yr=1,ma=2,gs=0,bu=1,Cy=2,Ry=3,Iy=4,Tb=5,tl=100,Eb=101,Ab=102,kb=103,Cb=104,Rb=200,Ib=201,Pb=202,Lb=203,vm=204,ym=205,Nb=206,Db=207,Ob=208,Ub=209,Fb=210,Bb=211,zb=212,Vb=213,Hb=214,xm=0,_m=1,bm=2,Tu=3,wm=4,Sm=5,Mm=6,Tm=7,mf=0,jb=1,Gb=2,vs=0,Wb=1,Xb=2,Yb=3,qy=4,qb=5,Kb=6,Zb=7,Py="attached",Jb="detached",hg=300,ho=301,al=302,Jd=303,Qd=304,Mc=306,$d=1e3,Or=1001,ef=1002,zi=1003,Ky=1004,CS=1004,lc=1005,RS=1005,Wn=1006,jd=1007,IS=1007,ps=1008,PS=1008,ga=1009,Zy=1010,Jy=1011,fc=1012,cg=1013,co=1014,vr=1015,ll=1016,dg=1017,fg=1018,pc=1020,Qy=35902,$y=35899,e0=1021,t0=1022,$i=1023,mc=1026,gc=1027,pg=1028,gf=1029,mg=1030,gg=1031,LS=1032,vg=1033,Gd=33776,Wd=33777,Xd=33778,Yd=33779,Em=35840,Am=35841,km=35842,Cm=35843,Rm=36196,Im=37492,Pm=37496,Lm=37808,Nm=37809,Dm=37810,Om=37811,Um=37812,Fm=37813,Bm=37814,zm=37815,Vm=37816,Hm=37817,jm=37818,Gm=37819,Wm=37820,Xm=37821,Ym=36492,qm=36494,Km=36495,Zm=36283,Jm=36284,Qm=36285,$m=36286,Qb=2200,$b=2201,e1=2202,tf=2300,eg=2301,fm=2302,yu=2400,xu=2401,nf=2402,yg=2500,n0=2501,NS=0,DS=1,OS=2,t1=3200,n1=3201,US=3202,FS=3203,ul=0,i1=1,so="",Nr="srgb",Eu="srgb-linear",rf="linear",Tn="srgb",BS=0,gu=7680,zS=7681,VS=7682,HS=7683,jS=34055,GS=34056,WS=5386,XS=512,YS=513,qS=514,KS=515,ZS=516,JS=517,QS=518,Ly=519,r1=512,a1=513,s1=514,i0=515,o1=516,l1=517,u1=518,h1=519,af=35044,$S=35048,eM=35040,tM=35045,nM=35049,iM=35041,rM=35046,aM=35050,sM=35042,oM="100",Ny="300 es",$r=2e3,vc=2001,lM={COMPUTE:"compute",RENDER:"render"},uM={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},hM={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function c1(a){for(let e=a.length-1;e>=0;--e)if(a[e]>=65535)return!0;return!1}const cM={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function uc(a,e){return new cM[a](e)}function sf(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function d1(){const a=sf("canvas");return a.style.display="block",a}const bx={};let sl=null;function dM(a){sl=a}function fM(){return sl}function of(...a){const e="THREE."+a.shift();sl?sl("log",e,...a):console.log(e,...a)}function ft(...a){const e="THREE."+a.shift();sl?sl("warn",e,...a):console.warn(e,...a)}function Wt(...a){const e="THREE."+a.shift();sl?sl("error",e,...a):console.error(e,...a)}function yc(...a){const e=a.join(" ");e in bx||(bx[e]=!0,ft(...a))}function pM(a,e,t){return new Promise(function(n,i){function s(){switch(a.clientWaitSync(e,a.SYNC_FLUSH_COMMANDS_BIT,0)){case a.WAIT_FAILED:i();break;case a.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}let ys=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,u=i.length;s<u;s++)i[s].call(this,e);e.target=null}}};const Zi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let wx=1234567;const wu=Math.PI/180,xc=180/Math.PI;function ea(){const a=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Zi[a&255]+Zi[a>>8&255]+Zi[a>>16&255]+Zi[a>>24&255]+"-"+Zi[e&255]+Zi[e>>8&255]+"-"+Zi[e>>16&15|64]+Zi[e>>24&255]+"-"+Zi[t&63|128]+Zi[t>>8&255]+"-"+Zi[t>>16&255]+Zi[t>>24&255]+Zi[n&255]+Zi[n>>8&255]+Zi[n>>16&255]+Zi[n>>24&255]).toLowerCase()}function Vt(a,e,t){return Math.max(e,Math.min(t,a))}function r0(a,e){return(a%e+e)%e}function mM(a,e,t,n,i){return n+(a-e)*(i-n)/(t-e)}function gM(a,e,t){return a!==e?(t-a)/(e-a):0}function qd(a,e,t){return(1-t)*a+t*e}function vM(a,e,t,n){return qd(a,e,1-Math.exp(-t*n))}function yM(a,e=1){return e-Math.abs(r0(a,e*2)-e)}function xM(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*(3-2*a))}function _M(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*a*(a*(a*6-15)+10))}function bM(a,e){return a+Math.floor(Math.random()*(e-a+1))}function wM(a,e){return a+Math.random()*(e-a)}function SM(a){return a*(.5-Math.random())}function MM(a){a!==void 0&&(wx=a);let e=wx+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function TM(a){return a*wu}function EM(a){return a*xc}function AM(a){return(a&a-1)===0&&a!==0}function kM(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function CM(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function RM(a,e,t,n,i){const s=Math.cos,u=Math.sin,c=s(t/2),f=u(t/2),p=s((e+n)/2),m=u((e+n)/2),v=s((e-n)/2),x=u((e-n)/2),_=s((n-e)/2),S=u((n-e)/2);switch(i){case"XYX":a.set(c*m,f*v,f*x,c*p);break;case"YZY":a.set(f*x,c*m,f*v,c*p);break;case"ZXZ":a.set(f*v,f*x,c*m,c*p);break;case"XZX":a.set(c*m,f*S,f*_,c*p);break;case"YXY":a.set(f*_,c*m,f*S,c*p);break;case"ZYZ":a.set(f*S,f*_,c*m,c*p);break;default:ft("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function gr(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return a/4294967295;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int32Array:return Math.max(a/2147483647,-1);case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw new Error("Invalid component type.")}}function $t(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return Math.round(a*4294967295);case Uint16Array:return Math.round(a*65535);case Uint8Array:return Math.round(a*255);case Int32Array:return Math.round(a*2147483647);case Int16Array:return Math.round(a*32767);case Int8Array:return Math.round(a*127);default:throw new Error("Invalid component type.")}}const f1={DEG2RAD:wu,RAD2DEG:xc,generateUUID:ea,clamp:Vt,euclideanModulo:r0,mapLinear:mM,inverseLerp:gM,lerp:qd,damp:vM,pingpong:yM,smoothstep:xM,smootherstep:_M,randInt:bM,randFloat:wM,randFloatSpread:SM,seededRandom:MM,degToRad:TM,radToDeg:EM,isPowerOfTwo:AM,ceilPowerOfTwo:kM,floorPowerOfTwo:CM,setQuaternionFromProperEuler:RM,normalize:$t,denormalize:gr};class Ae{constructor(e=0,t=0){Ae.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Vt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,u=this.y-e.y;return this.x=s*n-u*i+e.x,this.y=s*i+u*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class er{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,u,c){let f=n[i+0],p=n[i+1],m=n[i+2],v=n[i+3],x=s[u+0],_=s[u+1],S=s[u+2],A=s[u+3];if(c<=0){e[t+0]=f,e[t+1]=p,e[t+2]=m,e[t+3]=v;return}if(c>=1){e[t+0]=x,e[t+1]=_,e[t+2]=S,e[t+3]=A;return}if(v!==A||f!==x||p!==_||m!==S){let T=f*x+p*_+m*S+v*A;T<0&&(x=-x,_=-_,S=-S,A=-A,T=-T);let w=1-c;if(T<.9995){const C=Math.acos(T),R=Math.sin(C);w=Math.sin(w*C)/R,c=Math.sin(c*C)/R,f=f*w+x*c,p=p*w+_*c,m=m*w+S*c,v=v*w+A*c}else{f=f*w+x*c,p=p*w+_*c,m=m*w+S*c,v=v*w+A*c;const C=1/Math.sqrt(f*f+p*p+m*m+v*v);f*=C,p*=C,m*=C,v*=C}}e[t]=f,e[t+1]=p,e[t+2]=m,e[t+3]=v}static multiplyQuaternionsFlat(e,t,n,i,s,u){const c=n[i],f=n[i+1],p=n[i+2],m=n[i+3],v=s[u],x=s[u+1],_=s[u+2],S=s[u+3];return e[t]=c*S+m*v+f*_-p*x,e[t+1]=f*S+m*x+p*v-c*_,e[t+2]=p*S+m*_+c*x-f*v,e[t+3]=m*S-c*v-f*x-p*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,u=e._order,c=Math.cos,f=Math.sin,p=c(n/2),m=c(i/2),v=c(s/2),x=f(n/2),_=f(i/2),S=f(s/2);switch(u){case"XYZ":this._x=x*m*v+p*_*S,this._y=p*_*v-x*m*S,this._z=p*m*S+x*_*v,this._w=p*m*v-x*_*S;break;case"YXZ":this._x=x*m*v+p*_*S,this._y=p*_*v-x*m*S,this._z=p*m*S-x*_*v,this._w=p*m*v+x*_*S;break;case"ZXY":this._x=x*m*v-p*_*S,this._y=p*_*v+x*m*S,this._z=p*m*S+x*_*v,this._w=p*m*v-x*_*S;break;case"ZYX":this._x=x*m*v-p*_*S,this._y=p*_*v+x*m*S,this._z=p*m*S-x*_*v,this._w=p*m*v+x*_*S;break;case"YZX":this._x=x*m*v+p*_*S,this._y=p*_*v+x*m*S,this._z=p*m*S-x*_*v,this._w=p*m*v-x*_*S;break;case"XZY":this._x=x*m*v-p*_*S,this._y=p*_*v-x*m*S,this._z=p*m*S+x*_*v,this._w=p*m*v+x*_*S;break;default:ft("Quaternion: .setFromEuler() encountered an unknown order: "+u)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],u=t[1],c=t[5],f=t[9],p=t[2],m=t[6],v=t[10],x=n+c+v;if(x>0){const _=.5/Math.sqrt(x+1);this._w=.25/_,this._x=(m-f)*_,this._y=(s-p)*_,this._z=(u-i)*_}else if(n>c&&n>v){const _=2*Math.sqrt(1+n-c-v);this._w=(m-f)/_,this._x=.25*_,this._y=(i+u)/_,this._z=(s+p)/_}else if(c>v){const _=2*Math.sqrt(1+c-n-v);this._w=(s-p)/_,this._x=(i+u)/_,this._y=.25*_,this._z=(f+m)/_}else{const _=2*Math.sqrt(1+v-n-c);this._w=(u-i)/_,this._x=(s+p)/_,this._y=(f+m)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,u=e._w,c=t._x,f=t._y,p=t._z,m=t._w;return this._x=n*m+u*c+i*p-s*f,this._y=i*m+u*f+s*c-n*p,this._z=s*m+u*p+n*f-i*c,this._w=u*m-n*c-i*f-s*p,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,i=e._y,s=e._z,u=e._w,c=this.dot(e);c<0&&(n=-n,i=-i,s=-s,u=-u,c=-c);let f=1-t;if(c<.9995){const p=Math.acos(c),m=Math.sin(p);f=Math.sin(f*p)/m,t=Math.sin(t*p)/m,this._x=this._x*f+n*t,this._y=this._y*f+i*t,this._z=this._z*f+s*t,this._w=this._w*f+u*t,this._onChangeCallback()}else this._x=this._x*f+n*t,this._y=this._y*f+i*t,this._z=this._z*f+s*t,this._w=this._w*f+u*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,n=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Sx.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Sx.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,u=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*u,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*u,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*u,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,u=e.y,c=e.z,f=e.w,p=2*(u*i-c*n),m=2*(c*t-s*i),v=2*(s*n-u*t);return this.x=t+f*p+u*v-c*m,this.y=n+f*m+c*p-s*v,this.z=i+f*v+s*m-u*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,u=t.x,c=t.y,f=t.z;return this.x=i*f-s*c,this.y=s*u-n*f,this.z=n*c-i*u,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Mv.copy(this).projectOnVector(e),this.sub(Mv)}reflect(e){return this.sub(Mv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Vt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Mv=new Y,Sx=new er;class Zt{constructor(e,t,n,i,s,u,c,f,p){Zt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,u,c,f,p)}set(e,t,n,i,s,u,c,f,p){const m=this.elements;return m[0]=e,m[1]=i,m[2]=c,m[3]=t,m[4]=s,m[5]=f,m[6]=n,m[7]=u,m[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,u=n[0],c=n[3],f=n[6],p=n[1],m=n[4],v=n[7],x=n[2],_=n[5],S=n[8],A=i[0],T=i[3],w=i[6],C=i[1],R=i[4],P=i[7],F=i[2],N=i[5],z=i[8];return s[0]=u*A+c*C+f*F,s[3]=u*T+c*R+f*N,s[6]=u*w+c*P+f*z,s[1]=p*A+m*C+v*F,s[4]=p*T+m*R+v*N,s[7]=p*w+m*P+v*z,s[2]=x*A+_*C+S*F,s[5]=x*T+_*R+S*N,s[8]=x*w+_*P+S*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],u=e[4],c=e[5],f=e[6],p=e[7],m=e[8];return t*u*m-t*c*p-n*s*m+n*c*f+i*s*p-i*u*f}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],u=e[4],c=e[5],f=e[6],p=e[7],m=e[8],v=m*u-c*p,x=c*f-m*s,_=p*s-u*f,S=t*v+n*x+i*_;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/S;return e[0]=v*A,e[1]=(i*p-m*n)*A,e[2]=(c*n-i*u)*A,e[3]=x*A,e[4]=(m*t-i*f)*A,e[5]=(i*s-c*t)*A,e[6]=_*A,e[7]=(n*f-p*t)*A,e[8]=(u*t-n*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,u,c){const f=Math.cos(s),p=Math.sin(s);return this.set(n*f,n*p,-n*(f*u+p*c)+u+e,-i*p,i*f,-i*(-p*u+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Tv.makeScale(e,t)),this}rotate(e){return this.premultiply(Tv.makeRotation(-e)),this}translate(e,t){return this.premultiply(Tv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Tv=new Zt,Mx=new Zt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Tx=new Zt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function IM(){const a={enabled:!0,workingColorSpace:Eu,spaces:{},convert:function(i,s,u){return this.enabled===!1||s===u||!s||!u||(this.spaces[s].transfer===Tn&&(i.r=lo(i.r),i.g=lo(i.g),i.b=lo(i.b)),this.spaces[s].primaries!==this.spaces[u].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===Tn&&(i.r=dc(i.r),i.g=dc(i.g),i.b=dc(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===so?rf:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,u){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return yc("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),a.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return yc("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),a.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return a.define({[Eu]:{primaries:e,whitePoint:n,transfer:rf,toXYZ:Mx,fromXYZ:Tx,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Nr},outputColorSpaceConfig:{drawingBufferColorSpace:Nr}},[Nr]:{primaries:e,whitePoint:n,transfer:Tn,toXYZ:Mx,fromXYZ:Tx,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Nr}}}),a}const pn=IM();function lo(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function dc(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}let Uh;class p1{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Uh===void 0&&(Uh=sf("canvas")),Uh.width=e.width,Uh.height=e.height;const i=Uh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Uh}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sf("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let u=0;u<s.length;u++)s[u]=lo(s[u]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(lo(t[n]/255)*255):t[n]=lo(t[n]);return{data:t,width:e.width,height:e.height}}else return ft("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let PM=0;class nl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:PM++}),this.uuid=ea(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let u=0,c=i.length;u<c;u++)i[u].isDataTexture?s.push(Ev(i[u].image)):s.push(Ev(i[u]))}else s=Ev(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function Ev(a){return typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap?p1.getDataURL(a):a.data?{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(ft("Texture: Unable to serialize Texture."),{})}let LM=0;const Av=new Y;class Qn extends ys{constructor(e=Qn.DEFAULT_IMAGE,t=Qn.DEFAULT_MAPPING,n=Or,i=Or,s=Wn,u=ps,c=$i,f=ga,p=Qn.DEFAULT_ANISOTROPY,m=so){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:LM++}),this.uuid=ea(),this.name="",this.source=new nl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=u,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Ae(0,0),this.repeat=new Ae(1,1),this.center=new Ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Av).x}get height(){return this.source.getSize(Av).y}get depth(){return this.source.getSize(Av).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){ft(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){ft(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $d:e.x=e.x-Math.floor(e.x);break;case Or:e.x=e.x<0?0:1;break;case ef:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $d:e.y=e.y-Math.floor(e.y);break;case Or:e.y=e.y<0?0:1;break;case ef:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Qn.DEFAULT_IMAGE=null;Qn.DEFAULT_MAPPING=hg;Qn.DEFAULT_ANISOTROPY=1;class vn{constructor(e=0,t=0,n=0,i=1){vn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,u=e.elements;return this.x=u[0]*t+u[4]*n+u[8]*i+u[12]*s,this.y=u[1]*t+u[5]*n+u[9]*i+u[13]*s,this.z=u[2]*t+u[6]*n+u[10]*i+u[14]*s,this.w=u[3]*t+u[7]*n+u[11]*i+u[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const f=e.elements,p=f[0],m=f[4],v=f[8],x=f[1],_=f[5],S=f[9],A=f[2],T=f[6],w=f[10];if(Math.abs(m-x)<.01&&Math.abs(v-A)<.01&&Math.abs(S-T)<.01){if(Math.abs(m+x)<.1&&Math.abs(v+A)<.1&&Math.abs(S+T)<.1&&Math.abs(p+_+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(p+1)/2,P=(_+1)/2,F=(w+1)/2,N=(m+x)/4,z=(v+A)/4,G=(S+T)/4;return R>P&&R>F?R<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(R),i=N/n,s=z/n):P>F?P<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(P),n=N/i,s=G/i):F<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(F),n=z/s,i=G/s),this.set(n,i,s,t),this}let C=Math.sqrt((T-S)*(T-S)+(v-A)*(v-A)+(x-m)*(x-m));return Math.abs(C)<.001&&(C=1),this.x=(T-S)/C,this.y=(v-A)/C,this.z=(x-m)/C,this.w=Math.acos((p+_+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this.w=Vt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this.w=Vt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class a0 extends ys{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new vn(0,0,e,t),this.scissorTest=!1,this.viewport=new vn(0,0,e,t);const i={width:e,height:t,depth:n.depth},s=new Qn(i);this.textures=[];const u=n.count;for(let c=0;c<u;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Wn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new nl(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ka extends a0{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class xg extends Qn{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=zi,this.minFilter=zi,this.wrapR=Or,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class NM extends Ka{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new xg(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class _g extends Qn{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=zi,this.minFilter=zi,this.wrapR=Or,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class DM extends Ka{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new _g(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class tr{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ha.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ha.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ha.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let u=0,c=s.count;u<c;u++)e.isMesh===!0?e.getVertexPosition(u,Ha):Ha.fromBufferAttribute(s,u),Ha.applyMatrix4(e.matrixWorld),this.expandByPoint(Ha);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),xp.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),xp.copy(n.boundingBox)),xp.applyMatrix4(e.matrixWorld),this.union(xp)}const i=e.children;for(let s=0,u=i.length;s<u;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ha),Ha.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Md),_p.subVectors(this.max,Md),Fh.subVectors(e.a,Md),Bh.subVectors(e.b,Md),zh.subVectors(e.c,Md),Yo.subVectors(Bh,Fh),qo.subVectors(zh,Bh),eu.subVectors(Fh,zh);let t=[0,-Yo.z,Yo.y,0,-qo.z,qo.y,0,-eu.z,eu.y,Yo.z,0,-Yo.x,qo.z,0,-qo.x,eu.z,0,-eu.x,-Yo.y,Yo.x,0,-qo.y,qo.x,0,-eu.y,eu.x,0];return!kv(t,Fh,Bh,zh,_p)||(t=[1,0,0,0,1,0,0,0,1],!kv(t,Fh,Bh,zh,_p))?!1:(bp.crossVectors(Yo,qo),t=[bp.x,bp.y,bp.z],kv(t,Fh,Bh,zh,_p))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ha).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ha).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Qs=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Ha=new Y,xp=new tr,Fh=new Y,Bh=new Y,zh=new Y,Yo=new Y,qo=new Y,eu=new Y,Md=new Y,_p=new Y,bp=new Y,tu=new Y;function kv(a,e,t,n,i){for(let s=0,u=a.length-3;s<=u;s+=3){tu.fromArray(a,s);const c=i.x*Math.abs(tu.x)+i.y*Math.abs(tu.y)+i.z*Math.abs(tu.z),f=e.dot(tu),p=t.dot(tu),m=n.dot(tu);if(Math.max(-Math.max(f,p,m),Math.min(f,p,m))>c)return!1}return!0}const OM=new tr,Td=new Y,Cv=new Y;class Vi{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):OM.setFromPoints(e).getCenter(n);let i=0;for(let s=0,u=e.length;s<u;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Td.subVectors(e,this.center);const t=Td.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Td,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Cv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Td.copy(e.center).add(Cv)),this.expandByPoint(Td.copy(e.center).sub(Cv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const $s=new Y,Rv=new Y,wp=new Y,Ko=new Y,Iv=new Y,Sp=new Y,Pv=new Y;class Cu{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$s)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$s.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($s.copy(this.origin).addScaledVector(this.direction,t),$s.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Rv.copy(e).add(t).multiplyScalar(.5),wp.copy(t).sub(e).normalize(),Ko.copy(this.origin).sub(Rv);const s=e.distanceTo(t)*.5,u=-this.direction.dot(wp),c=Ko.dot(this.direction),f=-Ko.dot(wp),p=Ko.lengthSq(),m=Math.abs(1-u*u);let v,x,_,S;if(m>0)if(v=u*f-c,x=u*c-f,S=s*m,v>=0)if(x>=-S)if(x<=S){const A=1/m;v*=A,x*=A,_=v*(v+u*x+2*c)+x*(u*v+x+2*f)+p}else x=s,v=Math.max(0,-(u*x+c)),_=-v*v+x*(x+2*f)+p;else x=-s,v=Math.max(0,-(u*x+c)),_=-v*v+x*(x+2*f)+p;else x<=-S?(v=Math.max(0,-(-u*s+c)),x=v>0?-s:Math.min(Math.max(-s,-f),s),_=-v*v+x*(x+2*f)+p):x<=S?(v=0,x=Math.min(Math.max(-s,-f),s),_=x*(x+2*f)+p):(v=Math.max(0,-(u*s+c)),x=v>0?s:Math.min(Math.max(-s,-f),s),_=-v*v+x*(x+2*f)+p);else x=u>0?-s:s,v=Math.max(0,-(u*x+c)),_=-v*v+x*(x+2*f)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,v),i&&i.copy(Rv).addScaledVector(wp,x),_}intersectSphere(e,t){$s.subVectors(e.center,this.origin);const n=$s.dot(this.direction),i=$s.dot($s)-n*n,s=e.radius*e.radius;if(i>s)return null;const u=Math.sqrt(s-i),c=n-u,f=n+u;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,u,c,f;const p=1/this.direction.x,m=1/this.direction.y,v=1/this.direction.z,x=this.origin;return p>=0?(n=(e.min.x-x.x)*p,i=(e.max.x-x.x)*p):(n=(e.max.x-x.x)*p,i=(e.min.x-x.x)*p),m>=0?(s=(e.min.y-x.y)*m,u=(e.max.y-x.y)*m):(s=(e.max.y-x.y)*m,u=(e.min.y-x.y)*m),n>u||s>i||((s>n||isNaN(n))&&(n=s),(u<i||isNaN(i))&&(i=u),v>=0?(c=(e.min.z-x.z)*v,f=(e.max.z-x.z)*v):(c=(e.max.z-x.z)*v,f=(e.min.z-x.z)*v),n>f||c>i)||((c>n||n!==n)&&(n=c),(f<i||i!==i)&&(i=f),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,$s)!==null}intersectTriangle(e,t,n,i,s){Iv.subVectors(t,e),Sp.subVectors(n,e),Pv.crossVectors(Iv,Sp);let u=this.direction.dot(Pv),c;if(u>0){if(i)return null;c=1}else if(u<0)c=-1,u=-u;else return null;Ko.subVectors(this.origin,e);const f=c*this.direction.dot(Sp.crossVectors(Ko,Sp));if(f<0)return null;const p=c*this.direction.dot(Iv.cross(Ko));if(p<0||f+p>u)return null;const m=-c*Ko.dot(Pv);return m<0?null:this.at(m/u,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ht{constructor(e,t,n,i,s,u,c,f,p,m,v,x,_,S,A,T){Ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,u,c,f,p,m,v,x,_,S,A,T)}set(e,t,n,i,s,u,c,f,p,m,v,x,_,S,A,T){const w=this.elements;return w[0]=e,w[4]=t,w[8]=n,w[12]=i,w[1]=s,w[5]=u,w[9]=c,w[13]=f,w[2]=p,w[6]=m,w[10]=v,w[14]=x,w[3]=_,w[7]=S,w[11]=A,w[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ht().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Vh.setFromMatrixColumn(e,0).length(),s=1/Vh.setFromMatrixColumn(e,1).length(),u=1/Vh.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,u=Math.cos(n),c=Math.sin(n),f=Math.cos(i),p=Math.sin(i),m=Math.cos(s),v=Math.sin(s);if(e.order==="XYZ"){const x=u*m,_=u*v,S=c*m,A=c*v;t[0]=f*m,t[4]=-f*v,t[8]=p,t[1]=_+S*p,t[5]=x-A*p,t[9]=-c*f,t[2]=A-x*p,t[6]=S+_*p,t[10]=u*f}else if(e.order==="YXZ"){const x=f*m,_=f*v,S=p*m,A=p*v;t[0]=x+A*c,t[4]=S*c-_,t[8]=u*p,t[1]=u*v,t[5]=u*m,t[9]=-c,t[2]=_*c-S,t[6]=A+x*c,t[10]=u*f}else if(e.order==="ZXY"){const x=f*m,_=f*v,S=p*m,A=p*v;t[0]=x-A*c,t[4]=-u*v,t[8]=S+_*c,t[1]=_+S*c,t[5]=u*m,t[9]=A-x*c,t[2]=-u*p,t[6]=c,t[10]=u*f}else if(e.order==="ZYX"){const x=u*m,_=u*v,S=c*m,A=c*v;t[0]=f*m,t[4]=S*p-_,t[8]=x*p+A,t[1]=f*v,t[5]=A*p+x,t[9]=_*p-S,t[2]=-p,t[6]=c*f,t[10]=u*f}else if(e.order==="YZX"){const x=u*f,_=u*p,S=c*f,A=c*p;t[0]=f*m,t[4]=A-x*v,t[8]=S*v+_,t[1]=v,t[5]=u*m,t[9]=-c*m,t[2]=-p*m,t[6]=_*v+S,t[10]=x-A*v}else if(e.order==="XZY"){const x=u*f,_=u*p,S=c*f,A=c*p;t[0]=f*m,t[4]=-v,t[8]=p*m,t[1]=x*v+A,t[5]=u*m,t[9]=_*v-S,t[2]=S*v-_,t[6]=c*m,t[10]=A*v+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(UM,e,FM)}lookAt(e,t,n){const i=this.elements;return Zr.subVectors(e,t),Zr.lengthSq()===0&&(Zr.z=1),Zr.normalize(),Zo.crossVectors(n,Zr),Zo.lengthSq()===0&&(Math.abs(n.z)===1?Zr.x+=1e-4:Zr.z+=1e-4,Zr.normalize(),Zo.crossVectors(n,Zr)),Zo.normalize(),Mp.crossVectors(Zr,Zo),i[0]=Zo.x,i[4]=Mp.x,i[8]=Zr.x,i[1]=Zo.y,i[5]=Mp.y,i[9]=Zr.y,i[2]=Zo.z,i[6]=Mp.z,i[10]=Zr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,u=n[0],c=n[4],f=n[8],p=n[12],m=n[1],v=n[5],x=n[9],_=n[13],S=n[2],A=n[6],T=n[10],w=n[14],C=n[3],R=n[7],P=n[11],F=n[15],N=i[0],z=i[4],G=i[8],D=i[12],L=i[1],H=i[5],ee=i[9],ne=i[13],me=i[2],fe=i[6],ye=i[10],we=i[14],B=i[3],Q=i[7],K=i[11],j=i[15];return s[0]=u*N+c*L+f*me+p*B,s[4]=u*z+c*H+f*fe+p*Q,s[8]=u*G+c*ee+f*ye+p*K,s[12]=u*D+c*ne+f*we+p*j,s[1]=m*N+v*L+x*me+_*B,s[5]=m*z+v*H+x*fe+_*Q,s[9]=m*G+v*ee+x*ye+_*K,s[13]=m*D+v*ne+x*we+_*j,s[2]=S*N+A*L+T*me+w*B,s[6]=S*z+A*H+T*fe+w*Q,s[10]=S*G+A*ee+T*ye+w*K,s[14]=S*D+A*ne+T*we+w*j,s[3]=C*N+R*L+P*me+F*B,s[7]=C*z+R*H+P*fe+F*Q,s[11]=C*G+R*ee+P*ye+F*K,s[15]=C*D+R*ne+P*we+F*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],u=e[1],c=e[5],f=e[9],p=e[13],m=e[2],v=e[6],x=e[10],_=e[14],S=e[3],A=e[7],T=e[11],w=e[15];return S*(+s*f*v-i*p*v-s*c*x+n*p*x+i*c*_-n*f*_)+A*(+t*f*_-t*p*x+s*u*x-i*u*_+i*p*m-s*f*m)+T*(+t*p*v-t*c*_-s*u*v+n*u*_+s*c*m-n*p*m)+w*(-i*c*m-t*f*v+t*c*x+i*u*v-n*u*x+n*f*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],u=e[4],c=e[5],f=e[6],p=e[7],m=e[8],v=e[9],x=e[10],_=e[11],S=e[12],A=e[13],T=e[14],w=e[15],C=v*T*p-A*x*p+A*f*_-c*T*_-v*f*w+c*x*w,R=S*x*p-m*T*p-S*f*_+u*T*_+m*f*w-u*x*w,P=m*A*p-S*v*p+S*c*_-u*A*_-m*c*w+u*v*w,F=S*v*f-m*A*f-S*c*x+u*A*x+m*c*T-u*v*T,N=t*C+n*R+i*P+s*F;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/N;return e[0]=C*z,e[1]=(A*x*s-v*T*s-A*i*_+n*T*_+v*i*w-n*x*w)*z,e[2]=(c*T*s-A*f*s+A*i*p-n*T*p-c*i*w+n*f*w)*z,e[3]=(v*f*s-c*x*s-v*i*p+n*x*p+c*i*_-n*f*_)*z,e[4]=R*z,e[5]=(m*T*s-S*x*s+S*i*_-t*T*_-m*i*w+t*x*w)*z,e[6]=(S*f*s-u*T*s-S*i*p+t*T*p+u*i*w-t*f*w)*z,e[7]=(u*x*s-m*f*s+m*i*p-t*x*p-u*i*_+t*f*_)*z,e[8]=P*z,e[9]=(S*v*s-m*A*s-S*n*_+t*A*_+m*n*w-t*v*w)*z,e[10]=(u*A*s-S*c*s+S*n*p-t*A*p-u*n*w+t*c*w)*z,e[11]=(m*c*s-u*v*s-m*n*p+t*v*p+u*n*_-t*c*_)*z,e[12]=F*z,e[13]=(m*A*i-S*v*i+S*n*x-t*A*x-m*n*T+t*v*T)*z,e[14]=(S*c*i-u*A*i-S*n*f+t*A*f+u*n*T-t*c*T)*z,e[15]=(u*v*i-m*c*i+m*n*f-t*v*f-u*n*x+t*c*x)*z,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,u=e.x,c=e.y,f=e.z,p=s*u,m=s*c;return this.set(p*u+n,p*c-i*f,p*f+i*c,0,p*c+i*f,m*c+n,m*f-i*u,0,p*f-i*c,m*f+i*u,s*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,u){return this.set(1,n,s,0,e,1,u,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,u=t._y,c=t._z,f=t._w,p=s+s,m=u+u,v=c+c,x=s*p,_=s*m,S=s*v,A=u*m,T=u*v,w=c*v,C=f*p,R=f*m,P=f*v,F=n.x,N=n.y,z=n.z;return i[0]=(1-(A+w))*F,i[1]=(_+P)*F,i[2]=(S-R)*F,i[3]=0,i[4]=(_-P)*N,i[5]=(1-(x+w))*N,i[6]=(T+C)*N,i[7]=0,i[8]=(S+R)*z,i[9]=(T-C)*z,i[10]=(1-(x+A))*z,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Vh.set(i[0],i[1],i[2]).length();const u=Vh.set(i[4],i[5],i[6]).length(),c=Vh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ja.copy(this);const p=1/s,m=1/u,v=1/c;return ja.elements[0]*=p,ja.elements[1]*=p,ja.elements[2]*=p,ja.elements[4]*=m,ja.elements[5]*=m,ja.elements[6]*=m,ja.elements[8]*=v,ja.elements[9]*=v,ja.elements[10]*=v,t.setFromRotationMatrix(ja),n.x=s,n.y=u,n.z=c,this}makePerspective(e,t,n,i,s,u,c=$r,f=!1){const p=this.elements,m=2*s/(t-e),v=2*s/(n-i),x=(t+e)/(t-e),_=(n+i)/(n-i);let S,A;if(f)S=s/(u-s),A=u*s/(u-s);else if(c===$r)S=-(u+s)/(u-s),A=-2*u*s/(u-s);else if(c===vc)S=-u/(u-s),A=-u*s/(u-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return p[0]=m,p[4]=0,p[8]=x,p[12]=0,p[1]=0,p[5]=v,p[9]=_,p[13]=0,p[2]=0,p[6]=0,p[10]=S,p[14]=A,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,n,i,s,u,c=$r,f=!1){const p=this.elements,m=2/(t-e),v=2/(n-i),x=-(t+e)/(t-e),_=-(n+i)/(n-i);let S,A;if(f)S=1/(u-s),A=u/(u-s);else if(c===$r)S=-2/(u-s),A=-(u+s)/(u-s);else if(c===vc)S=-1/(u-s),A=-s/(u-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return p[0]=m,p[4]=0,p[8]=0,p[12]=x,p[1]=0,p[5]=v,p[9]=0,p[13]=_,p[2]=0,p[6]=0,p[10]=S,p[14]=A,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Vh=new Y,ja=new Ht,UM=new Y(0,0,0),FM=new Y(1,1,1),Zo=new Y,Mp=new Y,Zr=new Y,Ex=new Ht,Ax=new er;class ta{constructor(e=0,t=0,n=0,i=ta.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],u=i[4],c=i[8],f=i[1],p=i[5],m=i[9],v=i[2],x=i[6],_=i[10];switch(t){case"XYZ":this._y=Math.asin(Vt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,_),this._z=Math.atan2(-u,s)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Vt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(f,p)):(this._y=Math.atan2(-v,s),this._z=0);break;case"ZXY":this._x=Math.asin(Vt(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-v,_),this._z=Math.atan2(-u,p)):(this._y=0,this._z=Math.atan2(f,s));break;case"ZYX":this._y=Math.asin(-Vt(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(x,_),this._z=Math.atan2(f,s)):(this._x=0,this._z=Math.atan2(-u,p));break;case"YZX":this._z=Math.asin(Vt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,p),this._y=Math.atan2(-v,s)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-Vt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-m,_),this._y=0);break;default:ft("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ex.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ex,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ax.setFromEuler(this),this.setFromQuaternion(Ax,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ta.DEFAULT_ORDER="XYZ";class Su{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let BM=0;const kx=new Y,Hh=new er,eo=new Ht,Tp=new Y,Ed=new Y,zM=new Y,VM=new er,Cx=new Y(1,0,0),Rx=new Y(0,1,0),Ix=new Y(0,0,1),Px={type:"added"},HM={type:"removed"},jh={type:"childadded",child:null},Lv={type:"childremoved",child:null};class yn extends ys{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:BM++}),this.uuid=ea(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yn.DEFAULT_UP.clone();const e=new Y,t=new ta,n=new er,i=new Y(1,1,1);function s(){n.setFromEuler(t,!1)}function u(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ht},normalMatrix:{value:new Zt}}),this.matrix=new Ht,this.matrixWorld=new Ht,this.matrixAutoUpdate=yn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Su,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hh.setFromAxisAngle(e,t),this.quaternion.multiply(Hh),this}rotateOnWorldAxis(e,t){return Hh.setFromAxisAngle(e,t),this.quaternion.premultiply(Hh),this}rotateX(e){return this.rotateOnAxis(Cx,e)}rotateY(e){return this.rotateOnAxis(Rx,e)}rotateZ(e){return this.rotateOnAxis(Ix,e)}translateOnAxis(e,t){return kx.copy(e).applyQuaternion(this.quaternion),this.position.add(kx.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Cx,e)}translateY(e){return this.translateOnAxis(Rx,e)}translateZ(e){return this.translateOnAxis(Ix,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(eo.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Tp.copy(e):Tp.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ed.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eo.lookAt(Ed,Tp,this.up):eo.lookAt(Tp,Ed,this.up),this.quaternion.setFromRotationMatrix(eo),i&&(eo.extractRotation(i.matrixWorld),Hh.setFromRotationMatrix(eo),this.quaternion.premultiply(Hh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Wt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Px),jh.child=e,this.dispatchEvent(jh),jh.child=null):Wt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(HM),Lv.child=e,this.dispatchEvent(Lv),Lv.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),eo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),eo.multiply(e.parent.matrixWorld)),e.applyMatrix4(eo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Px),jh.child=e,this.dispatchEvent(jh),jh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const u=this.children[n].getObjectByProperty(e,t);if(u!==void 0)return u}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,u=i.length;s<u;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ed,e,zM),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ed,VM,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,u=i.length;s<u;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(c=>({...c})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let p=0,m=f.length;p<m;p++){const v=f[p];s(e.shapes,v)}else s(e.shapes,f)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,p=this.material.length;f<p;f++)c.push(s(e.materials,this.material[f]));i.material=c}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let c=0;c<this.children.length;c++)i.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];i.animations.push(s(e.animations,f))}}if(t){const c=u(e.geometries),f=u(e.materials),p=u(e.textures),m=u(e.images),v=u(e.shapes),x=u(e.skeletons),_=u(e.animations),S=u(e.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),p.length>0&&(n.textures=p),m.length>0&&(n.images=m),v.length>0&&(n.shapes=v),x.length>0&&(n.skeletons=x),_.length>0&&(n.animations=_),S.length>0&&(n.nodes=S)}return n.object=i,n;function u(c){const f=[];for(const p in c){const m=c[p];delete m.metadata,f.push(m)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}yn.DEFAULT_UP=new Y(0,1,0);yn.DEFAULT_MATRIX_AUTO_UPDATE=!0;yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ga=new Y,to=new Y,Nv=new Y,no=new Y,Gh=new Y,Wh=new Y,Lx=new Y,Dv=new Y,Ov=new Y,Uv=new Y,Fv=new vn,Bv=new vn,zv=new vn;class Dr{constructor(e=new Y,t=new Y,n=new Y){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Ga.subVectors(e,t),i.cross(Ga);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Ga.subVectors(i,t),to.subVectors(n,t),Nv.subVectors(e,t);const u=Ga.dot(Ga),c=Ga.dot(to),f=Ga.dot(Nv),p=to.dot(to),m=to.dot(Nv),v=u*p-c*c;if(v===0)return s.set(0,0,0),null;const x=1/v,_=(p*f-c*m)*x,S=(u*m-c*f)*x;return s.set(1-_-S,S,_)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,no)===null?!1:no.x>=0&&no.y>=0&&no.x+no.y<=1}static getInterpolation(e,t,n,i,s,u,c,f){return this.getBarycoord(e,t,n,i,no)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(s,no.x),f.addScaledVector(u,no.y),f.addScaledVector(c,no.z),f)}static getInterpolatedAttribute(e,t,n,i,s,u){return Fv.setScalar(0),Bv.setScalar(0),zv.setScalar(0),Fv.fromBufferAttribute(e,t),Bv.fromBufferAttribute(e,n),zv.fromBufferAttribute(e,i),u.setScalar(0),u.addScaledVector(Fv,s.x),u.addScaledVector(Bv,s.y),u.addScaledVector(zv,s.z),u}static isFrontFacing(e,t,n,i){return Ga.subVectors(n,t),to.subVectors(e,t),Ga.cross(to).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ga.subVectors(this.c,this.b),to.subVectors(this.a,this.b),Ga.cross(to).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Dr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Dr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return Dr.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Dr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Dr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let u,c;Gh.subVectors(i,n),Wh.subVectors(s,n),Dv.subVectors(e,n);const f=Gh.dot(Dv),p=Wh.dot(Dv);if(f<=0&&p<=0)return t.copy(n);Ov.subVectors(e,i);const m=Gh.dot(Ov),v=Wh.dot(Ov);if(m>=0&&v<=m)return t.copy(i);const x=f*v-m*p;if(x<=0&&f>=0&&m<=0)return u=f/(f-m),t.copy(n).addScaledVector(Gh,u);Uv.subVectors(e,s);const _=Gh.dot(Uv),S=Wh.dot(Uv);if(S>=0&&_<=S)return t.copy(s);const A=_*p-f*S;if(A<=0&&p>=0&&S<=0)return c=p/(p-S),t.copy(n).addScaledVector(Wh,c);const T=m*S-_*v;if(T<=0&&v-m>=0&&_-S>=0)return Lx.subVectors(s,i),c=(v-m)/(v-m+(_-S)),t.copy(i).addScaledVector(Lx,c);const w=1/(T+A+x);return u=A*w,c=x*w,t.copy(n).addScaledVector(Gh,u).addScaledVector(Wh,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const m1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jo={h:0,s:0,l:0},Ep={h:0,s:0,l:0};function Vv(a,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+(e-a)*6*t:t<1/2?e:t<2/3?a+(e-a)*6*(2/3-t):a}class xt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Nr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,pn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,i=pn.workingColorSpace){return this.r=e,this.g=t,this.b=n,pn.colorSpaceToWorking(this,i),this}setHSL(e,t,n,i=pn.workingColorSpace){if(e=r0(e,1),t=Vt(t,0,1),n=Vt(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,u=2*n-s;this.r=Vv(u,s,e+1/3),this.g=Vv(u,s,e),this.b=Vv(u,s,e-1/3)}return pn.colorSpaceToWorking(this,i),this}setStyle(e,t=Nr){function n(s){s!==void 0&&parseFloat(s)<1&&ft("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const u=i[1],c=i[2];switch(u){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:ft("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],u=s.length;if(u===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(u===6)return this.setHex(parseInt(s,16),t);ft("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Nr){const n=m1[e.toLowerCase()];return n!==void 0?this.setHex(n,t):ft("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lo(e.r),this.g=lo(e.g),this.b=lo(e.b),this}copyLinearToSRGB(e){return this.r=dc(e.r),this.g=dc(e.g),this.b=dc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Nr){return pn.workingToColorSpace(Ji.copy(this),e),Math.round(Vt(Ji.r*255,0,255))*65536+Math.round(Vt(Ji.g*255,0,255))*256+Math.round(Vt(Ji.b*255,0,255))}getHexString(e=Nr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=pn.workingColorSpace){pn.workingToColorSpace(Ji.copy(this),t);const n=Ji.r,i=Ji.g,s=Ji.b,u=Math.max(n,i,s),c=Math.min(n,i,s);let f,p;const m=(c+u)/2;if(c===u)f=0,p=0;else{const v=u-c;switch(p=m<=.5?v/(u+c):v/(2-u-c),u){case n:f=(i-s)/v+(i<s?6:0);break;case i:f=(s-n)/v+2;break;case s:f=(n-i)/v+4;break}f/=6}return e.h=f,e.s=p,e.l=m,e}getRGB(e,t=pn.workingColorSpace){return pn.workingToColorSpace(Ji.copy(this),t),e.r=Ji.r,e.g=Ji.g,e.b=Ji.b,e}getStyle(e=Nr){pn.workingToColorSpace(Ji.copy(this),e);const t=Ji.r,n=Ji.g,i=Ji.b;return e!==Nr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Jo),this.setHSL(Jo.h+e,Jo.s+t,Jo.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Jo),e.getHSL(Ep);const n=qd(Jo.h,Ep.h,t),i=qd(Jo.s,Ep.s,t),s=qd(Jo.l,Ep.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ji=new xt;xt.NAMES=m1;let jM=0;class nr extends ys{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jM++}),this.uuid=ea(),this.name="",this.type="Material",this.blending=bu,this.side=uo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=vm,this.blendDst=ym,this.blendEquation=tl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xt(0,0,0),this.blendAlpha=0,this.depthFunc=Tu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ly,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gu,this.stencilZFail=gu,this.stencilZPass=gu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){ft(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){ft(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==bu&&(n.blending=this.blending),this.side!==uo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==vm&&(n.blendSrc=this.blendSrc),this.blendDst!==ym&&(n.blendDst=this.blendDst),this.blendEquation!==tl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Tu&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ly&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==gu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==gu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==gu&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const u=[];for(const c in s){const f=s[c];delete f.metadata,u.push(f)}return u}if(t){const s=i(e.textures),u=i(e.images);s.length>0&&(n.textures=s),u.length>0&&(n.images=u)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class hl extends nr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ta,this.combine=mf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const oo=GM();function GM(){const a=new ArrayBuffer(4),e=new Float32Array(a),t=new Uint32Array(a),n=new Uint32Array(512),i=new Uint32Array(512);for(let f=0;f<256;++f){const p=f-127;p<-27?(n[f]=0,n[f|256]=32768,i[f]=24,i[f|256]=24):p<-14?(n[f]=1024>>-p-14,n[f|256]=1024>>-p-14|32768,i[f]=-p-1,i[f|256]=-p-1):p<=15?(n[f]=p+15<<10,n[f|256]=p+15<<10|32768,i[f]=13,i[f|256]=13):p<128?(n[f]=31744,n[f|256]=64512,i[f]=24,i[f|256]=24):(n[f]=31744,n[f|256]=64512,i[f]=13,i[f|256]=13)}const s=new Uint32Array(2048),u=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let p=f<<13,m=0;for(;(p&8388608)===0;)p<<=1,m-=8388608;p&=-8388609,m+=947912704,s[f]=p|m}for(let f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)u[f]=f<<23;u[31]=1199570944,u[32]=2147483648;for(let f=33;f<63;++f)u[f]=2147483648+(f-32<<23);u[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:u,offsetTable:c}}function Lr(a){Math.abs(a)>65504&&ft("DataUtils.toHalfFloat(): Value out of range."),a=Vt(a,-65504,65504),oo.floatView[0]=a;const e=oo.uint32View[0],t=e>>23&511;return oo.baseTable[t]+((e&8388607)>>oo.shiftTable[t])}function Bd(a){const e=a>>10;return oo.uint32View[0]=oo.mantissaTable[oo.offsetTable[e]+(a&1023)]+oo.exponentTable[e],oo.floatView[0]}class WM{static toHalfFloat(e){return Lr(e)}static fromHalfFloat(e){return Bd(e)}}const di=new Y,Ap=new Ae;let XM=0;class Cn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:XM++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=af,this.updateRanges=[],this.gpuType=vr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Ap.fromBufferAttribute(this,t),Ap.applyMatrix3(e),this.setXY(t,Ap.x,Ap.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)di.fromBufferAttribute(this,t),di.applyMatrix3(e),this.setXYZ(t,di.x,di.y,di.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)di.fromBufferAttribute(this,t),di.applyMatrix4(e),this.setXYZ(t,di.x,di.y,di.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)di.fromBufferAttribute(this,t),di.applyNormalMatrix(e),this.setXYZ(t,di.x,di.y,di.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)di.fromBufferAttribute(this,t),di.transformDirection(e),this.setXYZ(t,di.x,di.y,di.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=gr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=$t(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=gr(t,this.array)),t}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=gr(t,this.array)),t}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=gr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=gr(t,this.array)),t}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array),s=$t(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==af&&(e.usage=this.usage),e}}class YM extends Cn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class qM extends Cn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class KM extends Cn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class ZM extends Cn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class s0 extends Cn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class JM extends Cn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class o0 extends Cn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class QM extends Cn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Bd(this.array[e*this.itemSize]);return this.normalized&&(t=gr(t,this.array)),t}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize]=Lr(t),this}getY(e){let t=Bd(this.array[e*this.itemSize+1]);return this.normalized&&(t=gr(t,this.array)),t}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+1]=Lr(t),this}getZ(e){let t=Bd(this.array[e*this.itemSize+2]);return this.normalized&&(t=gr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+2]=Lr(t),this}getW(e){let t=Bd(this.array[e*this.itemSize+3]);return this.normalized&&(t=gr(t,this.array)),t}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+3]=Lr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.array[e+0]=Lr(t),this.array[e+1]=Lr(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array)),this.array[e+0]=Lr(t),this.array[e+1]=Lr(n),this.array[e+2]=Lr(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array),s=$t(s,this.array)),this.array[e+0]=Lr(t),this.array[e+1]=Lr(n),this.array[e+2]=Lr(i),this.array[e+3]=Lr(s),this}}class At extends Cn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let $M=0;const pa=new Ht,Hv=new yn,Xh=new Y,Jr=new tr,Ad=new tr,Ci=new Y;class Jt extends ys{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:$M++}),this.uuid=ea(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(c1(e)?o0:s0)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Zt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return pa.makeRotationFromQuaternion(e),this.applyMatrix4(pa),this}rotateX(e){return pa.makeRotationX(e),this.applyMatrix4(pa),this}rotateY(e){return pa.makeRotationY(e),this.applyMatrix4(pa),this}rotateZ(e){return pa.makeRotationZ(e),this.applyMatrix4(pa),this}translate(e,t,n){return pa.makeTranslation(e,t,n),this.applyMatrix4(pa),this}scale(e,t,n){return pa.makeScale(e,t,n),this.applyMatrix4(pa),this}lookAt(e){return Hv.lookAt(e),Hv.updateMatrix(),this.applyMatrix4(Hv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xh).negate(),this.translate(Xh.x,Xh.y,Xh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,s=e.length;i<s;i++){const u=e[i];n.push(u.x,u.y,u.z||0)}this.setAttribute("position",new At(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&ft("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new tr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Wt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Jr.setFromBufferAttribute(s),this.morphTargetsRelative?(Ci.addVectors(this.boundingBox.min,Jr.min),this.boundingBox.expandByPoint(Ci),Ci.addVectors(this.boundingBox.max,Jr.max),this.boundingBox.expandByPoint(Ci)):(this.boundingBox.expandByPoint(Jr.min),this.boundingBox.expandByPoint(Jr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Wt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Wt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const n=this.boundingSphere.center;if(Jr.setFromBufferAttribute(e),t)for(let s=0,u=t.length;s<u;s++){const c=t[s];Ad.setFromBufferAttribute(c),this.morphTargetsRelative?(Ci.addVectors(Jr.min,Ad.min),Jr.expandByPoint(Ci),Ci.addVectors(Jr.max,Ad.max),Jr.expandByPoint(Ci)):(Jr.expandByPoint(Ad.min),Jr.expandByPoint(Ad.max))}Jr.getCenter(n);let i=0;for(let s=0,u=e.count;s<u;s++)Ci.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Ci));if(t)for(let s=0,u=t.length;s<u;s++){const c=t[s],f=this.morphTargetsRelative;for(let p=0,m=c.count;p<m;p++)Ci.fromBufferAttribute(c,p),f&&(Xh.fromBufferAttribute(e,p),Ci.add(Xh)),i=Math.max(i,n.distanceToSquared(Ci))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&Wt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Wt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Cn(new Float32Array(4*n.count),4));const u=this.getAttribute("tangent"),c=[],f=[];for(let G=0;G<n.count;G++)c[G]=new Y,f[G]=new Y;const p=new Y,m=new Y,v=new Y,x=new Ae,_=new Ae,S=new Ae,A=new Y,T=new Y;function w(G,D,L){p.fromBufferAttribute(n,G),m.fromBufferAttribute(n,D),v.fromBufferAttribute(n,L),x.fromBufferAttribute(s,G),_.fromBufferAttribute(s,D),S.fromBufferAttribute(s,L),m.sub(p),v.sub(p),_.sub(x),S.sub(x);const H=1/(_.x*S.y-S.x*_.y);isFinite(H)&&(A.copy(m).multiplyScalar(S.y).addScaledVector(v,-_.y).multiplyScalar(H),T.copy(v).multiplyScalar(_.x).addScaledVector(m,-S.x).multiplyScalar(H),c[G].add(A),c[D].add(A),c[L].add(A),f[G].add(T),f[D].add(T),f[L].add(T))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let G=0,D=C.length;G<D;++G){const L=C[G],H=L.start,ee=L.count;for(let ne=H,me=H+ee;ne<me;ne+=3)w(e.getX(ne+0),e.getX(ne+1),e.getX(ne+2))}const R=new Y,P=new Y,F=new Y,N=new Y;function z(G){F.fromBufferAttribute(i,G),N.copy(F);const D=c[G];R.copy(D),R.sub(F.multiplyScalar(F.dot(D))).normalize(),P.crossVectors(N,D);const H=P.dot(f[G])<0?-1:1;u.setXYZW(G,R.x,R.y,R.z,H)}for(let G=0,D=C.length;G<D;++G){const L=C[G],H=L.start,ee=L.count;for(let ne=H,me=H+ee;ne<me;ne+=3)z(e.getX(ne+0)),z(e.getX(ne+1)),z(e.getX(ne+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Cn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let x=0,_=n.count;x<_;x++)n.setXYZ(x,0,0,0);const i=new Y,s=new Y,u=new Y,c=new Y,f=new Y,p=new Y,m=new Y,v=new Y;if(e)for(let x=0,_=e.count;x<_;x+=3){const S=e.getX(x+0),A=e.getX(x+1),T=e.getX(x+2);i.fromBufferAttribute(t,S),s.fromBufferAttribute(t,A),u.fromBufferAttribute(t,T),m.subVectors(u,s),v.subVectors(i,s),m.cross(v),c.fromBufferAttribute(n,S),f.fromBufferAttribute(n,A),p.fromBufferAttribute(n,T),c.add(m),f.add(m),p.add(m),n.setXYZ(S,c.x,c.y,c.z),n.setXYZ(A,f.x,f.y,f.z),n.setXYZ(T,p.x,p.y,p.z)}else for(let x=0,_=t.count;x<_;x+=3)i.fromBufferAttribute(t,x+0),s.fromBufferAttribute(t,x+1),u.fromBufferAttribute(t,x+2),m.subVectors(u,s),v.subVectors(i,s),m.cross(v),n.setXYZ(x+0,m.x,m.y,m.z),n.setXYZ(x+1,m.x,m.y,m.z),n.setXYZ(x+2,m.x,m.y,m.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ci.fromBufferAttribute(e,t),Ci.normalize(),e.setXYZ(t,Ci.x,Ci.y,Ci.z)}toNonIndexed(){function e(c,f){const p=c.array,m=c.itemSize,v=c.normalized,x=new p.constructor(f.length*m);let _=0,S=0;for(let A=0,T=f.length;A<T;A++){c.isInterleavedBufferAttribute?_=f[A]*c.data.stride+c.offset:_=f[A]*m;for(let w=0;w<m;w++)x[S++]=p[_++]}return new Cn(x,m,v)}if(this.index===null)return ft("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jt,n=this.index.array,i=this.attributes;for(const c in i){const f=i[c],p=e(f,n);t.setAttribute(c,p)}const s=this.morphAttributes;for(const c in s){const f=[],p=s[c];for(let m=0,v=p.length;m<v;m++){const x=p[m],_=e(x,n);f.push(_)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let c=0,f=u.length;c<f;c++){const p=u[c];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const p in f)f[p]!==void 0&&(e[p]=f[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const p=n[f];e.data.attributes[f]=p.toJSON(e.data)}const i={};let s=!1;for(const f in this.morphAttributes){const p=this.morphAttributes[f],m=[];for(let v=0,x=p.length;v<x;v++){const _=p[v];m.push(_.toJSON(e.data))}m.length>0&&(i[f]=m,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere=c.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const i=e.attributes;for(const p in i){const m=i[p];this.setAttribute(p,m.clone(t))}const s=e.morphAttributes;for(const p in s){const m=[],v=s[p];for(let x=0,_=v.length;x<_;x++)m.push(v[x].clone(t));this.morphAttributes[p]=m}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let p=0,m=u.length;p<m;p++){const v=u[p];this.addGroup(v.start,v.count,v.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Nx=new Ht,nu=new Cu,kp=new Vi,Dx=new Y,Cp=new Y,Rp=new Y,Ip=new Y,jv=new Y,Pp=new Y,Ox=new Y,Lp=new Y;class _i extends yn{constructor(e=new Jt,t=new hl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,u=i.length;s<u;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,u=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const c=this.morphTargetInfluences;if(s&&c){Pp.set(0,0,0);for(let f=0,p=s.length;f<p;f++){const m=c[f],v=s[f];m!==0&&(jv.fromBufferAttribute(v,e),u?Pp.addScaledVector(jv,m):Pp.addScaledVector(jv.sub(t),m))}t.add(Pp)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),kp.copy(n.boundingSphere),kp.applyMatrix4(s),nu.copy(e.ray).recast(e.near),!(kp.containsPoint(nu.origin)===!1&&(nu.intersectSphere(kp,Dx)===null||nu.origin.distanceToSquared(Dx)>(e.far-e.near)**2))&&(Nx.copy(s).invert(),nu.copy(e.ray).applyMatrix4(Nx),!(n.boundingBox!==null&&nu.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,nu)))}_computeIntersections(e,t,n){let i;const s=this.geometry,u=this.material,c=s.index,f=s.attributes.position,p=s.attributes.uv,m=s.attributes.uv1,v=s.attributes.normal,x=s.groups,_=s.drawRange;if(c!==null)if(Array.isArray(u))for(let S=0,A=x.length;S<A;S++){const T=x[S],w=u[T.materialIndex],C=Math.max(T.start,_.start),R=Math.min(c.count,Math.min(T.start+T.count,_.start+_.count));for(let P=C,F=R;P<F;P+=3){const N=c.getX(P),z=c.getX(P+1),G=c.getX(P+2);i=Np(this,w,e,n,p,m,v,N,z,G),i&&(i.faceIndex=Math.floor(P/3),i.face.materialIndex=T.materialIndex,t.push(i))}}else{const S=Math.max(0,_.start),A=Math.min(c.count,_.start+_.count);for(let T=S,w=A;T<w;T+=3){const C=c.getX(T),R=c.getX(T+1),P=c.getX(T+2);i=Np(this,u,e,n,p,m,v,C,R,P),i&&(i.faceIndex=Math.floor(T/3),t.push(i))}}else if(f!==void 0)if(Array.isArray(u))for(let S=0,A=x.length;S<A;S++){const T=x[S],w=u[T.materialIndex],C=Math.max(T.start,_.start),R=Math.min(f.count,Math.min(T.start+T.count,_.start+_.count));for(let P=C,F=R;P<F;P+=3){const N=P,z=P+1,G=P+2;i=Np(this,w,e,n,p,m,v,N,z,G),i&&(i.faceIndex=Math.floor(P/3),i.face.materialIndex=T.materialIndex,t.push(i))}}else{const S=Math.max(0,_.start),A=Math.min(f.count,_.start+_.count);for(let T=S,w=A;T<w;T+=3){const C=T,R=T+1,P=T+2;i=Np(this,u,e,n,p,m,v,C,R,P),i&&(i.faceIndex=Math.floor(T/3),t.push(i))}}}}function e3(a,e,t,n,i,s,u,c){let f;if(e.side===yr?f=n.intersectTriangle(u,s,i,!0,c):f=n.intersectTriangle(i,s,u,e.side===uo,c),f===null)return null;Lp.copy(c),Lp.applyMatrix4(a.matrixWorld);const p=t.ray.origin.distanceTo(Lp);return p<t.near||p>t.far?null:{distance:p,point:Lp.clone(),object:a}}function Np(a,e,t,n,i,s,u,c,f,p){a.getVertexPosition(c,Cp),a.getVertexPosition(f,Rp),a.getVertexPosition(p,Ip);const m=e3(a,e,t,n,Cp,Rp,Ip,Ox);if(m){const v=new Y;Dr.getBarycoord(Ox,Cp,Rp,Ip,v),i&&(m.uv=Dr.getInterpolatedAttribute(i,c,f,p,v,new Ae)),s&&(m.uv1=Dr.getInterpolatedAttribute(s,c,f,p,v,new Ae)),u&&(m.normal=Dr.getInterpolatedAttribute(u,c,f,p,v,new Y),m.normal.dot(n.direction)>0&&m.normal.multiplyScalar(-1));const x={a:c,b:f,c:p,normal:new Y,materialIndex:0};Dr.getNormal(Cp,Rp,Ip,x.normal),m.face=x,m.barycoord=v}return m}class Ru extends Jt{constructor(e=1,t=1,n=1,i=1,s=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:u};const c=this;i=Math.floor(i),s=Math.floor(s),u=Math.floor(u);const f=[],p=[],m=[],v=[];let x=0,_=0;S("z","y","x",-1,-1,n,t,e,u,s,0),S("z","y","x",1,-1,n,t,-e,u,s,1),S("x","z","y",1,1,e,n,t,i,u,2),S("x","z","y",1,-1,e,n,-t,i,u,3),S("x","y","z",1,-1,e,t,n,i,s,4),S("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(f),this.setAttribute("position",new At(p,3)),this.setAttribute("normal",new At(m,3)),this.setAttribute("uv",new At(v,2));function S(A,T,w,C,R,P,F,N,z,G,D){const L=P/z,H=F/G,ee=P/2,ne=F/2,me=N/2,fe=z+1,ye=G+1;let we=0,B=0;const Q=new Y;for(let K=0;K<ye;K++){const j=K*H-ne;for(let ie=0;ie<fe;ie++){const Ce=ie*L-ee;Q[A]=Ce*C,Q[T]=j*R,Q[w]=me,p.push(Q.x,Q.y,Q.z),Q[A]=0,Q[T]=0,Q[w]=N>0?1:-1,m.push(Q.x,Q.y,Q.z),v.push(ie/z),v.push(1-K/G),we+=1}}for(let K=0;K<G;K++)for(let j=0;j<z;j++){const ie=x+j+fe*K,Ce=x+j+fe*(K+1),Ye=x+(j+1)+fe*(K+1),at=x+(j+1)+fe*K;f.push(ie,Ce,at),f.push(Ce,Ye,at),B+=6}c.addGroup(_,B,D),_+=B,x+=we}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ru(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function _c(a){const e={};for(const t in a){e[t]={};for(const n in a[t]){const i=a[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(ft("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function mr(a){const e={};for(let t=0;t<a.length;t++){const n=_c(a[t]);for(const i in n)e[i]=n[i]}return e}function t3(a){const e=[];for(let t=0;t<a.length;t++)e.push(a[t].clone());return e}function g1(a){const e=a.getRenderTarget();return e===null?a.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:pn.workingColorSpace}const v1={clone:_c,merge:mr};var n3=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,i3=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class va extends nr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=n3,this.fragmentShader=i3,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_c(e.uniforms),this.uniformsGroups=t3(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const u=this.uniforms[i].value;u&&u.isTexture?t.uniforms[i]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?t.uniforms[i]={type:"c",value:u.getHex()}:u&&u.isVector2?t.uniforms[i]={type:"v2",value:u.toArray()}:u&&u.isVector3?t.uniforms[i]={type:"v3",value:u.toArray()}:u&&u.isVector4?t.uniforms[i]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?t.uniforms[i]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?t.uniforms[i]={type:"m4",value:u.toArray()}:t.uniforms[i]={value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class vf extends yn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ht,this.projectionMatrix=new Ht,this.projectionMatrixInverse=new Ht,this.coordinateSystem=$r,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Qo=new Y,Ux=new Ae,Fx=new Ae;let ii=class extends vf{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=xc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(wu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return xc*2*Math.atan(Math.tan(wu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Qo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z),Qo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z)}getViewSize(e,t){return this.getViewBounds(e,Ux,Fx),t.subVectors(Fx,Ux)}setViewOffset(e,t,n,i,s,u){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(wu*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const u=this.view;if(this.view!==null&&this.view.enabled){const f=u.fullWidth,p=u.fullHeight;s+=u.offsetX*i/f,t-=u.offsetY*n/p,i*=u.width/f,n*=u.height/p}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Yh=-90,qh=1;class y1 extends yn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ii(Yh,qh,e,t);i.layers=this.layers,this.add(i);const s=new ii(Yh,qh,e,t);s.layers=this.layers,this.add(s);const u=new ii(Yh,qh,e,t);u.layers=this.layers,this.add(u);const c=new ii(Yh,qh,e,t);c.layers=this.layers,this.add(c);const f=new ii(Yh,qh,e,t);f.layers=this.layers,this.add(f);const p=new ii(Yh,qh,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,u,c,f]=t;for(const p of t)this.remove(p);if(e===$r)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===vc)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,u,c,f,p,m]=this.children,v=e.getRenderTarget(),x=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,u),e.setRenderTarget(n,2,i),e.render(t,c),e.setRenderTarget(n,3,i),e.render(t,f),e.setRenderTarget(n,4,i),e.render(t,p),n.texture.generateMipmaps=A,e.setRenderTarget(n,5,i),e.render(t,m),e.setRenderTarget(v,x,_),e.xr.enabled=S,n.texture.needsPMREMUpdate=!0}}class yf extends Qn{constructor(e=[],t=ho,n,i,s,u,c,f,p,m){super(e,t,n,i,s,u,c,f,p,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class x1 extends Ka{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new yf(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ru(5,5,5),s=new va({name:"CubemapFromEquirect",uniforms:_c(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:yr,blending:gs});s.uniforms.tEquirect.value=t;const u=new _i(i,s),c=t.minFilter;return t.minFilter===ps&&(t.minFilter=Wn),new y1(1,10,this).update(e,u),t.minFilter=c,u.geometry.dispose(),u.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const s=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,n,i);e.setRenderTarget(s)}}class hc extends yn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const r3={type:"move"};class pm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,u=null;const c=this._targetRay,f=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){u=!0;for(const A of e.hand.values()){const T=t.getJointPose(A,n),w=this._getHandJoint(p,A);T!==null&&(w.matrix.fromArray(T.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=T.radius),w.visible=T!==null}const m=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],x=m.position.distanceTo(v.position),_=.02,S=.005;p.inputState.pinching&&x>_+S?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&x<=_-S&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(f.matrix.fromArray(s.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,s.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(s.linearVelocity)):f.hasLinearVelocity=!1,s.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(s.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(c.matrix.fromArray(i.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,i.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(i.linearVelocity)):c.hasLinearVelocity=!1,i.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(i.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(r3)))}return c!==null&&(c.visible=i!==null),f!==null&&(f.visible=s!==null),p!==null&&(p.visible=u!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new hc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class bg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new xt(e),this.density=t}clone(){return new bg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class wg{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new xt(e),this.near=t,this.far=n}clone(){return new wg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class l0 extends yn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ta,this.environmentIntensity=1,this.environmentRotation=new ta,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Sg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=af,this.updateRanges=[],this.version=0,this.uuid=ea()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ea()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ea()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const pr=new Y;class Au{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)pr.fromBufferAttribute(this,t),pr.applyMatrix4(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)pr.fromBufferAttribute(this,t),pr.applyNormalMatrix(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)pr.fromBufferAttribute(this,t),pr.transformDirection(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=gr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=$t(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=gr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=gr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=gr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=gr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array),s=$t(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){of("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Cn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Au(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){of("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class u0 extends nr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Kh;const kd=new Y,Zh=new Y,Jh=new Y,Qh=new Ae,Cd=new Ae,_1=new Ht,Dp=new Y,Rd=new Y,Op=new Y,Bx=new Ae,Gv=new Ae,zx=new Ae;class b1 extends yn{constructor(e=new u0){if(super(),this.isSprite=!0,this.type="Sprite",Kh===void 0){Kh=new Jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Sg(t,5);Kh.setIndex([0,1,2,0,2,3]),Kh.setAttribute("position",new Au(n,3,0,!1)),Kh.setAttribute("uv",new Au(n,2,3,!1))}this.geometry=Kh,this.material=e,this.center=new Ae(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Wt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zh.setFromMatrixScale(this.matrixWorld),_1.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Jh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zh.multiplyScalar(-Jh.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const u=this.center;Up(Dp.set(-.5,-.5,0),Jh,u,Zh,i,s),Up(Rd.set(.5,-.5,0),Jh,u,Zh,i,s),Up(Op.set(.5,.5,0),Jh,u,Zh,i,s),Bx.set(0,0),Gv.set(1,0),zx.set(1,1);let c=e.ray.intersectTriangle(Dp,Rd,Op,!1,kd);if(c===null&&(Up(Rd.set(-.5,.5,0),Jh,u,Zh,i,s),Gv.set(0,1),c=e.ray.intersectTriangle(Dp,Op,Rd,!1,kd),c===null))return;const f=e.ray.origin.distanceTo(kd);f<e.near||f>e.far||t.push({distance:f,point:kd.clone(),uv:Dr.getInterpolation(kd,Dp,Rd,Op,Bx,Gv,zx,new Ae),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Up(a,e,t,n,i,s){Qh.subVectors(a,t).addScalar(.5).multiply(n),i!==void 0?(Cd.x=s*Qh.x-i*Qh.y,Cd.y=i*Qh.x+s*Qh.y):Cd.copy(Qh),a.copy(e),a.x+=Cd.x,a.y+=Cd.y,a.applyMatrix4(_1)}const Fp=new Y,Vx=new Y;class w1 extends yn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Fp.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Fp);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Fp.setFromMatrixPosition(e.matrixWorld),Vx.setFromMatrixPosition(this.matrixWorld);const n=Fp.distanceTo(Vx)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let u=t[i].distance;if(t[i].object.visible&&(u-=u*t[i].hysteresis),n>=u)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const u=n[i];t.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return t}}const Hx=new Y,jx=new vn,Gx=new vn,a3=new Y,Wx=new Ht,Bp=new Y,Wv=new Vi,Xx=new Ht,Xv=new Cu;class S1 extends _i{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Py,this.bindMatrix=new Ht,this.bindMatrixInverse=new Ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new tr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Bp),this.boundingBox.expandByPoint(Bp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Vi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Bp),this.boundingSphere.expandByPoint(Bp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Wv.copy(this.boundingSphere),Wv.applyMatrix4(i),e.ray.intersectsSphere(Wv)!==!1&&(Xx.copy(i).invert(),Xv.copy(e.ray).applyMatrix4(Xx),!(this.boundingBox!==null&&Xv.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Xv)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new vn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Py?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Jb?this.bindMatrixInverse.copy(this.bindMatrix).invert():ft("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;jx.fromBufferAttribute(i.attributes.skinIndex,e),Gx.fromBufferAttribute(i.attributes.skinWeight,e),Hx.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const u=Gx.getComponent(s);if(u!==0){const c=jx.getComponent(s);Wx.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(a3.copy(Hx).applyMatrix4(Wx),u)}}return t.applyMatrix4(this.bindMatrixInverse)}}class h0 extends yn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class qa extends Qn{constructor(e=null,t=1,n=1,i,s,u,c,f,p=zi,m=zi,v,x){super(null,u,c,f,p,m,i,s,v,x),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Yx=new Ht,s3=new Ht;class Mg{constructor(e=[],t=[]){this.uuid=ea(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){ft("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ht;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,u=e.length;s<u;s++){const c=e[s]?e[s].matrixWorld:s3;Yx.multiplyMatrices(c,t[s]),Yx.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Mg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new qa(t,e,e,$i,vr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let u=t[s];u===void 0&&(ft("Skeleton: No bone found with UUID:",s),u=new h0),this.bones.push(u),this.boneInverses.push(new Ht().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const u=t[i];e.bones.push(u.uuid);const c=n[i];e.boneInverses.push(c.toArray())}return e}}class bc extends Cn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const $h=new Ht,qx=new Ht,zp=[],Kx=new tr,o3=new Ht,Id=new _i,Pd=new Vi;class M1 extends _i{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new bc(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,o3)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new tr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,$h),Kx.copy(e.boundingBox).applyMatrix4($h),this.boundingBox.union(Kx)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Vi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,$h),Pd.copy(e.boundingSphere).applyMatrix4($h),this.boundingSphere.union(Pd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,u=e*s+1;for(let c=0;c<n.length;c++)n[c]=i[u+c]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Id.geometry=this.geometry,Id.material=this.material,Id.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Pd.copy(this.boundingSphere),Pd.applyMatrix4(n),e.ray.intersectsSphere(Pd)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,$h),qx.multiplyMatrices(n,$h),Id.matrixWorld=qx,Id.raycast(e,zp);for(let u=0,c=zp.length;u<c;u++){const f=zp[u];f.instanceId=s,f.object=this,t.push(f)}zp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new bc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new qa(new Float32Array(i*this.count),i,this.count,pg,vr));const s=this.morphTexture.source.data.data;let u=0;for(let p=0;p<n.length;p++)u+=n[p];const c=this.geometry.morphTargetsRelative?1:1-u,f=i*e;s[f]=c,s.set(n,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Yv=new Y,l3=new Y,u3=new Zt;class ao{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Yv.subVectors(n,t).cross(l3.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Yv),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||u3.getNormalMatrix(e),i=this.coplanarPoint(Yv).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const iu=new Vi,h3=new Ae(.5,.5),Vp=new Y;class Tc{constructor(e=new ao,t=new ao,n=new ao,i=new ao,s=new ao,u=new ao){this.planes=[e,t,n,i,s,u]}set(e,t,n,i,s,u){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(i),c[4].copy(s),c[5].copy(u),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=$r,n=!1){const i=this.planes,s=e.elements,u=s[0],c=s[1],f=s[2],p=s[3],m=s[4],v=s[5],x=s[6],_=s[7],S=s[8],A=s[9],T=s[10],w=s[11],C=s[12],R=s[13],P=s[14],F=s[15];if(i[0].setComponents(p-u,_-m,w-S,F-C).normalize(),i[1].setComponents(p+u,_+m,w+S,F+C).normalize(),i[2].setComponents(p+c,_+v,w+A,F+R).normalize(),i[3].setComponents(p-c,_-v,w-A,F-R).normalize(),n)i[4].setComponents(f,x,T,P).normalize(),i[5].setComponents(p-f,_-x,w-T,F-P).normalize();else if(i[4].setComponents(p-f,_-x,w-T,F-P).normalize(),t===$r)i[5].setComponents(p+f,_+x,w+T,F+P).normalize();else if(t===vc)i[5].setComponents(f,x,T,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),iu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),iu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(iu)}intersectsSprite(e){iu.center.set(0,0,0);const t=h3.distanceTo(e.center);return iu.radius=.7071067811865476+t,iu.applyMatrix4(e.matrixWorld),this.intersectsSphere(iu)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Vp.x=i.normal.x>0?e.max.x:e.min.x,Vp.y=i.normal.y>0?e.max.y:e.min.y,Vp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Vp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ds=new Ht,fs=new Tc;class Tg{constructor(){this.coordinateSystem=$r}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.containsPoint(e))return!0}return!1}clone(){return new Tg}}function qv(a,e){return a-e}function c3(a,e){return a.z-e.z}function d3(a,e){return e.z-a.z}class f3{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const s=this.pool,u=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];u.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=i}reset(){this.list.length=0,this.index=0}}const Pr=new Ht,p3=new xt(1,1,1),Zx=new Tc,m3=new Tg,Hp=new tr,ru=new Vi,Ld=new Y,Jx=new Y,g3=new Y,Kv=new f3,Qi=new _i,jp=[];function v3(a,e,t=0){const n=e.itemSize;if(a.isInterleavedBufferAttribute||a.array.constructor!==e.array.constructor){const i=a.count;for(let s=0;s<i;s++)for(let u=0;u<n;u++)e.setComponent(s+t,u,a.getComponent(s,u))}else e.array.set(a.array,t*n);e.needsUpdate=!0}function au(a,e){if(a.constructor!==e.constructor){const t=Math.min(a.length,e.length);for(let n=0;n<t;n++)e[n]=a[n]}else{const t=Math.min(a.length,e.length);e.set(new a.constructor(a.buffer,0,t))}}class T1 extends _i{constructor(e,t,n=t*2,i){super(new Jt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new qa(t,e,e,$i,vr);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new qa(t,e,e,gf,co);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new qa(t,e,e,$i,vr);n.colorSpace=pn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const u=e.getAttribute(s),{array:c,itemSize:f,normalized:p}=u,m=new c.constructor(n*f),v=new Cn(m,f,p);t.setAttribute(s,v)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Cn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new tr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Pr),this.getBoundingBoxAt(s,Hp).applyMatrix4(Pr),e.union(Hp)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Pr),this.getBoundingSphereAt(s,ru).applyMatrix4(Pr),e.union(ru)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(qv),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;Pr.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const u=this._colorsTexture;return u&&(p3.toArray(u.image.data,i*4),u.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const u=e.getIndex();if(u!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?u.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(qv),f=this._availableGeometryIds.shift(),s[f]=i):(f=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(f,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),u=t.getIndex(),c=this._geometryInfo[e];if(i&&u.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=c.vertexStart,p=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const m in n.attributes){const v=t.getAttribute(m),x=n.getAttribute(m);v3(v,x,f);const _=v.itemSize;for(let S=v.count,A=p;S<A;S++){const T=f+S;for(let w=0;w<_;w++)x.setComponent(T,w,0)}x.needsUpdate=!0,x.addUpdateRange(f*_,p*_)}if(i){const m=c.indexStart,v=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let x=0;x<u.count;x++)s.setX(m+x,f+u.getX(x));for(let x=u.count,_=v;x<_;x++)s.setX(m+x,f);s.needsUpdate=!0,s.addUpdateRange(m,c.reservedIndexCount)}return c.start=i?c.indexStart:c.vertexStart,c.count=i?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,s=n.length;i<s;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((u,c)=>c).sort((u,c)=>n[u].vertexStart-n[c].vertexStart),s=this.geometry;for(let u=0,c=n.length;u<c;u++){const f=i[u],p=n[f];if(p.active!==!1){if(s.index!==null){if(p.indexStart!==t){const{indexStart:m,vertexStart:v,reservedIndexCount:x}=p,_=s.index,S=_.array,A=e-v;for(let T=m;T<m+x;T++)S[T]=S[T]+A;_.array.copyWithin(t,m,m+x),_.addUpdateRange(t,x),p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:m,reservedVertexCount:v}=p,x=s.attributes;for(const _ in x){const S=x[_],{array:A,itemSize:T}=S;A.copyWithin(e*T,m*T,(m+v)*T),S.addUpdateRange(e*T,v*T)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=s.index?p.indexStart:p.vertexStart,this._nextIndexStart=s.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new tr,u=n.index,c=n.attributes.position;for(let f=i.start,p=i.start+i.count;f<p;f++){let m=f;u&&(m=u.getX(m)),s.expandByPoint(Ld.fromBufferAttribute(c,m))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new Vi;this.getBoundingBoxAt(e,Hp),Hp.getCenter(s.center);const u=n.index,c=n.attributes.position;let f=0;for(let p=i.start,m=i.start+i.count;p<m;p++){let v=p;u&&(v=u.getX(v)),Ld.fromBufferAttribute(c,v),f=Math.max(f,s.center.distanceToSquared(Ld))}s.radius=Math.sqrt(f),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(qv);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);au(this._multiDrawCounts,i),au(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const u=this._indirectTexture,c=this._matricesTexture,f=this._colorsTexture;u.dispose(),this._initIndirectTexture(),au(u.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),au(c.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),au(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(f=>f.indexStart+f.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Jt,this._initializeGeometry(s));const u=this.geometry;s.index&&au(s.index.array,u.index.array);for(const c in s.attributes)au(s.attributes[c].array,u.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,u=this.geometry;Qi.material=this.material,Qi.geometry.index=u.index,Qi.geometry.attributes=u.attributes,Qi.geometry.boundingBox===null&&(Qi.geometry.boundingBox=new tr),Qi.geometry.boundingSphere===null&&(Qi.geometry.boundingSphere=new Vi);for(let c=0,f=n.length;c<f;c++){if(!n[c].visible||!n[c].active)continue;const p=n[c].geometryIndex,m=i[p];Qi.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(c,Qi.matrixWorld).premultiply(s),this.getBoundingBoxAt(p,Qi.geometry.boundingBox),this.getBoundingSphereAt(p,Qi.geometry.boundingSphere),Qi.raycast(e,jp);for(let v=0,x=jp.length;v<x;v++){const _=jp[v];_.object=this,_.batchId=c,t.push(_)}jp.length=0}Qi.material=null,Qi.geometry.index=null,Qi.geometry.attributes={},Qi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=i.getIndex(),c=u===null?1:u.array.BYTES_PER_ELEMENT,f=this._instanceInfo,p=this._multiDrawStarts,m=this._multiDrawCounts,v=this._geometryInfo,x=this.perObjectFrustumCulled,_=this._indirectTexture,S=_.image.data,A=n.isArrayCamera?m3:Zx;x&&!n.isArrayCamera&&(Pr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Zx.setFromProjectionMatrix(Pr,n.coordinateSystem,n.reversedDepth));let T=0;if(this.sortObjects){Pr.copy(this.matrixWorld).invert(),Ld.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Pr),Jx.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Pr);for(let R=0,P=f.length;R<P;R++)if(f[R].visible&&f[R].active){const F=f[R].geometryIndex;this.getMatrixAt(R,Pr),this.getBoundingSphereAt(F,ru).applyMatrix4(Pr);let N=!1;if(x&&(N=!A.intersectsSphere(ru,n)),!N){const z=v[F],G=g3.subVectors(ru.center,Ld).dot(Jx);Kv.push(z.start,z.count,G,R)}}const w=Kv.list,C=this.customSort;C===null?w.sort(s.transparent?d3:c3):C.call(this,w,n);for(let R=0,P=w.length;R<P;R++){const F=w[R];p[T]=F.start*c,m[T]=F.count,S[T]=F.index,T++}Kv.reset()}else for(let w=0,C=f.length;w<C;w++)if(f[w].visible&&f[w].active){const R=f[w].geometryIndex;let P=!1;if(x&&(this.getMatrixAt(w,Pr),this.getBoundingSphereAt(R,ru).applyMatrix4(Pr),P=!A.intersectsSphere(ru,n)),!P){const F=v[R];p[T]=F.start*c,m[T]=F.count,S[T]=w,T++}}_.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,u){this.onBeforeRender(e,null,i,s,u)}}class xr extends nr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const tg=new Y,ng=new Y,Qx=new Ht,Nd=new Cu,Gp=new Vi,Zv=new Y,$x=new Y;class ol extends yn{constructor(e=new Jt,t=new xr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)tg.fromBufferAttribute(t,i-1),ng.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=tg.distanceTo(ng);e.setAttribute("lineDistance",new At(n,1))}else ft("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Gp.copy(n.boundingSphere),Gp.applyMatrix4(i),Gp.radius+=s,e.ray.intersectsSphere(Gp)===!1)return;Qx.copy(i).invert(),Nd.copy(e.ray).applyMatrix4(Qx);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,p=this.isLineSegments?2:1,m=n.index,x=n.attributes.position;if(m!==null){const _=Math.max(0,u.start),S=Math.min(m.count,u.start+u.count);for(let A=_,T=S-1;A<T;A+=p){const w=m.getX(A),C=m.getX(A+1),R=Wp(this,e,Nd,f,w,C,A);R&&t.push(R)}if(this.isLineLoop){const A=m.getX(S-1),T=m.getX(_),w=Wp(this,e,Nd,f,A,T,S-1);w&&t.push(w)}}else{const _=Math.max(0,u.start),S=Math.min(x.count,u.start+u.count);for(let A=_,T=S-1;A<T;A+=p){const w=Wp(this,e,Nd,f,A,A+1,A);w&&t.push(w)}if(this.isLineLoop){const A=Wp(this,e,Nd,f,S-1,_,S-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,u=i.length;s<u;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function Wp(a,e,t,n,i,s,u){const c=a.geometry.attributes.position;if(tg.fromBufferAttribute(c,i),ng.fromBufferAttribute(c,s),t.distanceSqToSegment(tg,ng,Zv,$x)>n)return;Zv.applyMatrix4(a.matrixWorld);const p=e.ray.origin.distanceTo(Zv);if(!(p<e.near||p>e.far))return{distance:p,point:$x.clone().applyMatrix4(a.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:a}}const e_=new Y,t_=new Y;class xs extends ol{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)e_.fromBufferAttribute(t,i),t_.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+e_.distanceTo(t_);e.setAttribute("lineDistance",new At(n,1))}else ft("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class E1 extends ol{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class c0 extends nr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const n_=new Ht,Dy=new Cu,Xp=new Vi,Yp=new Y;class A1 extends yn{constructor(e=new Jt,t=new c0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Xp.copy(n.boundingSphere),Xp.applyMatrix4(i),Xp.radius+=s,e.ray.intersectsSphere(Xp)===!1)return;n_.copy(i).invert(),Dy.copy(e.ray).applyMatrix4(n_);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,p=n.index,v=n.attributes.position;if(p!==null){const x=Math.max(0,u.start),_=Math.min(p.count,u.start+u.count);for(let S=x,A=_;S<A;S++){const T=p.getX(S);Yp.fromBufferAttribute(v,T),i_(Yp,T,f,i,e,t,this)}}else{const x=Math.max(0,u.start),_=Math.min(v.count,u.start+u.count);for(let S=x,A=_;S<A;S++)Yp.fromBufferAttribute(v,S),i_(Yp,S,f,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,u=i.length;s<u;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function i_(a,e,t,n,i,s,u){const c=Dy.distanceSqToPoint(a);if(c<t){const f=new Y;Dy.closestPointToPoint(a,f),f.applyMatrix4(n);const p=i.ray.origin.distanceTo(f);if(p<i.near||p>i.far)return;s.push({distance:p,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:u})}}class k1 extends Qn{constructor(e,t,n,i,s=Wn,u=Wn,c,f,p){super(e,t,n,i,s,u,c,f,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const m=this;function v(){m.needsUpdate=!0,m._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class y3 extends k1{constructor(e,t,n,i,s,u,c,f){super({},e,t,n,i,s,u,c,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class x3 extends Qn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=zi,this.minFilter=zi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Eg extends Qn{constructor(e,t,n,i,s,u,c,f,p,m,v,x){super(null,u,c,f,p,m,i,s,v,x),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class _3 extends Eg{constructor(e,t,n,i,s,u){super(e,t,n,s,u),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Or,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class b3 extends Eg{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,ho),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class w3 extends Qn{constructor(e,t,n,i,s,u,c,f,p){super(e,t,n,i,s,u,c,f,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ag extends Qn{constructor(e,t,n=co,i,s,u,c=zi,f=zi,p,m=mc,v=1){if(m!==mc&&m!==gc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:e,height:t,depth:v};super(x,i,s,u,c,f,m,n,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new nl(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class d0 extends Qn{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class kg extends Jt{constructor(e=1,t=1,n=4,i=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),s=Math.max(1,Math.floor(s));const u=[],c=[],f=[],p=[],m=t/2,v=Math.PI/2*e,x=t,_=2*v+x,S=n*2+s,A=i+1,T=new Y,w=new Y;for(let C=0;C<=S;C++){let R=0,P=0,F=0,N=0;if(C<=n){const D=C/n,L=D*Math.PI/2;P=-m-e*Math.cos(L),F=e*Math.sin(L),N=-e*Math.cos(L),R=D*v}else if(C<=n+s){const D=(C-n)/s;P=-m+D*t,F=e,N=0,R=v+D*x}else{const D=(C-n-s)/n,L=D*Math.PI/2;P=m+e*Math.sin(L),F=e*Math.cos(L),N=e*Math.sin(L),R=v+x+D*v}const z=Math.max(0,Math.min(1,R/_));let G=0;C===0?G=.5/i:C===S&&(G=-.5/i);for(let D=0;D<=i;D++){const L=D/i,H=L*Math.PI*2,ee=Math.sin(H),ne=Math.cos(H);w.x=-F*ne,w.y=P,w.z=F*ee,c.push(w.x,w.y,w.z),T.set(-F*ne,N,F*ee),T.normalize(),f.push(T.x,T.y,T.z),p.push(L+G,z)}if(C>0){const D=(C-1)*A;for(let L=0;L<i;L++){const H=D+L,ee=D+L+1,ne=C*A+L,me=C*A+L+1;u.push(H,ee,ne),u.push(ee,me,ne)}}}this.setIndex(u),this.setAttribute("position",new At(c,3)),this.setAttribute("normal",new At(f,3)),this.setAttribute("uv",new At(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kg(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Cg extends Jt{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],u=[],c=[],f=[],p=new Y,m=new Ae;u.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let v=0,x=3;v<=t;v++,x+=3){const _=n+v/t*i;p.x=e*Math.cos(_),p.y=e*Math.sin(_),u.push(p.x,p.y,p.z),c.push(0,0,1),m.x=(u[x]/e+1)/2,m.y=(u[x+1]/e+1)/2,f.push(m.x,m.y)}for(let v=1;v<=t;v++)s.push(v,v+1,0);this.setIndex(s),this.setAttribute("position",new At(u,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cg(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xf extends Jt{constructor(e=1,t=1,n=1,i=32,s=1,u=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:u,thetaStart:c,thetaLength:f};const p=this;i=Math.floor(i),s=Math.floor(s);const m=[],v=[],x=[],_=[];let S=0;const A=[],T=n/2;let w=0;C(),u===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(m),this.setAttribute("position",new At(v,3)),this.setAttribute("normal",new At(x,3)),this.setAttribute("uv",new At(_,2));function C(){const P=new Y,F=new Y;let N=0;const z=(t-e)/n;for(let G=0;G<=s;G++){const D=[],L=G/s,H=L*(t-e)+e;for(let ee=0;ee<=i;ee++){const ne=ee/i,me=ne*f+c,fe=Math.sin(me),ye=Math.cos(me);F.x=H*fe,F.y=-L*n+T,F.z=H*ye,v.push(F.x,F.y,F.z),P.set(fe,z,ye).normalize(),x.push(P.x,P.y,P.z),_.push(ne,1-L),D.push(S++)}A.push(D)}for(let G=0;G<i;G++)for(let D=0;D<s;D++){const L=A[D][G],H=A[D+1][G],ee=A[D+1][G+1],ne=A[D][G+1];(e>0||D!==0)&&(m.push(L,H,ne),N+=3),(t>0||D!==s-1)&&(m.push(H,ee,ne),N+=3)}p.addGroup(w,N,0),w+=N}function R(P){const F=S,N=new Ae,z=new Y;let G=0;const D=P===!0?e:t,L=P===!0?1:-1;for(let ee=1;ee<=i;ee++)v.push(0,T*L,0),x.push(0,L,0),_.push(.5,.5),S++;const H=S;for(let ee=0;ee<=i;ee++){const me=ee/i*f+c,fe=Math.cos(me),ye=Math.sin(me);z.x=D*ye,z.y=T*L,z.z=D*fe,v.push(z.x,z.y,z.z),x.push(0,L,0),N.x=fe*.5+.5,N.y=ye*.5*L+.5,_.push(N.x,N.y),S++}for(let ee=0;ee<i;ee++){const ne=F+ee,me=H+ee;P===!0?m.push(me,me+1,ne):m.push(me+1,me,ne),G+=3}p.addGroup(w,G,P===!0?1:2),w+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _f extends xf{constructor(e=1,t=1,n=32,i=1,s=!1,u=0,c=Math.PI*2){super(0,e,t,n,i,s,u,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:u,thetaLength:c}}static fromJSON(e){return new _f(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class cl extends Jt{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],u=[];c(i),p(n),m(),this.setAttribute("position",new At(s,3)),this.setAttribute("normal",new At(s.slice(),3)),this.setAttribute("uv",new At(u,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function c(C){const R=new Y,P=new Y,F=new Y;for(let N=0;N<t.length;N+=3)_(t[N+0],R),_(t[N+1],P),_(t[N+2],F),f(R,P,F,C)}function f(C,R,P,F){const N=F+1,z=[];for(let G=0;G<=N;G++){z[G]=[];const D=C.clone().lerp(P,G/N),L=R.clone().lerp(P,G/N),H=N-G;for(let ee=0;ee<=H;ee++)ee===0&&G===N?z[G][ee]=D:z[G][ee]=D.clone().lerp(L,ee/H)}for(let G=0;G<N;G++)for(let D=0;D<2*(N-G)-1;D++){const L=Math.floor(D/2);D%2===0?(x(z[G][L+1]),x(z[G+1][L]),x(z[G][L])):(x(z[G][L+1]),x(z[G+1][L+1]),x(z[G+1][L]))}}function p(C){const R=new Y;for(let P=0;P<s.length;P+=3)R.x=s[P+0],R.y=s[P+1],R.z=s[P+2],R.normalize().multiplyScalar(C),s[P+0]=R.x,s[P+1]=R.y,s[P+2]=R.z}function m(){const C=new Y;for(let R=0;R<s.length;R+=3){C.x=s[R+0],C.y=s[R+1],C.z=s[R+2];const P=T(C)/2/Math.PI+.5,F=w(C)/Math.PI+.5;u.push(P,1-F)}S(),v()}function v(){for(let C=0;C<u.length;C+=6){const R=u[C+0],P=u[C+2],F=u[C+4],N=Math.max(R,P,F),z=Math.min(R,P,F);N>.9&&z<.1&&(R<.2&&(u[C+0]+=1),P<.2&&(u[C+2]+=1),F<.2&&(u[C+4]+=1))}}function x(C){s.push(C.x,C.y,C.z)}function _(C,R){const P=C*3;R.x=e[P+0],R.y=e[P+1],R.z=e[P+2]}function S(){const C=new Y,R=new Y,P=new Y,F=new Y,N=new Ae,z=new Ae,G=new Ae;for(let D=0,L=0;D<s.length;D+=9,L+=6){C.set(s[D+0],s[D+1],s[D+2]),R.set(s[D+3],s[D+4],s[D+5]),P.set(s[D+6],s[D+7],s[D+8]),N.set(u[L+0],u[L+1]),z.set(u[L+2],u[L+3]),G.set(u[L+4],u[L+5]),F.copy(C).add(R).add(P).divideScalar(3);const H=T(F);A(N,L+0,C,H),A(z,L+2,R,H),A(G,L+4,P,H)}}function A(C,R,P,F){F<0&&C.x===1&&(u[R]=C.x-1),P.x===0&&P.z===0&&(u[R]=F/2/Math.PI+.5)}function T(C){return Math.atan2(C.z,-C.x)}function w(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cl(e.vertices,e.indices,e.radius,e.details)}}class Rg extends cl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,u,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rg(e.radius,e.detail)}}const qp=new Y,Kp=new Y,Jv=new Y,Zp=new Dr;class C1 extends Jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(wu*t),u=e.getIndex(),c=e.getAttribute("position"),f=u?u.count:c.count,p=[0,0,0],m=["a","b","c"],v=new Array(3),x={},_=[];for(let S=0;S<f;S+=3){u?(p[0]=u.getX(S),p[1]=u.getX(S+1),p[2]=u.getX(S+2)):(p[0]=S,p[1]=S+1,p[2]=S+2);const{a:A,b:T,c:w}=Zp;if(A.fromBufferAttribute(c,p[0]),T.fromBufferAttribute(c,p[1]),w.fromBufferAttribute(c,p[2]),Zp.getNormal(Jv),v[0]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,v[1]=`${Math.round(T.x*i)},${Math.round(T.y*i)},${Math.round(T.z*i)}`,v[2]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let C=0;C<3;C++){const R=(C+1)%3,P=v[C],F=v[R],N=Zp[m[C]],z=Zp[m[R]],G=`${P}_${F}`,D=`${F}_${P}`;D in x&&x[D]?(Jv.dot(x[D].normal)<=s&&(_.push(N.x,N.y,N.z),_.push(z.x,z.y,z.z)),x[D]=null):G in x||(x[G]={index0:p[C],index1:p[R],normal:Jv.clone()})}}for(const S in x)if(x[S]){const{index0:A,index1:T}=x[S];qp.fromBufferAttribute(c,A),Kp.fromBufferAttribute(c,T),_.push(qp.x,qp.y,qp.z),_.push(Kp.x,Kp.y,Kp.z)}this.setAttribute("position",new At(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Za{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ft("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let u=1;u<=e;u++)n=this.getPoint(u/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const s=n.length;let u;t?u=t:u=e*n[s-1];let c=0,f=s-1,p;for(;c<=f;)if(i=Math.floor(c+(f-c)/2),p=n[i]-u,p<0)c=i+1;else if(p>0)f=i-1;else{f=i;break}if(i=f,n[i]===u)return i/(s-1);const m=n[i],x=n[i+1]-m,_=(u-m)/x;return(i+_)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const u=this.getPoint(i),c=this.getPoint(s),f=t||(u.isVector2?new Ae:new Y);return f.copy(c).sub(u).normalize(),f}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new Y,i=[],s=[],u=[],c=new Y,f=new Ht;for(let _=0;_<=e;_++){const S=_/e;i[_]=this.getTangentAt(S,new Y)}s[0]=new Y,u[0]=new Y;let p=Number.MAX_VALUE;const m=Math.abs(i[0].x),v=Math.abs(i[0].y),x=Math.abs(i[0].z);m<=p&&(p=m,n.set(1,0,0)),v<=p&&(p=v,n.set(0,1,0)),x<=p&&n.set(0,0,1),c.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],c),u[0].crossVectors(i[0],s[0]);for(let _=1;_<=e;_++){if(s[_]=s[_-1].clone(),u[_]=u[_-1].clone(),c.crossVectors(i[_-1],i[_]),c.length()>Number.EPSILON){c.normalize();const S=Math.acos(Vt(i[_-1].dot(i[_]),-1,1));s[_].applyMatrix4(f.makeRotationAxis(c,S))}u[_].crossVectors(i[_],s[_])}if(t===!0){let _=Math.acos(Vt(s[0].dot(s[e]),-1,1));_/=e,i[0].dot(c.crossVectors(s[0],s[e]))>0&&(_=-_);for(let S=1;S<=e;S++)s[S].applyMatrix4(f.makeRotationAxis(i[S],_*S)),u[S].crossVectors(i[S],s[S])}return{tangents:i,normals:s,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ig extends Za{constructor(e=0,t=0,n=1,i=1,s=0,u=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=u,this.aClockwise=c,this.aRotation=f}getPoint(e,t=new Ae){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const u=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(u?s=0:s=i),this.aClockwise===!0&&!u&&(s===i?s=-i:s=s-i);const c=this.aStartAngle+e*s;let f=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const m=Math.cos(this.aRotation),v=Math.sin(this.aRotation),x=f-this.aX,_=p-this.aY;f=x*m-_*v+this.aX,p=x*v+_*m+this.aY}return n.set(f,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class R1 extends Ig{constructor(e,t,n,i,s,u){super(e,t,n,n,i,s,u),this.isArcCurve=!0,this.type="ArcCurve"}}function f0(){let a=0,e=0,t=0,n=0;function i(s,u,c,f){a=s,e=c,t=-3*s+3*u-2*c-f,n=2*s-2*u+c+f}return{initCatmullRom:function(s,u,c,f,p){i(u,c,p*(c-s),p*(f-u))},initNonuniformCatmullRom:function(s,u,c,f,p,m,v){let x=(u-s)/p-(c-s)/(p+m)+(c-u)/m,_=(c-u)/m-(f-u)/(m+v)+(f-c)/v;x*=m,_*=m,i(u,c,x,_)},calc:function(s){const u=s*s,c=u*s;return a+e*s+t*u+n*c}}}const Jp=new Y,Qv=new f0,$v=new f0,ey=new f0;class I1 extends Za{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Y){const n=t,i=this.points,s=i.length,u=(s-(this.closed?0:1))*e;let c=Math.floor(u),f=u-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:f===0&&c===s-1&&(c=s-2,f=1);let p,m;this.closed||c>0?p=i[(c-1)%s]:(Jp.subVectors(i[0],i[1]).add(i[0]),p=Jp);const v=i[c%s],x=i[(c+1)%s];if(this.closed||c+2<s?m=i[(c+2)%s]:(Jp.subVectors(i[s-1],i[s-2]).add(i[s-1]),m=Jp),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let S=Math.pow(p.distanceToSquared(v),_),A=Math.pow(v.distanceToSquared(x),_),T=Math.pow(x.distanceToSquared(m),_);A<1e-4&&(A=1),S<1e-4&&(S=A),T<1e-4&&(T=A),Qv.initNonuniformCatmullRom(p.x,v.x,x.x,m.x,S,A,T),$v.initNonuniformCatmullRom(p.y,v.y,x.y,m.y,S,A,T),ey.initNonuniformCatmullRom(p.z,v.z,x.z,m.z,S,A,T)}else this.curveType==="catmullrom"&&(Qv.initCatmullRom(p.x,v.x,x.x,m.x,this.tension),$v.initCatmullRom(p.y,v.y,x.y,m.y,this.tension),ey.initCatmullRom(p.z,v.z,x.z,m.z,this.tension));return n.set(Qv.calc(f),$v.calc(f),ey.calc(f)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Y().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r_(a,e,t,n,i){const s=(n-e)*.5,u=(i-t)*.5,c=a*a,f=a*c;return(2*t-2*n+s+u)*f+(-3*t+3*n-2*s-u)*c+s*a+t}function S3(a,e){const t=1-a;return t*t*e}function M3(a,e){return 2*(1-a)*a*e}function T3(a,e){return a*a*e}function Kd(a,e,t,n){return S3(a,e)+M3(a,t)+T3(a,n)}function E3(a,e){const t=1-a;return t*t*t*e}function A3(a,e){const t=1-a;return 3*t*t*a*e}function k3(a,e){return 3*(1-a)*a*a*e}function C3(a,e){return a*a*a*e}function Zd(a,e,t,n,i){return E3(a,e)+A3(a,t)+k3(a,n)+C3(a,i)}class p0 extends Za{constructor(e=new Ae,t=new Ae,n=new Ae,i=new Ae){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ae){const n=t,i=this.v0,s=this.v1,u=this.v2,c=this.v3;return n.set(Zd(e,i.x,s.x,u.x,c.x),Zd(e,i.y,s.y,u.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class P1 extends Za{constructor(e=new Y,t=new Y,n=new Y,i=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Y){const n=t,i=this.v0,s=this.v1,u=this.v2,c=this.v3;return n.set(Zd(e,i.x,s.x,u.x,c.x),Zd(e,i.y,s.y,u.y,c.y),Zd(e,i.z,s.z,u.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class m0 extends Za{constructor(e=new Ae,t=new Ae){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ae){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ae){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class L1 extends Za{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class g0 extends Za{constructor(e=new Ae,t=new Ae,n=new Ae){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ae){const n=t,i=this.v0,s=this.v1,u=this.v2;return n.set(Kd(e,i.x,s.x,u.x),Kd(e,i.y,s.y,u.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class v0 extends Za{constructor(e=new Y,t=new Y,n=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Y){const n=t,i=this.v0,s=this.v1,u=this.v2;return n.set(Kd(e,i.x,s.x,u.x),Kd(e,i.y,s.y,u.y),Kd(e,i.z,s.z,u.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class y0 extends Za{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ae){const n=t,i=this.points,s=(i.length-1)*e,u=Math.floor(s),c=s-u,f=i[u===0?u:u-1],p=i[u],m=i[u>i.length-2?i.length-1:u+1],v=i[u>i.length-3?i.length-1:u+2];return n.set(r_(c,f.x,p.x,m.x,v.x),r_(c,f.y,p.y,m.y,v.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ae().fromArray(i))}return this}}var ig=Object.freeze({__proto__:null,ArcCurve:R1,CatmullRomCurve3:I1,CubicBezierCurve:p0,CubicBezierCurve3:P1,EllipseCurve:Ig,LineCurve:m0,LineCurve3:L1,QuadraticBezierCurve:g0,QuadraticBezierCurve3:v0,SplineCurve:y0});class N1 extends Za{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ig[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const u=i[s]-n,c=this.curves[s],f=c.getLength(),p=f===0?0:1-u/f;return c.getPointAt(p,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const u=s[i],c=u.isEllipseCurve?e*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?e*u.points.length:e,f=u.getPoints(c);for(let p=0;p<f.length;p++){const m=f[p];n&&n.equals(m)||(t.push(m),n=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new ig[i.type]().fromJSON(i))}return this}}class rg extends N1{constructor(e){super(),this.type="Path",this.currentPoint=new Ae,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new m0(this.currentPoint.clone(),new Ae(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new g0(this.currentPoint.clone(),new Ae(e,t),new Ae(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,u){const c=new p0(this.currentPoint.clone(),new Ae(e,t),new Ae(n,i),new Ae(s,u));return this.curves.push(c),this.currentPoint.set(s,u),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new y0(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,u){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,n,i,s,u),this}absarc(e,t,n,i,s,u){return this.absellipse(e,t,n,n,i,s,u),this}ellipse(e,t,n,i,s,u,c,f){const p=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+p,t+m,n,i,s,u,c,f),this}absellipse(e,t,n,i,s,u,c,f){const p=new Ig(e,t,n,i,s,u,c,f);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const m=p.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Mu extends rg{constructor(e){super(e),this.uuid=ea(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new rg().fromJSON(i))}return this}}function R3(a,e,t=2){const n=e&&e.length,i=n?e[0]*t:a.length;let s=D1(a,0,i,t,!0);const u=[];if(!s||s.next===s.prev)return u;let c,f,p;if(n&&(s=D3(a,e,s,t)),a.length>80*t){c=a[0],f=a[1];let m=c,v=f;for(let x=t;x<i;x+=t){const _=a[x],S=a[x+1];_<c&&(c=_),S<f&&(f=S),_>m&&(m=_),S>v&&(v=S)}p=Math.max(m-c,v-f),p=p!==0?32767/p:0}return lf(s,u,t,c,f,p,0),u}function D1(a,e,t,n,i){let s;if(i===X3(a,e,t,n)>0)for(let u=e;u<t;u+=n)s=a_(u/n|0,a[u],a[u+1],s);else for(let u=t-n;u>=e;u-=n)s=a_(u/n|0,a[u],a[u+1],s);return s&&wc(s,s.next)&&(hf(s),s=s.next),s}function ku(a,e){if(!a)return a;e||(e=a);let t=a,n;do if(n=!1,!t.steiner&&(wc(t,t.next)||Gn(t.prev,t,t.next)===0)){if(hf(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function lf(a,e,t,n,i,s,u){if(!a)return;!u&&s&&z3(a,n,i,s);let c=a;for(;a.prev!==a.next;){const f=a.prev,p=a.next;if(s?P3(a,n,i,s):I3(a)){e.push(f.i,a.i,p.i),hf(a),a=p.next,c=p.next;continue}if(a=p,a===c){u?u===1?(a=L3(ku(a),e),lf(a,e,t,n,i,s,2)):u===2&&N3(a,e,t,n,i,s):lf(ku(a),e,t,n,i,s,1);break}}}function I3(a){const e=a.prev,t=a,n=a.next;if(Gn(e,t,n)>=0)return!1;const i=e.x,s=t.x,u=n.x,c=e.y,f=t.y,p=n.y,m=Math.min(i,s,u),v=Math.min(c,f,p),x=Math.max(i,s,u),_=Math.max(c,f,p);let S=n.next;for(;S!==e;){if(S.x>=m&&S.x<=x&&S.y>=v&&S.y<=_&&zd(i,c,s,f,u,p,S.x,S.y)&&Gn(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function P3(a,e,t,n){const i=a.prev,s=a,u=a.next;if(Gn(i,s,u)>=0)return!1;const c=i.x,f=s.x,p=u.x,m=i.y,v=s.y,x=u.y,_=Math.min(c,f,p),S=Math.min(m,v,x),A=Math.max(c,f,p),T=Math.max(m,v,x),w=Oy(_,S,e,t,n),C=Oy(A,T,e,t,n);let R=a.prevZ,P=a.nextZ;for(;R&&R.z>=w&&P&&P.z<=C;){if(R.x>=_&&R.x<=A&&R.y>=S&&R.y<=T&&R!==i&&R!==u&&zd(c,m,f,v,p,x,R.x,R.y)&&Gn(R.prev,R,R.next)>=0||(R=R.prevZ,P.x>=_&&P.x<=A&&P.y>=S&&P.y<=T&&P!==i&&P!==u&&zd(c,m,f,v,p,x,P.x,P.y)&&Gn(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;R&&R.z>=w;){if(R.x>=_&&R.x<=A&&R.y>=S&&R.y<=T&&R!==i&&R!==u&&zd(c,m,f,v,p,x,R.x,R.y)&&Gn(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;P&&P.z<=C;){if(P.x>=_&&P.x<=A&&P.y>=S&&P.y<=T&&P!==i&&P!==u&&zd(c,m,f,v,p,x,P.x,P.y)&&Gn(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function L3(a,e){let t=a;do{const n=t.prev,i=t.next.next;!wc(n,i)&&U1(n,t,t.next,i)&&uf(n,i)&&uf(i,n)&&(e.push(n.i,t.i,i.i),hf(t),hf(t.next),t=a=i),t=t.next}while(t!==a);return ku(t)}function N3(a,e,t,n,i,s){let u=a;do{let c=u.next.next;for(;c!==u.prev;){if(u.i!==c.i&&j3(u,c)){let f=F1(u,c);u=ku(u,u.next),f=ku(f,f.next),lf(u,e,t,n,i,s,0),lf(f,e,t,n,i,s,0);return}c=c.next}u=u.next}while(u!==a)}function D3(a,e,t,n){const i=[];for(let s=0,u=e.length;s<u;s++){const c=e[s]*n,f=s<u-1?e[s+1]*n:a.length,p=D1(a,c,f,n,!1);p===p.next&&(p.steiner=!0),i.push(H3(p))}i.sort(O3);for(let s=0;s<i.length;s++)t=U3(i[s],t);return t}function O3(a,e){let t=a.x-e.x;if(t===0&&(t=a.y-e.y,t===0)){const n=(a.next.y-a.y)/(a.next.x-a.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function U3(a,e){const t=F3(a,e);if(!t)return e;const n=F1(t,a);return ku(n,n.next),ku(t,t.next)}function F3(a,e){let t=e;const n=a.x,i=a.y;let s=-1/0,u;if(wc(a,t))return t;do{if(wc(a,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const v=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=n&&v>s&&(s=v,u=t.x<t.next.x?t:t.next,v===n))return u}t=t.next}while(t!==e);if(!u)return null;const c=u,f=u.x,p=u.y;let m=1/0;t=u;do{if(n>=t.x&&t.x>=f&&n!==t.x&&O1(i<p?n:s,i,f,p,i<p?s:n,i,t.x,t.y)){const v=Math.abs(i-t.y)/(n-t.x);uf(t,a)&&(v<m||v===m&&(t.x>u.x||t.x===u.x&&B3(u,t)))&&(u=t,m=v)}t=t.next}while(t!==c);return u}function B3(a,e){return Gn(a.prev,a,e.prev)<0&&Gn(e.next,a,a.next)<0}function z3(a,e,t,n){let i=a;do i.z===0&&(i.z=Oy(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==a);i.prevZ.nextZ=null,i.prevZ=null,V3(i)}function V3(a){let e,t=1;do{let n=a,i;a=null;let s=null;for(e=0;n;){e++;let u=n,c=0;for(let p=0;p<t&&(c++,u=u.nextZ,!!u);p++);let f=t;for(;c>0||f>0&&u;)c!==0&&(f===0||!u||n.z<=u.z)?(i=n,n=n.nextZ,c--):(i=u,u=u.nextZ,f--),s?s.nextZ=i:a=i,i.prevZ=s,s=i;n=u}s.nextZ=null,t*=2}while(e>1);return a}function Oy(a,e,t,n,i){return a=(a-t)*i|0,e=(e-n)*i|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function H3(a){let e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function O1(a,e,t,n,i,s,u,c){return(i-u)*(e-c)>=(a-u)*(s-c)&&(a-u)*(n-c)>=(t-u)*(e-c)&&(t-u)*(s-c)>=(i-u)*(n-c)}function zd(a,e,t,n,i,s,u,c){return!(a===u&&e===c)&&O1(a,e,t,n,i,s,u,c)}function j3(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!G3(a,e)&&(uf(a,e)&&uf(e,a)&&W3(a,e)&&(Gn(a.prev,a,e.prev)||Gn(a,e.prev,e))||wc(a,e)&&Gn(a.prev,a,a.next)>0&&Gn(e.prev,e,e.next)>0)}function Gn(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function wc(a,e){return a.x===e.x&&a.y===e.y}function U1(a,e,t,n){const i=$p(Gn(a,e,t)),s=$p(Gn(a,e,n)),u=$p(Gn(t,n,a)),c=$p(Gn(t,n,e));return!!(i!==s&&u!==c||i===0&&Qp(a,t,e)||s===0&&Qp(a,n,e)||u===0&&Qp(t,a,n)||c===0&&Qp(t,e,n))}function Qp(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function $p(a){return a>0?1:a<0?-1:0}function G3(a,e){let t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&U1(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function uf(a,e){return Gn(a.prev,a,a.next)<0?Gn(a,e,a.next)>=0&&Gn(a,a.prev,e)>=0:Gn(a,e,a.prev)<0||Gn(a,a.next,e)<0}function W3(a,e){let t=a,n=!1;const i=(a.x+e.x)/2,s=(a.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==a);return n}function F1(a,e){const t=Uy(a.i,a.x,a.y),n=Uy(e.i,e.x,e.y),i=a.next,s=e.prev;return a.next=e,e.prev=a,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function a_(a,e,t,n){const i=Uy(a,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function hf(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Uy(a,e,t){return{i:a,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function X3(a,e,t,n){let i=0;for(let s=e,u=t-n;s<t;s+=n)i+=(a[u]-a[s])*(a[s+1]+a[u+1]),u=s;return i}class Y3{static triangulate(e,t,n=2){return R3(e,t,n)}}class Ya{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Ya.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];s_(e),o_(n,e);let u=e.length;t.forEach(s_);for(let f=0;f<t.length;f++)i.push(u),u+=t[f].length,o_(n,t[f]);const c=Y3.triangulate(n,i);for(let f=0;f<c.length;f+=3)s.push(c.slice(f,f+3));return s}}function s_(a){const e=a.length;e>2&&a[e-1].equals(a[0])&&a.pop()}function o_(a,e){for(let t=0;t<e.length;t++)a.push(e[t].x),a.push(e[t].y)}class Pg extends Jt{constructor(e=new Mu([new Ae(.5,.5),new Ae(-.5,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let c=0,f=e.length;c<f;c++){const p=e[c];u(p)}this.setAttribute("position",new At(i,3)),this.setAttribute("uv",new At(s,2)),this.computeVertexNormals();function u(c){const f=[],p=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:_-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:q3;let R,P=!1,F,N,z,G;w&&(R=w.getSpacedPoints(m),P=!0,x=!1,F=w.computeFrenetFrames(m,!1),N=new Y,z=new Y,G=new Y),x||(T=0,_=0,S=0,A=0);const D=c.extractPoints(p);let L=D.shape;const H=D.holes;if(!Ya.isClockWise(L)){L=L.reverse();for(let Pe=0,X=H.length;Pe<X;Pe++){const Le=H[Pe];Ya.isClockWise(Le)&&(H[Pe]=Le.reverse())}}function ne(Pe){const Le=10000000000000001e-36;let Be=Pe[0];for(let Ke=1;Ke<=Pe.length;Ke++){const Oe=Ke%Pe.length,ot=Pe[Oe],$e=ot.x-Be.x,ht=ot.y-Be.y,W=$e*$e+ht*ht,O=Math.max(Math.abs(ot.x),Math.abs(ot.y),Math.abs(Be.x),Math.abs(Be.y)),ue=Le*O*O;if(W<=ue){Pe.splice(Oe,1),Ke--;continue}Be=ot}}ne(L),H.forEach(ne);const me=H.length,fe=L;for(let Pe=0;Pe<me;Pe++){const X=H[Pe];L=L.concat(X)}function ye(Pe,X,Le){return X||Wt("ExtrudeGeometry: vec does not exist"),Pe.clone().addScaledVector(X,Le)}const we=L.length;function B(Pe,X,Le){let Be,Ke,Oe;const ot=Pe.x-X.x,$e=Pe.y-X.y,ht=Le.x-Pe.x,W=Le.y-Pe.y,O=ot*ot+$e*$e,ue=ot*W-$e*ht;if(Math.abs(ue)>Number.EPSILON){const Te=Math.sqrt(O),Re=Math.sqrt(ht*ht+W*W),Se=X.x-$e/Te,Mt=X.y+ot/Te,et=Le.x-W/Re,Tt=Le.y+ht/Re,wt=((et-Se)*W-(Tt-Mt)*ht)/(ot*W-$e*ht);Be=Se+ot*wt-Pe.x,Ke=Mt+$e*wt-Pe.y;const Ne=Be*Be+Ke*Ke;if(Ne<=2)return new Ae(Be,Ke);Oe=Math.sqrt(Ne/2)}else{let Te=!1;ot>Number.EPSILON?ht>Number.EPSILON&&(Te=!0):ot<-Number.EPSILON?ht<-Number.EPSILON&&(Te=!0):Math.sign($e)===Math.sign(W)&&(Te=!0),Te?(Be=-$e,Ke=ot,Oe=Math.sqrt(O)):(Be=ot,Ke=$e,Oe=Math.sqrt(O/2))}return new Ae(Be/Oe,Ke/Oe)}const Q=[];for(let Pe=0,X=fe.length,Le=X-1,Be=Pe+1;Pe<X;Pe++,Le++,Be++)Le===X&&(Le=0),Be===X&&(Be=0),Q[Pe]=B(fe[Pe],fe[Le],fe[Be]);const K=[];let j,ie=Q.concat();for(let Pe=0,X=me;Pe<X;Pe++){const Le=H[Pe];j=[];for(let Be=0,Ke=Le.length,Oe=Ke-1,ot=Be+1;Be<Ke;Be++,Oe++,ot++)Oe===Ke&&(Oe=0),ot===Ke&&(ot=0),j[Be]=B(Le[Be],Le[Oe],Le[ot]);K.push(j),ie=ie.concat(j)}let Ce;if(T===0)Ce=Ya.triangulateShape(fe,H);else{const Pe=[],X=[];for(let Le=0;Le<T;Le++){const Be=Le/T,Ke=_*Math.cos(Be*Math.PI/2),Oe=S*Math.sin(Be*Math.PI/2)+A;for(let ot=0,$e=fe.length;ot<$e;ot++){const ht=ye(fe[ot],Q[ot],Oe);it(ht.x,ht.y,-Ke),Be===0&&Pe.push(ht)}for(let ot=0,$e=me;ot<$e;ot++){const ht=H[ot];j=K[ot];const W=[];for(let O=0,ue=ht.length;O<ue;O++){const Te=ye(ht[O],j[O],Oe);it(Te.x,Te.y,-Ke),Be===0&&W.push(Te)}Be===0&&X.push(W)}}Ce=Ya.triangulateShape(Pe,X)}const Ye=Ce.length,at=S+A;for(let Pe=0;Pe<we;Pe++){const X=x?ye(L[Pe],ie[Pe],at):L[Pe];P?(z.copy(F.normals[0]).multiplyScalar(X.x),N.copy(F.binormals[0]).multiplyScalar(X.y),G.copy(R[0]).add(z).add(N),it(G.x,G.y,G.z)):it(X.x,X.y,0)}for(let Pe=1;Pe<=m;Pe++)for(let X=0;X<we;X++){const Le=x?ye(L[X],ie[X],at):L[X];P?(z.copy(F.normals[Pe]).multiplyScalar(Le.x),N.copy(F.binormals[Pe]).multiplyScalar(Le.y),G.copy(R[Pe]).add(z).add(N),it(G.x,G.y,G.z)):it(Le.x,Le.y,v/m*Pe)}for(let Pe=T-1;Pe>=0;Pe--){const X=Pe/T,Le=_*Math.cos(X*Math.PI/2),Be=S*Math.sin(X*Math.PI/2)+A;for(let Ke=0,Oe=fe.length;Ke<Oe;Ke++){const ot=ye(fe[Ke],Q[Ke],Be);it(ot.x,ot.y,v+Le)}for(let Ke=0,Oe=H.length;Ke<Oe;Ke++){const ot=H[Ke];j=K[Ke];for(let $e=0,ht=ot.length;$e<ht;$e++){const W=ye(ot[$e],j[$e],Be);P?it(W.x,W.y+R[m-1].y,R[m-1].x+Le):it(W.x,W.y,v+Le)}}}he(),be();function he(){const Pe=i.length/3;if(x){let X=0,Le=we*X;for(let Be=0;Be<Ye;Be++){const Ke=Ce[Be];st(Ke[2]+Le,Ke[1]+Le,Ke[0]+Le)}X=m+T*2,Le=we*X;for(let Be=0;Be<Ye;Be++){const Ke=Ce[Be];st(Ke[0]+Le,Ke[1]+Le,Ke[2]+Le)}}else{for(let X=0;X<Ye;X++){const Le=Ce[X];st(Le[2],Le[1],Le[0])}for(let X=0;X<Ye;X++){const Le=Ce[X];st(Le[0]+we*m,Le[1]+we*m,Le[2]+we*m)}}n.addGroup(Pe,i.length/3-Pe,0)}function be(){const Pe=i.length/3;let X=0;Fe(fe,X),X+=fe.length;for(let Le=0,Be=H.length;Le<Be;Le++){const Ke=H[Le];Fe(Ke,X),X+=Ke.length}n.addGroup(Pe,i.length/3-Pe,1)}function Fe(Pe,X){let Le=Pe.length;for(;--Le>=0;){const Be=Le;let Ke=Le-1;Ke<0&&(Ke=Pe.length-1);for(let Oe=0,ot=m+T*2;Oe<ot;Oe++){const $e=we*Oe,ht=we*(Oe+1),W=X+Be+$e,O=X+Ke+$e,ue=X+Ke+ht,Te=X+Be+ht;Lt(W,O,ue,Te)}}}function it(Pe,X,Le){f.push(Pe),f.push(X),f.push(Le)}function st(Pe,X,Le){on(Pe),on(X),on(Le);const Be=i.length/3,Ke=C.generateTopUV(n,i,Be-3,Be-2,Be-1);yt(Ke[0]),yt(Ke[1]),yt(Ke[2])}function Lt(Pe,X,Le,Be){on(Pe),on(X),on(Be),on(X),on(Le),on(Be);const Ke=i.length/3,Oe=C.generateSideWallUV(n,i,Ke-6,Ke-3,Ke-2,Ke-1);yt(Oe[0]),yt(Oe[1]),yt(Oe[3]),yt(Oe[1]),yt(Oe[2]),yt(Oe[3])}function on(Pe){i.push(f[Pe*3+0]),i.push(f[Pe*3+1]),i.push(f[Pe*3+2])}function yt(Pe){s.push(Pe.x),s.push(Pe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return K3(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,u=e.shapes.length;s<u;s++){const c=t[e.shapes[s]];n.push(c)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new ig[i.type]().fromJSON(i)),new Pg(n,e.options)}}const q3={generateTopUV:function(a,e,t,n,i){const s=e[t*3],u=e[t*3+1],c=e[n*3],f=e[n*3+1],p=e[i*3],m=e[i*3+1];return[new Ae(s,u),new Ae(c,f),new Ae(p,m)]},generateSideWallUV:function(a,e,t,n,i,s){const u=e[t*3],c=e[t*3+1],f=e[t*3+2],p=e[n*3],m=e[n*3+1],v=e[n*3+2],x=e[i*3],_=e[i*3+1],S=e[i*3+2],A=e[s*3],T=e[s*3+1],w=e[s*3+2];return Math.abs(c-m)<Math.abs(u-p)?[new Ae(u,1-f),new Ae(p,1-v),new Ae(x,1-S),new Ae(A,1-w)]:[new Ae(c,1-f),new Ae(m,1-v),new Ae(_,1-S),new Ae(T,1-w)]}};function K3(a,e,t){if(t.shapes=[],Array.isArray(a))for(let n=0,i=a.length;n<i;n++){const s=a[n];t.shapes.push(s.uuid)}else t.shapes.push(a.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Lg extends cl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lg(e.radius,e.detail)}}class Ng extends Jt{constructor(e=[new Ae(0,-.5),new Ae(.5,0),new Ae(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Vt(i,0,Math.PI*2);const s=[],u=[],c=[],f=[],p=[],m=1/t,v=new Y,x=new Ae,_=new Y,S=new Y,A=new Y;let T=0,w=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:T=e[C+1].x-e[C].x,w=e[C+1].y-e[C].y,_.x=w*1,_.y=-T,_.z=w*0,A.copy(_),_.normalize(),f.push(_.x,_.y,_.z);break;case e.length-1:f.push(A.x,A.y,A.z);break;default:T=e[C+1].x-e[C].x,w=e[C+1].y-e[C].y,_.x=w*1,_.y=-T,_.z=w*0,S.copy(_),_.x+=A.x,_.y+=A.y,_.z+=A.z,_.normalize(),f.push(_.x,_.y,_.z),A.copy(S)}for(let C=0;C<=t;C++){const R=n+C*m*i,P=Math.sin(R),F=Math.cos(R);for(let N=0;N<=e.length-1;N++){v.x=e[N].x*P,v.y=e[N].y,v.z=e[N].x*F,u.push(v.x,v.y,v.z),x.x=C/t,x.y=N/(e.length-1),c.push(x.x,x.y);const z=f[3*N+0]*P,G=f[3*N+1],D=f[3*N+0]*F;p.push(z,G,D)}}for(let C=0;C<t;C++)for(let R=0;R<e.length-1;R++){const P=R+C*e.length,F=P,N=P+e.length,z=P+e.length+1,G=P+1;s.push(F,N,G),s.push(z,G,N)}this.setIndex(s),this.setAttribute("position",new At(u,3)),this.setAttribute("uv",new At(c,2)),this.setAttribute("normal",new At(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ng(e.points,e.segments,e.phiStart,e.phiLength)}}class bf extends cl{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bf(e.radius,e.detail)}}class Ec extends Jt{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,u=t/2,c=Math.floor(n),f=Math.floor(i),p=c+1,m=f+1,v=e/c,x=t/f,_=[],S=[],A=[],T=[];for(let w=0;w<m;w++){const C=w*x-u;for(let R=0;R<p;R++){const P=R*v-s;S.push(P,-C,0),A.push(0,0,1),T.push(R/c),T.push(1-w/f)}}for(let w=0;w<f;w++)for(let C=0;C<c;C++){const R=C+p*w,P=C+p*(w+1),F=C+1+p*(w+1),N=C+1+p*w;_.push(R,P,N),_.push(P,F,N)}this.setIndex(_),this.setAttribute("position",new At(S,3)),this.setAttribute("normal",new At(A,3)),this.setAttribute("uv",new At(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ec(e.width,e.height,e.widthSegments,e.heightSegments)}}class Dg extends Jt{constructor(e=.5,t=1,n=32,i=1,s=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:u},n=Math.max(3,n),i=Math.max(1,i);const c=[],f=[],p=[],m=[];let v=e;const x=(t-e)/i,_=new Y,S=new Ae;for(let A=0;A<=i;A++){for(let T=0;T<=n;T++){const w=s+T/n*u;_.x=v*Math.cos(w),_.y=v*Math.sin(w),f.push(_.x,_.y,_.z),p.push(0,0,1),S.x=(_.x/t+1)/2,S.y=(_.y/t+1)/2,m.push(S.x,S.y)}v+=x}for(let A=0;A<i;A++){const T=A*(n+1);for(let w=0;w<n;w++){const C=w+T,R=C,P=C+n+1,F=C+n+2,N=C+1;c.push(R,P,N),c.push(P,F,N)}}this.setIndex(c),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(p,3)),this.setAttribute("uv",new At(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dg(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Og extends Jt{constructor(e=new Mu([new Ae(0,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],u=[];let c=0,f=0;if(Array.isArray(e)===!1)p(e);else for(let m=0;m<e.length;m++)p(e[m]),this.addGroup(c,f,m),c+=f,f=0;this.setIndex(n),this.setAttribute("position",new At(i,3)),this.setAttribute("normal",new At(s,3)),this.setAttribute("uv",new At(u,2));function p(m){const v=i.length/3,x=m.extractPoints(t);let _=x.shape;const S=x.holes;Ya.isClockWise(_)===!1&&(_=_.reverse());for(let T=0,w=S.length;T<w;T++){const C=S[T];Ya.isClockWise(C)===!0&&(S[T]=C.reverse())}const A=Ya.triangulateShape(_,S);for(let T=0,w=S.length;T<w;T++){const C=S[T];_=_.concat(C)}for(let T=0,w=_.length;T<w;T++){const C=_[T];i.push(C.x,C.y,0),s.push(0,0,1),u.push(C.x,C.y)}for(let T=0,w=A.length;T<w;T++){const C=A[T],R=C[0]+v,P=C[1]+v,F=C[2]+v;n.push(R,P,F),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Z3(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const u=t[e.shapes[i]];n.push(u)}return new Og(n,e.curveSegments)}}function Z3(a,e){if(e.shapes=[],Array.isArray(a))for(let t=0,n=a.length;t<n;t++){const i=a[t];e.shapes.push(i.uuid)}else e.shapes.push(a.uuid);return e}class wf extends Jt{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,u=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:u,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const f=Math.min(u+c,Math.PI);let p=0;const m=[],v=new Y,x=new Y,_=[],S=[],A=[],T=[];for(let w=0;w<=n;w++){const C=[],R=w/n;let P=0;w===0&&u===0?P=.5/t:w===n&&f===Math.PI&&(P=-.5/t);for(let F=0;F<=t;F++){const N=F/t;v.x=-e*Math.cos(i+N*s)*Math.sin(u+R*c),v.y=e*Math.cos(u+R*c),v.z=e*Math.sin(i+N*s)*Math.sin(u+R*c),S.push(v.x,v.y,v.z),x.copy(v).normalize(),A.push(x.x,x.y,x.z),T.push(N+P,1-R),C.push(p++)}m.push(C)}for(let w=0;w<n;w++)for(let C=0;C<t;C++){const R=m[w][C+1],P=m[w][C],F=m[w+1][C],N=m[w+1][C+1];(w!==0||u>0)&&_.push(R,P,N),(w!==n-1||f<Math.PI)&&_.push(P,F,N)}this.setIndex(_),this.setAttribute("position",new At(S,3)),this.setAttribute("normal",new At(A,3)),this.setAttribute("uv",new At(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ug extends cl{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ug(e.radius,e.detail)}}class Fg extends Jt{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const u=[],c=[],f=[],p=[],m=new Y,v=new Y,x=new Y;for(let _=0;_<=n;_++)for(let S=0;S<=i;S++){const A=S/i*s,T=_/n*Math.PI*2;v.x=(e+t*Math.cos(T))*Math.cos(A),v.y=(e+t*Math.cos(T))*Math.sin(A),v.z=t*Math.sin(T),c.push(v.x,v.y,v.z),m.x=e*Math.cos(A),m.y=e*Math.sin(A),x.subVectors(v,m).normalize(),f.push(x.x,x.y,x.z),p.push(S/i),p.push(_/n)}for(let _=1;_<=n;_++)for(let S=1;S<=i;S++){const A=(i+1)*_+S-1,T=(i+1)*(_-1)+S-1,w=(i+1)*(_-1)+S,C=(i+1)*_+S;u.push(A,T,C),u.push(T,w,C)}this.setIndex(u),this.setAttribute("position",new At(c,3)),this.setAttribute("normal",new At(f,3)),this.setAttribute("uv",new At(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Bg extends Jt{constructor(e=1,t=.4,n=64,i=8,s=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:u},n=Math.floor(n),i=Math.floor(i);const c=[],f=[],p=[],m=[],v=new Y,x=new Y,_=new Y,S=new Y,A=new Y,T=new Y,w=new Y;for(let R=0;R<=n;++R){const P=R/n*s*Math.PI*2;C(P,s,u,e,_),C(P+.01,s,u,e,S),T.subVectors(S,_),w.addVectors(S,_),A.crossVectors(T,w),w.crossVectors(A,T),A.normalize(),w.normalize();for(let F=0;F<=i;++F){const N=F/i*Math.PI*2,z=-t*Math.cos(N),G=t*Math.sin(N);v.x=_.x+(z*w.x+G*A.x),v.y=_.y+(z*w.y+G*A.y),v.z=_.z+(z*w.z+G*A.z),f.push(v.x,v.y,v.z),x.subVectors(v,_).normalize(),p.push(x.x,x.y,x.z),m.push(R/n),m.push(F/i)}}for(let R=1;R<=n;R++)for(let P=1;P<=i;P++){const F=(i+1)*(R-1)+(P-1),N=(i+1)*R+(P-1),z=(i+1)*R+P,G=(i+1)*(R-1)+P;c.push(F,N,G),c.push(N,z,G)}this.setIndex(c),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(p,3)),this.setAttribute("uv",new At(m,2));function C(R,P,F,N,z){const G=Math.cos(R),D=Math.sin(R),L=F/P*R,H=Math.cos(L);z.x=N*(2+H)*.5*G,z.y=N*(2+H)*D*.5,z.z=N*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bg(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class zg extends Jt{constructor(e=new v0(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const u=e.computeFrenetFrames(t,s);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const c=new Y,f=new Y,p=new Ae;let m=new Y;const v=[],x=[],_=[],S=[];A(),this.setIndex(S),this.setAttribute("position",new At(v,3)),this.setAttribute("normal",new At(x,3)),this.setAttribute("uv",new At(_,2));function A(){for(let R=0;R<t;R++)T(R);T(s===!1?t:0),C(),w()}function T(R){m=e.getPointAt(R/t,m);const P=u.normals[R],F=u.binormals[R];for(let N=0;N<=i;N++){const z=N/i*Math.PI*2,G=Math.sin(z),D=-Math.cos(z);f.x=D*P.x+G*F.x,f.y=D*P.y+G*F.y,f.z=D*P.z+G*F.z,f.normalize(),x.push(f.x,f.y,f.z),c.x=m.x+n*f.x,c.y=m.y+n*f.y,c.z=m.z+n*f.z,v.push(c.x,c.y,c.z)}}function w(){for(let R=1;R<=t;R++)for(let P=1;P<=i;P++){const F=(i+1)*(R-1)+(P-1),N=(i+1)*R+(P-1),z=(i+1)*R+P,G=(i+1)*(R-1)+P;S.push(F,N,G),S.push(N,z,G)}}function C(){for(let R=0;R<=t;R++)for(let P=0;P<=i;P++)p.x=R/t,p.y=P/i,_.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new zg(new ig[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class B1 extends Jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new Y,s=new Y;if(e.index!==null){const u=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let p=0,m=f.length;p<m;++p){const v=f[p],x=v.start,_=v.count;for(let S=x,A=x+_;S<A;S+=3)for(let T=0;T<3;T++){const w=c.getX(S+T),C=c.getX(S+(T+1)%3);i.fromBufferAttribute(u,w),s.fromBufferAttribute(u,C),l_(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const u=e.attributes.position;for(let c=0,f=u.count/3;c<f;c++)for(let p=0;p<3;p++){const m=3*c+p,v=3*c+(p+1)%3;i.fromBufferAttribute(u,m),s.fromBufferAttribute(u,v),l_(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new At(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function l_(a,e,t){const n=`${a.x},${a.y},${a.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${a.x},${a.y},${a.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var u_=Object.freeze({__proto__:null,BoxGeometry:Ru,CapsuleGeometry:kg,CircleGeometry:Cg,ConeGeometry:_f,CylinderGeometry:xf,DodecahedronGeometry:Rg,EdgesGeometry:C1,ExtrudeGeometry:Pg,IcosahedronGeometry:Lg,LatheGeometry:Ng,OctahedronGeometry:bf,PlaneGeometry:Ec,PolyhedronGeometry:cl,RingGeometry:Dg,ShapeGeometry:Og,SphereGeometry:wf,TetrahedronGeometry:Ug,TorusGeometry:Fg,TorusKnotGeometry:Bg,TubeGeometry:zg,WireframeGeometry:B1});class z1 extends nr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class V1 extends va{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class x0 extends nr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new xt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ta,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class H1 extends x0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ae(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Vt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class j1 extends nr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xt(16777215),this.specular=new xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ta,this.combine=mf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class G1 extends nr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class W1 extends nr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class X1 extends nr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ta,this.combine=mf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _0 extends nr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=t1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class b0 extends nr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Y1 extends nr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ul,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class q1 extends xr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function _u(a,e){return!a||a.constructor===e?a:typeof e.BYTES_PER_ELEMENT=="number"?new e(a):Array.prototype.slice.call(a)}function K1(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Z1(a){function e(i,s){return a[i]-a[s]}const t=a.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function Fy(a,e,t){const n=a.length,i=new a.constructor(n);for(let s=0,u=0;u!==n;++s){const c=t[s]*e;for(let f=0;f!==e;++f)i[u++]=a[c+f]}return i}function w0(a,e,t,n){let i=1,s=a[0];for(;s!==void 0&&s[n]===void 0;)s=a[i++];if(s===void 0)return;let u=s[n];if(u!==void 0)if(Array.isArray(u))do u=s[n],u!==void 0&&(e.push(s.time),t.push(...u)),s=a[i++];while(s!==void 0);else if(u.toArray!==void 0)do u=s[n],u!==void 0&&(e.push(s.time),u.toArray(t,t.length)),s=a[i++];while(s!==void 0);else do u=s[n],u!==void 0&&(e.push(s.time),t.push(u)),s=a[i++];while(s!==void 0)}function J3(a,e,t,n,i=30){const s=a.clone();s.name=e;const u=[];for(let f=0;f<s.tracks.length;++f){const p=s.tracks[f],m=p.getValueSize(),v=[],x=[];for(let _=0;_<p.times.length;++_){const S=p.times[_]*i;if(!(S<t||S>=n)){v.push(p.times[_]);for(let A=0;A<m;++A)x.push(p.values[_*m+A])}}v.length!==0&&(p.times=_u(v,p.times.constructor),p.values=_u(x,p.values.constructor),u.push(p))}s.tracks=u;let c=1/0;for(let f=0;f<s.tracks.length;++f)c>s.tracks[f].times[0]&&(c=s.tracks[f].times[0]);for(let f=0;f<s.tracks.length;++f)s.tracks[f].shift(-1*c);return s.resetDuration(),s}function Q3(a,e=0,t=a,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let u=0;u<i;++u){const c=t.tracks[u],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const p=a.tracks.find(function(w){return w.name===c.name&&w.ValueTypeName===f});if(p===void 0)continue;let m=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);let x=0;const _=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=_/3);const S=c.times.length-1;let A;if(s<=c.times[0]){const w=m,C=v-m;A=c.values.slice(w,C)}else if(s>=c.times[S]){const w=S*v+m,C=w+v-m;A=c.values.slice(w,C)}else{const w=c.createInterpolant(),C=m,R=v-m;w.evaluate(s),A=w.resultBuffer.slice(C,R)}f==="quaternion"&&new er().fromArray(A).normalize().conjugate().toArray(A);const T=p.times.length;for(let w=0;w<T;++w){const C=w*_+x;if(f==="quaternion")er.multiplyQuaternionsFlat(p.values,C,A,0,p.values,C);else{const R=_-x*2;for(let P=0;P<R;++P)p.values[C+P]-=A[P]}}}return a.blendMode=n0,a}class $3{static convertArray(e,t){return _u(e,t)}static isTypedArray(e){return K1(e)}static getKeyframeOrder(e){return Z1(e)}static sortedArray(e,t,n){return Fy(e,t,n)}static flattenJSON(e,t,n,i){w0(e,t,n,i)}static subclip(e,t,n,i,s=30){return J3(e,t,n,i,s)}static makeClipAdditive(e,t=0,n=e,i=30){return Q3(e,t,n,i)}}class Sf{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let u;n:{i:if(!(e<i)){for(let c=n+2;;){if(i===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(s=i,i=t[++n],e<i)break t}u=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(n=2,s=c);for(let f=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(i=s,s=t[--n-1],e>=s)break t}u=n,n=0;break n}break e}for(;n<u;){const c=n+u>>>1;e<t[c]?u=c:n=c+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let u=0;u!==i;++u)t[u]=n[s+u];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class J1 extends Sf{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yu,endingEnd:yu}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,u=e+1,c=i[s],f=i[u];if(c===void 0)switch(this.getSettings_().endingStart){case xu:s=e,c=2*t-n;break;case nf:s=i.length-2,c=t+i[s]-i[s+1];break;default:s=e,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case xu:u=e,f=2*n-t;break;case nf:u=1,f=n+i[1]-i[0];break;default:u=e-1,f=t}const p=(n-t)*.5,m=this.valueSize;this._weightPrev=p/(t-c),this._weightNext=p/(f-n),this._offsetPrev=s*m,this._offsetNext=u*m}interpolate_(e,t,n,i){const s=this.resultBuffer,u=this.sampleValues,c=this.valueSize,f=e*c,p=f-c,m=this._offsetPrev,v=this._offsetNext,x=this._weightPrev,_=this._weightNext,S=(n-t)/(i-t),A=S*S,T=A*S,w=-x*T+2*x*A-x*S,C=(1+x)*T+(-1.5-2*x)*A+(-.5+x)*S+1,R=(-1-_)*T+(1.5+_)*A+.5*S,P=_*T-_*A;for(let F=0;F!==c;++F)s[F]=w*u[m+F]+C*u[p+F]+R*u[f+F]+P*u[v+F];return s}}class S0 extends Sf{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,u=this.sampleValues,c=this.valueSize,f=e*c,p=f-c,m=(n-t)/(i-t),v=1-m;for(let x=0;x!==c;++x)s[x]=u[p+x]*v+u[f+x]*m;return s}}class Q1 extends Sf{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ya{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_u(t,this.TimeBufferType),this.values=_u(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:_u(e.times,Array),values:_u(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Q1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new S0(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new J1(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tf:t=this.InterpolantFactoryMethodDiscrete;break;case eg:t=this.InterpolantFactoryMethodLinear;break;case fm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return ft("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tf;case this.InterpolantFactoryMethodLinear:return eg;case this.InterpolantFactoryMethodSmooth:return fm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,u=i-1;for(;s!==i&&n[s]<e;)++s;for(;u!==-1&&n[u]>t;)--u;if(++u,s!==0||u!==i){s>=u&&(u=Math.max(u,1),s=u-1);const c=this.getValueSize();this.times=n.slice(s,u),this.values=this.values.slice(s*c,u*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Wt("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(Wt("KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let c=0;c!==s;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){Wt("KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(u!==null&&u>f){Wt("KeyframeTrack: Out of order keys.",this,c,f,u),e=!1;break}u=f}if(i!==void 0&&K1(i))for(let c=0,f=i.length;c!==f;++c){const p=i[c];if(isNaN(p)){Wt("KeyframeTrack: Value is not a valid number.",this,c,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===fm,s=e.length-1;let u=1;for(let c=1;c<s;++c){let f=!1;const p=e[c],m=e[c+1];if(p!==m&&(c!==1||p!==e[0]))if(i)f=!0;else{const v=c*n,x=v-n,_=v+n;for(let S=0;S!==n;++S){const A=t[v+S];if(A!==t[x+S]||A!==t[_+S]){f=!0;break}}}if(f){if(c!==u){e[u]=e[c];const v=c*n,x=u*n;for(let _=0;_!==n;++_)t[x+_]=t[v+_]}++u}}if(s>0){e[u]=e[s];for(let c=s*n,f=u*n,p=0;p!==n;++p)t[f+p]=t[c+p];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=t.slice(0,u*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ya.prototype.ValueTypeName="";ya.prototype.TimeBufferType=Float32Array;ya.prototype.ValueBufferType=Float32Array;ya.prototype.DefaultInterpolation=eg;class Iu extends ya{constructor(e,t,n){super(e,t,n)}}Iu.prototype.ValueTypeName="bool";Iu.prototype.ValueBufferType=Array;Iu.prototype.DefaultInterpolation=tf;Iu.prototype.InterpolantFactoryMethodLinear=void 0;Iu.prototype.InterpolantFactoryMethodSmooth=void 0;class M0 extends ya{constructor(e,t,n,i){super(e,t,n,i)}}M0.prototype.ValueTypeName="color";class cf extends ya{constructor(e,t,n,i){super(e,t,n,i)}}cf.prototype.ValueTypeName="number";class $1 extends Sf{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,u=this.sampleValues,c=this.valueSize,f=(n-t)/(i-t);let p=e*c;for(let m=p+c;p!==m;p+=4)er.slerpFlat(s,0,u,p-c,u,p,f);return s}}class Mf extends ya{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new $1(this.times,this.values,this.getValueSize(),e)}}Mf.prototype.ValueTypeName="quaternion";Mf.prototype.InterpolantFactoryMethodSmooth=void 0;class Pu extends ya{constructor(e,t,n){super(e,t,n)}}Pu.prototype.ValueTypeName="string";Pu.prototype.ValueBufferType=Array;Pu.prototype.DefaultInterpolation=tf;Pu.prototype.InterpolantFactoryMethodLinear=void 0;Pu.prototype.InterpolantFactoryMethodSmooth=void 0;class df extends ya{constructor(e,t,n,i){super(e,t,n,i)}}df.prototype.ValueTypeName="vector";class ff{constructor(e="",t=-1,n=[],i=yg){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=ea(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let u=0,c=n.length;u!==c;++u)t.push(t2(n[u]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,u=n.length;s!==u;++s)t.push(ya.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,u=[];for(let c=0;c<s;c++){let f=[],p=[];f.push((c+s-1)%s,c,(c+1)%s),p.push(0,1,0);const m=Z1(f);f=Fy(f,1,m),p=Fy(p,1,m),!i&&f[0]===0&&(f.push(s),p.push(p[0])),u.push(new cf(".morphTargetInfluences["+t[c].name+"]",f,p).scale(1/n))}return new this(e,-1,u)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const p=e[c],m=p.name.match(s);if(m&&m.length>1){const v=m[1];let x=i[v];x||(i[v]=x=[]),x.push(p)}}const u=[];for(const c in i)u.push(this.CreateFromMorphTargetSequence(c,i[c],t,n));return u}static parseAnimation(e,t){if(ft("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Wt("AnimationClip: No animation in JSONLoader data."),null;const n=function(v,x,_,S,A){if(_.length!==0){const T=[],w=[];w0(_,T,w,S),T.length!==0&&A.push(new v(x,T,w))}},i=[],s=e.name||"default",u=e.fps||30,c=e.blendMode;let f=e.length||-1;const p=e.hierarchy||[];for(let v=0;v<p.length;v++){const x=p[v].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const _={};let S;for(S=0;S<x.length;S++)if(x[S].morphTargets)for(let A=0;A<x[S].morphTargets.length;A++)_[x[S].morphTargets[A]]=-1;for(const A in _){const T=[],w=[];for(let C=0;C!==x[S].morphTargets.length;++C){const R=x[S];T.push(R.time),w.push(R.morphTarget===A?1:0)}i.push(new cf(".morphTargetInfluence["+A+"]",T,w))}f=_.length*u}else{const _=".bones["+t[v].name+"]";n(df,_+".position",x,"pos",i),n(Mf,_+".quaternion",x,"rot",i),n(df,_+".scale",x,"scl",i)}}return i.length===0?null:new this(s,f,i,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function e2(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cf;case"vector":case"vector2":case"vector3":case"vector4":return df;case"color":return M0;case"quaternion":return Mf;case"bool":case"boolean":return Iu;case"string":return Pu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function t2(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=e2(a.type);if(a.times===void 0){const t=[],n=[];w0(a.keys,t,n,"value"),a.times=t,a.values=n}return e.parse!==void 0?e.parse(a):new e(a.name,a.times,a.values,a.interpolation)}const ms={enabled:!1,files:{},add:function(a,e){this.enabled!==!1&&(this.files[a]=e)},get:function(a){if(this.enabled!==!1)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class T0{constructor(e,t,n){const i=this;let s=!1,u=0,c=0,f;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(m){c++,s===!1&&i.onStart!==void 0&&i.onStart(m,u,c),s=!0},this.itemEnd=function(m){u++,i.onProgress!==void 0&&i.onProgress(m,u,c),u===c&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(m){i.onError!==void 0&&i.onError(m)},this.resolveURL=function(m){return f?f(m):m},this.setURLModifier=function(m){return f=m,this},this.addHandler=function(m,v){return p.push(m,v),this},this.removeHandler=function(m){const v=p.indexOf(m);return v!==-1&&p.splice(v,2),this},this.getHandler=function(m){for(let v=0,x=p.length;v<x;v+=2){const _=p[v],S=p[v+1];if(_.global&&(_.lastIndex=0),_.test(m))return S}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const ew=new T0;class Ur{constructor(e){this.manager=e!==void 0?e:ew,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Ur.DEFAULT_MATERIAL_NAME="__DEFAULT";const io={};class n2 extends Error{constructor(e,t){super(e),this.response=t}}class fo extends Ur{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ms.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(io[e]!==void 0){io[e].push({onLoad:t,onProgress:n,onError:i});return}io[e]=[],io[e].push({onLoad:t,onProgress:n,onError:i});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,f=this.responseType;fetch(u).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&ft("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const m=io[e],v=p.body.getReader(),x=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),_=x?parseInt(x):0,S=_!==0;let A=0;const T=new ReadableStream({start(w){C();function C(){v.read().then(({done:R,value:P})=>{if(R)w.close();else{A+=P.byteLength;const F=new ProgressEvent("progress",{lengthComputable:S,loaded:A,total:_});for(let N=0,z=m.length;N<z;N++){const G=m[N];G.onProgress&&G.onProgress(F)}w.enqueue(P),C()}},R=>{w.error(R)})}}});return new Response(T)}else throw new n2(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(f){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return p.json();default:if(c==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(c),x=v&&v[1]?v[1].toLowerCase():void 0,_=new TextDecoder(x);return p.arrayBuffer().then(S=>_.decode(S))}}}).then(p=>{ms.add(`file:${e}`,p);const m=io[e];delete io[e];for(let v=0,x=m.length;v<x;v++){const _=m[v];_.onLoad&&_.onLoad(p)}}).catch(p=>{const m=io[e];if(m===void 0)throw this.manager.itemError(e),p;delete io[e];for(let v=0,x=m.length;v<x;v++){const _=m[v];_.onError&&_.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class i2 extends Ur{constructor(e){super(e)}load(e,t,n,i){const s=this,u=new fo(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){i?i(f):Wt(f),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=ff.parse(e[n]);t.push(i)}return t}}class r2 extends Ur{constructor(e){super(e)}load(e,t,n,i){const s=this,u=[],c=new Eg,f=new fo(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(s.withCredentials);let p=0;function m(v){f.load(e[v],function(x){const _=s.parse(x,!0);u[v]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},p+=1,p===6&&(_.mipmapCount===1&&(c.minFilter=Wn),c.image=u,c.format=_.format,c.needsUpdate=!0,t&&t(c))},n,i)}if(Array.isArray(e))for(let v=0,x=e.length;v<x;++v)m(v);else f.load(e,function(v){const x=s.parse(v,!0);if(x.isCubemap){const _=x.mipmaps.length/x.mipmapCount;for(let S=0;S<_;S++){u[S]={mipmaps:[]};for(let A=0;A<x.mipmapCount;A++)u[S].mipmaps.push(x.mipmaps[S*x.mipmapCount+A]),u[S].format=x.format,u[S].width=x.width,u[S].height=x.height}c.image=u}else c.image.width=x.width,c.image.height=x.height,c.mipmaps=x.mipmaps;x.mipmapCount===1&&(c.minFilter=Wn),c.format=x.format,c.needsUpdate=!0,t&&t(c)},n,i);return c}}const ec=new WeakMap;class pf extends Ur{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,u=ms.get(`image:${e}`);if(u!==void 0){if(u.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(u),s.manager.itemEnd(e)},0);else{let v=ec.get(u);v===void 0&&(v=[],ec.set(u,v)),v.push({onLoad:t,onError:i})}return u}const c=sf("img");function f(){m(),t&&t(this);const v=ec.get(this)||[];for(let x=0;x<v.length;x++){const _=v[x];_.onLoad&&_.onLoad(this)}ec.delete(this),s.manager.itemEnd(e)}function p(v){m(),i&&i(v),ms.remove(`image:${e}`);const x=ec.get(this)||[];for(let _=0;_<x.length;_++){const S=x[_];S.onError&&S.onError(v)}ec.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function m(){c.removeEventListener("load",f,!1),c.removeEventListener("error",p,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),ms.add(`image:${e}`,c),s.manager.itemStart(e),c.src=e,c}}class a2 extends Ur{constructor(e){super(e)}load(e,t,n,i){const s=new yf;s.colorSpace=Nr;const u=new pf(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let c=0;function f(p){u.load(e[p],function(m){s.images[p]=m,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let p=0;p<e.length;++p)f(p);return s}}class s2 extends Ur{constructor(e){super(e)}load(e,t,n,i){const s=this,u=new qa,c=new fo(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(f){let p;try{p=s.parse(f)}catch(m){if(i!==void 0)i(m);else{m(m);return}}p.image!==void 0?u.image=p.image:p.data!==void 0&&(u.image.width=p.width,u.image.height=p.height,u.image.data=p.data),u.wrapS=p.wrapS!==void 0?p.wrapS:Or,u.wrapT=p.wrapT!==void 0?p.wrapT:Or,u.magFilter=p.magFilter!==void 0?p.magFilter:Wn,u.minFilter=p.minFilter!==void 0?p.minFilter:Wn,u.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(u.colorSpace=p.colorSpace),p.flipY!==void 0&&(u.flipY=p.flipY),p.format!==void 0&&(u.format=p.format),p.type!==void 0&&(u.type=p.type),p.mipmaps!==void 0&&(u.mipmaps=p.mipmaps,u.minFilter=ps),p.mipmapCount===1&&(u.minFilter=Wn),p.generateMipmaps!==void 0&&(u.generateMipmaps=p.generateMipmaps),u.needsUpdate=!0,t&&t(u,p)},n,i),u}}class o2 extends Ur{constructor(e){super(e)}load(e,t,n,i){const s=new Qn,u=new pf(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class dl extends yn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new xt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class tw extends dl{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ty=new Ht,h_=new Y,c_=new Y;class E0{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ae(512,512),this.mapType=ga,this.map=null,this.mapPass=null,this.matrix=new Ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tc,this._frameExtents=new Ae(1,1),this._viewportCount=1,this._viewports=[new vn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;h_.setFromMatrixPosition(e.matrixWorld),t.position.copy(h_),c_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(c_),t.updateMatrixWorld(),ty.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ty,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ty)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class l2 extends E0{constructor(){super(new ii(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=xc*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class nw extends dl{constructor(e,t,n=0,i=Math.PI/3,s=0,u=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.distance=n,this.angle=i,this.penumbra=s,this.decay=u,this.map=null,this.shadow=new l2}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const d_=new Ht,Dd=new Y,ny=new Y;class u2 extends E0{constructor(){super(new ii(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ae(4,2),this._viewportCount=6,this._viewports=[new vn(2,1,1,1),new vn(0,1,1,1),new vn(3,1,1,1),new vn(1,1,1,1),new vn(3,0,1,1),new vn(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Dd.setFromMatrixPosition(e.matrixWorld),n.position.copy(Dd),ny.copy(n.position),ny.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ny),n.updateMatrixWorld(),i.makeTranslation(-Dd.x,-Dd.y,-Dd.z),d_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d_,n.coordinateSystem,n.reversedDepth)}}class iw extends dl{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new u2}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class rl extends vf{constructor(e=-1,t=1,n=1,i=-1,s=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,u=n+e,c=i+t,f=i-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,u=s+p*this.view.width,c-=m*this.view.offsetY,f=c-m*this.view.height}this.projectionMatrix.makeOrthographic(s,u,c,f,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class h2 extends E0{constructor(){super(new rl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class rw extends dl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.shadow=new h2}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class aw extends dl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class sw extends dl{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class ow{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.282095),t.addScaledVector(u[1],.488603*i),t.addScaledVector(u[2],.488603*s),t.addScaledVector(u[3],.488603*n),t.addScaledVector(u[4],1.092548*(n*i)),t.addScaledVector(u[5],1.092548*(i*s)),t.addScaledVector(u[6],.315392*(3*s*s-1)),t.addScaledVector(u[7],1.092548*(n*s)),t.addScaledVector(u[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.886227),t.addScaledVector(u[1],2*.511664*i),t.addScaledVector(u[2],2*.511664*s),t.addScaledVector(u[3],2*.511664*n),t.addScaledVector(u[4],2*.429043*n*i),t.addScaledVector(u[5],2*.429043*i*s),t.addScaledVector(u[6],.743125*s*s-.247708),t.addScaledVector(u[7],2*.429043*n*s),t.addScaledVector(u[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class lw extends dl{constructor(e=new ow,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Vg extends Ur{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,u=new fo(s.manager);u.setPath(s.path),u.setRequestHeader(s.requestHeader),u.setWithCredentials(s.withCredentials),u.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){i?i(f):Wt(f),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&ft("MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new xt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const u=e.uniforms[s];switch(i.uniforms[s]={},u.type){case"t":i.uniforms[s].value=n(u.value);break;case"c":i.uniforms[s].value=new xt().setHex(u.value);break;case"v2":i.uniforms[s].value=new Ae().fromArray(u.value);break;case"v3":i.uniforms[s].value=new Y().fromArray(u.value);break;case"v4":i.uniforms[s].value=new vn().fromArray(u.value);break;case"m3":i.uniforms[s].value=new Zt().fromArray(u.value);break;case"m4":i.uniforms[s].value=new Ht().fromArray(u.value);break;default:i.uniforms[s].value=u.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ae().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ae().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Vg.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:z1,SpriteMaterial:u0,RawShaderMaterial:V1,ShaderMaterial:va,PointsMaterial:c0,MeshPhysicalMaterial:H1,MeshStandardMaterial:x0,MeshPhongMaterial:j1,MeshToonMaterial:G1,MeshNormalMaterial:W1,MeshLambertMaterial:X1,MeshDepthMaterial:_0,MeshDistanceMaterial:b0,MeshBasicMaterial:hl,MeshMatcapMaterial:Y1,LineDashedMaterial:q1,LineBasicMaterial:xr,Material:nr};return new t[e]}}class By{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class uw extends Jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hw extends Ur{constructor(e){super(e)}load(e,t,n,i){const s=this,u=new fo(s.manager);u.setPath(s.path),u.setRequestHeader(s.requestHeader),u.setWithCredentials(s.withCredentials),u.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){i?i(f):Wt(f),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(_,S){if(t[S]!==void 0)return t[S];const T=_.interleavedBuffers[S],w=s(_,T.buffer),C=uc(T.type,w),R=new Sg(C,T.stride);return R.uuid=T.uuid,t[S]=R,R}function s(_,S){if(n[S]!==void 0)return n[S];const T=_.arrayBuffers[S],w=new Uint32Array(T).buffer;return n[S]=w,w}const u=e.isInstancedBufferGeometry?new uw:new Jt,c=e.data.index;if(c!==void 0){const _=uc(c.type,c.array);u.setIndex(new Cn(_,1))}const f=e.data.attributes;for(const _ in f){const S=f[_];let A;if(S.isInterleavedBufferAttribute){const T=i(e.data,S.data);A=new Au(T,S.itemSize,S.offset,S.normalized)}else{const T=uc(S.type,S.array),w=S.isInstancedBufferAttribute?bc:Cn;A=new w(T,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),S.usage!==void 0&&A.setUsage(S.usage),u.setAttribute(_,A)}const p=e.data.morphAttributes;if(p)for(const _ in p){const S=p[_],A=[];for(let T=0,w=S.length;T<w;T++){const C=S[T];let R;if(C.isInterleavedBufferAttribute){const P=i(e.data,C.data);R=new Au(P,C.itemSize,C.offset,C.normalized)}else{const P=uc(C.type,C.array);R=new Cn(P,C.itemSize,C.normalized)}C.name!==void 0&&(R.name=C.name),A.push(R)}u.morphAttributes[_]=A}e.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const v=e.data.groups||e.data.drawcalls||e.data.offsets;if(v!==void 0)for(let _=0,S=v.length;_!==S;++_){const A=v[_];u.addGroup(A.start,A.count,A.materialIndex)}const x=e.data.boundingSphere;return x!==void 0&&(u.boundingSphere=new Vi().fromJSON(x)),e.name&&(u.name=e.name),e.userData&&(u.userData=e.userData),u}}class c2 extends Ur{constructor(e){super(e)}load(e,t,n,i){const s=this,u=this.path===""?By.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||u;const c=new fo(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let p=null;try{p=JSON.parse(f)}catch(v){i!==void 0&&i(v),v("ObjectLoader: Can't parse "+e+".",v.message);return}const m=p.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),Wt("ObjectLoader: Can't load "+e);return}s.parse(p,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?By.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new fo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const u=await s.loadAsync(e,t),c=JSON.parse(u),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),u=this.parseImages(e.images,function(){t!==void 0&&t(p)}),c=this.parseTextures(e.textures,u),f=this.parseMaterials(e.materials,c),p=this.parseObject(e.object,s,f,c,n),m=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,m),this.bindLightTargets(p),t!==void 0){let v=!1;for(const x in u)if(u[x].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),u=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,u),f=this.parseObject(e.object,i,c,u,t),p=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,p),this.bindLightTargets(f),f}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new Mu().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,u=e.length;s<u;s++){const c=new Mg().fromJSON(e[s],i);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new hw;for(let s=0,u=e.length;s<u;s++){let c;const f=e[s];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=i.parse(f);break;default:f.type in u_?c=u_[f.type].fromJSON(f,t):ft(`ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),n[f.uuid]=c}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new Vg;s.setTextures(t);for(let u=0,c=e.length;u<c;u++){const f=e[u];n[f.uuid]===void 0&&(n[f.uuid]=s.parse(f)),i[f.uuid]=n[f.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=ff.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function u(f){return n.manager.itemStart(f),s.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const p=f,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return u(m)}else return f.data?{data:uc(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new T0(t);s=new pf(f),s.setCrossOrigin(this.crossOrigin);for(let p=0,m=e.length;p<m;p++){const v=e[p],x=v.url;if(Array.isArray(x)){const _=[];for(let S=0,A=x.length;S<A;S++){const T=x[S],w=c(T);w!==null&&(w instanceof HTMLImageElement?_.push(w):_.push(new qa(w.data,w.width,w.height)))}i[v.uuid]=new nl(_)}else{const _=c(v.url);i[v.uuid]=new nl(_)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(u){if(typeof u=="string"){const c=u,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await i.loadAsync(f)}else return u.data?{data:uc(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){i=new pf(this.manager),i.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,x=p.length;v<x;v++){const _=p[v],S=await s(_);S!==null&&(S instanceof HTMLImageElement?m.push(S):m.push(new qa(S.data,S.width,S.height)))}n[f.uuid]=new nl(m)}else{const m=await s(f.url);n[f.uuid]=new nl(m)}}}return n}parseTextures(e,t){function n(s,u){return typeof s=="number"?s:(ft("ObjectLoader.parseTexture: Constant should be in numeric form.",s),u[s])}const i={};if(e!==void 0)for(let s=0,u=e.length;s<u;s++){const c=e[s];c.image===void 0&&ft('ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&ft("ObjectLoader: Undefined image",c.image);const f=t[c.image],p=f.data;let m;Array.isArray(p)?(m=new yf,p.length===6&&(m.needsUpdate=!0)):(p&&p.data?m=new qa:m=new Qn,p&&(m.needsUpdate=!0)),m.source=f,m.uuid=c.uuid,c.name!==void 0&&(m.name=c.name),c.mapping!==void 0&&(m.mapping=n(c.mapping,d2)),c.channel!==void 0&&(m.channel=c.channel),c.offset!==void 0&&m.offset.fromArray(c.offset),c.repeat!==void 0&&m.repeat.fromArray(c.repeat),c.center!==void 0&&m.center.fromArray(c.center),c.rotation!==void 0&&(m.rotation=c.rotation),c.wrap!==void 0&&(m.wrapS=n(c.wrap[0],f_),m.wrapT=n(c.wrap[1],f_)),c.format!==void 0&&(m.format=c.format),c.internalFormat!==void 0&&(m.internalFormat=c.internalFormat),c.type!==void 0&&(m.type=c.type),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace),c.minFilter!==void 0&&(m.minFilter=n(c.minFilter,p_)),c.magFilter!==void 0&&(m.magFilter=n(c.magFilter,p_)),c.anisotropy!==void 0&&(m.anisotropy=c.anisotropy),c.flipY!==void 0&&(m.flipY=c.flipY),c.generateMipmaps!==void 0&&(m.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(m.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(m.compareFunction=c.compareFunction),c.userData!==void 0&&(m.userData=c.userData),i[c.uuid]=m}return i}parseObject(e,t,n,i,s){let u;function c(x){return t[x]===void 0&&ft("ObjectLoader: Undefined geometry",x),t[x]}function f(x){if(x!==void 0){if(Array.isArray(x)){const _=[];for(let S=0,A=x.length;S<A;S++){const T=x[S];n[T]===void 0&&ft("ObjectLoader: Undefined material",T),_.push(n[T])}return _}return n[x]===void 0&&ft("ObjectLoader: Undefined material",x),n[x]}}function p(x){return i[x]===void 0&&ft("ObjectLoader: Undefined texture",x),i[x]}let m,v;switch(e.type){case"Scene":u=new l0,e.background!==void 0&&(Number.isInteger(e.background)?u.background=new xt(e.background):u.background=p(e.background)),e.environment!==void 0&&(u.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?u.fog=new wg(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(u.fog=new bg(e.fog.color,e.fog.density)),e.fog.name!==""&&(u.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(u.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(u.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&u.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":u=new ii(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(u.focus=e.focus),e.zoom!==void 0&&(u.zoom=e.zoom),e.filmGauge!==void 0&&(u.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(u.filmOffset=e.filmOffset),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"OrthographicCamera":u=new rl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(u.zoom=e.zoom),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"AmbientLight":u=new aw(e.color,e.intensity);break;case"DirectionalLight":u=new rw(e.color,e.intensity),u.target=e.target||"";break;case"PointLight":u=new iw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":u=new sw(e.color,e.intensity,e.width,e.height);break;case"SpotLight":u=new nw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),u.target=e.target||"";break;case"HemisphereLight":u=new tw(e.color,e.groundColor,e.intensity);break;case"LightProbe":u=new lw().fromJSON(e);break;case"SkinnedMesh":m=c(e.geometry),v=f(e.material),u=new S1(m,v),e.bindMode!==void 0&&(u.bindMode=e.bindMode),e.bindMatrix!==void 0&&u.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(u.skeleton=e.skeleton);break;case"Mesh":m=c(e.geometry),v=f(e.material),u=new _i(m,v);break;case"InstancedMesh":m=c(e.geometry),v=f(e.material);const x=e.count,_=e.instanceMatrix,S=e.instanceColor;u=new M1(m,v,x),u.instanceMatrix=new bc(new Float32Array(_.array),16),S!==void 0&&(u.instanceColor=new bc(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":m=c(e.geometry),v=f(e.material),u=new T1(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,v),u.geometry=m,u.perObjectFrustumCulled=e.perObjectFrustumCulled,u.sortObjects=e.sortObjects,u._drawRanges=e.drawRanges,u._reservedRanges=e.reservedRanges,u._geometryInfo=e.geometryInfo.map(A=>{let T=null,w=null;return A.boundingBox!==void 0&&(T=new tr().fromJSON(A.boundingBox)),A.boundingSphere!==void 0&&(w=new Vi().fromJSON(A.boundingSphere)),{...A,boundingBox:T,boundingSphere:w}}),u._instanceInfo=e.instanceInfo,u._availableInstanceIds=e._availableInstanceIds,u._availableGeometryIds=e._availableGeometryIds,u._nextIndexStart=e.nextIndexStart,u._nextVertexStart=e.nextVertexStart,u._geometryCount=e.geometryCount,u._maxInstanceCount=e.maxInstanceCount,u._maxVertexCount=e.maxVertexCount,u._maxIndexCount=e.maxIndexCount,u._geometryInitialized=e.geometryInitialized,u._matricesTexture=p(e.matricesTexture.uuid),u._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(u._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(u.boundingSphere=new Vi().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(u.boundingBox=new tr().fromJSON(e.boundingBox));break;case"LOD":u=new w1;break;case"Line":u=new ol(c(e.geometry),f(e.material));break;case"LineLoop":u=new E1(c(e.geometry),f(e.material));break;case"LineSegments":u=new xs(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":u=new A1(c(e.geometry),f(e.material));break;case"Sprite":u=new b1(f(e.material));break;case"Group":u=new hc;break;case"Bone":u=new h0;break;default:u=new yn}if(u.uuid=e.uuid,e.name!==void 0&&(u.name=e.name),e.matrix!==void 0?(u.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=e.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(e.position!==void 0&&u.position.fromArray(e.position),e.rotation!==void 0&&u.rotation.fromArray(e.rotation),e.quaternion!==void 0&&u.quaternion.fromArray(e.quaternion),e.scale!==void 0&&u.scale.fromArray(e.scale)),e.up!==void 0&&u.up.fromArray(e.up),e.castShadow!==void 0&&(u.castShadow=e.castShadow),e.receiveShadow!==void 0&&(u.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(u.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(u.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(u.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(u.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(u.visible=e.visible),e.frustumCulled!==void 0&&(u.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(u.renderOrder=e.renderOrder),e.userData!==void 0&&(u.userData=e.userData),e.layers!==void 0&&(u.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let _=0;_<x.length;_++)u.add(this.parseObject(x[_],t,n,i,s))}if(e.animations!==void 0){const x=e.animations;for(let _=0;_<x.length;_++){const S=x[_];u.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(u.autoUpdate=e.autoUpdate);const x=e.levels;for(let _=0;_<x.length;_++){const S=x[_],A=u.getObjectByProperty("uuid",S.object);A!==void 0&&u.addLevel(A,S.distance,S.hysteresis)}}return u}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?ft("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new yn}})}}const d2={UVMapping:hg,CubeReflectionMapping:ho,CubeRefractionMapping:al,EquirectangularReflectionMapping:Jd,EquirectangularRefractionMapping:Qd,CubeUVReflectionMapping:Mc},f_={RepeatWrapping:$d,ClampToEdgeWrapping:Or,MirroredRepeatWrapping:ef},p_={NearestFilter:zi,NearestMipmapNearestFilter:Ky,NearestMipmapLinearFilter:lc,LinearFilter:Wn,LinearMipmapNearestFilter:jd,LinearMipmapLinearFilter:ps},iy=new WeakMap;class f2 extends Ur{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ft("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ft("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,u=ms.get(`image-bitmap:${e}`);if(u!==void 0){if(s.manager.itemStart(e),u.then){u.then(p=>{if(iy.has(u)===!0)i&&i(iy.get(u)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(p),s.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(u),s.manager.itemEnd(e)},0),u}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const f=fetch(e,c).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(p){return ms.add(`image-bitmap:${e}`,p),t&&t(p),s.manager.itemEnd(e),p}).catch(function(p){i&&i(p),iy.set(f,p),ms.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});ms.add(`image-bitmap:${e}`,f),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let em;class A0{static getContext(){return em===void 0&&(em=new(window.AudioContext||window.webkitAudioContext)),em}static setContext(e){em=e}}class p2 extends Ur{constructor(e){super(e)}load(e,t,n,i){const s=this,u=new fo(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){try{const p=f.slice(0);A0.getContext().decodeAudioData(p,function(v){t(v)}).catch(c)}catch(p){c(p)}},n,i);function c(f){i?i(f):Wt(f),s.manager.itemError(e)}}}const m_=new Ht,g_=new Ht,su=new Ht;class m2{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ii,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ii,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,su.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,u=t.near*Math.tan(wu*t.fov*.5)/t.zoom;let c,f;g_.elements[12]=-i,m_.elements[12]=i,c=-u*t.aspect+s,f=u*t.aspect+s,su.elements[0]=2*t.near/(f-c),su.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(su),c=-u*t.aspect-s,f=u*t.aspect-s,su.elements[0]=2*t.near/(f-c),su.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(su)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(g_),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(m_)}}class cw extends ii{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class k0{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const ou=new Y,ry=new er,g2=new Y,lu=new Y,uu=new Y;class v2 extends yn{constructor(){super(),this.type="AudioListener",this.context=A0.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new k0}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ou,ry,g2),lu.set(0,0,-1).applyQuaternion(ry),uu.set(0,1,0).applyQuaternion(ry),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ou.x,n),t.positionY.linearRampToValueAtTime(ou.y,n),t.positionZ.linearRampToValueAtTime(ou.z,n),t.forwardX.linearRampToValueAtTime(lu.x,n),t.forwardY.linearRampToValueAtTime(lu.y,n),t.forwardZ.linearRampToValueAtTime(lu.z,n),t.upX.linearRampToValueAtTime(uu.x,n),t.upY.linearRampToValueAtTime(uu.y,n),t.upZ.linearRampToValueAtTime(uu.z,n)}else t.setPosition(ou.x,ou.y,ou.z),t.setOrientation(lu.x,lu.y,lu.z,uu.x,uu.y,uu.z)}}class dw extends yn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){ft("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(ft("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(ft("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const hu=new Y,v_=new er,y2=new Y,cu=new Y;class x2 extends dw{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hu,v_,y2),cu.set(0,0,1).applyQuaternion(v_);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hu.x,n),t.positionY.linearRampToValueAtTime(hu.y,n),t.positionZ.linearRampToValueAtTime(hu.z,n),t.orientationX.linearRampToValueAtTime(cu.x,n),t.orientationY.linearRampToValueAtTime(cu.y,n),t.orientationZ.linearRampToValueAtTime(cu.z,n)}else t.setPosition(hu.x,hu.y,hu.z),t.setOrientation(cu.x,cu.y,cu.z)}}class _2{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class fw{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,u;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let u=this.cumulativeWeight;if(u===0){for(let c=0;c!==i;++c)n[s+c]=n[c];u=t}else{u+=t;const c=t/u;this._mixBufferRegion(n,s,0,c,i)}this.cumulativeWeight=u}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,u=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const f=t*this._origIndex;this._mixBufferRegion(n,i,f,1-s,t)}u>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let f=t,p=t+t;f!==p;++f)if(n[f]!==n[f+t]){c.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,u=i;s!==u;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let u=0;u!==s;++u)e[t+u]=e[n+u]}_slerp(e,t,n,i){er.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const u=this._workIndex*s;er.multiplyQuaternionsFlat(e,u,e,t,e,n),er.slerpFlat(e,t,e,t,e,u,i)}_lerp(e,t,n,i,s){const u=1-i;for(let c=0;c!==s;++c){const f=t+c;e[f]=e[f]*u+e[n+c]*i}}_lerpAdditive(e,t,n,i,s){for(let u=0;u!==s;++u){const c=t+u;e[c]=e[c]+e[n+u]*i}}}const C0="\\[\\]\\.:\\/",b2=new RegExp("["+C0+"]","g"),R0="[^"+C0+"]",w2="[^"+C0.replace("\\.","")+"]",S2=/((?:WC+[\/:])*)/.source.replace("WC",R0),M2=/(WCOD+)?/.source.replace("WCOD",w2),T2=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",R0),E2=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",R0),A2=new RegExp("^"+S2+M2+T2+E2+"$"),k2=["material","materials","bones","map"];class C2{constructor(e,t,n){const i=n||gn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class gn{constructor(e,t,n){this.path=t,this.parsedPath=n||gn.parseTrackName(t),this.node=gn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new gn.Composite(e,t,n):new gn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(b2,"")}static parseTrackName(e){const t=A2.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);k2.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let u=0;u<s.length;u++){const c=s[u];if(c.name===t||c.uuid===t)return c;const f=n(c.children);if(f)return f}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=gn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){ft("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){Wt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Wt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Wt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===p){p=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Wt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Wt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){Wt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){Wt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const u=e[i];if(u===void 0){const p=t.nodeName;Wt("PropertyBinding: Trying to update property for track: "+p+"."+i+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){Wt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Wt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}f=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=s}else u.fromArray!==void 0&&u.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(f=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}gn.Composite=C2;gn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};gn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};gn.prototype.GetterByBindingType=[gn.prototype._getValue_direct,gn.prototype._getValue_array,gn.prototype._getValue_arrayElement,gn.prototype._getValue_toArray];gn.prototype.SetterByBindingTypeAndVersioning=[[gn.prototype._setValue_direct,gn.prototype._setValue_direct_setNeedsUpdate,gn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_array,gn.prototype._setValue_array_setNeedsUpdate,gn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_arrayElement,gn.prototype._setValue_arrayElement_setNeedsUpdate,gn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_fromArray,gn.prototype._setValue_fromArray_setNeedsUpdate,gn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class R2{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ea(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,u=s.length;let c,f=e.length,p=this.nCachedObjects_;for(let m=0,v=arguments.length;m!==v;++m){const x=arguments[m],_=x.uuid;let S=t[_];if(S===void 0){S=f++,t[_]=S,e.push(x);for(let A=0,T=u;A!==T;++A)s[A].push(new gn(x,n[A],i[A]))}else if(S<p){c=e[S];const A=--p,T=e[A];t[T.uuid]=S,e[S]=T,t[_]=A,e[A]=x;for(let w=0,C=u;w!==C;++w){const R=s[w],P=R[A];let F=R[S];R[S]=P,F===void 0&&(F=new gn(x,n[w],i[w])),R[A]=F}}else e[S]!==c&&Wt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const f=arguments[u],p=f.uuid,m=t[p];if(m!==void 0&&m>=s){const v=s++,x=e[v];t[x.uuid]=m,e[m]=x,t[p]=v,e[v]=f;for(let _=0,S=i;_!==S;++_){const A=n[_],T=A[v],w=A[m];A[m]=T,A[v]=w}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,u=e.length;for(let c=0,f=arguments.length;c!==f;++c){const p=arguments[c],m=p.uuid,v=t[m];if(v!==void 0)if(delete t[m],v<s){const x=--s,_=e[x],S=--u,A=e[S];t[_.uuid]=v,e[v]=_,t[A.uuid]=x,e[x]=A,e.pop();for(let T=0,w=i;T!==w;++T){const C=n[T],R=C[x],P=C[S];C[v]=R,C[x]=P,C.pop()}}else{const x=--u,_=e[x];x>0&&(t[_.uuid]=v),e[v]=_,e.pop();for(let S=0,A=i;S!==A;++S){const T=n[S];T[v]=T[x],T.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const u=this._paths,c=this._parsedPaths,f=this._objects,p=f.length,m=this.nCachedObjects_,v=new Array(p);i=s.length,n[e]=i,u.push(e),c.push(t),s.push(v);for(let x=m,_=f.length;x!==_;++x){const S=f[x];v[x]=new gn(S,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,u=this._bindings,c=u.length-1,f=u[c],p=e[c];t[p]=n,u[n]=f,u.pop(),s[n]=s[c],s.pop(),i[n]=i[c],i.pop()}}}class pw{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,u=s.length,c=new Array(u),f={endingStart:yu,endingEnd:yu};for(let p=0;p!==u;++p){const m=s[p].createInterpolant(null);c[p]=m,m.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$b,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const i=this._clip.duration,s=e._clip.duration,u=s/i,c=i/s;e.warp(1,u,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,u=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=i._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,p=c.sampleValues;return f[0]=s,f[1]=s+n,p[0]=e/u,p[1]=t/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const f=(e-s)*n;f<0||n===0?t=0:(this._startTime=null,t=n*f)}t*=this._updateTimeScale(e);const u=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case n0:for(let m=0,v=f.length;m!==v;++m)f[m].evaluate(u),p[m].accumulateAdditive(c);break;case yg:default:for(let m=0,v=f.length;m!==v;++m)f[m].evaluate(u),p[m].accumulate(i,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const u=n===e1;if(e===0)return s===-1?i:u&&(s&1)===1?t-i:i;if(n===Qb){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),i>=t||i<0){const c=Math.floor(i/t);i-=t*c,s+=Math.abs(c);const f=this.repetitions-s;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const p=e<0;this._setEndings(p,!p,u)}else this._setEndings(!1,!1,u);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=i;if(u&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=xu,i.endingEnd=xu):(e?i.endingStart=this.zeroSlopeAtStart?xu:yu:i.endingStart=nf,t?i.endingEnd=this.zeroSlopeAtEnd?xu:yu:i.endingEnd=nf)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let u=this._weightInterpolant;u===null&&(u=i._lendControlInterpolant(),this._weightInterpolant=u);const c=u.parameterPositions,f=u.sampleValues;return c[0]=s,f[0]=t,c[1]=s+e,f[1]=n,this}}const I2=new Float32Array(1);class P2 extends ys{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,u=e._propertyBindings,c=e._interpolants,f=n.uuid,p=this._bindingsByRootAndName;let m=p[f];m===void 0&&(m={},p[f]=m);for(let v=0;v!==s;++v){const x=i[v],_=x.name;let S=m[_];if(S!==void 0)++S.referenceCount,u[v]=S;else{if(S=u[v],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,f,_));continue}const A=t&&t._propertyBindings[v].binding.parsedPath;S=new fw(gn.create(n,_,A),x.ValueTypeName,x.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,f,_),u[v]=S}c[v].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let u=s[t];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=u;else{const c=u.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=i.length,i.push(e),u.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,u=this._actionsByClip,c=u[s],f=c.knownActions,p=f[f.length-1],m=e._byClipCacheIndex;p._byClipCacheIndex=m,f[m]=p,f.pop(),e._byClipCacheIndex=null;const v=c.actionByRoot,x=(e._localRoot||this._root).uuid;delete v[x],f.length===0&&delete u[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let u=i[t];u===void 0&&(u={},i[t]=u),u[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,u=this._bindingsByRootAndName,c=u[i],f=t[t.length-1],p=e._cacheIndex;f._cacheIndex=p,t[p]=f,t.pop(),delete c[s],Object.keys(c).length===0&&delete u[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new S0(new Float32Array(2),new Float32Array(2),1,I2),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let u=typeof e=="string"?ff.findByName(i,e):e;const c=u!==null?u.uuid:e,f=this._actionsByClip[c];let p=null;if(n===void 0&&(u!==null?n=u.blendMode:n=yg),f!==void 0){const v=f.actionByRoot[s];if(v!==void 0&&v.blendMode===n)return v;p=f.knownActions[0],u===null&&(u=p._clip)}if(u===null)return null;const m=new pw(this,u,t,n);return this._bindAction(m,p),this._addInactiveAction(m,c,s),m}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?ff.findByName(n,e):e,u=s?s.uuid:e,c=this._actionsByClip[u];return c!==void 0&&c.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),u=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(i,e,s,u);const c=this._bindings,f=this._nActiveBindings;for(let p=0;p!==f;++p)c[p].apply(u);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const u=s.knownActions;for(let c=0,f=u.length;c!==f;++c){const p=u[c];this._deactivateAction(p);const m=p._cacheIndex,v=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=m,t[m]=v,t.pop(),this._removeInactiveBindingsForAction(p)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const u in n){const c=n[u].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const u in s){const c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class L2 extends a0{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new _g(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class I0{constructor(e){this.value=e}clone(){return new I0(this.value.clone===void 0?this.value:this.value.clone())}}let N2=0;class D2 extends ys{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:N2++}),this.name="",this.usage=af,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let u=0;u<s.length;u++)this.uniforms.push(s[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class O2 extends Sg{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class U2{constructor(e,t,n,i,s,u=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.normalized=u,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const y_=new Ht;class mw{constructor(e,t,n=0,i=1/0){this.ray=new Cu(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Su,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Wt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return y_.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(y_),this}intersectObject(e,t=!0,n=[]){return zy(e,this,n,t),n.sort(x_),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)zy(e[i],this,n,t);return n.sort(x_),n}}function x_(a,e){return a.distance-e.distance}function zy(a,e,t,n){let i=!0;if(a.layers.test(e.layers)&&a.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=a.children;for(let u=0,c=s.length;u<c;u++)zy(s[u],e,t,!0)}}class F2{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=B2.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function B2(){this._document.hidden===!1&&this.reset()}class Vy{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Vt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Vt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class z2{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class P0{constructor(e,t,n,i){P0.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const __=new Ae;class V2{constructor(e=new Ae(1/0,1/0),t=new Ae(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=__.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,__).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const b_=new Y,tm=new Y,tc=new Y,nc=new Y,ay=new Y,H2=new Y,j2=new Y;class G2{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){b_.subVectors(e,this.start),tm.subVectors(this.end,this.start);const n=tm.dot(tm);let s=tm.dot(b_)/n;return t&&(s=Vt(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=H2,n=j2){const i=10000000000000001e-32;let s,u;const c=this.start,f=e.start,p=this.end,m=e.end;tc.subVectors(p,c),nc.subVectors(m,f),ay.subVectors(c,f);const v=tc.dot(tc),x=nc.dot(nc),_=nc.dot(ay);if(v<=i&&x<=i)return t.copy(c),n.copy(f),t.sub(n),t.dot(t);if(v<=i)s=0,u=_/x,u=Vt(u,0,1);else{const S=tc.dot(ay);if(x<=i)u=0,s=Vt(-S/v,0,1);else{const A=tc.dot(nc),T=v*x-A*A;T!==0?s=Vt((A*_-S*x)/T,0,1):s=0,u=(A*s+_)/x,u<0?(u=0,s=Vt(-S/v,0,1)):u>1&&(u=1,s=Vt((A-S)/v,0,1))}}return t.copy(c).add(tc.multiplyScalar(s)),n.copy(f).add(nc.multiplyScalar(u)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const w_=new Y;class W2 extends yn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Jt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,c=1,f=32;u<f;u++,c++){const p=u/f*Math.PI*2,m=c/f*Math.PI*2;i.push(Math.cos(p),Math.sin(p),1,Math.cos(m),Math.sin(m),1)}n.setAttribute("position",new At(i,3));const s=new xr({fog:!1,toneMapped:!1});this.cone=new xs(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),w_.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(w_),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $o=new Y,nm=new Ht,sy=new Ht;class X2 extends xs{constructor(e){const t=gw(e),n=new Jt,i=[],s=[];for(let p=0;p<t.length;p++){const m=t[p];m.parent&&m.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new At(i,3)),n.setAttribute("color",new At(s,3));const u=new xr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const c=new xt(255),f=new xt(65280);this.setColors(c,f)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");sy.copy(this.root.matrixWorld).invert();for(let s=0,u=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(nm.multiplyMatrices(sy,c.matrixWorld),$o.setFromMatrixPosition(nm),i.setXYZ(u,$o.x,$o.y,$o.z),nm.multiplyMatrices(sy,c.parent.matrixWorld),$o.setFromMatrixPosition(nm),i.setXYZ(u+1,$o.x,$o.y,$o.z),u+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let s=0;s<i.count;s+=2)i.setXYZ(s,e.r,e.g,e.b),i.setXYZ(s+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function gw(a){const e=[];a.isBone===!0&&e.push(a);for(let t=0;t<a.children.length;t++)e.push(...gw(a.children[t]));return e}class Y2 extends _i{constructor(e,t,n){const i=new wf(t,4,2),s=new hl({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const q2=new Y,S_=new xt,M_=new xt;class K2 extends yn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new bf(t);i.rotateY(Math.PI*.5),this.material=new hl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),u=new Float32Array(s.count*3);i.setAttribute("color",new Cn(u,3)),this.add(new _i(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");S_.copy(this.light.color),M_.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?S_:M_;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(q2.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Z2 extends xs{constructor(e=10,t=10,n=4473924,i=8947848){n=new xt(n),i=new xt(i);const s=t/2,u=e/t,c=e/2,f=[],p=[];for(let x=0,_=0,S=-c;x<=t;x++,S+=u){f.push(-c,0,S,c,0,S),f.push(S,0,-c,S,0,c);const A=x===s?n:i;A.toArray(p,_),_+=3,A.toArray(p,_),_+=3,A.toArray(p,_),_+=3,A.toArray(p,_),_+=3}const m=new Jt;m.setAttribute("position",new At(f,3)),m.setAttribute("color",new At(p,3));const v=new xr({vertexColors:!0,toneMapped:!1});super(m,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class J2 extends xs{constructor(e=10,t=16,n=8,i=64,s=4473924,u=8947848){s=new xt(s),u=new xt(u);const c=[],f=[];if(t>1)for(let v=0;v<t;v++){const x=v/t*(Math.PI*2),_=Math.sin(x)*e,S=Math.cos(x)*e;c.push(0,0,0),c.push(_,0,S);const A=v&1?s:u;f.push(A.r,A.g,A.b),f.push(A.r,A.g,A.b)}for(let v=0;v<n;v++){const x=v&1?s:u,_=e-e/n*v;for(let S=0;S<i;S++){let A=S/i*(Math.PI*2),T=Math.sin(A)*_,w=Math.cos(A)*_;c.push(T,0,w),f.push(x.r,x.g,x.b),A=(S+1)/i*(Math.PI*2),T=Math.sin(A)*_,w=Math.cos(A)*_,c.push(T,0,w),f.push(x.r,x.g,x.b)}}const p=new Jt;p.setAttribute("position",new At(c,3)),p.setAttribute("color",new At(f,3));const m=new xr({vertexColors:!0,toneMapped:!1});super(p,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const T_=new Y,im=new Y,E_=new Y;class Q2 extends yn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Jt;i.setAttribute("position",new At([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new xr({fog:!1,toneMapped:!1});this.lightPlane=new ol(i,s),this.add(this.lightPlane),i=new Jt,i.setAttribute("position",new At([0,0,0,0,0,1],3)),this.targetLine=new ol(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),T_.setFromMatrixPosition(this.light.matrixWorld),im.setFromMatrixPosition(this.light.target.matrixWorld),E_.subVectors(im,T_),this.lightPlane.lookAt(im),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(im),this.targetLine.scale.z=E_.length()}}const rm=new Y,Jn=new vf;class $2 extends xs{constructor(e){const t=new Jt,n=new xr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],u={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(S,A){f(S),f(A)}function f(S){i.push(0,0,0),s.push(0,0,0),u[S]===void 0&&(u[S]=[]),u[S].push(i.length/3-1)}t.setAttribute("position",new At(i,3)),t.setAttribute("color",new At(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const p=new xt(16755200),m=new xt(16711680),v=new xt(43775),x=new xt(16777215),_=new xt(3355443);this.setColors(p,m,v,x,_)}setColors(e,t,n,i,s){const c=this.geometry.getAttribute("color");return c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,i.r,i.g,i.b),c.setXYZ(39,i.r,i.g,i.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;let s,u;if(Jn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,u=0;else if(this.camera.coordinateSystem===$r)s=-1,u=1;else if(this.camera.coordinateSystem===vc)s=0,u=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ni("c",t,e,Jn,0,0,s),ni("t",t,e,Jn,0,0,u),ni("n1",t,e,Jn,-n,-i,s),ni("n2",t,e,Jn,n,-i,s),ni("n3",t,e,Jn,-n,i,s),ni("n4",t,e,Jn,n,i,s),ni("f1",t,e,Jn,-n,-i,u),ni("f2",t,e,Jn,n,-i,u),ni("f3",t,e,Jn,-n,i,u),ni("f4",t,e,Jn,n,i,u),ni("u1",t,e,Jn,n*.7,i*1.1,s),ni("u2",t,e,Jn,-n*.7,i*1.1,s),ni("u3",t,e,Jn,0,i*2,s),ni("cf1",t,e,Jn,-n,0,u),ni("cf2",t,e,Jn,n,0,u),ni("cf3",t,e,Jn,0,-i,u),ni("cf4",t,e,Jn,0,i,u),ni("cn1",t,e,Jn,-n,0,s),ni("cn2",t,e,Jn,n,0,s),ni("cn3",t,e,Jn,0,-i,s),ni("cn4",t,e,Jn,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ni(a,e,t,n,i,s,u){rm.set(i,s,u).unproject(n);const c=e[a];if(c!==void 0){const f=t.getAttribute("position");for(let p=0,m=c.length;p<m;p++)f.setXYZ(c[p],rm.x,rm.y,rm.z)}}const am=new tr;class eT extends xs{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new Jt;s.setIndex(new Cn(n,1)),s.setAttribute("position",new Cn(i,3)),super(s,new xr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&am.setFromObject(this.object),am.isEmpty())return;const e=am.min,t=am.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tT extends xs{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Jt;s.setIndex(new Cn(n,1)),s.setAttribute("position",new At(i,3)),super(s,new xr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class nT extends ol{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new Jt;u.setAttribute("position",new At(s,3)),u.computeBoundingSphere(),super(u,new xr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new Jt;f.setAttribute("position",new At(c,3)),f.computeBoundingSphere(),this.add(new _i(f,new hl({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const A_=new Y;let sm,oy;class iT extends yn{constructor(e=new Y(0,0,1),t=new Y(0,0,0),n=1,i=16776960,s=n*.2,u=s*.2){super(),this.type="ArrowHelper",sm===void 0&&(sm=new Jt,sm.setAttribute("position",new At([0,0,0,0,1,0],3)),oy=new _f(.5,1,5,1),oy.translate(0,-.5,0)),this.position.copy(t),this.line=new ol(sm,new xr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _i(oy,new hl({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,u)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{A_.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(A_,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class rT extends xs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Jt;i.setAttribute("position",new At(t,3)),i.setAttribute("color",new At(n,3));const s=new xr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new xt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aT{constructor(){this.type="ShapePath",this.color=new xt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new rg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,u){return this.currentPath.bezierCurveTo(e,t,n,i,s,u),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const C=[];for(let R=0,P=w.length;R<P;R++){const F=w[R],N=new Mu;N.curves=F.curves,C.push(N)}return C}function n(w,C){const R=C.length;let P=!1;for(let F=R-1,N=0;N<R;F=N++){let z=C[F],G=C[N],D=G.x-z.x,L=G.y-z.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(z=C[N],D=-D,G=C[F],L=-L),w.y<z.y||w.y>G.y)continue;if(w.y===z.y){if(w.x===z.x)return!0}else{const H=L*(w.x-z.x)-D*(w.y-z.y);if(H===0)return!0;if(H<0)continue;P=!P}}else{if(w.y!==z.y)continue;if(G.x<=w.x&&w.x<=z.x||z.x<=w.x&&w.x<=G.x)return!0}}return P}const i=Ya.isClockWise,s=this.subPaths;if(s.length===0)return[];let u,c,f;const p=[];if(s.length===1)return c=s[0],f=new Mu,f.curves=c.curves,p.push(f),p;let m=!i(s[0].getPoints());m=e?!m:m;const v=[],x=[];let _=[],S=0,A;x[S]=void 0,_[S]=[];for(let w=0,C=s.length;w<C;w++)c=s[w],A=c.getPoints(),u=i(A),u=e?!u:u,u?(!m&&x[S]&&S++,x[S]={s:new Mu,p:A},x[S].s.curves=c.curves,m&&S++,_[S]=[]):_[S].push({h:c,p:A[0]});if(!x[0])return t(s);if(x.length>1){let w=!1,C=0;for(let R=0,P=x.length;R<P;R++)v[R]=[];for(let R=0,P=x.length;R<P;R++){const F=_[R];for(let N=0;N<F.length;N++){const z=F[N];let G=!0;for(let D=0;D<x.length;D++)n(z.p,x[D].p)&&(R!==D&&C++,G?(G=!1,v[D].push(z)):w=!0);G&&v[R].push(z)}}C>0&&w===!1&&(_=v)}let T;for(let w=0,C=x.length;w<C;w++){f=x[w].s,p.push(f),T=_[w];for(let R=0,P=T.length;R<P;R++)f.holes.push(T[R].h)}return p}}class sT extends ys{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ft("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function oT(a,e){const t=a.image&&a.image.width?a.image.width/a.image.height:1;return t>e?(a.repeat.x=1,a.repeat.y=t/e,a.offset.x=0,a.offset.y=(1-a.repeat.y)/2):(a.repeat.x=e/t,a.repeat.y=1,a.offset.x=(1-a.repeat.x)/2,a.offset.y=0),a}function lT(a,e){const t=a.image&&a.image.width?a.image.width/a.image.height:1;return t>e?(a.repeat.x=e/t,a.repeat.y=1,a.offset.x=(1-a.repeat.x)/2,a.offset.y=0):(a.repeat.x=1,a.repeat.y=t/e,a.offset.x=0,a.offset.y=(1-a.repeat.y)/2),a}function uT(a){return a.repeat.x=1,a.repeat.y=1,a.offset.x=0,a.offset.y=0,a}function Hy(a,e,t,n){const i=hT(n);switch(t){case e0:return a*e;case pg:return a*e/i.components*i.byteLength;case gf:return a*e/i.components*i.byteLength;case mg:return a*e*2/i.components*i.byteLength;case gg:return a*e*2/i.components*i.byteLength;case t0:return a*e*3/i.components*i.byteLength;case $i:return a*e*4/i.components*i.byteLength;case vg:return a*e*4/i.components*i.byteLength;case Gd:case Wd:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*8;case Xd:case Yd:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case Am:case Cm:return Math.max(a,16)*Math.max(e,8)/4;case Em:case km:return Math.max(a,8)*Math.max(e,8)/2;case Rm:case Im:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*8;case Pm:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case Lm:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case Nm:return Math.floor((a+4)/5)*Math.floor((e+3)/4)*16;case Dm:return Math.floor((a+4)/5)*Math.floor((e+4)/5)*16;case Om:return Math.floor((a+5)/6)*Math.floor((e+4)/5)*16;case Um:return Math.floor((a+5)/6)*Math.floor((e+5)/6)*16;case Fm:return Math.floor((a+7)/8)*Math.floor((e+4)/5)*16;case Bm:return Math.floor((a+7)/8)*Math.floor((e+5)/6)*16;case zm:return Math.floor((a+7)/8)*Math.floor((e+7)/8)*16;case Vm:return Math.floor((a+9)/10)*Math.floor((e+4)/5)*16;case Hm:return Math.floor((a+9)/10)*Math.floor((e+5)/6)*16;case jm:return Math.floor((a+9)/10)*Math.floor((e+7)/8)*16;case Gm:return Math.floor((a+9)/10)*Math.floor((e+9)/10)*16;case Wm:return Math.floor((a+11)/12)*Math.floor((e+9)/10)*16;case Xm:return Math.floor((a+11)/12)*Math.floor((e+11)/12)*16;case Ym:case qm:case Km:return Math.ceil(a/4)*Math.ceil(e/4)*16;case Zm:case Jm:return Math.ceil(a/4)*Math.ceil(e/4)*8;case Qm:case $m:return Math.ceil(a/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function hT(a){switch(a){case ga:case Zy:return{byteLength:1,components:1};case fc:case Jy:case ll:return{byteLength:2,components:1};case dg:case fg:return{byteLength:2,components:4};case co:case cg:case vr:return{byteLength:4,components:1};case Qy:case $y:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${a}.`)}class cT{static contain(e,t){return oT(e,t)}static cover(e,t){return lT(e,t)}static fill(e){return uT(e)}static getByteLength(e,t,n,i){return Hy(e,t,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lg}}));typeof window<"u"&&(window.__THREE__?ft("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lg);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function vw(){let a=null,e=!1,t=null,n=null;function i(s,u){t(s,u),n=a.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=a.requestAnimationFrame(i),e=!0)},stop:function(){a.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){a=s}}}function dT(a){const e=new WeakMap;function t(c,f){const p=c.array,m=c.usage,v=p.byteLength,x=a.createBuffer();a.bindBuffer(f,x),a.bufferData(f,p,m),c.onUploadCallback();let _;if(p instanceof Float32Array)_=a.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)_=a.HALF_FLOAT;else if(p instanceof Uint16Array)c.isFloat16BufferAttribute?_=a.HALF_FLOAT:_=a.UNSIGNED_SHORT;else if(p instanceof Int16Array)_=a.SHORT;else if(p instanceof Uint32Array)_=a.UNSIGNED_INT;else if(p instanceof Int32Array)_=a.INT;else if(p instanceof Int8Array)_=a.BYTE;else if(p instanceof Uint8Array)_=a.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)_=a.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:x,type:_,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:v}}function n(c,f,p){const m=f.array,v=f.updateRanges;if(a.bindBuffer(p,c),v.length===0)a.bufferSubData(p,0,m);else{v.sort((_,S)=>_.start-S.start);let x=0;for(let _=1;_<v.length;_++){const S=v[x],A=v[_];A.start<=S.start+S.count+1?S.count=Math.max(S.count,A.start+A.count-S.start):(++x,v[x]=A)}v.length=x+1;for(let _=0,S=v.length;_<S;_++){const A=v[_];a.bufferSubData(p,A.start*m.BYTES_PER_ELEMENT,m,A.start,A.count)}f.clearUpdateRanges()}f.onUploadCallback()}function i(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=e.get(c);f&&(a.deleteBuffer(f.buffer),e.delete(c))}function u(c,f){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const m=e.get(c);(!m||m.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const p=e.get(c);if(p===void 0)e.set(c,t(c,f));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,c,f),p.version=c.version}}return{get:i,remove:s,update:u}}var fT=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,pT=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,mT=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,gT=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vT=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yT=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xT=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_T=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,bT=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,wT=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ST=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,MT=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,TT=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ET=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,AT=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,kT=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,CT=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,RT=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,IT=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,PT=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,LT=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,NT=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,DT=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,OT=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,UT=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,FT=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,BT=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zT=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,VT=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HT=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,jT="gl_FragColor = linearToOutputTexel( gl_FragColor );",GT=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,WT=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XT=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,YT=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,qT=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,KT=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ZT=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,JT=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,QT=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,$T=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,eE=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,tE=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nE=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,iE=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,rE=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,aE=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,sE=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oE=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lE=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,uE=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,hE=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,cE=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dE=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fE=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,pE=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,mE=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gE=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vE=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yE=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,xE=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_E=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,bE=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,wE=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,SE=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ME=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,TE=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,EE=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,AE=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kE=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,CE=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,RE=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,IE=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,PE=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,LE=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,NE=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,DE=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,OE=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,UE=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,FE=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,BE=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,zE=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,VE=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,HE=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,jE=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,GE=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,WE=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,XE=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,YE=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,qE=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,KE=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,ZE=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,JE=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,QE=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,$E=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,eA=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tA=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nA=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,iA=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,rA=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,aA=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,sA=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,oA=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,lA=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uA=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hA=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,cA=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const dA=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fA=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pA=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mA=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gA=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vA=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yA=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xA=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,_A=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,bA=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,wA=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,SA=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MA=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,TA=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EA=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,AA=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kA=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CA=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RA=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,IA=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PA=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,LA=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,NA=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DA=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OA=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,UA=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FA=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BA=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zA=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,VA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HA=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jA=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,GA=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,WA=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nn={alphahash_fragment:fT,alphahash_pars_fragment:pT,alphamap_fragment:mT,alphamap_pars_fragment:gT,alphatest_fragment:vT,alphatest_pars_fragment:yT,aomap_fragment:xT,aomap_pars_fragment:_T,batching_pars_vertex:bT,batching_vertex:wT,begin_vertex:ST,beginnormal_vertex:MT,bsdfs:TT,iridescence_fragment:ET,bumpmap_pars_fragment:AT,clipping_planes_fragment:kT,clipping_planes_pars_fragment:CT,clipping_planes_pars_vertex:RT,clipping_planes_vertex:IT,color_fragment:PT,color_pars_fragment:LT,color_pars_vertex:NT,color_vertex:DT,common:OT,cube_uv_reflection_fragment:UT,defaultnormal_vertex:FT,displacementmap_pars_vertex:BT,displacementmap_vertex:zT,emissivemap_fragment:VT,emissivemap_pars_fragment:HT,colorspace_fragment:jT,colorspace_pars_fragment:GT,envmap_fragment:WT,envmap_common_pars_fragment:XT,envmap_pars_fragment:YT,envmap_pars_vertex:qT,envmap_physical_pars_fragment:aE,envmap_vertex:KT,fog_vertex:ZT,fog_pars_vertex:JT,fog_fragment:QT,fog_pars_fragment:$T,gradientmap_pars_fragment:eE,lightmap_pars_fragment:tE,lights_lambert_fragment:nE,lights_lambert_pars_fragment:iE,lights_pars_begin:rE,lights_toon_fragment:sE,lights_toon_pars_fragment:oE,lights_phong_fragment:lE,lights_phong_pars_fragment:uE,lights_physical_fragment:hE,lights_physical_pars_fragment:cE,lights_fragment_begin:dE,lights_fragment_maps:fE,lights_fragment_end:pE,logdepthbuf_fragment:mE,logdepthbuf_pars_fragment:gE,logdepthbuf_pars_vertex:vE,logdepthbuf_vertex:yE,map_fragment:xE,map_pars_fragment:_E,map_particle_fragment:bE,map_particle_pars_fragment:wE,metalnessmap_fragment:SE,metalnessmap_pars_fragment:ME,morphinstance_vertex:TE,morphcolor_vertex:EE,morphnormal_vertex:AE,morphtarget_pars_vertex:kE,morphtarget_vertex:CE,normal_fragment_begin:RE,normal_fragment_maps:IE,normal_pars_fragment:PE,normal_pars_vertex:LE,normal_vertex:NE,normalmap_pars_fragment:DE,clearcoat_normal_fragment_begin:OE,clearcoat_normal_fragment_maps:UE,clearcoat_pars_fragment:FE,iridescence_pars_fragment:BE,opaque_fragment:zE,packing:VE,premultiplied_alpha_fragment:HE,project_vertex:jE,dithering_fragment:GE,dithering_pars_fragment:WE,roughnessmap_fragment:XE,roughnessmap_pars_fragment:YE,shadowmap_pars_fragment:qE,shadowmap_pars_vertex:KE,shadowmap_vertex:ZE,shadowmask_pars_fragment:JE,skinbase_vertex:QE,skinning_pars_vertex:$E,skinning_vertex:eA,skinnormal_vertex:tA,specularmap_fragment:nA,specularmap_pars_fragment:iA,tonemapping_fragment:rA,tonemapping_pars_fragment:aA,transmission_fragment:sA,transmission_pars_fragment:oA,uv_pars_fragment:lA,uv_pars_vertex:uA,uv_vertex:hA,worldpos_vertex:cA,background_vert:dA,background_frag:fA,backgroundCube_vert:pA,backgroundCube_frag:mA,cube_vert:gA,cube_frag:vA,depth_vert:yA,depth_frag:xA,distanceRGBA_vert:_A,distanceRGBA_frag:bA,equirect_vert:wA,equirect_frag:SA,linedashed_vert:MA,linedashed_frag:TA,meshbasic_vert:EA,meshbasic_frag:AA,meshlambert_vert:kA,meshlambert_frag:CA,meshmatcap_vert:RA,meshmatcap_frag:IA,meshnormal_vert:PA,meshnormal_frag:LA,meshphong_vert:NA,meshphong_frag:DA,meshphysical_vert:OA,meshphysical_frag:UA,meshtoon_vert:FA,meshtoon_frag:BA,points_vert:zA,points_frag:VA,shadow_vert:HA,shadow_frag:jA,sprite_vert:GA,sprite_frag:WA},dt={common:{diffuse:{value:new xt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Zt}},envmap:{envMap:{value:null},envMapRotation:{value:new Zt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Zt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Zt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Zt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Zt},normalScale:{value:new Ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Zt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Zt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Zt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Zt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0},uvTransform:{value:new Zt}},sprite:{diffuse:{value:new xt(16777215)},opacity:{value:1},center:{value:new Ae(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}}},Xa={basic:{uniforms:mr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:mr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new xt(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:mr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new xt(0)},specular:{value:new xt(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:mr([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:mr([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new xt(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:mr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:mr([dt.points,dt.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:mr([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:mr([dt.common,dt.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:mr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:mr([dt.sprite,dt.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new Zt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Zt}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:mr([dt.common,dt.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:mr([dt.lights,dt.fog,{color:{value:new xt(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};Xa.physical={uniforms:mr([Xa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Zt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Zt},clearcoatNormalScale:{value:new Ae(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Zt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Zt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Zt},sheen:{value:0},sheenColor:{value:new xt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Zt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Zt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Zt},transmissionSamplerSize:{value:new Ae},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Zt},attenuationDistance:{value:0},attenuationColor:{value:new xt(0)},specularColor:{value:new xt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Zt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Zt},anisotropyVector:{value:new Ae},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Zt}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const om={r:0,b:0,g:0},du=new ta,XA=new Ht;function YA(a,e,t,n,i,s,u){const c=new xt(0);let f=s===!0?0:1,p,m,v=null,x=0,_=null;function S(R){let P=R.isScene===!0?R.background:null;return P&&P.isTexture&&(P=(R.backgroundBlurriness>0?t:e).get(P)),P}function A(R){let P=!1;const F=S(R);F===null?w(c,f):F&&F.isColor&&(w(F,1),P=!0);const N=a.xr.getEnvironmentBlendMode();N==="additive"?n.buffers.color.setClear(0,0,0,1,u):N==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,u),(a.autoClear||P)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil))}function T(R,P){const F=S(P);F&&(F.isCubeTexture||F.mapping===Mc)?(m===void 0&&(m=new _i(new Ru(1,1,1),new va({name:"BackgroundCubeMaterial",uniforms:_c(Xa.backgroundCube.uniforms),vertexShader:Xa.backgroundCube.vertexShader,fragmentShader:Xa.backgroundCube.fragmentShader,side:yr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(N,z,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(m)),du.copy(P.backgroundRotation),du.x*=-1,du.y*=-1,du.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(du.y*=-1,du.z*=-1),m.material.uniforms.envMap.value=F,m.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=P.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(XA.makeRotationFromEuler(du)),m.material.toneMapped=pn.getTransfer(F.colorSpace)!==Tn,(v!==F||x!==F.version||_!==a.toneMapping)&&(m.material.needsUpdate=!0,v=F,x=F.version,_=a.toneMapping),m.layers.enableAll(),R.unshift(m,m.geometry,m.material,0,0,null)):F&&F.isTexture&&(p===void 0&&(p=new _i(new Ec(2,2),new va({name:"BackgroundMaterial",uniforms:_c(Xa.background.uniforms),vertexShader:Xa.background.vertexShader,fragmentShader:Xa.background.fragmentShader,side:uo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(p)),p.material.uniforms.t2D.value=F,p.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,p.material.toneMapped=pn.getTransfer(F.colorSpace)!==Tn,F.matrixAutoUpdate===!0&&F.updateMatrix(),p.material.uniforms.uvTransform.value.copy(F.matrix),(v!==F||x!==F.version||_!==a.toneMapping)&&(p.material.needsUpdate=!0,v=F,x=F.version,_=a.toneMapping),p.layers.enableAll(),R.unshift(p,p.geometry,p.material,0,0,null))}function w(R,P){R.getRGB(om,g1(a)),n.buffers.color.setClear(om.r,om.g,om.b,P,u)}function C(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return c},setClearColor:function(R,P=1){c.set(R),f=P,w(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(R){f=R,w(c,f)},render:A,addToRenderList:T,dispose:C}}function qA(a,e){const t=a.getParameter(a.MAX_VERTEX_ATTRIBS),n={},i=x(null);let s=i,u=!1;function c(L,H,ee,ne,me){let fe=!1;const ye=v(ne,ee,H);s!==ye&&(s=ye,p(s.object)),fe=_(L,ne,ee,me),fe&&S(L,ne,ee,me),me!==null&&e.update(me,a.ELEMENT_ARRAY_BUFFER),(fe||u)&&(u=!1,P(L,H,ee,ne),me!==null&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.get(me).buffer))}function f(){return a.createVertexArray()}function p(L){return a.bindVertexArray(L)}function m(L){return a.deleteVertexArray(L)}function v(L,H,ee){const ne=ee.wireframe===!0;let me=n[L.id];me===void 0&&(me={},n[L.id]=me);let fe=me[H.id];fe===void 0&&(fe={},me[H.id]=fe);let ye=fe[ne];return ye===void 0&&(ye=x(f()),fe[ne]=ye),ye}function x(L){const H=[],ee=[],ne=[];for(let me=0;me<t;me++)H[me]=0,ee[me]=0,ne[me]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:ee,attributeDivisors:ne,object:L,attributes:{},index:null}}function _(L,H,ee,ne){const me=s.attributes,fe=H.attributes;let ye=0;const we=ee.getAttributes();for(const B in we)if(we[B].location>=0){const K=me[B];let j=fe[B];if(j===void 0&&(B==="instanceMatrix"&&L.instanceMatrix&&(j=L.instanceMatrix),B==="instanceColor"&&L.instanceColor&&(j=L.instanceColor)),K===void 0||K.attribute!==j||j&&K.data!==j.data)return!0;ye++}return s.attributesNum!==ye||s.index!==ne}function S(L,H,ee,ne){const me={},fe=H.attributes;let ye=0;const we=ee.getAttributes();for(const B in we)if(we[B].location>=0){let K=fe[B];K===void 0&&(B==="instanceMatrix"&&L.instanceMatrix&&(K=L.instanceMatrix),B==="instanceColor"&&L.instanceColor&&(K=L.instanceColor));const j={};j.attribute=K,K&&K.data&&(j.data=K.data),me[B]=j,ye++}s.attributes=me,s.attributesNum=ye,s.index=ne}function A(){const L=s.newAttributes;for(let H=0,ee=L.length;H<ee;H++)L[H]=0}function T(L){w(L,0)}function w(L,H){const ee=s.newAttributes,ne=s.enabledAttributes,me=s.attributeDivisors;ee[L]=1,ne[L]===0&&(a.enableVertexAttribArray(L),ne[L]=1),me[L]!==H&&(a.vertexAttribDivisor(L,H),me[L]=H)}function C(){const L=s.newAttributes,H=s.enabledAttributes;for(let ee=0,ne=H.length;ee<ne;ee++)H[ee]!==L[ee]&&(a.disableVertexAttribArray(ee),H[ee]=0)}function R(L,H,ee,ne,me,fe,ye){ye===!0?a.vertexAttribIPointer(L,H,ee,me,fe):a.vertexAttribPointer(L,H,ee,ne,me,fe)}function P(L,H,ee,ne){A();const me=ne.attributes,fe=ee.getAttributes(),ye=H.defaultAttributeValues;for(const we in fe){const B=fe[we];if(B.location>=0){let Q=me[we];if(Q===void 0&&(we==="instanceMatrix"&&L.instanceMatrix&&(Q=L.instanceMatrix),we==="instanceColor"&&L.instanceColor&&(Q=L.instanceColor)),Q!==void 0){const K=Q.normalized,j=Q.itemSize,ie=e.get(Q);if(ie===void 0)continue;const Ce=ie.buffer,Ye=ie.type,at=ie.bytesPerElement,he=Ye===a.INT||Ye===a.UNSIGNED_INT||Q.gpuType===cg;if(Q.isInterleavedBufferAttribute){const be=Q.data,Fe=be.stride,it=Q.offset;if(be.isInstancedInterleavedBuffer){for(let st=0;st<B.locationSize;st++)w(B.location+st,be.meshPerAttribute);L.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let st=0;st<B.locationSize;st++)T(B.location+st);a.bindBuffer(a.ARRAY_BUFFER,Ce);for(let st=0;st<B.locationSize;st++)R(B.location+st,j/B.locationSize,Ye,K,Fe*at,(it+j/B.locationSize*st)*at,he)}else{if(Q.isInstancedBufferAttribute){for(let be=0;be<B.locationSize;be++)w(B.location+be,Q.meshPerAttribute);L.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let be=0;be<B.locationSize;be++)T(B.location+be);a.bindBuffer(a.ARRAY_BUFFER,Ce);for(let be=0;be<B.locationSize;be++)R(B.location+be,j/B.locationSize,Ye,K,j*at,j/B.locationSize*be*at,he)}}else if(ye!==void 0){const K=ye[we];if(K!==void 0)switch(K.length){case 2:a.vertexAttrib2fv(B.location,K);break;case 3:a.vertexAttrib3fv(B.location,K);break;case 4:a.vertexAttrib4fv(B.location,K);break;default:a.vertexAttrib1fv(B.location,K)}}}}C()}function F(){G();for(const L in n){const H=n[L];for(const ee in H){const ne=H[ee];for(const me in ne)m(ne[me].object),delete ne[me];delete H[ee]}delete n[L]}}function N(L){if(n[L.id]===void 0)return;const H=n[L.id];for(const ee in H){const ne=H[ee];for(const me in ne)m(ne[me].object),delete ne[me];delete H[ee]}delete n[L.id]}function z(L){for(const H in n){const ee=n[H];if(ee[L.id]===void 0)continue;const ne=ee[L.id];for(const me in ne)m(ne[me].object),delete ne[me];delete ee[L.id]}}function G(){D(),u=!0,s!==i&&(s=i,p(s.object))}function D(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:c,reset:G,resetDefaultState:D,dispose:F,releaseStatesOfGeometry:N,releaseStatesOfProgram:z,initAttributes:A,enableAttribute:T,disableUnusedAttributes:C}}function KA(a,e,t){let n;function i(p){n=p}function s(p,m){a.drawArrays(n,p,m),t.update(m,n,1)}function u(p,m,v){v!==0&&(a.drawArraysInstanced(n,p,m,v),t.update(m,n,v))}function c(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,m,0,v);let _=0;for(let S=0;S<v;S++)_+=m[S];t.update(_,n,1)}function f(p,m,v,x){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let S=0;S<p.length;S++)u(p[S],m[S],x[S]);else{_.multiDrawArraysInstancedWEBGL(n,p,0,m,0,x,0,v);let S=0;for(let A=0;A<v;A++)S+=m[A]*x[A];t.update(S,n,1)}}this.setMode=i,this.render=s,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function ZA(a,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");i=a.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function u(z){return!(z!==$i&&n.convert(z)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(z){const G=z===ll&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==ga&&n.convert(z)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==vr&&!G)}function f(z){if(z==="highp"){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const m=f(p);m!==p&&(ft("WebGLRenderer:",p,"not supported, using",m,"instead."),p=m);const v=t.logarithmicDepthBuffer===!0,x=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),S=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=a.getParameter(a.MAX_TEXTURE_SIZE),T=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),w=a.getParameter(a.MAX_VERTEX_ATTRIBS),C=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),R=a.getParameter(a.MAX_VARYING_VECTORS),P=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),F=S>0,N=a.getParameter(a.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:f,textureFormatReadable:u,textureTypeReadable:c,precision:p,logarithmicDepthBuffer:v,reversedDepthBuffer:x,maxTextures:_,maxVertexTextures:S,maxTextureSize:A,maxCubemapSize:T,maxAttributes:w,maxVertexUniforms:C,maxVaryings:R,maxFragmentUniforms:P,vertexTextures:F,maxSamples:N}}function JA(a){const e=this;let t=null,n=0,i=!1,s=!1;const u=new ao,c=new Zt,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(v,x){const _=v.length!==0||x||n!==0||i;return i=x,n=v.length,_},this.beginShadows=function(){s=!0,m(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(v,x){t=m(v,x,0)},this.setState=function(v,x,_){const S=v.clippingPlanes,A=v.clipIntersection,T=v.clipShadows,w=a.get(v);if(!i||S===null||S.length===0||s&&!T)s?m(null):p();else{const C=s?0:n,R=C*4;let P=w.clippingState||null;f.value=P,P=m(S,x,R,_);for(let F=0;F!==R;++F)P[F]=t[F];w.clippingState=P,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=C}};function p(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function m(v,x,_,S){const A=v!==null?v.length:0;let T=null;if(A!==0){if(T=f.value,S!==!0||T===null){const w=_+A*4,C=x.matrixWorldInverse;c.getNormalMatrix(C),(T===null||T.length<w)&&(T=new Float32Array(w));for(let R=0,P=_;R!==A;++R,P+=4)u.copy(v[R]).applyMatrix4(C,c),u.normal.toArray(T,P),T[P+3]=u.constant}f.value=T,f.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,T}}function QA(a){let e=new WeakMap;function t(u,c){return c===Jd?u.mapping=ho:c===Qd&&(u.mapping=al),u}function n(u){if(u&&u.isTexture){const c=u.mapping;if(c===Jd||c===Qd)if(e.has(u)){const f=e.get(u).texture;return t(f,u.mapping)}else{const f=u.image;if(f&&f.height>0){const p=new x1(f.height);return p.fromEquirectangularTexture(a,u),e.set(u,p),u.addEventListener("dispose",i),t(p.texture,u.mapping)}else return null}}return u}function i(u){const c=u.target;c.removeEventListener("dispose",i);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const il=4,k_=[.125,.215,.35,.446,.526,.582],vu=20,$A=512,Od=new rl,C_=new xt;let ly=null,uy=0,hy=0,cy=!1;const ek=new Y;class jy{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,i=100,s={}){const{size:u=256,position:c=ek}=s;ly=this._renderer.getRenderTarget(),uy=this._renderer.getActiveCubeFace(),hy=this._renderer.getActiveMipmapLevel(),cy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,n,i,f,c),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=P_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=I_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(ly,uy,hy),this._renderer.xr.enabled=cy,e.scissorTest=!1,ic(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ho||e.mapping===al?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ly=this._renderer.getRenderTarget(),uy=this._renderer.getActiveCubeFace(),hy=this._renderer.getActiveMipmapLevel(),cy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:ll,format:$i,colorSpace:Eu,depthBuffer:!1},i=R_(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=R_(e,t,n);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=tk(s)),this._blurMaterial=ik(s,e,t)}return i}_compileMaterial(e){const t=new _i(new Jt,e);this._renderer.compile(t,Od)}_sceneToCubeUV(e,t,n,i,s){const f=new ii(90,1,t,n),p=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],v=this._renderer,x=v.autoClear,_=v.toneMapping;v.getClearColor(C_),v.toneMapping=vs,v.autoClear=!1,v.state.buffers.depth.getReversed()&&(v.setRenderTarget(i),v.clearDepth(),v.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new _i(new Ru,new hl({name:"PMREM.Background",side:yr,depthWrite:!1,depthTest:!1})));const A=this._backgroundBox,T=A.material;let w=!1;const C=e.background;C?C.isColor&&(T.color.copy(C),e.background=null,w=!0):(T.color.copy(C_),w=!0);for(let R=0;R<6;R++){const P=R%3;P===0?(f.up.set(0,p[R],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x+m[R],s.y,s.z)):P===1?(f.up.set(0,0,p[R]),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y+m[R],s.z)):(f.up.set(0,p[R],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y,s.z+m[R]));const F=this._cubeSize;ic(i,P*F,R>2?F:0,F,F),v.setRenderTarget(i),w&&v.render(A,f),v.render(e,f)}v.toneMapping=_,v.autoClear=x,e.background=C}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===ho||e.mapping===al;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=P_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=I_());const s=i?this._cubemapMaterial:this._equirectMaterial,u=this._lodMeshes[0];u.material=s;const c=s.uniforms;c.envMap.value=e;const f=this._cubeSize;ic(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(u,Od)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let s=1;s<i;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=n}_applyGGXFilter(e,t,n){const i=this._renderer,s=this._pingPongRenderTarget;if(this._ggxMaterial===null){const C=3*Math.max(this._cubeSize,16),R=4*this._cubeSize;this._ggxMaterial=nk(this._lodMax,C,R)}const u=this._ggxMaterial,c=this._lodMeshes[n];c.material=u;const f=u.uniforms,p=n/(this._lodMeshes.length-1),m=t/(this._lodMeshes.length-1),v=Math.sqrt(p*p-m*m),x=.05+p*.95,_=v*x,{_lodMax:S}=this,A=this._sizeLods[n],T=3*A*(n>S-il?n-S+il:0),w=4*(this._cubeSize-A);f.envMap.value=e.texture,f.roughness.value=_,f.mipInt.value=S-t,ic(s,T,w,3*A,2*A),i.setRenderTarget(s),i.render(c,Od),f.envMap.value=s.texture,f.roughness.value=0,f.mipInt.value=S-n,ic(e,T,w,3*A,2*A),i.setRenderTarget(e),i.render(c,Od)}_blur(e,t,n,i,s){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,n,i,"latitudinal",s),this._halfBlur(u,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,u,c){const f=this._renderer,p=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&Wt("blur direction must be either latitudinal or longitudinal!");const m=3,v=this._lodMeshes[i];v.material=p;const x=p.uniforms,_=this._sizeLods[n]-1,S=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*vu-1),A=s/S,T=isFinite(s)?1+Math.floor(m*A):vu;T>vu&&ft(`sigmaRadians, ${s}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${vu}`);const w=[];let C=0;for(let z=0;z<vu;++z){const G=z/A,D=Math.exp(-G*G/2);w.push(D),z===0?C+=D:z<T&&(C+=2*D)}for(let z=0;z<w.length;z++)w[z]=w[z]/C;x.envMap.value=e.texture,x.samples.value=T,x.weights.value=w,x.latitudinal.value=u==="latitudinal",c&&(x.poleAxis.value=c);const{_lodMax:R}=this;x.dTheta.value=S,x.mipInt.value=R-n;const P=this._sizeLods[i],F=3*P*(i>R-il?i-R+il:0),N=4*(this._cubeSize-P);ic(t,F,N,3*P,2*P),f.setRenderTarget(t),f.render(v,Od)}}function tk(a){const e=[],t=[],n=[];let i=a;const s=a-il+1+k_.length;for(let u=0;u<s;u++){const c=Math.pow(2,i);e.push(c);let f=1/c;u>a-il?f=k_[u-a+il-1]:u===0&&(f=0),t.push(f);const p=1/(c-2),m=-p,v=1+p,x=[m,m,v,m,v,v,m,m,v,v,m,v],_=6,S=6,A=3,T=2,w=1,C=new Float32Array(A*S*_),R=new Float32Array(T*S*_),P=new Float32Array(w*S*_);for(let N=0;N<_;N++){const z=N%3*2/3-1,G=N>2?0:-1,D=[z,G,0,z+2/3,G,0,z+2/3,G+1,0,z,G,0,z+2/3,G+1,0,z,G+1,0];C.set(D,A*S*N),R.set(x,T*S*N);const L=[N,N,N,N,N,N];P.set(L,w*S*N)}const F=new Jt;F.setAttribute("position",new Cn(C,A)),F.setAttribute("uv",new Cn(R,T)),F.setAttribute("faceIndex",new Cn(P,w)),n.push(new _i(F,null)),i>il&&i--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function R_(a,e,t){const n=new Ka(a,e,t);return n.texture.mapping=Mc,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ic(a,e,t,n,i){a.viewport.set(e,t,n,i),a.scissor.set(e,t,n,i)}function nk(a,e,t){return new va({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:$A,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:gs,depthTest:!1,depthWrite:!1})}function ik(a,e,t){const n=new Float32Array(vu),i=new Y(0,1,0);return new va({name:"SphericalGaussianBlur",defines:{n:vu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gs,depthTest:!1,depthWrite:!1})}function I_(){return new va({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gs,depthTest:!1,depthWrite:!1})}function P_(){return new va({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gs,depthTest:!1,depthWrite:!1})}function Hg(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function rk(a){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const f=c.mapping,p=f===Jd||f===Qd,m=f===ho||f===al;if(p||m){let v=e.get(c);const x=v!==void 0?v.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==x)return t===null&&(t=new jy(a)),v=p?t.fromEquirectangular(c,v):t.fromCubemap(c,v),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),v.texture;if(v!==void 0)return v.texture;{const _=c.image;return p&&_&&_.height>0||m&&_&&i(_)?(t===null&&(t=new jy(a)),v=p?t.fromEquirectangular(c):t.fromCubemap(c),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),c.addEventListener("dispose",s),v.texture):null}}}return c}function i(c){let f=0;const p=6;for(let m=0;m<p;m++)c[m]!==void 0&&f++;return f===p}function s(c){const f=c.target;f.removeEventListener("dispose",s);const p=e.get(f);p!==void 0&&(e.delete(f),p.dispose())}function u(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:u}}function ak(a){const e={};function t(n){if(e[n]!==void 0)return e[n];const i=a.getExtension(n);return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&yc("WebGLRenderer: "+n+" extension not supported."),i}}}function sk(a,e,t,n){const i={},s=new WeakMap;function u(v){const x=v.target;x.index!==null&&e.remove(x.index);for(const S in x.attributes)e.remove(x.attributes[S]);x.removeEventListener("dispose",u),delete i[x.id];const _=s.get(x);_&&(e.remove(_),s.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function c(v,x){return i[x.id]===!0||(x.addEventListener("dispose",u),i[x.id]=!0,t.memory.geometries++),x}function f(v){const x=v.attributes;for(const _ in x)e.update(x[_],a.ARRAY_BUFFER)}function p(v){const x=[],_=v.index,S=v.attributes.position;let A=0;if(_!==null){const C=_.array;A=_.version;for(let R=0,P=C.length;R<P;R+=3){const F=C[R+0],N=C[R+1],z=C[R+2];x.push(F,N,N,z,z,F)}}else if(S!==void 0){const C=S.array;A=S.version;for(let R=0,P=C.length/3-1;R<P;R+=3){const F=R+0,N=R+1,z=R+2;x.push(F,N,N,z,z,F)}}else return;const T=new(c1(x)?o0:s0)(x,1);T.version=A;const w=s.get(v);w&&e.remove(w),s.set(v,T)}function m(v){const x=s.get(v);if(x){const _=v.index;_!==null&&x.version<_.version&&p(v)}else p(v);return s.get(v)}return{get:c,update:f,getWireframeAttribute:m}}function ok(a,e,t){let n;function i(x){n=x}let s,u;function c(x){s=x.type,u=x.bytesPerElement}function f(x,_){a.drawElements(n,_,s,x*u),t.update(_,n,1)}function p(x,_,S){S!==0&&(a.drawElementsInstanced(n,_,s,x*u,S),t.update(_,n,S))}function m(x,_,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,s,x,0,S);let T=0;for(let w=0;w<S;w++)T+=_[w];t.update(T,n,1)}function v(x,_,S,A){if(S===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let w=0;w<x.length;w++)p(x[w]/u,_[w],A[w]);else{T.multiDrawElementsInstancedWEBGL(n,_,0,s,x,0,A,0,S);let w=0;for(let C=0;C<S;C++)w+=_[C]*A[C];t.update(w,n,1)}}this.setMode=i,this.setIndex=c,this.render=f,this.renderInstances=p,this.renderMultiDraw=m,this.renderMultiDrawInstances=v}function lk(a){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,u,c){switch(t.calls++,u){case a.TRIANGLES:t.triangles+=c*(s/3);break;case a.LINES:t.lines+=c*(s/2);break;case a.LINE_STRIP:t.lines+=c*(s-1);break;case a.LINE_LOOP:t.lines+=c*s;break;case a.POINTS:t.points+=c*s;break;default:Wt("WebGLInfo: Unknown draw mode:",u);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function uk(a,e,t){const n=new WeakMap,i=new vn;function s(u,c,f){const p=u.morphTargetInfluences,m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=m!==void 0?m.length:0;let x=n.get(c);if(x===void 0||x.count!==v){let L=function(){G.dispose(),n.delete(c),c.removeEventListener("dispose",L)};var _=L;x!==void 0&&x.texture.dispose();const S=c.morphAttributes.position!==void 0,A=c.morphAttributes.normal!==void 0,T=c.morphAttributes.color!==void 0,w=c.morphAttributes.position||[],C=c.morphAttributes.normal||[],R=c.morphAttributes.color||[];let P=0;S===!0&&(P=1),A===!0&&(P=2),T===!0&&(P=3);let F=c.attributes.position.count*P,N=1;F>e.maxTextureSize&&(N=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const z=new Float32Array(F*N*4*v),G=new xg(z,F,N,v);G.type=vr,G.needsUpdate=!0;const D=P*4;for(let H=0;H<v;H++){const ee=w[H],ne=C[H],me=R[H],fe=F*N*4*H;for(let ye=0;ye<ee.count;ye++){const we=ye*D;S===!0&&(i.fromBufferAttribute(ee,ye),z[fe+we+0]=i.x,z[fe+we+1]=i.y,z[fe+we+2]=i.z,z[fe+we+3]=0),A===!0&&(i.fromBufferAttribute(ne,ye),z[fe+we+4]=i.x,z[fe+we+5]=i.y,z[fe+we+6]=i.z,z[fe+we+7]=0),T===!0&&(i.fromBufferAttribute(me,ye),z[fe+we+8]=i.x,z[fe+we+9]=i.y,z[fe+we+10]=i.z,z[fe+we+11]=me.itemSize===4?i.w:1)}}x={count:v,texture:G,size:new Ae(F,N)},n.set(c,x),c.addEventListener("dispose",L)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)f.getUniforms().setValue(a,"morphTexture",u.morphTexture,t);else{let S=0;for(let T=0;T<p.length;T++)S+=p[T];const A=c.morphTargetsRelative?1:1-S;f.getUniforms().setValue(a,"morphTargetBaseInfluence",A),f.getUniforms().setValue(a,"morphTargetInfluences",p)}f.getUniforms().setValue(a,"morphTargetsTexture",x.texture,t),f.getUniforms().setValue(a,"morphTargetsTextureSize",x.size)}return{update:s}}function hk(a,e,t,n){let i=new WeakMap;function s(f){const p=n.render.frame,m=f.geometry,v=e.get(f,m);if(i.get(v)!==p&&(e.update(v),i.set(v,p)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),i.get(f)!==p&&(t.update(f.instanceMatrix,a.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,a.ARRAY_BUFFER),i.set(f,p))),f.isSkinnedMesh){const x=f.skeleton;i.get(x)!==p&&(x.update(),i.set(x,p))}return v}function u(){i=new WeakMap}function c(f){const p=f.target;p.removeEventListener("dispose",c),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:s,dispose:u}}const yw=new Qn,L_=new Ag(1,1),xw=new xg,_w=new _g,bw=new yf,N_=[],D_=[],O_=new Float32Array(16),U_=new Float32Array(9),F_=new Float32Array(4);function Ac(a,e,t){const n=a[0];if(n<=0||n>0)return a;const i=e*t;let s=N_[i];if(s===void 0&&(s=new Float32Array(i),N_[i]=s),e!==0){n.toArray(s,0);for(let u=1,c=0;u!==e;++u)c+=t,a[u].toArray(s,c)}return s}function bi(a,e){if(a.length!==e.length)return!1;for(let t=0,n=a.length;t<n;t++)if(a[t]!==e[t])return!1;return!0}function wi(a,e){for(let t=0,n=e.length;t<n;t++)a[t]=e[t]}function jg(a,e){let t=D_[e];t===void 0&&(t=new Int32Array(e),D_[e]=t);for(let n=0;n!==e;++n)t[n]=a.allocateTextureUnit();return t}function ck(a,e){const t=this.cache;t[0]!==e&&(a.uniform1f(this.addr,e),t[0]=e)}function dk(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;a.uniform2fv(this.addr,e),wi(t,e)}}function fk(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(a.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(bi(t,e))return;a.uniform3fv(this.addr,e),wi(t,e)}}function pk(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;a.uniform4fv(this.addr,e),wi(t,e)}}function mk(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;a.uniformMatrix2fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;F_.set(n),a.uniformMatrix2fv(this.addr,!1,F_),wi(t,n)}}function gk(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;a.uniformMatrix3fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;U_.set(n),a.uniformMatrix3fv(this.addr,!1,U_),wi(t,n)}}function vk(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;a.uniformMatrix4fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;O_.set(n),a.uniformMatrix4fv(this.addr,!1,O_),wi(t,n)}}function yk(a,e){const t=this.cache;t[0]!==e&&(a.uniform1i(this.addr,e),t[0]=e)}function xk(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;a.uniform2iv(this.addr,e),wi(t,e)}}function _k(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;a.uniform3iv(this.addr,e),wi(t,e)}}function bk(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;a.uniform4iv(this.addr,e),wi(t,e)}}function wk(a,e){const t=this.cache;t[0]!==e&&(a.uniform1ui(this.addr,e),t[0]=e)}function Sk(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;a.uniform2uiv(this.addr,e),wi(t,e)}}function Mk(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;a.uniform3uiv(this.addr,e),wi(t,e)}}function Tk(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;a.uniform4uiv(this.addr,e),wi(t,e)}}function Ek(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i);let s;this.type===a.SAMPLER_2D_SHADOW?(L_.compareFunction=i0,s=L_):s=yw,t.setTexture2D(e||s,i)}function Ak(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||_w,i)}function kk(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||bw,i)}function Ck(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||xw,i)}function Rk(a){switch(a){case 5126:return ck;case 35664:return dk;case 35665:return fk;case 35666:return pk;case 35674:return mk;case 35675:return gk;case 35676:return vk;case 5124:case 35670:return yk;case 35667:case 35671:return xk;case 35668:case 35672:return _k;case 35669:case 35673:return bk;case 5125:return wk;case 36294:return Sk;case 36295:return Mk;case 36296:return Tk;case 35678:case 36198:case 36298:case 36306:case 35682:return Ek;case 35679:case 36299:case 36307:return Ak;case 35680:case 36300:case 36308:case 36293:return kk;case 36289:case 36303:case 36311:case 36292:return Ck}}function Ik(a,e){a.uniform1fv(this.addr,e)}function Pk(a,e){const t=Ac(e,this.size,2);a.uniform2fv(this.addr,t)}function Lk(a,e){const t=Ac(e,this.size,3);a.uniform3fv(this.addr,t)}function Nk(a,e){const t=Ac(e,this.size,4);a.uniform4fv(this.addr,t)}function Dk(a,e){const t=Ac(e,this.size,4);a.uniformMatrix2fv(this.addr,!1,t)}function Ok(a,e){const t=Ac(e,this.size,9);a.uniformMatrix3fv(this.addr,!1,t)}function Uk(a,e){const t=Ac(e,this.size,16);a.uniformMatrix4fv(this.addr,!1,t)}function Fk(a,e){a.uniform1iv(this.addr,e)}function Bk(a,e){a.uniform2iv(this.addr,e)}function zk(a,e){a.uniform3iv(this.addr,e)}function Vk(a,e){a.uniform4iv(this.addr,e)}function Hk(a,e){a.uniform1uiv(this.addr,e)}function jk(a,e){a.uniform2uiv(this.addr,e)}function Gk(a,e){a.uniform3uiv(this.addr,e)}function Wk(a,e){a.uniform4uiv(this.addr,e)}function Xk(a,e,t){const n=this.cache,i=e.length,s=jg(t,i);bi(n,s)||(a.uniform1iv(this.addr,s),wi(n,s));for(let u=0;u!==i;++u)t.setTexture2D(e[u]||yw,s[u])}function Yk(a,e,t){const n=this.cache,i=e.length,s=jg(t,i);bi(n,s)||(a.uniform1iv(this.addr,s),wi(n,s));for(let u=0;u!==i;++u)t.setTexture3D(e[u]||_w,s[u])}function qk(a,e,t){const n=this.cache,i=e.length,s=jg(t,i);bi(n,s)||(a.uniform1iv(this.addr,s),wi(n,s));for(let u=0;u!==i;++u)t.setTextureCube(e[u]||bw,s[u])}function Kk(a,e,t){const n=this.cache,i=e.length,s=jg(t,i);bi(n,s)||(a.uniform1iv(this.addr,s),wi(n,s));for(let u=0;u!==i;++u)t.setTexture2DArray(e[u]||xw,s[u])}function Zk(a){switch(a){case 5126:return Ik;case 35664:return Pk;case 35665:return Lk;case 35666:return Nk;case 35674:return Dk;case 35675:return Ok;case 35676:return Uk;case 5124:case 35670:return Fk;case 35667:case 35671:return Bk;case 35668:case 35672:return zk;case 35669:case 35673:return Vk;case 5125:return Hk;case 36294:return jk;case 36295:return Gk;case 36296:return Wk;case 35678:case 36198:case 36298:case 36306:case 35682:return Xk;case 35679:case 36299:case 36307:return Yk;case 35680:case 36300:case 36308:case 36293:return qk;case 36289:case 36303:case 36311:case 36292:return Kk}}class Jk{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Rk(t.type)}}class Qk{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Zk(t.type)}}class $k{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,u=i.length;s!==u;++s){const c=i[s];c.setValue(e,t[c.id],n)}}}const dy=/(\w+)(\])?(\[|\.)?/g;function B_(a,e){a.seq.push(e),a.map[e.id]=e}function eC(a,e,t){const n=a.name,i=n.length;for(dy.lastIndex=0;;){const s=dy.exec(n),u=dy.lastIndex;let c=s[1];const f=s[2]==="]",p=s[3];if(f&&(c=c|0),p===void 0||p==="["&&u+2===i){B_(t,p===void 0?new Jk(c,a,e):new Qk(c,a,e));break}else{let v=t.map[c];v===void 0&&(v=new $k(c),B_(t,v)),t=v}}}class mm{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),u=e.getUniformLocation(t,s.name);eC(s,u,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,u=t.length;s!==u;++s){const c=t[s],f=n[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const u=e[i];u.id in t&&n.push(u)}return n}}function z_(a,e,t){const n=a.createShader(e);return a.shaderSource(n,t),a.compileShader(n),n}const tC=37297;let nC=0;function iC(a,e){const t=a.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let u=i;u<s;u++){const c=u+1;n.push(`${c===e?">":" "} ${c}: ${t[u]}`)}return n.join(`
`)}const V_=new Zt;function rC(a){pn._getMatrix(V_,pn.workingColorSpace,a);const e=`mat3( ${V_.elements.map(t=>t.toFixed(4))} )`;switch(pn.getTransfer(a)){case rf:return[e,"LinearTransferOETF"];case Tn:return[e,"sRGBTransferOETF"];default:return ft("WebGLProgram: Unsupported color space: ",a),[e,"LinearTransferOETF"]}}function H_(a,e,t){const n=a.getShaderParameter(e,a.COMPILE_STATUS),s=(a.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const u=/ERROR: 0:(\d+)/.exec(s);if(u){const c=parseInt(u[1]);return t.toUpperCase()+`

`+s+`

`+iC(a.getShaderSource(e),c)}else return s}function aC(a,e){const t=rC(e);return[`vec4 ${a}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function sC(a,e){let t;switch(e){case Wb:t="Linear";break;case Xb:t="Reinhard";break;case Yb:t="Cineon";break;case qy:t="ACESFilmic";break;case Kb:t="AgX";break;case Zb:t="Neutral";break;case qb:t="Custom";break;default:ft("WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+a+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const lm=new Y;function oC(){pn.getLuminanceCoefficients(lm);const a=lm.x.toFixed(4),e=lm.y.toFixed(4),t=lm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${a}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function lC(a){return[a.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",a.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Vd).join(`
`)}function uC(a){const e=[];for(const t in a){const n=a[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function hC(a,e){const t={},n=a.getProgramParameter(e,a.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=a.getActiveAttrib(e,i),u=s.name;let c=1;s.type===a.FLOAT_MAT2&&(c=2),s.type===a.FLOAT_MAT3&&(c=3),s.type===a.FLOAT_MAT4&&(c=4),t[u]={type:s.type,location:a.getAttribLocation(e,u),locationSize:c}}return t}function Vd(a){return a!==""}function j_(a,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function G_(a,e){return a.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const cC=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gy(a){return a.replace(cC,fC)}const dC=new Map;function fC(a,e){let t=nn[e];if(t===void 0){const n=dC.get(e);if(n!==void 0)t=nn[n],ft('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Gy(t)}const pC=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function W_(a){return a.replace(pC,mC)}function mC(a,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function X_(a){let e=`precision ${a.precision} float;
	precision ${a.precision} int;
	precision ${a.precision} sampler2D;
	precision ${a.precision} samplerCube;
	precision ${a.precision} sampler3D;
	precision ${a.precision} sampler2DArray;
	precision ${a.precision} sampler2DShadow;
	precision ${a.precision} samplerCubeShadow;
	precision ${a.precision} sampler2DArrayShadow;
	precision ${a.precision} isampler2D;
	precision ${a.precision} isampler3D;
	precision ${a.precision} isamplerCube;
	precision ${a.precision} isampler2DArray;
	precision ${a.precision} usampler2D;
	precision ${a.precision} usampler3D;
	precision ${a.precision} usamplerCube;
	precision ${a.precision} usampler2DArray;
	`;return a.precision==="highp"?e+=`
#define HIGH_PRECISION`:a.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gC(a){let e="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===ug?e="SHADOWMAP_TYPE_PCF":a.shadowMapType===Hd?e="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===Wa&&(e="SHADOWMAP_TYPE_VSM"),e}function vC(a){let e="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case ho:case al:e="ENVMAP_TYPE_CUBE";break;case Mc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function yC(a){let e="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case al:e="ENVMAP_MODE_REFRACTION";break}return e}function xC(a){let e="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case mf:e="ENVMAP_BLENDING_MULTIPLY";break;case jb:e="ENVMAP_BLENDING_MIX";break;case Gb:e="ENVMAP_BLENDING_ADD";break}return e}function _C(a){const e=a.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function bC(a,e,t,n){const i=a.getContext(),s=t.defines;let u=t.vertexShader,c=t.fragmentShader;const f=gC(t),p=vC(t),m=yC(t),v=xC(t),x=_C(t),_=lC(t),S=uC(s),A=i.createProgram();let T,w,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Vd).join(`
`),T.length>0&&(T+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Vd).join(`
`),w.length>0&&(w+=`
`)):(T=[X_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Vd).join(`
`),w=[X_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",t.envMap?"#define "+v:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vs?"#define TONE_MAPPING":"",t.toneMapping!==vs?nn.tonemapping_pars_fragment:"",t.toneMapping!==vs?sC("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nn.colorspace_pars_fragment,aC("linearToOutputTexel",t.outputColorSpace),oC(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Vd).join(`
`)),u=Gy(u),u=j_(u,t),u=G_(u,t),c=Gy(c),c=j_(c,t),c=G_(c,t),u=W_(u),c=W_(c),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,w=["#define varying in",t.glslVersion===Ny?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Ny?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const R=C+T+u,P=C+w+c,F=z_(i,i.VERTEX_SHADER,R),N=z_(i,i.FRAGMENT_SHADER,P);i.attachShader(A,F),i.attachShader(A,N),t.index0AttributeName!==void 0?i.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(A,0,"position"),i.linkProgram(A);function z(H){if(a.debug.checkShaderErrors){const ee=i.getProgramInfoLog(A)||"",ne=i.getShaderInfoLog(F)||"",me=i.getShaderInfoLog(N)||"",fe=ee.trim(),ye=ne.trim(),we=me.trim();let B=!0,Q=!0;if(i.getProgramParameter(A,i.LINK_STATUS)===!1)if(B=!1,typeof a.debug.onShaderError=="function")a.debug.onShaderError(i,A,F,N);else{const K=H_(i,F,"vertex"),j=H_(i,N,"fragment");Wt("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(A,i.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+fe+`
`+K+`
`+j)}else fe!==""?ft("WebGLProgram: Program Info Log:",fe):(ye===""||we==="")&&(Q=!1);Q&&(H.diagnostics={runnable:B,programLog:fe,vertexShader:{log:ye,prefix:T},fragmentShader:{log:we,prefix:w}})}i.deleteShader(F),i.deleteShader(N),G=new mm(i,A),D=hC(i,A)}let G;this.getUniforms=function(){return G===void 0&&z(this),G};let D;this.getAttributes=function(){return D===void 0&&z(this),D};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(A,tC)),L},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=nC++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=F,this.fragmentShader=N,this}let wC=0;class SC{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),u=this._getShaderCacheForMaterial(e);return u.has(i)===!1&&(u.add(i),i.usedTimes++),u.has(s)===!1&&(u.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new MC(e),t.set(e,n)),n}}class MC{constructor(e){this.id=wC++,this.code=e,this.usedTimes=0}}function TC(a,e,t,n,i,s,u){const c=new Su,f=new SC,p=new Set,m=[],v=i.logarithmicDepthBuffer,x=i.vertexTextures;let _=i.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(D){return p.add(D),D===0?"uv":`uv${D}`}function T(D,L,H,ee,ne){const me=ee.fog,fe=ne.geometry,ye=D.isMeshStandardMaterial?ee.environment:null,we=(D.isMeshStandardMaterial?t:e).get(D.envMap||ye),B=we&&we.mapping===Mc?we.image.height:null,Q=S[D.type];D.precision!==null&&(_=i.getMaxPrecision(D.precision),_!==D.precision&&ft("WebGLProgram.getParameters:",D.precision,"not supported, using",_,"instead."));const K=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,j=K!==void 0?K.length:0;let ie=0;fe.morphAttributes.position!==void 0&&(ie=1),fe.morphAttributes.normal!==void 0&&(ie=2),fe.morphAttributes.color!==void 0&&(ie=3);let Ce,Ye,at,he;if(Q){const en=Xa[Q];Ce=en.vertexShader,Ye=en.fragmentShader}else Ce=D.vertexShader,Ye=D.fragmentShader,f.update(D),at=f.getVertexShaderID(D),he=f.getFragmentShaderID(D);const be=a.getRenderTarget(),Fe=a.state.buffers.depth.getReversed(),it=ne.isInstancedMesh===!0,st=ne.isBatchedMesh===!0,Lt=!!D.map,on=!!D.matcap,yt=!!we,Pe=!!D.aoMap,X=!!D.lightMap,Le=!!D.bumpMap,Be=!!D.normalMap,Ke=!!D.displacementMap,Oe=!!D.emissiveMap,ot=!!D.metalnessMap,$e=!!D.roughnessMap,ht=D.anisotropy>0,W=D.clearcoat>0,O=D.dispersion>0,ue=D.iridescence>0,Te=D.sheen>0,Re=D.transmission>0,Se=ht&&!!D.anisotropyMap,Mt=W&&!!D.clearcoatMap,et=W&&!!D.clearcoatNormalMap,Tt=W&&!!D.clearcoatRoughnessMap,wt=ue&&!!D.iridescenceMap,Ne=ue&&!!D.iridescenceThicknessMap,Je=Te&&!!D.sheenColorMap,Dt=Te&&!!D.sheenRoughnessMap,$=!!D.specularMap,ge=!!D.specularColorMap,ze=!!D.specularIntensityMap,J=Re&&!!D.transmissionMap,Ve=Re&&!!D.thicknessMap,He=!!D.gradientMap,Ge=!!D.alphaMap,We=D.alphaTest>0,ke=!!D.alphaHash,lt=!!D.extensions;let Pt=vs;D.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(Pt=a.toneMapping);const un={shaderID:Q,shaderType:D.type,shaderName:D.name,vertexShader:Ce,fragmentShader:Ye,defines:D.defines,customVertexShaderID:at,customFragmentShaderID:he,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:_,batching:st,batchingColor:st&&ne._colorsTexture!==null,instancing:it,instancingColor:it&&ne.instanceColor!==null,instancingMorph:it&&ne.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:be===null?a.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:Eu,alphaToCoverage:!!D.alphaToCoverage,map:Lt,matcap:on,envMap:yt,envMapMode:yt&&we.mapping,envMapCubeUVHeight:B,aoMap:Pe,lightMap:X,bumpMap:Le,normalMap:Be,displacementMap:x&&Ke,emissiveMap:Oe,normalMapObjectSpace:Be&&D.normalMapType===i1,normalMapTangentSpace:Be&&D.normalMapType===ul,metalnessMap:ot,roughnessMap:$e,anisotropy:ht,anisotropyMap:Se,clearcoat:W,clearcoatMap:Mt,clearcoatNormalMap:et,clearcoatRoughnessMap:Tt,dispersion:O,iridescence:ue,iridescenceMap:wt,iridescenceThicknessMap:Ne,sheen:Te,sheenColorMap:Je,sheenRoughnessMap:Dt,specularMap:$,specularColorMap:ge,specularIntensityMap:ze,transmission:Re,transmissionMap:J,thicknessMap:Ve,gradientMap:He,opaque:D.transparent===!1&&D.blending===bu&&D.alphaToCoverage===!1,alphaMap:Ge,alphaTest:We,alphaHash:ke,combine:D.combine,mapUv:Lt&&A(D.map.channel),aoMapUv:Pe&&A(D.aoMap.channel),lightMapUv:X&&A(D.lightMap.channel),bumpMapUv:Le&&A(D.bumpMap.channel),normalMapUv:Be&&A(D.normalMap.channel),displacementMapUv:Ke&&A(D.displacementMap.channel),emissiveMapUv:Oe&&A(D.emissiveMap.channel),metalnessMapUv:ot&&A(D.metalnessMap.channel),roughnessMapUv:$e&&A(D.roughnessMap.channel),anisotropyMapUv:Se&&A(D.anisotropyMap.channel),clearcoatMapUv:Mt&&A(D.clearcoatMap.channel),clearcoatNormalMapUv:et&&A(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Tt&&A(D.clearcoatRoughnessMap.channel),iridescenceMapUv:wt&&A(D.iridescenceMap.channel),iridescenceThicknessMapUv:Ne&&A(D.iridescenceThicknessMap.channel),sheenColorMapUv:Je&&A(D.sheenColorMap.channel),sheenRoughnessMapUv:Dt&&A(D.sheenRoughnessMap.channel),specularMapUv:$&&A(D.specularMap.channel),specularColorMapUv:ge&&A(D.specularColorMap.channel),specularIntensityMapUv:ze&&A(D.specularIntensityMap.channel),transmissionMapUv:J&&A(D.transmissionMap.channel),thicknessMapUv:Ve&&A(D.thicknessMap.channel),alphaMapUv:Ge&&A(D.alphaMap.channel),vertexTangents:!!fe.attributes.tangent&&(Be||ht),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!fe.attributes.color&&fe.attributes.color.itemSize===4,pointsUvs:ne.isPoints===!0&&!!fe.attributes.uv&&(Lt||Ge),fog:!!me,useFog:D.fog===!0,fogExp2:!!me&&me.isFogExp2,flatShading:D.flatShading===!0&&D.wireframe===!1,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:Fe,skinning:ne.isSkinnedMesh===!0,morphTargets:fe.morphAttributes.position!==void 0,morphNormals:fe.morphAttributes.normal!==void 0,morphColors:fe.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:ie,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:D.dithering,shadowMapEnabled:a.shadowMap.enabled&&H.length>0,shadowMapType:a.shadowMap.type,toneMapping:Pt,decodeVideoTexture:Lt&&D.map.isVideoTexture===!0&&pn.getTransfer(D.map.colorSpace)===Tn,decodeVideoTextureEmissive:Oe&&D.emissiveMap.isVideoTexture===!0&&pn.getTransfer(D.emissiveMap.colorSpace)===Tn,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===ma,flipSided:D.side===yr,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:lt&&D.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(lt&&D.extensions.multiDraw===!0||st)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return un.vertexUv1s=p.has(1),un.vertexUv2s=p.has(2),un.vertexUv3s=p.has(3),p.clear(),un}function w(D){const L=[];if(D.shaderID?L.push(D.shaderID):(L.push(D.customVertexShaderID),L.push(D.customFragmentShaderID)),D.defines!==void 0)for(const H in D.defines)L.push(H),L.push(D.defines[H]);return D.isRawShaderMaterial===!1&&(C(L,D),R(L,D),L.push(a.outputColorSpace)),L.push(D.customProgramCacheKey),L.join()}function C(D,L){D.push(L.precision),D.push(L.outputColorSpace),D.push(L.envMapMode),D.push(L.envMapCubeUVHeight),D.push(L.mapUv),D.push(L.alphaMapUv),D.push(L.lightMapUv),D.push(L.aoMapUv),D.push(L.bumpMapUv),D.push(L.normalMapUv),D.push(L.displacementMapUv),D.push(L.emissiveMapUv),D.push(L.metalnessMapUv),D.push(L.roughnessMapUv),D.push(L.anisotropyMapUv),D.push(L.clearcoatMapUv),D.push(L.clearcoatNormalMapUv),D.push(L.clearcoatRoughnessMapUv),D.push(L.iridescenceMapUv),D.push(L.iridescenceThicknessMapUv),D.push(L.sheenColorMapUv),D.push(L.sheenRoughnessMapUv),D.push(L.specularMapUv),D.push(L.specularColorMapUv),D.push(L.specularIntensityMapUv),D.push(L.transmissionMapUv),D.push(L.thicknessMapUv),D.push(L.combine),D.push(L.fogExp2),D.push(L.sizeAttenuation),D.push(L.morphTargetsCount),D.push(L.morphAttributeCount),D.push(L.numDirLights),D.push(L.numPointLights),D.push(L.numSpotLights),D.push(L.numSpotLightMaps),D.push(L.numHemiLights),D.push(L.numRectAreaLights),D.push(L.numDirLightShadows),D.push(L.numPointLightShadows),D.push(L.numSpotLightShadows),D.push(L.numSpotLightShadowsWithMaps),D.push(L.numLightProbes),D.push(L.shadowMapType),D.push(L.toneMapping),D.push(L.numClippingPlanes),D.push(L.numClipIntersection),D.push(L.depthPacking)}function R(D,L){c.disableAll(),L.supportsVertexTextures&&c.enable(0),L.instancing&&c.enable(1),L.instancingColor&&c.enable(2),L.instancingMorph&&c.enable(3),L.matcap&&c.enable(4),L.envMap&&c.enable(5),L.normalMapObjectSpace&&c.enable(6),L.normalMapTangentSpace&&c.enable(7),L.clearcoat&&c.enable(8),L.iridescence&&c.enable(9),L.alphaTest&&c.enable(10),L.vertexColors&&c.enable(11),L.vertexAlphas&&c.enable(12),L.vertexUv1s&&c.enable(13),L.vertexUv2s&&c.enable(14),L.vertexUv3s&&c.enable(15),L.vertexTangents&&c.enable(16),L.anisotropy&&c.enable(17),L.alphaHash&&c.enable(18),L.batching&&c.enable(19),L.dispersion&&c.enable(20),L.batchingColor&&c.enable(21),L.gradientMap&&c.enable(22),D.push(c.mask),c.disableAll(),L.fog&&c.enable(0),L.useFog&&c.enable(1),L.flatShading&&c.enable(2),L.logarithmicDepthBuffer&&c.enable(3),L.reversedDepthBuffer&&c.enable(4),L.skinning&&c.enable(5),L.morphTargets&&c.enable(6),L.morphNormals&&c.enable(7),L.morphColors&&c.enable(8),L.premultipliedAlpha&&c.enable(9),L.shadowMapEnabled&&c.enable(10),L.doubleSided&&c.enable(11),L.flipSided&&c.enable(12),L.useDepthPacking&&c.enable(13),L.dithering&&c.enable(14),L.transmission&&c.enable(15),L.sheen&&c.enable(16),L.opaque&&c.enable(17),L.pointsUvs&&c.enable(18),L.decodeVideoTexture&&c.enable(19),L.decodeVideoTextureEmissive&&c.enable(20),L.alphaToCoverage&&c.enable(21),D.push(c.mask)}function P(D){const L=S[D.type];let H;if(L){const ee=Xa[L];H=v1.clone(ee.uniforms)}else H=D.uniforms;return H}function F(D,L){let H;for(let ee=0,ne=m.length;ee<ne;ee++){const me=m[ee];if(me.cacheKey===L){H=me,++H.usedTimes;break}}return H===void 0&&(H=new bC(a,L,D,s),m.push(H)),H}function N(D){if(--D.usedTimes===0){const L=m.indexOf(D);m[L]=m[m.length-1],m.pop(),D.destroy()}}function z(D){f.remove(D)}function G(){f.dispose()}return{getParameters:T,getProgramCacheKey:w,getUniforms:P,acquireProgram:F,releaseProgram:N,releaseShaderCache:z,programs:m,dispose:G}}function EC(){let a=new WeakMap;function e(u){return a.has(u)}function t(u){let c=a.get(u);return c===void 0&&(c={},a.set(u,c)),c}function n(u){a.delete(u)}function i(u,c,f){a.get(u)[c]=f}function s(){a=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function AC(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.material.id!==e.material.id?a.material.id-e.material.id:a.z!==e.z?a.z-e.z:a.id-e.id}function Y_(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.z!==e.z?e.z-a.z:a.id-e.id}function q_(){const a=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function u(v,x,_,S,A,T){let w=a[e];return w===void 0?(w={id:v.id,object:v,geometry:x,material:_,groupOrder:S,renderOrder:v.renderOrder,z:A,group:T},a[e]=w):(w.id=v.id,w.object=v,w.geometry=x,w.material=_,w.groupOrder=S,w.renderOrder=v.renderOrder,w.z=A,w.group=T),e++,w}function c(v,x,_,S,A,T){const w=u(v,x,_,S,A,T);_.transmission>0?n.push(w):_.transparent===!0?i.push(w):t.push(w)}function f(v,x,_,S,A,T){const w=u(v,x,_,S,A,T);_.transmission>0?n.unshift(w):_.transparent===!0?i.unshift(w):t.unshift(w)}function p(v,x){t.length>1&&t.sort(v||AC),n.length>1&&n.sort(x||Y_),i.length>1&&i.sort(x||Y_)}function m(){for(let v=e,x=a.length;v<x;v++){const _=a[v];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:c,unshift:f,finish:m,sort:p}}function kC(){let a=new WeakMap;function e(n,i){const s=a.get(n);let u;return s===void 0?(u=new q_,a.set(n,[u])):i>=s.length?(u=new q_,s.push(u)):u=s[i],u}function t(){a=new WeakMap}return{get:e,dispose:t}}function CC(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new xt};break;case"SpotLight":t={position:new Y,direction:new Y,color:new xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new xt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new xt,groundColor:new xt};break;case"RectAreaLight":t={color:new xt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return a[e.id]=t,t}}}function RC(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[e.id]=t,t}}}let IC=0;function PC(a,e){return(e.castShadow?2:0)-(a.castShadow?2:0)+(e.map?1:0)-(a.map?1:0)}function LC(a){const e=new CC,t=RC(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new Y);const i=new Y,s=new Ht,u=new Ht;function c(p){let m=0,v=0,x=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let _=0,S=0,A=0,T=0,w=0,C=0,R=0,P=0,F=0,N=0,z=0;p.sort(PC);for(let D=0,L=p.length;D<L;D++){const H=p[D],ee=H.color,ne=H.intensity,me=H.distance,fe=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)m+=ee.r*ne,v+=ee.g*ne,x+=ee.b*ne;else if(H.isLightProbe){for(let ye=0;ye<9;ye++)n.probe[ye].addScaledVector(H.sh.coefficients[ye],ne);z++}else if(H.isDirectionalLight){const ye=e.get(H);if(ye.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){const we=H.shadow,B=t.get(H);B.shadowIntensity=we.intensity,B.shadowBias=we.bias,B.shadowNormalBias=we.normalBias,B.shadowRadius=we.radius,B.shadowMapSize=we.mapSize,n.directionalShadow[_]=B,n.directionalShadowMap[_]=fe,n.directionalShadowMatrix[_]=H.shadow.matrix,C++}n.directional[_]=ye,_++}else if(H.isSpotLight){const ye=e.get(H);ye.position.setFromMatrixPosition(H.matrixWorld),ye.color.copy(ee).multiplyScalar(ne),ye.distance=me,ye.coneCos=Math.cos(H.angle),ye.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),ye.decay=H.decay,n.spot[A]=ye;const we=H.shadow;if(H.map&&(n.spotLightMap[F]=H.map,F++,we.updateMatrices(H),H.castShadow&&N++),n.spotLightMatrix[A]=we.matrix,H.castShadow){const B=t.get(H);B.shadowIntensity=we.intensity,B.shadowBias=we.bias,B.shadowNormalBias=we.normalBias,B.shadowRadius=we.radius,B.shadowMapSize=we.mapSize,n.spotShadow[A]=B,n.spotShadowMap[A]=fe,P++}A++}else if(H.isRectAreaLight){const ye=e.get(H);ye.color.copy(ee).multiplyScalar(ne),ye.halfWidth.set(H.width*.5,0,0),ye.halfHeight.set(0,H.height*.5,0),n.rectArea[T]=ye,T++}else if(H.isPointLight){const ye=e.get(H);if(ye.color.copy(H.color).multiplyScalar(H.intensity),ye.distance=H.distance,ye.decay=H.decay,H.castShadow){const we=H.shadow,B=t.get(H);B.shadowIntensity=we.intensity,B.shadowBias=we.bias,B.shadowNormalBias=we.normalBias,B.shadowRadius=we.radius,B.shadowMapSize=we.mapSize,B.shadowCameraNear=we.camera.near,B.shadowCameraFar=we.camera.far,n.pointShadow[S]=B,n.pointShadowMap[S]=fe,n.pointShadowMatrix[S]=H.shadow.matrix,R++}n.point[S]=ye,S++}else if(H.isHemisphereLight){const ye=e.get(H);ye.skyColor.copy(H.color).multiplyScalar(ne),ye.groundColor.copy(H.groundColor).multiplyScalar(ne),n.hemi[w]=ye,w++}}T>0&&(a.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=dt.LTC_FLOAT_1,n.rectAreaLTC2=dt.LTC_FLOAT_2):(n.rectAreaLTC1=dt.LTC_HALF_1,n.rectAreaLTC2=dt.LTC_HALF_2)),n.ambient[0]=m,n.ambient[1]=v,n.ambient[2]=x;const G=n.hash;(G.directionalLength!==_||G.pointLength!==S||G.spotLength!==A||G.rectAreaLength!==T||G.hemiLength!==w||G.numDirectionalShadows!==C||G.numPointShadows!==R||G.numSpotShadows!==P||G.numSpotMaps!==F||G.numLightProbes!==z)&&(n.directional.length=_,n.spot.length=A,n.rectArea.length=T,n.point.length=S,n.hemi.length=w,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=R,n.pointShadowMap.length=R,n.spotShadow.length=P,n.spotShadowMap.length=P,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=R,n.spotLightMatrix.length=P+F-N,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=N,n.numLightProbes=z,G.directionalLength=_,G.pointLength=S,G.spotLength=A,G.rectAreaLength=T,G.hemiLength=w,G.numDirectionalShadows=C,G.numPointShadows=R,G.numSpotShadows=P,G.numSpotMaps=F,G.numLightProbes=z,n.version=IC++)}function f(p,m){let v=0,x=0,_=0,S=0,A=0;const T=m.matrixWorldInverse;for(let w=0,C=p.length;w<C;w++){const R=p[w];if(R.isDirectionalLight){const P=n.directional[v];P.direction.setFromMatrixPosition(R.matrixWorld),i.setFromMatrixPosition(R.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(T),v++}else if(R.isSpotLight){const P=n.spot[_];P.position.setFromMatrixPosition(R.matrixWorld),P.position.applyMatrix4(T),P.direction.setFromMatrixPosition(R.matrixWorld),i.setFromMatrixPosition(R.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(T),_++}else if(R.isRectAreaLight){const P=n.rectArea[S];P.position.setFromMatrixPosition(R.matrixWorld),P.position.applyMatrix4(T),u.identity(),s.copy(R.matrixWorld),s.premultiply(T),u.extractRotation(s),P.halfWidth.set(R.width*.5,0,0),P.halfHeight.set(0,R.height*.5,0),P.halfWidth.applyMatrix4(u),P.halfHeight.applyMatrix4(u),S++}else if(R.isPointLight){const P=n.point[x];P.position.setFromMatrixPosition(R.matrixWorld),P.position.applyMatrix4(T),x++}else if(R.isHemisphereLight){const P=n.hemi[A];P.direction.setFromMatrixPosition(R.matrixWorld),P.direction.transformDirection(T),A++}}}return{setup:c,setupView:f,state:n}}function K_(a){const e=new LC(a),t=[],n=[];function i(m){p.camera=m,t.length=0,n.length=0}function s(m){t.push(m)}function u(m){n.push(m)}function c(){e.setup(t)}function f(m){e.setupView(t,m)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:p,setupLights:c,setupLightsView:f,pushLight:s,pushShadow:u}}function NC(a){let e=new WeakMap;function t(i,s=0){const u=e.get(i);let c;return u===void 0?(c=new K_(a),e.set(i,[c])):s>=u.length?(c=new K_(a),u.push(c)):c=u[s],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const DC=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,OC=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function UC(a,e,t){let n=new Tc;const i=new Ae,s=new Ae,u=new vn,c=new _0({depthPacking:n1}),f=new b0,p={},m=t.maxTextureSize,v={[uo]:yr,[yr]:uo,[ma]:ma},x=new va({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ae},radius:{value:4}},vertexShader:DC,fragmentShader:OC}),_=x.clone();_.defines.HORIZONTAL_PASS=1;const S=new Jt;S.setAttribute("position",new Cn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new _i(S,x),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ug;let w=this.type;this.render=function(N,z,G){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||N.length===0)return;const D=a.getRenderTarget(),L=a.getActiveCubeFace(),H=a.getActiveMipmapLevel(),ee=a.state;ee.setBlending(gs),ee.buffers.depth.getReversed()===!0?ee.buffers.color.setClear(0,0,0,0):ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const ne=w!==Wa&&this.type===Wa,me=w===Wa&&this.type!==Wa;for(let fe=0,ye=N.length;fe<ye;fe++){const we=N[fe],B=we.shadow;if(B===void 0){ft("WebGLShadowMap:",we,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const Q=B.getFrameExtents();if(i.multiply(Q),s.copy(B.mapSize),(i.x>m||i.y>m)&&(i.x>m&&(s.x=Math.floor(m/Q.x),i.x=s.x*Q.x,B.mapSize.x=s.x),i.y>m&&(s.y=Math.floor(m/Q.y),i.y=s.y*Q.y,B.mapSize.y=s.y)),B.map===null||ne===!0||me===!0){const j=this.type!==Wa?{minFilter:zi,magFilter:zi}:{};B.map!==null&&B.map.dispose(),B.map=new Ka(i.x,i.y,j),B.map.texture.name=we.name+".shadowMap",B.camera.updateProjectionMatrix()}a.setRenderTarget(B.map),a.clear();const K=B.getViewportCount();for(let j=0;j<K;j++){const ie=B.getViewport(j);u.set(s.x*ie.x,s.y*ie.y,s.x*ie.z,s.y*ie.w),ee.viewport(u),B.updateMatrices(we,j),n=B.getFrustum(),P(z,G,B.camera,we,this.type)}B.isPointLightShadow!==!0&&this.type===Wa&&C(B,G),B.needsUpdate=!1}w=this.type,T.needsUpdate=!1,a.setRenderTarget(D,L,H)};function C(N,z){const G=e.update(A);x.defines.VSM_SAMPLES!==N.blurSamples&&(x.defines.VSM_SAMPLES=N.blurSamples,_.defines.VSM_SAMPLES=N.blurSamples,x.needsUpdate=!0,_.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Ka(i.x,i.y)),x.uniforms.shadow_pass.value=N.map.texture,x.uniforms.resolution.value=N.mapSize,x.uniforms.radius.value=N.radius,a.setRenderTarget(N.mapPass),a.clear(),a.renderBufferDirect(z,null,G,x,A,null),_.uniforms.shadow_pass.value=N.mapPass.texture,_.uniforms.resolution.value=N.mapSize,_.uniforms.radius.value=N.radius,a.setRenderTarget(N.map),a.clear(),a.renderBufferDirect(z,null,G,_,A,null)}function R(N,z,G,D){let L=null;const H=G.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(H!==void 0)L=H;else if(L=G.isPointLight===!0?f:c,a.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const ee=L.uuid,ne=z.uuid;let me=p[ee];me===void 0&&(me={},p[ee]=me);let fe=me[ne];fe===void 0&&(fe=L.clone(),me[ne]=fe,z.addEventListener("dispose",F)),L=fe}if(L.visible=z.visible,L.wireframe=z.wireframe,D===Wa?L.side=z.shadowSide!==null?z.shadowSide:z.side:L.side=z.shadowSide!==null?z.shadowSide:v[z.side],L.alphaMap=z.alphaMap,L.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,L.map=z.map,L.clipShadows=z.clipShadows,L.clippingPlanes=z.clippingPlanes,L.clipIntersection=z.clipIntersection,L.displacementMap=z.displacementMap,L.displacementScale=z.displacementScale,L.displacementBias=z.displacementBias,L.wireframeLinewidth=z.wireframeLinewidth,L.linewidth=z.linewidth,G.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const ee=a.properties.get(L);ee.light=G}return L}function P(N,z,G,D,L){if(N.visible===!1)return;if(N.layers.test(z.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&L===Wa)&&(!N.frustumCulled||n.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,N.matrixWorld);const ne=e.update(N),me=N.material;if(Array.isArray(me)){const fe=ne.groups;for(let ye=0,we=fe.length;ye<we;ye++){const B=fe[ye],Q=me[B.materialIndex];if(Q&&Q.visible){const K=R(N,Q,D,L);N.onBeforeShadow(a,N,z,G,ne,K,B),a.renderBufferDirect(G,null,ne,K,N,B),N.onAfterShadow(a,N,z,G,ne,K,B)}}}else if(me.visible){const fe=R(N,me,D,L);N.onBeforeShadow(a,N,z,G,ne,fe,null),a.renderBufferDirect(G,null,ne,fe,N,null),N.onAfterShadow(a,N,z,G,ne,fe,null)}}const ee=N.children;for(let ne=0,me=ee.length;ne<me;ne++)P(ee[ne],z,G,D,L)}function F(N){N.target.removeEventListener("dispose",F);for(const G in p){const D=p[G],L=N.target.uuid;L in D&&(D[L].dispose(),delete D[L])}}}const FC={[xm]:_m,[bm]:Mm,[wm]:Tm,[Tu]:Sm,[_m]:xm,[Mm]:bm,[Tm]:wm,[Sm]:Tu};function BC(a,e){function t(){let J=!1;const Ve=new vn;let He=null;const Ge=new vn(0,0,0,0);return{setMask:function(We){He!==We&&!J&&(a.colorMask(We,We,We,We),He=We)},setLocked:function(We){J=We},setClear:function(We,ke,lt,Pt,un){un===!0&&(We*=Pt,ke*=Pt,lt*=Pt),Ve.set(We,ke,lt,Pt),Ge.equals(Ve)===!1&&(a.clearColor(We,ke,lt,Pt),Ge.copy(Ve))},reset:function(){J=!1,He=null,Ge.set(-1,0,0,0)}}}function n(){let J=!1,Ve=!1,He=null,Ge=null,We=null;return{setReversed:function(ke){if(Ve!==ke){const lt=e.get("EXT_clip_control");ke?lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.ZERO_TO_ONE_EXT):lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.NEGATIVE_ONE_TO_ONE_EXT),Ve=ke;const Pt=We;We=null,this.setClear(Pt)}},getReversed:function(){return Ve},setTest:function(ke){ke?be(a.DEPTH_TEST):Fe(a.DEPTH_TEST)},setMask:function(ke){He!==ke&&!J&&(a.depthMask(ke),He=ke)},setFunc:function(ke){if(Ve&&(ke=FC[ke]),Ge!==ke){switch(ke){case xm:a.depthFunc(a.NEVER);break;case _m:a.depthFunc(a.ALWAYS);break;case bm:a.depthFunc(a.LESS);break;case Tu:a.depthFunc(a.LEQUAL);break;case wm:a.depthFunc(a.EQUAL);break;case Sm:a.depthFunc(a.GEQUAL);break;case Mm:a.depthFunc(a.GREATER);break;case Tm:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}Ge=ke}},setLocked:function(ke){J=ke},setClear:function(ke){We!==ke&&(Ve&&(ke=1-ke),a.clearDepth(ke),We=ke)},reset:function(){J=!1,He=null,Ge=null,We=null,Ve=!1}}}function i(){let J=!1,Ve=null,He=null,Ge=null,We=null,ke=null,lt=null,Pt=null,un=null;return{setTest:function(en){J||(en?be(a.STENCIL_TEST):Fe(a.STENCIL_TEST))},setMask:function(en){Ve!==en&&!J&&(a.stencilMask(en),Ve=en)},setFunc:function(en,Xn,Un){(He!==en||Ge!==Xn||We!==Un)&&(a.stencilFunc(en,Xn,Un),He=en,Ge=Xn,We=Un)},setOp:function(en,Xn,Un){(ke!==en||lt!==Xn||Pt!==Un)&&(a.stencilOp(en,Xn,Un),ke=en,lt=Xn,Pt=Un)},setLocked:function(en){J=en},setClear:function(en){un!==en&&(a.clearStencil(en),un=en)},reset:function(){J=!1,Ve=null,He=null,Ge=null,We=null,ke=null,lt=null,Pt=null,un=null}}}const s=new t,u=new n,c=new i,f=new WeakMap,p=new WeakMap;let m={},v={},x=new WeakMap,_=[],S=null,A=!1,T=null,w=null,C=null,R=null,P=null,F=null,N=null,z=new xt(0,0,0),G=0,D=!1,L=null,H=null,ee=null,ne=null,me=null;const fe=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ye=!1,we=0;const B=a.getParameter(a.VERSION);B.indexOf("WebGL")!==-1?(we=parseFloat(/^WebGL (\d)/.exec(B)[1]),ye=we>=1):B.indexOf("OpenGL ES")!==-1&&(we=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),ye=we>=2);let Q=null,K={};const j=a.getParameter(a.SCISSOR_BOX),ie=a.getParameter(a.VIEWPORT),Ce=new vn().fromArray(j),Ye=new vn().fromArray(ie);function at(J,Ve,He,Ge){const We=new Uint8Array(4),ke=a.createTexture();a.bindTexture(J,ke),a.texParameteri(J,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(J,a.TEXTURE_MAG_FILTER,a.NEAREST);for(let lt=0;lt<He;lt++)J===a.TEXTURE_3D||J===a.TEXTURE_2D_ARRAY?a.texImage3D(Ve,0,a.RGBA,1,1,Ge,0,a.RGBA,a.UNSIGNED_BYTE,We):a.texImage2D(Ve+lt,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,We);return ke}const he={};he[a.TEXTURE_2D]=at(a.TEXTURE_2D,a.TEXTURE_2D,1),he[a.TEXTURE_CUBE_MAP]=at(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[a.TEXTURE_2D_ARRAY]=at(a.TEXTURE_2D_ARRAY,a.TEXTURE_2D_ARRAY,1,1),he[a.TEXTURE_3D]=at(a.TEXTURE_3D,a.TEXTURE_3D,1,1),s.setClear(0,0,0,1),u.setClear(1),c.setClear(0),be(a.DEPTH_TEST),u.setFunc(Tu),Le(!1),Be(ky),be(a.CULL_FACE),Pe(gs);function be(J){m[J]!==!0&&(a.enable(J),m[J]=!0)}function Fe(J){m[J]!==!1&&(a.disable(J),m[J]=!1)}function it(J,Ve){return v[J]!==Ve?(a.bindFramebuffer(J,Ve),v[J]=Ve,J===a.DRAW_FRAMEBUFFER&&(v[a.FRAMEBUFFER]=Ve),J===a.FRAMEBUFFER&&(v[a.DRAW_FRAMEBUFFER]=Ve),!0):!1}function st(J,Ve){let He=_,Ge=!1;if(J){He=x.get(Ve),He===void 0&&(He=[],x.set(Ve,He));const We=J.textures;if(He.length!==We.length||He[0]!==a.COLOR_ATTACHMENT0){for(let ke=0,lt=We.length;ke<lt;ke++)He[ke]=a.COLOR_ATTACHMENT0+ke;He.length=We.length,Ge=!0}}else He[0]!==a.BACK&&(He[0]=a.BACK,Ge=!0);Ge&&a.drawBuffers(He)}function Lt(J){return S!==J?(a.useProgram(J),S=J,!0):!1}const on={[tl]:a.FUNC_ADD,[Eb]:a.FUNC_SUBTRACT,[Ab]:a.FUNC_REVERSE_SUBTRACT};on[kb]=a.MIN,on[Cb]=a.MAX;const yt={[Rb]:a.ZERO,[Ib]:a.ONE,[Pb]:a.SRC_COLOR,[vm]:a.SRC_ALPHA,[Fb]:a.SRC_ALPHA_SATURATE,[Ob]:a.DST_COLOR,[Nb]:a.DST_ALPHA,[Lb]:a.ONE_MINUS_SRC_COLOR,[ym]:a.ONE_MINUS_SRC_ALPHA,[Ub]:a.ONE_MINUS_DST_COLOR,[Db]:a.ONE_MINUS_DST_ALPHA,[Bb]:a.CONSTANT_COLOR,[zb]:a.ONE_MINUS_CONSTANT_COLOR,[Vb]:a.CONSTANT_ALPHA,[Hb]:a.ONE_MINUS_CONSTANT_ALPHA};function Pe(J,Ve,He,Ge,We,ke,lt,Pt,un,en){if(J===gs){A===!0&&(Fe(a.BLEND),A=!1);return}if(A===!1&&(be(a.BLEND),A=!0),J!==Tb){if(J!==T||en!==D){if((w!==tl||P!==tl)&&(a.blendEquation(a.FUNC_ADD),w=tl,P=tl),en)switch(J){case bu:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case Cy:a.blendFunc(a.ONE,a.ONE);break;case Ry:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case Iy:a.blendFuncSeparate(a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA,a.ZERO,a.ONE);break;default:Wt("WebGLState: Invalid blending: ",J);break}else switch(J){case bu:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case Cy:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE,a.ONE,a.ONE);break;case Ry:Wt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Iy:Wt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Wt("WebGLState: Invalid blending: ",J);break}C=null,R=null,F=null,N=null,z.set(0,0,0),G=0,T=J,D=en}return}We=We||Ve,ke=ke||He,lt=lt||Ge,(Ve!==w||We!==P)&&(a.blendEquationSeparate(on[Ve],on[We]),w=Ve,P=We),(He!==C||Ge!==R||ke!==F||lt!==N)&&(a.blendFuncSeparate(yt[He],yt[Ge],yt[ke],yt[lt]),C=He,R=Ge,F=ke,N=lt),(Pt.equals(z)===!1||un!==G)&&(a.blendColor(Pt.r,Pt.g,Pt.b,un),z.copy(Pt),G=un),T=J,D=!1}function X(J,Ve){J.side===ma?Fe(a.CULL_FACE):be(a.CULL_FACE);let He=J.side===yr;Ve&&(He=!He),Le(He),J.blending===bu&&J.transparent===!1?Pe(gs):Pe(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),u.setFunc(J.depthFunc),u.setTest(J.depthTest),u.setMask(J.depthWrite),s.setMask(J.colorWrite);const Ge=J.stencilWrite;c.setTest(Ge),Ge&&(c.setMask(J.stencilWriteMask),c.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),c.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),Oe(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?be(a.SAMPLE_ALPHA_TO_COVERAGE):Fe(a.SAMPLE_ALPHA_TO_COVERAGE)}function Le(J){L!==J&&(J?a.frontFace(a.CW):a.frontFace(a.CCW),L=J)}function Be(J){J!==wb?(be(a.CULL_FACE),J!==H&&(J===ky?a.cullFace(a.BACK):J===Sb?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):Fe(a.CULL_FACE),H=J}function Ke(J){J!==ee&&(ye&&a.lineWidth(J),ee=J)}function Oe(J,Ve,He){J?(be(a.POLYGON_OFFSET_FILL),(ne!==Ve||me!==He)&&(a.polygonOffset(Ve,He),ne=Ve,me=He)):Fe(a.POLYGON_OFFSET_FILL)}function ot(J){J?be(a.SCISSOR_TEST):Fe(a.SCISSOR_TEST)}function $e(J){J===void 0&&(J=a.TEXTURE0+fe-1),Q!==J&&(a.activeTexture(J),Q=J)}function ht(J,Ve,He){He===void 0&&(Q===null?He=a.TEXTURE0+fe-1:He=Q);let Ge=K[He];Ge===void 0&&(Ge={type:void 0,texture:void 0},K[He]=Ge),(Ge.type!==J||Ge.texture!==Ve)&&(Q!==He&&(a.activeTexture(He),Q=He),a.bindTexture(J,Ve||he[J]),Ge.type=J,Ge.texture=Ve)}function W(){const J=K[Q];J!==void 0&&J.type!==void 0&&(a.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function O(){try{a.compressedTexImage2D(...arguments)}catch(J){J("WebGLState:",J)}}function ue(){try{a.compressedTexImage3D(...arguments)}catch(J){J("WebGLState:",J)}}function Te(){try{a.texSubImage2D(...arguments)}catch(J){J("WebGLState:",J)}}function Re(){try{a.texSubImage3D(...arguments)}catch(J){J("WebGLState:",J)}}function Se(){try{a.compressedTexSubImage2D(...arguments)}catch(J){J("WebGLState:",J)}}function Mt(){try{a.compressedTexSubImage3D(...arguments)}catch(J){J("WebGLState:",J)}}function et(){try{a.texStorage2D(...arguments)}catch(J){J("WebGLState:",J)}}function Tt(){try{a.texStorage3D(...arguments)}catch(J){J("WebGLState:",J)}}function wt(){try{a.texImage2D(...arguments)}catch(J){J("WebGLState:",J)}}function Ne(){try{a.texImage3D(...arguments)}catch(J){J("WebGLState:",J)}}function Je(J){Ce.equals(J)===!1&&(a.scissor(J.x,J.y,J.z,J.w),Ce.copy(J))}function Dt(J){Ye.equals(J)===!1&&(a.viewport(J.x,J.y,J.z,J.w),Ye.copy(J))}function $(J,Ve){let He=p.get(Ve);He===void 0&&(He=new WeakMap,p.set(Ve,He));let Ge=He.get(J);Ge===void 0&&(Ge=a.getUniformBlockIndex(Ve,J.name),He.set(J,Ge))}function ge(J,Ve){const Ge=p.get(Ve).get(J);f.get(Ve)!==Ge&&(a.uniformBlockBinding(Ve,Ge,J.__bindingPointIndex),f.set(Ve,Ge))}function ze(){a.disable(a.BLEND),a.disable(a.CULL_FACE),a.disable(a.DEPTH_TEST),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SCISSOR_TEST),a.disable(a.STENCIL_TEST),a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ONE,a.ZERO),a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO),a.blendColor(0,0,0,0),a.colorMask(!0,!0,!0,!0),a.clearColor(0,0,0,0),a.depthMask(!0),a.depthFunc(a.LESS),u.setReversed(!1),a.clearDepth(1),a.stencilMask(4294967295),a.stencilFunc(a.ALWAYS,0,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.clearStencil(0),a.cullFace(a.BACK),a.frontFace(a.CCW),a.polygonOffset(0,0),a.activeTexture(a.TEXTURE0),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.useProgram(null),a.lineWidth(1),a.scissor(0,0,a.canvas.width,a.canvas.height),a.viewport(0,0,a.canvas.width,a.canvas.height),m={},Q=null,K={},v={},x=new WeakMap,_=[],S=null,A=!1,T=null,w=null,C=null,R=null,P=null,F=null,N=null,z=new xt(0,0,0),G=0,D=!1,L=null,H=null,ee=null,ne=null,me=null,Ce.set(0,0,a.canvas.width,a.canvas.height),Ye.set(0,0,a.canvas.width,a.canvas.height),s.reset(),u.reset(),c.reset()}return{buffers:{color:s,depth:u,stencil:c},enable:be,disable:Fe,bindFramebuffer:it,drawBuffers:st,useProgram:Lt,setBlending:Pe,setMaterial:X,setFlipSided:Le,setCullFace:Be,setLineWidth:Ke,setPolygonOffset:Oe,setScissorTest:ot,activeTexture:$e,bindTexture:ht,unbindTexture:W,compressedTexImage2D:O,compressedTexImage3D:ue,texImage2D:wt,texImage3D:Ne,updateUBOMapping:$,uniformBlockBinding:ge,texStorage2D:et,texStorage3D:Tt,texSubImage2D:Te,texSubImage3D:Re,compressedTexSubImage2D:Se,compressedTexSubImage3D:Mt,scissor:Je,viewport:Dt,reset:ze}}function zC(a,e,t,n,i,s,u){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Ae,m=new WeakMap;let v;const x=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(W,O){return _?new OffscreenCanvas(W,O):sf("canvas")}function A(W,O,ue){let Te=1;const Re=ht(W);if((Re.width>ue||Re.height>ue)&&(Te=ue/Math.max(Re.width,Re.height)),Te<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const Se=Math.floor(Te*Re.width),Mt=Math.floor(Te*Re.height);v===void 0&&(v=S(Se,Mt));const et=O?S(Se,Mt):v;return et.width=Se,et.height=Mt,et.getContext("2d").drawImage(W,0,0,Se,Mt),ft("WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+Se+"x"+Mt+")."),et}else return"data"in W&&ft("WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),W;return W}function T(W){return W.generateMipmaps}function w(W){a.generateMipmap(W)}function C(W){return W.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:W.isWebGL3DRenderTarget?a.TEXTURE_3D:W.isWebGLArrayRenderTarget||W.isCompressedArrayTexture?a.TEXTURE_2D_ARRAY:a.TEXTURE_2D}function R(W,O,ue,Te,Re=!1){if(W!==null){if(a[W]!==void 0)return a[W];ft("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Se=O;if(O===a.RED&&(ue===a.FLOAT&&(Se=a.R32F),ue===a.HALF_FLOAT&&(Se=a.R16F),ue===a.UNSIGNED_BYTE&&(Se=a.R8)),O===a.RED_INTEGER&&(ue===a.UNSIGNED_BYTE&&(Se=a.R8UI),ue===a.UNSIGNED_SHORT&&(Se=a.R16UI),ue===a.UNSIGNED_INT&&(Se=a.R32UI),ue===a.BYTE&&(Se=a.R8I),ue===a.SHORT&&(Se=a.R16I),ue===a.INT&&(Se=a.R32I)),O===a.RG&&(ue===a.FLOAT&&(Se=a.RG32F),ue===a.HALF_FLOAT&&(Se=a.RG16F),ue===a.UNSIGNED_BYTE&&(Se=a.RG8)),O===a.RG_INTEGER&&(ue===a.UNSIGNED_BYTE&&(Se=a.RG8UI),ue===a.UNSIGNED_SHORT&&(Se=a.RG16UI),ue===a.UNSIGNED_INT&&(Se=a.RG32UI),ue===a.BYTE&&(Se=a.RG8I),ue===a.SHORT&&(Se=a.RG16I),ue===a.INT&&(Se=a.RG32I)),O===a.RGB_INTEGER&&(ue===a.UNSIGNED_BYTE&&(Se=a.RGB8UI),ue===a.UNSIGNED_SHORT&&(Se=a.RGB16UI),ue===a.UNSIGNED_INT&&(Se=a.RGB32UI),ue===a.BYTE&&(Se=a.RGB8I),ue===a.SHORT&&(Se=a.RGB16I),ue===a.INT&&(Se=a.RGB32I)),O===a.RGBA_INTEGER&&(ue===a.UNSIGNED_BYTE&&(Se=a.RGBA8UI),ue===a.UNSIGNED_SHORT&&(Se=a.RGBA16UI),ue===a.UNSIGNED_INT&&(Se=a.RGBA32UI),ue===a.BYTE&&(Se=a.RGBA8I),ue===a.SHORT&&(Se=a.RGBA16I),ue===a.INT&&(Se=a.RGBA32I)),O===a.RGB&&(ue===a.UNSIGNED_INT_5_9_9_9_REV&&(Se=a.RGB9_E5),ue===a.UNSIGNED_INT_10F_11F_11F_REV&&(Se=a.R11F_G11F_B10F)),O===a.RGBA){const Mt=Re?rf:pn.getTransfer(Te);ue===a.FLOAT&&(Se=a.RGBA32F),ue===a.HALF_FLOAT&&(Se=a.RGBA16F),ue===a.UNSIGNED_BYTE&&(Se=Mt===Tn?a.SRGB8_ALPHA8:a.RGBA8),ue===a.UNSIGNED_SHORT_4_4_4_4&&(Se=a.RGBA4),ue===a.UNSIGNED_SHORT_5_5_5_1&&(Se=a.RGB5_A1)}return(Se===a.R16F||Se===a.R32F||Se===a.RG16F||Se===a.RG32F||Se===a.RGBA16F||Se===a.RGBA32F)&&e.get("EXT_color_buffer_float"),Se}function P(W,O){let ue;return W?O===null||O===co||O===pc?ue=a.DEPTH24_STENCIL8:O===vr?ue=a.DEPTH32F_STENCIL8:O===fc&&(ue=a.DEPTH24_STENCIL8,ft("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===co||O===pc?ue=a.DEPTH_COMPONENT24:O===vr?ue=a.DEPTH_COMPONENT32F:O===fc&&(ue=a.DEPTH_COMPONENT16),ue}function F(W,O){return T(W)===!0||W.isFramebufferTexture&&W.minFilter!==zi&&W.minFilter!==Wn?Math.log2(Math.max(O.width,O.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?O.mipmaps.length:1}function N(W){const O=W.target;O.removeEventListener("dispose",N),G(O),O.isVideoTexture&&m.delete(O)}function z(W){const O=W.target;O.removeEventListener("dispose",z),L(O)}function G(W){const O=n.get(W);if(O.__webglInit===void 0)return;const ue=W.source,Te=x.get(ue);if(Te){const Re=Te[O.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&D(W),Object.keys(Te).length===0&&x.delete(ue)}n.remove(W)}function D(W){const O=n.get(W);a.deleteTexture(O.__webglTexture);const ue=W.source,Te=x.get(ue);delete Te[O.__cacheKey],u.memory.textures--}function L(W){const O=n.get(W);if(W.depthTexture&&(W.depthTexture.dispose(),n.remove(W.depthTexture)),W.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(O.__webglFramebuffer[Te]))for(let Re=0;Re<O.__webglFramebuffer[Te].length;Re++)a.deleteFramebuffer(O.__webglFramebuffer[Te][Re]);else a.deleteFramebuffer(O.__webglFramebuffer[Te]);O.__webglDepthbuffer&&a.deleteRenderbuffer(O.__webglDepthbuffer[Te])}else{if(Array.isArray(O.__webglFramebuffer))for(let Te=0;Te<O.__webglFramebuffer.length;Te++)a.deleteFramebuffer(O.__webglFramebuffer[Te]);else a.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&a.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&a.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let Te=0;Te<O.__webglColorRenderbuffer.length;Te++)O.__webglColorRenderbuffer[Te]&&a.deleteRenderbuffer(O.__webglColorRenderbuffer[Te]);O.__webglDepthRenderbuffer&&a.deleteRenderbuffer(O.__webglDepthRenderbuffer)}const ue=W.textures;for(let Te=0,Re=ue.length;Te<Re;Te++){const Se=n.get(ue[Te]);Se.__webglTexture&&(a.deleteTexture(Se.__webglTexture),u.memory.textures--),n.remove(ue[Te])}n.remove(W)}let H=0;function ee(){H=0}function ne(){const W=H;return W>=i.maxTextures&&ft("WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+i.maxTextures),H+=1,W}function me(W){const O=[];return O.push(W.wrapS),O.push(W.wrapT),O.push(W.wrapR||0),O.push(W.magFilter),O.push(W.minFilter),O.push(W.anisotropy),O.push(W.internalFormat),O.push(W.format),O.push(W.type),O.push(W.generateMipmaps),O.push(W.premultiplyAlpha),O.push(W.flipY),O.push(W.unpackAlignment),O.push(W.colorSpace),O.join()}function fe(W,O){const ue=n.get(W);if(W.isVideoTexture&&ot(W),W.isRenderTargetTexture===!1&&W.isExternalTexture!==!0&&W.version>0&&ue.__version!==W.version){const Te=W.image;if(Te===null)ft("WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)ft("WebGLRenderer: Texture marked for update but image is incomplete");else{he(ue,W,O);return}}else W.isExternalTexture&&(ue.__webglTexture=W.sourceTexture?W.sourceTexture:null);t.bindTexture(a.TEXTURE_2D,ue.__webglTexture,a.TEXTURE0+O)}function ye(W,O){const ue=n.get(W);if(W.isRenderTargetTexture===!1&&W.version>0&&ue.__version!==W.version){he(ue,W,O);return}else W.isExternalTexture&&(ue.__webglTexture=W.sourceTexture?W.sourceTexture:null);t.bindTexture(a.TEXTURE_2D_ARRAY,ue.__webglTexture,a.TEXTURE0+O)}function we(W,O){const ue=n.get(W);if(W.isRenderTargetTexture===!1&&W.version>0&&ue.__version!==W.version){he(ue,W,O);return}t.bindTexture(a.TEXTURE_3D,ue.__webglTexture,a.TEXTURE0+O)}function B(W,O){const ue=n.get(W);if(W.version>0&&ue.__version!==W.version){be(ue,W,O);return}t.bindTexture(a.TEXTURE_CUBE_MAP,ue.__webglTexture,a.TEXTURE0+O)}const Q={[$d]:a.REPEAT,[Or]:a.CLAMP_TO_EDGE,[ef]:a.MIRRORED_REPEAT},K={[zi]:a.NEAREST,[Ky]:a.NEAREST_MIPMAP_NEAREST,[lc]:a.NEAREST_MIPMAP_LINEAR,[Wn]:a.LINEAR,[jd]:a.LINEAR_MIPMAP_NEAREST,[ps]:a.LINEAR_MIPMAP_LINEAR},j={[r1]:a.NEVER,[h1]:a.ALWAYS,[a1]:a.LESS,[i0]:a.LEQUAL,[s1]:a.EQUAL,[u1]:a.GEQUAL,[o1]:a.GREATER,[l1]:a.NOTEQUAL};function ie(W,O){if(O.type===vr&&e.has("OES_texture_float_linear")===!1&&(O.magFilter===Wn||O.magFilter===jd||O.magFilter===lc||O.magFilter===ps||O.minFilter===Wn||O.minFilter===jd||O.minFilter===lc||O.minFilter===ps)&&ft("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),a.texParameteri(W,a.TEXTURE_WRAP_S,Q[O.wrapS]),a.texParameteri(W,a.TEXTURE_WRAP_T,Q[O.wrapT]),(W===a.TEXTURE_3D||W===a.TEXTURE_2D_ARRAY)&&a.texParameteri(W,a.TEXTURE_WRAP_R,Q[O.wrapR]),a.texParameteri(W,a.TEXTURE_MAG_FILTER,K[O.magFilter]),a.texParameteri(W,a.TEXTURE_MIN_FILTER,K[O.minFilter]),O.compareFunction&&(a.texParameteri(W,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(W,a.TEXTURE_COMPARE_FUNC,j[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===zi||O.minFilter!==lc&&O.minFilter!==ps||O.type===vr&&e.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||n.get(O).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");a.texParameterf(W,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),n.get(O).__currentAnisotropy=O.anisotropy}}}function Ce(W,O){let ue=!1;W.__webglInit===void 0&&(W.__webglInit=!0,O.addEventListener("dispose",N));const Te=O.source;let Re=x.get(Te);Re===void 0&&(Re={},x.set(Te,Re));const Se=me(O);if(Se!==W.__cacheKey){Re[Se]===void 0&&(Re[Se]={texture:a.createTexture(),usedTimes:0},u.memory.textures++,ue=!0),Re[Se].usedTimes++;const Mt=Re[W.__cacheKey];Mt!==void 0&&(Re[W.__cacheKey].usedTimes--,Mt.usedTimes===0&&D(O)),W.__cacheKey=Se,W.__webglTexture=Re[Se].texture}return ue}function Ye(W,O,ue){return Math.floor(Math.floor(W/ue)/O)}function at(W,O,ue,Te){const Se=W.updateRanges;if(Se.length===0)t.texSubImage2D(a.TEXTURE_2D,0,0,0,O.width,O.height,ue,Te,O.data);else{Se.sort((Ne,Je)=>Ne.start-Je.start);let Mt=0;for(let Ne=1;Ne<Se.length;Ne++){const Je=Se[Mt],Dt=Se[Ne],$=Je.start+Je.count,ge=Ye(Dt.start,O.width,4),ze=Ye(Je.start,O.width,4);Dt.start<=$+1&&ge===ze&&Ye(Dt.start+Dt.count-1,O.width,4)===ge?Je.count=Math.max(Je.count,Dt.start+Dt.count-Je.start):(++Mt,Se[Mt]=Dt)}Se.length=Mt+1;const et=a.getParameter(a.UNPACK_ROW_LENGTH),Tt=a.getParameter(a.UNPACK_SKIP_PIXELS),wt=a.getParameter(a.UNPACK_SKIP_ROWS);a.pixelStorei(a.UNPACK_ROW_LENGTH,O.width);for(let Ne=0,Je=Se.length;Ne<Je;Ne++){const Dt=Se[Ne],$=Math.floor(Dt.start/4),ge=Math.ceil(Dt.count/4),ze=$%O.width,J=Math.floor($/O.width),Ve=ge,He=1;a.pixelStorei(a.UNPACK_SKIP_PIXELS,ze),a.pixelStorei(a.UNPACK_SKIP_ROWS,J),t.texSubImage2D(a.TEXTURE_2D,0,ze,J,Ve,He,ue,Te,O.data)}W.clearUpdateRanges(),a.pixelStorei(a.UNPACK_ROW_LENGTH,et),a.pixelStorei(a.UNPACK_SKIP_PIXELS,Tt),a.pixelStorei(a.UNPACK_SKIP_ROWS,wt)}}function he(W,O,ue){let Te=a.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Te=a.TEXTURE_2D_ARRAY),O.isData3DTexture&&(Te=a.TEXTURE_3D);const Re=Ce(W,O),Se=O.source;t.bindTexture(Te,W.__webglTexture,a.TEXTURE0+ue);const Mt=n.get(Se);if(Se.version!==Mt.__version||Re===!0){t.activeTexture(a.TEXTURE0+ue);const et=pn.getPrimaries(pn.workingColorSpace),Tt=O.colorSpace===so?null:pn.getPrimaries(O.colorSpace),wt=O.colorSpace===so||et===Tt?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,O.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,O.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,wt);let Ne=A(O.image,!1,i.maxTextureSize);Ne=$e(O,Ne);const Je=s.convert(O.format,O.colorSpace),Dt=s.convert(O.type);let $=R(O.internalFormat,Je,Dt,O.colorSpace,O.isVideoTexture);ie(Te,O);let ge;const ze=O.mipmaps,J=O.isVideoTexture!==!0,Ve=Mt.__version===void 0||Re===!0,He=Se.dataReady,Ge=F(O,Ne);if(O.isDepthTexture)$=P(O.format===gc,O.type),Ve&&(J?t.texStorage2D(a.TEXTURE_2D,1,$,Ne.width,Ne.height):t.texImage2D(a.TEXTURE_2D,0,$,Ne.width,Ne.height,0,Je,Dt,null));else if(O.isDataTexture)if(ze.length>0){J&&Ve&&t.texStorage2D(a.TEXTURE_2D,Ge,$,ze[0].width,ze[0].height);for(let We=0,ke=ze.length;We<ke;We++)ge=ze[We],J?He&&t.texSubImage2D(a.TEXTURE_2D,We,0,0,ge.width,ge.height,Je,Dt,ge.data):t.texImage2D(a.TEXTURE_2D,We,$,ge.width,ge.height,0,Je,Dt,ge.data);O.generateMipmaps=!1}else J?(Ve&&t.texStorage2D(a.TEXTURE_2D,Ge,$,Ne.width,Ne.height),He&&at(O,Ne,Je,Dt)):t.texImage2D(a.TEXTURE_2D,0,$,Ne.width,Ne.height,0,Je,Dt,Ne.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){J&&Ve&&t.texStorage3D(a.TEXTURE_2D_ARRAY,Ge,$,ze[0].width,ze[0].height,Ne.depth);for(let We=0,ke=ze.length;We<ke;We++)if(ge=ze[We],O.format!==$i)if(Je!==null)if(J){if(He)if(O.layerUpdates.size>0){const lt=Hy(ge.width,ge.height,O.format,O.type);for(const Pt of O.layerUpdates){const un=ge.data.subarray(Pt*lt/ge.data.BYTES_PER_ELEMENT,(Pt+1)*lt/ge.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,We,0,0,Pt,ge.width,ge.height,1,Je,un)}O.clearLayerUpdates()}else t.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,We,0,0,0,ge.width,ge.height,Ne.depth,Je,ge.data)}else t.compressedTexImage3D(a.TEXTURE_2D_ARRAY,We,$,ge.width,ge.height,Ne.depth,0,ge.data,0,0);else ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else J?He&&t.texSubImage3D(a.TEXTURE_2D_ARRAY,We,0,0,0,ge.width,ge.height,Ne.depth,Je,Dt,ge.data):t.texImage3D(a.TEXTURE_2D_ARRAY,We,$,ge.width,ge.height,Ne.depth,0,Je,Dt,ge.data)}else{J&&Ve&&t.texStorage2D(a.TEXTURE_2D,Ge,$,ze[0].width,ze[0].height);for(let We=0,ke=ze.length;We<ke;We++)ge=ze[We],O.format!==$i?Je!==null?J?He&&t.compressedTexSubImage2D(a.TEXTURE_2D,We,0,0,ge.width,ge.height,Je,ge.data):t.compressedTexImage2D(a.TEXTURE_2D,We,$,ge.width,ge.height,0,ge.data):ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):J?He&&t.texSubImage2D(a.TEXTURE_2D,We,0,0,ge.width,ge.height,Je,Dt,ge.data):t.texImage2D(a.TEXTURE_2D,We,$,ge.width,ge.height,0,Je,Dt,ge.data)}else if(O.isDataArrayTexture)if(J){if(Ve&&t.texStorage3D(a.TEXTURE_2D_ARRAY,Ge,$,Ne.width,Ne.height,Ne.depth),He)if(O.layerUpdates.size>0){const We=Hy(Ne.width,Ne.height,O.format,O.type);for(const ke of O.layerUpdates){const lt=Ne.data.subarray(ke*We/Ne.data.BYTES_PER_ELEMENT,(ke+1)*We/Ne.data.BYTES_PER_ELEMENT);t.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,ke,Ne.width,Ne.height,1,Je,Dt,lt)}O.clearLayerUpdates()}else t.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,Ne.width,Ne.height,Ne.depth,Je,Dt,Ne.data)}else t.texImage3D(a.TEXTURE_2D_ARRAY,0,$,Ne.width,Ne.height,Ne.depth,0,Je,Dt,Ne.data);else if(O.isData3DTexture)J?(Ve&&t.texStorage3D(a.TEXTURE_3D,Ge,$,Ne.width,Ne.height,Ne.depth),He&&t.texSubImage3D(a.TEXTURE_3D,0,0,0,0,Ne.width,Ne.height,Ne.depth,Je,Dt,Ne.data)):t.texImage3D(a.TEXTURE_3D,0,$,Ne.width,Ne.height,Ne.depth,0,Je,Dt,Ne.data);else if(O.isFramebufferTexture){if(Ve)if(J)t.texStorage2D(a.TEXTURE_2D,Ge,$,Ne.width,Ne.height);else{let We=Ne.width,ke=Ne.height;for(let lt=0;lt<Ge;lt++)t.texImage2D(a.TEXTURE_2D,lt,$,We,ke,0,Je,Dt,null),We>>=1,ke>>=1}}else if(ze.length>0){if(J&&Ve){const We=ht(ze[0]);t.texStorage2D(a.TEXTURE_2D,Ge,$,We.width,We.height)}for(let We=0,ke=ze.length;We<ke;We++)ge=ze[We],J?He&&t.texSubImage2D(a.TEXTURE_2D,We,0,0,Je,Dt,ge):t.texImage2D(a.TEXTURE_2D,We,$,Je,Dt,ge);O.generateMipmaps=!1}else if(J){if(Ve){const We=ht(Ne);t.texStorage2D(a.TEXTURE_2D,Ge,$,We.width,We.height)}He&&t.texSubImage2D(a.TEXTURE_2D,0,0,0,Je,Dt,Ne)}else t.texImage2D(a.TEXTURE_2D,0,$,Je,Dt,Ne);T(O)&&w(Te),Mt.__version=Se.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}function be(W,O,ue){if(O.image.length!==6)return;const Te=Ce(W,O),Re=O.source;t.bindTexture(a.TEXTURE_CUBE_MAP,W.__webglTexture,a.TEXTURE0+ue);const Se=n.get(Re);if(Re.version!==Se.__version||Te===!0){t.activeTexture(a.TEXTURE0+ue);const Mt=pn.getPrimaries(pn.workingColorSpace),et=O.colorSpace===so?null:pn.getPrimaries(O.colorSpace),Tt=O.colorSpace===so||Mt===et?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,O.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,O.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,Tt);const wt=O.isCompressedTexture||O.image[0].isCompressedTexture,Ne=O.image[0]&&O.image[0].isDataTexture,Je=[];for(let ke=0;ke<6;ke++)!wt&&!Ne?Je[ke]=A(O.image[ke],!0,i.maxCubemapSize):Je[ke]=Ne?O.image[ke].image:O.image[ke],Je[ke]=$e(O,Je[ke]);const Dt=Je[0],$=s.convert(O.format,O.colorSpace),ge=s.convert(O.type),ze=R(O.internalFormat,$,ge,O.colorSpace),J=O.isVideoTexture!==!0,Ve=Se.__version===void 0||Te===!0,He=Re.dataReady;let Ge=F(O,Dt);ie(a.TEXTURE_CUBE_MAP,O);let We;if(wt){J&&Ve&&t.texStorage2D(a.TEXTURE_CUBE_MAP,Ge,ze,Dt.width,Dt.height);for(let ke=0;ke<6;ke++){We=Je[ke].mipmaps;for(let lt=0;lt<We.length;lt++){const Pt=We[lt];O.format!==$i?$!==null?J?He&&t.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,lt,0,0,Pt.width,Pt.height,$,Pt.data):t.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,lt,ze,Pt.width,Pt.height,0,Pt.data):ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):J?He&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,lt,0,0,Pt.width,Pt.height,$,ge,Pt.data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,lt,ze,Pt.width,Pt.height,0,$,ge,Pt.data)}}}else{if(We=O.mipmaps,J&&Ve){We.length>0&&Ge++;const ke=ht(Je[0]);t.texStorage2D(a.TEXTURE_CUBE_MAP,Ge,ze,ke.width,ke.height)}for(let ke=0;ke<6;ke++)if(Ne){J?He&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,Je[ke].width,Je[ke].height,$,ge,Je[ke].data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,ze,Je[ke].width,Je[ke].height,0,$,ge,Je[ke].data);for(let lt=0;lt<We.length;lt++){const un=We[lt].image[ke].image;J?He&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,lt+1,0,0,un.width,un.height,$,ge,un.data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,lt+1,ze,un.width,un.height,0,$,ge,un.data)}}else{J?He&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,$,ge,Je[ke]):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,ze,$,ge,Je[ke]);for(let lt=0;lt<We.length;lt++){const Pt=We[lt];J?He&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,lt+1,0,0,$,ge,Pt.image[ke]):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+ke,lt+1,ze,$,ge,Pt.image[ke])}}}T(O)&&w(a.TEXTURE_CUBE_MAP),Se.__version=Re.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}function Fe(W,O,ue,Te,Re,Se){const Mt=s.convert(ue.format,ue.colorSpace),et=s.convert(ue.type),Tt=R(ue.internalFormat,Mt,et,ue.colorSpace),wt=n.get(O),Ne=n.get(ue);if(Ne.__renderTarget=O,!wt.__hasExternalTextures){const Je=Math.max(1,O.width>>Se),Dt=Math.max(1,O.height>>Se);Re===a.TEXTURE_3D||Re===a.TEXTURE_2D_ARRAY?t.texImage3D(Re,Se,Tt,Je,Dt,O.depth,0,Mt,et,null):t.texImage2D(Re,Se,Tt,Je,Dt,0,Mt,et,null)}t.bindFramebuffer(a.FRAMEBUFFER,W),Oe(O)?c.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,Te,Re,Ne.__webglTexture,0,Ke(O)):(Re===a.TEXTURE_2D||Re>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,Te,Re,Ne.__webglTexture,Se),t.bindFramebuffer(a.FRAMEBUFFER,null)}function it(W,O,ue){if(a.bindRenderbuffer(a.RENDERBUFFER,W),O.depthBuffer){const Te=O.depthTexture,Re=Te&&Te.isDepthTexture?Te.type:null,Se=P(O.stencilBuffer,Re),Mt=O.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,et=Ke(O);Oe(O)?c.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,et,Se,O.width,O.height):ue?a.renderbufferStorageMultisample(a.RENDERBUFFER,et,Se,O.width,O.height):a.renderbufferStorage(a.RENDERBUFFER,Se,O.width,O.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,Mt,a.RENDERBUFFER,W)}else{const Te=O.textures;for(let Re=0;Re<Te.length;Re++){const Se=Te[Re],Mt=s.convert(Se.format,Se.colorSpace),et=s.convert(Se.type),Tt=R(Se.internalFormat,Mt,et,Se.colorSpace),wt=Ke(O);ue&&Oe(O)===!1?a.renderbufferStorageMultisample(a.RENDERBUFFER,wt,Tt,O.width,O.height):Oe(O)?c.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,wt,Tt,O.width,O.height):a.renderbufferStorage(a.RENDERBUFFER,Tt,O.width,O.height)}}a.bindRenderbuffer(a.RENDERBUFFER,null)}function st(W,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(a.FRAMEBUFFER,W),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Te=n.get(O.depthTexture);Te.__renderTarget=O,(!Te.__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),fe(O.depthTexture,0);const Re=Te.__webglTexture,Se=Ke(O);if(O.depthTexture.format===mc)Oe(O)?c.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,Re,0,Se):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,Re,0);else if(O.depthTexture.format===gc)Oe(O)?c.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,Re,0,Se):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function Lt(W){const O=n.get(W),ue=W.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==W.depthTexture){const Te=W.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),Te){const Re=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,Te.removeEventListener("dispose",Re)};Te.addEventListener("dispose",Re),O.__depthDisposeCallback=Re}O.__boundDepthTexture=Te}if(W.depthTexture&&!O.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");const Te=W.texture.mipmaps;Te&&Te.length>0?st(O.__webglFramebuffer[0],W):st(O.__webglFramebuffer,W)}else if(ue){O.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)if(t.bindFramebuffer(a.FRAMEBUFFER,O.__webglFramebuffer[Te]),O.__webglDepthbuffer[Te]===void 0)O.__webglDepthbuffer[Te]=a.createRenderbuffer(),it(O.__webglDepthbuffer[Te],W,!1);else{const Re=W.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Se=O.__webglDepthbuffer[Te];a.bindRenderbuffer(a.RENDERBUFFER,Se),a.framebufferRenderbuffer(a.FRAMEBUFFER,Re,a.RENDERBUFFER,Se)}}else{const Te=W.texture.mipmaps;if(Te&&Te.length>0?t.bindFramebuffer(a.FRAMEBUFFER,O.__webglFramebuffer[0]):t.bindFramebuffer(a.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=a.createRenderbuffer(),it(O.__webglDepthbuffer,W,!1);else{const Re=W.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Se=O.__webglDepthbuffer;a.bindRenderbuffer(a.RENDERBUFFER,Se),a.framebufferRenderbuffer(a.FRAMEBUFFER,Re,a.RENDERBUFFER,Se)}}t.bindFramebuffer(a.FRAMEBUFFER,null)}function on(W,O,ue){const Te=n.get(W);O!==void 0&&Fe(Te.__webglFramebuffer,W,W.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,0),ue!==void 0&&Lt(W)}function yt(W){const O=W.texture,ue=n.get(W),Te=n.get(O);W.addEventListener("dispose",z);const Re=W.textures,Se=W.isWebGLCubeRenderTarget===!0,Mt=Re.length>1;if(Mt||(Te.__webglTexture===void 0&&(Te.__webglTexture=a.createTexture()),Te.__version=O.version,u.memory.textures++),Se){ue.__webglFramebuffer=[];for(let et=0;et<6;et++)if(O.mipmaps&&O.mipmaps.length>0){ue.__webglFramebuffer[et]=[];for(let Tt=0;Tt<O.mipmaps.length;Tt++)ue.__webglFramebuffer[et][Tt]=a.createFramebuffer()}else ue.__webglFramebuffer[et]=a.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){ue.__webglFramebuffer=[];for(let et=0;et<O.mipmaps.length;et++)ue.__webglFramebuffer[et]=a.createFramebuffer()}else ue.__webglFramebuffer=a.createFramebuffer();if(Mt)for(let et=0,Tt=Re.length;et<Tt;et++){const wt=n.get(Re[et]);wt.__webglTexture===void 0&&(wt.__webglTexture=a.createTexture(),u.memory.textures++)}if(W.samples>0&&Oe(W)===!1){ue.__webglMultisampledFramebuffer=a.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(a.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let et=0;et<Re.length;et++){const Tt=Re[et];ue.__webglColorRenderbuffer[et]=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,ue.__webglColorRenderbuffer[et]);const wt=s.convert(Tt.format,Tt.colorSpace),Ne=s.convert(Tt.type),Je=R(Tt.internalFormat,wt,Ne,Tt.colorSpace,W.isXRRenderTarget===!0),Dt=Ke(W);a.renderbufferStorageMultisample(a.RENDERBUFFER,Dt,Je,W.width,W.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+et,a.RENDERBUFFER,ue.__webglColorRenderbuffer[et])}a.bindRenderbuffer(a.RENDERBUFFER,null),W.depthBuffer&&(ue.__webglDepthRenderbuffer=a.createRenderbuffer(),it(ue.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(a.FRAMEBUFFER,null)}}if(Se){t.bindTexture(a.TEXTURE_CUBE_MAP,Te.__webglTexture),ie(a.TEXTURE_CUBE_MAP,O);for(let et=0;et<6;et++)if(O.mipmaps&&O.mipmaps.length>0)for(let Tt=0;Tt<O.mipmaps.length;Tt++)Fe(ue.__webglFramebuffer[et][Tt],W,O,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+et,Tt);else Fe(ue.__webglFramebuffer[et],W,O,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);T(O)&&w(a.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Mt){for(let et=0,Tt=Re.length;et<Tt;et++){const wt=Re[et],Ne=n.get(wt);let Je=a.TEXTURE_2D;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(Je=W.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),t.bindTexture(Je,Ne.__webglTexture),ie(Je,wt),Fe(ue.__webglFramebuffer,W,wt,a.COLOR_ATTACHMENT0+et,Je,0),T(wt)&&w(Je)}t.unbindTexture()}else{let et=a.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(et=W.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),t.bindTexture(et,Te.__webglTexture),ie(et,O),O.mipmaps&&O.mipmaps.length>0)for(let Tt=0;Tt<O.mipmaps.length;Tt++)Fe(ue.__webglFramebuffer[Tt],W,O,a.COLOR_ATTACHMENT0,et,Tt);else Fe(ue.__webglFramebuffer,W,O,a.COLOR_ATTACHMENT0,et,0);T(O)&&w(et),t.unbindTexture()}W.depthBuffer&&Lt(W)}function Pe(W){const O=W.textures;for(let ue=0,Te=O.length;ue<Te;ue++){const Re=O[ue];if(T(Re)){const Se=C(W),Mt=n.get(Re).__webglTexture;t.bindTexture(Se,Mt),w(Se),t.unbindTexture()}}}const X=[],Le=[];function Be(W){if(W.samples>0){if(Oe(W)===!1){const O=W.textures,ue=W.width,Te=W.height;let Re=a.COLOR_BUFFER_BIT;const Se=W.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Mt=n.get(W),et=O.length>1;if(et)for(let wt=0;wt<O.length;wt++)t.bindFramebuffer(a.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+wt,a.RENDERBUFFER,null),t.bindFramebuffer(a.FRAMEBUFFER,Mt.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+wt,a.TEXTURE_2D,null,0);t.bindFramebuffer(a.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);const Tt=W.texture.mipmaps;Tt&&Tt.length>0?t.bindFramebuffer(a.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer[0]):t.bindFramebuffer(a.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let wt=0;wt<O.length;wt++){if(W.resolveDepthBuffer&&(W.depthBuffer&&(Re|=a.DEPTH_BUFFER_BIT),W.stencilBuffer&&W.resolveStencilBuffer&&(Re|=a.STENCIL_BUFFER_BIT)),et){a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,Mt.__webglColorRenderbuffer[wt]);const Ne=n.get(O[wt]).__webglTexture;a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Ne,0)}a.blitFramebuffer(0,0,ue,Te,0,0,ue,Te,Re,a.NEAREST),f===!0&&(X.length=0,Le.length=0,X.push(a.COLOR_ATTACHMENT0+wt),W.depthBuffer&&W.resolveDepthBuffer===!1&&(X.push(Se),Le.push(Se),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,Le)),a.invalidateFramebuffer(a.READ_FRAMEBUFFER,X))}if(t.bindFramebuffer(a.READ_FRAMEBUFFER,null),t.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),et)for(let wt=0;wt<O.length;wt++){t.bindFramebuffer(a.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+wt,a.RENDERBUFFER,Mt.__webglColorRenderbuffer[wt]);const Ne=n.get(O[wt]).__webglTexture;t.bindFramebuffer(a.FRAMEBUFFER,Mt.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+wt,a.TEXTURE_2D,Ne,0)}t.bindFramebuffer(a.DRAW_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else if(W.depthBuffer&&W.resolveDepthBuffer===!1&&f){const O=W.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT;a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[O])}}}function Ke(W){return Math.min(i.maxSamples,W.samples)}function Oe(W){const O=n.get(W);return W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function ot(W){const O=u.render.frame;m.get(W)!==O&&(m.set(W,O),W.update())}function $e(W,O){const ue=W.colorSpace,Te=W.format,Re=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||ue!==Eu&&ue!==so&&(pn.getTransfer(ue)===Tn?(Te!==$i||Re!==ga)&&ft("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Wt("WebGLTextures: Unsupported texture color space:",ue)),O}function ht(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(p.width=W.naturalWidth||W.width,p.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(p.width=W.displayWidth,p.height=W.displayHeight):(p.width=W.width,p.height=W.height),p}this.allocateTextureUnit=ne,this.resetTextureUnits=ee,this.setTexture2D=fe,this.setTexture2DArray=ye,this.setTexture3D=we,this.setTextureCube=B,this.rebindTextures=on,this.setupRenderTarget=yt,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=Be,this.setupDepthRenderbuffer=Lt,this.setupFrameBufferTexture=Fe,this.useMultisampledRTT=Oe}function ww(a,e){function t(n,i=so){let s;const u=pn.getTransfer(i);if(n===ga)return a.UNSIGNED_BYTE;if(n===dg)return a.UNSIGNED_SHORT_4_4_4_4;if(n===fg)return a.UNSIGNED_SHORT_5_5_5_1;if(n===Qy)return a.UNSIGNED_INT_5_9_9_9_REV;if(n===$y)return a.UNSIGNED_INT_10F_11F_11F_REV;if(n===Zy)return a.BYTE;if(n===Jy)return a.SHORT;if(n===fc)return a.UNSIGNED_SHORT;if(n===cg)return a.INT;if(n===co)return a.UNSIGNED_INT;if(n===vr)return a.FLOAT;if(n===ll)return a.HALF_FLOAT;if(n===e0)return a.ALPHA;if(n===t0)return a.RGB;if(n===$i)return a.RGBA;if(n===mc)return a.DEPTH_COMPONENT;if(n===gc)return a.DEPTH_STENCIL;if(n===pg)return a.RED;if(n===gf)return a.RED_INTEGER;if(n===mg)return a.RG;if(n===gg)return a.RG_INTEGER;if(n===vg)return a.RGBA_INTEGER;if(n===Gd||n===Wd||n===Xd||n===Yd)if(u===Tn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Gd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Wd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Xd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Yd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Gd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Wd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Xd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Yd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Em||n===Am||n===km||n===Cm)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Em)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Am)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===km)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Cm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Rm||n===Im||n===Pm)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===Rm||n===Im)return u===Tn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Pm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Lm||n===Nm||n===Dm||n===Om||n===Um||n===Fm||n===Bm||n===zm||n===Vm||n===Hm||n===jm||n===Gm||n===Wm||n===Xm)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Lm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Nm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Dm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Om)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Um)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Fm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Bm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===zm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Vm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Hm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===jm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Gm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Wm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Xm)return u===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Ym||n===qm||n===Km)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Ym)return u===Tn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===qm)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Km)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Zm||n===Jm||n===Qm||n===$m)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Zm)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Jm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Qm)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===$m)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===pc?a.UNSIGNED_INT_24_8:a[n]!==void 0?a[n]:null}return{convert:t}}const VC=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,HC=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class jC{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new d0(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new va({vertexShader:VC,fragmentShader:HC,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new _i(new Ec(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class GC extends ys{constructor(e,t){super();const n=this;let i=null,s=1,u=null,c="local-floor",f=1,p=null,m=null,v=null,x=null,_=null,S=null;const A=typeof XRWebGLBinding<"u",T=new jC,w={},C=t.getContextAttributes();let R=null,P=null;const F=[],N=[],z=new Ae;let G=null;const D=new ii;D.viewport=new vn;const L=new ii;L.viewport=new vn;const H=[D,L],ee=new cw;let ne=null,me=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let be=F[he];return be===void 0&&(be=new pm,F[he]=be),be.getTargetRaySpace()},this.getControllerGrip=function(he){let be=F[he];return be===void 0&&(be=new pm,F[he]=be),be.getGripSpace()},this.getHand=function(he){let be=F[he];return be===void 0&&(be=new pm,F[he]=be),be.getHandSpace()};function fe(he){const be=N.indexOf(he.inputSource);if(be===-1)return;const Fe=F[be];Fe!==void 0&&(Fe.update(he.inputSource,he.frame,p||u),Fe.dispatchEvent({type:he.type,data:he.inputSource}))}function ye(){i.removeEventListener("select",fe),i.removeEventListener("selectstart",fe),i.removeEventListener("selectend",fe),i.removeEventListener("squeeze",fe),i.removeEventListener("squeezestart",fe),i.removeEventListener("squeezeend",fe),i.removeEventListener("end",ye),i.removeEventListener("inputsourceschange",we);for(let he=0;he<F.length;he++){const be=N[he];be!==null&&(N[he]=null,F[he].disconnect(be))}ne=null,me=null,T.reset();for(const he in w)delete w[he];e.setRenderTarget(R),_=null,x=null,v=null,i=null,P=null,at.stop(),n.isPresenting=!1,e.setPixelRatio(G),e.setSize(z.width,z.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,n.isPresenting===!0&&ft("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){c=he,n.isPresenting===!0&&ft("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||u},this.setReferenceSpace=function(he){p=he},this.getBaseLayer=function(){return x!==null?x:_},this.getBinding=function(){return v===null&&A&&(v=new XRWebGLBinding(i,t)),v},this.getFrame=function(){return S},this.getSession=function(){return i},this.setSession=async function(he){if(i=he,i!==null){if(R=e.getRenderTarget(),i.addEventListener("select",fe),i.addEventListener("selectstart",fe),i.addEventListener("selectend",fe),i.addEventListener("squeeze",fe),i.addEventListener("squeezestart",fe),i.addEventListener("squeezeend",fe),i.addEventListener("end",ye),i.addEventListener("inputsourceschange",we),C.xrCompatible!==!0&&await t.makeXRCompatible(),G=e.getPixelRatio(),e.getSize(z),A&&"createProjectionLayer"in XRWebGLBinding.prototype){let Fe=null,it=null,st=null;C.depth&&(st=C.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Fe=C.stencil?gc:mc,it=C.stencil?pc:co);const Lt={colorFormat:t.RGBA8,depthFormat:st,scaleFactor:s};v=this.getBinding(),x=v.createProjectionLayer(Lt),i.updateRenderState({layers:[x]}),e.setPixelRatio(1),e.setSize(x.textureWidth,x.textureHeight,!1),P=new Ka(x.textureWidth,x.textureHeight,{format:$i,type:ga,depthTexture:new Ag(x.textureWidth,x.textureHeight,it,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:C.stencil,colorSpace:e.outputColorSpace,samples:C.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const Fe={antialias:C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:s};_=new XRWebGLLayer(i,t,Fe),i.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),P=new Ka(_.framebufferWidth,_.framebufferHeight,{format:$i,type:ga,colorSpace:e.outputColorSpace,stencilBuffer:C.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}P.isXRRenderTarget=!0,this.setFoveation(f),p=null,u=await i.requestReferenceSpace(c),at.setContext(i),at.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function we(he){for(let be=0;be<he.removed.length;be++){const Fe=he.removed[be],it=N.indexOf(Fe);it>=0&&(N[it]=null,F[it].disconnect(Fe))}for(let be=0;be<he.added.length;be++){const Fe=he.added[be];let it=N.indexOf(Fe);if(it===-1){for(let Lt=0;Lt<F.length;Lt++)if(Lt>=N.length){N.push(Fe),it=Lt;break}else if(N[Lt]===null){N[Lt]=Fe,it=Lt;break}if(it===-1)break}const st=F[it];st&&st.connect(Fe)}}const B=new Y,Q=new Y;function K(he,be,Fe){B.setFromMatrixPosition(be.matrixWorld),Q.setFromMatrixPosition(Fe.matrixWorld);const it=B.distanceTo(Q),st=be.projectionMatrix.elements,Lt=Fe.projectionMatrix.elements,on=st[14]/(st[10]-1),yt=st[14]/(st[10]+1),Pe=(st[9]+1)/st[5],X=(st[9]-1)/st[5],Le=(st[8]-1)/st[0],Be=(Lt[8]+1)/Lt[0],Ke=on*Le,Oe=on*Be,ot=it/(-Le+Be),$e=ot*-Le;if(be.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX($e),he.translateZ(ot),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert(),st[10]===-1)he.projectionMatrix.copy(be.projectionMatrix),he.projectionMatrixInverse.copy(be.projectionMatrixInverse);else{const ht=on+ot,W=yt+ot,O=Ke-$e,ue=Oe+(it-$e),Te=Pe*yt/W*ht,Re=X*yt/W*ht;he.projectionMatrix.makePerspective(O,ue,Te,Re,ht,W),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}}function j(he,be){be===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(be.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(i===null)return;let be=he.near,Fe=he.far;T.texture!==null&&(T.depthNear>0&&(be=T.depthNear),T.depthFar>0&&(Fe=T.depthFar)),ee.near=L.near=D.near=be,ee.far=L.far=D.far=Fe,(ne!==ee.near||me!==ee.far)&&(i.updateRenderState({depthNear:ee.near,depthFar:ee.far}),ne=ee.near,me=ee.far),ee.layers.mask=he.layers.mask|6,D.layers.mask=ee.layers.mask&3,L.layers.mask=ee.layers.mask&5;const it=he.parent,st=ee.cameras;j(ee,it);for(let Lt=0;Lt<st.length;Lt++)j(st[Lt],it);st.length===2?K(ee,D,L):ee.projectionMatrix.copy(D.projectionMatrix),ie(he,ee,it)};function ie(he,be,Fe){Fe===null?he.matrix.copy(be.matrixWorld):(he.matrix.copy(Fe.matrixWorld),he.matrix.invert(),he.matrix.multiply(be.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(be.projectionMatrix),he.projectionMatrixInverse.copy(be.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=xc*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return ee},this.getFoveation=function(){if(!(x===null&&_===null))return f},this.setFoveation=function(he){f=he,x!==null&&(x.fixedFoveation=he),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=he)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(ee)},this.getCameraTexture=function(he){return w[he]};let Ce=null;function Ye(he,be){if(m=be.getViewerPose(p||u),S=be,m!==null){const Fe=m.views;_!==null&&(e.setRenderTargetFramebuffer(P,_.framebuffer),e.setRenderTarget(P));let it=!1;Fe.length!==ee.cameras.length&&(ee.cameras.length=0,it=!0);for(let yt=0;yt<Fe.length;yt++){const Pe=Fe[yt];let X=null;if(_!==null)X=_.getViewport(Pe);else{const Be=v.getViewSubImage(x,Pe);X=Be.viewport,yt===0&&(e.setRenderTargetTextures(P,Be.colorTexture,Be.depthStencilTexture),e.setRenderTarget(P))}let Le=H[yt];Le===void 0&&(Le=new ii,Le.layers.enable(yt),Le.viewport=new vn,H[yt]=Le),Le.matrix.fromArray(Pe.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(Pe.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(X.x,X.y,X.width,X.height),yt===0&&(ee.matrix.copy(Le.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale)),it===!0&&ee.cameras.push(Le)}const st=i.enabledFeatures;if(st&&st.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&A){v=n.getBinding();const yt=v.getDepthInformation(Fe[0]);yt&&yt.isValid&&yt.texture&&T.init(yt,i.renderState)}if(st&&st.includes("camera-access")&&A){e.state.unbindTexture(),v=n.getBinding();for(let yt=0;yt<Fe.length;yt++){const Pe=Fe[yt].camera;if(Pe){let X=w[Pe];X||(X=new d0,w[Pe]=X);const Le=v.getCameraImage(Pe);X.sourceTexture=Le}}}}for(let Fe=0;Fe<F.length;Fe++){const it=N[Fe],st=F[Fe];it!==null&&st!==void 0&&st.update(it,be,p||u)}Ce&&Ce(he,be),be.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:be}),S=null}const at=new vw;at.setAnimationLoop(Ye),this.setAnimationLoop=function(he){Ce=he},this.dispose=function(){}}}const fu=new ta,WC=new Ht;function XC(a,e){function t(T,w){T.matrixAutoUpdate===!0&&T.updateMatrix(),w.value.copy(T.matrix)}function n(T,w){w.color.getRGB(T.fogColor.value,g1(a)),w.isFog?(T.fogNear.value=w.near,T.fogFar.value=w.far):w.isFogExp2&&(T.fogDensity.value=w.density)}function i(T,w,C,R,P){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(T,w):w.isMeshToonMaterial?(s(T,w),v(T,w)):w.isMeshPhongMaterial?(s(T,w),m(T,w)):w.isMeshStandardMaterial?(s(T,w),x(T,w),w.isMeshPhysicalMaterial&&_(T,w,P)):w.isMeshMatcapMaterial?(s(T,w),S(T,w)):w.isMeshDepthMaterial?s(T,w):w.isMeshDistanceMaterial?(s(T,w),A(T,w)):w.isMeshNormalMaterial?s(T,w):w.isLineBasicMaterial?(u(T,w),w.isLineDashedMaterial&&c(T,w)):w.isPointsMaterial?f(T,w,C,R):w.isSpriteMaterial?p(T,w):w.isShadowMaterial?(T.color.value.copy(w.color),T.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function s(T,w){T.opacity.value=w.opacity,w.color&&T.diffuse.value.copy(w.color),w.emissive&&T.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(T.map.value=w.map,t(w.map,T.mapTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,t(w.alphaMap,T.alphaMapTransform)),w.bumpMap&&(T.bumpMap.value=w.bumpMap,t(w.bumpMap,T.bumpMapTransform),T.bumpScale.value=w.bumpScale,w.side===yr&&(T.bumpScale.value*=-1)),w.normalMap&&(T.normalMap.value=w.normalMap,t(w.normalMap,T.normalMapTransform),T.normalScale.value.copy(w.normalScale),w.side===yr&&T.normalScale.value.negate()),w.displacementMap&&(T.displacementMap.value=w.displacementMap,t(w.displacementMap,T.displacementMapTransform),T.displacementScale.value=w.displacementScale,T.displacementBias.value=w.displacementBias),w.emissiveMap&&(T.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,T.emissiveMapTransform)),w.specularMap&&(T.specularMap.value=w.specularMap,t(w.specularMap,T.specularMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest);const C=e.get(w),R=C.envMap,P=C.envMapRotation;R&&(T.envMap.value=R,fu.copy(P),fu.x*=-1,fu.y*=-1,fu.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(fu.y*=-1,fu.z*=-1),T.envMapRotation.value.setFromMatrix4(WC.makeRotationFromEuler(fu)),T.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=w.reflectivity,T.ior.value=w.ior,T.refractionRatio.value=w.refractionRatio),w.lightMap&&(T.lightMap.value=w.lightMap,T.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,T.lightMapTransform)),w.aoMap&&(T.aoMap.value=w.aoMap,T.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,T.aoMapTransform))}function u(T,w){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,w.map&&(T.map.value=w.map,t(w.map,T.mapTransform))}function c(T,w){T.dashSize.value=w.dashSize,T.totalSize.value=w.dashSize+w.gapSize,T.scale.value=w.scale}function f(T,w,C,R){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,T.size.value=w.size*C,T.scale.value=R*.5,w.map&&(T.map.value=w.map,t(w.map,T.uvTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,t(w.alphaMap,T.alphaMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest)}function p(T,w){T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,T.rotation.value=w.rotation,w.map&&(T.map.value=w.map,t(w.map,T.mapTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,t(w.alphaMap,T.alphaMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest)}function m(T,w){T.specular.value.copy(w.specular),T.shininess.value=Math.max(w.shininess,1e-4)}function v(T,w){w.gradientMap&&(T.gradientMap.value=w.gradientMap)}function x(T,w){T.metalness.value=w.metalness,w.metalnessMap&&(T.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,T.metalnessMapTransform)),T.roughness.value=w.roughness,w.roughnessMap&&(T.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,T.roughnessMapTransform)),w.envMap&&(T.envMapIntensity.value=w.envMapIntensity)}function _(T,w,C){T.ior.value=w.ior,w.sheen>0&&(T.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),T.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(T.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,T.sheenColorMapTransform)),w.sheenRoughnessMap&&(T.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,T.sheenRoughnessMapTransform))),w.clearcoat>0&&(T.clearcoat.value=w.clearcoat,T.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(T.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,T.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(T.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===yr&&T.clearcoatNormalScale.value.negate())),w.dispersion>0&&(T.dispersion.value=w.dispersion),w.iridescence>0&&(T.iridescence.value=w.iridescence,T.iridescenceIOR.value=w.iridescenceIOR,T.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(T.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,T.iridescenceMapTransform)),w.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),w.transmission>0&&(T.transmission.value=w.transmission,T.transmissionSamplerMap.value=C.texture,T.transmissionSamplerSize.value.set(C.width,C.height),w.transmissionMap&&(T.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,T.transmissionMapTransform)),T.thickness.value=w.thickness,w.thicknessMap&&(T.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=w.attenuationDistance,T.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(T.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(T.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=w.specularIntensity,T.specularColor.value.copy(w.specularColor),w.specularColorMap&&(T.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,T.specularColorMapTransform)),w.specularIntensityMap&&(T.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,T.specularIntensityMapTransform))}function S(T,w){w.matcap&&(T.matcap.value=w.matcap)}function A(T,w){const C=e.get(w).light;T.referencePosition.value.setFromMatrixPosition(C.matrixWorld),T.nearDistance.value=C.shadow.camera.near,T.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function YC(a,e,t,n){let i={},s={},u=[];const c=a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS);function f(C,R){const P=R.program;n.uniformBlockBinding(C,P)}function p(C,R){let P=i[C.id];P===void 0&&(S(C),P=m(C),i[C.id]=P,C.addEventListener("dispose",T));const F=R.program;n.updateUBOMapping(C,F);const N=e.render.frame;s[C.id]!==N&&(x(C),s[C.id]=N)}function m(C){const R=v();C.__bindingPointIndex=R;const P=a.createBuffer(),F=C.__size,N=C.usage;return a.bindBuffer(a.UNIFORM_BUFFER,P),a.bufferData(a.UNIFORM_BUFFER,F,N),a.bindBuffer(a.UNIFORM_BUFFER,null),a.bindBufferBase(a.UNIFORM_BUFFER,R,P),P}function v(){for(let C=0;C<c;C++)if(u.indexOf(C)===-1)return u.push(C),C;return Wt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(C){const R=i[C.id],P=C.uniforms,F=C.__cache;a.bindBuffer(a.UNIFORM_BUFFER,R);for(let N=0,z=P.length;N<z;N++){const G=Array.isArray(P[N])?P[N]:[P[N]];for(let D=0,L=G.length;D<L;D++){const H=G[D];if(_(H,N,D,F)===!0){const ee=H.__offset,ne=Array.isArray(H.value)?H.value:[H.value];let me=0;for(let fe=0;fe<ne.length;fe++){const ye=ne[fe],we=A(ye);typeof ye=="number"||typeof ye=="boolean"?(H.__data[0]=ye,a.bufferSubData(a.UNIFORM_BUFFER,ee+me,H.__data)):ye.isMatrix3?(H.__data[0]=ye.elements[0],H.__data[1]=ye.elements[1],H.__data[2]=ye.elements[2],H.__data[3]=0,H.__data[4]=ye.elements[3],H.__data[5]=ye.elements[4],H.__data[6]=ye.elements[5],H.__data[7]=0,H.__data[8]=ye.elements[6],H.__data[9]=ye.elements[7],H.__data[10]=ye.elements[8],H.__data[11]=0):(ye.toArray(H.__data,me),me+=we.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,ee,H.__data)}}}a.bindBuffer(a.UNIFORM_BUFFER,null)}function _(C,R,P,F){const N=C.value,z=R+"_"+P;if(F[z]===void 0)return typeof N=="number"||typeof N=="boolean"?F[z]=N:F[z]=N.clone(),!0;{const G=F[z];if(typeof N=="number"||typeof N=="boolean"){if(G!==N)return F[z]=N,!0}else if(G.equals(N)===!1)return G.copy(N),!0}return!1}function S(C){const R=C.uniforms;let P=0;const F=16;for(let z=0,G=R.length;z<G;z++){const D=Array.isArray(R[z])?R[z]:[R[z]];for(let L=0,H=D.length;L<H;L++){const ee=D[L],ne=Array.isArray(ee.value)?ee.value:[ee.value];for(let me=0,fe=ne.length;me<fe;me++){const ye=ne[me],we=A(ye),B=P%F,Q=B%we.boundary,K=B+Q;P+=Q,K!==0&&F-K<we.storage&&(P+=F-K),ee.__data=new Float32Array(we.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=P,P+=we.storage}}}const N=P%F;return N>0&&(P+=F-N),C.__size=P,C.__cache={},this}function A(C){const R={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(R.boundary=4,R.storage=4):C.isVector2?(R.boundary=8,R.storage=8):C.isVector3||C.isColor?(R.boundary=16,R.storage=12):C.isVector4?(R.boundary=16,R.storage=16):C.isMatrix3?(R.boundary=48,R.storage=48):C.isMatrix4?(R.boundary=64,R.storage=64):C.isTexture?ft("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ft("WebGLRenderer: Unsupported uniform value type.",C),R}function T(C){const R=C.target;R.removeEventListener("dispose",T);const P=u.indexOf(R.__bindingPointIndex);u.splice(P,1),a.deleteBuffer(i[R.id]),delete i[R.id],delete s[R.id]}function w(){for(const C in i)a.deleteBuffer(i[C]);u=[],i={},s={}}return{bind:f,update:p,dispose:w}}const qC=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let ro=null;function KC(){return ro===null&&(ro=new qa(qC,32,32,mg,ll),ro.minFilter=Wn,ro.magFilter=Wn,ro.wrapS=Or,ro.wrapT=Or,ro.generateMipmaps=!1,ro.needsUpdate=!0),ro}class Sw{constructor(e={}){const{canvas:t=d1(),context:n=null,depth:i=!0,stencil:s=!1,alpha:u=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:p=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:v=!1,reversedDepthBuffer:x=!1}=e;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=u;const S=new Set([vg,gg,gf]),A=new Set([ga,co,fc,pc,dg,fg]),T=new Uint32Array(4),w=new Int32Array(4);let C=null,R=null;const P=[],F=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=vs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const N=this;let z=!1;this._outputColorSpace=Nr;let G=0,D=0,L=null,H=-1,ee=null;const ne=new vn,me=new vn;let fe=null;const ye=new xt(0);let we=0,B=t.width,Q=t.height,K=1,j=null,ie=null;const Ce=new vn(0,0,B,Q),Ye=new vn(0,0,B,Q);let at=!1;const he=new Tc;let be=!1,Fe=!1;const it=new Ht,st=new Y,Lt=new vn,on={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let yt=!1;function Pe(){return L===null?K:1}let X=n;function Le(V,oe){return t.getContext(V,oe)}try{const V={alpha:!0,depth:i,stencil:s,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:m,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${lg}`),t.addEventListener("webglcontextlost",We,!1),t.addEventListener("webglcontextrestored",ke,!1),t.addEventListener("webglcontextcreationerror",lt,!1),X===null){const oe="webgl2";if(X=Le(oe,V),X===null)throw Le(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw V("WebGLRenderer: "+V.message),V}let Be,Ke,Oe,ot,$e,ht,W,O,ue,Te,Re,Se,Mt,et,Tt,wt,Ne,Je,Dt,$,ge,ze,J,Ve;function He(){Be=new ak(X),Be.init(),ze=new ww(X,Be),Ke=new ZA(X,Be,e,ze),Oe=new BC(X,Be),Ke.reversedDepthBuffer&&x&&Oe.buffers.depth.setReversed(!0),ot=new lk(X),$e=new EC,ht=new zC(X,Be,Oe,$e,Ke,ze,ot),W=new QA(N),O=new rk(N),ue=new dT(X),J=new qA(X,ue),Te=new sk(X,ue,ot,J),Re=new hk(X,Te,ue,ot),Dt=new uk(X,Ke,ht),wt=new JA($e),Se=new TC(N,W,O,Be,Ke,J,wt),Mt=new XC(N,$e),et=new kC,Tt=new NC(Be),Je=new YA(N,W,O,Oe,Re,_,f),Ne=new UC(N,Re,Ke),Ve=new YC(X,ot,Ke,Oe),$=new KA(X,Be,ot),ge=new ok(X,Be,ot),ot.programs=Se.programs,N.capabilities=Ke,N.extensions=Be,N.properties=$e,N.renderLists=et,N.shadowMap=Ne,N.state=Oe,N.info=ot}He();const Ge=new GC(N,X);this.xr=Ge,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const V=Be.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=Be.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(V){V!==void 0&&(K=V,this.setSize(B,Q,!1))},this.getSize=function(V){return V.set(B,Q)},this.setSize=function(V,oe,ce=!0){if(Ge.isPresenting){ft("WebGLRenderer: Can't change size while VR device is presenting.");return}B=V,Q=oe,t.width=Math.floor(V*K),t.height=Math.floor(oe*K),ce===!0&&(t.style.width=V+"px",t.style.height=oe+"px"),this.setViewport(0,0,V,oe)},this.getDrawingBufferSize=function(V){return V.set(B*K,Q*K).floor()},this.setDrawingBufferSize=function(V,oe,ce){B=V,Q=oe,K=ce,t.width=Math.floor(V*ce),t.height=Math.floor(oe*ce),this.setViewport(0,0,V,oe)},this.getCurrentViewport=function(V){return V.copy(ne)},this.getViewport=function(V){return V.copy(Ce)},this.setViewport=function(V,oe,ce,xe){V.isVector4?Ce.set(V.x,V.y,V.z,V.w):Ce.set(V,oe,ce,xe),Oe.viewport(ne.copy(Ce).multiplyScalar(K).round())},this.getScissor=function(V){return V.copy(Ye)},this.setScissor=function(V,oe,ce,xe){V.isVector4?Ye.set(V.x,V.y,V.z,V.w):Ye.set(V,oe,ce,xe),Oe.scissor(me.copy(Ye).multiplyScalar(K).round())},this.getScissorTest=function(){return at},this.setScissorTest=function(V){Oe.setScissorTest(at=V)},this.setOpaqueSort=function(V){j=V},this.setTransparentSort=function(V){ie=V},this.getClearColor=function(V){return V.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor(...arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha(...arguments)},this.clear=function(V=!0,oe=!0,ce=!0){let xe=0;if(V){let le=!1;if(L!==null){const Ze=L.texture.format;le=S.has(Ze)}if(le){const Ze=L.texture.type,ut=A.has(Ze),bt=Je.getClearColor(),pt=Je.getClearAlpha(),kt=bt.r,tt=bt.g,rt=bt.b;ut?(T[0]=kt,T[1]=tt,T[2]=rt,T[3]=pt,X.clearBufferuiv(X.COLOR,0,T)):(w[0]=kt,w[1]=tt,w[2]=rt,w[3]=pt,X.clearBufferiv(X.COLOR,0,w))}else xe|=X.COLOR_BUFFER_BIT}oe&&(xe|=X.DEPTH_BUFFER_BIT),ce&&(xe|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",We,!1),t.removeEventListener("webglcontextrestored",ke,!1),t.removeEventListener("webglcontextcreationerror",lt,!1),Je.dispose(),et.dispose(),Tt.dispose(),$e.dispose(),W.dispose(),O.dispose(),Re.dispose(),J.dispose(),Ve.dispose(),Se.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",Ja),Ge.removeEventListener("sessionend",pl),Ri.stop()};function We(V){V.preventDefault(),of("WebGLRenderer: Context Lost."),z=!0}function ke(){of("WebGLRenderer: Context Restored."),z=!1;const V=ot.autoReset,oe=Ne.enabled,ce=Ne.autoUpdate,xe=Ne.needsUpdate,le=Ne.type;He(),ot.autoReset=V,Ne.enabled=oe,Ne.autoUpdate=ce,Ne.needsUpdate=xe,Ne.type=le}function lt(V){Wt("WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function Pt(V){const oe=V.target;oe.removeEventListener("dispose",Pt),un(oe)}function un(V){en(V),$e.remove(V)}function en(V){const oe=$e.get(V).programs;oe!==void 0&&(oe.forEach(function(ce){Se.releaseProgram(ce)}),V.isShaderMaterial&&Se.releaseShaderCache(V))}this.renderBufferDirect=function(V,oe,ce,xe,le,Ze){oe===null&&(oe=on);const ut=le.isMesh&&le.matrixWorld.determinant()<0,bt=Nu(V,oe,ce,xe,le);Oe.setMaterial(xe,ut);let pt=ce.index,kt=1;if(xe.wireframe===!0){if(pt=Te.getWireframeAttribute(ce),pt===void 0)return;kt=2}const tt=ce.drawRange,rt=ce.attributes.position;let Nt=tt.start*kt,jt=(tt.start+tt.count)*kt;Ze!==null&&(Nt=Math.max(Nt,Ze.start*kt),jt=Math.min(jt,(Ze.start+Ze.count)*kt)),pt!==null?(Nt=Math.max(Nt,0),jt=Math.min(jt,pt.count)):rt!=null&&(Nt=Math.max(Nt,0),jt=Math.min(jt,rt.count));const an=jt-Nt;if(an<0||an===1/0)return;J.setup(le,xe,bt,ce,pt);let xn,sn=$;if(pt!==null&&(xn=ue.get(pt),sn=ge,sn.setIndex(xn)),le.isMesh)xe.wireframe===!0?(Oe.setLineWidth(xe.wireframeLinewidth*Pe()),sn.setMode(X.LINES)):sn.setMode(X.TRIANGLES);else if(le.isLine){let gt=xe.linewidth;gt===void 0&&(gt=1),Oe.setLineWidth(gt*Pe()),le.isLineSegments?sn.setMode(X.LINES):le.isLineLoop?sn.setMode(X.LINE_LOOP):sn.setMode(X.LINE_STRIP)}else le.isPoints?sn.setMode(X.POINTS):le.isSprite&&sn.setMode(X.TRIANGLES);if(le.isBatchedMesh)if(le._multiDrawInstances!==null)yc("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),sn.renderMultiDrawInstances(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount,le._multiDrawInstances);else if(Be.get("WEBGL_multi_draw"))sn.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else{const gt=le._multiDrawStarts,dn=le._multiDrawCounts,rn=le._multiDrawCount,Si=pt?ue.get(pt).bytesPerElement:1,Br=$e.get(xe).currentProgram.getUniforms();for(let ri=0;ri<rn;ri++)Br.setValue(X,"_gl_DrawID",ri),sn.render(gt[ri]/Si,dn[ri])}else if(le.isInstancedMesh)sn.renderInstances(Nt,an,le.count);else if(ce.isInstancedBufferGeometry){const gt=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,dn=Math.min(ce.instanceCount,gt);sn.renderInstances(Nt,an,dn)}else sn.render(Nt,an)};function Xn(V,oe,ce){V.transparent===!0&&V.side===ma&&V.forceSinglePass===!1?(V.side=yr,V.needsUpdate=!0,go(V,oe,ce),V.side=uo,V.needsUpdate=!0,go(V,oe,ce),V.side=ma):go(V,oe,ce)}this.compile=function(V,oe,ce=null){ce===null&&(ce=V),R=Tt.get(ce),R.init(oe),F.push(R),ce.traverseVisible(function(le){le.isLight&&le.layers.test(oe.layers)&&(R.pushLight(le),le.castShadow&&R.pushShadow(le))}),V!==ce&&V.traverseVisible(function(le){le.isLight&&le.layers.test(oe.layers)&&(R.pushLight(le),le.castShadow&&R.pushShadow(le))}),R.setupLights();const xe=new Set;return V.traverse(function(le){if(!(le.isMesh||le.isPoints||le.isLine||le.isSprite))return;const Ze=le.material;if(Ze)if(Array.isArray(Ze))for(let ut=0;ut<Ze.length;ut++){const bt=Ze[ut];Xn(bt,ce,le),xe.add(bt)}else Xn(Ze,ce,le),xe.add(Ze)}),R=F.pop(),xe},this.compileAsync=function(V,oe,ce=null){const xe=this.compile(V,oe,ce);return new Promise(le=>{function Ze(){if(xe.forEach(function(ut){$e.get(ut).currentProgram.isReady()&&xe.delete(ut)}),xe.size===0){le(V);return}setTimeout(Ze,10)}Be.get("KHR_parallel_shader_compile")!==null?Ze():setTimeout(Ze,10)})};let Un=null;function fl(V){Un&&Un(V)}function Ja(){Ri.stop()}function pl(){Ri.start()}const Ri=new vw;Ri.setAnimationLoop(fl),typeof self<"u"&&Ri.setContext(self),this.setAnimationLoop=function(V){Un=V,Ge.setAnimationLoop(V),V===null?Ri.stop():Ri.start()},Ge.addEventListener("sessionstart",Ja),Ge.addEventListener("sessionend",pl),this.render=function(V,oe){if(oe!==void 0&&oe.isCamera!==!0){Wt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(z===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(oe),oe=Ge.getCamera()),V.isScene===!0&&V.onBeforeRender(N,V,oe,L),R=Tt.get(V,F.length),R.init(oe),F.push(R),it.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),he.setFromProjectionMatrix(it,$r,oe.reversedDepth),Fe=this.localClippingEnabled,be=wt.init(this.clippingPlanes,Fe),C=et.get(V,P.length),C.init(),P.push(C),Ge.enabled===!0&&Ge.isPresenting===!0){const Ze=N.xr.getDepthSensingMesh();Ze!==null&&Qa(Ze,oe,-1/0,N.sortObjects)}Qa(V,oe,0,N.sortObjects),C.finish(),N.sortObjects===!0&&C.sort(j,ie),yt=Ge.enabled===!1||Ge.isPresenting===!1||Ge.hasDepthSensing()===!1,yt&&Je.addToRenderList(C,V),this.info.render.frame++,be===!0&&wt.beginShadows();const ce=R.state.shadowsArray;Ne.render(ce,V,oe),be===!0&&wt.endShadows(),this.info.autoReset===!0&&this.info.reset();const xe=C.opaque,le=C.transmissive;if(R.setupLights(),oe.isArrayCamera){const Ze=oe.cameras;if(le.length>0)for(let ut=0,bt=Ze.length;ut<bt;ut++){const pt=Ze[ut];po(xe,le,V,pt)}yt&&Je.render(V);for(let ut=0,bt=Ze.length;ut<bt;ut++){const pt=Ze[ut];Fr(C,V,pt,pt.viewport)}}else le.length>0&&po(xe,le,V,oe),yt&&Je.render(V),Fr(C,V,oe);L!==null&&D===0&&(ht.updateMultisampleRenderTarget(L),ht.updateRenderTargetMipmap(L)),V.isScene===!0&&V.onAfterRender(N,V,oe),J.resetDefaultState(),H=-1,ee=null,F.pop(),F.length>0?(R=F[F.length-1],be===!0&&wt.setGlobalState(N.clippingPlanes,R.state.camera)):R=null,P.pop(),P.length>0?C=P[P.length-1]:C=null};function Qa(V,oe,ce,xe){if(V.visible===!1)return;if(V.layers.test(oe.layers)){if(V.isGroup)ce=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(oe);else if(V.isLight)R.pushLight(V),V.castShadow&&R.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||he.intersectsSprite(V)){xe&&Lt.setFromMatrixPosition(V.matrixWorld).applyMatrix4(it);const ut=Re.update(V),bt=V.material;bt.visible&&C.push(V,ut,bt,ce,Lt.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||he.intersectsObject(V))){const ut=Re.update(V),bt=V.material;if(xe&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),Lt.copy(V.boundingSphere.center)):(ut.boundingSphere===null&&ut.computeBoundingSphere(),Lt.copy(ut.boundingSphere.center)),Lt.applyMatrix4(V.matrixWorld).applyMatrix4(it)),Array.isArray(bt)){const pt=ut.groups;for(let kt=0,tt=pt.length;kt<tt;kt++){const rt=pt[kt],Nt=bt[rt.materialIndex];Nt&&Nt.visible&&C.push(V,ut,Nt,ce,Lt.z,rt)}}else bt.visible&&C.push(V,ut,bt,ce,Lt.z,null)}}const Ze=V.children;for(let ut=0,bt=Ze.length;ut<bt;ut++)Qa(Ze[ut],oe,ce,xe)}function Fr(V,oe,ce,xe){const{opaque:le,transmissive:Ze,transparent:ut}=V;R.setupLightsView(ce),be===!0&&wt.setGlobalState(N.clippingPlanes,ce),xe&&Oe.viewport(ne.copy(xe)),le.length>0&&mo(le,oe,ce),Ze.length>0&&mo(Ze,oe,ce),ut.length>0&&mo(ut,oe,ce),Oe.buffers.depth.setTest(!0),Oe.buffers.depth.setMask(!0),Oe.buffers.color.setMask(!0),Oe.setPolygonOffset(!1)}function po(V,oe,ce,xe){if((ce.isScene===!0?ce.overrideMaterial:null)!==null)return;R.state.transmissionRenderTarget[xe.id]===void 0&&(R.state.transmissionRenderTarget[xe.id]=new Ka(1,1,{generateMipmaps:!0,type:Be.has("EXT_color_buffer_half_float")||Be.has("EXT_color_buffer_float")?ll:ga,minFilter:ps,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:pn.workingColorSpace}));const Ze=R.state.transmissionRenderTarget[xe.id],ut=xe.viewport||ne;Ze.setSize(ut.z*N.transmissionResolutionScale,ut.w*N.transmissionResolutionScale);const bt=N.getRenderTarget(),pt=N.getActiveCubeFace(),kt=N.getActiveMipmapLevel();N.setRenderTarget(Ze),N.getClearColor(ye),we=N.getClearAlpha(),we<1&&N.setClearColor(16777215,.5),N.clear(),yt&&Je.render(ce);const tt=N.toneMapping;N.toneMapping=vs;const rt=xe.viewport;if(xe.viewport!==void 0&&(xe.viewport=void 0),R.setupLightsView(xe),be===!0&&wt.setGlobalState(N.clippingPlanes,xe),mo(V,ce,xe),ht.updateMultisampleRenderTarget(Ze),ht.updateRenderTargetMipmap(Ze),Be.has("WEBGL_multisampled_render_to_texture")===!1){let Nt=!1;for(let jt=0,an=oe.length;jt<an;jt++){const xn=oe[jt],{object:sn,geometry:gt,material:dn,group:rn}=xn;if(dn.side===ma&&sn.layers.test(xe.layers)){const Si=dn.side;dn.side=yr,dn.needsUpdate=!0,Lu(sn,ce,xe,gt,dn,rn),dn.side=Si,dn.needsUpdate=!0,Nt=!0}}Nt===!0&&(ht.updateMultisampleRenderTarget(Ze),ht.updateRenderTargetMipmap(Ze))}N.setRenderTarget(bt,pt,kt),N.setClearColor(ye,we),rt!==void 0&&(xe.viewport=rt),N.toneMapping=tt}function mo(V,oe,ce){const xe=oe.isScene===!0?oe.overrideMaterial:null;for(let le=0,Ze=V.length;le<Ze;le++){const ut=V[le],{object:bt,geometry:pt,group:kt}=ut;let tt=ut.material;tt.allowOverride===!0&&xe!==null&&(tt=xe),bt.layers.test(ce.layers)&&Lu(bt,oe,ce,pt,tt,kt)}}function Lu(V,oe,ce,xe,le,Ze){V.onBeforeRender(N,oe,ce,xe,le,Ze),V.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),le.onBeforeRender(N,oe,ce,xe,V,Ze),le.transparent===!0&&le.side===ma&&le.forceSinglePass===!1?(le.side=yr,le.needsUpdate=!0,N.renderBufferDirect(ce,oe,xe,le,V,Ze),le.side=uo,le.needsUpdate=!0,N.renderBufferDirect(ce,oe,xe,le,V,Ze),le.side=ma):N.renderBufferDirect(ce,oe,xe,le,V,Ze),V.onAfterRender(N,oe,ce,xe,le,Ze)}function go(V,oe,ce){oe.isScene!==!0&&(oe=on);const xe=$e.get(V),le=R.state.lights,Ze=R.state.shadowsArray,ut=le.state.version,bt=Se.getParameters(V,le.state,Ze,oe,ce),pt=Se.getProgramCacheKey(bt);let kt=xe.programs;xe.environment=V.isMeshStandardMaterial?oe.environment:null,xe.fog=oe.fog,xe.envMap=(V.isMeshStandardMaterial?O:W).get(V.envMap||xe.environment),xe.envMapRotation=xe.environment!==null&&V.envMap===null?oe.environmentRotation:V.envMapRotation,kt===void 0&&(V.addEventListener("dispose",Pt),kt=new Map,xe.programs=kt);let tt=kt.get(pt);if(tt!==void 0){if(xe.currentProgram===tt&&xe.lightsStateVersion===ut)return ml(V,bt),tt}else bt.uniforms=Se.getUniforms(V),V.onBeforeCompile(bt,N),tt=Se.acquireProgram(bt,pt),kt.set(pt,tt),xe.uniforms=bt.uniforms;const rt=xe.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(rt.clippingPlanes=wt.uniform),ml(V,bt),xe.needsLights=Ou(V),xe.lightsStateVersion=ut,xe.needsLights&&(rt.ambientLightColor.value=le.state.ambient,rt.lightProbe.value=le.state.probe,rt.directionalLights.value=le.state.directional,rt.directionalLightShadows.value=le.state.directionalShadow,rt.spotLights.value=le.state.spot,rt.spotLightShadows.value=le.state.spotShadow,rt.rectAreaLights.value=le.state.rectArea,rt.ltc_1.value=le.state.rectAreaLTC1,rt.ltc_2.value=le.state.rectAreaLTC2,rt.pointLights.value=le.state.point,rt.pointLightShadows.value=le.state.pointShadow,rt.hemisphereLights.value=le.state.hemi,rt.directionalShadowMap.value=le.state.directionalShadowMap,rt.directionalShadowMatrix.value=le.state.directionalShadowMatrix,rt.spotShadowMap.value=le.state.spotShadowMap,rt.spotLightMatrix.value=le.state.spotLightMatrix,rt.spotLightMap.value=le.state.spotLightMap,rt.pointShadowMap.value=le.state.pointShadowMap,rt.pointShadowMatrix.value=le.state.pointShadowMatrix),xe.currentProgram=tt,xe.uniformsList=null,tt}function na(V){if(V.uniformsList===null){const oe=V.currentProgram.getUniforms();V.uniformsList=mm.seqWithValue(oe.seq,V.uniforms)}return V.uniformsList}function ml(V,oe){const ce=$e.get(V);ce.outputColorSpace=oe.outputColorSpace,ce.batching=oe.batching,ce.batchingColor=oe.batchingColor,ce.instancing=oe.instancing,ce.instancingColor=oe.instancingColor,ce.instancingMorph=oe.instancingMorph,ce.skinning=oe.skinning,ce.morphTargets=oe.morphTargets,ce.morphNormals=oe.morphNormals,ce.morphColors=oe.morphColors,ce.morphTargetsCount=oe.morphTargetsCount,ce.numClippingPlanes=oe.numClippingPlanes,ce.numIntersection=oe.numClipIntersection,ce.vertexAlphas=oe.vertexAlphas,ce.vertexTangents=oe.vertexTangents,ce.toneMapping=oe.toneMapping}function Nu(V,oe,ce,xe,le){oe.isScene!==!0&&(oe=on),ht.resetTextureUnits();const Ze=oe.fog,ut=xe.isMeshStandardMaterial?oe.environment:null,bt=L===null?N.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:Eu,pt=(xe.isMeshStandardMaterial?O:W).get(xe.envMap||ut),kt=xe.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,tt=!!ce.attributes.tangent&&(!!xe.normalMap||xe.anisotropy>0),rt=!!ce.morphAttributes.position,Nt=!!ce.morphAttributes.normal,jt=!!ce.morphAttributes.color;let an=vs;xe.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(an=N.toneMapping);const xn=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,sn=xn!==void 0?xn.length:0,gt=$e.get(xe),dn=R.state.lights;if(be===!0&&(Fe===!0||V!==ee)){const Fn=V===ee&&xe.id===H;wt.setState(xe,V,Fn)}let rn=!1;xe.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==dn.state.version||gt.outputColorSpace!==bt||le.isBatchedMesh&&gt.batching===!1||!le.isBatchedMesh&&gt.batching===!0||le.isBatchedMesh&&gt.batchingColor===!0&&le.colorTexture===null||le.isBatchedMesh&&gt.batchingColor===!1&&le.colorTexture!==null||le.isInstancedMesh&&gt.instancing===!1||!le.isInstancedMesh&&gt.instancing===!0||le.isSkinnedMesh&&gt.skinning===!1||!le.isSkinnedMesh&&gt.skinning===!0||le.isInstancedMesh&&gt.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&gt.instancingColor===!1&&le.instanceColor!==null||le.isInstancedMesh&&gt.instancingMorph===!0&&le.morphTexture===null||le.isInstancedMesh&&gt.instancingMorph===!1&&le.morphTexture!==null||gt.envMap!==pt||xe.fog===!0&&gt.fog!==Ze||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==wt.numPlanes||gt.numIntersection!==wt.numIntersection)||gt.vertexAlphas!==kt||gt.vertexTangents!==tt||gt.morphTargets!==rt||gt.morphNormals!==Nt||gt.morphColors!==jt||gt.toneMapping!==an||gt.morphTargetsCount!==sn)&&(rn=!0):(rn=!0,gt.__version=xe.version);let Si=gt.currentProgram;rn===!0&&(Si=go(xe,oe,le));let Br=!1,ri=!1,ai=!1;const Sn=Si.getUniforms(),Yn=gt.uniforms;if(Oe.useProgram(Si.program)&&(Br=!0,ri=!0,ai=!0),xe.id!==H&&(H=xe.id,ri=!0),Br||ee!==V){Oe.buffers.depth.getReversed()&&V.reversedDepth!==!0&&(V._reversedDepth=!0,V.updateProjectionMatrix()),Sn.setValue(X,"projectionMatrix",V.projectionMatrix),Sn.setValue(X,"viewMatrix",V.matrixWorldInverse);const zt=Sn.map.cameraPosition;zt!==void 0&&zt.setValue(X,st.setFromMatrixPosition(V.matrixWorld)),Ke.logarithmicDepthBuffer&&Sn.setValue(X,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&Sn.setValue(X,"isOrthographic",V.isOrthographicCamera===!0),ee!==V&&(ee=V,ri=!0,ai=!0)}if(le.isSkinnedMesh){Sn.setOptional(X,le,"bindMatrix"),Sn.setOptional(X,le,"bindMatrixInverse");const Fn=le.skeleton;Fn&&(Fn.boneTexture===null&&Fn.computeBoneTexture(),Sn.setValue(X,"boneTexture",Fn.boneTexture,ht))}le.isBatchedMesh&&(Sn.setOptional(X,le,"batchingTexture"),Sn.setValue(X,"batchingTexture",le._matricesTexture,ht),Sn.setOptional(X,le,"batchingIdTexture"),Sn.setValue(X,"batchingIdTexture",le._indirectTexture,ht),Sn.setOptional(X,le,"batchingColorTexture"),le._colorsTexture!==null&&Sn.setValue(X,"batchingColorTexture",le._colorsTexture,ht));const Hi=ce.morphAttributes;if((Hi.position!==void 0||Hi.normal!==void 0||Hi.color!==void 0)&&Dt.update(le,ce,Si),(ri||gt.receiveShadow!==le.receiveShadow)&&(gt.receiveShadow=le.receiveShadow,Sn.setValue(X,"receiveShadow",le.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&(Yn.envMap.value=pt,Yn.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1),xe.isMeshStandardMaterial&&xe.envMap===null&&oe.environment!==null&&(Yn.envMapIntensity.value=oe.environmentIntensity),Yn.dfgLUT!==void 0&&(Yn.dfgLUT.value=KC()),ri&&(Sn.setValue(X,"toneMappingExposure",N.toneMappingExposure),gt.needsLights&&Du(Yn,ai),Ze&&xe.fog===!0&&Mt.refreshFogUniforms(Yn,Ze),Mt.refreshMaterialUniforms(Yn,xe,K,Q,R.state.transmissionRenderTarget[V.id]),mm.upload(X,na(gt),Yn,ht)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(mm.upload(X,na(gt),Yn,ht),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&Sn.setValue(X,"center",le.center),Sn.setValue(X,"modelViewMatrix",le.modelViewMatrix),Sn.setValue(X,"normalMatrix",le.normalMatrix),Sn.setValue(X,"modelMatrix",le.matrixWorld),xe.isShaderMaterial||xe.isRawShaderMaterial){const Fn=xe.uniformsGroups;for(let zt=0,ia=Fn.length;zt<ia;zt++){const ir=Fn[zt];Ve.update(ir,Si),Ve.bind(ir,Si)}}return Si}function Du(V,oe){V.ambientLightColor.needsUpdate=oe,V.lightProbe.needsUpdate=oe,V.directionalLights.needsUpdate=oe,V.directionalLightShadows.needsUpdate=oe,V.pointLights.needsUpdate=oe,V.pointLightShadows.needsUpdate=oe,V.spotLights.needsUpdate=oe,V.spotLightShadows.needsUpdate=oe,V.rectAreaLights.needsUpdate=oe,V.hemisphereLights.needsUpdate=oe}function Ou(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return G},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(V,oe,ce){const xe=$e.get(V);xe.__autoAllocateDepthBuffer=V.resolveDepthBuffer===!1,xe.__autoAllocateDepthBuffer===!1&&(xe.__useRenderToTexture=!1),$e.get(V.texture).__webglTexture=oe,$e.get(V.depthTexture).__webglTexture=xe.__autoAllocateDepthBuffer?void 0:ce,xe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,oe){const ce=$e.get(V);ce.__webglFramebuffer=oe,ce.__useDefaultFramebuffer=oe===void 0};const Uu=X.createFramebuffer();this.setRenderTarget=function(V,oe=0,ce=0){L=V,G=oe,D=ce;let xe=!0,le=null,Ze=!1,ut=!1;if(V){const pt=$e.get(V);if(pt.__useDefaultFramebuffer!==void 0)Oe.bindFramebuffer(X.FRAMEBUFFER,null),xe=!1;else if(pt.__webglFramebuffer===void 0)ht.setupRenderTarget(V);else if(pt.__hasExternalTextures)ht.rebindTextures(V,$e.get(V.texture).__webglTexture,$e.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const rt=V.depthTexture;if(pt.__boundDepthTexture!==rt){if(rt!==null&&$e.has(rt)&&(V.width!==rt.image.width||V.height!==rt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ht.setupDepthRenderbuffer(V)}}const kt=V.texture;(kt.isData3DTexture||kt.isDataArrayTexture||kt.isCompressedArrayTexture)&&(ut=!0);const tt=$e.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(tt[oe])?le=tt[oe][ce]:le=tt[oe],Ze=!0):V.samples>0&&ht.useMultisampledRTT(V)===!1?le=$e.get(V).__webglMultisampledFramebuffer:Array.isArray(tt)?le=tt[ce]:le=tt,ne.copy(V.viewport),me.copy(V.scissor),fe=V.scissorTest}else ne.copy(Ce).multiplyScalar(K).floor(),me.copy(Ye).multiplyScalar(K).floor(),fe=at;if(ce!==0&&(le=Uu),Oe.bindFramebuffer(X.FRAMEBUFFER,le)&&xe&&Oe.drawBuffers(V,le),Oe.viewport(ne),Oe.scissor(me),Oe.setScissorTest(fe),Ze){const pt=$e.get(V.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+oe,pt.__webglTexture,ce)}else if(ut){const pt=oe;for(let kt=0;kt<V.textures.length;kt++){const tt=$e.get(V.textures[kt]);X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0+kt,tt.__webglTexture,ce,pt)}}else if(V!==null&&ce!==0){const pt=$e.get(V.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,pt.__webglTexture,ce)}H=-1},this.readRenderTargetPixels=function(V,oe,ce,xe,le,Ze,ut,bt=0){if(!(V&&V.isWebGLRenderTarget)){Wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=$e.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ut!==void 0&&(pt=pt[ut]),pt){Oe.bindFramebuffer(X.FRAMEBUFFER,pt);try{const kt=V.textures[bt],tt=kt.format,rt=kt.type;if(!Ke.textureFormatReadable(tt)){Wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ke.textureTypeReadable(rt)){Wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=V.width-xe&&ce>=0&&ce<=V.height-le&&(V.textures.length>1&&X.readBuffer(X.COLOR_ATTACHMENT0+bt),X.readPixels(oe,ce,xe,le,ze.convert(tt),ze.convert(rt),Ze))}finally{const kt=L!==null?$e.get(L).__webglFramebuffer:null;Oe.bindFramebuffer(X.FRAMEBUFFER,kt)}}},this.readRenderTargetPixelsAsync=async function(V,oe,ce,xe,le,Ze,ut,bt=0){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pt=$e.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ut!==void 0&&(pt=pt[ut]),pt)if(oe>=0&&oe<=V.width-xe&&ce>=0&&ce<=V.height-le){Oe.bindFramebuffer(X.FRAMEBUFFER,pt);const kt=V.textures[bt],tt=kt.format,rt=kt.type;if(!Ke.textureFormatReadable(tt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ke.textureTypeReadable(rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Nt=X.createBuffer();X.bindBuffer(X.PIXEL_PACK_BUFFER,Nt),X.bufferData(X.PIXEL_PACK_BUFFER,Ze.byteLength,X.STREAM_READ),V.textures.length>1&&X.readBuffer(X.COLOR_ATTACHMENT0+bt),X.readPixels(oe,ce,xe,le,ze.convert(tt),ze.convert(rt),0);const jt=L!==null?$e.get(L).__webglFramebuffer:null;Oe.bindFramebuffer(X.FRAMEBUFFER,jt);const an=X.fenceSync(X.SYNC_GPU_COMMANDS_COMPLETE,0);return X.flush(),await pM(X,an,4),X.bindBuffer(X.PIXEL_PACK_BUFFER,Nt),X.getBufferSubData(X.PIXEL_PACK_BUFFER,0,Ze),X.deleteBuffer(Nt),X.deleteSync(an),Ze}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(V,oe=null,ce=0){const xe=Math.pow(2,-ce),le=Math.floor(V.image.width*xe),Ze=Math.floor(V.image.height*xe),ut=oe!==null?oe.x:0,bt=oe!==null?oe.y:0;ht.setTexture2D(V,0),X.copyTexSubImage2D(X.TEXTURE_2D,ce,0,0,ut,bt,le,Ze),Oe.unbindTexture()};const Fu=X.createFramebuffer(),Bu=X.createFramebuffer();this.copyTextureToTexture=function(V,oe,ce=null,xe=null,le=0,Ze=null){Ze===null&&(le!==0?(yc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ze=le,le=0):Ze=0);let ut,bt,pt,kt,tt,rt,Nt,jt,an;const xn=V.isCompressedTexture?V.mipmaps[Ze]:V.image;if(ce!==null)ut=ce.max.x-ce.min.x,bt=ce.max.y-ce.min.y,pt=ce.isBox3?ce.max.z-ce.min.z:1,kt=ce.min.x,tt=ce.min.y,rt=ce.isBox3?ce.min.z:0;else{const Hi=Math.pow(2,-le);ut=Math.floor(xn.width*Hi),bt=Math.floor(xn.height*Hi),V.isDataArrayTexture?pt=xn.depth:V.isData3DTexture?pt=Math.floor(xn.depth*Hi):pt=1,kt=0,tt=0,rt=0}xe!==null?(Nt=xe.x,jt=xe.y,an=xe.z):(Nt=0,jt=0,an=0);const sn=ze.convert(oe.format),gt=ze.convert(oe.type);let dn;oe.isData3DTexture?(ht.setTexture3D(oe,0),dn=X.TEXTURE_3D):oe.isDataArrayTexture||oe.isCompressedArrayTexture?(ht.setTexture2DArray(oe,0),dn=X.TEXTURE_2D_ARRAY):(ht.setTexture2D(oe,0),dn=X.TEXTURE_2D),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,oe.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,oe.unpackAlignment);const rn=X.getParameter(X.UNPACK_ROW_LENGTH),Si=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Br=X.getParameter(X.UNPACK_SKIP_PIXELS),ri=X.getParameter(X.UNPACK_SKIP_ROWS),ai=X.getParameter(X.UNPACK_SKIP_IMAGES);X.pixelStorei(X.UNPACK_ROW_LENGTH,xn.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,xn.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,kt),X.pixelStorei(X.UNPACK_SKIP_ROWS,tt),X.pixelStorei(X.UNPACK_SKIP_IMAGES,rt);const Sn=V.isDataArrayTexture||V.isData3DTexture,Yn=oe.isDataArrayTexture||oe.isData3DTexture;if(V.isDepthTexture){const Hi=$e.get(V),Fn=$e.get(oe),zt=$e.get(Hi.__renderTarget),ia=$e.get(Fn.__renderTarget);Oe.bindFramebuffer(X.READ_FRAMEBUFFER,zt.__webglFramebuffer),Oe.bindFramebuffer(X.DRAW_FRAMEBUFFER,ia.__webglFramebuffer);for(let ir=0;ir<pt;ir++)Sn&&(X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,$e.get(V).__webglTexture,le,rt+ir),X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,$e.get(oe).__webglTexture,Ze,an+ir)),X.blitFramebuffer(kt,tt,ut,bt,Nt,jt,ut,bt,X.DEPTH_BUFFER_BIT,X.NEAREST);Oe.bindFramebuffer(X.READ_FRAMEBUFFER,null),Oe.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else if(le!==0||V.isRenderTargetTexture||$e.has(V)){const Hi=$e.get(V),Fn=$e.get(oe);Oe.bindFramebuffer(X.READ_FRAMEBUFFER,Fu),Oe.bindFramebuffer(X.DRAW_FRAMEBUFFER,Bu);for(let zt=0;zt<pt;zt++)Sn?X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Hi.__webglTexture,le,rt+zt):X.framebufferTexture2D(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,Hi.__webglTexture,le),Yn?X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Fn.__webglTexture,Ze,an+zt):X.framebufferTexture2D(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,Fn.__webglTexture,Ze),le!==0?X.blitFramebuffer(kt,tt,ut,bt,Nt,jt,ut,bt,X.COLOR_BUFFER_BIT,X.NEAREST):Yn?X.copyTexSubImage3D(dn,Ze,Nt,jt,an+zt,kt,tt,ut,bt):X.copyTexSubImage2D(dn,Ze,Nt,jt,kt,tt,ut,bt);Oe.bindFramebuffer(X.READ_FRAMEBUFFER,null),Oe.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else Yn?V.isDataTexture||V.isData3DTexture?X.texSubImage3D(dn,Ze,Nt,jt,an,ut,bt,pt,sn,gt,xn.data):oe.isCompressedArrayTexture?X.compressedTexSubImage3D(dn,Ze,Nt,jt,an,ut,bt,pt,sn,xn.data):X.texSubImage3D(dn,Ze,Nt,jt,an,ut,bt,pt,sn,gt,xn):V.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,Ze,Nt,jt,ut,bt,sn,gt,xn.data):V.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,Ze,Nt,jt,xn.width,xn.height,sn,xn.data):X.texSubImage2D(X.TEXTURE_2D,Ze,Nt,jt,ut,bt,sn,gt,xn);X.pixelStorei(X.UNPACK_ROW_LENGTH,rn),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Si),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Br),X.pixelStorei(X.UNPACK_SKIP_ROWS,ri),X.pixelStorei(X.UNPACK_SKIP_IMAGES,ai),Ze===0&&oe.generateMipmaps&&X.generateMipmap(dn),Oe.unbindTexture()},this.initRenderTarget=function(V){$e.get(V).__webglFramebuffer===void 0&&ht.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?ht.setTextureCube(V,0):V.isData3DTexture?ht.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?ht.setTexture2DArray(V,0):ht.setTexture2D(V,0),Oe.unbindTexture()},this.resetState=function(){G=0,D=0,L=null,Oe.reset(),J.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return $r}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=pn._getDrawingBufferColorSpace(e),t.unpackColorSpace=pn._getUnpackColorSpace()}}const ZC=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:qy,AddEquation:tl,AddOperation:Gb,AdditiveAnimationBlendMode:n0,AdditiveBlending:Cy,AgXToneMapping:Kb,AlphaFormat:e0,AlwaysCompare:h1,AlwaysDepth:_m,AlwaysStencilFunc:Ly,AmbientLight:aw,AnimationAction:pw,AnimationClip:ff,AnimationLoader:i2,AnimationMixer:P2,AnimationObjectGroup:R2,AnimationUtils:$3,ArcCurve:R1,ArrayCamera:cw,ArrowHelper:iT,AttachedBindMode:Py,Audio:dw,AudioAnalyser:_2,AudioContext:A0,AudioListener:v2,AudioLoader:p2,AxesHelper:rT,BackSide:yr,BasicDepthPacking:t1,BasicShadowMap:Mb,BatchedMesh:T1,Bone:h0,BooleanKeyframeTrack:Iu,Box2:V2,Box3:tr,Box3Helper:tT,BoxGeometry:Ru,BoxHelper:eT,BufferAttribute:Cn,BufferGeometry:Jt,BufferGeometryLoader:hw,ByteType:Zy,Cache:ms,Camera:vf,CameraHelper:$2,CanvasTexture:w3,CapsuleGeometry:kg,CatmullRomCurve3:I1,CineonToneMapping:Yb,CircleGeometry:Cg,ClampToEdgeWrapping:Or,Clock:k0,Color:xt,ColorKeyframeTrack:M0,ColorManagement:pn,CompressedArrayTexture:_3,CompressedCubeTexture:b3,CompressedTexture:Eg,CompressedTextureLoader:r2,ConeGeometry:_f,ConstantAlphaFactor:Vb,ConstantColorFactor:Bb,Controls:sT,CubeCamera:y1,CubeReflectionMapping:ho,CubeRefractionMapping:al,CubeTexture:yf,CubeTextureLoader:a2,CubeUVReflectionMapping:Mc,CubicBezierCurve:p0,CubicBezierCurve3:P1,CubicInterpolant:J1,CullFaceBack:ky,CullFaceFront:Sb,CullFaceFrontBack:kS,CullFaceNone:wb,Curve:Za,CurvePath:N1,CustomBlending:Tb,CustomToneMapping:qb,CylinderGeometry:xf,Cylindrical:z2,Data3DTexture:_g,DataArrayTexture:xg,DataTexture:qa,DataTextureLoader:s2,DataUtils:WM,DecrementStencilOp:HS,DecrementWrapStencilOp:GS,DefaultLoadingManager:ew,DepthFormat:mc,DepthStencilFormat:gc,DepthTexture:Ag,DetachedBindMode:Jb,DirectionalLight:rw,DirectionalLightHelper:Q2,DiscreteInterpolant:Q1,DodecahedronGeometry:Rg,DoubleSide:ma,DstAlphaFactor:Nb,DstColorFactor:Ob,DynamicCopyUsage:aM,DynamicDrawUsage:$S,DynamicReadUsage:nM,EdgesGeometry:C1,EllipseCurve:Ig,EqualCompare:s1,EqualDepth:wm,EqualStencilFunc:qS,EquirectangularReflectionMapping:Jd,EquirectangularRefractionMapping:Qd,Euler:ta,EventDispatcher:ys,ExternalTexture:d0,ExtrudeGeometry:Pg,FileLoader:fo,Float16BufferAttribute:QM,Float32BufferAttribute:At,FloatType:vr,Fog:wg,FogExp2:bg,FramebufferTexture:x3,FrontSide:uo,Frustum:Tc,FrustumArray:Tg,GLBufferAttribute:U2,GLSL1:oM,GLSL3:Ny,GreaterCompare:o1,GreaterDepth:Mm,GreaterEqualCompare:u1,GreaterEqualDepth:Sm,GreaterEqualStencilFunc:QS,GreaterStencilFunc:ZS,GridHelper:Z2,Group:hc,HalfFloatType:ll,HemisphereLight:tw,HemisphereLightHelper:K2,IcosahedronGeometry:Lg,ImageBitmapLoader:f2,ImageLoader:pf,ImageUtils:p1,IncrementStencilOp:VS,IncrementWrapStencilOp:jS,InstancedBufferAttribute:bc,InstancedBufferGeometry:uw,InstancedInterleavedBuffer:O2,InstancedMesh:M1,Int16BufferAttribute:ZM,Int32BufferAttribute:JM,Int8BufferAttribute:YM,IntType:cg,InterleavedBuffer:Sg,InterleavedBufferAttribute:Au,Interpolant:Sf,InterpolateDiscrete:tf,InterpolateLinear:eg,InterpolateSmooth:fm,InterpolationSamplingMode:hM,InterpolationSamplingType:uM,InvertStencilOp:WS,KeepStencilOp:gu,KeyframeTrack:ya,LOD:w1,LatheGeometry:Ng,Layers:Su,LessCompare:a1,LessDepth:bm,LessEqualCompare:i0,LessEqualDepth:Tu,LessEqualStencilFunc:KS,LessStencilFunc:YS,Light:dl,LightProbe:lw,Line:ol,Line3:G2,LineBasicMaterial:xr,LineCurve:m0,LineCurve3:L1,LineDashedMaterial:q1,LineLoop:E1,LineSegments:xs,LinearFilter:Wn,LinearInterpolant:S0,LinearMipMapLinearFilter:PS,LinearMipMapNearestFilter:IS,LinearMipmapLinearFilter:ps,LinearMipmapNearestFilter:jd,LinearSRGBColorSpace:Eu,LinearToneMapping:Wb,LinearTransfer:rf,Loader:Ur,LoaderUtils:By,LoadingManager:T0,LoopOnce:Qb,LoopPingPong:e1,LoopRepeat:$b,MOUSE:pu,Material:nr,MaterialLoader:Vg,MathUtils:f1,Matrix2:P0,Matrix3:Zt,Matrix4:Ht,MaxEquation:Cb,Mesh:_i,MeshBasicMaterial:hl,MeshDepthMaterial:_0,MeshDistanceMaterial:b0,MeshLambertMaterial:X1,MeshMatcapMaterial:Y1,MeshNormalMaterial:W1,MeshPhongMaterial:j1,MeshPhysicalMaterial:H1,MeshStandardMaterial:x0,MeshToonMaterial:G1,MinEquation:kb,MirroredRepeatWrapping:ef,MixOperation:jb,MultiplyBlending:Iy,MultiplyOperation:mf,NearestFilter:zi,NearestMipMapLinearFilter:RS,NearestMipMapNearestFilter:CS,NearestMipmapLinearFilter:lc,NearestMipmapNearestFilter:Ky,NeutralToneMapping:Zb,NeverCompare:r1,NeverDepth:xm,NeverStencilFunc:XS,NoBlending:gs,NoColorSpace:so,NoToneMapping:vs,NormalAnimationBlendMode:yg,NormalBlending:bu,NotEqualCompare:l1,NotEqualDepth:Tm,NotEqualStencilFunc:JS,NumberKeyframeTrack:cf,Object3D:yn,ObjectLoader:c2,ObjectSpaceNormalMap:i1,OctahedronGeometry:bf,OneFactor:Ib,OneMinusConstantAlphaFactor:Hb,OneMinusConstantColorFactor:zb,OneMinusDstAlphaFactor:Db,OneMinusDstColorFactor:Ub,OneMinusSrcAlphaFactor:ym,OneMinusSrcColorFactor:Lb,OrthographicCamera:rl,PCFShadowMap:ug,PCFSoftShadowMap:Hd,PMREMGenerator:jy,Path:rg,PerspectiveCamera:ii,Plane:ao,PlaneGeometry:Ec,PlaneHelper:nT,PointLight:iw,PointLightHelper:Y2,Points:A1,PointsMaterial:c0,PolarGridHelper:J2,PolyhedronGeometry:cl,PositionalAudio:x2,PropertyBinding:gn,PropertyMixer:fw,QuadraticBezierCurve:g0,QuadraticBezierCurve3:v0,Quaternion:er,QuaternionKeyframeTrack:Mf,QuaternionLinearInterpolant:$1,RED_GREEN_RGTC2_Format:Qm,RED_RGTC1_Format:Zm,REVISION:lg,RGBADepthPacking:n1,RGBAFormat:$i,RGBAIntegerFormat:vg,RGBA_ASTC_10x10_Format:Gm,RGBA_ASTC_10x5_Format:Vm,RGBA_ASTC_10x6_Format:Hm,RGBA_ASTC_10x8_Format:jm,RGBA_ASTC_12x10_Format:Wm,RGBA_ASTC_12x12_Format:Xm,RGBA_ASTC_4x4_Format:Lm,RGBA_ASTC_5x4_Format:Nm,RGBA_ASTC_5x5_Format:Dm,RGBA_ASTC_6x5_Format:Om,RGBA_ASTC_6x6_Format:Um,RGBA_ASTC_8x5_Format:Fm,RGBA_ASTC_8x6_Format:Bm,RGBA_ASTC_8x8_Format:zm,RGBA_BPTC_Format:Ym,RGBA_ETC2_EAC_Format:Pm,RGBA_PVRTC_2BPPV1_Format:Cm,RGBA_PVRTC_4BPPV1_Format:km,RGBA_S3TC_DXT1_Format:Wd,RGBA_S3TC_DXT3_Format:Xd,RGBA_S3TC_DXT5_Format:Yd,RGBDepthPacking:US,RGBFormat:t0,RGBIntegerFormat:LS,RGB_BPTC_SIGNED_Format:qm,RGB_BPTC_UNSIGNED_Format:Km,RGB_ETC1_Format:Rm,RGB_ETC2_Format:Im,RGB_PVRTC_2BPPV1_Format:Am,RGB_PVRTC_4BPPV1_Format:Em,RGB_S3TC_DXT1_Format:Gd,RGDepthPacking:FS,RGFormat:mg,RGIntegerFormat:gg,RawShaderMaterial:V1,Ray:Cu,Raycaster:mw,RectAreaLight:sw,RedFormat:pg,RedIntegerFormat:gf,ReinhardToneMapping:Xb,RenderTarget:a0,RenderTarget3D:L2,RepeatWrapping:$d,ReplaceStencilOp:zS,ReverseSubtractEquation:Ab,RingGeometry:Dg,SIGNED_RED_GREEN_RGTC2_Format:$m,SIGNED_RED_RGTC1_Format:Jm,SRGBColorSpace:Nr,SRGBTransfer:Tn,Scene:l0,ShaderChunk:nn,ShaderLib:Xa,ShaderMaterial:va,ShadowMaterial:z1,Shape:Mu,ShapeGeometry:Og,ShapePath:aT,ShapeUtils:Ya,ShortType:Jy,Skeleton:Mg,SkeletonHelper:X2,SkinnedMesh:S1,Source:nl,Sphere:Vi,SphereGeometry:wf,Spherical:Vy,SphericalHarmonics3:ow,SplineCurve:y0,SpotLight:nw,SpotLightHelper:W2,Sprite:b1,SpriteMaterial:u0,SrcAlphaFactor:vm,SrcAlphaSaturateFactor:Fb,SrcColorFactor:Pb,StaticCopyUsage:rM,StaticDrawUsage:af,StaticReadUsage:tM,StereoCamera:m2,StreamCopyUsage:sM,StreamDrawUsage:eM,StreamReadUsage:iM,StringKeyframeTrack:Pu,SubtractEquation:Eb,SubtractiveBlending:Ry,TOUCH:mu,TangentSpaceNormalMap:ul,TetrahedronGeometry:Ug,Texture:Qn,TextureLoader:o2,TextureUtils:cT,Timer:F2,TimestampQuery:lM,TorusGeometry:Fg,TorusKnotGeometry:Bg,Triangle:Dr,TriangleFanDrawMode:OS,TriangleStripDrawMode:DS,TrianglesDrawMode:NS,TubeGeometry:zg,UVMapping:hg,Uint16BufferAttribute:s0,Uint32BufferAttribute:o0,Uint8BufferAttribute:qM,Uint8ClampedBufferAttribute:KM,Uniform:I0,UniformsGroup:D2,UniformsLib:dt,UniformsUtils:v1,UnsignedByteType:ga,UnsignedInt101111Type:$y,UnsignedInt248Type:pc,UnsignedInt5999Type:Qy,UnsignedIntType:co,UnsignedShort4444Type:dg,UnsignedShort5551Type:fg,UnsignedShortType:fc,VSMShadowMap:Wa,Vector2:Ae,Vector3:Y,Vector4:vn,VectorKeyframeTrack:df,VideoFrameTexture:y3,VideoTexture:k1,WebGL3DRenderTarget:DM,WebGLArrayRenderTarget:NM,WebGLCoordinateSystem:$r,WebGLCubeRenderTarget:x1,WebGLRenderTarget:Ka,WebGLRenderer:Sw,WebGLUtils:ww,WebGPUCoordinateSystem:vc,WebXRController:pm,WireframeGeometry:B1,WrapAroundEnding:nf,ZeroCurvatureEnding:yu,ZeroFactor:Rb,ZeroSlopeEnding:xu,ZeroStencilOp:BS,createCanvasElement:d1,error:Wt,getConsoleFunction:fM,log:of,setConsoleFunction:dM,warn:ft,warnOnce:yc},Symbol.toStringTag,{value:"Module"}));var fy={exports:{}},el={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function JC(){return Z_||(Z_=1,el.ConcurrentRoot=1,el.ContinuousEventPriority=4,el.DefaultEventPriority=16,el.DiscreteEventPriority=1,el.IdleEventPriority=536870912,el.LegacyRoot=0),el}var J_;function QC(){return J_||(J_=1,fy.exports=JC()),fy.exports}var cc=QC();function $C(a){let e;const t=new Set,n=(p,m)=>{const v=typeof p=="function"?p(e):p;if(v!==e){const x=e;e=m?v:Object.assign({},e,v),t.forEach(_=>_(e,x))}},i=()=>e,s=(p,m=i,v=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let x=m(e);function _(){const S=m(e);if(!v(x,S)){const A=x;p(x=S,A)}}return t.add(_),()=>t.delete(_)},f={setState:n,getState:i,subscribe:(p,m,v)=>m||v?s(p,m,v):(t.add(p),()=>t.delete(p)),destroy:()=>t.clear()};return e=a(n,i,f),f}const eR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Q_=eR?je.useEffect:je.useLayoutEffect;function tR(a){const e=typeof a=="function"?$C(a):a,t=(n=e.getState,i=Object.is)=>{const[,s]=je.useReducer(T=>T+1,0),u=e.getState(),c=je.useRef(u),f=je.useRef(n),p=je.useRef(i),m=je.useRef(!1),v=je.useRef();v.current===void 0&&(v.current=n(u));let x,_=!1;(c.current!==u||f.current!==n||p.current!==i||m.current)&&(x=n(u),_=!i(v.current,x)),Q_(()=>{_&&(v.current=x),c.current=u,f.current=n,p.current=i,m.current=!1});const S=je.useRef(u);Q_(()=>{const T=()=>{try{const C=e.getState(),R=f.current(C);p.current(v.current,R)||(c.current=C,v.current=R,s())}catch{m.current=!0,s()}},w=e.subscribe(T);return e.getState()!==S.current&&T(),w},[]);const A=_?x:v.current;return je.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}var py={exports:{}},my={exports:{}},gy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function nR(){return $_||($_=1,(function(a){function e(B,Q){var K=B.length;B.push(Q);e:for(;0<K;){var j=K-1>>>1,ie=B[j];if(0<i(ie,Q))B[j]=Q,B[K]=ie,K=j;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var Q=B[0],K=B.pop();if(K!==Q){B[0]=K;e:for(var j=0,ie=B.length,Ce=ie>>>1;j<Ce;){var Ye=2*(j+1)-1,at=B[Ye],he=Ye+1,be=B[he];if(0>i(at,K))he<ie&&0>i(be,at)?(B[j]=be,B[he]=K,j=he):(B[j]=at,B[Ye]=K,j=Ye);else if(he<ie&&0>i(be,K))B[j]=be,B[he]=K,j=he;else break e}}return Q}function i(B,Q){var K=B.sortIndex-Q.sortIndex;return K!==0?K:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;a.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();a.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,v=null,x=3,_=!1,S=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(B){for(var Q=t(p);Q!==null;){if(Q.callback===null)n(p);else if(Q.startTime<=B)n(p),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(p)}}function P(B){if(A=!1,R(B),!S)if(t(f)!==null)S=!0,ye(F);else{var Q=t(p);Q!==null&&we(P,Q.startTime-B)}}function F(B,Q){S=!1,A&&(A=!1,w(G),G=-1),_=!0;var K=x;try{for(R(Q),v=t(f);v!==null&&(!(v.expirationTime>Q)||B&&!H());){var j=v.callback;if(typeof j=="function"){v.callback=null,x=v.priorityLevel;var ie=j(v.expirationTime<=Q);Q=a.unstable_now(),typeof ie=="function"?v.callback=ie:v===t(f)&&n(f),R(Q)}else n(f);v=t(f)}if(v!==null)var Ce=!0;else{var Ye=t(p);Ye!==null&&we(P,Ye.startTime-Q),Ce=!1}return Ce}finally{v=null,x=K,_=!1}}var N=!1,z=null,G=-1,D=5,L=-1;function H(){return!(a.unstable_now()-L<D)}function ee(){if(z!==null){var B=a.unstable_now();L=B;var Q=!0;try{Q=z(!0,B)}finally{Q?ne():(N=!1,z=null)}}else N=!1}var ne;if(typeof C=="function")ne=function(){C(ee)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,fe=me.port2;me.port1.onmessage=ee,ne=function(){fe.postMessage(null)}}else ne=function(){T(ee,0)};function ye(B){z=B,N||(N=!0,ne())}function we(B,Q){G=T(function(){B(a.unstable_now())},Q)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(B){B.callback=null},a.unstable_continueExecution=function(){S||_||(S=!0,ye(F))},a.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},a.unstable_getCurrentPriorityLevel=function(){return x},a.unstable_getFirstCallbackNode=function(){return t(f)},a.unstable_next=function(B){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var K=x;x=Q;try{return B()}finally{x=K}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=x;x=B;try{return Q()}finally{x=K}},a.unstable_scheduleCallback=function(B,Q,K){var j=a.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?j+K:j):K=j,B){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=K+ie,B={id:m++,callback:Q,priorityLevel:B,startTime:K,expirationTime:ie,sortIndex:-1},K>j?(B.sortIndex=K,e(p,B),t(f)===null&&B===t(p)&&(A?(w(G),G=-1):A=!0,we(P,K-j))):(B.sortIndex=ie,e(f,B),S||_||(S=!0,ye(F))),B},a.unstable_shouldYield=H,a.unstable_wrapCallback=function(B){var Q=x;return function(){var K=x;x=Q;try{return B.apply(this,arguments)}finally{x=K}}}})(gy)),gy}var eb;function iR(){return eb||(eb=1,my.exports=nR()),my.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy,tb;function rR(){return tb||(tb=1,vy=function(e){var t={},n=og(),i=iR(),s=Object.assign;function u(l){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),F=Symbol.iterator;function N(l){return l===null||typeof l!="object"?null:(l=F&&l[F]||l["@@iterator"],typeof l=="function"?l:null)}function z(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case m:return"Fragment";case p:return"Portal";case x:return"Profiler";case v:return"StrictMode";case T:return"Suspense";case w:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case S:return(l.displayName||"Context")+".Consumer";case _:return(l._context.displayName||"Context")+".Provider";case A:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case C:return h=l.displayName||null,h!==null?h:z(l.type)||"Memo";case R:h=l._payload,l=l._init;try{return z(l(h))}catch{}}return null}function G(l){var h=l.type;switch(l.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=h.render,l=l.displayName||l.name||"",h.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(h);case 8:return h===v?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function D(l){var h=l,g=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(g=h.return),l=h.return;while(l)}return h.tag===3?g:null}function L(l){if(D(l)!==l)throw Error(u(188))}function H(l){var h=l.alternate;if(!h){if(h=D(l),h===null)throw Error(u(188));return h!==l?null:l}for(var g=l,b=h;;){var E=g.return;if(E===null)break;var I=E.alternate;if(I===null){if(b=E.return,b!==null){g=b;continue}break}if(E.child===I.child){for(I=E.child;I;){if(I===g)return L(E),l;if(I===b)return L(E),h;I=I.sibling}throw Error(u(188))}if(g.return!==b.return)g=E,b=I;else{for(var q=!1,ae=E.child;ae;){if(ae===g){q=!0,g=E,b=I;break}if(ae===b){q=!0,b=E,g=I;break}ae=ae.sibling}if(!q){for(ae=I.child;ae;){if(ae===g){q=!0,g=I,b=E;break}if(ae===b){q=!0,b=I,g=E;break}ae=ae.sibling}if(!q)throw Error(u(189))}}if(g.alternate!==b)throw Error(u(190))}if(g.tag!==3)throw Error(u(188));return g.stateNode.current===g?l:h}function ee(l){return l=H(l),l!==null?ne(l):null}function ne(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var h=ne(l);if(h!==null)return h;l=l.sibling}return null}function me(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var h=me(l);if(h!==null)return h}l=l.sibling}return null}var fe=Array.isArray,ye=e.getPublicInstance,we=e.getRootHostContext,B=e.getChildHostContext,Q=e.prepareForCommit,K=e.resetAfterCommit,j=e.createInstance,ie=e.appendInitialChild,Ce=e.finalizeInitialChildren,Ye=e.prepareUpdate,at=e.shouldSetTextContent,he=e.createTextInstance,be=e.scheduleTimeout,Fe=e.cancelTimeout,it=e.noTimeout,st=e.isPrimaryRenderer,Lt=e.supportsMutation,on=e.supportsPersistence,yt=e.supportsHydration,Pe=e.getInstanceFromNode,X=e.preparePortalMount,Le=e.getCurrentEventPriority,Be=e.detachDeletedInstance,Ke=e.supportsMicrotasks,Oe=e.scheduleMicrotask,ot=e.supportsTestSelectors,$e=e.findFiberRoot,ht=e.getBoundingRect,W=e.getTextContent,O=e.isHiddenSubtree,ue=e.matchAccessibilityRole,Te=e.setFocusIfFocusable,Re=e.setupIntersectionObserver,Se=e.appendChild,Mt=e.appendChildToContainer,et=e.commitTextUpdate,Tt=e.commitMount,wt=e.commitUpdate,Ne=e.insertBefore,Je=e.insertInContainerBefore,Dt=e.removeChild,$=e.removeChildFromContainer,ge=e.resetTextContent,ze=e.hideInstance,J=e.hideTextInstance,Ve=e.unhideInstance,He=e.unhideTextInstance,Ge=e.clearContainer,We=e.cloneInstance,ke=e.createContainerChildSet,lt=e.appendChildToContainerChildSet,Pt=e.finalizeContainerChildren,un=e.replaceContainerChildren,en=e.cloneHiddenInstance,Xn=e.cloneHiddenTextInstance,Un=e.canHydrateInstance,fl=e.canHydrateTextInstance,Ja=e.canHydrateSuspenseInstance,pl=e.isSuspenseInstancePending,Ri=e.isSuspenseInstanceFallback,Qa=e.registerSuspenseInstanceRetry,Fr=e.getNextHydratableSibling,po=e.getFirstHydratableChild,mo=e.getFirstHydratableChildWithinContainer,Lu=e.getFirstHydratableChildWithinSuspenseInstance,go=e.hydrateInstance,na=e.hydrateTextInstance,ml=e.hydrateSuspenseInstance,Nu=e.getNextHydratableInstanceAfterSuspenseInstance,Du=e.commitHydratedContainer,Ou=e.commitHydratedSuspenseInstance,Uu=e.clearSuspenseBoundary,Fu=e.clearSuspenseBoundaryFromContainer,Bu=e.shouldDeleteUnhydratedTailInstances,V=e.didNotMatchHydratedContainerTextInstance,oe=e.didNotMatchHydratedTextInstance,ce;function xe(l){if(ce===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);ce=h&&h[1]||""}return`
`+ce+l}var le=!1;function Ze(l,h){if(!l||le)return"";le=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(qe){var b=qe}Reflect.construct(l,[],h)}else{try{h.call()}catch(qe){b=qe}l.call(h.prototype)}else{try{throw Error()}catch(qe){b=qe}l()}}catch(qe){if(qe&&b&&typeof qe.stack=="string"){for(var E=qe.stack.split(`
`),I=b.stack.split(`
`),q=E.length-1,ae=I.length-1;1<=q&&0<=ae&&E[q]!==I[ae];)ae--;for(;1<=q&&0<=ae;q--,ae--)if(E[q]!==I[ae]){if(q!==1||ae!==1)do if(q--,ae--,0>ae||E[q]!==I[ae]){var Ee=`
`+E[q].replace(" at new "," at ");return l.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",l.displayName)),Ee}while(1<=q&&0<=ae);break}}}finally{le=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?xe(l):""}var ut=Object.prototype.hasOwnProperty,bt=[],pt=-1;function kt(l){return{current:l}}function tt(l){0>pt||(l.current=bt[pt],bt[pt]=null,pt--)}function rt(l,h){pt++,bt[pt]=l.current,l.current=h}var Nt={},jt=kt(Nt),an=kt(!1),xn=Nt;function sn(l,h){var g=l.type.contextTypes;if(!g)return Nt;var b=l.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var E={},I;for(I in g)E[I]=h[I];return b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=h,l.__reactInternalMemoizedMaskedChildContext=E),E}function gt(l){return l=l.childContextTypes,l!=null}function dn(){tt(an),tt(jt)}function rn(l,h,g){if(jt.current!==Nt)throw Error(u(168));rt(jt,h),rt(an,g)}function Si(l,h,g){var b=l.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return g;b=b.getChildContext();for(var E in b)if(!(E in h))throw Error(u(108,G(l)||"Unknown",E));return s({},g,b)}function Br(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Nt,xn=jt.current,rt(jt,l),rt(an,an.current),!0}function ri(l,h,g){var b=l.stateNode;if(!b)throw Error(u(169));g?(l=Si(l,h,xn),b.__reactInternalMemoizedMergedChildContext=l,tt(an),tt(jt),rt(jt,l)):tt(an),rt(an,g)}var ai=Math.clz32?Math.clz32:Hi,Sn=Math.log,Yn=Math.LN2;function Hi(l){return l>>>=0,l===0?32:31-(Sn(l)/Yn|0)|0}var Fn=64,zt=4194304;function ia(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function ir(l,h){var g=l.pendingLanes;if(g===0)return 0;var b=0,E=l.suspendedLanes,I=l.pingedLanes,q=g&268435455;if(q!==0){var ae=q&~E;ae!==0?b=ia(ae):(I&=q,I!==0&&(b=ia(I)))}else q=g&~E,q!==0?b=ia(q):I!==0&&(b=ia(I));if(b===0)return 0;if(h!==0&&h!==b&&(h&E)===0&&(E=b&-b,I=h&-h,E>=I||E===16&&(I&4194240)!==0))return h;if((b&4)!==0&&(b|=g&16),h=l.entangledLanes,h!==0)for(l=l.entanglements,h&=b;0<h;)g=31-ai(h),E=1<<g,b|=l[g],h&=~E;return b}function Cc(l,h){switch(l){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ef(l,h){for(var g=l.suspendedLanes,b=l.pingedLanes,E=l.expirationTimes,I=l.pendingLanes;0<I;){var q=31-ai(I),ae=1<<q,Ee=E[q];Ee===-1?((ae&g)===0||(ae&b)!==0)&&(E[q]=Cc(ae,h)):Ee<=h&&(l.expiredLanes|=ae),I&=~ae}}function zu(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Vu(l){for(var h=[],g=0;31>g;g++)h.push(l);return h}function _s(l,h,g){l.pendingLanes|=h,h!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,h=31-ai(h),l[h]=g}function Hu(l,h){var g=l.pendingLanes&~h;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=h,l.mutableReadLanes&=h,l.entangledLanes&=h,h=l.entanglements;var b=l.eventTimes;for(l=l.expirationTimes;0<g;){var E=31-ai(g),I=1<<E;h[E]=0,b[E]=-1,l[E]=-1,g&=~I}}function ra(l,h){var g=l.entangledLanes|=h;for(l=l.entanglements;g;){var b=31-ai(g),E=1<<b;E&h|l[b]&h&&(l[b]|=h),g&=~E}}var tn=0;function xa(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var bs=i.unstable_scheduleCallback,vo=i.unstable_cancelCallback,$a=i.unstable_shouldYield,Gg=i.unstable_requestPaint,$n=i.unstable_now,ws=i.unstable_ImmediatePriority,Wg=i.unstable_UserBlockingPriority,ju=i.unstable_NormalPriority,Gu=i.unstable_IdlePriority,gl=null,aa=null;function vl(l){if(aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot(gl,l,void 0,(l.current.flags&128)===128)}catch{}}function yl(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var Ii=typeof Object.is=="function"?Object.is:yl,_r=null,Wu=!1,Rc=!1;function Xu(l){_r===null?_r=[l]:_r.push(l)}function Yu(l){Wu=!0,Xu(l)}function br(){if(!Rc&&_r!==null){Rc=!0;var l=0,h=tn;try{var g=_r;for(tn=1;l<g.length;l++){var b=g[l];do b=b(!0);while(b!==null)}_r=null,Wu=!1}catch(E){throw _r!==null&&(_r=_r.slice(l+1)),bs(ws,br),E}finally{tn=h,Rc=!1}}return null}var Af=c.ReactCurrentBatchConfig;function zr(l,h){if(Ii(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var g=Object.keys(l),b=Object.keys(h);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var E=g[b];if(!ut.call(h,E)||!Ii(l[E],h[E]))return!1}return!0}function Ic(l){switch(l.tag){case 5:return xe(l.type);case 16:return xe("Lazy");case 13:return xe("Suspense");case 19:return xe("SuspenseList");case 0:case 2:case 15:return l=Ze(l.type,!1),l;case 11:return l=Ze(l.type.render,!1),l;case 1:return l=Ze(l.type,!0),l;default:return""}}function ji(l,h){if(l&&l.defaultProps){h=s({},h),l=l.defaultProps;for(var g in l)h[g]===void 0&&(h[g]=l[g]);return h}return h}var xl=kt(null),Ss=null,_a=null,qu=null;function Pi(){qu=_a=Ss=null}function Ms(l,h,g){st?(rt(xl,h._currentValue),h._currentValue=g):(rt(xl,h._currentValue2),h._currentValue2=g)}function _l(l){var h=xl.current;tt(xl),st?l._currentValue=h:l._currentValue2=h}function Ts(l,h,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),l===g)break;l=l.return}}function yo(l,h){Ss=l,qu=_a=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&h)!==0&&(ui=!0),l.firstContext=null)}function Gi(l){var h=st?l._currentValue:l._currentValue2;if(qu!==l)if(l={context:l,memoizedValue:h,next:null},_a===null){if(Ss===null)throw Error(u(308));_a=l,Ss.dependencies={lanes:0,firstContext:l}}else _a=_a.next=l;return h}var wr=null,Sr=!1;function xo(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pc(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ba(l,h){return{eventTime:l,lane:h,tag:0,payload:null,callback:null,next:null}}function es(l,h){var g=l.updateQueue;g!==null&&(g=g.shared,jn!==null&&(l.mode&1)!==0&&(Kt&2)===0?(l=g.interleaved,l===null?(h.next=h,wr===null?wr=[g]:wr.push(g)):(h.next=l.next,l.next=h),g.interleaved=h):(l=g.pending,l===null?h.next=h:(h.next=l.next,l.next=h),g.pending=h))}function Ku(l,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var b=h.lanes;b&=l.pendingLanes,g|=b,h.lanes=g,ra(l,g)}}function Zu(l,h){var g=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var E=null,I=null;if(g=g.firstBaseUpdate,g!==null){do{var q={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};I===null?E=I=q:I=I.next=q,g=g.next}while(g!==null);I===null?E=I=h:I=I.next=h}else E=I=h;g={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:I,shared:b.shared,effects:b.effects},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=h:l.next=h,g.lastBaseUpdate=h}function Ju(l,h,g,b){var E=l.updateQueue;Sr=!1;var I=E.firstBaseUpdate,q=E.lastBaseUpdate,ae=E.shared.pending;if(ae!==null){E.shared.pending=null;var Ee=ae,qe=Ee.next;Ee.next=null,q===null?I=qe:q.next=qe,q=Ee;var _t=l.alternate;_t!==null&&(_t=_t.updateQueue,ae=_t.lastBaseUpdate,ae!==q&&(ae===null?_t.firstBaseUpdate=qe:ae.next=qe,_t.lastBaseUpdate=Ee))}if(I!==null){var Xt=E.baseState;q=0,_t=qe=Ee=null,ae=I;do{var Ot=ae.lane,Qt=ae.eventTime;if((b&Ot)===Ot){_t!==null&&(_t=_t.next={eventTime:Qt,lane:0,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null});e:{var mt=l,yi=ae;switch(Ot=h,Qt=g,yi.tag){case 1:if(mt=yi.payload,typeof mt=="function"){Xt=mt.call(Qt,Xt,Ot);break e}Xt=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=yi.payload,Ot=typeof mt=="function"?mt.call(Qt,Xt,Ot):mt,Ot==null)break e;Xt=s({},Xt,Ot);break e;case 2:Sr=!0}}ae.callback!==null&&ae.lane!==0&&(l.flags|=64,Ot=E.effects,Ot===null?E.effects=[ae]:Ot.push(ae))}else Qt={eventTime:Qt,lane:Ot,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},_t===null?(qe=_t=Qt,Ee=Xt):_t=_t.next=Qt,q|=Ot;if(ae=ae.next,ae===null){if(ae=E.shared.pending,ae===null)break;Ot=ae,ae=Ot.next,Ot.next=null,E.lastBaseUpdate=Ot,E.shared.pending=null}}while(!0);if(_t===null&&(Ee=Xt),E.baseState=Ee,E.firstBaseUpdate=qe,E.lastBaseUpdate=_t,h=E.shared.interleaved,h!==null){E=h;do q|=E.lane,E=E.next;while(E!==h)}else I===null&&(E.shared.lanes=0);ua|=q,l.lanes=q,l.memoizedState=Xt}}function kf(l,h,g){if(l=h.effects,h.effects=null,l!==null)for(h=0;h<l.length;h++){var b=l[h],E=b.callback;if(E!==null){if(b.callback=null,b=g,typeof E!="function")throw Error(u(191,E));E.call(b)}}}var Cf=new n.Component().refs;function Lc(l,h,g,b){h=l.memoizedState,g=g(b,h),g=g==null?h:s({},h,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Qu={isMounted:function(l){return(l=l._reactInternals)?D(l)===l:!1},enqueueSetState:function(l,h,g){l=l._reactInternals;var b=fn(),E=Yr(l),I=ba(b,E);I.payload=h,g!=null&&(I.callback=g),es(l,I),h=Ei(l,E,b),h!==null&&Ku(h,l,E)},enqueueReplaceState:function(l,h,g){l=l._reactInternals;var b=fn(),E=Yr(l),I=ba(b,E);I.tag=1,I.payload=h,g!=null&&(I.callback=g),es(l,I),h=Ei(l,E,b),h!==null&&Ku(h,l,E)},enqueueForceUpdate:function(l,h){l=l._reactInternals;var g=fn(),b=Yr(l),E=ba(g,b);E.tag=2,h!=null&&(E.callback=h),es(l,E),h=Ei(l,b,g),h!==null&&Ku(h,l,b)}};function Nc(l,h,g,b,E,I,q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,I,q):h.prototype&&h.prototype.isPureReactComponent?!zr(g,b)||!zr(E,I):!0}function Rf(l,h,g){var b=!1,E=Nt,I=h.contextType;return typeof I=="object"&&I!==null?I=Gi(I):(E=gt(h)?xn:jt.current,b=h.contextTypes,I=(b=b!=null)?sn(l,E):Nt),h=new h(g,I),l.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Qu,l.stateNode=h,h._reactInternals=l,b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=E,l.__reactInternalMemoizedMaskedChildContext=I),h}function If(l,h,g,b){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,b),h.state!==l&&Qu.enqueueReplaceState(h,h.state,null)}function Dc(l,h,g,b){var E=l.stateNode;E.props=g,E.state=l.memoizedState,E.refs=Cf,xo(l);var I=h.contextType;typeof I=="object"&&I!==null?E.context=Gi(I):(I=gt(h)?xn:jt.current,E.context=sn(l,I)),E.state=l.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(Lc(l,h,I,g),E.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(h=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),h!==E.state&&Qu.enqueueReplaceState(E,E.state,null),Ju(l,g,E,b),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308)}var _o=[],ts=0,$u=null,eh=0,Mr=[],rr=0,Es=null,wa=1,Sa="";function As(l,h){_o[ts++]=eh,_o[ts++]=$u,$u=l,eh=h}function Pf(l,h,g){Mr[rr++]=wa,Mr[rr++]=Sa,Mr[rr++]=Es,Es=l;var b=wa;l=Sa;var E=32-ai(b)-1;b&=~(1<<E),g+=1;var I=32-ai(h)+E;if(30<I){var q=E-E%5;I=(b&(1<<q)-1).toString(32),b>>=q,E-=q,wa=1<<32-ai(h)+E|g<<E|b,Sa=I+l}else wa=1<<I|g<<E|b,Sa=l}function Oc(l){l.return!==null&&(As(l,1),Pf(l,1,0))}function Uc(l){for(;l===$u;)$u=_o[--ts],_o[ts]=null,eh=_o[--ts],_o[ts]=null;for(;l===Es;)Es=Mr[--rr],Mr[rr]=null,Sa=Mr[--rr],Mr[rr]=null,wa=Mr[--rr],Mr[rr]=null}var Li=null,fi=null,Pn=!1,bo=!1,Tr=null;function Fc(l,h){var g=cr(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=l,h=l.deletions,h===null?(l.deletions=[g],l.flags|=16):h.push(g)}function Bc(l,h){switch(l.tag){case 5:return h=Un(h,l.type,l.pendingProps),h!==null?(l.stateNode=h,Li=l,fi=po(h),!0):!1;case 6:return h=fl(h,l.pendingProps),h!==null?(l.stateNode=h,Li=l,fi=null,!0):!1;case 13:if(h=Ja(h),h!==null){var g=Es!==null?{id:wa,overflow:Sa}:null;return l.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=cr(18,null,null,0),g.stateNode=h,g.return=l,l.child=g,Li=l,fi=null,!0}return!1;default:return!1}}function th(l){return(l.mode&1)!==0&&(l.flags&128)===0}function ns(l){if(Pn){var h=fi;if(h){var g=h;if(!Bc(l,h)){if(th(l))throw Error(u(418));h=Fr(g);var b=Li;h&&Bc(l,h)?Fc(b,g):(l.flags=l.flags&-4097|2,Pn=!1,Li=l)}}else{if(th(l))throw Error(u(418));l.flags=l.flags&-4097|2,Pn=!1,Li=l}}}function Lf(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Li=l}function bl(l){if(!yt||l!==Li)return!1;if(!Pn)return Lf(l),Pn=!0,!1;if(l.tag!==3&&(l.tag!==5||Bu(l.type)&&!at(l.type,l.memoizedProps))){var h=fi;if(h){if(th(l)){for(l=fi;l;)l=Fr(l);throw Error(u(418))}for(;h;)Fc(l,h),h=Fr(h)}}if(Lf(l),l.tag===13){if(!yt)throw Error(u(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));fi=Nu(l)}else fi=Li?Fr(l.stateNode):null;return!0}function wo(){yt&&(fi=Li=null,bo=Pn=!1)}function nh(l){Tr===null?Tr=[l]:Tr.push(l)}function So(l,h,g){if(l=g.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(u(309));var b=g.stateNode}if(!b)throw Error(u(147,l));var E=b,I=""+l;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(q){var ae=E.refs;ae===Cf&&(ae=E.refs={}),q===null?delete ae[I]:ae[I]=q},h._stringRef=I,h)}if(typeof l!="string")throw Error(u(284));if(!g._owner)throw Error(u(290,l))}return l}function is(l,h){throw l=Object.prototype.toString.call(h),Error(u(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l))}function Mo(l){var h=l._init;return h(l._payload)}function Nf(l){function h(ve,se){if(l){var Me=ve.deletions;Me===null?(ve.deletions=[se],ve.flags|=16):Me.push(se)}}function g(ve,se){if(!l)return null;for(;se!==null;)h(ve,se),se=se.sibling;return null}function b(ve,se){for(ve=new Map;se!==null;)se.key!==null?ve.set(se.key,se):ve.set(se.index,se),se=se.sibling;return ve}function E(ve,se){return ve=Ua(ve,se),ve.index=0,ve.sibling=null,ve}function I(ve,se,Me){return ve.index=Me,l?(Me=ve.alternate,Me!==null?(Me=Me.index,Me<se?(ve.flags|=2,se):Me):(ve.flags|=2,se)):(ve.flags|=1048576,se)}function q(ve){return l&&ve.alternate===null&&(ve.flags|=2),ve}function ae(ve,se,Me,ct){return se===null||se.tag!==6?(se=Ch(Me,ve.mode,ct),se.return=ve,se):(se=E(se,Me),se.return=ve,se)}function Ee(ve,se,Me,ct){var Rt=Me.type;return Rt===m?_t(ve,se,Me.props.children,ct,Me.key):se!==null&&(se.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===R&&Mo(Rt)===se.type)?(ct=E(se,Me.props),ct.ref=So(ve,se,Me),ct.return=ve,ct):(ct=kh(Me.type,Me.key,Me.props,null,ve.mode,ct),ct.ref=So(ve,se,Me),ct.return=ve,ct)}function qe(ve,se,Me,ct){return se===null||se.tag!==4||se.stateNode.containerInfo!==Me.containerInfo||se.stateNode.implementation!==Me.implementation?(se=Rh(Me,ve.mode,ct),se.return=ve,se):(se=E(se,Me.children||[]),se.return=ve,se)}function _t(ve,se,Me,ct,Rt){return se===null||se.tag!==7?(se=Ks(Me,ve.mode,ct,Rt),se.return=ve,se):(se=E(se,Me),se.return=ve,se)}function Xt(ve,se,Me){if(typeof se=="string"&&se!==""||typeof se=="number")return se=Ch(""+se,ve.mode,Me),se.return=ve,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case f:return Me=kh(se.type,se.key,se.props,null,ve.mode,Me),Me.ref=So(ve,null,se),Me.return=ve,Me;case p:return se=Rh(se,ve.mode,Me),se.return=ve,se;case R:var ct=se._init;return Xt(ve,ct(se._payload),Me)}if(fe(se)||N(se))return se=Ks(se,ve.mode,Me,null),se.return=ve,se;is(ve,se)}return null}function Ot(ve,se,Me,ct){var Rt=se!==null?se.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Rt!==null?null:ae(ve,se,""+Me,ct);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case f:return Me.key===Rt?Ee(ve,se,Me,ct):null;case p:return Me.key===Rt?qe(ve,se,Me,ct):null;case R:return Rt=Me._init,Ot(ve,se,Rt(Me._payload),ct)}if(fe(Me)||N(Me))return Rt!==null?null:_t(ve,se,Me,ct,null);is(ve,Me)}return null}function Qt(ve,se,Me,ct,Rt){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return ve=ve.get(Me)||null,ae(se,ve,""+ct,Rt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case f:return ve=ve.get(ct.key===null?Me:ct.key)||null,Ee(se,ve,ct,Rt);case p:return ve=ve.get(ct.key===null?Me:ct.key)||null,qe(se,ve,ct,Rt);case R:var qt=ct._init;return Qt(ve,se,Me,qt(ct._payload),Rt)}if(fe(ct)||N(ct))return ve=ve.get(Me)||null,_t(se,ve,ct,Rt,null);is(se,ct)}return null}function mt(ve,se,Me,ct){for(var Rt=null,qt=null,Yt=se,cn=se=0,Kn=null;Yt!==null&&cn<Me.length;cn++){Yt.index>cn?(Kn=Yt,Yt=null):Kn=Yt.sibling;var hn=Ot(ve,Yt,Me[cn],ct);if(hn===null){Yt===null&&(Yt=Kn);break}l&&Yt&&hn.alternate===null&&h(ve,Yt),se=I(hn,se,cn),qt===null?Rt=hn:qt.sibling=hn,qt=hn,Yt=Kn}if(cn===Me.length)return g(ve,Yt),Pn&&As(ve,cn),Rt;if(Yt===null){for(;cn<Me.length;cn++)Yt=Xt(ve,Me[cn],ct),Yt!==null&&(se=I(Yt,se,cn),qt===null?Rt=Yt:qt.sibling=Yt,qt=Yt);return Pn&&As(ve,cn),Rt}for(Yt=b(ve,Yt);cn<Me.length;cn++)Kn=Qt(Yt,ve,cn,Me[cn],ct),Kn!==null&&(l&&Kn.alternate!==null&&Yt.delete(Kn.key===null?cn:Kn.key),se=I(Kn,se,cn),qt===null?Rt=Kn:qt.sibling=Kn,qt=Kn);return l&&Yt.forEach(function(Fa){return h(ve,Fa)}),Pn&&As(ve,cn),Rt}function yi(ve,se,Me,ct){var Rt=N(Me);if(typeof Rt!="function")throw Error(u(150));if(Me=Rt.call(Me),Me==null)throw Error(u(151));for(var qt=Rt=null,Yt=se,cn=se=0,Kn=null,hn=Me.next();Yt!==null&&!hn.done;cn++,hn=Me.next()){Yt.index>cn?(Kn=Yt,Yt=null):Kn=Yt.sibling;var Fa=Ot(ve,Yt,hn.value,ct);if(Fa===null){Yt===null&&(Yt=Kn);break}l&&Yt&&Fa.alternate===null&&h(ve,Yt),se=I(Fa,se,cn),qt===null?Rt=Fa:qt.sibling=Fa,qt=Fa,Yt=Kn}if(hn.done)return g(ve,Yt),Pn&&As(ve,cn),Rt;if(Yt===null){for(;!hn.done;cn++,hn=Me.next())hn=Xt(ve,hn.value,ct),hn!==null&&(se=I(hn,se,cn),qt===null?Rt=hn:qt.sibling=hn,qt=hn);return Pn&&As(ve,cn),Rt}for(Yt=b(ve,Yt);!hn.done;cn++,hn=Me.next())hn=Qt(Yt,ve,cn,hn.value,ct),hn!==null&&(l&&hn.alternate!==null&&Yt.delete(hn.key===null?cn:hn.key),se=I(hn,se,cn),qt===null?Rt=hn:qt.sibling=hn,qt=hn);return l&&Yt.forEach(function(gd){return h(ve,gd)}),Pn&&As(ve,cn),Rt}function dr(ve,se,Me,ct){if(typeof Me=="object"&&Me!==null&&Me.type===m&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case f:e:{for(var Rt=Me.key,qt=se;qt!==null;){if(qt.key===Rt){if(Rt=Me.type,Rt===m){if(qt.tag===7){g(ve,qt.sibling),se=E(qt,Me.props.children),se.return=ve,ve=se;break e}}else if(qt.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===R&&Mo(Rt)===qt.type){g(ve,qt.sibling),se=E(qt,Me.props),se.ref=So(ve,qt,Me),se.return=ve,ve=se;break e}g(ve,qt);break}else h(ve,qt);qt=qt.sibling}Me.type===m?(se=Ks(Me.props.children,ve.mode,ct,Me.key),se.return=ve,ve=se):(ct=kh(Me.type,Me.key,Me.props,null,ve.mode,ct),ct.ref=So(ve,se,Me),ct.return=ve,ve=ct)}return q(ve);case p:e:{for(qt=Me.key;se!==null;){if(se.key===qt)if(se.tag===4&&se.stateNode.containerInfo===Me.containerInfo&&se.stateNode.implementation===Me.implementation){g(ve,se.sibling),se=E(se,Me.children||[]),se.return=ve,ve=se;break e}else{g(ve,se);break}else h(ve,se);se=se.sibling}se=Rh(Me,ve.mode,ct),se.return=ve,ve=se}return q(ve);case R:return qt=Me._init,dr(ve,se,qt(Me._payload),ct)}if(fe(Me))return mt(ve,se,Me,ct);if(N(Me))return yi(ve,se,Me,ct);is(ve,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,se!==null&&se.tag===6?(g(ve,se.sibling),se=E(se,Me),se.return=ve,ve=se):(g(ve,se),se=Ch(Me,ve.mode,ct),se.return=ve,ve=se),q(ve)):g(ve,se)}return dr}var Ma=Nf(!0),Df=Nf(!1),To={},Wi=kt(To),ks=kt(To),Cs=kt(To);function Vr(l){if(l===To)throw Error(u(174));return l}function ih(l,h){rt(Cs,h),rt(ks,l),rt(Wi,To),l=we(h),tt(Wi),rt(Wi,l)}function Eo(){tt(Wi),tt(ks),tt(Cs)}function Of(l){var h=Vr(Cs.current),g=Vr(Wi.current);h=B(g,l.type,h),g!==h&&(rt(ks,l),rt(Wi,h))}function zc(l){ks.current===l&&(tt(Wi),tt(ks))}var Nn=kt(0);function rh(l){for(var h=l;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||pl(g)||Ri(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var ar=[];function Rs(){for(var l=0;l<ar.length;l++){var h=ar[l];st?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}ar.length=0}var wl=c.ReactCurrentDispatcher,sr=c.ReactCurrentBatchConfig,Is=0,Dn=null,si=null,oi=null,ah=!1,sa=!1,Ps=0,Sl=0;function li(){throw Error(u(321))}function sh(l,h){if(h===null)return!1;for(var g=0;g<h.length&&g<l.length;g++)if(!Ii(l[g],h[g]))return!1;return!0}function Ao(l,h,g,b,E,I){if(Is=I,Dn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,wl.current=l===null||l.memoizedState===null?Xc:Yc,l=g(b,E),sa){I=0;do{if(sa=!1,Ps=0,25<=I)throw Error(u(301));I+=1,oi=si=null,h.updateQueue=null,wl.current=qc,l=g(b,E)}while(sa)}if(wl.current=Io,h=si!==null&&si.next!==null,Is=0,oi=si=Dn=null,ah=!1,h)throw Error(u(300));return l}function rs(){var l=Ps!==0;return Ps=0,l}function Hr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?Dn.memoizedState=oi=l:oi=oi.next=l,oi}function jr(){if(si===null){var l=Dn.alternate;l=l!==null?l.memoizedState:null}else l=si.next;var h=oi===null?Dn.memoizedState:oi.next;if(h!==null)oi=h,si=l;else{if(l===null)throw Error(u(310));si=l,l={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},oi===null?Dn.memoizedState=oi=l:oi=oi.next=l}return oi}function oa(l,h){return typeof h=="function"?h(l):h}function Ml(l){var h=jr(),g=h.queue;if(g===null)throw Error(u(311));g.lastRenderedReducer=l;var b=si,E=b.baseQueue,I=g.pending;if(I!==null){if(E!==null){var q=E.next;E.next=I.next,I.next=q}b.baseQueue=E=I,g.pending=null}if(E!==null){I=E.next,b=b.baseState;var ae=q=null,Ee=null,qe=I;do{var _t=qe.lane;if((Is&_t)===_t)Ee!==null&&(Ee=Ee.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),b=qe.hasEagerState?qe.eagerState:l(b,qe.action);else{var Xt={lane:_t,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};Ee===null?(ae=Ee=Xt,q=b):Ee=Ee.next=Xt,Dn.lanes|=_t,ua|=_t}qe=qe.next}while(qe!==null&&qe!==I);Ee===null?q=b:Ee.next=ae,Ii(b,h.memoizedState)||(ui=!0),h.memoizedState=b,h.baseState=q,h.baseQueue=Ee,g.lastRenderedState=b}if(l=g.interleaved,l!==null){E=l;do I=E.lane,Dn.lanes|=I,ua|=I,E=E.next;while(E!==l)}else E===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function Tl(l){var h=jr(),g=h.queue;if(g===null)throw Error(u(311));g.lastRenderedReducer=l;var b=g.dispatch,E=g.pending,I=h.memoizedState;if(E!==null){g.pending=null;var q=E=E.next;do I=l(I,q.action),q=q.next;while(q!==E);Ii(I,h.memoizedState)||(ui=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),g.lastRenderedState=I}return[I,b]}function Vc(){}function Hc(l,h){var g=Dn,b=jr(),E=h(),I=!Ii(b.memoizedState,E);if(I&&(b.memoizedState=E,ui=!0),b=b.queue,ko(Ta.bind(null,g,b,l),[l]),b.getSnapshot!==h||I||oi!==null&&oi.memoizedState.tag&1){if(g.flags|=2048,Al(9,Gc.bind(null,g,b,E,h),void 0,null),jn===null)throw Error(u(349));(Is&30)!==0||jc(g,h,E)}return E}function jc(l,h,g){l.flags|=16384,l={getSnapshot:h,value:g},h=Dn.updateQueue,h===null?(h={lastEffect:null,stores:null},Dn.updateQueue=h,h.stores=[l]):(g=h.stores,g===null?h.stores=[l]:g.push(l))}function Gc(l,h,g,b){h.value=g,h.getSnapshot=b,oh(h)&&Ei(l,1,-1)}function Ta(l,h,g){return g(function(){oh(h)&&Ei(l,1,-1)})}function oh(l){var h=l.getSnapshot;l=l.value;try{var g=h();return!Ii(l,g)}catch{return!0}}function El(l){var h=Hr();return typeof l=="function"&&(l=l()),h.memoizedState=h.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:l},h.queue=l,l=l.dispatch=Xg.bind(null,Dn,l),[h.memoizedState,l]}function Al(l,h,g,b){return l={tag:l,create:h,destroy:g,deps:b,next:null},h=Dn.updateQueue,h===null?(h={lastEffect:null,stores:null},Dn.updateQueue=h,h.lastEffect=l.next=l):(g=h.lastEffect,g===null?h.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,h.lastEffect=l)),l}function Uf(){return jr().memoizedState}function as(l,h,g,b){var E=Hr();Dn.flags|=l,E.memoizedState=Al(1|h,g,void 0,b===void 0?null:b)}function lh(l,h,g,b){var E=jr();b=b===void 0?null:b;var I=void 0;if(si!==null){var q=si.memoizedState;if(I=q.destroy,b!==null&&sh(b,q.deps)){E.memoizedState=Al(h,g,I,b);return}}Dn.flags|=l,E.memoizedState=Al(1|h,g,I,b)}function uh(l,h){return as(8390656,8,l,h)}function ko(l,h){return lh(2048,8,l,h)}function En(l,h){return lh(4,2,l,h)}function hh(l,h){return lh(4,4,l,h)}function kl(l,h){if(typeof h=="function")return l=l(),h(l),function(){h(null)};if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function Co(l,h,g){return g=g!=null?g.concat([l]):null,lh(4,4,kl.bind(null,h,l),g)}function ch(){}function dh(l,h){var g=jr();h=h===void 0?null:h;var b=g.memoizedState;return b!==null&&h!==null&&sh(h,b[1])?b[0]:(g.memoizedState=[l,h],l)}function Ro(l,h){var g=jr();h=h===void 0?null:h;var b=g.memoizedState;return b!==null&&h!==null&&sh(h,b[1])?b[0]:(l=l(),g.memoizedState=[l,h],l)}function fh(l,h){var g=tn;tn=g!==0&&4>g?g:4,l(!0);var b=sr.transition;sr.transition={};try{l(!1),h()}finally{tn=g,sr.transition=b}}function Ls(){return jr().memoizedState}function Ff(l,h,g){var b=Yr(l);g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},Bf(l)?Wc(h,g):(Cl(l,h,g),g=fn(),l=Ei(l,b,g),l!==null&&Rl(l,h,b))}function Xg(l,h,g){var b=Yr(l),E={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(Bf(l))Wc(h,E);else{Cl(l,h,E);var I=l.alternate;if(l.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var q=h.lastRenderedState,ae=I(q,g);if(E.hasEagerState=!0,E.eagerState=ae,Ii(ae,q))return}catch{}finally{}g=fn(),l=Ei(l,b,g),l!==null&&Rl(l,h,b)}}function Bf(l){var h=l.alternate;return l===Dn||h!==null&&h===Dn}function Wc(l,h){sa=ah=!0;var g=l.pending;g===null?h.next=h:(h.next=g.next,g.next=h),l.pending=h}function Cl(l,h,g){jn!==null&&(l.mode&1)!==0&&(Kt&2)===0?(l=h.interleaved,l===null?(g.next=g,wr===null?wr=[h]:wr.push(h)):(g.next=l.next,l.next=g),h.interleaved=g):(l=h.pending,l===null?g.next=g:(g.next=l.next,l.next=g),h.pending=g)}function Rl(l,h,g){if((g&4194240)!==0){var b=h.lanes;b&=l.pendingLanes,g|=b,h.lanes=g,ra(l,g)}}var Io={readContext:Gi,useCallback:li,useContext:li,useEffect:li,useImperativeHandle:li,useInsertionEffect:li,useLayoutEffect:li,useMemo:li,useReducer:li,useRef:li,useState:li,useDebugValue:li,useDeferredValue:li,useTransition:li,useMutableSource:li,useSyncExternalStore:li,useId:li,unstable_isNewReconciler:!1},Xc={readContext:Gi,useCallback:function(l,h){return Hr().memoizedState=[l,h===void 0?null:h],l},useContext:Gi,useEffect:uh,useImperativeHandle:function(l,h,g){return g=g!=null?g.concat([l]):null,as(4194308,4,kl.bind(null,h,l),g)},useLayoutEffect:function(l,h){return as(4194308,4,l,h)},useInsertionEffect:function(l,h){return as(4,2,l,h)},useMemo:function(l,h){var g=Hr();return h=h===void 0?null:h,l=l(),g.memoizedState=[l,h],l},useReducer:function(l,h,g){var b=Hr();return h=g!==void 0?g(h):h,b.memoizedState=b.baseState=h,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:h},b.queue=l,l=l.dispatch=Ff.bind(null,Dn,l),[b.memoizedState,l]},useRef:function(l){var h=Hr();return l={current:l},h.memoizedState=l},useState:El,useDebugValue:ch,useDeferredValue:function(l){var h=El(l),g=h[0],b=h[1];return uh(function(){var E=sr.transition;sr.transition={};try{b(l)}finally{sr.transition=E}},[l]),g},useTransition:function(){var l=El(!1),h=l[0];return l=fh.bind(null,l[1]),Hr().memoizedState=l,[h,l]},useMutableSource:function(){},useSyncExternalStore:function(l,h,g){var b=Dn,E=Hr();if(Pn){if(g===void 0)throw Error(u(407));g=g()}else{if(g=h(),jn===null)throw Error(u(349));(Is&30)!==0||jc(b,h,g)}E.memoizedState=g;var I={value:g,getSnapshot:h};return E.queue=I,uh(Ta.bind(null,b,I,l),[l]),b.flags|=2048,Al(9,Gc.bind(null,b,I,g,h),void 0,null),g},useId:function(){var l=Hr(),h=jn.identifierPrefix;if(Pn){var g=Sa,b=wa;g=(b&~(1<<32-ai(b)-1)).toString(32)+g,h=":"+h+"R"+g,g=Ps++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=Sl++,h=":"+h+"r"+g.toString(32)+":";return l.memoizedState=h},unstable_isNewReconciler:!1},Yc={readContext:Gi,useCallback:dh,useContext:Gi,useEffect:ko,useImperativeHandle:Co,useInsertionEffect:En,useLayoutEffect:hh,useMemo:Ro,useReducer:Ml,useRef:Uf,useState:function(){return Ml(oa)},useDebugValue:ch,useDeferredValue:function(l){var h=Ml(oa),g=h[0],b=h[1];return ko(function(){var E=sr.transition;sr.transition={};try{b(l)}finally{sr.transition=E}},[l]),g},useTransition:function(){var l=Ml(oa)[0],h=jr().memoizedState;return[l,h]},useMutableSource:Vc,useSyncExternalStore:Hc,useId:Ls,unstable_isNewReconciler:!1},qc={readContext:Gi,useCallback:dh,useContext:Gi,useEffect:ko,useImperativeHandle:Co,useInsertionEffect:En,useLayoutEffect:hh,useMemo:Ro,useReducer:Tl,useRef:Uf,useState:function(){return Tl(oa)},useDebugValue:ch,useDeferredValue:function(l){var h=Tl(oa),g=h[0],b=h[1];return ko(function(){var E=sr.transition;sr.transition={};try{b(l)}finally{sr.transition=E}},[l]),g},useTransition:function(){var l=Tl(oa)[0],h=jr().memoizedState;return[l,h]},useMutableSource:Vc,useSyncExternalStore:Hc,useId:Ls,unstable_isNewReconciler:!1};function Kc(l,h){try{var g="",b=h;do g+=Ic(b),b=b.return;while(b);var E=g}catch(I){E=`
Error generating stack: `+I.message+`
`+I.stack}return{value:l,source:h,stack:E}}function ph(l,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var Yg=typeof WeakMap=="function"?WeakMap:Map;function zf(l,h,g){g=ba(-1,g),g.tag=3,g.payload={element:null};var b=h.value;return g.callback=function(){Uo||(Uo=!0,In=b),ph(l,h)},g}function mh(l,h,g){g=ba(-1,g),g.tag=3;var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var E=h.value;g.payload=function(){return b(E)},g.callback=function(){ph(l,h)}}var I=l.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(g.callback=function(){ph(l,h),typeof b!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var q=h.stack;this.componentDidCatch(h.value,{componentStack:q!==null?q:""})}),g}function Ea(l,h,g){var b=l.pingCache;if(b===null){b=l.pingCache=new Yg;var E=new Set;b.set(h,E)}else E=b.get(h),E===void 0&&(E=new Set,b.set(h,E));E.has(g)||(E.add(g),l=fd.bind(null,l,h,g),h.then(l,l))}function Zc(l){do{var h;if((h=l.tag===13)&&(h=l.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return l;l=l.return}while(l!==null);return null}function Ns(l,h,g,b,E){return(l.mode&1)===0?(l===h?l.flags|=65536:(l.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=ba(-1,1),h.tag=2,es(g,h))),g.lanes|=1),l):(l.flags|=65536,l.lanes=E,l)}function ei(l){l.flags|=4}function Po(l,h){if(l!==null&&l.child===h.child)return!0;if((h.flags&16)!==0)return!1;for(l=h.child;l!==null;){if((l.flags&12854)!==0||(l.subtreeFlags&12854)!==0)return!1;l=l.sibling}return!0}var or,Ds,gh,vh;if(Lt)or=function(l,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)ie(l,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Ds=function(){},gh=function(l,h,g,b,E){if(l=l.memoizedProps,l!==b){var I=h.stateNode,q=Vr(Wi.current);g=Ye(I,g,l,b,E,q),(h.updateQueue=g)&&ei(h)}},vh=function(l,h,g,b){g!==b&&ei(h)};else if(on){or=function(l,h,g,b){for(var E=h.child;E!==null;){if(E.tag===5){var I=E.stateNode;g&&b&&(I=en(I,E.type,E.memoizedProps,E)),ie(l,I)}else if(E.tag===6)I=E.stateNode,g&&b&&(I=Xn(I,E.memoizedProps,E)),ie(l,I);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)I=E.child,I!==null&&(I.return=E),or(l,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var ss=function(l,h,g,b){for(var E=h.child;E!==null;){if(E.tag===5){var I=E.stateNode;g&&b&&(I=en(I,E.type,E.memoizedProps,E)),lt(l,I)}else if(E.tag===6)I=E.stateNode,g&&b&&(I=Xn(I,E.memoizedProps,E)),lt(l,I);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)I=E.child,I!==null&&(I.return=E),ss(l,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Ds=function(l,h){var g=h.stateNode;if(!Po(l,h)){l=g.containerInfo;var b=ke(l);ss(b,h,!1,!1),g.pendingChildren=b,ei(h),Pt(l,b)}},gh=function(l,h,g,b,E){var I=l.stateNode,q=l.memoizedProps;if((l=Po(l,h))&&q===b)h.stateNode=I;else{var ae=h.stateNode,Ee=Vr(Wi.current),qe=null;q!==b&&(qe=Ye(ae,g,q,b,E,Ee)),l&&qe===null?h.stateNode=I:(I=We(I,qe,g,q,b,h,l,ae),Ce(I,g,b,E,Ee)&&ei(h),h.stateNode=I,l?ei(h):or(I,h,!1,!1))}},vh=function(l,h,g,b){g!==b?(l=Vr(Cs.current),g=Vr(Wi.current),h.stateNode=he(b,l,g,h),ei(h)):h.stateNode=l.stateNode}}else Ds=function(){},gh=function(){},vh=function(){};function Aa(l,h){if(!Pn)switch(l.tailMode){case"hidden":h=l.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Hn(l){var h=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(h)for(var E=l.child;E!==null;)g|=E.lanes|E.childLanes,b|=E.subtreeFlags&14680064,b|=E.flags&14680064,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)g|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=b,l.childLanes=g,h}function yh(l,h,g){var b=h.pendingProps;switch(Uc(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(h),null;case 1:return gt(h.type)&&dn(),Hn(h),null;case 3:return b=h.stateNode,Eo(),tt(an),tt(jt),Rs(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(l===null||l.child===null)&&(bl(h)?ei(h):l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Tr!==null&&(jl(Tr),Tr=null))),Ds(l,h),Hn(h),null;case 5:zc(h),g=Vr(Cs.current);var E=h.type;if(l!==null&&h.stateNode!=null)gh(l,h,E,b,g),l.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(u(166));return Hn(h),null}if(l=Vr(Wi.current),bl(h)){if(!yt)throw Error(u(175));l=go(h.stateNode,h.type,h.memoizedProps,g,l,h,!bo),h.updateQueue=l,l!==null&&ei(h)}else{var I=j(E,b,g,l,h);or(I,h,!1,!1),h.stateNode=I,Ce(I,E,b,g,l)&&ei(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Hn(h),null;case 6:if(l&&h.stateNode!=null)vh(l,h,l.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(u(166));if(l=Vr(Cs.current),g=Vr(Wi.current),bl(h)){if(!yt)throw Error(u(176));if(l=h.stateNode,b=h.memoizedProps,(g=na(l,b,h,!bo))&&(E=Li,E!==null))switch(I=(E.mode&1)!==0,E.tag){case 3:V(E.stateNode.containerInfo,l,b,I);break;case 5:oe(E.type,E.memoizedProps,E.stateNode,l,b,I)}g&&ei(h)}else h.stateNode=he(b,l,g,h)}return Hn(h),null;case 13:if(tt(Nn),b=h.memoizedState,Pn&&fi!==null&&(h.mode&1)!==0&&(h.flags&128)===0){for(l=fi;l;)l=Fr(l);return wo(),h.flags|=98560,h}if(b!==null&&b.dehydrated!==null){if(b=bl(h),l===null){if(!b)throw Error(u(318));if(!yt)throw Error(u(344));if(l=h.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(u(317));ml(l,h)}else wo(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;return Hn(h),null}return Tr!==null&&(jl(Tr),Tr=null),(h.flags&128)!==0?(h.lanes=g,h):(b=b!==null,g=!1,l===null?bl(h):g=l.memoizedState!==null,b&&!g&&(h.child.flags|=8192,(h.mode&1)!==0&&(l===null||(Nn.current&1)!==0?zn===0&&(zn=3):Th())),h.updateQueue!==null&&(h.flags|=4),Hn(h),null);case 4:return Eo(),Ds(l,h),l===null&&X(h.stateNode.containerInfo),Hn(h),null;case 10:return _l(h.type._context),Hn(h),null;case 17:return gt(h.type)&&dn(),Hn(h),null;case 19:if(tt(Nn),E=h.memoizedState,E===null)return Hn(h),null;if(b=(h.flags&128)!==0,I=E.rendering,I===null)if(b)Aa(E,!1);else{if(zn!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(I=rh(l),I!==null){for(h.flags|=128,Aa(E,!1),l=I.updateQueue,l!==null&&(h.updateQueue=l,h.flags|=4),h.subtreeFlags=0,l=g,b=h.child;b!==null;)g=b,E=l,g.flags&=14680066,I=g.alternate,I===null?(g.childLanes=0,g.lanes=E,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=I.childLanes,g.lanes=I.lanes,g.child=I.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=I.memoizedProps,g.memoizedState=I.memoizedState,g.updateQueue=I.updateQueue,g.type=I.type,E=I.dependencies,g.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),b=b.sibling;return rt(Nn,Nn.current&1|2),h.child}l=l.sibling}E.tail!==null&&$n()>us&&(h.flags|=128,b=!0,Aa(E,!1),h.lanes=4194304)}else{if(!b)if(l=rh(I),l!==null){if(h.flags|=128,b=!0,l=l.updateQueue,l!==null&&(h.updateQueue=l,h.flags|=4),Aa(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!Pn)return Hn(h),null}else 2*$n()-E.renderingStartTime>us&&g!==1073741824&&(h.flags|=128,b=!0,Aa(E,!1),h.lanes=4194304);E.isBackwards?(I.sibling=h.child,h.child=I):(l=E.last,l!==null?l.sibling=I:h.child=I,E.last=I)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=$n(),h.sibling=null,l=Nn.current,rt(Nn,b?l&1|2:l&1),h):(Hn(h),null);case 22:case 23:return Gl(),b=h.memoizedState!==null,l!==null&&l.memoizedState!==null!==b&&(h.flags|=8192),b&&(h.mode&1)!==0?(Ti&1073741824)!==0&&(Hn(h),Lt&&h.subtreeFlags&6&&(h.flags|=8192)):Hn(h),null;case 24:return null;case 25:return null}throw Error(u(156,h.tag))}var Jc=c.ReactCurrentOwner,ui=!1;function Bn(l,h,g,b){h.child=l===null?Df(h,null,g,b):Ma(h,l.child,g,b)}function An(l,h,g,b,E){g=g.render;var I=h.ref;return yo(h,E),b=Ao(l,h,g,b,I,E),g=rs(),l!==null&&!ui?(h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~E,Xi(l,h,E)):(Pn&&g&&Oc(h),h.flags|=1,Bn(l,h,b,E),h.child)}function Mn(l,h,g,b,E){if(l===null){var I=g.type;return typeof I=="function"&&!Ah(I)&&I.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=I,ka(l,h,I,b,E)):(l=kh(g.type,null,b,h,h.mode,E),l.ref=h.ref,l.return=h,h.child=l)}if(I=l.child,(l.lanes&E)===0){var q=I.memoizedProps;if(g=g.compare,g=g!==null?g:zr,g(q,b)&&l.ref===h.ref)return Xi(l,h,E)}return h.flags|=1,l=Ua(I,b),l.ref=h.ref,l.return=h,h.child=l}function ka(l,h,g,b,E){if(l!==null&&zr(l.memoizedProps,b)&&l.ref===h.ref)if(ui=!1,(l.lanes&E)!==0)(l.flags&131072)!==0&&(ui=!0);else return h.lanes=l.lanes,Xi(l,h,E);return Ca(l,h,g,b,E)}function pi(l,h,g){var b=h.pendingProps,E=b.children,I=l!==null?l.memoizedState:null;if(b.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null},rt(Gs,Ti),Ti|=g;else if((g&1073741824)!==0)h.memoizedState={baseLanes:0,cachePool:null},b=I!==null?I.baseLanes:g,rt(Gs,Ti),Ti|=b;else return l=I!==null?I.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:l,cachePool:null},h.updateQueue=null,rt(Gs,Ti),Ti|=l,null;else I!==null?(b=I.baseLanes|g,h.memoizedState=null):b=g,rt(Gs,Ti),Ti|=b;return Bn(l,h,E,g),h.child}function Ni(l,h){var g=h.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function Ca(l,h,g,b,E){var I=gt(g)?xn:jt.current;return I=sn(h,I),yo(h,E),g=Ao(l,h,g,b,I,E),b=rs(),l!==null&&!ui?(h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~E,Xi(l,h,E)):(Pn&&b&&Oc(h),h.flags|=1,Bn(l,h,g,E),h.child)}function Os(l,h,g,b,E){if(gt(g)){var I=!0;Br(h)}else I=!1;if(yo(h,E),h.stateNode===null)l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2),Rf(h,g,b),Dc(h,g,b,E),b=!0;else if(l===null){var q=h.stateNode,ae=h.memoizedProps;q.props=ae;var Ee=q.context,qe=g.contextType;typeof qe=="object"&&qe!==null?qe=Gi(qe):(qe=gt(g)?xn:jt.current,qe=sn(h,qe));var _t=g.getDerivedStateFromProps,Xt=typeof _t=="function"||typeof q.getSnapshotBeforeUpdate=="function";Xt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ae!==b||Ee!==qe)&&If(h,q,b,qe),Sr=!1;var Ot=h.memoizedState;q.state=Ot,Ju(h,b,q,E),Ee=h.memoizedState,ae!==b||Ot!==Ee||an.current||Sr?(typeof _t=="function"&&(Lc(h,g,_t,b),Ee=h.memoizedState),(ae=Sr||Nc(h,g,ae,b,Ot,Ee,qe))?(Xt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(h.flags|=4194308)):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=Ee),q.props=b,q.state=Ee,q.context=qe,b=ae):(typeof q.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{q=h.stateNode,Pc(l,h),ae=h.memoizedProps,qe=h.type===h.elementType?ae:ji(h.type,ae),q.props=qe,Xt=h.pendingProps,Ot=q.context,Ee=g.contextType,typeof Ee=="object"&&Ee!==null?Ee=Gi(Ee):(Ee=gt(g)?xn:jt.current,Ee=sn(h,Ee));var Qt=g.getDerivedStateFromProps;(_t=typeof Qt=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ae!==Xt||Ot!==Ee)&&If(h,q,b,Ee),Sr=!1,Ot=h.memoizedState,q.state=Ot,Ju(h,b,q,E);var mt=h.memoizedState;ae!==Xt||Ot!==mt||an.current||Sr?(typeof Qt=="function"&&(Lc(h,g,Qt,b),mt=h.memoizedState),(qe=Sr||Nc(h,g,qe,b,Ot,mt,Ee)||!1)?(_t||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(b,mt,Ee),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(b,mt,Ee)),typeof q.componentDidUpdate=="function"&&(h.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof q.componentDidUpdate!="function"||ae===l.memoizedProps&&Ot===l.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ae===l.memoizedProps&&Ot===l.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=mt),q.props=b,q.state=mt,q.context=Ee,b=qe):(typeof q.componentDidUpdate!="function"||ae===l.memoizedProps&&Ot===l.memoizedState||(h.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ae===l.memoizedProps&&Ot===l.memoizedState||(h.flags|=1024),b=!1)}return Mi(l,h,g,b,I,E)}function Mi(l,h,g,b,E,I){Ni(l,h);var q=(h.flags&128)!==0;if(!b&&!q)return E&&ri(h,g,!1),Xi(l,h,I);b=h.stateNode,Jc.current=h;var ae=q&&typeof g.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,l!==null&&q?(h.child=Ma(h,l.child,null,I),h.child=Ma(h,null,ae,I)):Bn(l,h,ae,I),h.memoizedState=b.state,E&&ri(h,g,!0),h.child}function Il(l){var h=l.stateNode;h.pendingContext?rn(l,h.pendingContext,h.pendingContext!==h.context):h.context&&rn(l,h.context,!1),ih(l,h.containerInfo)}function Qc(l,h,g,b,E){return wo(),nh(E),h.flags|=256,Bn(l,h,g,b),h.child}var Pl={dehydrated:null,treeContext:null,retryLane:0};function Us(l){return{baseLanes:l,cachePool:null}}function $c(l,h,g){var b=h.pendingProps,E=Nn.current,I=!1,q=(h.flags&128)!==0,ae;if((ae=q)||(ae=l!==null&&l.memoizedState===null?!1:(E&2)!==0),ae?(I=!0,h.flags&=-129):(l===null||l.memoizedState!==null)&&(E|=1),rt(Nn,E&1),l===null)return ns(h),l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((h.mode&1)===0?h.lanes=1:Ri(l)?h.lanes=8:h.lanes=1073741824,null):(E=b.children,l=b.fallback,I?(b=h.mode,I=h.child,E={mode:"hidden",children:E},(b&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=E):I=Yl(E,b,0,null),l=Ks(l,b,g,null),I.return=h,l.return=h,I.sibling=l,h.child=I,h.child.memoizedState=Us(g),h.memoizedState=Pl,l):Gr(h,E));if(E=l.memoizedState,E!==null){if(ae=E.dehydrated,ae!==null){if(q)return h.flags&256?(h.flags&=-257,Nl(l,h,g,Error(u(422)))):h.memoizedState!==null?(h.child=l.child,h.flags|=128,null):(I=b.fallback,E=h.mode,b=Yl({mode:"visible",children:b.children},E,0,null),I=Ks(I,E,g,null),I.flags|=2,b.return=h,I.return=h,b.sibling=I,h.child=b,(h.mode&1)!==0&&Ma(h,l.child,null,g),h.child.memoizedState=Us(g),h.memoizedState=Pl,I);if((h.mode&1)===0)h=Nl(l,h,g,null);else if(Ri(ae))h=Nl(l,h,g,Error(u(419)));else if(b=(g&l.childLanes)!==0,ui||b){if(b=jn,b!==null){switch(g&-g){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}b=(I&(b.suspendedLanes|g))!==0?0:I,b!==0&&b!==E.retryLane&&(E.retryLane=b,Ei(l,b,-1))}Th(),h=Nl(l,h,g,Error(u(421)))}else pl(ae)?(h.flags|=128,h.child=l.child,h=Wf.bind(null,l),Qa(ae,h),h=null):(g=E.treeContext,yt&&(fi=Lu(ae),Li=h,Pn=!0,Tr=null,bo=!1,g!==null&&(Mr[rr++]=wa,Mr[rr++]=Sa,Mr[rr++]=Es,wa=g.id,Sa=g.overflow,Es=h)),h=Gr(h,h.pendingProps.children),h.flags|=4096);return h}return I?(b=xh(l,h,b.children,b.fallback,g),I=h.child,E=l.child.memoizedState,I.memoizedState=E===null?Us(g):{baseLanes:E.baseLanes|g,cachePool:null},I.childLanes=l.childLanes&~g,h.memoizedState=Pl,b):(g=Ll(l,h,b.children,g),h.memoizedState=null,g)}return I?(b=xh(l,h,b.children,b.fallback,g),I=h.child,E=l.child.memoizedState,I.memoizedState=E===null?Us(g):{baseLanes:E.baseLanes|g,cachePool:null},I.childLanes=l.childLanes&~g,h.memoizedState=Pl,b):(g=Ll(l,h,b.children,g),h.memoizedState=null,g)}function Gr(l,h){return h=Yl({mode:"visible",children:h},l.mode,0,null),h.return=l,l.child=h}function Ll(l,h,g,b){var E=l.child;return l=E.sibling,g=Ua(E,{mode:"visible",children:g}),(h.mode&1)===0&&(g.lanes=b),g.return=h,g.sibling=null,l!==null&&(b=h.deletions,b===null?(h.deletions=[l],h.flags|=16):b.push(l)),h.child=g}function xh(l,h,g,b,E){var I=h.mode;l=l.child;var q=l.sibling,ae={mode:"hidden",children:g};return(I&1)===0&&h.child!==l?(g=h.child,g.childLanes=0,g.pendingProps=ae,h.deletions=null):(g=Ua(l,ae),g.subtreeFlags=l.subtreeFlags&14680064),q!==null?b=Ua(q,b):(b=Ks(b,I,E,null),b.flags|=2),b.return=h,g.return=h,g.sibling=b,h.child=g,b}function Nl(l,h,g,b){return b!==null&&nh(b),Ma(h,l.child,null,g),l=Gr(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function Vf(l,h,g){l.lanes|=h;var b=l.alternate;b!==null&&(b.lanes|=h),Ts(l.return,h,g)}function la(l,h,g,b,E){var I=l.memoizedState;I===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:E}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=b,I.tail=g,I.tailMode=E)}function Fs(l,h,g){var b=h.pendingProps,E=b.revealOrder,I=b.tail;if(Bn(l,h,b.children,g),b=Nn.current,(b&2)!==0)b=b&1|2,h.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Vf(l,g,h);else if(l.tag===19)Vf(l,g,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break e;for(;l.sibling===null;){if(l.return===null||l.return===h)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}if(rt(Nn,b),(h.mode&1)===0)h.memoizedState=null;else switch(E){case"forwards":for(g=h.child,E=null;g!==null;)l=g.alternate,l!==null&&rh(l)===null&&(E=g),g=g.sibling;g=E,g===null?(E=h.child,h.child=null):(E=g.sibling,g.sibling=null),la(h,!1,E,g,I);break;case"backwards":for(g=null,E=h.child,h.child=null;E!==null;){if(l=E.alternate,l!==null&&rh(l)===null){h.child=E;break}l=E.sibling,E.sibling=g,g=E,E=l}la(h,!0,g,null,I);break;case"together":la(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Xi(l,h,g){if(l!==null&&(h.dependencies=l.dependencies),ua|=h.lanes,(g&h.childLanes)===0)return null;if(l!==null&&h.child!==l.child)throw Error(u(153));if(h.child!==null){for(l=h.child,g=Ua(l,l.pendingProps),h.child=g,g.return=h;l.sibling!==null;)l=l.sibling,g=g.sibling=Ua(l,l.pendingProps),g.return=h;g.sibling=null}return h.child}function _h(l,h,g){switch(h.tag){case 3:Il(h),wo();break;case 5:Of(h);break;case 1:gt(h.type)&&Br(h);break;case 4:ih(h,h.stateNode.containerInfo);break;case 10:Ms(h,h.type._context,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(rt(Nn,Nn.current&1),h.flags|=128,null):(g&h.child.childLanes)!==0?$c(l,h,g):(rt(Nn,Nn.current&1),l=Xi(l,h,g),l!==null?l.sibling:null);rt(Nn,Nn.current&1);break;case 19:if(b=(g&h.childLanes)!==0,(l.flags&128)!==0){if(b)return Fs(l,h,g);h.flags|=128}var E=h.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),rt(Nn,Nn.current),b)break;return null;case 22:case 23:return h.lanes=0,pi(l,h,g)}return Xi(l,h,g)}function bh(l,h){switch(Uc(h),h.tag){case 1:return gt(h.type)&&dn(),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return Eo(),tt(an),tt(jt),Rs(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 5:return zc(h),null;case 13:if(tt(Nn),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(u(340));wo()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return tt(Nn),null;case 4:return Eo(),null;case 10:return _l(h.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var Di=!1,hi=!1,Bs=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Er(l,h){var g=l.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){Ui(l,h,b)}else g.current=null}function Ra(l,h,g){try{g()}catch(b){Ui(l,h,b)}}var ed=!1;function td(l,h){for(Q(l.containerInfo),nt=h;nt!==null;)if(l=nt,h=l.child,(l.subtreeFlags&1028)!==0&&h!==null)h.return=l,nt=h;else for(;nt!==null;){l=nt;try{var g=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,E=g.memoizedState,I=l.stateNode,q=I.getSnapshotBeforeUpdate(l.elementType===l.type?b:ji(l.type,b),E);I.__reactInternalSnapshotBeforeUpdate=q}break;case 3:Lt&&Ge(l.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(ae){Ui(l,l.return,ae)}if(h=l.sibling,h!==null){h.return=l.return,nt=h;break}nt=l.return}return g=ed,ed=!1,g}function Ia(l,h,g){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var E=b=b.next;do{if((E.tag&l)===l){var I=E.destroy;E.destroy=void 0,I!==void 0&&Ra(h,g,I)}E=E.next}while(E!==b)}}function mi(l,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&l)===l){var b=g.create;g.destroy=b()}g=g.next}while(g!==h)}}function Oi(l){var h=l.ref;if(h!==null){var g=l.stateNode;switch(l.tag){case 5:l=ye(g);break;default:l=g}typeof h=="function"?h(l):h.current=l}}function Rn(l,h,g){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount(gl,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(l=h.updateQueue,l!==null&&(l=l.lastEffect,l!==null)){var b=l=l.next;do{var E=b,I=E.destroy;E=E.tag,I!==void 0&&((E&2)!==0||(E&4)!==0)&&Ra(h,g,I),b=b.next}while(b!==l)}break;case 1:if(Er(h,g),l=h.stateNode,typeof l.componentWillUnmount=="function")try{l.props=h.memoizedProps,l.state=h.memoizedState,l.componentWillUnmount()}catch(q){Ui(h,g,q)}break;case 5:Er(h,g);break;case 4:Lt?rd(l,h,g):on&&on&&(h=h.stateNode.containerInfo,g=ke(h),un(h,g))}}function Ar(l,h,g){for(var b=h;;)if(Rn(l,b,g),b.child===null||Lt&&b.tag===4){if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function nd(l){var h=l.alternate;h!==null&&(l.alternate=null,nd(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&Be(h)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function id(l){return l.tag===5||l.tag===3||l.tag===4}function wh(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||id(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Sh(l){if(Lt){e:{for(var h=l.return;h!==null;){if(id(h))break e;h=h.return}throw Error(u(160))}var g=h;switch(g.tag){case 5:h=g.stateNode,g.flags&32&&(ge(h),g.flags&=-33),g=wh(l),Lo(l,g,h);break;case 3:case 4:h=g.stateNode.containerInfo,g=wh(l),Mh(l,g,h);break;default:throw Error(u(161))}}}function Mh(l,h,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,h?Je(g,l,h):Mt(g,l);else if(b!==4&&(l=l.child,l!==null))for(Mh(l,h,g),l=l.sibling;l!==null;)Mh(l,h,g),l=l.sibling}function Lo(l,h,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,h?Ne(g,l,h):Se(g,l);else if(b!==4&&(l=l.child,l!==null))for(Lo(l,h,g),l=l.sibling;l!==null;)Lo(l,h,g),l=l.sibling}function rd(l,h,g){for(var b=h,E=!1,I,q;;){if(!E){E=b.return;e:for(;;){if(E===null)throw Error(u(160));switch(I=E.stateNode,E.tag){case 5:q=!1;break e;case 3:I=I.containerInfo,q=!0;break e;case 4:I=I.containerInfo,q=!0;break e}E=E.return}E=!0}if(b.tag===5||b.tag===6)Ar(l,b,g),q?$(I,b.stateNode):Dt(I,b.stateNode);else if(b.tag===18)q?Fu(I,b.stateNode):Uu(I,b.stateNode);else if(b.tag===4){if(b.child!==null){I=b.stateNode.containerInfo,q=!0,b.child.return=b,b=b.child;continue}}else if(Rn(l,b,g),b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return,b.tag===4&&(E=!1)}b.sibling.return=b.return,b=b.sibling}}function os(l,h){if(Lt){switch(h.tag){case 0:case 11:case 14:case 15:Ia(3,h,h.return),mi(3,h),Ia(5,h,h.return);return;case 1:return;case 5:var g=h.stateNode;if(g!=null){var b=h.memoizedProps;l=l!==null?l.memoizedProps:b;var E=h.type,I=h.updateQueue;h.updateQueue=null,I!==null&&wt(g,I,E,l,b,h)}return;case 6:if(h.stateNode===null)throw Error(u(162));g=h.memoizedProps,et(h.stateNode,l!==null?l.memoizedProps:g,g);return;case 3:yt&&l!==null&&l.memoizedState.isDehydrated&&Du(h.stateNode.containerInfo);return;case 12:return;case 13:No(h);return;case 19:No(h);return;case 17:return}throw Error(u(163))}switch(h.tag){case 0:case 11:case 14:case 15:Ia(3,h,h.return),mi(3,h),Ia(5,h,h.return);return;case 12:return;case 13:No(h);return;case 19:No(h);return;case 3:yt&&l!==null&&l.memoizedState.isDehydrated&&Du(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(on){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,un(h.containerInfo,h.pendingChildren);break e}throw Error(u(163))}}function No(l){var h=l.updateQueue;if(h!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new Bs),h.forEach(function(b){var E=Xf.bind(null,l,b);g.has(b)||(g.add(b),b.then(E,E))})}}function qg(l,h){for(nt=h;nt!==null;){h=nt;var g=h.deletions;if(g!==null)for(var b=0;b<g.length;b++){var E=g[b];try{var I=l;Lt?rd(I,E,h):Ar(I,E,h);var q=E.alternate;q!==null&&(q.return=null),E.return=null}catch(Rt){Ui(E,h,Rt)}}if(g=h.child,(h.subtreeFlags&12854)!==0&&g!==null)g.return=h,nt=g;else for(;nt!==null;){h=nt;try{var ae=h.flags;if(ae&32&&Lt&&ge(h.stateNode),ae&512){var Ee=h.alternate;if(Ee!==null){var qe=Ee.ref;qe!==null&&(typeof qe=="function"?qe(null):qe.current=null)}}if(ae&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var _t=h.alternate;(_t===null||_t.memoizedState===null)&&(Vl=$n())}break;case 22:var Xt=h.memoizedState!==null,Ot=h.alternate,Qt=Ot!==null&&Ot.memoizedState!==null;if(g=h,Lt){e:if(b=g,E=Xt,I=null,Lt)for(var mt=b;;){if(mt.tag===5){if(I===null){I=mt;var yi=mt.stateNode;E?ze(yi):Ve(mt.stateNode,mt.memoizedProps)}}else if(mt.tag===6){if(I===null){var dr=mt.stateNode;E?J(dr):He(dr,mt.memoizedProps)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===b)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===b)break;for(;mt.sibling===null;){if(mt.return===null||mt.return===b)break e;I===mt&&(I=null),mt=mt.return}I===mt&&(I=null),mt.sibling.return=mt.return,mt=mt.sibling}}if(Xt&&!Qt&&(g.mode&1)!==0){nt=g;for(var ve=g.child;ve!==null;){for(g=nt=ve;nt!==null;){b=nt;var se=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Ia(4,b,b.return);break;case 1:Er(b,b.return);var Me=b.stateNode;if(typeof Me.componentWillUnmount=="function"){var ct=b.return;try{Me.props=b.memoizedProps,Me.state=b.memoizedState,Me.componentWillUnmount()}catch(Rt){Ui(b,ct,Rt)}}break;case 5:Er(b,b.return);break;case 22:if(b.memoizedState!==null){sd(g);continue}}se!==null?(se.return=b,nt=se):sd(g)}ve=ve.sibling}}}switch(ae&4102){case 2:Sh(h),h.flags&=-3;break;case 6:Sh(h),h.flags&=-3,os(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,os(h.alternate,h);break;case 4:os(h.alternate,h)}}catch(Rt){Ui(h,h.return,Rt)}if(g=h.sibling,g!==null){g.return=h.return,nt=g;break}nt=h.return}}}function Dl(l,h,g){nt=l,Ol(l)}function Ol(l,h,g){for(var b=(l.mode&1)!==0;nt!==null;){var E=nt,I=E.child;if(E.tag===22&&b){var q=E.memoizedState!==null||Di;if(!q){var ae=E.alternate,Ee=ae!==null&&ae.memoizedState!==null||hi;ae=Di;var qe=hi;if(Di=q,(hi=Ee)&&!qe)for(nt=E;nt!==null;)q=nt,Ee=q.child,q.tag===22&&q.memoizedState!==null?zs(E):Ee!==null?(Ee.return=q,nt=Ee):zs(E);for(;I!==null;)nt=I,Ol(I),I=I.sibling;nt=E,Di=ae,hi=qe}ad(l)}else(E.subtreeFlags&8772)!==0&&I!==null?(I.return=E,nt=I):ad(l)}}function ad(l){for(;nt!==null;){var h=nt;if((h.flags&8772)!==0){var g=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:hi||mi(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!hi)if(g===null)b.componentDidMount();else{var E=h.elementType===h.type?g.memoizedProps:ji(h.type,g.memoizedProps);b.componentDidUpdate(E,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&kf(h,I,b);break;case 3:var q=h.updateQueue;if(q!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=ye(h.child.stateNode);break;case 1:g=h.child.stateNode}kf(h,q,g)}break;case 5:var ae=h.stateNode;g===null&&h.flags&4&&Tt(ae,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(yt&&h.memoizedState===null){var Ee=h.alternate;if(Ee!==null){var qe=Ee.memoizedState;if(qe!==null){var _t=qe.dehydrated;_t!==null&&Ou(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(u(163))}hi||h.flags&512&&Oi(h)}catch(Xt){Ui(h,h.return,Xt)}}if(h===l){nt=null;break}if(g=h.sibling,g!==null){g.return=h.return,nt=g;break}nt=h.return}}function sd(l){for(;nt!==null;){var h=nt;if(h===l){nt=null;break}var g=h.sibling;if(g!==null){g.return=h.return,nt=g;break}nt=h.return}}function zs(l){for(;nt!==null;){var h=nt;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{mi(4,h)}catch(Ee){Ui(h,g,Ee)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var E=h.return;try{b.componentDidMount()}catch(Ee){Ui(h,E,Ee)}}var I=h.return;try{Oi(h)}catch(Ee){Ui(h,I,Ee)}break;case 5:var q=h.return;try{Oi(h)}catch(Ee){Ui(h,q,Ee)}}}catch(Ee){Ui(h,h.return,Ee)}if(h===l){nt=null;break}var ae=h.sibling;if(ae!==null){ae.return=h.return,nt=ae;break}nt=h.return}}var Ul=0,Vs=1,Hs=2,Pa=3,Do=4;if(typeof Symbol=="function"&&Symbol.for){var js=Symbol.for;Ul=js("selector.component"),Vs=js("selector.has_pseudo_class"),Hs=js("selector.role"),Pa=js("selector.test_id"),Do=js("selector.text")}function Fl(l){var h=Pe(l);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(u(364));return h}if(l=$e(l),l===null)throw Error(u(362));return l.stateNode.current}function Bl(l,h){switch(h.$$typeof){case Ul:if(l.type===h.value)return!0;break;case Vs:e:{h=h.value,l=[l,0];for(var g=0;g<l.length;){var b=l[g++],E=l[g++],I=h[E];if(b.tag!==5||!O(b)){for(;I!=null&&Bl(b,I);)E++,I=h[E];if(E===h.length){h=!0;break e}else for(b=b.child;b!==null;)l.push(b,E),b=b.sibling}}h=!1}return h;case Hs:if(l.tag===5&&ue(l.stateNode,h.value))return!0;break;case Do:if((l.tag===5||l.tag===6)&&(l=W(l),l!==null&&0<=l.indexOf(h.value)))return!0;break;case Pa:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function ls(l){switch(l.$$typeof){case Ul:return"<"+(z(l.value)||"Unknown")+">";case Vs:return":has("+(ls(l)||"")+")";case Hs:return'[role="'+l.value+'"]';case Do:return'"'+l.value+'"';case Pa:return'[data-testname="'+l.value+'"]';default:throw Error(u(365))}}function lr(l,h){var g=[];l=[l,0];for(var b=0;b<l.length;){var E=l[b++],I=l[b++],q=h[I];if(E.tag!==5||!O(E)){for(;q!=null&&Bl(E,q);)I++,q=h[I];if(I===h.length)g.push(E);else for(E=E.child;E!==null;)l.push(E,I),E=E.sibling}}return g}function La(l,h){if(!ot)throw Error(u(363));l=Fl(l),l=lr(l,h),h=[],l=Array.from(l);for(var g=0;g<l.length;){var b=l[g++];if(b.tag===5)O(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)l.push(b),b=b.sibling}return h}var od=Math.ceil,zl=c.ReactCurrentDispatcher,Wr=c.ReactCurrentOwner,bn=c.ReactCurrentBatchConfig,Kt=0,jn=null,wn=null,Ln=0,Ti=0,Gs=kt(0),zn=0,Oo=null,ua=0,ur=0,Ws=0,Na=null,qn=null,Vl=0,us=1/0;function Xs(){us=$n()+500}var Uo=!1,In=null,Xr=null,Fo=!1,ha=null,Ys=0,qs=0,Da=null,kn=-1,Vn=0;function fn(){return(Kt&6)!==0?$n():kn!==-1?kn:kn=$n()}function Yr(l){return(l.mode&1)===0?1:(Kt&2)!==0&&Ln!==0?Ln&-Ln:Af.transition!==null?(Vn===0&&(l=Fn,Fn<<=1,(Fn&4194240)===0&&(Fn=64),Vn=l),Vn):(l=tn,l!==0?l:Le())}function Ei(l,h,g){if(50<qs)throw qs=0,Da=null,Error(u(185));var b=hs(l,h);return b===null?null:(_s(b,h,g),((Kt&2)===0||b!==jn)&&(b===jn&&((Kt&2)===0&&(ur|=h),zn===4&&vi(b,Ln)),Yi(b,g),h===1&&Kt===0&&(l.mode&1)===0&&(Xs(),Wu&&br())),b)}function hs(l,h){l.lanes|=h;var g=l.alternate;for(g!==null&&(g.lanes|=h),g=l,l=l.return;l!==null;)l.childLanes|=h,g=l.alternate,g!==null&&(g.childLanes|=h),g=l,l=l.return;return g.tag===3?g.stateNode:null}function Yi(l,h){var g=l.callbackNode;Ef(l,h);var b=ir(l,l===jn?Ln:0);if(b===0)g!==null&&vo(g),l.callbackNode=null,l.callbackPriority=0;else if(h=b&-b,l.callbackPriority!==h){if(g!=null&&vo(g),h===1)l.tag===0?Yu(hr.bind(null,l)):Xu(hr.bind(null,l)),Ke?Oe(function(){Kt===0&&br()}):bs(ws,br),g=null;else{switch(xa(b)){case 1:g=ws;break;case 4:g=Wg;break;case 16:g=ju;break;case 536870912:g=Gu;break;default:g=ju}g=Eh(g,gi.bind(null,l))}l.callbackPriority=h,l.callbackNode=g}}function gi(l,h){if(kn=-1,Vn=0,(Kt&6)!==0)throw Error(u(327));var g=l.callbackNode;if(ca()&&l.callbackNode!==g)return null;var b=ir(l,l===jn?Ln:0);if(b===0)return null;if((b&30)!==0||(b&l.expiredLanes)!==0||h)h=Wl(l,b);else{h=b;var E=Kt;Kt|=2;var I=hd();(jn!==l||Ln!==h)&&(Xs(),Oa(l,h));do try{jf();break}catch(ae){ud(l,ae)}while(!0);Pi(),zl.current=I,Kt=E,wn!==null?h=0:(jn=null,Ln=0,h=zn)}if(h!==0){if(h===2&&(E=zu(l),E!==0&&(b=E,h=Hl(l,E))),h===1)throw g=Oo,Oa(l,0),vi(l,b),Yi(l,$n()),g;if(h===6)vi(l,b);else{if(E=l.current.alternate,(b&30)===0&&!ld(E)&&(h=Wl(l,b),h===2&&(I=zu(l),I!==0&&(b=I,h=Hl(l,I))),h===1))throw g=Oo,Oa(l,0),vi(l,b),Yi(l,$n()),g;switch(l.finishedWork=E,l.finishedLanes=b,h){case 0:case 1:throw Error(u(345));case 2:qr(l,qn);break;case 3:if(vi(l,b),(b&130023424)===b&&(h=Vl+500-$n(),10<h)){if(ir(l,0)!==0)break;if(E=l.suspendedLanes,(E&b)!==b){fn(),l.pingedLanes|=l.suspendedLanes&E;break}l.timeoutHandle=be(qr.bind(null,l,qn),h);break}qr(l,qn);break;case 4:if(vi(l,b),(b&4194240)===b)break;for(h=l.eventTimes,E=-1;0<b;){var q=31-ai(b);I=1<<q,q=h[q],q>E&&(E=q),b&=~I}if(b=E,b=$n()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*od(b/1960))-b,10<b){l.timeoutHandle=be(qr.bind(null,l,qn),b);break}qr(l,qn);break;case 5:qr(l,qn);break;default:throw Error(u(329))}}}return Yi(l,$n()),l.callbackNode===g?gi.bind(null,l):null}function Hl(l,h){var g=Na;return l.current.memoizedState.isDehydrated&&(Oa(l,h).flags|=256),l=Wl(l,h),l!==2&&(h=qn,qn=g,h!==null&&jl(h)),l}function jl(l){qn===null?qn=l:qn.push.apply(qn,l)}function ld(l){for(var h=l;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var b=0;b<g.length;b++){var E=g[b],I=E.getSnapshot;E=E.value;try{if(!Ii(I(),E))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function vi(l,h){for(h&=~Ws,h&=~ur,l.suspendedLanes|=h,l.pingedLanes&=~h,l=l.expirationTimes;0<h;){var g=31-ai(h),b=1<<g;l[g]=-1,h&=~b}}function hr(l){if((Kt&6)!==0)throw Error(u(327));ca();var h=ir(l,0);if((h&1)===0)return Yi(l,$n()),null;var g=Wl(l,h);if(l.tag!==0&&g===2){var b=zu(l);b!==0&&(h=b,g=Hl(l,b))}if(g===1)throw g=Oo,Oa(l,0),vi(l,h),Yi(l,$n()),g;if(g===6)throw Error(u(345));return l.finishedWork=l.current.alternate,l.finishedLanes=h,qr(l,qn),Yi(l,$n()),null}function Bo(l){ha!==null&&ha.tag===0&&(Kt&6)===0&&ca();var h=Kt;Kt|=1;var g=bn.transition,b=tn;try{if(bn.transition=null,tn=1,l)return l()}finally{tn=b,bn.transition=g,Kt=h,(Kt&6)===0&&br()}}function Gl(){Ti=Gs.current,tt(Gs)}function Oa(l,h){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==it&&(l.timeoutHandle=it,Fe(g)),wn!==null)for(g=wn.return;g!==null;){var b=g;switch(Uc(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&dn();break;case 3:Eo(),tt(an),tt(jt),Rs();break;case 5:zc(b);break;case 4:Eo();break;case 13:tt(Nn);break;case 19:tt(Nn);break;case 10:_l(b.type._context);break;case 22:case 23:Gl()}g=g.return}if(jn=l,wn=l=Ua(l.current,null),Ln=Ti=h,zn=0,Oo=null,Ws=ur=ua=0,qn=Na=null,wr!==null){for(h=0;h<wr.length;h++)if(g=wr[h],b=g.interleaved,b!==null){g.interleaved=null;var E=b.next,I=g.pending;if(I!==null){var q=I.next;I.next=E,b.next=q}g.pending=b}wr=null}return l}function ud(l,h){do{var g=wn;try{if(Pi(),wl.current=Io,ah){for(var b=Dn.memoizedState;b!==null;){var E=b.queue;E!==null&&(E.pending=null),b=b.next}ah=!1}if(Is=0,oi=si=Dn=null,sa=!1,Ps=0,Wr.current=null,g===null||g.return===null){zn=1,Oo=h,wn=null;break}e:{var I=l,q=g.return,ae=g,Ee=h;if(h=Ln,ae.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var qe=Ee,_t=ae,Xt=_t.tag;if((_t.mode&1)===0&&(Xt===0||Xt===11||Xt===15)){var Ot=_t.alternate;Ot?(_t.updateQueue=Ot.updateQueue,_t.memoizedState=Ot.memoizedState,_t.lanes=Ot.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var Qt=Zc(q);if(Qt!==null){Qt.flags&=-257,Ns(Qt,q,ae,I,h),Qt.mode&1&&Ea(I,qe,h),h=Qt,Ee=qe;var mt=h.updateQueue;if(mt===null){var yi=new Set;yi.add(Ee),h.updateQueue=yi}else mt.add(Ee);break e}else{if((h&1)===0){Ea(I,qe,h),Th();break e}Ee=Error(u(426))}}else if(Pn&&ae.mode&1){var dr=Zc(q);if(dr!==null){(dr.flags&65536)===0&&(dr.flags|=256),Ns(dr,q,ae,I,h),nh(Ee);break e}}I=Ee,zn!==4&&(zn=2),Na===null?Na=[I]:Na.push(I),Ee=Kc(Ee,ae),ae=q;do{switch(ae.tag){case 3:ae.flags|=65536,h&=-h,ae.lanes|=h;var ve=zf(ae,Ee,h);Zu(ae,ve);break e;case 1:I=Ee;var se=ae.type,Me=ae.stateNode;if((ae.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Xr===null||!Xr.has(Me)))){ae.flags|=65536,h&=-h,ae.lanes|=h;var ct=mh(ae,I,h);Zu(ae,ct);break e}}ae=ae.return}while(ae!==null)}dd(g)}catch(Rt){h=Rt,wn===g&&g!==null&&(wn=g=g.return);continue}break}while(!0)}function hd(){var l=zl.current;return zl.current=Io,l===null?Io:l}function Th(){(zn===0||zn===3||zn===2)&&(zn=4),jn===null||(ua&268435455)===0&&(ur&268435455)===0||vi(jn,Ln)}function Wl(l,h){var g=Kt;Kt|=2;var b=hd();jn===l&&Ln===h||Oa(l,h);do try{Hf();break}catch(E){ud(l,E)}while(!0);if(Pi(),Kt=g,zl.current=b,wn!==null)throw Error(u(261));return jn=null,Ln=0,zn}function Hf(){for(;wn!==null;)cd(wn)}function jf(){for(;wn!==null&&!$a();)cd(wn)}function cd(l){var h=md(l.alternate,l,Ti);l.memoizedProps=l.pendingProps,h===null?dd(l):wn=h,Wr.current=null}function dd(l){var h=l;do{var g=h.alternate;if(l=h.return,(h.flags&32768)===0){if(g=yh(g,h,Ti),g!==null){wn=g;return}}else{if(g=bh(g,h),g!==null){g.flags&=32767,wn=g;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{zn=6,wn=null;return}}if(h=h.sibling,h!==null){wn=h;return}wn=h=l}while(h!==null);zn===0&&(zn=5)}function qr(l,h){var g=tn,b=bn.transition;try{bn.transition=null,tn=1,Gf(l,h,g)}finally{bn.transition=b,tn=g}return null}function Gf(l,h,g){do ca();while(ha!==null);if((Kt&6)!==0)throw Error(u(327));var b=l.finishedWork,E=l.finishedLanes;if(b===null)return null;if(l.finishedWork=null,l.finishedLanes=0,b===l.current)throw Error(u(177));l.callbackNode=null,l.callbackPriority=0;var I=b.lanes|b.childLanes;if(Hu(l,I),l===jn&&(wn=jn=null,Ln=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Fo||(Fo=!0,Eh(ju,function(){return ca(),null})),I=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||I){I=bn.transition,bn.transition=null;var q=tn;tn=1;var ae=Kt;Kt|=4,Wr.current=null,td(l,b),qg(l,b),K(l.containerInfo),l.current=b,Dl(b),Gg(),Kt=ae,tn=q,bn.transition=I}else l.current=b;if(Fo&&(Fo=!1,ha=l,Ys=E),I=l.pendingLanes,I===0&&(Xr=null),vl(b.stateNode),Yi(l,$n()),h!==null)for(g=l.onRecoverableError,b=0;b<h.length;b++)g(h[b]);if(Uo)throw Uo=!1,l=In,In=null,l;return(Ys&1)!==0&&l.tag!==0&&ca(),I=l.pendingLanes,(I&1)!==0?l===Da?qs++:(qs=0,Da=l):qs=0,br(),null}function ca(){if(ha!==null){var l=xa(Ys),h=bn.transition,g=tn;try{if(bn.transition=null,tn=16>l?16:l,ha===null)var b=!1;else{if(l=ha,ha=null,Ys=0,(Kt&6)!==0)throw Error(u(331));var E=Kt;for(Kt|=4,nt=l.current;nt!==null;){var I=nt,q=I.child;if((nt.flags&16)!==0){var ae=I.deletions;if(ae!==null){for(var Ee=0;Ee<ae.length;Ee++){var qe=ae[Ee];for(nt=qe;nt!==null;){var _t=nt;switch(_t.tag){case 0:case 11:case 15:Ia(8,_t,I)}var Xt=_t.child;if(Xt!==null)Xt.return=_t,nt=Xt;else for(;nt!==null;){_t=nt;var Ot=_t.sibling,Qt=_t.return;if(nd(_t),_t===qe){nt=null;break}if(Ot!==null){Ot.return=Qt,nt=Ot;break}nt=Qt}}}var mt=I.alternate;if(mt!==null){var yi=mt.child;if(yi!==null){mt.child=null;do{var dr=yi.sibling;yi.sibling=null,yi=dr}while(yi!==null)}}nt=I}}if((I.subtreeFlags&2064)!==0&&q!==null)q.return=I,nt=q;else e:for(;nt!==null;){if(I=nt,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Ia(9,I,I.return)}var ve=I.sibling;if(ve!==null){ve.return=I.return,nt=ve;break e}nt=I.return}}var se=l.current;for(nt=se;nt!==null;){q=nt;var Me=q.child;if((q.subtreeFlags&2064)!==0&&Me!==null)Me.return=q,nt=Me;else e:for(q=se;nt!==null;){if(ae=nt,(ae.flags&2048)!==0)try{switch(ae.tag){case 0:case 11:case 15:mi(9,ae)}}catch(Rt){Ui(ae,ae.return,Rt)}if(ae===q){nt=null;break e}var ct=ae.sibling;if(ct!==null){ct.return=ae.return,nt=ct;break e}nt=ae.return}}if(Kt=E,br(),aa&&typeof aa.onPostCommitFiberRoot=="function")try{aa.onPostCommitFiberRoot(gl,l)}catch{}b=!0}return b}finally{tn=g,bn.transition=h}}return!1}function Xl(l,h,g){h=Kc(g,h),h=zf(l,h,1),es(l,h),h=fn(),l=hs(l,1),l!==null&&(_s(l,1,h),Yi(l,h))}function Ui(l,h,g){if(l.tag===3)Xl(l,l,g);else for(;h!==null;){if(h.tag===3){Xl(h,l,g);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Xr===null||!Xr.has(b))){l=Kc(g,l),l=mh(h,l,1),es(h,l),l=fn(),h=hs(h,1),h!==null&&(_s(h,1,l),Yi(h,l));break}}h=h.return}}function fd(l,h,g){var b=l.pingCache;b!==null&&b.delete(h),h=fn(),l.pingedLanes|=l.suspendedLanes&g,jn===l&&(Ln&g)===g&&(zn===4||zn===3&&(Ln&130023424)===Ln&&500>$n()-Vl?Oa(l,0):Ws|=g),Yi(l,h)}function pd(l,h){h===0&&((l.mode&1)===0?h=1:(h=zt,zt<<=1,(zt&130023424)===0&&(zt=4194304)));var g=fn();l=hs(l,h),l!==null&&(_s(l,h,g),Yi(l,g))}function Wf(l){var h=l.memoizedState,g=0;h!==null&&(g=h.retryLane),pd(l,g)}function Xf(l,h){var g=0;switch(l.tag){case 13:var b=l.stateNode,E=l.memoizedState;E!==null&&(g=E.retryLane);break;case 19:b=l.stateNode;break;default:throw Error(u(314))}b!==null&&b.delete(h),pd(l,g)}var md;md=function(l,h,g){if(l!==null)if(l.memoizedProps!==h.pendingProps||an.current)ui=!0;else{if((l.lanes&g)===0&&(h.flags&128)===0)return ui=!1,_h(l,h,g);ui=(l.flags&131072)!==0}else ui=!1,Pn&&(h.flags&1048576)!==0&&Pf(h,eh,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2),l=h.pendingProps;var E=sn(h,jt.current);yo(h,g),E=Ao(null,h,b,l,E,g);var I=rs();return h.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,gt(b)?(I=!0,Br(h)):I=!1,h.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,xo(h),E.updater=Qu,h.stateNode=E,E._reactInternals=h,Dc(h,b,l,g),h=Mi(null,h,b,!0,I,g)):(h.tag=0,Pn&&I&&Oc(h),Bn(null,h,E,g),h=h.child),h;case 16:b=h.elementType;e:{switch(l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2),l=h.pendingProps,E=b._init,b=E(b._payload),h.type=b,E=h.tag=Kg(b),l=ji(b,l),E){case 0:h=Ca(null,h,b,l,g);break e;case 1:h=Os(null,h,b,l,g);break e;case 11:h=An(null,h,b,l,g);break e;case 14:h=Mn(null,h,b,ji(b.type,l),g);break e}throw Error(u(306,b,""))}return h;case 0:return b=h.type,E=h.pendingProps,E=h.elementType===b?E:ji(b,E),Ca(l,h,b,E,g);case 1:return b=h.type,E=h.pendingProps,E=h.elementType===b?E:ji(b,E),Os(l,h,b,E,g);case 3:e:{if(Il(h),l===null)throw Error(u(387));b=h.pendingProps,I=h.memoizedState,E=I.element,Pc(l,h),Ju(h,b,null,g);var q=h.memoizedState;if(b=q.element,yt&&I.isDehydrated)if(I={element:b,isDehydrated:!1,cache:q.cache,transitions:q.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){E=Error(u(423)),h=Qc(l,h,b,g,E);break e}else if(b!==E){E=Error(u(424)),h=Qc(l,h,b,g,E);break e}else for(yt&&(fi=mo(h.stateNode.containerInfo),Li=h,Pn=!0,Tr=null,bo=!1),g=Df(h,null,b,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(wo(),b===E){h=Xi(l,h,g);break e}Bn(l,h,b,g)}h=h.child}return h;case 5:return Of(h),l===null&&ns(h),b=h.type,E=h.pendingProps,I=l!==null?l.memoizedProps:null,q=E.children,at(b,E)?q=null:I!==null&&at(b,I)&&(h.flags|=32),Ni(l,h),Bn(l,h,q,g),h.child;case 6:return l===null&&ns(h),null;case 13:return $c(l,h,g);case 4:return ih(h,h.stateNode.containerInfo),b=h.pendingProps,l===null?h.child=Ma(h,null,b,g):Bn(l,h,b,g),h.child;case 11:return b=h.type,E=h.pendingProps,E=h.elementType===b?E:ji(b,E),An(l,h,b,E,g);case 7:return Bn(l,h,h.pendingProps,g),h.child;case 8:return Bn(l,h,h.pendingProps.children,g),h.child;case 12:return Bn(l,h,h.pendingProps.children,g),h.child;case 10:e:{if(b=h.type._context,E=h.pendingProps,I=h.memoizedProps,q=E.value,Ms(h,b,q),I!==null)if(Ii(I.value,q)){if(I.children===E.children&&!an.current){h=Xi(l,h,g);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var ae=I.dependencies;if(ae!==null){q=I.child;for(var Ee=ae.firstContext;Ee!==null;){if(Ee.context===b){if(I.tag===1){Ee=ba(-1,g&-g),Ee.tag=2;var qe=I.updateQueue;if(qe!==null){qe=qe.shared;var _t=qe.pending;_t===null?Ee.next=Ee:(Ee.next=_t.next,_t.next=Ee),qe.pending=Ee}}I.lanes|=g,Ee=I.alternate,Ee!==null&&(Ee.lanes|=g),Ts(I.return,g,h),ae.lanes|=g;break}Ee=Ee.next}}else if(I.tag===10)q=I.type===h.type?null:I.child;else if(I.tag===18){if(q=I.return,q===null)throw Error(u(341));q.lanes|=g,ae=q.alternate,ae!==null&&(ae.lanes|=g),Ts(q,g,h),q=I.sibling}else q=I.child;if(q!==null)q.return=I;else for(q=I;q!==null;){if(q===h){q=null;break}if(I=q.sibling,I!==null){I.return=q.return,q=I;break}q=q.return}I=q}Bn(l,h,E.children,g),h=h.child}return h;case 9:return E=h.type,b=h.pendingProps.children,yo(h,g),E=Gi(E),b=b(E),h.flags|=1,Bn(l,h,b,g),h.child;case 14:return b=h.type,E=ji(b,h.pendingProps),E=ji(b.type,E),Mn(l,h,b,E,g);case 15:return ka(l,h,h.type,h.pendingProps,g);case 17:return b=h.type,E=h.pendingProps,E=h.elementType===b?E:ji(b,E),l!==null&&(l.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,gt(b)?(l=!0,Br(h)):l=!1,yo(h,g),Rf(h,b,E),Dc(h,b,E,g),Mi(null,h,b,!0,l,g);case 19:return Fs(l,h,g);case 22:return pi(l,h,g)}throw Error(u(156,h.tag))};function Eh(l,h){return bs(l,h)}function Yf(l,h,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(l,h,g,b){return new Yf(l,h,g,b)}function Ah(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Kg(l){if(typeof l=="function")return Ah(l)?1:0;if(l!=null){if(l=l.$$typeof,l===A)return 11;if(l===C)return 14}return 2}function Ua(l,h){var g=l.alternate;return g===null?(g=cr(l.tag,h,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=h,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&14680064,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,h=l.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function kh(l,h,g,b,E,I){var q=2;if(b=l,typeof l=="function")Ah(l)&&(q=1);else if(typeof l=="string")q=5;else e:switch(l){case m:return Ks(g.children,E,I,h);case v:q=8,E|=8;break;case x:return l=cr(12,g,h,E|2),l.elementType=x,l.lanes=I,l;case T:return l=cr(13,g,h,E),l.elementType=T,l.lanes=I,l;case w:return l=cr(19,g,h,E),l.elementType=w,l.lanes=I,l;case P:return Yl(g,E,I,h);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case _:q=10;break e;case S:q=9;break e;case A:q=11;break e;case C:q=14;break e;case R:q=16,b=null;break e}throw Error(u(130,l==null?l:typeof l,""))}return h=cr(q,g,h,E),h.elementType=l,h.type=b,h.lanes=I,h}function Ks(l,h,g,b){return l=cr(7,l,b,h),l.lanes=g,l}function Yl(l,h,g,b){return l=cr(22,l,b,h),l.elementType=P,l.lanes=g,l.stateNode={},l}function Ch(l,h,g){return l=cr(6,l,null,h),l.lanes=g,l}function Rh(l,h,g){return h=cr(4,l.children!==null?l.children:[],l.key,h),h.lanes=g,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}function Ih(l,h,g,b,E){this.tag=h,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=it,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vu(0),this.expirationTimes=Vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vu(0),this.identifierPrefix=b,this.onRecoverableError=E,yt&&(this.mutableSourceEagerHydrationData=null)}function qf(l,h,g,b,E,I,q,ae,Ee){return l=new Ih(l,h,g,ae,Ee),h===1?(h=1,I===!0&&(h|=8)):h=0,I=cr(3,null,null,h),l.current=I,I.stateNode=l,I.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null},xo(I),l}function Kf(l){if(!l)return Nt;l=l._reactInternals;e:{if(D(l)!==l||l.tag!==1)throw Error(u(170));var h=l;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(gt(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(u(171))}if(l.tag===1){var g=l.type;if(gt(g))return Si(l,g,h)}return h}function Zf(l){var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(u(188)):(l=Object.keys(l).join(","),Error(u(268,l)));return l=ee(h),l===null?null:l.stateNode}function kr(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<h?g:h}}function ql(l,h){kr(l,h),(l=l.alternate)&&kr(l,h)}function Ph(l){return l=ee(l),l===null?null:l.stateNode}function Jf(){return null}return t.attemptContinuousHydration=function(l){if(l.tag===13){var h=fn();Ei(l,134217728,h),ql(l,134217728)}},t.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var h=fn(),g=Yr(l);Ei(l,g,h),ql(l,g)}},t.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var h=l.stateNode;if(h.current.memoizedState.isDehydrated){var g=ia(h.pendingLanes);g!==0&&(ra(h,g|1),Yi(h,$n()),(Kt&6)===0&&(Xs(),br()))}break;case 13:var b=fn();Bo(function(){return Ei(l,1,b)}),ql(l,1)}},t.batchedUpdates=function(l,h){var g=Kt;Kt|=1;try{return l(h)}finally{Kt=g,Kt===0&&(Xs(),Wu&&br())}},t.createComponentSelector=function(l){return{$$typeof:Ul,value:l}},t.createContainer=function(l,h,g,b,E,I,q){return qf(l,h,!1,null,g,b,E,I,q)},t.createHasPseudoClassSelector=function(l){return{$$typeof:Vs,value:l}},t.createHydrationContainer=function(l,h,g,b,E,I,q,ae,Ee){return l=qf(g,b,!0,l,E,I,q,ae,Ee),l.context=Kf(null),g=l.current,b=fn(),E=Yr(g),I=ba(b,E),I.callback=h??null,es(g,I),l.current.lanes=E,_s(l,E,b),Yi(l,b),l},t.createPortal=function(l,h,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:b==null?null:""+b,children:l,containerInfo:h,implementation:g}},t.createRoleSelector=function(l){return{$$typeof:Hs,value:l}},t.createTestNameSelector=function(l){return{$$typeof:Pa,value:l}},t.createTextSelector=function(l){return{$$typeof:Do,value:l}},t.deferredUpdates=function(l){var h=tn,g=bn.transition;try{return bn.transition=null,tn=16,l()}finally{tn=h,bn.transition=g}},t.discreteUpdates=function(l,h,g,b,E){var I=tn,q=bn.transition;try{return bn.transition=null,tn=1,l(h,g,b,E)}finally{tn=I,bn.transition=q,Kt===0&&Xs()}},t.findAllNodes=La,t.findBoundingRects=function(l,h){if(!ot)throw Error(u(363));h=La(l,h),l=[];for(var g=0;g<h.length;g++)l.push(ht(h[g]));for(h=l.length-1;0<h;h--){g=l[h];for(var b=g.x,E=b+g.width,I=g.y,q=I+g.height,ae=h-1;0<=ae;ae--)if(h!==ae){var Ee=l[ae],qe=Ee.x,_t=qe+Ee.width,Xt=Ee.y,Ot=Xt+Ee.height;if(b>=qe&&I>=Xt&&E<=_t&&q<=Ot){l.splice(h,1);break}else if(b!==qe||g.width!==Ee.width||Ot<I||Xt>q){if(!(I!==Xt||g.height!==Ee.height||_t<b||qe>E)){qe>b&&(Ee.width+=qe-b,Ee.x=b),_t<E&&(Ee.width=E-qe),l.splice(h,1);break}}else{Xt>I&&(Ee.height+=Xt-I,Ee.y=I),Ot<q&&(Ee.height=q-Xt),l.splice(h,1);break}}}return l},t.findHostInstance=Zf,t.findHostInstanceWithNoPortals=function(l){return l=H(l),l=l!==null?me(l):null,l===null?null:l.stateNode},t.findHostInstanceWithWarning=function(l){return Zf(l)},t.flushControlled=function(l){var h=Kt;Kt|=1;var g=bn.transition,b=tn;try{bn.transition=null,tn=1,l()}finally{tn=b,bn.transition=g,Kt=h,Kt===0&&(Xs(),br())}},t.flushPassiveEffects=ca,t.flushSync=Bo,t.focusWithin=function(l,h){if(!ot)throw Error(u(363));for(l=Fl(l),h=lr(l,h),h=Array.from(h),l=0;l<h.length;){var g=h[l++];if(!O(g)){if(g.tag===5&&Te(g.stateNode))return!0;for(g=g.child;g!==null;)h.push(g),g=g.sibling}}return!1},t.getCurrentUpdatePriority=function(){return tn},t.getFindAllNodesFailureDescription=function(l,h){if(!ot)throw Error(u(363));var g=0,b=[];l=[Fl(l),0];for(var E=0;E<l.length;){var I=l[E++],q=l[E++],ae=h[q];if((I.tag!==5||!O(I))&&(Bl(I,ae)&&(b.push(ls(ae)),q++,q>g&&(g=q)),q<h.length))for(I=I.child;I!==null;)l.push(I,q),I=I.sibling}if(g<h.length){for(l=[];g<h.length;g++)l.push(ls(h[g]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},t.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return ye(l.child.stateNode);default:return l.child.stateNode}},t.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:c.ReactCurrentDispatcher,findHostInstanceByFiber:Ph,findFiberByHostInstance:l.findFiberByHostInstance||Jf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)l=!0;else{try{gl=h.inject(l),aa=h}catch{}l=!!h.checkDCE}}return l},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(l,h,g,b){if(!ot)throw Error(u(363));l=La(l,h);var E=Re(l,g,b).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(l,h){var g=h._getVersion;g=g(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,g]:l.mutableSourceEagerHydrationData.push(h,g)},t.runWithPriority=function(l,h){var g=tn;try{return tn=l,h()}finally{tn=g}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(l,h,g,b){var E=h.current,I=fn(),q=Yr(E);return g=Kf(g),h.context===null?h.context=g:h.pendingContext=g,h=ba(I,q),h.payload={element:l},b=b===void 0?null:b,b!==null&&(h.callback=b),es(E,h),l=Ei(E,q,I),l!==null&&Ku(l,E,q),q},t}),vy}var nb;function aR(){return nb||(nb=1,py.exports=rR()),py.exports}var sR=aR();const oR=Yy(sR);var yy={exports:{}},xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function lR(){return ib||(ib=1,(function(a){function e(B,Q){var K=B.length;B.push(Q);e:for(;0<K;){var j=K-1>>>1,ie=B[j];if(0<i(ie,Q))B[j]=Q,B[K]=ie,K=j;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var Q=B[0],K=B.pop();if(K!==Q){B[0]=K;e:for(var j=0,ie=B.length,Ce=ie>>>1;j<Ce;){var Ye=2*(j+1)-1,at=B[Ye],he=Ye+1,be=B[he];if(0>i(at,K))he<ie&&0>i(be,at)?(B[j]=be,B[he]=K,j=he):(B[j]=at,B[Ye]=K,j=Ye);else if(he<ie&&0>i(be,K))B[j]=be,B[he]=K,j=he;else break e}}return Q}function i(B,Q){var K=B.sortIndex-Q.sortIndex;return K!==0?K:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;a.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();a.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,v=null,x=3,_=!1,S=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(B){for(var Q=t(p);Q!==null;){if(Q.callback===null)n(p);else if(Q.startTime<=B)n(p),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(p)}}function P(B){if(A=!1,R(B),!S)if(t(f)!==null)S=!0,ye(F);else{var Q=t(p);Q!==null&&we(P,Q.startTime-B)}}function F(B,Q){S=!1,A&&(A=!1,w(G),G=-1),_=!0;var K=x;try{for(R(Q),v=t(f);v!==null&&(!(v.expirationTime>Q)||B&&!H());){var j=v.callback;if(typeof j=="function"){v.callback=null,x=v.priorityLevel;var ie=j(v.expirationTime<=Q);Q=a.unstable_now(),typeof ie=="function"?v.callback=ie:v===t(f)&&n(f),R(Q)}else n(f);v=t(f)}if(v!==null)var Ce=!0;else{var Ye=t(p);Ye!==null&&we(P,Ye.startTime-Q),Ce=!1}return Ce}finally{v=null,x=K,_=!1}}var N=!1,z=null,G=-1,D=5,L=-1;function H(){return!(a.unstable_now()-L<D)}function ee(){if(z!==null){var B=a.unstable_now();L=B;var Q=!0;try{Q=z(!0,B)}finally{Q?ne():(N=!1,z=null)}}else N=!1}var ne;if(typeof C=="function")ne=function(){C(ee)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,fe=me.port2;me.port1.onmessage=ee,ne=function(){fe.postMessage(null)}}else ne=function(){T(ee,0)};function ye(B){z=B,N||(N=!0,ne())}function we(B,Q){G=T(function(){B(a.unstable_now())},Q)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(B){B.callback=null},a.unstable_continueExecution=function(){S||_||(S=!0,ye(F))},a.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},a.unstable_getCurrentPriorityLevel=function(){return x},a.unstable_getFirstCallbackNode=function(){return t(f)},a.unstable_next=function(B){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var K=x;x=Q;try{return B()}finally{x=K}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=x;x=B;try{return Q()}finally{x=K}},a.unstable_scheduleCallback=function(B,Q,K){var j=a.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?j+K:j):K=j,B){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=K+ie,B={id:m++,callback:Q,priorityLevel:B,startTime:K,expirationTime:ie,sortIndex:-1},K>j?(B.sortIndex=K,e(p,B),t(f)===null&&B===t(p)&&(A?(w(G),G=-1):A=!0,we(P,K-j))):(B.sortIndex=ie,e(f,B),S||_||(S=!0,ye(F))),B},a.unstable_shouldYield=H,a.unstable_wrapCallback=function(B){var Q=x;return function(){var K=x;x=Q;try{return B.apply(this,arguments)}finally{x=K}}}})(xy)),xy}var rb;function uR(){return rb||(rb=1,yy.exports=lR()),yy.exports}var ab=uR();const L0={},hR=a=>void Object.assign(L0,a);function cR(a,e){function t(m,{args:v=[],attach:x,..._},S){let A=`${m[0].toUpperCase()}${m.slice(1)}`,T;if(m==="primitive"){if(_.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const w=_.object;T=sc(w,{type:m,root:S,attach:x,primitive:!0})}else{const w=L0[A];if(!w)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(v))throw new Error("R3F: The args prop must be an array!");T=sc(new w(...v),{type:m,root:S,attach:x,memoizedProps:{args:v}})}return T.__r3f.attach===void 0&&(T.isBufferGeometry?T.__r3f.attach="geometry":T.isMaterial&&(T.__r3f.attach="material")),A!=="inject"&&wy(T,_),T}function n(m,v){let x=!1;if(v){var _,S;(_=v.__r3f)!=null&&_.attach?by(m,v,v.__r3f.attach):v.isObject3D&&m.isObject3D&&(m.add(v),x=!0),x||(S=m.__r3f)==null||S.objects.push(v),v.__r3f||sc(v,{}),v.__r3f.parent=m,Xy(v),oc(v)}}function i(m,v,x){let _=!1;if(v){var S,A;if((S=v.__r3f)!=null&&S.attach)by(m,v,v.__r3f.attach);else if(v.isObject3D&&m.isObject3D){v.parent=m,v.dispatchEvent({type:"added"}),m.dispatchEvent({type:"childadded",child:v});const T=m.children.filter(C=>C!==v),w=T.indexOf(x);m.children=[...T.slice(0,w),v,...T.slice(w)],_=!0}_||(A=m.__r3f)==null||A.objects.push(v),v.__r3f||sc(v,{}),v.__r3f.parent=m,Xy(v),oc(v)}}function s(m,v,x=!1){m&&[...m].forEach(_=>u(v,_,x))}function u(m,v,x){if(v){var _,S,A;if(v.__r3f&&(v.__r3f.parent=null),(_=m.__r3f)!=null&&_.objects&&(m.__r3f.objects=m.__r3f.objects.filter(P=>P!==v)),(S=v.__r3f)!=null&&S.attach)hb(m,v,v.__r3f.attach);else if(v.isObject3D&&m.isObject3D){var T;m.remove(v),(T=v.__r3f)!=null&&T.root&&yR(gm(v),v)}const C=(A=v.__r3f)==null?void 0:A.primitive,R=!C&&(x===void 0?v.dispose!==null:x);if(!C){var w;s((w=v.__r3f)==null?void 0:w.objects,v,R),s(v.children,v,R)}if(delete v.__r3f,R&&v.dispose&&v.type!=="Scene"){const P=()=>{try{v.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ab.unstable_scheduleCallback(ab.unstable_IdlePriority,P):P()}oc(m)}}function c(m,v,x,_){var S;const A=(S=m.__r3f)==null?void 0:S.parent;if(!A)return;const T=t(v,x,m.__r3f.root);if(m.children){for(const w of m.children)w.__r3f&&n(T,w);m.children=m.children.filter(w=>!w.__r3f)}m.__r3f.objects.forEach(w=>n(T,w)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||u(A,m),T.parent&&(T.__r3f.autoRemovedBeforeAppend=!0),n(A,T),T.raycast&&T.__r3f.eventCount&&gm(T).getState().internal.interaction.push(T),[_,_.alternate].forEach(w=>{w!==null&&(w.stateNode=T,w.ref&&(typeof w.ref=="function"?w.ref(T):w.ref.current=T))})}const f=()=>{};return{reconciler:oR({createInstance:t,removeChild:u,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,v)=>{if(!v)return;const x=m.getState().scene;x.__r3f&&(x.__r3f.root=m,n(x,v))},removeChildFromContainer:(m,v)=>{v&&u(m.getState().scene,v)},insertInContainerBefore:(m,v,x)=>{if(!v||!x)return;const _=m.getState().scene;_.__r3f&&i(_,v,x)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var v;return!!((v=m==null?void 0:m.__r3f)!=null?v:{}).handlers},prepareUpdate(m,v,x,_){var S;if(((S=m==null?void 0:m.__r3f)!=null?S:{}).primitive&&_.object&&_.object!==m)return[!0];{const{args:T=[],children:w,...C}=_,{args:R=[],children:P,...F}=x;if(!Array.isArray(T))throw new Error("R3F: the args prop must be an array!");if(T.some((z,G)=>z!==R[G]))return[!0];const N=Rw(m,C,F,!0);return N.changes.length?[!1,N]:null}},commitUpdate(m,[v,x],_,S,A,T){v?c(m,_,A,T):wy(m,x)},commitMount(m,v,x,_){var S;const A=(S=m.__r3f)!=null?S:{};m.raycast&&A.handlers&&A.eventCount&&gm(m).getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>sc(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var v;const{attach:x,parent:_}=(v=m.__r3f)!=null?v:{};x&&_&&hb(_,m,x),m.isObject3D&&(m.visible=!1),oc(m)},unhideInstance(m,v){var x;const{attach:_,parent:S}=(x=m.__r3f)!=null?x:{};_&&S&&by(S,m,_),(m.isObject3D&&v.visible==null||v.visible)&&(m.visible=!0),oc(m)},createTextInstance:f,hideTextInstance:f,unhideTextInstance:f,getCurrentEventPriority:()=>e?e():cc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&On.fun(performance.now)?performance.now:On.fun(Date.now)?Date.now:()=>0,scheduleTimeout:On.fun(setTimeout)?setTimeout:void 0,cancelTimeout:On.fun(clearTimeout)?clearTimeout:void 0}),applyProps:wy}}var sb,ob;const _y=a=>"colorSpace"in a||"outputColorSpace"in a,Mw=()=>{var a;return(a=L0.ColorManagement)!=null?a:null},Tw=a=>a&&a.isOrthographicCamera,dR=a=>a&&a.hasOwnProperty("current"),Tf=typeof window<"u"&&((sb=window.document)!=null&&sb.createElement||((ob=window.navigator)==null?void 0:ob.product)==="ReactNative")?je.useLayoutEffect:je.useEffect;function Ew(a){const e=je.useRef(a);return Tf(()=>void(e.current=a),[a]),e}function fR({set:a}){return Tf(()=>(a(new Promise(()=>null)),()=>a(!1)),[a]),null}class Aw extends je.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Aw.getDerivedStateFromError=()=>({error:!0});const kw="__default",lb=new Map,pR=a=>a&&!!a.memoized&&!!a.changes;function Cw(a){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(a)?Math.min(Math.max(a[0],t),a[1]):a}const Ud=a=>{var e;return(e=a.__r3f)==null?void 0:e.root.getState()};function gm(a){let e=a.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const On={obj:a=>a===Object(a)&&!On.arr(a)&&typeof a!="function",fun:a=>typeof a=="function",str:a=>typeof a=="string",num:a=>typeof a=="number",boo:a=>typeof a=="boolean",und:a=>a===void 0,arr:a=>Array.isArray(a),equ(a,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof a!=typeof e||!!a!=!!e)return!1;if(On.str(a)||On.num(a)||On.boo(a))return a===e;const s=On.obj(a);if(s&&n==="reference")return a===e;const u=On.arr(a);if(u&&t==="reference")return a===e;if((u||s)&&a===e)return!0;let c;for(c in a)if(!(c in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(c in i?e:a)if(!On.equ(a[c],e[c],{strict:i,objects:"reference"}))return!1}else for(c in i?e:a)if(a[c]!==e[c])return!1;if(On.und(c)){if(u&&a.length===0&&e.length===0||s&&Object.keys(a).length===0&&Object.keys(e).length===0)return!0;if(a!==e)return!1}return!0}};function mR(a){a.dispose&&a.type!=="Scene"&&a.dispose();for(const e in a)e.dispose==null||e.dispose(),delete a[e]}function sc(a,e){const t=a;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},a}function Wy(a,e){let t=a;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,u)=>s[u],a),{target:t,key:i}}else return{target:t,key:e}}const ub=/-\d+$/;function by(a,e,t){if(On.str(t)){if(ub.test(t)){const s=t.replace(ub,""),{target:u,key:c}=Wy(a,s);Array.isArray(u[c])||(u[c]=[])}const{target:n,key:i}=Wy(a,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(a,e)}function hb(a,e,t){var n,i;if(On.str(t)){const{target:s,key:u}=Wy(a,t),c=e.__r3f.previousAttach;c===void 0?delete s[u]:s[u]=c}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(a,e);(i=e.__r3f)==null||delete i.previousAttach}function Rw(a,{children:e,key:t,ref:n,...i},{children:s,key:u,ref:c,...f}={},p=!1){const m=a.__r3f,v=Object.entries(i),x=[];if(p){const S=Object.keys(f);for(let A=0;A<S.length;A++)i.hasOwnProperty(S[A])||v.unshift([S[A],kw+"remove"])}v.forEach(([S,A])=>{var T;if((T=a.__r3f)!=null&&T.primitive&&S==="object"||On.equ(A,f[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return x.push([S,A,!0,[]]);let w=[];S.includes("-")&&(w=S.split("-")),x.push([S,A,!1,w]);for(const C in i){const R=i[C];C.startsWith(`${S}-`)&&x.push([C,R,!1,C.split("-")])}});const _={...i};return m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.args&&(_.args=m.memoizedProps.args),m!=null&&m.memoizedProps&&m!=null&&m.memoizedProps.attach&&(_.attach=m.memoizedProps.attach),{memoized:_,changes:x}}function wy(a,e){var t;const n=a.__r3f,i=n==null?void 0:n.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:u,changes:c}=pR(e)?e:Rw(a,e),f=n==null?void 0:n.eventCount;a.__r3f&&(a.__r3f.memoizedProps=u);for(let x=0;x<c.length;x++){let[_,S,A,T]=c[x];if(_y(a)){const P="srgb",F="srgb-linear";_==="encoding"?(_="colorSpace",S=S===3001?P:F):_==="outputEncoding"&&(_="outputColorSpace",S=S===3001?P:F)}let w=a,C=w[_];if(T.length&&(C=T.reduce((R,P)=>R[P],a),!(C&&C.set))){const[R,...P]=T.reverse();w=P.reverse().reduce((F,N)=>F[N],a),_=R}if(S===kw+"remove")if(w.constructor){let R=lb.get(w.constructor);R||(R=new w.constructor,lb.set(w.constructor,R)),S=R[_]}else S=0;if(A&&n)S?n.handlers[_]=S:delete n.handlers[_],n.eventCount=Object.keys(n.handlers).length;else if(C&&C.set&&(C.copy||C instanceof Su)){if(Array.isArray(S))C.fromArray?C.fromArray(S):C.set(...S);else if(C.copy&&S&&S.constructor&&C.constructor===S.constructor)C.copy(S);else if(S!==void 0){var p;const R=(p=C)==null?void 0:p.isColor;!R&&C.setScalar?C.setScalar(S):C instanceof Su&&S instanceof Su?C.mask=S.mask:C.set(S),!Mw()&&s&&!s.linear&&R&&C.convertSRGBToLinear()}}else{var m;if(w[_]=S,(m=w[_])!=null&&m.isTexture&&w[_].format===$i&&w[_].type===ga&&s){const R=w[_];_y(R)&&_y(s.gl)?R.colorSpace=s.gl.outputColorSpace:R.encoding=s.gl.outputEncoding}}oc(a)}if(n&&n.parent&&a.raycast&&f!==n.eventCount){const x=gm(a).getState().internal,_=x.interaction.indexOf(a);_>-1&&x.interaction.splice(_,1),n.eventCount&&x.interaction.push(a)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(t=a.__r3f)!=null&&t.parent&&Xy(a),a}function oc(a){var e,t;const n=(e=a.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function Xy(a){a.onUpdate==null||a.onUpdate(a)}function gR(a,e){a.manual||(Tw(a)?(a.left=e.width/-2,a.right=e.width/2,a.top=e.height/2,a.bottom=e.height/-2):a.aspect=e.width/e.height,a.updateProjectionMatrix(),a.updateMatrixWorld())}function um(a){return(a.eventObject||a.object).uuid+"/"+a.index+a.instanceId}function vR(){var a;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return cc.DefaultEventPriority;switch((a=e.event)==null?void 0:a.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return cc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return cc.ContinuousEventPriority;default:return cc.DefaultEventPriority}}function Iw(a,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(a.delete(n),i.target.releasePointerCapture(n)))}function yR(a,e){const{internal:t}=a.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{Iw(t.capturedMap,e,n,i)})}function xR(a){function e(f){const{internal:p}=a.getState(),m=f.offsetX-p.initialClick[0],v=f.offsetY-p.initialClick[1];return Math.round(Math.sqrt(m*m+v*v))}function t(f){return f.filter(p=>["Move","Over","Enter","Out","Leave"].some(m=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+m]}))}function n(f,p){const m=a.getState(),v=new Set,x=[],_=p?p(m.internal.interaction):m.internal.interaction;for(let w=0;w<_.length;w++){const C=Ud(_[w]);C&&(C.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(f,m);function S(w){const C=Ud(w);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var R;C.events.compute==null||C.events.compute(f,C,(R=C.previousRoot)==null?void 0:R.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(w,!0):[]}let A=_.flatMap(S).sort((w,C)=>{const R=Ud(w.object),P=Ud(C.object);return!R||!P?w.distance-C.distance:P.events.priority-R.events.priority||w.distance-C.distance}).filter(w=>{const C=um(w);return v.has(C)?!1:(v.add(C),!0)});m.events.filter&&(A=m.events.filter(A,m));for(const w of A){let C=w.object;for(;C;){var T;(T=C.__r3f)!=null&&T.eventCount&&x.push({...w,eventObject:C}),C=C.parent}}if("pointerId"in f&&m.internal.capturedMap.has(f.pointerId))for(let w of m.internal.capturedMap.get(f.pointerId).values())v.has(um(w.intersection))||x.push(w.intersection);return x}function i(f,p,m,v){const x=a.getState();if(f.length){const _={stopped:!1};for(const S of f){const A=Ud(S.object)||x,{raycaster:T,pointer:w,camera:C,internal:R}=A,P=new Y(w.x,w.y,0).unproject(C),F=L=>{var H,ee;return(H=(ee=R.capturedMap.get(L))==null?void 0:ee.has(S.eventObject))!=null?H:!1},N=L=>{const H={intersection:S,target:p.target};R.capturedMap.has(L)?R.capturedMap.get(L).set(S.eventObject,H):R.capturedMap.set(L,new Map([[S.eventObject,H]])),p.target.setPointerCapture(L)},z=L=>{const H=R.capturedMap.get(L);H&&Iw(R.capturedMap,S.eventObject,H,L)};let G={};for(let L in p){let H=p[L];typeof H!="function"&&(G[L]=H)}let D={...S,...G,pointer:w,intersections:f,stopped:_.stopped,delta:m,unprojectedPoint:P,ray:T.ray,camera:C,stopPropagation(){const L="pointerId"in p&&R.capturedMap.get(p.pointerId);if((!L||L.has(S.eventObject))&&(D.stopped=_.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(H=>H.eventObject===S.eventObject))){const H=f.slice(0,f.indexOf(S));s([...H,S])}},target:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:z},currentTarget:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:z},nativeEvent:p};if(v(D),_.stopped===!0)break}}return f}function s(f){const{internal:p}=a.getState();for(const m of p.hovered.values())if(!f.length||!f.find(v=>v.object===m.object&&v.index===m.index&&v.instanceId===m.instanceId)){const x=m.eventObject.__r3f,_=x==null?void 0:x.handlers;if(p.hovered.delete(um(m)),x!=null&&x.eventCount){const S={...m,intersections:f};_.onPointerOut==null||_.onPointerOut(S),_.onPointerLeave==null||_.onPointerLeave(S)}}}function u(f,p){for(let m=0;m<p.length;m++){const v=p[m].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return p=>{const{internal:m}=a.getState();"pointerId"in p&&m.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(p.pointerId)&&(m.capturedMap.delete(p.pointerId),s([]))})}}return function(m){const{onPointerMissed:v,internal:x}=a.getState();x.lastEvent.current=m;const _=f==="onPointerMove",S=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",T=n(m,_?t:void 0),w=S?e(m):0;f==="onPointerDown"&&(x.initialClick=[m.offsetX,m.offsetY],x.initialHits=T.map(R=>R.eventObject)),S&&!T.length&&w<=2&&(u(m,x.interaction),v&&v(m)),_&&s(T);function C(R){const P=R.eventObject,F=P.__r3f,N=F==null?void 0:F.handlers;if(F!=null&&F.eventCount)if(_){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const z=um(R),G=x.hovered.get(z);G?G.stopped&&R.stopPropagation():(x.hovered.set(z,R),N.onPointerOver==null||N.onPointerOver(R),N.onPointerEnter==null||N.onPointerEnter(R))}N.onPointerMove==null||N.onPointerMove(R)}else{const z=N[f];z?(!S||x.initialHits.includes(P))&&(u(m,x.interaction.filter(G=>!x.initialHits.includes(G))),z(R)):S&&x.initialHits.includes(P)&&u(m,x.interaction.filter(G=>!x.initialHits.includes(G)))}}i(T,m,w,C)}}return{handlePointer:c}}const Pw=a=>!!(a!=null&&a.render),Lw=je.createContext(null),_R=(a,e)=>{const t=tR((c,f)=>{const p=new Y,m=new Y,v=new Y;function x(w=f().camera,C=m,R=f().size){const{width:P,height:F,top:N,left:z}=R,G=P/F;C.isVector3?v.copy(C):v.set(...C);const D=w.getWorldPosition(p).distanceTo(v);if(Tw(w))return{width:P/w.zoom,height:F/w.zoom,top:N,left:z,factor:1,distance:D,aspect:G};{const L=w.fov*Math.PI/180,H=2*Math.tan(L/2)*D,ee=H*(P/F);return{width:ee,height:H,top:N,left:z,factor:P/ee,distance:D,aspect:G}}}let _;const S=w=>c(C=>({performance:{...C.performance,current:w}})),A=new Ae;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(w=1)=>a(f(),w),advance:(w,C)=>e(w,C,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new k0,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=f();_&&clearTimeout(_),w.performance.current!==w.performance.min&&S(w.performance.min),_=setTimeout(()=>S(f().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:w=>c(C=>({...C,events:{...C.events,...w}})),setSize:(w,C,R,P,F)=>{const N=f().camera,z={width:w,height:C,top:P||0,left:F||0,updateStyle:R};c(G=>({size:z,viewport:{...G.viewport,...x(N,m,z)}}))},setDpr:w=>c(C=>{const R=Cw(w);return{viewport:{...C.viewport,dpr:R,initialDpr:C.viewport.initialDpr||R}}}),setFrameloop:(w="always")=>{const C=f().clock;C.stop(),C.elapsedTime=0,w!=="never"&&(C.start(),C.elapsedTime=0),c(()=>({frameloop:w}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:je.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(w,C,R)=>{const P=f().internal;return P.priority=P.priority+(C>0?1:0),P.subscribers.push({ref:w,priority:C,store:R}),P.subscribers=P.subscribers.sort((F,N)=>F.priority-N.priority),()=>{const F=f().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(C>0?1:0),F.subscribers=F.subscribers.filter(N=>N.ref!==w))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,u=n.camera;return t.subscribe(()=>{const{camera:c,size:f,viewport:p,gl:m,set:v}=t.getState();if(f.width!==i.width||f.height!==i.height||p.dpr!==s){var x;i=f,s=p.dpr,gR(c,f),m.setPixelRatio(p.dpr);const _=(x=f.updateStyle)!=null?x:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(f.width,f.height,_)}c!==u&&(u=c,v(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>a(c)),t};let hm,bR=new Set,wR=new Set,SR=new Set;function Sy(a,e){if(a.size)for(const{callback:t}of a.values())t(e)}function Fd(a,e){switch(a){case"before":return Sy(bR,e);case"after":return Sy(wR,e);case"tail":return Sy(SR,e)}}let My,Ty;function Ey(a,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof a=="number"&&(n=a-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=a),My=e.internal.subscribers,hm=0;hm<My.length;hm++)Ty=My[hm],Ty.ref.current(Ty.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function MR(a){let e=!1,t=!1,n,i,s;function u(p){i=requestAnimationFrame(u),e=!0,n=0,Fd("before",p),t=!0;for(const v of a.values()){var m;s=v.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((m=s.gl.xr)!=null&&m.isPresenting)&&(n+=Ey(p,s))}if(t=!1,Fd("after",p),n===0)return Fd("tail",p),e=!1,cancelAnimationFrame(i)}function c(p,m=1){var v;if(!p)return a.forEach(x=>c(x.store.getState(),m));(v=p.gl.xr)!=null&&v.isPresenting||!p.internal.active||p.frameloop==="never"||(m>1?p.internal.frames=Math.min(60,p.internal.frames+m):t?p.internal.frames=2:p.internal.frames=1,e||(e=!0,requestAnimationFrame(u)))}function f(p,m=!0,v,x){if(m&&Fd("before",p),v)Ey(p,v,x);else for(const _ of a.values())Ey(p,_.store.getState());m&&Fd("after",p)}return{loop:u,invalidate:c,advance:f}}function Nw(){const a=je.useContext(Lw);if(!a)throw new Error("R3F: Hooks can only be used within the Canvas component!");return a}function Qr(a=t=>t,e){return Nw()(a,e)}function kc(a,e=0){const t=Nw(),n=t.getState().internal.subscribe,i=Ew(a);return Tf(()=>n(i,e,t),[e,n,t]),null}const Sc=new Map,{invalidate:cb,advance:db}=MR(Sc),{reconciler:ag,applyProps:rc}=cR(Sc,vR),ac={objects:"shallow",strict:!1},TR=(a,e)=>{const t=typeof a=="function"?a(e):a;return Pw(t)?t:new Sw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...a})};function ER(a,e){const t=typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:u,updateStyle:c=t}=e;return{width:n,height:i,top:s,left:u,updateStyle:c}}else if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&a.parentElement){const{width:n,height:i,top:s,left:u}=a.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:u,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas)return{width:a.width,height:a.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function AR(a){const e=Sc.get(a),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||_R(cb,db),u=t||ag.createContainer(s,cc.ConcurrentRoot,null,!1,null,"",i,null);e||Sc.set(a,{fiber:u,store:s});let c,f=!1,p;return{configure(m={}){let{gl:v,size:x,scene:_,events:S,onCreated:A,shadows:T=!1,linear:w=!1,flat:C=!1,legacy:R=!1,orthographic:P=!1,frameloop:F="always",dpr:N=[1,2],performance:z,raycaster:G,camera:D,onPointerMissed:L}=m,H=s.getState(),ee=H.gl;H.gl||H.set({gl:ee=TR(v,a)});let ne=H.raycaster;ne||H.set({raycaster:ne=new mw});const{params:me,...fe}=G||{};if(On.equ(fe,ne,ac)||rc(ne,{...fe}),On.equ(me,ne.params,ac)||rc(ne,{params:{...ne.params,...me}}),!H.camera||H.camera===p&&!On.equ(p,D,ac)){p=D;const K=D instanceof vf,j=K?D:P?new rl(0,0,0,0,.1,1e3):new ii(75,0,.1,1e3);K||(j.position.z=5,D&&(rc(j,D),("aspect"in D||"left"in D||"right"in D||"bottom"in D||"top"in D)&&(j.manual=!0,j.updateProjectionMatrix())),!H.camera&&!(D!=null&&D.rotation)&&j.lookAt(0,0,0)),H.set({camera:j}),ne.camera=j}if(!H.scene){let K;_!=null&&_.isScene?K=_:(K=new l0,_&&rc(K,_)),H.set({scene:sc(K)})}if(!H.xr){var ye;const K=(Ce,Ye)=>{const at=s.getState();at.frameloop!=="never"&&db(Ce,!0,at,Ye)},j=()=>{const Ce=s.getState();Ce.gl.xr.enabled=Ce.gl.xr.isPresenting,Ce.gl.xr.setAnimationLoop(Ce.gl.xr.isPresenting?K:null),Ce.gl.xr.isPresenting||cb(Ce)},ie={connect(){const Ce=s.getState().gl;Ce.xr.addEventListener("sessionstart",j),Ce.xr.addEventListener("sessionend",j)},disconnect(){const Ce=s.getState().gl;Ce.xr.removeEventListener("sessionstart",j),Ce.xr.removeEventListener("sessionend",j)}};typeof((ye=ee.xr)==null?void 0:ye.addEventListener)=="function"&&ie.connect(),H.set({xr:ie})}if(ee.shadowMap){const K=ee.shadowMap.enabled,j=ee.shadowMap.type;if(ee.shadowMap.enabled=!!T,On.boo(T))ee.shadowMap.type=Hd;else if(On.str(T)){var we;const ie={basic:Mb,percentage:ug,soft:Hd,variance:Wa};ee.shadowMap.type=(we=ie[T])!=null?we:Hd}else On.obj(T)&&Object.assign(ee.shadowMap,T);(K!==ee.shadowMap.enabled||j!==ee.shadowMap.type)&&(ee.shadowMap.needsUpdate=!0)}const B=Mw();B&&("enabled"in B?B.enabled=!R:"legacyMode"in B&&(B.legacyMode=R)),f||rc(ee,{outputEncoding:w?3e3:3001,toneMapping:C?vs:qy}),H.legacy!==R&&H.set(()=>({legacy:R})),H.linear!==w&&H.set(()=>({linear:w})),H.flat!==C&&H.set(()=>({flat:C})),v&&!On.fun(v)&&!Pw(v)&&!On.equ(v,ee,ac)&&rc(ee,v),S&&!H.events.handlers&&H.set({events:S(s)});const Q=ER(a,x);return On.equ(Q,H.size,ac)||H.setSize(Q.width,Q.height,Q.updateStyle,Q.top,Q.left),N&&H.viewport.dpr!==Cw(N)&&H.setDpr(N),H.frameloop!==F&&H.setFrameloop(F),H.onPointerMissed||H.set({onPointerMissed:L}),z&&!On.equ(z,H.performance,ac)&&H.set(K=>({performance:{...K.performance,...z}})),c=A,f=!0,this},render(m){return f||this.configure(),ag.updateContainer(Ie.jsx(kR,{store:s,children:m,onCreated:c,rootElement:a}),u,null,()=>{}),s},unmount(){Dw(a)}}}function kR({store:a,children:e,onCreated:t,rootElement:n}){return Tf(()=>{const i=a.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),a.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),Ie.jsx(Lw.Provider,{value:a,children:e})}function Dw(a,e){const t=Sc.get(a),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),ag.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,u,c,f;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(u=s.renderLists)==null||u.dispose==null||u.dispose(),(c=i.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=i.gl)!=null&&f.xr&&i.xr.disconnect(),mR(i),Sc.delete(a)}catch{}},500)})}}ag.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:je.version});const Ay={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function CR(a){const{handlePointer:e}=xR(a);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(Ay).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=a.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=a.getState();s.disconnect==null||s.disconnect(),i(u=>({events:{...u.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([u,c])=>{const[f,p]=Ay[u];t.addEventListener(f,c,{passive:p})})},disconnect:()=>{const{set:t,events:n}=a.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,u])=>{if(n&&n.connected instanceof HTMLElement){const[c]=Ay[s];n.connected.removeEventListener(c,u)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function fb(a,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>a(...n),e)}}function RR({debounce:a,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,u]=je.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=je.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),f=a?typeof a=="number"?a:a.scroll:null,p=a?typeof a=="number"?a:a.resize:null,m=je.useRef(!1);je.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[v,x,_]=je.useMemo(()=>{const w=()=>{if(!c.current.element)return;const{left:C,top:R,width:P,height:F,bottom:N,right:z,x:G,y:D}=c.current.element.getBoundingClientRect(),L={left:C,top:R,width:P,height:F,bottom:N,right:z,x:G,y:D};c.current.element instanceof HTMLElement&&n&&(L.height=c.current.element.offsetHeight,L.width=c.current.element.offsetWidth),Object.freeze(L),m.current&&!NR(c.current.lastBounds,L)&&u(c.current.lastBounds=L)};return[w,p?fb(w,p):w,f?fb(w,f):w]},[u,n,f,p]);function S(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",_,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function A(){c.current.element&&(c.current.resizeObserver=new i(_),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(w=>w.addEventListener("scroll",_,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const T=w=>{!w||w===c.current.element||(S(),c.current.element=w,c.current.scrollContainers=Ow(w),A())};return PR(_,!!e),IR(x),je.useEffect(()=>{S(),A()},[e,_,x]),je.useEffect(()=>S,[]),[T,s,v]}function IR(a){je.useEffect(()=>{const e=a;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[a])}function PR(a,e){je.useEffect(()=>{if(e){const t=a;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[a,e])}function Ow(a){const e=[];if(!a||a===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(a);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(a),[...e,...Ow(a.parentElement)]}const LR=["x","y","top","bottom","left","right","width","height"],NR=(a,e)=>LR.every(t=>a[t]===e[t]);var DR=Object.defineProperty,OR=Object.defineProperties,UR=Object.getOwnPropertyDescriptors,pb=Object.getOwnPropertySymbols,FR=Object.prototype.hasOwnProperty,BR=Object.prototype.propertyIsEnumerable,mb=(a,e,t)=>e in a?DR(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,gb=(a,e)=>{for(var t in e||(e={}))FR.call(e,t)&&mb(a,t,e[t]);if(pb)for(var t of pb(e))BR.call(e,t)&&mb(a,t,e[t]);return a},zR=(a,e)=>OR(a,UR(e)),vb,yb;typeof window<"u"&&((vb=window.document)!=null&&vb.createElement||((yb=window.navigator)==null?void 0:yb.product)==="ReactNative")?je.useLayoutEffect:je.useEffect;function Uw(a,e,t){if(!a)return;if(t(a)===!0)return a;let n=a.child;for(;n;){const i=Uw(n,e,t);if(i)return i;n=n.sibling}}function Fw(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const xb=console.error;console.error=function(){const a=[...arguments].join("");if(a!=null&&a.startsWith("Warning:")&&a.includes("useContext")){console.error=xb;return}return xb.apply(this,arguments)};const N0=Fw(je.createContext(null));class Bw extends je.Component{render(){return je.createElement(N0.Provider,{value:this._reactInternals},this.props.children)}}function VR(){const a=je.useContext(N0);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=je.useId();return je.useMemo(()=>{for(const n of[a,a==null?void 0:a.alternate]){if(!n)continue;const i=Uw(n,!1,s=>{let u=s.memoizedState;for(;u;){if(u.memoizedState===e)return!0;u=u.next}});if(i)return i}},[a,e])}function HR(){const a=VR(),[e]=je.useState(()=>new Map);e.clear();let t=a;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==N0&&!e.has(i)&&e.set(i,je.useContext(Fw(i)))}t=t.return}return e}function jR(){const a=HR();return je.useMemo(()=>Array.from(a.keys()).reduce((e,t)=>n=>je.createElement(e,null,je.createElement(t.Provider,zR(gb({},n),{value:a.get(t)}))),e=>je.createElement(Bw,gb({},e))),[a])}const GR=je.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:u=CR,eventSource:c,eventPrefix:f,shadows:p,linear:m,flat:v,legacy:x,orthographic:_,frameloop:S,dpr:A,performance:T,raycaster:w,camera:C,scene:R,onPointerMissed:P,onCreated:F,...N},z){je.useMemo(()=>hR(ZC),[]);const G=jR(),[D,L]=RR({scroll:!0,debounce:{scroll:50,resize:0},...n}),H=je.useRef(null),ee=je.useRef(null);je.useImperativeHandle(z,()=>H.current);const ne=Ew(P),[me,fe]=je.useState(!1),[ye,we]=je.useState(!1);if(me)throw me;if(ye)throw ye;const B=je.useRef(null);Tf(()=>{const K=H.current;L.width>0&&L.height>0&&K&&(B.current||(B.current=AR(K)),B.current.configure({gl:s,events:u,shadows:p,linear:m,flat:v,legacy:x,orthographic:_,frameloop:S,dpr:A,performance:T,raycaster:w,camera:C,scene:R,size:L,onPointerMissed:(...j)=>ne.current==null?void 0:ne.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(c?dR(c)?c.current:c:ee.current),f&&j.setEvents({compute:(ie,Ce)=>{const Ye=ie[f+"X"],at=ie[f+"Y"];Ce.pointer.set(Ye/Ce.size.width*2-1,-(at/Ce.size.height)*2+1),Ce.raycaster.setFromCamera(Ce.pointer,Ce.camera)}}),F==null||F(j)}}),B.current.render(Ie.jsx(G,{children:Ie.jsx(Aw,{set:we,children:Ie.jsx(je.Suspense,{fallback:Ie.jsx(fR,{set:fe}),children:e??null})})})))}),je.useEffect(()=>{const K=H.current;if(K)return()=>Dw(K)},[]);const Q=c?"none":"auto";return Ie.jsx("div",{ref:ee,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...i},...N,children:Ie.jsx("div",{ref:D,style:{width:"100%",height:"100%"},children:Ie.jsx("canvas",{ref:H,style:{display:"block"},children:t})})})}),WR=je.forwardRef(function(e,t){return Ie.jsx(Bw,{children:Ie.jsx(GR,{...e,ref:t})})});function sg(){return sg=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},sg.apply(null,arguments)}var XR=Object.defineProperty,YR=(a,e,t)=>e in a?XR(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,qR=(a,e,t)=>(YR(a,e+"",t),t);class KR{constructor(){qR(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,u=i.length;s<u;s++)i[s].call(this,e);e.target=null}}}var ZR=Object.defineProperty,JR=(a,e,t)=>e in a?ZR(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Bt=(a,e,t)=>(JR(a,typeof e!="symbol"?e+"":e,t),t);const cm=new Cu,_b=new ao,QR=Math.cos(70*(Math.PI/180)),bb=(a,e)=>(a%e+e)%e;let $R=class extends KR{constructor(e,t){super(),Bt(this,"object"),Bt(this,"domElement"),Bt(this,"enabled",!0),Bt(this,"target",new Y),Bt(this,"minDistance",0),Bt(this,"maxDistance",1/0),Bt(this,"minZoom",0),Bt(this,"maxZoom",1/0),Bt(this,"minPolarAngle",0),Bt(this,"maxPolarAngle",Math.PI),Bt(this,"minAzimuthAngle",-1/0),Bt(this,"maxAzimuthAngle",1/0),Bt(this,"enableDamping",!1),Bt(this,"dampingFactor",.05),Bt(this,"enableZoom",!0),Bt(this,"zoomSpeed",1),Bt(this,"enableRotate",!0),Bt(this,"rotateSpeed",1),Bt(this,"enablePan",!0),Bt(this,"panSpeed",1),Bt(this,"screenSpacePanning",!0),Bt(this,"keyPanSpeed",7),Bt(this,"zoomToCursor",!1),Bt(this,"autoRotate",!1),Bt(this,"autoRotateSpeed",2),Bt(this,"reverseOrbit",!1),Bt(this,"reverseHorizontalOrbit",!1),Bt(this,"reverseVerticalOrbit",!1),Bt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Bt(this,"mouseButtons",{LEFT:pu.ROTATE,MIDDLE:pu.DOLLY,RIGHT:pu.PAN}),Bt(this,"touches",{ONE:mu.ROTATE,TWO:mu.DOLLY_PAN}),Bt(this,"target0"),Bt(this,"position0"),Bt(this,"zoom0"),Bt(this,"_domElementKeyEvents",null),Bt(this,"getPolarAngle"),Bt(this,"getAzimuthalAngle"),Bt(this,"setPolarAngle"),Bt(this,"setAzimuthalAngle"),Bt(this,"getDistance"),Bt(this,"getZoomScale"),Bt(this,"listenToKeyEvents"),Bt(this,"stopListenToKeyEvents"),Bt(this,"saveState"),Bt(this,"reset"),Bt(this,"update"),Bt(this,"connect"),Bt(this,"dispose"),Bt(this,"dollyIn"),Bt(this,"dollyOut"),Bt(this,"getScale"),Bt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=$=>{let ge=bb($,2*Math.PI),ze=m.phi;ze<0&&(ze+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let J=Math.abs(ge-ze);2*Math.PI-J<J&&(ge<ze?ge+=2*Math.PI:ze+=2*Math.PI),v.phi=ge-ze,n.update()},this.setAzimuthalAngle=$=>{let ge=bb($,2*Math.PI),ze=m.theta;ze<0&&(ze+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let J=Math.abs(ge-ze);2*Math.PI-J<J&&(ge<ze?ge+=2*Math.PI:ze+=2*Math.PI),v.theta=ge-ze,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=$=>{$.addEventListener("keydown",Se),this._domElementKeyEvents=$},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Se),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),f=c.NONE},this.update=(()=>{const $=new Y,ge=new Y(0,1,0),ze=new er().setFromUnitVectors(e.up,ge),J=ze.clone().invert(),Ve=new Y,He=new er,Ge=2*Math.PI;return function(){const ke=n.object.position;ze.setFromUnitVectors(e.up,ge),J.copy(ze).invert(),$.copy(ke).sub(n.target),$.applyQuaternion(ze),m.setFromVector3($),n.autoRotate&&f===c.NONE&&me(ee()),n.enableDamping?(m.theta+=v.theta*n.dampingFactor,m.phi+=v.phi*n.dampingFactor):(m.theta+=v.theta,m.phi+=v.phi);let lt=n.minAzimuthAngle,Pt=n.maxAzimuthAngle;isFinite(lt)&&isFinite(Pt)&&(lt<-Math.PI?lt+=Ge:lt>Math.PI&&(lt-=Ge),Pt<-Math.PI?Pt+=Ge:Pt>Math.PI&&(Pt-=Ge),lt<=Pt?m.theta=Math.max(lt,Math.min(Pt,m.theta)):m.theta=m.theta>(lt+Pt)/2?Math.max(lt,m.theta):Math.min(Pt,m.theta)),m.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,m.phi)),m.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(_,n.dampingFactor):n.target.add(_),n.zoomToCursor&&D||n.object.isOrthographicCamera?m.radius=Ce(m.radius):m.radius=Ce(m.radius*x),$.setFromSpherical(m),$.applyQuaternion(J),ke.copy(n.target).add($),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(v.theta*=1-n.dampingFactor,v.phi*=1-n.dampingFactor,_.multiplyScalar(1-n.dampingFactor)):(v.set(0,0,0),_.set(0,0,0));let un=!1;if(n.zoomToCursor&&D){let en=null;if(n.object instanceof ii&&n.object.isPerspectiveCamera){const Xn=$.length();en=Ce(Xn*x);const Un=Xn-en;n.object.position.addScaledVector(z,Un),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Xn=new Y(G.x,G.y,0);Xn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix(),un=!0;const Un=new Y(G.x,G.y,0);Un.unproject(n.object),n.object.position.sub(Un).add(Xn),n.object.updateMatrixWorld(),en=$.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;en!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(en).add(n.object.position):(cm.origin.copy(n.object.position),cm.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(cm.direction))<QR?e.lookAt(n.target):(_b.setFromNormalAndCoplanarPoint(n.object.up,n.target),cm.intersectPlane(_b,n.target))))}else n.object instanceof rl&&n.object.isOrthographicCamera&&(un=x!==1,un&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix()));return x=1,D=!1,un||Ve.distanceToSquared(n.object.position)>p||8*(1-He.dot(n.object.quaternion))>p?(n.dispatchEvent(i),Ve.copy(n.object.position),He.copy(n.object.quaternion),un=!1,!0):!1}})(),this.connect=$=>{n.domElement=$,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Tt),n.domElement.addEventListener("pointerdown",ht),n.domElement.addEventListener("pointercancel",O),n.domElement.addEventListener("wheel",Re)},this.dispose=()=>{var $,ge,ze,J,Ve,He;n.domElement&&(n.domElement.style.touchAction="auto"),($=n.domElement)==null||$.removeEventListener("contextmenu",Tt),(ge=n.domElement)==null||ge.removeEventListener("pointerdown",ht),(ze=n.domElement)==null||ze.removeEventListener("pointercancel",O),(J=n.domElement)==null||J.removeEventListener("wheel",Re),(Ve=n.domElement)==null||Ve.ownerDocument.removeEventListener("pointermove",W),(He=n.domElement)==null||He.ownerDocument.removeEventListener("pointerup",O),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Se)};const n=this,i={type:"change"},s={type:"start"},u={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=c.NONE;const p=1e-6,m=new Vy,v=new Vy;let x=1;const _=new Y,S=new Ae,A=new Ae,T=new Ae,w=new Ae,C=new Ae,R=new Ae,P=new Ae,F=new Ae,N=new Ae,z=new Y,G=new Ae;let D=!1;const L=[],H={};function ee(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ne(){return Math.pow(.95,n.zoomSpeed)}function me($){n.reverseOrbit||n.reverseHorizontalOrbit?v.theta+=$:v.theta-=$}function fe($){n.reverseOrbit||n.reverseVerticalOrbit?v.phi+=$:v.phi-=$}const ye=(()=>{const $=new Y;return function(ze,J){$.setFromMatrixColumn(J,0),$.multiplyScalar(-ze),_.add($)}})(),we=(()=>{const $=new Y;return function(ze,J){n.screenSpacePanning===!0?$.setFromMatrixColumn(J,1):($.setFromMatrixColumn(J,0),$.crossVectors(n.object.up,$)),$.multiplyScalar(ze),_.add($)}})(),B=(()=>{const $=new Y;return function(ze,J){const Ve=n.domElement;if(Ve&&n.object instanceof ii&&n.object.isPerspectiveCamera){const He=n.object.position;$.copy(He).sub(n.target);let Ge=$.length();Ge*=Math.tan(n.object.fov/2*Math.PI/180),ye(2*ze*Ge/Ve.clientHeight,n.object.matrix),we(2*J*Ge/Ve.clientHeight,n.object.matrix)}else Ve&&n.object instanceof rl&&n.object.isOrthographicCamera?(ye(ze*(n.object.right-n.object.left)/n.object.zoom/Ve.clientWidth,n.object.matrix),we(J*(n.object.top-n.object.bottom)/n.object.zoom/Ve.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function Q($){n.object instanceof ii&&n.object.isPerspectiveCamera||n.object instanceof rl&&n.object.isOrthographicCamera?x=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function K($){Q(x/$)}function j($){Q(x*$)}function ie($){if(!n.zoomToCursor||!n.domElement)return;D=!0;const ge=n.domElement.getBoundingClientRect(),ze=$.clientX-ge.left,J=$.clientY-ge.top,Ve=ge.width,He=ge.height;G.x=ze/Ve*2-1,G.y=-(J/He)*2+1,z.set(G.x,G.y,1).unproject(n.object).sub(n.object.position).normalize()}function Ce($){return Math.max(n.minDistance,Math.min(n.maxDistance,$))}function Ye($){S.set($.clientX,$.clientY)}function at($){ie($),P.set($.clientX,$.clientY)}function he($){w.set($.clientX,$.clientY)}function be($){A.set($.clientX,$.clientY),T.subVectors(A,S).multiplyScalar(n.rotateSpeed);const ge=n.domElement;ge&&(me(2*Math.PI*T.x/ge.clientHeight),fe(2*Math.PI*T.y/ge.clientHeight)),S.copy(A),n.update()}function Fe($){F.set($.clientX,$.clientY),N.subVectors(F,P),N.y>0?K(ne()):N.y<0&&j(ne()),P.copy(F),n.update()}function it($){C.set($.clientX,$.clientY),R.subVectors(C,w).multiplyScalar(n.panSpeed),B(R.x,R.y),w.copy(C),n.update()}function st($){ie($),$.deltaY<0?j(ne()):$.deltaY>0&&K(ne()),n.update()}function Lt($){let ge=!1;switch($.code){case n.keys.UP:B(0,n.keyPanSpeed),ge=!0;break;case n.keys.BOTTOM:B(0,-n.keyPanSpeed),ge=!0;break;case n.keys.LEFT:B(n.keyPanSpeed,0),ge=!0;break;case n.keys.RIGHT:B(-n.keyPanSpeed,0),ge=!0;break}ge&&($.preventDefault(),n.update())}function on(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const $=.5*(L[0].pageX+L[1].pageX),ge=.5*(L[0].pageY+L[1].pageY);S.set($,ge)}}function yt(){if(L.length==1)w.set(L[0].pageX,L[0].pageY);else{const $=.5*(L[0].pageX+L[1].pageX),ge=.5*(L[0].pageY+L[1].pageY);w.set($,ge)}}function Pe(){const $=L[0].pageX-L[1].pageX,ge=L[0].pageY-L[1].pageY,ze=Math.sqrt($*$+ge*ge);P.set(0,ze)}function X(){n.enableZoom&&Pe(),n.enablePan&&yt()}function Le(){n.enableZoom&&Pe(),n.enableRotate&&on()}function Be($){if(L.length==1)A.set($.pageX,$.pageY);else{const ze=Dt($),J=.5*($.pageX+ze.x),Ve=.5*($.pageY+ze.y);A.set(J,Ve)}T.subVectors(A,S).multiplyScalar(n.rotateSpeed);const ge=n.domElement;ge&&(me(2*Math.PI*T.x/ge.clientHeight),fe(2*Math.PI*T.y/ge.clientHeight)),S.copy(A)}function Ke($){if(L.length==1)C.set($.pageX,$.pageY);else{const ge=Dt($),ze=.5*($.pageX+ge.x),J=.5*($.pageY+ge.y);C.set(ze,J)}R.subVectors(C,w).multiplyScalar(n.panSpeed),B(R.x,R.y),w.copy(C)}function Oe($){const ge=Dt($),ze=$.pageX-ge.x,J=$.pageY-ge.y,Ve=Math.sqrt(ze*ze+J*J);F.set(0,Ve),N.set(0,Math.pow(F.y/P.y,n.zoomSpeed)),K(N.y),P.copy(F)}function ot($){n.enableZoom&&Oe($),n.enablePan&&Ke($)}function $e($){n.enableZoom&&Oe($),n.enableRotate&&Be($)}function ht($){var ge,ze;n.enabled!==!1&&(L.length===0&&((ge=n.domElement)==null||ge.ownerDocument.addEventListener("pointermove",W),(ze=n.domElement)==null||ze.ownerDocument.addEventListener("pointerup",O)),wt($),$.pointerType==="touch"?Mt($):ue($))}function W($){n.enabled!==!1&&($.pointerType==="touch"?et($):Te($))}function O($){var ge,ze,J;Ne($),L.length===0&&((ge=n.domElement)==null||ge.releasePointerCapture($.pointerId),(ze=n.domElement)==null||ze.ownerDocument.removeEventListener("pointermove",W),(J=n.domElement)==null||J.ownerDocument.removeEventListener("pointerup",O)),n.dispatchEvent(u),f=c.NONE}function ue($){let ge;switch($.button){case 0:ge=n.mouseButtons.LEFT;break;case 1:ge=n.mouseButtons.MIDDLE;break;case 2:ge=n.mouseButtons.RIGHT;break;default:ge=-1}switch(ge){case pu.DOLLY:if(n.enableZoom===!1)return;at($),f=c.DOLLY;break;case pu.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enablePan===!1)return;he($),f=c.PAN}else{if(n.enableRotate===!1)return;Ye($),f=c.ROTATE}break;case pu.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enableRotate===!1)return;Ye($),f=c.ROTATE}else{if(n.enablePan===!1)return;he($),f=c.PAN}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(s)}function Te($){if(n.enabled!==!1)switch(f){case c.ROTATE:if(n.enableRotate===!1)return;be($);break;case c.DOLLY:if(n.enableZoom===!1)return;Fe($);break;case c.PAN:if(n.enablePan===!1)return;it($);break}}function Re($){n.enabled===!1||n.enableZoom===!1||f!==c.NONE&&f!==c.ROTATE||($.preventDefault(),n.dispatchEvent(s),st($),n.dispatchEvent(u))}function Se($){n.enabled===!1||n.enablePan===!1||Lt($)}function Mt($){switch(Je($),L.length){case 1:switch(n.touches.ONE){case mu.ROTATE:if(n.enableRotate===!1)return;on(),f=c.TOUCH_ROTATE;break;case mu.PAN:if(n.enablePan===!1)return;yt(),f=c.TOUCH_PAN;break;default:f=c.NONE}break;case 2:switch(n.touches.TWO){case mu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;X(),f=c.TOUCH_DOLLY_PAN;break;case mu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Le(),f=c.TOUCH_DOLLY_ROTATE;break;default:f=c.NONE}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(s)}function et($){switch(Je($),f){case c.TOUCH_ROTATE:if(n.enableRotate===!1)return;Be($),n.update();break;case c.TOUCH_PAN:if(n.enablePan===!1)return;Ke($),n.update();break;case c.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ot($),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;$e($),n.update();break;default:f=c.NONE}}function Tt($){n.enabled!==!1&&$.preventDefault()}function wt($){L.push($)}function Ne($){delete H[$.pointerId];for(let ge=0;ge<L.length;ge++)if(L[ge].pointerId==$.pointerId){L.splice(ge,1);return}}function Je($){let ge=H[$.pointerId];ge===void 0&&(ge=new Ae,H[$.pointerId]=ge),ge.set($.pageX,$.pageY)}function Dt($){const ge=$.pointerId===L[0].pointerId?L[1]:L[0];return H[ge.pointerId]}this.dollyIn=($=ne())=>{j($),n.update()},this.dollyOut=($=ne())=>{K($),n.update()},this.getScale=()=>x,this.setScale=$=>{Q($),n.update()},this.getZoomScale=()=>ne(),t!==void 0&&this.connect(t),this.update()}};function eI(a,e,t){const n=Qr(x=>x.size),i=Qr(x=>x.viewport),s=typeof a=="number"?a:n.width*i.dpr,u=n.height*i.dpr,c=(typeof a=="number"?t:a)||{},{samples:f=0,depth:p,...m}=c,v=je.useMemo(()=>{const x=new Ka(s,u,{minFilter:Wn,magFilter:Wn,type:ll,...m});return p&&(x.depthTexture=new Ag(s,u,vr)),x.samples=f,x},[]);return je.useLayoutEffect(()=>{v.setSize(s,u),f&&(v.samples=f)},[f,v,s,u]),je.useEffect(()=>()=>v.dispose(),[]),v}const tI=a=>typeof a=="function",nI=je.forwardRef(({envMap:a,resolution:e=256,frames:t=1/0,makeDefault:n,children:i,...s},u)=>{const c=Qr(({set:T})=>T),f=Qr(({camera:T})=>T),p=Qr(({size:T})=>T),m=je.useRef(null);je.useImperativeHandle(u,()=>m.current,[]);const v=je.useRef(null),x=eI(e);je.useLayoutEffect(()=>{s.manual||(m.current.aspect=p.width/p.height)},[p,s]),je.useLayoutEffect(()=>{m.current.updateProjectionMatrix()});let _=0,S=null;const A=tI(i);return kc(T=>{A&&(t===1/0||_<t)&&(v.current.visible=!1,T.gl.setRenderTarget(x),S=T.scene.background,a&&(T.scene.background=a),T.gl.render(T.scene,m.current),T.scene.background=S,T.gl.setRenderTarget(null),v.current.visible=!0,_++)}),je.useLayoutEffect(()=>{if(n){const T=f;return c(()=>({camera:m.current})),()=>c(()=>({camera:T}))}},[m,n,c]),je.createElement(je.Fragment,null,je.createElement("perspectiveCamera",sg({ref:m},s),!A&&i),je.createElement("group",{ref:v},A&&i(x.texture)))}),iI=je.forwardRef(({makeDefault:a,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:u,onStart:c,onEnd:f,...p},m)=>{const v=Qr(N=>N.invalidate),x=Qr(N=>N.camera),_=Qr(N=>N.gl),S=Qr(N=>N.events),A=Qr(N=>N.setEvents),T=Qr(N=>N.set),w=Qr(N=>N.get),C=Qr(N=>N.performance),R=e||x,P=n||S.connected||_.domElement,F=je.useMemo(()=>new $R(R),[R]);return kc(()=>{F.enabled&&F.update()},-1),je.useEffect(()=>(s&&F.connect(s===!0?P:s),F.connect(P),()=>void F.dispose()),[s,P,t,F,v]),je.useEffect(()=>{const N=D=>{v(),t&&C.regress(),u&&u(D)},z=D=>{c&&c(D)},G=D=>{f&&f(D)};return F.addEventListener("change",N),F.addEventListener("start",z),F.addEventListener("end",G),()=>{F.removeEventListener("start",z),F.removeEventListener("end",G),F.removeEventListener("change",N)}},[u,c,f,F,v,A]),je.useEffect(()=>{if(a){const N=w().controls;return T({controls:F}),()=>T({controls:N})}},[a,F]),je.createElement("primitive",sg({ref:m,object:F,enableDamping:i},p))}),rI=je.forwardRef(({children:a,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:u=!1,...c},f)=>{const p=je.useRef(null);je.useImperativeHandle(f,()=>p.current,[]);const m=je.useRef(Math.random()*1e4);return kc(v=>{var x,_;if(!e||t===0)return;u&&v.invalidate();const S=m.current+v.clock.elapsedTime;p.current.rotation.x=Math.cos(S/4*t)/8*n,p.current.rotation.y=Math.sin(S/4*t)/8*n,p.current.rotation.z=Math.sin(S/4*t)/20*n;let A=Math.sin(S/4*t)/10;A=f1.mapLinear(A,-.1,.1,(x=s==null?void 0:s[0])!==null&&x!==void 0?x:-.1,(_=s==null?void 0:s[1])!==null&&_!==void 0?_:.1),p.current.position.y=A*i,p.current.updateMatrix()}),je.createElement("group",c,je.createElement("group",{ref:p,matrixAutoUpdate:!1},a))});function dm({position:a,char:e}){const t=je.useRef(null);return kc(n=>{t.current&&(t.current.rotation.y+=.01,t.current.position.y=a[1]+Math.sin(n.clock.elapsedTime+a[0])*.3)}),Ie.jsx(rI,{speed:1.5,rotationIntensity:.5,floatIntensity:.5,children:Ie.jsxs("mesh",{ref:t,position:a,children:[Ie.jsx("planeGeometry",{args:[.5,.5]}),Ie.jsx("meshBasicMaterial",{color:"#ff8c42",transparent:!0,opacity:.3,side:ma})]})})}function aI(){const a=je.useRef(null);return kc(e=>{a.current&&(a.current.rotation.y=Math.sin(e.clock.elapsedTime*.3)*.1,a.current.position.y=Math.sin(e.clock.elapsedTime*.5)*.2)}),Ie.jsxs("group",{ref:a,position:[-2.5,-.5,0],children:[Ie.jsxs("mesh",{position:[0,1.5,0],children:[Ie.jsx("ringGeometry",{args:[1.2,1.5,32]}),Ie.jsx("meshBasicMaterial",{color:"#ffb84d",transparent:!0,opacity:.8,side:ma})]}),Ie.jsxs("mesh",{position:[0,1.2,0],children:[Ie.jsx("sphereGeometry",{args:[.5,32,32]}),Ie.jsx("meshStandardMaterial",{color:"#87ceeb"})]}),Ie.jsxs("mesh",{position:[0,.5,0],children:[Ie.jsx("cylinderGeometry",{args:[.6,.7,1,32]}),Ie.jsx("meshStandardMaterial",{color:"#ffd700"})]}),Ie.jsxs("mesh",{position:[0,1.8,0],rotation:[0,0,.3],children:[Ie.jsx("coneGeometry",{args:[.15,.4,8]}),Ie.jsx("meshStandardMaterial",{color:"#2962ff"})]})]})}function sI(){const a=je.useRef(null);return kc(e=>{a.current&&(a.current.rotation.y=Math.sin(e.clock.elapsedTime*.3+Math.PI)*.1,a.current.position.y=Math.sin(e.clock.elapsedTime*.5+Math.PI)*.2)}),Ie.jsxs("group",{ref:a,position:[2.5,-.5,0],children:[Ie.jsxs("mesh",{position:[0,1.2,0],children:[Ie.jsx("sphereGeometry",{args:[.5,32,32]}),Ie.jsx("meshStandardMaterial",{color:"#f2a65a"})]}),Ie.jsxs("mesh",{position:[0,.5,0],children:[Ie.jsx("cylinderGeometry",{args:[.6,.7,1,32]}),Ie.jsx("meshStandardMaterial",{color:"#ffc107"})]})]})}const oI=({showCharacters:a=!0})=>Ie.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",style:{opacity:.6},children:Ie.jsxs(WR,{children:[Ie.jsx(nI,{makeDefault:!0,position:[0,.5,6],fov:60}),Ie.jsx("ambientLight",{intensity:.6}),Ie.jsx("directionalLight",{position:[5,5,5],intensity:1}),Ie.jsx("pointLight",{position:[-5,-5,-5],intensity:.4,color:"#ff8c42"}),Ie.jsx("pointLight",{position:[5,5,-5],intensity:.4,color:"#ffb84d"}),a&&Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(aI,{}),Ie.jsx(sI,{})]}),Ie.jsx(dm,{position:[-3,2,-1],char:""}),Ie.jsx(dm,{position:[3,-1,-1],char:""}),Ie.jsx(dm,{position:[0,3,-2],char:""}),Ie.jsx(dm,{position:[-2,-2,-1],char:""}),Ie.jsx(iI,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.5,minPolarAngle:Math.PI/3.5,maxPolarAngle:Math.PI/2.1})]})}),lI=()=>Ie.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),uI=()=>{const[a,e]=je.useState(null),t=i=>{e(i),window.scrollTo(0,0)},n=()=>{e(null),window.scrollTo(0,0)};return Ie.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-orange-100 via-orange-50 to-white text-gray-800 relative overflow-hidden",children:[Ie.jsx(oI,{showCharacters:!a}),Ie.jsxs("main",{className:"container mx-auto px-4 py-8 relative z-10",children:[Ie.jsxs("header",{className:"flex justify-between items-center mb-12",children:[Ie.jsx("div",{className:"flex-1 flex justify-start",children:a&&Ie.jsxs("button",{onClick:n,className:"flex items-center text-orange-800 hover:text-orange-900 transition-colors z-20 relative","aria-label":"Back to Chapters",children:[Ie.jsx(lI,{}),Ie.jsx("span",{className:"ml-2 font-semibold hidden md:inline",children:"Back to Chapters"})]})}),Ie.jsxs("div",{className:"text-center relative z-10",children:[Ie.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-orange-900 font-sanskrit drop-shadow-lg",children:""}),Ie.jsx("p",{className:"text-xl md:text-2xl text-orange-700 mt-2 drop-shadow-md",children:"The Divine Song of God"})]}),Ie.jsx("div",{className:"flex-1"})]}),a?Ie.jsx(AS,{chapter:a},a.id):Ie.jsx(MS,{chapters:wS,onSelectChapter:t})]}),Ie.jsx("footer",{className:"text-center py-6 text-orange-700/60 text-sm relative z-10",children:Ie.jsx("p",{children:"Inspired by the timeless wisdom of the Bhagavad Gita."})})]})},zw=document.getElementById("root");if(!zw)throw new Error("Could not find root element to mount to");const hI=bS.createRoot(zw);hI.render(Ie.jsx(pS.StrictMode,{children:Ie.jsx(uI,{})}));
