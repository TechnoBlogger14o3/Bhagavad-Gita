(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function qy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _v={exports:{}},Sd={},bv={exports:{}},ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx;function fS(){if(fx)return ln;fx=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=g&&H[g]||H["@@iterator"],typeof H=="function"?H:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function M(H,ae,Re){this.props=H,this.context=ae,this.refs=T,this.updater=Re||_}M.prototype.isReactComponent={},M.prototype.setState=function(H,ae){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ae,"setState")},M.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function w(){}w.prototype=M.prototype;function C(H,ae,Re){this.props=H,this.context=ae,this.refs=T,this.updater=Re||_}var I=C.prototype=new w;I.constructor=C,S(I,M.prototype),I.isPureReactComponent=!0;var L=Array.isArray,F=Object.prototype.hasOwnProperty,N={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function G(H,ae,Re){var Ye,rt={},ce=null,we=null;if(ae!=null)for(Ye in ae.ref!==void 0&&(we=ae.ref),ae.key!==void 0&&(ce=""+ae.key),ae)F.call(ae,Ye)&&!z.hasOwnProperty(Ye)&&(rt[Ye]=ae[Ye]);var Be=arguments.length-2;if(Be===1)rt.children=Re;else if(1<Be){for(var it=Array(Be),st=0;st<Be;st++)it[st]=arguments[st+2];rt.children=it}if(H&&H.defaultProps)for(Ye in Be=H.defaultProps,Be)rt[Ye]===void 0&&(rt[Ye]=Be[Ye]);return{$$typeof:r,type:H,key:ce,ref:we,props:rt,_owner:N.current}}function D(H,ae){return{$$typeof:r,type:H.type,key:ae,ref:H.ref,props:H.props,_owner:H._owner}}function P(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function V(H){var ae={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Re){return ae[Re]})}var ee=/\/+/g;function ie(H,ae){return typeof H=="object"&&H!==null&&H.key!=null?V(""+H.key):ae.toString(36)}function pe(H,ae,Re,Ye,rt){var ce=typeof H;(ce==="undefined"||ce==="boolean")&&(H=null);var we=!1;if(H===null)we=!0;else switch(ce){case"string":case"number":we=!0;break;case"object":switch(H.$$typeof){case r:case e:we=!0}}if(we)return we=H,rt=rt(we),H=Ye===""?"."+ie(we,0):Ye,L(rt)?(Re="",H!=null&&(Re=H.replace(ee,"$&/")+"/"),pe(rt,ae,Re,"",function(st){return st})):rt!=null&&(P(rt)&&(rt=D(rt,Re+(!rt.key||we&&we.key===rt.key?"":(""+rt.key).replace(ee,"$&/")+"/")+H)),ae.push(rt)),1;if(we=0,Ye=Ye===""?".":Ye+":",L(H))for(var Be=0;Be<H.length;Be++){ce=H[Be];var it=Ye+ie(ce,Be);we+=pe(ce,ae,Re,it,rt)}else if(it=x(H),typeof it=="function")for(H=it.call(H),Be=0;!(ce=H.next()).done;)ce=ce.value,it=Ye+ie(ce,Be++),we+=pe(ce,ae,Re,it,rt);else if(ce==="object")throw ae=String(H),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return we}function me(H,ae,Re){if(H==null)return H;var Ye=[],rt=0;return pe(H,Ye,"","",function(ce){return ae.call(Re,ce,rt++)}),Ye}function ve(H){if(H._status===-1){var ae=H._result;ae=ae(),ae.then(function(Re){(H._status===0||H._status===-1)&&(H._status=1,H._result=Re)},function(Re){(H._status===0||H._status===-1)&&(H._status=2,H._result=Re)}),H._status===-1&&(H._status=0,H._result=ae)}if(H._status===1)return H._result.default;throw H._result}var Se={current:null},B={transition:null},Q={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:B,ReactCurrentOwner:N};function K(){throw Error("act(...) is not supported in production builds of React.")}return ln.Children={map:me,forEach:function(H,ae,Re){me(H,function(){ae.apply(this,arguments)},Re)},count:function(H){var ae=0;return me(H,function(){ae++}),ae},toArray:function(H){return me(H,function(ae){return ae})||[]},only:function(H){if(!P(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},ln.Component=M,ln.Fragment=t,ln.Profiler=i,ln.PureComponent=C,ln.StrictMode=n,ln.Suspense=f,ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,ln.act=K,ln.cloneElement=function(H,ae,Re){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ye=S({},H.props),rt=H.key,ce=H.ref,we=H._owner;if(ae!=null){if(ae.ref!==void 0&&(ce=ae.ref,we=N.current),ae.key!==void 0&&(rt=""+ae.key),H.type&&H.type.defaultProps)var Be=H.type.defaultProps;for(it in ae)F.call(ae,it)&&!z.hasOwnProperty(it)&&(Ye[it]=ae[it]===void 0&&Be!==void 0?Be[it]:ae[it])}var it=arguments.length-2;if(it===1)Ye.children=Re;else if(1<it){Be=Array(it);for(var st=0;st<it;st++)Be[st]=arguments[st+2];Ye.children=Be}return{$$typeof:r,type:H.type,key:rt,ref:ce,props:Ye,_owner:we}},ln.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:s,_context:H},H.Consumer=H},ln.createElement=G,ln.createFactory=function(H){var ae=G.bind(null,H);return ae.type=H,ae},ln.createRef=function(){return{current:null}},ln.forwardRef=function(H){return{$$typeof:c,render:H}},ln.isValidElement=P,ln.lazy=function(H){return{$$typeof:p,_payload:{_status:-1,_result:H},_init:ve}},ln.memo=function(H,ae){return{$$typeof:m,type:H,compare:ae===void 0?null:ae}},ln.startTransition=function(H){var ae=B.transition;B.transition={};try{H()}finally{B.transition=ae}},ln.unstable_act=K,ln.useCallback=function(H,ae){return Se.current.useCallback(H,ae)},ln.useContext=function(H){return Se.current.useContext(H)},ln.useDebugValue=function(){},ln.useDeferredValue=function(H){return Se.current.useDeferredValue(H)},ln.useEffect=function(H,ae){return Se.current.useEffect(H,ae)},ln.useId=function(){return Se.current.useId()},ln.useImperativeHandle=function(H,ae,Re){return Se.current.useImperativeHandle(H,ae,Re)},ln.useInsertionEffect=function(H,ae){return Se.current.useInsertionEffect(H,ae)},ln.useLayoutEffect=function(H,ae){return Se.current.useLayoutEffect(H,ae)},ln.useMemo=function(H,ae){return Se.current.useMemo(H,ae)},ln.useReducer=function(H,ae,Re){return Se.current.useReducer(H,ae,Re)},ln.useRef=function(H){return Se.current.useRef(H)},ln.useState=function(H){return Se.current.useState(H)},ln.useSyncExternalStore=function(H,ae,Re){return Se.current.useSyncExternalStore(H,ae,Re)},ln.useTransition=function(){return Se.current.useTransition()},ln.version="18.3.1",ln}var mx;function lg(){return mx||(mx=1,bv.exports=fS()),bv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function mS(){if(px)return Sd;px=1;var r=lg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,m){var p,g={},x=null,_=null;m!==void 0&&(x=""+m),f.key!==void 0&&(x=""+f.key),f.ref!==void 0&&(_=f.ref);for(p in f)n.call(f,p)&&!s.hasOwnProperty(p)&&(g[p]=f[p]);if(c&&c.defaultProps)for(p in f=c.defaultProps,f)g[p]===void 0&&(g[p]=f[p]);return{$$typeof:e,type:c,key:x,ref:_,props:g,_owner:i.current}}return Sd.Fragment=t,Sd.jsx=l,Sd.jsxs=l,Sd}var gx;function pS(){return gx||(gx=1,_v.exports=mS()),_v.exports}var te=pS(),Ae=lg();const gS=qy(Ae);var ym={},wv={exports:{}},Ra={},Sv={exports:{}},Mv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx;function vS(){return vx||(vx=1,(function(r){function e(B,Q){var K=B.length;B.push(Q);e:for(;0<K;){var H=K-1>>>1,ae=B[H];if(0<i(ae,Q))B[H]=Q,B[K]=ae,K=H;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var Q=B[0],K=B.pop();if(K!==Q){B[0]=K;e:for(var H=0,ae=B.length,Re=ae>>>1;H<Re;){var Ye=2*(H+1)-1,rt=B[Ye],ce=Ye+1,we=B[ce];if(0>i(rt,K))ce<ae&&0>i(we,rt)?(B[H]=we,B[ce]=K,H=ce):(B[H]=rt,B[Ye]=K,H=Ye);else if(ce<ae&&0>i(we,K))B[H]=we,B[ce]=K,H=ce;else break e}}return Q}function i(B,Q){var K=B.sortIndex-Q.sortIndex;return K!==0?K:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var f=[],m=[],p=1,g=null,x=3,_=!1,S=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var Q=t(m);Q!==null;){if(Q.callback===null)n(m);else if(Q.startTime<=B)n(m),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(m)}}function L(B){if(T=!1,I(B),!S)if(t(f)!==null)S=!0,ve(F);else{var Q=t(m);Q!==null&&Se(L,Q.startTime-B)}}function F(B,Q){S=!1,T&&(T=!1,w(G),G=-1),_=!0;var K=x;try{for(I(Q),g=t(f);g!==null&&(!(g.expirationTime>Q)||B&&!V());){var H=g.callback;if(typeof H=="function"){g.callback=null,x=g.priorityLevel;var ae=H(g.expirationTime<=Q);Q=r.unstable_now(),typeof ae=="function"?g.callback=ae:g===t(f)&&n(f),I(Q)}else n(f);g=t(f)}if(g!==null)var Re=!0;else{var Ye=t(m);Ye!==null&&Se(L,Ye.startTime-Q),Re=!1}return Re}finally{g=null,x=K,_=!1}}var N=!1,z=null,G=-1,D=5,P=-1;function V(){return!(r.unstable_now()-P<D)}function ee(){if(z!==null){var B=r.unstable_now();P=B;var Q=!0;try{Q=z(!0,B)}finally{Q?ie():(N=!1,z=null)}}else N=!1}var ie;if(typeof C=="function")ie=function(){C(ee)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,me=pe.port2;pe.port1.onmessage=ee,ie=function(){me.postMessage(null)}}else ie=function(){M(ee,0)};function ve(B){z=B,N||(N=!0,ie())}function Se(B,Q){G=M(function(){B(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_continueExecution=function(){S||_||(S=!0,ve(F))},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(B){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var K=x;x=Q;try{return B()}finally{x=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=x;x=B;try{return Q()}finally{x=K}},r.unstable_scheduleCallback=function(B,Q,K){var H=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?H+K:H):K=H,B){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=K+ae,B={id:p++,callback:Q,priorityLevel:B,startTime:K,expirationTime:ae,sortIndex:-1},K>H?(B.sortIndex=K,e(m,B),t(f)===null&&B===t(m)&&(T?(w(G),G=-1):T=!0,Se(L,K-H))):(B.sortIndex=ae,e(f,B),S||_||(S=!0,ve(F))),B},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(B){var Q=x;return function(){var K=x;x=Q;try{return B.apply(this,arguments)}finally{x=K}}}})(Mv)),Mv}var yx;function yS(){return yx||(yx=1,Sv.exports=vS()),Sv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function xS(){if(xx)return Ra;xx=1;var r=lg(),e=yS();function t(a){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(a,o){l(a,o),l(a+"Capture",o)}function l(a,o){for(i[a]=o,a=0;a<o.length;a++)n.add(o[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function x(a){return f.call(g,a)?!0:f.call(p,a)?!1:m.test(a)?g[a]=!0:(p[a]=!0,!1)}function _(a,o,d,y){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function S(a,o,d,y){if(o===null||typeof o>"u"||_(a,o,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function T(a,o,d,y,k,A,U){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=y,this.attributeNamespace=k,this.mustUseProperty=d,this.propertyName=a,this.type=o,this.sanitizeURL=A,this.removeEmptyString=U}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){M[a]=new T(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var o=a[0];M[o]=new T(o,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){M[a]=new T(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){M[a]=new T(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){M[a]=new T(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){M[a]=new T(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){M[a]=new T(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){M[a]=new T(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){M[a]=new T(a,5,!1,a.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var o=a.replace(w,C);M[o]=new T(o,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var o=a.replace(w,C);M[o]=new T(o,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var o=a.replace(w,C);M[o]=new T(o,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){M[a]=new T(a,1,!1,a.toLowerCase(),null,!1,!1)}),M.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){M[a]=new T(a,1,!1,a.toLowerCase(),null,!0,!0)});function I(a,o,d,y){var k=M.hasOwnProperty(o)?M[o]:null;(k!==null?k.type!==0:y||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,d,k,y)&&(d=null),y||k===null?x(o)&&(d===null?a.removeAttribute(o):a.setAttribute(o,""+d)):k.mustUseProperty?a[k.propertyName]=d===null?k.type===3?!1:"":d:(o=k.attributeName,y=k.attributeNamespace,d===null?a.removeAttribute(o):(k=k.type,d=k===3||k===4&&d===!0?"":""+d,y?a.setAttributeNS(y,o,d):a.setAttribute(o,d))))}var L=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),N=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),V=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),B=Symbol.iterator;function Q(a){return a===null||typeof a!="object"?null:(a=B&&a[B]||a["@@iterator"],typeof a=="function"?a:null)}var K=Object.assign,H;function ae(a){if(H===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+a}var Re=!1;function Ye(a,o){if(!a||Re)return"";Re=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(be){var y=be}Reflect.construct(a,[],o)}else{try{o.call()}catch(be){y=be}a.call(o.prototype)}else{try{throw Error()}catch(be){y=be}a()}}catch(be){if(be&&y&&typeof be.stack=="string"){for(var k=be.stack.split(`
`),A=y.stack.split(`
`),U=k.length-1,Z=A.length-1;1<=U&&0<=Z&&k[U]!==A[Z];)Z--;for(;1<=U&&0<=Z;U--,Z--)if(k[U]!==A[Z]){if(U!==1||Z!==1)do if(U--,Z--,0>Z||k[U]!==A[Z]){var ne=`
`+k[U].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=U&&0<=Z);break}}}finally{Re=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?ae(a):""}function rt(a){switch(a.tag){case 5:return ae(a.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return a=Ye(a.type,!1),a;case 11:return a=Ye(a.type.render,!1),a;case 1:return a=Ye(a.type,!0),a;default:return""}}function ce(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case N:return"Portal";case D:return"Profiler";case G:return"StrictMode";case ie:return"Suspense";case pe:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case V:return(a.displayName||"Context")+".Consumer";case P:return(a._context.displayName||"Context")+".Provider";case ee:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case me:return o=a.displayName||null,o!==null?o:ce(a.type)||"Memo";case ve:o=a._payload,a=a._init;try{return ce(a(o))}catch{}}return null}function we(a){var o=a.type;switch(a.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=o.render,a=a.displayName||a.name||"",o.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(o);case 8:return o===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Be(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function it(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function st(a){var o=it(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),y=""+a[o];if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var k=d.get,A=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return k.call(this)},set:function(U){y=""+U,A.call(this,U)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(U){y=""+U},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Lt(a){a._valueTracker||(a._valueTracker=st(a))}function on(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var d=o.getValue(),y="";return a&&(y=it(a)?a.checked?"true":"false":a.value),a=y,a!==d?(o.setValue(a),!0):!1}function yt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Le(a,o){var d=o.checked;return K({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function X(a,o){var d=o.defaultValue==null?"":o.defaultValue,y=o.checked!=null?o.checked:o.defaultChecked;d=Be(o.value!=null?o.value:d),a._wrapperState={initialChecked:y,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ne(a,o){o=o.checked,o!=null&&I(a,"checked",o,!1)}function ze(a,o){Ne(a,o);var d=Be(o.value),y=o.type;if(d!=null)y==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}o.hasOwnProperty("value")?Ue(a,o.type,d):o.hasOwnProperty("defaultValue")&&Ue(a,o.type,Be(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(a.defaultChecked=!!o.defaultChecked)}function Ke(a,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var y=o.type;if(!(y!=="submit"&&y!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+a._wrapperState.initialValue,d||o===a.value||(a.value=o),a.defaultValue=o}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function Ue(a,o,d){(o!=="number"||yt(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var ot=Array.isArray;function $e(a,o,d,y){if(a=a.options,o){o={};for(var k=0;k<d.length;k++)o["$"+d[k]]=!0;for(d=0;d<a.length;d++)k=o.hasOwnProperty("$"+a[d].value),a[d].selected!==k&&(a[d].selected=k),k&&y&&(a[d].defaultSelected=!0)}else{for(d=""+Be(d),o=null,k=0;k<a.length;k++){if(a[k].value===d){a[k].selected=!0,y&&(a[k].defaultSelected=!0);return}o!==null||a[k].disabled||(o=a[k])}o!==null&&(o.selected=!0)}}function ut(a,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},o,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function W(a,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(t(92));if(ot(d)){if(1<d.length)throw Error(t(93));d=d[0]}o=d}o==null&&(o=""),d=o}a._wrapperState={initialValue:Be(d)}}function O(a,o){var d=Be(o.value),y=Be(o.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),o.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),y!=null&&(a.defaultValue=""+y)}function ue(a){var o=a.textContent;o===a._wrapperState.initialValue&&o!==""&&o!==null&&(a.value=o)}function Te(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pe(a,o){return a==null||a==="http://www.w3.org/1999/xhtml"?Te(o):a==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Me,Mt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,y,k){MSApp.execUnsafeLocalFunction(function(){return a(o,d,y,k)})}:a})(function(a,o){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=o;else{for(Me=Me||document.createElement("div"),Me.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Me.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;o.firstChild;)a.appendChild(o.firstChild)}});function et(a,o){if(o){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=o;return}}a.textContent=o}var kt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(kt).forEach(function(a){wt.forEach(function(o){o=o+a.charAt(0).toUpperCase()+a.substring(1),kt[o]=kt[a]})});function De(a,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||kt.hasOwnProperty(a)&&kt[a]?(""+o).trim():o+"px"}function Je(a,o){a=a.style;for(var d in o)if(o.hasOwnProperty(d)){var y=d.indexOf("--")===0,k=De(d,o[d],y);d==="float"&&(d="cssFloat"),y?a.setProperty(d,k):a[d]=k}}var Dt=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $(a,o){if(o){if(Dt[a]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ye(a,o){if(a.indexOf("-")===-1)return typeof o.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var je=null;function J(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ve=null,He=null,Ge=null;function We(a){if(a=Er(a)){if(typeof Ve!="function")throw Error(t(280));var o=a.stateNode;o&&(o=yu(o),Ve(a.stateNode,a.type,o))}}function Ie(a){He?Ge?Ge.push(a):Ge=[a]:He=a}function lt(){if(He){var a=He,o=Ge;if(Ge=He=null,We(a),o)for(a=0;a<o.length;a++)We(o[a])}}function Pt(a,o){return a(o)}function hn(){}var en=!1;function Xn(a,o,d){if(en)return a(o,d);en=!0;try{return Pt(a,o,d)}finally{en=!1,(He!==null||Ge!==null)&&(hn(),lt())}}function Un(a,o){var d=a.stateNode;if(d===null)return null;var y=yu(d);if(y===null)return null;d=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(t(231,o,typeof d));return d}var fl=!1;if(c)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){fl=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{fl=!1}function ml(a,o,d,y,k,A,U,Z,ne){var be=Array.prototype.slice.call(arguments,3);try{o.apply(d,be)}catch(Fe){this.onError(Fe)}}var Ii=!1,Qr=null,Fa=!1,mo=null,po={onError:function(a){Ii=!0,Qr=a}};function Lh(a,o,d,y,k,A,U,Z,ne){Ii=!1,Qr=null,ml.apply(po,arguments)}function go(a,o,d,y,k,A,U,Z,ne){if(Lh.apply(this,arguments),Ii){if(Ii){var be=Qr;Ii=!1,Qr=null}else throw Error(t(198));Fa||(Fa=!0,mo=be)}}function nr(a){var o=a,d=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(d=o.return),a=o.return;while(a)}return o.tag===3?d:null}function pl(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function Nh(a){if(nr(a)!==a)throw Error(t(188))}function Dh(a){var o=a.alternate;if(!o){if(o=nr(a),o===null)throw Error(t(188));return o!==a?null:a}for(var d=a,y=o;;){var k=d.return;if(k===null)break;var A=k.alternate;if(A===null){if(y=k.return,y!==null){d=y;continue}break}if(k.child===A.child){for(A=k.child;A;){if(A===d)return Nh(k),a;if(A===y)return Nh(k),o;A=A.sibling}throw Error(t(188))}if(d.return!==y.return)d=k,y=A;else{for(var U=!1,Z=k.child;Z;){if(Z===d){U=!0,d=k,y=A;break}if(Z===y){U=!0,y=k,d=A;break}Z=Z.sibling}if(!U){for(Z=A.child;Z;){if(Z===d){U=!0,d=A,y=k;break}if(Z===y){U=!0,y=A,d=k;break}Z=Z.sibling}if(!U)throw Error(t(189))}}if(d.alternate!==y)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?a:o}function Oh(a){return a=Dh(a),a!==null?Uh(a):null}function Uh(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var o=Uh(a);if(o!==null)return o;a=a.sibling}return null}var Fh=e.unstable_scheduleCallback,Bh=e.unstable_cancelCallback,j=e.unstable_shouldYield,le=e.unstable_requestPaint,de=e.unstable_now,_e=e.unstable_getCurrentPriorityLevel,he=e.unstable_ImmediatePriority,Ze=e.unstable_UserBlockingPriority,ht=e.unstable_NormalPriority,bt=e.unstable_LowPriority,mt=e.unstable_IdlePriority,At=null,tt=null;function at(a){if(tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(At,a,void 0,(a.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:xn,Ht=Math.log,rn=Math.LN2;function xn(a){return a>>>=0,a===0?32:31-(Ht(a)/rn|0)|0}var sn=64,gt=4194304;function dn(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function an(a,o){var d=a.pendingLanes;if(d===0)return 0;var y=0,k=a.suspendedLanes,A=a.pingedLanes,U=d&268435455;if(U!==0){var Z=U&~k;Z!==0?y=dn(Z):(A&=U,A!==0&&(y=dn(A)))}else U=d&~k,U!==0?y=dn(U):A!==0&&(y=dn(A));if(y===0)return 0;if(o!==0&&o!==y&&(o&k)===0&&(k=y&-y,A=o&-o,k>=A||k===16&&(A&4194240)!==0))return o;if((y&4)!==0&&(y|=d&16),o=a.entangledLanes,o!==0)for(a=a.entanglements,o&=y;0<o;)d=31-Nt(o),k=1<<d,y|=a[d],o&=~k;return y}function Si(a,o){switch(a){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ba(a,o){for(var d=a.suspendedLanes,y=a.pingedLanes,k=a.expirationTimes,A=a.pendingLanes;0<A;){var U=31-Nt(A),Z=1<<U,ne=k[U];ne===-1?((Z&d)===0||(Z&y)!==0)&&(k[U]=Si(Z,o)):ne<=o&&(a.expiredLanes|=Z),A&=~Z}}function ai(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function ri(){var a=sn;return sn<<=1,(sn&4194240)===0&&(sn=64),a}function Sn(a){for(var o=[],d=0;31>d;d++)o.push(a);return o}function Yn(a,o,d){a.pendingLanes|=o,o!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,o=31-Nt(o),a[o]=d}function Vi(a,o){var d=a.pendingLanes&~o;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=o,a.mutableReadLanes&=o,a.entangledLanes&=o,o=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<d;){var k=31-Nt(d),A=1<<k;o[k]=0,y[k]=-1,a[k]=-1,d&=~A}}function Fn(a,o){var d=a.entangledLanes|=o;for(a=a.entanglements;d;){var y=31-Nt(d),k=1<<y;k&o|a[y]&o&&(a[y]|=o),d&=~k}}var zt=0;function ir(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var ia,Cc,Tf,zh,jh,_s=!1,Vh=[],ar=null,tn=null,xr=null,bs=new Map,vo=new Map,$r=[],Wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $n(a,o){switch(a){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":bs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(o.pointerId)}}function ws(a,o,d,y,k,A){return a===null||a.nativeEvent!==A?(a={blockedOn:o,domEventName:d,eventSystemFlags:y,nativeEvent:A,targetContainers:[k]},o!==null&&(o=Er(o),o!==null&&Cc(o)),a):(a.eventSystemFlags|=y,o=a.targetContainers,k!==null&&o.indexOf(k)===-1&&o.push(k),a)}function Xg(a,o,d,y,k){switch(o){case"focusin":return ar=ws(ar,a,o,d,y,k),!0;case"dragenter":return tn=ws(tn,a,o,d,y,k),!0;case"mouseover":return xr=ws(xr,a,o,d,y,k),!0;case"pointerover":var A=k.pointerId;return bs.set(A,ws(bs.get(A)||null,a,o,d,y,k)),!0;case"gotpointercapture":return A=k.pointerId,vo.set(A,ws(vo.get(A)||null,a,o,d,y,k)),!0}return!1}function Hh(a){var o=ss(a.target);if(o!==null){var d=nr(o);if(d!==null){if(o=d.tag,o===13){if(o=pl(d),o!==null){a.blockedOn=o,jh(a.priority,function(){Tf(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Gh(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var d=ba(a.domEventName,a.eventSystemFlags,o[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);je=y,d.target.dispatchEvent(y),je=null}else return o=Er(d),o!==null&&Cc(o),a.blockedOn=d,!1;o.shift()}return!0}function gl(a,o,d){Gh(a)&&d.delete(o)}function rr(){_s=!1,ar!==null&&Gh(ar)&&(ar=null),tn!==null&&Gh(tn)&&(tn=null),xr!==null&&Gh(xr)&&(xr=null),bs.forEach(gl),vo.forEach(gl)}function vl(a,o){a.blockedOn===o&&(a.blockedOn=null,_s||(_s=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rr)))}function yl(a){function o(k){return vl(k,a)}if(0<Vh.length){vl(Vh[0],a);for(var d=1;d<Vh.length;d++){var y=Vh[d];y.blockedOn===a&&(y.blockedOn=null)}}for(ar!==null&&vl(ar,a),tn!==null&&vl(tn,a),xr!==null&&vl(xr,a),bs.forEach(o),vo.forEach(o),d=0;d<$r.length;d++)y=$r[d],y.blockedOn===a&&(y.blockedOn=null);for(;0<$r.length&&(d=$r[0],d.blockedOn===null);)Hh(d),d.blockedOn===null&&$r.shift()}var Ri=L.ReactCurrentBatchConfig,_a=!0;function Wh(a,o,d,y){var k=zt,A=Ri.transition;Ri.transition=null;try{zt=1,Xh(a,o,d,y)}finally{zt=k,Ri.transition=A}}function Ic(a,o,d,y){var k=zt,A=Ri.transition;Ri.transition=null;try{zt=4,Xh(a,o,d,y)}finally{zt=k,Ri.transition=A}}function Xh(a,o,d,y){if(_a){var k=ba(a,o,d,y);if(k===null)du(a,o,y,Yh,d),$n(a,y);else if(Xg(k,a,o,d,y))y.stopPropagation();else if($n(a,y),o&4&&-1<Wg.indexOf(a)){for(;k!==null;){var A=Er(k);if(A!==null&&ia(A),A=ba(a,o,d,y),A===null&&du(a,o,y,Yh,d),A===k)break;k=A}k!==null&&y.stopPropagation()}else du(a,o,y,null,d)}}var Yh=null;function ba(a,o,d,y){if(Yh=null,a=J(y),a=ss(a),a!==null)if(o=nr(a),o===null)a=null;else if(d=o.tag,d===13){if(a=pl(o),a!==null)return a;a=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null);return Yh=a,null}function Ef(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_e()){case he:return 1;case Ze:return 4;case ht:case bt:return 16;case mt:return 536870912;default:return 16}default:return 16}}var za=null,Rc=null,Hi=null;function xl(){if(Hi)return Hi;var a,o=Rc,d=o.length,y,k="value"in za?za.value:za.textContent,A=k.length;for(a=0;a<d&&o[a]===k[a];a++);var U=d-a;for(y=1;y<=U&&o[d-y]===k[A-y];y++);return Hi=k.slice(a,1<y?1-y:void 0)}function Ss(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function _r(){return!0}function qh(){return!1}function Pi(a){function o(d,y,k,A,U){this._reactName=d,this._targetInst=k,this.type=y,this.nativeEvent=A,this.target=U,this.currentTarget=null;for(var Z in a)a.hasOwnProperty(Z)&&(d=a[Z],this[Z]=d?d(A):A[Z]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?_r:qh,this.isPropagationStopped=qh,this}return K(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),o}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Pi(Ms),ks=K({},Ms,{view:0,detail:0}),yo=Pi(ks),Gi,wa,Sa,xo=K({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Sa&&(Sa&&a.type==="mousemove"?(Gi=a.screenX-Sa.screenX,wa=a.screenY-Sa.screenY):wa=Gi=0,Sa=a),Gi)},movementY:function(a){return"movementY"in a?a.movementY:wa}}),Pc=Pi(xo),br=K({},xo,{dataTransfer:0}),es=Pi(br),Kh=K({},ks,{relatedTarget:0}),Zh=Pi(Kh),Jh=K({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Af=Pi(Jh),Cf=K({},Ms,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Lc=Pi(Cf),Qh=K({},Ms,{data:0}),Nc=Pi(Qh),If={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _o(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Dc[a])?!!o[a]:!1}function ts(){return _o}var $h=K({},ks,{key:function(a){if(a.key){var o=If[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Ss(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Rf[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(a){return a.type==="keypress"?Ss(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ss(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),eu=Pi($h),Ma=K({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=Pi(Ma),Ts=K({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),wr=Pi(Ts),Sr=K({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Es=Pi(Sr),Pf=K({},xo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Oc=Pi(Pf),Uc=[9,13,27,32],Li=c&&"CompositionEvent"in window,fi=null;c&&"documentMode"in document&&(fi=document.documentMode);var Pn=c&&"TextEvent"in window&&!fi,bo=c&&(!Li||fi&&8<fi&&11>=fi),ka=" ",Fc=!1;function Bc(a,o){switch(a){case"keyup":return Uc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ns=!1;function Lf(a,o){switch(a){case"compositionend":return tu(o);case"keypress":return o.which!==32?null:(Fc=!0,ka);case"textInput":return a=o.data,a===ka&&Fc?null:a;default:return null}}function bl(a,o){if(ns)return a==="compositionend"||!Li&&Bc(a,o)?(a=xl(),Hi=Rc=za=null,ns=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return bo&&o.locale!=="ko"?null:o.data;default:return null}}var wo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nu(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!wo[a.type]:o==="textarea"}function So(a,o,d,y){Ie(y),o=fu(o,"onChange"),0<o.length&&(d=new _l("onChange","change",null,d,y),a.push({event:d,listeners:o}))}var is=null,Mo=null;function Nf(a){Ao(a,0)}function Mr(a){var o=Vn(a);if(on(o))return a}function Df(a,o){if(a==="change")return o}var ko=!1;if(c){var Wi;if(c){var As="oninput"in document;if(!As){var Cs=document.createElement("div");Cs.setAttribute("oninput","return;"),As=typeof Cs.oninput=="function"}Wi=As}else Wi=!1;ko=Wi&&(!document.documentMode||9<document.documentMode)}function ja(){is&&(is.detachEvent("onpropertychange",iu),Mo=is=null)}function iu(a){if(a.propertyName==="value"&&Mr(Mo)){var o=[];So(o,Mo,a,J(a)),Xn(Nf,o)}}function To(a,o,d){a==="focusin"?(ja(),is=o,Mo=d,is.attachEvent("onpropertychange",iu)):a==="focusout"&&ja()}function Of(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Mr(Mo)}function zc(a,o){if(a==="click")return Mr(o)}function Nn(a,o){if(a==="input"||a==="change")return Mr(o)}function au(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var ra=typeof Object.is=="function"?Object.is:au;function Is(a,o){if(ra(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var d=Object.keys(a),y=Object.keys(o);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var k=d[y];if(!f.call(o,k)||!ra(a[k],o[k]))return!1}return!0}function wl(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function sa(a,o){var d=wl(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a<=o&&y>=o)return{node:d,offset:o-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=wl(d)}}function Rs(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Rs(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Dn(){for(var a=window,o=yt();o instanceof a.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)a=o.contentWindow;else break;o=yt(a.document)}return o}function si(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}function oi(a){var o=Dn(),d=a.focusedElem,y=a.selectionRange;if(o!==d&&d&&d.ownerDocument&&Rs(d.ownerDocument.documentElement,d)){if(y!==null&&si(d)){if(o=y.start,a=y.end,a===void 0&&(a=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(a,d.value.length);else if(a=(o=d.ownerDocument||document)&&o.defaultView||window,a.getSelection){a=a.getSelection();var k=d.textContent.length,A=Math.min(y.start,k);y=y.end===void 0?A:Math.min(y.end,k),!a.extend&&A>y&&(k=y,y=A,A=k),k=sa(d,A);var U=sa(d,y);k&&U&&(a.rangeCount!==1||a.anchorNode!==k.node||a.anchorOffset!==k.offset||a.focusNode!==U.node||a.focusOffset!==U.offset)&&(o=o.createRange(),o.setStart(k.node,k.offset),a.removeAllRanges(),A>y?(a.addRange(o),a.extend(U.node,U.offset)):(o.setEnd(U.node,U.offset),a.addRange(o)))}}for(o=[],a=d;a=a.parentNode;)a.nodeType===1&&o.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)a=o[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var ru=c&&"documentMode"in document&&11>=document.documentMode,sr=null,Ps=null,Sl=null,li=!1;function su(a,o,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;li||sr==null||sr!==yt(y)||(y=sr,"selectionStart"in y&&si(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Sl&&Is(Sl,y)||(Sl=y,y=fu(Ps,"onSelect"),0<y.length&&(o=new _l("onSelect","select",null,o,d),a.push({event:o,listeners:y}),o.target=sr)))}function Eo(a,o){var d={};return d[a.toLowerCase()]=o.toLowerCase(),d["Webkit"+a]="webkit"+o,d["Moz"+a]="moz"+o,d}var as={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionend:Eo("Transition","TransitionEnd")},Va={},Ha={};c&&(Ha=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function or(a){if(Va[a])return Va[a];if(!as[a])return a;var o=as[a],d;for(d in o)if(o.hasOwnProperty(d)&&d in Ha)return Va[a]=o[d];return a}var Ml=or("animationend"),kl=or("animationiteration"),jc=or("animationstart"),Vc=or("transitionend"),Hc=new Map,Gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(a,o){Hc.set(a,o),s(o,[a])}for(var ou=0;ou<Gc.length;ou++){var Tl=Gc[ou],El=Tl.toLowerCase(),Uf=Tl[0].toUpperCase()+Tl.slice(1);kr(El,"on"+Uf)}kr(Ml,"onAnimationEnd"),kr(kl,"onAnimationIteration"),kr(jc,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Vc,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lu=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function hu(a,o,d){var y=a.type||"unknown-event";a.currentTarget=d,go(y,o,void 0,a),a.currentTarget=null}function Ao(a,o){o=(o&4)!==0;for(var d=0;d<a.length;d++){var y=a[d],k=y.event;y=y.listeners;e:{var A=void 0;if(o)for(var U=y.length-1;0<=U;U--){var Z=y[U],ne=Z.instance,be=Z.currentTarget;if(Z=Z.listener,ne!==A&&k.isPropagationStopped())break e;hu(k,Z,be),A=ne}else for(U=0;U<y.length;U++){if(Z=y[U],ne=Z.instance,be=Z.currentTarget,Z=Z.listener,ne!==A&&k.isPropagationStopped())break e;hu(k,Z,be),A=ne}}}if(Fa)throw a=mo,Fa=!1,mo=null,a}function Tn(a,o){var d=o[Ds];d===void 0&&(d=o[Ds]=new Set);var y=a+"__bubble";d.has(y)||(cu(o,a,2,!1),d.add(y))}function uu(a,o,d){var y=0;o&&(y|=4),cu(d,a,y,o)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Co(a){if(!a[Al]){a[Al]=!0,n.forEach(function(d){d!=="selectionchange"&&(lu.has(d)||uu(d,!1,a),uu(d,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Al]||(o[Al]=!0,uu("selectionchange",!1,o))}}function cu(a,o,d,y){switch(Ef(o)){case 1:var k=Wh;break;case 4:k=Ic;break;default:k=Xh}d=k.bind(null,o,d,a),k=void 0,!fl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(k=!0),y?k!==void 0?a.addEventListener(o,d,{capture:!0,passive:k}):a.addEventListener(o,d,!0):k!==void 0?a.addEventListener(o,d,{passive:k}):a.addEventListener(o,d,!1)}function du(a,o,d,y,k){var A=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var Z=y.stateNode.containerInfo;if(Z===k||Z.nodeType===8&&Z.parentNode===k)break;if(U===4)for(U=y.return;U!==null;){var ne=U.tag;if((ne===3||ne===4)&&(ne=U.stateNode.containerInfo,ne===k||ne.nodeType===8&&ne.parentNode===k))return;U=U.return}for(;Z!==null;){if(U=ss(Z),U===null)return;if(ne=U.tag,ne===5||ne===6){y=A=U;continue e}Z=Z.parentNode}}y=y.return}Xn(function(){var be=A,Fe=J(d),Xe=[];e:{var Oe=Hc.get(a);if(Oe!==void 0){var vt=_l,Tt=a;switch(a){case"keypress":if(Ss(d)===0)break e;case"keydown":case"keyup":vt=eu;break;case"focusin":Tt="focus",vt=Zh;break;case"focusout":Tt="blur",vt=Zh;break;case"beforeblur":case"afterblur":vt=Zh;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=Pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=es;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=wr;break;case Ml:case kl:case jc:vt=Af;break;case Vc:vt=Es;break;case"scroll":vt=yo;break;case"wheel":vt=Oc;break;case"copy":case"cut":case"paste":vt=Lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=aa}var Ct=(o&4)!==0,ti=!Ct&&a==="scroll",fe=Ct?Oe!==null?Oe+"Capture":null:Oe;Ct=[];for(var re=be,ge;re!==null;){ge=re;var Qe=ge.stateNode;if(ge.tag===5&&Qe!==null&&(ge=Qe,fe!==null&&(Qe=Un(re,fe),Qe!=null&&Ct.push(Io(re,Qe,ge)))),ti)break;re=re.return}0<Ct.length&&(Oe=new vt(Oe,Tt,null,d,Fe),Xe.push({event:Oe,listeners:Ct}))}}if((o&7)===0){e:{if(Oe=a==="mouseover"||a==="pointerover",vt=a==="mouseout"||a==="pointerout",Oe&&d!==je&&(Tt=d.relatedTarget||d.fromElement)&&(ss(Tt)||Tt[oa]))break e;if((vt||Oe)&&(Oe=Fe.window===Fe?Fe:(Oe=Fe.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,vt?(Tt=d.relatedTarget||d.toElement,vt=be,Tt=Tt?ss(Tt):null,Tt!==null&&(ti=nr(Tt),Tt!==ti||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(vt=null,Tt=be),vt!==Tt)){if(Ct=Pc,Qe="onMouseLeave",fe="onMouseEnter",re="mouse",(a==="pointerout"||a==="pointerover")&&(Ct=aa,Qe="onPointerLeave",fe="onPointerEnter",re="pointer"),ti=vt==null?Oe:Vn(vt),ge=Tt==null?Oe:Vn(Tt),Oe=new Ct(Qe,re+"leave",vt,d,Fe),Oe.target=ti,Oe.relatedTarget=ge,Qe=null,ss(Fe)===be&&(Ct=new Ct(fe,re+"enter",Tt,d,Fe),Ct.target=ge,Ct.relatedTarget=ti,Qe=Ct),ti=Qe,vt&&Tt)t:{for(Ct=vt,fe=Tt,re=0,ge=Ct;ge;ge=Ls(ge))re++;for(ge=0,Qe=fe;Qe;Qe=Ls(Qe))ge++;for(;0<re-ge;)Ct=Ls(Ct),re--;for(;0<ge-re;)fe=Ls(fe),ge--;for(;re--;){if(Ct===fe||fe!==null&&Ct===fe.alternate)break t;Ct=Ls(Ct),fe=Ls(fe)}Ct=null}else Ct=null;vt!==null&&Ff(Xe,Oe,vt,Ct,!1),Tt!==null&&ti!==null&&Ff(Xe,ti,Tt,Ct,!0)}}e:{if(Oe=be?Vn(be):window,vt=Oe.nodeName&&Oe.nodeName.toLowerCase(),vt==="select"||vt==="input"&&Oe.type==="file")var Rt=Df;else if(nu(Oe))if(ko)Rt=Nn;else{Rt=Of;var Ut=To}else(vt=Oe.nodeName)&&vt.toLowerCase()==="input"&&(Oe.type==="checkbox"||Oe.type==="radio")&&(Rt=zc);if(Rt&&(Rt=Rt(a,be))){So(Xe,Rt,d,Fe);break e}Ut&&Ut(a,Oe,be),a==="focusout"&&(Ut=Oe._wrapperState)&&Ut.controlled&&Oe.type==="number"&&Ue(Oe,"number",Oe.value)}switch(Ut=be?Vn(be):window,a){case"focusin":(nu(Ut)||Ut.contentEditable==="true")&&(sr=Ut,Ps=be,Sl=null);break;case"focusout":Sl=Ps=sr=null;break;case"mousedown":li=!0;break;case"contextmenu":case"mouseup":case"dragend":li=!1,su(Xe,d,Fe);break;case"selectionchange":if(ru)break;case"keydown":case"keyup":su(Xe,d,Fe)}var Ft;if(Li)e:{switch(a){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else ns?Bc(a,d)&&(Gt="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Gt="onCompositionStart");Gt&&(bo&&d.locale!=="ko"&&(ns||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&ns&&(Ft=xl()):(za=Fe,Rc="value"in za?za.value:za.textContent,ns=!0)),Ut=fu(be,Gt),0<Ut.length&&(Gt=new Nc(Gt,a,null,d,Fe),Xe.push({event:Gt,listeners:Ut}),Ft?Gt.data=Ft:(Ft=tu(d),Ft!==null&&(Gt.data=Ft)))),(Ft=Pn?Lf(a,d):bl(a,d))&&(be=fu(be,"onBeforeInput"),0<be.length&&(Fe=new Nc("onBeforeInput","beforeinput",null,d,Fe),Xe.push({event:Fe,listeners:be}),Fe.data=Ft))}Ao(Xe,o)})}function Io(a,o,d){return{instance:a,listener:o,currentTarget:d}}function fu(a,o){for(var d=o+"Capture",y=[];a!==null;){var k=a,A=k.stateNode;k.tag===5&&A!==null&&(k=A,A=Un(a,d),A!=null&&y.unshift(Io(a,A,k)),A=Un(a,o),A!=null&&y.push(Io(a,A,k))),a=a.return}return y}function Ls(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Ff(a,o,d,y,k){for(var A=o._reactName,U=[];d!==null&&d!==y;){var Z=d,ne=Z.alternate,be=Z.stateNode;if(ne!==null&&ne===y)break;Z.tag===5&&be!==null&&(Z=be,k?(ne=Un(d,A),ne!=null&&U.unshift(Io(d,ne,Z))):k||(ne=Un(d,A),ne!=null&&U.push(Io(d,ne,Z)))),d=d.return}U.length!==0&&a.push({event:o,listeners:U})}var Yg=/\r\n?/g,Bf=/\u0000|\uFFFD/g;function Wc(a){return(typeof a=="string"?a:""+a).replace(Yg,`
`).replace(Bf,"")}function Cl(a,o,d){if(o=Wc(o),Wc(a)!==o&&d)throw Error(t(425))}function Il(){}var Ro=null,Xc=null;function Yc(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var qc=typeof setTimeout=="function"?setTimeout:void 0,Kc=typeof clearTimeout=="function"?clearTimeout:void 0,mu=typeof Promise=="function"?Promise:void 0,qg=typeof queueMicrotask=="function"?queueMicrotask:typeof mu<"u"?function(a){return mu.resolve(null).then(a).catch(zf)}:qc;function zf(a){setTimeout(function(){throw a})}function pu(a,o){var d=o,y=0;do{var k=d.nextSibling;if(a.removeChild(d),k&&k.nodeType===8)if(d=k.data,d==="/$"){if(y===0){a.removeChild(k),yl(o);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=k}while(d);yl(o)}function Tr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return a}function Zc(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return a;o--}else d==="/$"&&o++}a=a.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),ei="__reactFiber$"+Ns,Po="__reactProps$"+Ns,oa="__reactContainer$"+Ns,Ds="__reactEvents$"+Ns,gu="__reactListeners$"+Ns,vu="__reactHandles$"+Ns;function ss(a){var o=a[ei];if(o)return o;for(var d=a.parentNode;d;){if(o=d[oa]||d[ei]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(a=Zc(a);a!==null;){if(d=a[ei])return d;a=Zc(a)}return o}a=d,d=a.parentNode}return null}function Er(a){return a=a[ei]||a[oa],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Vn(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function yu(a){return a[Po]||null}var Jc=[],hi=-1;function Bn(a){return{current:a}}function En(a){0>hi||(a.current=Jc[hi],Jc[hi]=null,hi--)}function Mn(a,o){hi++,Jc[hi]=a.current,a.current=o}var Ar={},mi=Bn(Ar),Ni=Bn(!1),Cr=Ar;function Os(a,o){var d=a.type.contextTypes;if(!d)return Ar;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===o)return y.__reactInternalMemoizedMaskedChildContext;var k={},A;for(A in d)k[A]=o[A];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=o,a.__reactInternalMemoizedMaskedChildContext=k),k}function Mi(a){return a=a.childContextTypes,a!=null}function Rl(){En(Ni),En(mi)}function Qc(a,o,d){if(mi.current!==Ar)throw Error(t(168));Mn(mi,o),Mn(Ni,d)}function Pl(a,o,d){var y=a.stateNode;if(o=o.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var k in y)if(!(k in o))throw Error(t(108,we(a)||"Unknown",k));return K({},d,y)}function Us(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ar,Cr=mi.current,Mn(mi,a),Mn(Ni,Ni.current),!0}function $c(a,o,d){var y=a.stateNode;if(!y)throw Error(t(169));d?(a=Pl(a,o,Cr),y.__reactInternalMemoizedMergedChildContext=a,En(Ni),En(mi),Mn(mi,a)):En(Ni),Mn(Ni,d)}var Ga=null,Ll=!1,xu=!1;function Nl(a){Ga===null?Ga=[a]:Ga.push(a)}function jf(a){Ll=!0,Nl(a)}function lr(){if(!xu&&Ga!==null){xu=!0;var a=0,o=zt;try{var d=Ga;for(zt=1;a<d.length;a++){var y=d[a];do y=y(!0);while(y!==null)}Ga=null,Ll=!1}catch(k){throw Ga!==null&&(Ga=Ga.slice(a+1)),Fh(he,lr),k}finally{zt=o,xu=!1}}return null}var Fs=[],Xi=0,_u=null,bu=0,Di=[],ui=0,Bs=null,nt=1,Ta="";function Ir(a,o){Fs[Xi++]=bu,Fs[Xi++]=_u,_u=a,bu=o}function ed(a,o,d){Di[ui++]=nt,Di[ui++]=Ta,Di[ui++]=Bs,Bs=a;var y=nt;a=Ta;var k=32-Nt(y)-1;y&=~(1<<k),d+=1;var A=32-Nt(o)+k;if(30<A){var U=k-k%5;A=(y&(1<<U)-1).toString(32),y>>=U,k-=U,nt=1<<32-Nt(o)+k|d<<k|y,Ta=A+a}else nt=1<<A|d<<k|y,Ta=a}function td(a){a.return!==null&&(Ir(a,1),ed(a,1,0))}function Rr(a){for(;a===_u;)_u=Fs[--Xi],Fs[Xi]=null,bu=Fs[--Xi],Fs[Xi]=null;for(;a===Bs;)Bs=Di[--ui],Di[ui]=null,Ta=Di[--ui],Di[ui]=null,nt=Di[--ui],Di[ui]=null}var pi=null,Oi=null,In=!1,Ea=null;function nd(a,o){var d=fr(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=a,o=a.deletions,o===null?(a.deletions=[d],a.flags|=16):o.push(d)}function id(a,o){switch(a.tag){case 5:var d=a.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(a.stateNode=o,pi=a,Oi=Tr(o.firstChild),!0):!1;case 6:return o=a.pendingProps===""||o.nodeType!==3?null:o,o!==null?(a.stateNode=o,pi=a,Oi=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=Bs!==null?{id:nt,overflow:Ta}:null,a.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=fr(18,null,null,0),d.stateNode=o,d.return=a,a.child=d,pi=a,Oi=null,!0):!1;default:return!1}}function wu(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Su(a){if(In){var o=Oi;if(o){var d=o;if(!id(a,o)){if(wu(a))throw Error(t(418));o=Tr(d.nextSibling);var y=pi;o&&id(a,o)?nd(y,d):(a.flags=a.flags&-4097|2,In=!1,pi=a)}}else{if(wu(a))throw Error(t(418));a.flags=a.flags&-4097|2,In=!1,pi=a}}}function Mu(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;pi=a}function Lo(a){if(a!==pi)return!1;if(!In)return Mu(a),In=!0,!1;var o;if((o=a.tag!==3)&&!(o=a.tag!==5)&&(o=a.type,o=o!=="head"&&o!=="body"&&!Yc(a.type,a.memoizedProps)),o&&(o=Oi)){if(wu(a))throw ad(),Error(t(418));for(;o;)nd(a,o),o=Tr(o.nextSibling)}if(Mu(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(o===0){Oi=Tr(a.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}a=a.nextSibling}Oi=null}}else Oi=pi?Tr(a.stateNode.nextSibling):null;return!0}function ad(){for(var a=Oi;a;)a=Tr(a.nextSibling)}function os(){Oi=pi=null,In=!1}function No(a){Ea===null?Ea=[a]:Ea.push(a)}var Kg=L.ReactCurrentBatchConfig;function Dl(a,o,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var y=d.stateNode}if(!y)throw Error(t(147,a));var k=y,A=""+a;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===A?o.ref:(o=function(U){var Z=k.refs;U===null?delete Z[A]:Z[A]=U},o._stringRef=A,o)}if(typeof a!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,a))}return a}function Ol(a,o){throw a=Object.prototype.toString.call(o),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a))}function rd(a){var o=a._init;return o(a._payload)}function sd(a){function o(fe,re){if(a){var ge=fe.deletions;ge===null?(fe.deletions=[re],fe.flags|=16):ge.push(re)}}function d(fe,re){if(!a)return null;for(;re!==null;)o(fe,re),re=re.sibling;return null}function y(fe,re){for(fe=new Map;re!==null;)re.key!==null?fe.set(re.key,re):fe.set(re.index,re),re=re.sibling;return fe}function k(fe,re){return fe=Wo(fe,re),fe.index=0,fe.sibling=null,fe}function A(fe,re,ge){return fe.index=ge,a?(ge=fe.alternate,ge!==null?(ge=ge.index,ge<re?(fe.flags|=2,re):ge):(fe.flags|=2,re)):(fe.flags|=1048576,re)}function U(fe){return a&&fe.alternate===null&&(fe.flags|=2),fe}function Z(fe,re,ge,Qe){return re===null||re.tag!==6?(re=mv(ge,fe.mode,Qe),re.return=fe,re):(re=k(re,ge),re.return=fe,re)}function ne(fe,re,ge,Qe){var Rt=ge.type;return Rt===z?Fe(fe,re,ge.props.children,Qe,ge.key):re!==null&&(re.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===ve&&rd(Rt)===re.type)?(Qe=k(re,ge.props),Qe.ref=Dl(fe,re,ge),Qe.return=fe,Qe):(Qe=um(ge.type,ge.key,ge.props,null,fe.mode,Qe),Qe.ref=Dl(fe,re,ge),Qe.return=fe,Qe)}function be(fe,re,ge,Qe){return re===null||re.tag!==4||re.stateNode.containerInfo!==ge.containerInfo||re.stateNode.implementation!==ge.implementation?(re=pv(ge,fe.mode,Qe),re.return=fe,re):(re=k(re,ge.children||[]),re.return=fe,re)}function Fe(fe,re,ge,Qe,Rt){return re===null||re.tag!==7?(re=$l(ge,fe.mode,Qe,Rt),re.return=fe,re):(re=k(re,ge),re.return=fe,re)}function Xe(fe,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number")return re=mv(""+re,fe.mode,ge),re.return=fe,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case F:return ge=um(re.type,re.key,re.props,null,fe.mode,ge),ge.ref=Dl(fe,null,re),ge.return=fe,ge;case N:return re=pv(re,fe.mode,ge),re.return=fe,re;case ve:var Qe=re._init;return Xe(fe,Qe(re._payload),ge)}if(ot(re)||Q(re))return re=$l(re,fe.mode,ge,null),re.return=fe,re;Ol(fe,re)}return null}function Oe(fe,re,ge,Qe){var Rt=re!==null?re.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Rt!==null?null:Z(fe,re,""+ge,Qe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case F:return ge.key===Rt?ne(fe,re,ge,Qe):null;case N:return ge.key===Rt?be(fe,re,ge,Qe):null;case ve:return Rt=ge._init,Oe(fe,re,Rt(ge._payload),Qe)}if(ot(ge)||Q(ge))return Rt!==null?null:Fe(fe,re,ge,Qe,null);Ol(fe,ge)}return null}function vt(fe,re,ge,Qe,Rt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return fe=fe.get(ge)||null,Z(re,fe,""+Qe,Rt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case F:return fe=fe.get(Qe.key===null?ge:Qe.key)||null,ne(re,fe,Qe,Rt);case N:return fe=fe.get(Qe.key===null?ge:Qe.key)||null,be(re,fe,Qe,Rt);case ve:var Ut=Qe._init;return vt(fe,re,ge,Ut(Qe._payload),Rt)}if(ot(Qe)||Q(Qe))return fe=fe.get(ge)||null,Fe(re,fe,Qe,Rt,null);Ol(re,Qe)}return null}function Tt(fe,re,ge,Qe){for(var Rt=null,Ut=null,Ft=re,Gt=re=0,Ai=null;Ft!==null&&Gt<ge.length;Gt++){Ft.index>Gt?(Ai=Ft,Ft=null):Ai=Ft.sibling;var _n=Oe(fe,Ft,ge[Gt],Qe);if(_n===null){Ft===null&&(Ft=Ai);break}a&&Ft&&_n.alternate===null&&o(fe,Ft),re=A(_n,re,Gt),Ut===null?Rt=_n:Ut.sibling=_n,Ut=_n,Ft=Ai}if(Gt===ge.length)return d(fe,Ft),In&&Ir(fe,Gt),Rt;if(Ft===null){for(;Gt<ge.length;Gt++)Ft=Xe(fe,ge[Gt],Qe),Ft!==null&&(re=A(Ft,re,Gt),Ut===null?Rt=Ft:Ut.sibling=Ft,Ut=Ft);return In&&Ir(fe,Gt),Rt}for(Ft=y(fe,Ft);Gt<ge.length;Gt++)Ai=vt(Ft,fe,Gt,ge[Gt],Qe),Ai!==null&&(a&&Ai.alternate!==null&&Ft.delete(Ai.key===null?Gt:Ai.key),re=A(Ai,re,Gt),Ut===null?Rt=Ai:Ut.sibling=Ai,Ut=Ai);return a&&Ft.forEach(function(Xo){return o(fe,Xo)}),In&&Ir(fe,Gt),Rt}function Ct(fe,re,ge,Qe){var Rt=Q(ge);if(typeof Rt!="function")throw Error(t(150));if(ge=Rt.call(ge),ge==null)throw Error(t(151));for(var Ut=Rt=null,Ft=re,Gt=re=0,Ai=null,_n=ge.next();Ft!==null&&!_n.done;Gt++,_n=ge.next()){Ft.index>Gt?(Ai=Ft,Ft=null):Ai=Ft.sibling;var Xo=Oe(fe,Ft,_n.value,Qe);if(Xo===null){Ft===null&&(Ft=Ai);break}a&&Ft&&Xo.alternate===null&&o(fe,Ft),re=A(Xo,re,Gt),Ut===null?Rt=Xo:Ut.sibling=Xo,Ut=Xo,Ft=Ai}if(_n.done)return d(fe,Ft),In&&Ir(fe,Gt),Rt;if(Ft===null){for(;!_n.done;Gt++,_n=ge.next())_n=Xe(fe,_n.value,Qe),_n!==null&&(re=A(_n,re,Gt),Ut===null?Rt=_n:Ut.sibling=_n,Ut=_n);return In&&Ir(fe,Gt),Rt}for(Ft=y(fe,Ft);!_n.done;Gt++,_n=ge.next())_n=vt(Ft,fe,Gt,_n.value,Qe),_n!==null&&(a&&_n.alternate!==null&&Ft.delete(_n.key===null?Gt:_n.key),re=A(_n,re,Gt),Ut===null?Rt=_n:Ut.sibling=_n,Ut=_n);return a&&Ft.forEach(function(dS){return o(fe,dS)}),In&&Ir(fe,Gt),Rt}function ti(fe,re,ge,Qe){if(typeof ge=="object"&&ge!==null&&ge.type===z&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case F:e:{for(var Rt=ge.key,Ut=re;Ut!==null;){if(Ut.key===Rt){if(Rt=ge.type,Rt===z){if(Ut.tag===7){d(fe,Ut.sibling),re=k(Ut,ge.props.children),re.return=fe,fe=re;break e}}else if(Ut.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===ve&&rd(Rt)===Ut.type){d(fe,Ut.sibling),re=k(Ut,ge.props),re.ref=Dl(fe,Ut,ge),re.return=fe,fe=re;break e}d(fe,Ut);break}else o(fe,Ut);Ut=Ut.sibling}ge.type===z?(re=$l(ge.props.children,fe.mode,Qe,ge.key),re.return=fe,fe=re):(Qe=um(ge.type,ge.key,ge.props,null,fe.mode,Qe),Qe.ref=Dl(fe,re,ge),Qe.return=fe,fe=Qe)}return U(fe);case N:e:{for(Ut=ge.key;re!==null;){if(re.key===Ut)if(re.tag===4&&re.stateNode.containerInfo===ge.containerInfo&&re.stateNode.implementation===ge.implementation){d(fe,re.sibling),re=k(re,ge.children||[]),re.return=fe,fe=re;break e}else{d(fe,re);break}else o(fe,re);re=re.sibling}re=pv(ge,fe.mode,Qe),re.return=fe,fe=re}return U(fe);case ve:return Ut=ge._init,ti(fe,re,Ut(ge._payload),Qe)}if(ot(ge))return Tt(fe,re,ge,Qe);if(Q(ge))return Ct(fe,re,ge,Qe);Ol(fe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,re!==null&&re.tag===6?(d(fe,re.sibling),re=k(re,ge),re.return=fe,fe=re):(d(fe,re),re=mv(ge,fe.mode,Qe),re.return=fe,fe=re),U(fe)):d(fe,re)}return ti}var zs=sd(!0),Ul=sd(!1),js=Bn(null),Vs=null,Pr=null,Do=null;function Hs(){Do=Pr=Vs=null}function Fl(a){var o=js.current;En(js),a._currentValue=o}function Bl(a,o,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),a===d)break;a=a.return}}function ls(a,o){Vs=a,Do=Pr=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&o)!==0&&(Qt=!0),a.firstContext=null)}function la(a){var o=a._currentValue;if(Do!==a)if(a={context:a,memoizedValue:o,next:null},Pr===null){if(Vs===null)throw Error(t(308));Pr=a,Vs.dependencies={lanes:0,firstContext:a}}else Pr=Pr.next=a;return o}var Lr=null;function od(a){Lr===null?Lr=[a]:Lr.push(a)}function zl(a,o,d,y){var k=o.interleaved;return k===null?(d.next=d,od(o)):(d.next=k.next,k.next=d),o.interleaved=d,Wa(a,y)}function Wa(a,o){a.lanes|=o;var d=a.alternate;for(d!==null&&(d.lanes|=o),d=a,a=a.return;a!==null;)a.childLanes|=o,d=a.alternate,d!==null&&(d.childLanes|=o),d=a,a=a.return;return d.tag===3?d.stateNode:null}var bn=!1;function Kt(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hn(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function wn(a,o){return{eventTime:a,lane:o,tag:0,payload:null,callback:null,next:null}}function Ln(a,o,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(pn&2)!==0){var k=y.pending;return k===null?o.next=o:(o.next=k.next,k.next=o),y.pending=o,Wa(a,d)}return k=y.interleaved,k===null?(o.next=o,od(y)):(o.next=k.next,k.next=o),y.interleaved=o,Wa(a,d)}function ki(a,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var y=o.lanes;y&=a.pendingLanes,d|=y,o.lanes=d,Fn(a,d)}}function Gs(a,o){var d=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var k=null,A=null;if(d=d.firstBaseUpdate,d!==null){do{var U={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};A===null?k=A=U:A=A.next=U,d=d.next}while(d!==null);A===null?k=A=o:A=A.next=o}else k=A=o;d={baseState:y.baseState,firstBaseUpdate:k,lastBaseUpdate:A,shared:y.shared,effects:y.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=o:a.next=o,d.lastBaseUpdate=o}function zn(a,o,d,y){var k=a.updateQueue;bn=!1;var A=k.firstBaseUpdate,U=k.lastBaseUpdate,Z=k.shared.pending;if(Z!==null){k.shared.pending=null;var ne=Z,be=ne.next;ne.next=null,U===null?A=be:U.next=be,U=ne;var Fe=a.alternate;Fe!==null&&(Fe=Fe.updateQueue,Z=Fe.lastBaseUpdate,Z!==U&&(Z===null?Fe.firstBaseUpdate=be:Z.next=be,Fe.lastBaseUpdate=ne))}if(A!==null){var Xe=k.baseState;U=0,Fe=be=ne=null,Z=A;do{var Oe=Z.lane,vt=Z.eventTime;if((y&Oe)===Oe){Fe!==null&&(Fe=Fe.next={eventTime:vt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var Tt=a,Ct=Z;switch(Oe=o,vt=d,Ct.tag){case 1:if(Tt=Ct.payload,typeof Tt=="function"){Xe=Tt.call(vt,Xe,Oe);break e}Xe=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Ct.payload,Oe=typeof Tt=="function"?Tt.call(vt,Xe,Oe):Tt,Oe==null)break e;Xe=K({},Xe,Oe);break e;case 2:bn=!0}}Z.callback!==null&&Z.lane!==0&&(a.flags|=64,Oe=k.effects,Oe===null?k.effects=[Z]:Oe.push(Z))}else vt={eventTime:vt,lane:Oe,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Fe===null?(be=Fe=vt,ne=Xe):Fe=Fe.next=vt,U|=Oe;if(Z=Z.next,Z===null){if(Z=k.shared.pending,Z===null)break;Oe=Z,Z=Oe.next,Oe.next=null,k.lastBaseUpdate=Oe,k.shared.pending=null}}while(!0);if(Fe===null&&(ne=Xe),k.baseState=ne,k.firstBaseUpdate=be,k.lastBaseUpdate=Fe,o=k.shared.interleaved,o!==null){k=o;do U|=k.lane,k=k.next;while(k!==o)}else A===null&&(k.shared.lanes=0);Kl|=U,a.lanes=U,a.memoizedState=Xe}}function Oo(a,o,d){if(a=o.effects,o.effects=null,a!==null)for(o=0;o<a.length;o++){var y=a[o],k=y.callback;if(k!==null){if(y.callback=null,y=d,typeof k!="function")throw Error(t(191,k));k.call(y)}}}var hr={},ha=Bn(hr),Ws=Bn(hr),Nr=Bn(hr);function qn(a){if(a===hr)throw Error(t(174));return a}function jl(a,o){switch(Mn(Nr,o),Mn(Ws,a),Mn(ha,hr),a=o.nodeType,a){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Pe(null,"");break;default:a=a===8?o.parentNode:o,o=a.namespaceURI||null,a=a.tagName,o=Pe(o,a)}En(ha),Mn(ha,o)}function hs(){En(ha),En(Ws),En(Nr)}function Xs(a){qn(Nr.current);var o=qn(ha.current),d=Pe(o,a.type);o!==d&&(Mn(Ws,a),Mn(ha,d))}function Uo(a){Ws.current===a&&(En(ha),En(Ws))}var Rn=Bn(0);function Xa(a){for(var o=a;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Fo=[];function ur(){for(var a=0;a<Fo.length;a++)Fo[a]._workInProgressVersionPrimary=null;Fo.length=0}var Ys=L.ReactCurrentDispatcher,qs=L.ReactCurrentBatchConfig,Dr=0,An=null,jn=null,fn=null,Ya=!1,Ti=!1,us=0,Yi=0;function gi(){throw Error(t(321))}function Vl(a,o){if(o===null)return!1;for(var d=0;d<o.length&&d<a.length;d++)if(!ra(a[d],o[d]))return!1;return!0}function Hl(a,o,d,y,k,A){if(Dr=A,An=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ys.current=a===null||a.memoizedState===null?qf:Kf,a=d(y,k),Ti){A=0;do{if(Ti=!1,us=0,25<=A)throw Error(t(301));A+=1,fn=jn=null,o.updateQueue=null,Ys.current=Zf,a=d(y,k)}while(Ti)}if(Ys.current=Ru,o=jn!==null&&jn.next!==null,Dr=0,fn=jn=An=null,Ya=!1,o)throw Error(t(300));return a}function ld(){var a=us!==0;return us=0,a}function vi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?An.memoizedState=fn=a:fn=fn.next=a,fn}function ua(){if(jn===null){var a=An.alternate;a=a!==null?a.memoizedState:null}else a=jn.next;var o=fn===null?An.memoizedState:fn.next;if(o!==null)fn=o,jn=a;else{if(a===null)throw Error(t(310));jn=a,a={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},fn===null?An.memoizedState=fn=a:fn=fn.next=a}return fn}function Bo(a,o){return typeof o=="function"?o(a):o}function Gl(a){var o=ua(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var y=jn,k=y.baseQueue,A=d.pending;if(A!==null){if(k!==null){var U=k.next;k.next=A.next,A.next=U}y.baseQueue=k=A,d.pending=null}if(k!==null){A=k.next,y=y.baseState;var Z=U=null,ne=null,be=A;do{var Fe=be.lane;if((Dr&Fe)===Fe)ne!==null&&(ne=ne.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),y=be.hasEagerState?be.eagerState:a(y,be.action);else{var Xe={lane:Fe,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};ne===null?(Z=ne=Xe,U=y):ne=ne.next=Xe,An.lanes|=Fe,Kl|=Fe}be=be.next}while(be!==null&&be!==A);ne===null?U=y:ne.next=Z,ra(y,o.memoizedState)||(Qt=!0),o.memoizedState=y,o.baseState=U,o.baseQueue=ne,d.lastRenderedState=y}if(a=d.interleaved,a!==null){k=a;do A=k.lane,An.lanes|=A,Kl|=A,k=k.next;while(k!==a)}else k===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Or(a){var o=ua(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var y=d.dispatch,k=d.pending,A=o.memoizedState;if(k!==null){d.pending=null;var U=k=k.next;do A=a(A,U.action),U=U.next;while(U!==k);ra(A,o.memoizedState)||(Qt=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),d.lastRenderedState=A}return[A,y]}function hd(){}function ud(a,o){var d=An,y=ua(),k=o(),A=!ra(y.memoizedState,k);if(A&&(y.memoizedState=k,Qt=!0),y=y.queue,fd(Vf.bind(null,d,y,a),[a]),y.getSnapshot!==o||A||fn!==null&&fn.memoizedState.tag&1){if(d.flags|=2048,qa(9,Wl.bind(null,d,y,k,o),void 0,null),Ei===null)throw Error(t(349));(Dr&30)!==0||ku(d,o,k)}return k}function ku(a,o,d){a.flags|=16384,a={getSnapshot:o,value:d},o=An.updateQueue,o===null?(o={lastEffect:null,stores:null},An.updateQueue=o,o.stores=[a]):(d=o.stores,d===null?o.stores=[a]:d.push(a))}function Wl(a,o,d,y){o.value=d,o.getSnapshot=y,Hf(o)&&cd(a)}function Vf(a,o,d){return d(function(){Hf(o)&&cd(a)})}function Hf(a){var o=a.getSnapshot;a=a.value;try{var d=o();return!ra(a,d)}catch{return!0}}function cd(a){var o=Wa(a,1);o!==null&&jr(o,a,1,-1)}function dd(a){var o=vi();return typeof a=="function"&&(a=a()),o.memoizedState=o.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:a},o.queue=a,a=a.dispatch=Ks.bind(null,An,a),[o.memoizedState,a]}function qa(a,o,d,y){return a={tag:a,create:o,destroy:d,deps:y,next:null},o=An.updateQueue,o===null?(o={lastEffect:null,stores:null},An.updateQueue=o,o.lastEffect=a.next=a):(d=o.lastEffect,d===null?o.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,o.lastEffect=a)),a}function Gf(){return ua().memoizedState}function cr(a,o,d,y){var k=vi();An.flags|=a,k.memoizedState=qa(1|o,d,void 0,y===void 0?null:y)}function Xl(a,o,d,y){var k=ua();y=y===void 0?null:y;var A=void 0;if(jn!==null){var U=jn.memoizedState;if(A=U.destroy,y!==null&&Vl(y,U.deps)){k.memoizedState=qa(o,d,A,y);return}}An.flags|=a,k.memoizedState=qa(1|o,d,A,y)}function Ui(a,o){return cr(8390656,8,a,o)}function fd(a,o){return Xl(2048,8,a,o)}function md(a,o){return Xl(4,2,a,o)}function Wf(a,o){return Xl(4,4,a,o)}function Xf(a,o){if(typeof o=="function")return a=a(),o(a),function(){o(null)};if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function pd(a,o,d){return d=d!=null?d.concat([a]):null,Xl(4,4,Xf.bind(null,o,a),d)}function Tu(){}function Yf(a,o){var d=ua();o=o===void 0?null:o;var y=d.memoizedState;return y!==null&&o!==null&&Vl(o,y[1])?y[0]:(d.memoizedState=[a,o],a)}function ca(a,o){var d=ua();o=o===void 0?null:o;var y=d.memoizedState;return y!==null&&o!==null&&Vl(o,y[1])?y[0]:(a=a(),d.memoizedState=[a,o],a)}function Eu(a,o,d){return(Dr&21)===0?(a.baseState&&(a.baseState=!1,Qt=!0),a.memoizedState=d):(ra(d,o)||(d=ri(),An.lanes|=d,Kl|=d,a.baseState=!0),o)}function Zg(a,o){var d=zt;zt=d!==0&&4>d?d:4,a(!0);var y=qs.transition;qs.transition={};try{a(!1),o()}finally{zt=d,qs.transition=y}}function Ur(){return ua().memoizedState}function Au(a,o,d){var y=Ho(a);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},Yl(a))Cu(o,d);else if(d=zl(a,o,d,y),d!==null){var k=fa();jr(d,a,y,k),Iu(d,o,y)}}function Ks(a,o,d){var y=Ho(a),k={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(Yl(a))Cu(o,k);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var U=o.lastRenderedState,Z=A(U,d);if(k.hasEagerState=!0,k.eagerState=Z,ra(Z,U)){var ne=o.interleaved;ne===null?(k.next=k,od(o)):(k.next=ne.next,ne.next=k),o.interleaved=k;return}}catch{}finally{}d=zl(a,o,k,y),d!==null&&(k=fa(),jr(d,a,y,k),Iu(d,o,y))}}function Yl(a){var o=a.alternate;return a===An||o!==null&&o===An}function Cu(a,o){Ti=Ya=!0;var d=a.pending;d===null?o.next=o:(o.next=d.next,d.next=o),a.pending=o}function Iu(a,o,d){if((d&4194240)!==0){var y=o.lanes;y&=a.pendingLanes,d|=y,o.lanes=d,Fn(a,d)}}var Ru={readContext:la,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},qf={readContext:la,useCallback:function(a,o){return vi().memoizedState=[a,o===void 0?null:o],a},useContext:la,useEffect:Ui,useImperativeHandle:function(a,o,d){return d=d!=null?d.concat([a]):null,cr(4194308,4,Xf.bind(null,o,a),d)},useLayoutEffect:function(a,o){return cr(4194308,4,a,o)},useInsertionEffect:function(a,o){return cr(4,2,a,o)},useMemo:function(a,o){var d=vi();return o=o===void 0?null:o,a=a(),d.memoizedState=[a,o],a},useReducer:function(a,o,d){var y=vi();return o=d!==void 0?d(o):o,y.memoizedState=y.baseState=o,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:o},y.queue=a,a=a.dispatch=Au.bind(null,An,a),[y.memoizedState,a]},useRef:function(a){var o=vi();return a={current:a},o.memoizedState=a},useState:dd,useDebugValue:Tu,useDeferredValue:function(a){return vi().memoizedState=a},useTransition:function(){var a=dd(!1),o=a[0];return a=Zg.bind(null,a[1]),vi().memoizedState=a,[o,a]},useMutableSource:function(){},useSyncExternalStore:function(a,o,d){var y=An,k=vi();if(In){if(d===void 0)throw Error(t(407));d=d()}else{if(d=o(),Ei===null)throw Error(t(349));(Dr&30)!==0||ku(y,o,d)}k.memoizedState=d;var A={value:d,getSnapshot:o};return k.queue=A,Ui(Vf.bind(null,y,A,a),[a]),y.flags|=2048,qa(9,Wl.bind(null,y,A,d,o),void 0,null),d},useId:function(){var a=vi(),o=Ei.identifierPrefix;if(In){var d=Ta,y=nt;d=(y&~(1<<32-Nt(y)-1)).toString(32)+d,o=":"+o+"R"+d,d=us++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=Yi++,o=":"+o+"r"+d.toString(32)+":";return a.memoizedState=o},unstable_isNewReconciler:!1},Kf={readContext:la,useCallback:Yf,useContext:la,useEffect:fd,useImperativeHandle:pd,useInsertionEffect:md,useLayoutEffect:Wf,useMemo:ca,useReducer:Gl,useRef:Gf,useState:function(){return Gl(Bo)},useDebugValue:Tu,useDeferredValue:function(a){var o=ua();return Eu(o,jn.memoizedState,a)},useTransition:function(){var a=Gl(Bo)[0],o=ua().memoizedState;return[a,o]},useMutableSource:hd,useSyncExternalStore:ud,useId:Ur,unstable_isNewReconciler:!1},Zf={readContext:la,useCallback:Yf,useContext:la,useEffect:fd,useImperativeHandle:pd,useInsertionEffect:md,useLayoutEffect:Wf,useMemo:ca,useReducer:Or,useRef:Gf,useState:function(){return Or(Bo)},useDebugValue:Tu,useDeferredValue:function(a){var o=ua();return jn===null?o.memoizedState=a:Eu(o,jn.memoizedState,a)},useTransition:function(){var a=Or(Bo)[0],o=ua().memoizedState;return[a,o]},useMutableSource:hd,useSyncExternalStore:ud,useId:Ur,unstable_isNewReconciler:!1};function Aa(a,o){if(a&&a.defaultProps){o=K({},o),a=a.defaultProps;for(var d in a)o[d]===void 0&&(o[d]=a[d]);return o}return o}function ql(a,o,d,y){o=a.memoizedState,d=d(y,o),d=d==null?o:K({},o,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Pu={isMounted:function(a){return(a=a._reactInternals)?nr(a)===a:!1},enqueueSetState:function(a,o,d){a=a._reactInternals;var y=fa(),k=Ho(a),A=wn(y,k);A.payload=o,d!=null&&(A.callback=d),o=Ln(a,A,k),o!==null&&(jr(o,a,k,y),ki(o,a,k))},enqueueReplaceState:function(a,o,d){a=a._reactInternals;var y=fa(),k=Ho(a),A=wn(y,k);A.tag=1,A.payload=o,d!=null&&(A.callback=d),o=Ln(a,A,k),o!==null&&(jr(o,a,k,y),ki(o,a,k))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var d=fa(),y=Ho(a),k=wn(d,y);k.tag=2,o!=null&&(k.callback=o),o=Ln(a,k,y),o!==null&&(jr(o,a,y,d),ki(o,a,y))}};function Jf(a,o,d,y,k,A,U){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,A,U):o.prototype&&o.prototype.isPureReactComponent?!Is(d,y)||!Is(k,A):!0}function h(a,o,d){var y=!1,k=Ar,A=o.contextType;return typeof A=="object"&&A!==null?A=la(A):(k=Mi(o)?Cr:mi.current,y=o.contextTypes,A=(y=y!=null)?Os(a,k):Ar),o=new o(d,A),a.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Pu,a.stateNode=o,o._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=k,a.__reactInternalMemoizedMaskedChildContext=A),o}function u(a,o,d,y){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,y),o.state!==a&&Pu.enqueueReplaceState(o,o.state,null)}function v(a,o,d,y){var k=a.stateNode;k.props=d,k.state=a.memoizedState,k.refs={},Kt(a);var A=o.contextType;typeof A=="object"&&A!==null?k.context=la(A):(A=Mi(o)?Cr:mi.current,k.context=Os(a,A)),k.state=a.memoizedState,A=o.getDerivedStateFromProps,typeof A=="function"&&(ql(a,o,A,d),k.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(o=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),o!==k.state&&Pu.enqueueReplaceState(k,k.state,null),zn(a,d,k,y),k.state=a.memoizedState),typeof k.componentDidMount=="function"&&(a.flags|=4194308)}function b(a,o){try{var d="",y=o;do d+=rt(y),y=y.return;while(y);var k=d}catch(A){k=`
Error generating stack: `+A.message+`
`+A.stack}return{value:a,source:o,stack:k,digest:null}}function E(a,o,d){return{value:a,source:null,stack:d??null,digest:o??null}}function R(a,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var q=typeof WeakMap=="function"?WeakMap:Map;function se(a,o,d){d=wn(-1,d),d.tag=3,d.payload={element:null};var y=o.value;return d.callback=function(){am||(am=!0,sv=y),R(a,o)},d}function Ee(a,o,d){d=wn(-1,d),d.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var k=o.value;d.payload=function(){return y(k)},d.callback=function(){R(a,o)}}var A=a.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(d.callback=function(){R(a,o),typeof y!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var U=o.stack;this.componentDidCatch(o.value,{componentStack:U!==null?U:""})}),d}function qe(a,o,d){var y=a.pingCache;if(y===null){y=a.pingCache=new q;var k=new Set;y.set(o,k)}else k=y.get(o),k===void 0&&(k=new Set,y.set(o,k));k.has(d)||(k.add(d),a=tS.bind(null,a,o,d),o.then(a,a))}function _t(a){do{var o;if((o=a.tag===13)&&(o=a.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return a;a=a.return}while(a!==null);return null}function Xt(a,o,d,y,k){return(a.mode&1)===0?(a===o?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=wn(-1,1),o.tag=2,Ln(d,o,1))),d.lanes|=1),a):(a.flags|=65536,a.lanes=k,a)}var Ot=L.ReactCurrentOwner,Qt=!1;function pt(a,o,d,y){o.child=a===null?Ul(o,null,d,y):zs(o,a.child,d,y)}function yi(a,o,d,y,k){d=d.render;var A=o.ref;return ls(o,k),y=Hl(a,o,d,y,A,k),d=ld(),a!==null&&!Qt?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~k,Zs(a,o,k)):(In&&d&&td(o),o.flags|=1,pt(a,o,y,k),o.child)}function da(a,o,d,y,k){if(a===null){var A=d.type;return typeof A=="function"&&!fv(A)&&A.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=A,xe(a,o,A,y,k)):(a=um(d.type,null,y,o,o.mode,k),a.ref=o.ref,a.return=o,o.child=a)}if(A=a.child,(a.lanes&k)===0){var U=A.memoizedProps;if(d=d.compare,d=d!==null?d:Is,d(U,y)&&a.ref===o.ref)return Zs(a,o,k)}return o.flags|=1,a=Wo(A,y),a.ref=o.ref,a.return=o,o.child=a}function xe(a,o,d,y,k){if(a!==null){var A=a.memoizedProps;if(Is(A,y)&&a.ref===o.ref)if(Qt=!1,o.pendingProps=y=A,(a.lanes&k)!==0)(a.flags&131072)!==0&&(Qt=!0);else return o.lanes=a.lanes,Zs(a,o,k)}return ct(a,o,d,y,k)}function oe(a,o,d){var y=o.pendingProps,k=y.children,A=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn(Nu,Ka),Ka|=d;else{if((d&1073741824)===0)return a=A!==null?A.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:a,cachePool:null,transitions:null},o.updateQueue=null,Mn(Nu,Ka),Ka|=a,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=A!==null?A.baseLanes:d,Mn(Nu,Ka),Ka|=y}else A!==null?(y=A.baseLanes|d,o.memoizedState=null):y=d,Mn(Nu,Ka),Ka|=y;return pt(a,o,k,d),o.child}function ke(a,o){var d=o.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function ct(a,o,d,y,k){var A=Mi(d)?Cr:mi.current;return A=Os(o,A),ls(o,k),d=Hl(a,o,d,y,A,k),y=ld(),a!==null&&!Qt?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~k,Zs(a,o,k)):(In&&y&&td(o),o.flags|=1,pt(a,o,d,k),o.child)}function It(a,o,d,y,k){if(Mi(d)){var A=!0;Us(o)}else A=!1;if(ls(o,k),o.stateNode===null)$f(a,o),h(o,d,y),v(o,d,y,k),y=!0;else if(a===null){var U=o.stateNode,Z=o.memoizedProps;U.props=Z;var ne=U.context,be=d.contextType;typeof be=="object"&&be!==null?be=la(be):(be=Mi(d)?Cr:mi.current,be=Os(o,be));var Fe=d.getDerivedStateFromProps,Xe=typeof Fe=="function"||typeof U.getSnapshotBeforeUpdate=="function";Xe||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Z!==y||ne!==be)&&u(o,U,y,be),bn=!1;var Oe=o.memoizedState;U.state=Oe,zn(o,y,U,k),ne=o.memoizedState,Z!==y||Oe!==ne||Ni.current||bn?(typeof Fe=="function"&&(ql(o,d,Fe,y),ne=o.memoizedState),(Z=bn||Jf(o,d,Z,y,Oe,ne,be))?(Xe||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(o.flags|=4194308)):(typeof U.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=ne),U.props=y,U.state=ne,U.context=be,y=Z):(typeof U.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{U=o.stateNode,Hn(a,o),Z=o.memoizedProps,be=o.type===o.elementType?Z:Aa(o.type,Z),U.props=be,Xe=o.pendingProps,Oe=U.context,ne=d.contextType,typeof ne=="object"&&ne!==null?ne=la(ne):(ne=Mi(d)?Cr:mi.current,ne=Os(o,ne));var vt=d.getDerivedStateFromProps;(Fe=typeof vt=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Z!==Xe||Oe!==ne)&&u(o,U,y,ne),bn=!1,Oe=o.memoizedState,U.state=Oe,zn(o,y,U,k);var Tt=o.memoizedState;Z!==Xe||Oe!==Tt||Ni.current||bn?(typeof vt=="function"&&(ql(o,d,vt,y),Tt=o.memoizedState),(be=bn||Jf(o,d,be,y,Oe,Tt,ne)||!1)?(Fe||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(y,Tt,ne),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(y,Tt,ne)),typeof U.componentDidUpdate=="function"&&(o.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof U.componentDidUpdate!="function"||Z===a.memoizedProps&&Oe===a.memoizedState||(o.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Z===a.memoizedProps&&Oe===a.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Tt),U.props=y,U.state=Tt,U.context=ne,y=be):(typeof U.componentDidUpdate!="function"||Z===a.memoizedProps&&Oe===a.memoizedState||(o.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Z===a.memoizedProps&&Oe===a.memoizedState||(o.flags|=1024),y=!1)}return qt(a,o,d,y,A,k)}function qt(a,o,d,y,k,A){ke(a,o);var U=(o.flags&128)!==0;if(!y&&!U)return k&&$c(o,d,!1),Zs(a,o,A);y=o.stateNode,Ot.current=o;var Z=U&&typeof d.getDerivedStateFromError!="function"?null:y.render();return o.flags|=1,a!==null&&U?(o.child=zs(o,a.child,null,A),o.child=zs(o,null,Z,A)):pt(a,o,Z,A),o.memoizedState=y.state,k&&$c(o,d,!0),o.child}function Yt(a){var o=a.stateNode;o.pendingContext?Qc(a,o.pendingContext,o.pendingContext!==o.context):o.context&&Qc(a,o.context,!1),jl(a,o.containerInfo)}function cn(a,o,d,y,k){return os(),No(k),o.flags|=256,pt(a,o,d,y),o.child}var Kn={dehydrated:null,treeContext:null,retryLane:0};function un(a){return{baseLanes:a,cachePool:null,transitions:null}}function Fr(a,o,d){var y=o.pendingProps,k=Rn.current,A=!1,U=(o.flags&128)!==0,Z;if((Z=U)||(Z=a!==null&&a.memoizedState===null?!1:(k&2)!==0),Z?(A=!0,o.flags&=-129):(a===null||a.memoizedState!==null)&&(k|=1),Mn(Rn,k&1),a===null)return Su(o),a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((o.mode&1)===0?o.lanes=1:a.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(U=y.children,a=y.fallback,A?(y=o.mode,A=o.child,U={mode:"hidden",children:U},(y&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=U):A=cm(U,y,0,null),a=$l(a,y,d,null),A.return=o,a.return=o,A.sibling=a,o.child=A,o.child.memoizedState=un(d),o.memoizedState=Kn,a):gd(o,U));if(k=a.memoizedState,k!==null&&(Z=k.dehydrated,Z!==null))return Hw(a,o,U,y,Z,k,d);if(A){A=y.fallback,U=o.mode,k=a.child,Z=k.sibling;var ne={mode:"hidden",children:y.children};return(U&1)===0&&o.child!==k?(y=o.child,y.childLanes=0,y.pendingProps=ne,o.deletions=null):(y=Wo(k,ne),y.subtreeFlags=k.subtreeFlags&14680064),Z!==null?A=Wo(Z,A):(A=$l(A,U,d,null),A.flags|=2),A.return=o,y.return=o,y.sibling=A,o.child=y,y=A,A=o.child,U=a.child.memoizedState,U=U===null?un(d):{baseLanes:U.baseLanes|d,cachePool:null,transitions:U.transitions},A.memoizedState=U,A.childLanes=a.childLanes&~d,o.memoizedState=Kn,y}return A=a.child,a=A.sibling,y=Wo(A,{mode:"visible",children:y.children}),(o.mode&1)===0&&(y.lanes=d),y.return=o,y.sibling=null,a!==null&&(d=o.deletions,d===null?(o.deletions=[a],o.flags|=16):d.push(a)),o.child=y,o.memoizedState=null,y}function gd(a,o){return o=cm({mode:"visible",children:o},a.mode,0,null),o.return=a,a.child=o}function Qf(a,o,d,y){return y!==null&&No(y),zs(o,a.child,null,d),a=gd(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Hw(a,o,d,y,k,A,U){if(d)return o.flags&256?(o.flags&=-257,y=E(Error(t(422))),Qf(a,o,U,y)):o.memoizedState!==null?(o.child=a.child,o.flags|=128,null):(A=y.fallback,k=o.mode,y=cm({mode:"visible",children:y.children},k,0,null),A=$l(A,k,U,null),A.flags|=2,y.return=o,A.return=o,y.sibling=A,o.child=y,(o.mode&1)!==0&&zs(o,a.child,null,U),o.child.memoizedState=un(U),o.memoizedState=Kn,A);if((o.mode&1)===0)return Qf(a,o,U,null);if(k.data==="$!"){if(y=k.nextSibling&&k.nextSibling.dataset,y)var Z=y.dgst;return y=Z,A=Error(t(419)),y=E(A,y,void 0),Qf(a,o,U,y)}if(Z=(U&a.childLanes)!==0,Qt||Z){if(y=Ei,y!==null){switch(U&-U){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(y.suspendedLanes|U))!==0?0:k,k!==0&&k!==A.retryLane&&(A.retryLane=k,Wa(a,k),jr(y,a,k,-1))}return dv(),y=E(Error(t(421))),Qf(a,o,U,y)}return k.data==="$?"?(o.flags|=128,o.child=a.child,o=nS.bind(null,a),k._reactRetry=o,null):(a=A.treeContext,Oi=Tr(k.nextSibling),pi=o,In=!0,Ea=null,a!==null&&(Di[ui++]=nt,Di[ui++]=Ta,Di[ui++]=Bs,nt=a.id,Ta=a.overflow,Bs=o),o=gd(o,y.children),o.flags|=4096,o)}function O0(a,o,d){a.lanes|=o;var y=a.alternate;y!==null&&(y.lanes|=o),Bl(a.return,o,d)}function Jg(a,o,d,y,k){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:k}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=d,A.tailMode=k)}function U0(a,o,d){var y=o.pendingProps,k=y.revealOrder,A=y.tail;if(pt(a,o,y.children,d),y=Rn.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&O0(a,d,o);else if(a.tag===19)O0(a,d,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(Mn(Rn,y),(o.mode&1)===0)o.memoizedState=null;else switch(k){case"forwards":for(d=o.child,k=null;d!==null;)a=d.alternate,a!==null&&Xa(a)===null&&(k=d),d=d.sibling;d=k,d===null?(k=o.child,o.child=null):(k=d.sibling,d.sibling=null),Jg(o,!1,k,d,A);break;case"backwards":for(d=null,k=o.child,o.child=null;k!==null;){if(a=k.alternate,a!==null&&Xa(a)===null){o.child=k;break}a=k.sibling,k.sibling=d,d=k,k=a}Jg(o,!0,d,null,A);break;case"together":Jg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function $f(a,o){(o.mode&1)===0&&a!==null&&(a.alternate=null,o.alternate=null,o.flags|=2)}function Zs(a,o,d){if(a!==null&&(o.dependencies=a.dependencies),Kl|=o.lanes,(d&o.childLanes)===0)return null;if(a!==null&&o.child!==a.child)throw Error(t(153));if(o.child!==null){for(a=o.child,d=Wo(a,a.pendingProps),o.child=d,d.return=o;a.sibling!==null;)a=a.sibling,d=d.sibling=Wo(a,a.pendingProps),d.return=o;d.sibling=null}return o.child}function Gw(a,o,d){switch(o.tag){case 3:Yt(o),os();break;case 5:Xs(o);break;case 1:Mi(o.type)&&Us(o);break;case 4:jl(o,o.stateNode.containerInfo);break;case 10:var y=o.type._context,k=o.memoizedProps.value;Mn(js,y._currentValue),y._currentValue=k;break;case 13:if(y=o.memoizedState,y!==null)return y.dehydrated!==null?(Mn(Rn,Rn.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?Fr(a,o,d):(Mn(Rn,Rn.current&1),a=Zs(a,o,d),a!==null?a.sibling:null);Mn(Rn,Rn.current&1);break;case 19:if(y=(d&o.childLanes)!==0,(a.flags&128)!==0){if(y)return U0(a,o,d);o.flags|=128}if(k=o.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Mn(Rn,Rn.current),y)break;return null;case 22:case 23:return o.lanes=0,oe(a,o,d)}return Zs(a,o,d)}var F0,Qg,B0,z0;F0=function(a,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Qg=function(){},B0=function(a,o,d,y){var k=a.memoizedProps;if(k!==y){a=o.stateNode,qn(ha.current);var A=null;switch(d){case"input":k=Le(a,k),y=Le(a,y),A=[];break;case"select":k=K({},k,{value:void 0}),y=K({},y,{value:void 0}),A=[];break;case"textarea":k=ut(a,k),y=ut(a,y),A=[];break;default:typeof k.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=Il)}$(d,y);var U;d=null;for(be in k)if(!y.hasOwnProperty(be)&&k.hasOwnProperty(be)&&k[be]!=null)if(be==="style"){var Z=k[be];for(U in Z)Z.hasOwnProperty(U)&&(d||(d={}),d[U]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(i.hasOwnProperty(be)?A||(A=[]):(A=A||[]).push(be,null));for(be in y){var ne=y[be];if(Z=k!=null?k[be]:void 0,y.hasOwnProperty(be)&&ne!==Z&&(ne!=null||Z!=null))if(be==="style")if(Z){for(U in Z)!Z.hasOwnProperty(U)||ne&&ne.hasOwnProperty(U)||(d||(d={}),d[U]="");for(U in ne)ne.hasOwnProperty(U)&&Z[U]!==ne[U]&&(d||(d={}),d[U]=ne[U])}else d||(A||(A=[]),A.push(be,d)),d=ne;else be==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,Z=Z?Z.__html:void 0,ne!=null&&Z!==ne&&(A=A||[]).push(be,ne)):be==="children"?typeof ne!="string"&&typeof ne!="number"||(A=A||[]).push(be,""+ne):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(i.hasOwnProperty(be)?(ne!=null&&be==="onScroll"&&Tn("scroll",a),A||Z===ne||(A=[])):(A=A||[]).push(be,ne))}d&&(A=A||[]).push("style",d);var be=A;(o.updateQueue=be)&&(o.flags|=4)}},z0=function(a,o,d,y){d!==y&&(o.flags|=4)};function vd(a,o){if(!In)switch(a.tailMode){case"hidden":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function qi(a){var o=a.alternate!==null&&a.alternate.child===a.child,d=0,y=0;if(o)for(var k=a.child;k!==null;)d|=k.lanes|k.childLanes,y|=k.subtreeFlags&14680064,y|=k.flags&14680064,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)d|=k.lanes|k.childLanes,y|=k.subtreeFlags,y|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=y,a.childLanes=d,o}function Ww(a,o,d){var y=o.pendingProps;switch(Rr(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(o),null;case 1:return Mi(o.type)&&Rl(),qi(o),null;case 3:return y=o.stateNode,hs(),En(Ni),En(mi),ur(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(Lo(o)?o.flags|=4:a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ea!==null&&(hv(Ea),Ea=null))),Qg(a,o),qi(o),null;case 5:Uo(o);var k=qn(Nr.current);if(d=o.type,a!==null&&o.stateNode!=null)B0(a,o,d,y,k),a.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!y){if(o.stateNode===null)throw Error(t(166));return qi(o),null}if(a=qn(ha.current),Lo(o)){y=o.stateNode,d=o.type;var A=o.memoizedProps;switch(y[ei]=o,y[Po]=A,a=(o.mode&1)!==0,d){case"dialog":Tn("cancel",y),Tn("close",y);break;case"iframe":case"object":case"embed":Tn("load",y);break;case"video":case"audio":for(k=0;k<rs.length;k++)Tn(rs[k],y);break;case"source":Tn("error",y);break;case"img":case"image":case"link":Tn("error",y),Tn("load",y);break;case"details":Tn("toggle",y);break;case"input":X(y,A),Tn("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!A.multiple},Tn("invalid",y);break;case"textarea":W(y,A),Tn("invalid",y)}$(d,A),k=null;for(var U in A)if(A.hasOwnProperty(U)){var Z=A[U];U==="children"?typeof Z=="string"?y.textContent!==Z&&(A.suppressHydrationWarning!==!0&&Cl(y.textContent,Z,a),k=["children",Z]):typeof Z=="number"&&y.textContent!==""+Z&&(A.suppressHydrationWarning!==!0&&Cl(y.textContent,Z,a),k=["children",""+Z]):i.hasOwnProperty(U)&&Z!=null&&U==="onScroll"&&Tn("scroll",y)}switch(d){case"input":Lt(y),Ke(y,A,!0);break;case"textarea":Lt(y),ue(y);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(y.onclick=Il)}y=k,o.updateQueue=y,y!==null&&(o.flags|=4)}else{U=k.nodeType===9?k:k.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Te(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=U.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=U.createElement(d,{is:y.is}):(a=U.createElement(d),d==="select"&&(U=a,y.multiple?U.multiple=!0:y.size&&(U.size=y.size))):a=U.createElementNS(a,d),a[ei]=o,a[Po]=y,F0(a,o,!1,!1),o.stateNode=a;e:{switch(U=ye(d,y),d){case"dialog":Tn("cancel",a),Tn("close",a),k=y;break;case"iframe":case"object":case"embed":Tn("load",a),k=y;break;case"video":case"audio":for(k=0;k<rs.length;k++)Tn(rs[k],a);k=y;break;case"source":Tn("error",a),k=y;break;case"img":case"image":case"link":Tn("error",a),Tn("load",a),k=y;break;case"details":Tn("toggle",a),k=y;break;case"input":X(a,y),k=Le(a,y),Tn("invalid",a);break;case"option":k=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},k=K({},y,{value:void 0}),Tn("invalid",a);break;case"textarea":W(a,y),k=ut(a,y),Tn("invalid",a);break;default:k=y}$(d,k),Z=k;for(A in Z)if(Z.hasOwnProperty(A)){var ne=Z[A];A==="style"?Je(a,ne):A==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&Mt(a,ne)):A==="children"?typeof ne=="string"?(d!=="textarea"||ne!=="")&&et(a,ne):typeof ne=="number"&&et(a,""+ne):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?ne!=null&&A==="onScroll"&&Tn("scroll",a):ne!=null&&I(a,A,ne,U))}switch(d){case"input":Lt(a),Ke(a,y,!1);break;case"textarea":Lt(a),ue(a);break;case"option":y.value!=null&&a.setAttribute("value",""+Be(y.value));break;case"select":a.multiple=!!y.multiple,A=y.value,A!=null?$e(a,!!y.multiple,A,!1):y.defaultValue!=null&&$e(a,!!y.multiple,y.defaultValue,!0);break;default:typeof k.onClick=="function"&&(a.onclick=Il)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return qi(o),null;case 6:if(a&&o.stateNode!=null)z0(a,o,a.memoizedProps,y);else{if(typeof y!="string"&&o.stateNode===null)throw Error(t(166));if(d=qn(Nr.current),qn(ha.current),Lo(o)){if(y=o.stateNode,d=o.memoizedProps,y[ei]=o,(A=y.nodeValue!==d)&&(a=pi,a!==null))switch(a.tag){case 3:Cl(y.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Cl(y.nodeValue,d,(a.mode&1)!==0)}A&&(o.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[ei]=o,o.stateNode=y}return qi(o),null;case 13:if(En(Rn),y=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(In&&Oi!==null&&(o.mode&1)!==0&&(o.flags&128)===0)ad(),os(),o.flags|=98560,A=!1;else if(A=Lo(o),y!==null&&y.dehydrated!==null){if(a===null){if(!A)throw Error(t(318));if(A=o.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(t(317));A[ei]=o}else os(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;qi(o),A=!1}else Ea!==null&&(hv(Ea),Ea=null),A=!0;if(!A)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(o.child.flags|=8192,(o.mode&1)!==0&&(a===null||(Rn.current&1)!==0?xi===0&&(xi=3):dv())),o.updateQueue!==null&&(o.flags|=4),qi(o),null);case 4:return hs(),Qg(a,o),a===null&&Co(o.stateNode.containerInfo),qi(o),null;case 10:return Fl(o.type._context),qi(o),null;case 17:return Mi(o.type)&&Rl(),qi(o),null;case 19:if(En(Rn),A=o.memoizedState,A===null)return qi(o),null;if(y=(o.flags&128)!==0,U=A.rendering,U===null)if(y)vd(A,!1);else{if(xi!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(U=Xa(a),U!==null){for(o.flags|=128,vd(A,!1),y=U.updateQueue,y!==null&&(o.updateQueue=y,o.flags|=4),o.subtreeFlags=0,y=d,d=o.child;d!==null;)A=d,a=y,A.flags&=14680066,U=A.alternate,U===null?(A.childLanes=0,A.lanes=a,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=U.childLanes,A.lanes=U.lanes,A.child=U.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=U.memoizedProps,A.memoizedState=U.memoizedState,A.updateQueue=U.updateQueue,A.type=U.type,a=U.dependencies,A.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return Mn(Rn,Rn.current&1|2),o.child}a=a.sibling}A.tail!==null&&de()>Du&&(o.flags|=128,y=!0,vd(A,!1),o.lanes=4194304)}else{if(!y)if(a=Xa(U),a!==null){if(o.flags|=128,y=!0,d=a.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),vd(A,!0),A.tail===null&&A.tailMode==="hidden"&&!U.alternate&&!In)return qi(o),null}else 2*de()-A.renderingStartTime>Du&&d!==1073741824&&(o.flags|=128,y=!0,vd(A,!1),o.lanes=4194304);A.isBackwards?(U.sibling=o.child,o.child=U):(d=A.last,d!==null?d.sibling=U:o.child=U,A.last=U)}return A.tail!==null?(o=A.tail,A.rendering=o,A.tail=o.sibling,A.renderingStartTime=de(),o.sibling=null,d=Rn.current,Mn(Rn,y?d&1|2:d&1),o):(qi(o),null);case 22:case 23:return cv(),y=o.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(o.flags|=8192),y&&(o.mode&1)!==0?(Ka&1073741824)!==0&&(qi(o),o.subtreeFlags&6&&(o.flags|=8192)):qi(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Xw(a,o){switch(Rr(o),o.tag){case 1:return Mi(o.type)&&Rl(),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return hs(),En(Ni),En(mi),ur(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 5:return Uo(o),null;case 13:if(En(Rn),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(t(340));os()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return En(Rn),null;case 4:return hs(),null;case 10:return Fl(o.type._context),null;case 22:case 23:return cv(),null;case 24:return null;default:return null}}var em=!1,Ki=!1,Yw=typeof WeakSet=="function"?WeakSet:Set,St=null;function Lu(a,o){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){Zn(a,o,y)}else d.current=null}function $g(a,o,d){try{d()}catch(y){Zn(a,o,y)}}var j0=!1;function qw(a,o){if(Ro=_a,a=Dn(),si(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var k=y.anchorOffset,A=y.focusNode;y=y.focusOffset;try{d.nodeType,A.nodeType}catch{d=null;break e}var U=0,Z=-1,ne=-1,be=0,Fe=0,Xe=a,Oe=null;t:for(;;){for(var vt;Xe!==d||k!==0&&Xe.nodeType!==3||(Z=U+k),Xe!==A||y!==0&&Xe.nodeType!==3||(ne=U+y),Xe.nodeType===3&&(U+=Xe.nodeValue.length),(vt=Xe.firstChild)!==null;)Oe=Xe,Xe=vt;for(;;){if(Xe===a)break t;if(Oe===d&&++be===k&&(Z=U),Oe===A&&++Fe===y&&(ne=U),(vt=Xe.nextSibling)!==null)break;Xe=Oe,Oe=Xe.parentNode}Xe=vt}d=Z===-1||ne===-1?null:{start:Z,end:ne}}else d=null}d=d||{start:0,end:0}}else d=null;for(Xc={focusedElem:a,selectionRange:d},_a=!1,St=o;St!==null;)if(o=St,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,St=a;else for(;St!==null;){o=St;try{var Tt=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var Ct=Tt.memoizedProps,ti=Tt.memoizedState,fe=o.stateNode,re=fe.getSnapshotBeforeUpdate(o.elementType===o.type?Ct:Aa(o.type,Ct),ti);fe.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var ge=o.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Qe){Zn(o,o.return,Qe)}if(a=o.sibling,a!==null){a.return=o.return,St=a;break}St=o.return}return Tt=j0,j0=!1,Tt}function yd(a,o,d){var y=o.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var k=y=y.next;do{if((k.tag&a)===a){var A=k.destroy;k.destroy=void 0,A!==void 0&&$g(o,d,A)}k=k.next}while(k!==y)}}function tm(a,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&a)===a){var y=d.create;d.destroy=y()}d=d.next}while(d!==o)}}function ev(a){var o=a.ref;if(o!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof o=="function"?o(a):o.current=a}}function V0(a){var o=a.alternate;o!==null&&(a.alternate=null,V0(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&(delete o[ei],delete o[Po],delete o[Ds],delete o[gu],delete o[vu])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function H0(a){return a.tag===5||a.tag===3||a.tag===4}function G0(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||H0(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function tv(a,o,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(a,o):d.insertBefore(a,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(a,d)):(o=d,o.appendChild(a)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Il));else if(y!==4&&(a=a.child,a!==null))for(tv(a,o,d),a=a.sibling;a!==null;)tv(a,o,d),a=a.sibling}function nv(a,o,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,o?d.insertBefore(a,o):d.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(nv(a,o,d),a=a.sibling;a!==null;)nv(a,o,d),a=a.sibling}var Fi=null,Br=!1;function zo(a,o,d){for(d=d.child;d!==null;)W0(a,o,d),d=d.sibling}function W0(a,o,d){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(At,d)}catch{}switch(d.tag){case 5:Ki||Lu(d,o);case 6:var y=Fi,k=Br;Fi=null,zo(a,o,d),Fi=y,Br=k,Fi!==null&&(Br?(a=Fi,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):Fi.removeChild(d.stateNode));break;case 18:Fi!==null&&(Br?(a=Fi,d=d.stateNode,a.nodeType===8?pu(a.parentNode,d):a.nodeType===1&&pu(a,d),yl(a)):pu(Fi,d.stateNode));break;case 4:y=Fi,k=Br,Fi=d.stateNode.containerInfo,Br=!0,zo(a,o,d),Fi=y,Br=k;break;case 0:case 11:case 14:case 15:if(!Ki&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){k=y=y.next;do{var A=k,U=A.destroy;A=A.tag,U!==void 0&&((A&2)!==0||(A&4)!==0)&&$g(d,o,U),k=k.next}while(k!==y)}zo(a,o,d);break;case 1:if(!Ki&&(Lu(d,o),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(Z){Zn(d,o,Z)}zo(a,o,d);break;case 21:zo(a,o,d);break;case 22:d.mode&1?(Ki=(y=Ki)||d.memoizedState!==null,zo(a,o,d),Ki=y):zo(a,o,d);break;default:zo(a,o,d)}}function X0(a){var o=a.updateQueue;if(o!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new Yw),o.forEach(function(y){var k=iS.bind(null,a,y);d.has(y)||(d.add(y),y.then(k,k))})}}function zr(a,o){var d=o.deletions;if(d!==null)for(var y=0;y<d.length;y++){var k=d[y];try{var A=a,U=o,Z=U;e:for(;Z!==null;){switch(Z.tag){case 5:Fi=Z.stateNode,Br=!1;break e;case 3:Fi=Z.stateNode.containerInfo,Br=!0;break e;case 4:Fi=Z.stateNode.containerInfo,Br=!0;break e}Z=Z.return}if(Fi===null)throw Error(t(160));W0(A,U,k),Fi=null,Br=!1;var ne=k.alternate;ne!==null&&(ne.return=null),k.return=null}catch(be){Zn(k,o,be)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Y0(o,a),o=o.sibling}function Y0(a,o){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(zr(o,a),cs(a),y&4){try{yd(3,a,a.return),tm(3,a)}catch(Ct){Zn(a,a.return,Ct)}try{yd(5,a,a.return)}catch(Ct){Zn(a,a.return,Ct)}}break;case 1:zr(o,a),cs(a),y&512&&d!==null&&Lu(d,d.return);break;case 5:if(zr(o,a),cs(a),y&512&&d!==null&&Lu(d,d.return),a.flags&32){var k=a.stateNode;try{et(k,"")}catch(Ct){Zn(a,a.return,Ct)}}if(y&4&&(k=a.stateNode,k!=null)){var A=a.memoizedProps,U=d!==null?d.memoizedProps:A,Z=a.type,ne=a.updateQueue;if(a.updateQueue=null,ne!==null)try{Z==="input"&&A.type==="radio"&&A.name!=null&&Ne(k,A),ye(Z,U);var be=ye(Z,A);for(U=0;U<ne.length;U+=2){var Fe=ne[U],Xe=ne[U+1];Fe==="style"?Je(k,Xe):Fe==="dangerouslySetInnerHTML"?Mt(k,Xe):Fe==="children"?et(k,Xe):I(k,Fe,Xe,be)}switch(Z){case"input":ze(k,A);break;case"textarea":O(k,A);break;case"select":var Oe=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!A.multiple;var vt=A.value;vt!=null?$e(k,!!A.multiple,vt,!1):Oe!==!!A.multiple&&(A.defaultValue!=null?$e(k,!!A.multiple,A.defaultValue,!0):$e(k,!!A.multiple,A.multiple?[]:"",!1))}k[Po]=A}catch(Ct){Zn(a,a.return,Ct)}}break;case 6:if(zr(o,a),cs(a),y&4){if(a.stateNode===null)throw Error(t(162));k=a.stateNode,A=a.memoizedProps;try{k.nodeValue=A}catch(Ct){Zn(a,a.return,Ct)}}break;case 3:if(zr(o,a),cs(a),y&4&&d!==null&&d.memoizedState.isDehydrated)try{yl(o.containerInfo)}catch(Ct){Zn(a,a.return,Ct)}break;case 4:zr(o,a),cs(a);break;case 13:zr(o,a),cs(a),k=a.child,k.flags&8192&&(A=k.memoizedState!==null,k.stateNode.isHidden=A,!A||k.alternate!==null&&k.alternate.memoizedState!==null||(rv=de())),y&4&&X0(a);break;case 22:if(Fe=d!==null&&d.memoizedState!==null,a.mode&1?(Ki=(be=Ki)||Fe,zr(o,a),Ki=be):zr(o,a),cs(a),y&8192){if(be=a.memoizedState!==null,(a.stateNode.isHidden=be)&&!Fe&&(a.mode&1)!==0)for(St=a,Fe=a.child;Fe!==null;){for(Xe=St=Fe;St!==null;){switch(Oe=St,vt=Oe.child,Oe.tag){case 0:case 11:case 14:case 15:yd(4,Oe,Oe.return);break;case 1:Lu(Oe,Oe.return);var Tt=Oe.stateNode;if(typeof Tt.componentWillUnmount=="function"){y=Oe,d=Oe.return;try{o=y,Tt.props=o.memoizedProps,Tt.state=o.memoizedState,Tt.componentWillUnmount()}catch(Ct){Zn(y,d,Ct)}}break;case 5:Lu(Oe,Oe.return);break;case 22:if(Oe.memoizedState!==null){Z0(Xe);continue}}vt!==null?(vt.return=Oe,St=vt):Z0(Xe)}Fe=Fe.sibling}e:for(Fe=null,Xe=a;;){if(Xe.tag===5){if(Fe===null){Fe=Xe;try{k=Xe.stateNode,be?(A=k.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(Z=Xe.stateNode,ne=Xe.memoizedProps.style,U=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,Z.style.display=De("display",U))}catch(Ct){Zn(a,a.return,Ct)}}}else if(Xe.tag===6){if(Fe===null)try{Xe.stateNode.nodeValue=be?"":Xe.memoizedProps}catch(Ct){Zn(a,a.return,Ct)}}else if((Xe.tag!==22&&Xe.tag!==23||Xe.memoizedState===null||Xe===a)&&Xe.child!==null){Xe.child.return=Xe,Xe=Xe.child;continue}if(Xe===a)break e;for(;Xe.sibling===null;){if(Xe.return===null||Xe.return===a)break e;Fe===Xe&&(Fe=null),Xe=Xe.return}Fe===Xe&&(Fe=null),Xe.sibling.return=Xe.return,Xe=Xe.sibling}}break;case 19:zr(o,a),cs(a),y&4&&X0(a);break;case 21:break;default:zr(o,a),cs(a)}}function cs(a){var o=a.flags;if(o&2){try{e:{for(var d=a.return;d!==null;){if(H0(d)){var y=d;break e}d=d.return}throw Error(t(160))}switch(y.tag){case 5:var k=y.stateNode;y.flags&32&&(et(k,""),y.flags&=-33);var A=G0(a);nv(a,A,k);break;case 3:case 4:var U=y.stateNode.containerInfo,Z=G0(a);tv(a,Z,U);break;default:throw Error(t(161))}}catch(ne){Zn(a,a.return,ne)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function Kw(a,o,d){St=a,q0(a)}function q0(a,o,d){for(var y=(a.mode&1)!==0;St!==null;){var k=St,A=k.child;if(k.tag===22&&y){var U=k.memoizedState!==null||em;if(!U){var Z=k.alternate,ne=Z!==null&&Z.memoizedState!==null||Ki;Z=em;var be=Ki;if(em=U,(Ki=ne)&&!be)for(St=k;St!==null;)U=St,ne=U.child,U.tag===22&&U.memoizedState!==null?J0(k):ne!==null?(ne.return=U,St=ne):J0(k);for(;A!==null;)St=A,q0(A),A=A.sibling;St=k,em=Z,Ki=be}K0(a)}else(k.subtreeFlags&8772)!==0&&A!==null?(A.return=k,St=A):K0(a)}}function K0(a){for(;St!==null;){var o=St;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ki||tm(5,o);break;case 1:var y=o.stateNode;if(o.flags&4&&!Ki)if(d===null)y.componentDidMount();else{var k=o.elementType===o.type?d.memoizedProps:Aa(o.type,d.memoizedProps);y.componentDidUpdate(k,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var A=o.updateQueue;A!==null&&Oo(o,A,y);break;case 3:var U=o.updateQueue;if(U!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}Oo(o,U,d)}break;case 5:var Z=o.stateNode;if(d===null&&o.flags&4){d=Z;var ne=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&d.focus();break;case"img":ne.src&&(d.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var be=o.alternate;if(be!==null){var Fe=be.memoizedState;if(Fe!==null){var Xe=Fe.dehydrated;Xe!==null&&yl(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ki||o.flags&512&&ev(o)}catch(Oe){Zn(o,o.return,Oe)}}if(o===a){St=null;break}if(d=o.sibling,d!==null){d.return=o.return,St=d;break}St=o.return}}function Z0(a){for(;St!==null;){var o=St;if(o===a){St=null;break}var d=o.sibling;if(d!==null){d.return=o.return,St=d;break}St=o.return}}function J0(a){for(;St!==null;){var o=St;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{tm(4,o)}catch(ne){Zn(o,d,ne)}break;case 1:var y=o.stateNode;if(typeof y.componentDidMount=="function"){var k=o.return;try{y.componentDidMount()}catch(ne){Zn(o,k,ne)}}var A=o.return;try{ev(o)}catch(ne){Zn(o,A,ne)}break;case 5:var U=o.return;try{ev(o)}catch(ne){Zn(o,U,ne)}}}catch(ne){Zn(o,o.return,ne)}if(o===a){St=null;break}var Z=o.sibling;if(Z!==null){Z.return=o.return,St=Z;break}St=o.return}}var Zw=Math.ceil,nm=L.ReactCurrentDispatcher,iv=L.ReactCurrentOwner,dr=L.ReactCurrentBatchConfig,pn=0,Ei=null,ci=null,Bi=0,Ka=0,Nu=Bn(0),xi=0,xd=null,Kl=0,im=0,av=0,_d=null,Ca=null,rv=0,Du=1/0,Js=null,am=!1,sv=null,jo=null,rm=!1,Vo=null,sm=0,bd=0,ov=null,om=-1,lm=0;function fa(){return(pn&6)!==0?de():om!==-1?om:om=de()}function Ho(a){return(a.mode&1)===0?1:(pn&2)!==0&&Bi!==0?Bi&-Bi:Kg.transition!==null?(lm===0&&(lm=ri()),lm):(a=zt,a!==0||(a=window.event,a=a===void 0?16:Ef(a.type)),a)}function jr(a,o,d,y){if(50<bd)throw bd=0,ov=null,Error(t(185));Yn(a,d,y),((pn&2)===0||a!==Ei)&&(a===Ei&&((pn&2)===0&&(im|=d),xi===4&&Go(a,Bi)),Ia(a,y),d===1&&pn===0&&(o.mode&1)===0&&(Du=de()+500,Ll&&lr()))}function Ia(a,o){var d=a.callbackNode;Ba(a,o);var y=an(a,a===Ei?Bi:0);if(y===0)d!==null&&Bh(d),a.callbackNode=null,a.callbackPriority=0;else if(o=y&-y,a.callbackPriority!==o){if(d!=null&&Bh(d),o===1)a.tag===0?jf($0.bind(null,a)):Nl($0.bind(null,a)),qg(function(){(pn&6)===0&&lr()}),d=null;else{switch(ir(y)){case 1:d=he;break;case 4:d=Ze;break;case 16:d=ht;break;case 536870912:d=mt;break;default:d=ht}d=ox(d,Q0.bind(null,a))}a.callbackPriority=o,a.callbackNode=d}}function Q0(a,o){if(om=-1,lm=0,(pn&6)!==0)throw Error(t(327));var d=a.callbackNode;if(Ou()&&a.callbackNode!==d)return null;var y=an(a,a===Ei?Bi:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||o)o=hm(a,y);else{o=y;var k=pn;pn|=2;var A=tx();(Ei!==a||Bi!==o)&&(Js=null,Du=de()+500,Jl(a,o));do try{$w();break}catch(Z){ex(a,Z)}while(!0);Hs(),nm.current=A,pn=k,ci!==null?o=0:(Ei=null,Bi=0,o=xi)}if(o!==0){if(o===2&&(k=ai(a),k!==0&&(y=k,o=lv(a,k))),o===1)throw d=xd,Jl(a,0),Go(a,y),Ia(a,de()),d;if(o===6)Go(a,y);else{if(k=a.current.alternate,(y&30)===0&&!Jw(k)&&(o=hm(a,y),o===2&&(A=ai(a),A!==0&&(y=A,o=lv(a,A))),o===1))throw d=xd,Jl(a,0),Go(a,y),Ia(a,de()),d;switch(a.finishedWork=k,a.finishedLanes=y,o){case 0:case 1:throw Error(t(345));case 2:Ql(a,Ca,Js);break;case 3:if(Go(a,y),(y&130023424)===y&&(o=rv+500-de(),10<o)){if(an(a,0)!==0)break;if(k=a.suspendedLanes,(k&y)!==y){fa(),a.pingedLanes|=a.suspendedLanes&k;break}a.timeoutHandle=qc(Ql.bind(null,a,Ca,Js),o);break}Ql(a,Ca,Js);break;case 4:if(Go(a,y),(y&4194240)===y)break;for(o=a.eventTimes,k=-1;0<y;){var U=31-Nt(y);A=1<<U,U=o[U],U>k&&(k=U),y&=~A}if(y=k,y=de()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*Zw(y/1960))-y,10<y){a.timeoutHandle=qc(Ql.bind(null,a,Ca,Js),y);break}Ql(a,Ca,Js);break;case 5:Ql(a,Ca,Js);break;default:throw Error(t(329))}}}return Ia(a,de()),a.callbackNode===d?Q0.bind(null,a):null}function lv(a,o){var d=_d;return a.current.memoizedState.isDehydrated&&(Jl(a,o).flags|=256),a=hm(a,o),a!==2&&(o=Ca,Ca=d,o!==null&&hv(o)),a}function hv(a){Ca===null?Ca=a:Ca.push.apply(Ca,a)}function Jw(a){for(var o=a;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var k=d[y],A=k.getSnapshot;k=k.value;try{if(!ra(A(),k))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Go(a,o){for(o&=~av,o&=~im,a.suspendedLanes|=o,a.pingedLanes&=~o,a=a.expirationTimes;0<o;){var d=31-Nt(o),y=1<<d;a[d]=-1,o&=~y}}function $0(a){if((pn&6)!==0)throw Error(t(327));Ou();var o=an(a,0);if((o&1)===0)return Ia(a,de()),null;var d=hm(a,o);if(a.tag!==0&&d===2){var y=ai(a);y!==0&&(o=y,d=lv(a,y))}if(d===1)throw d=xd,Jl(a,0),Go(a,o),Ia(a,de()),d;if(d===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=o,Ql(a,Ca,Js),Ia(a,de()),null}function uv(a,o){var d=pn;pn|=1;try{return a(o)}finally{pn=d,pn===0&&(Du=de()+500,Ll&&lr())}}function Zl(a){Vo!==null&&Vo.tag===0&&(pn&6)===0&&Ou();var o=pn;pn|=1;var d=dr.transition,y=zt;try{if(dr.transition=null,zt=1,a)return a()}finally{zt=y,dr.transition=d,pn=o,(pn&6)===0&&lr()}}function cv(){Ka=Nu.current,En(Nu)}function Jl(a,o){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,Kc(d)),ci!==null)for(d=ci.return;d!==null;){var y=d;switch(Rr(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Rl();break;case 3:hs(),En(Ni),En(mi),ur();break;case 5:Uo(y);break;case 4:hs();break;case 13:En(Rn);break;case 19:En(Rn);break;case 10:Fl(y.type._context);break;case 22:case 23:cv()}d=d.return}if(Ei=a,ci=a=Wo(a.current,null),Bi=Ka=o,xi=0,xd=null,av=im=Kl=0,Ca=_d=null,Lr!==null){for(o=0;o<Lr.length;o++)if(d=Lr[o],y=d.interleaved,y!==null){d.interleaved=null;var k=y.next,A=d.pending;if(A!==null){var U=A.next;A.next=k,y.next=U}d.pending=y}Lr=null}return a}function ex(a,o){do{var d=ci;try{if(Hs(),Ys.current=Ru,Ya){for(var y=An.memoizedState;y!==null;){var k=y.queue;k!==null&&(k.pending=null),y=y.next}Ya=!1}if(Dr=0,fn=jn=An=null,Ti=!1,us=0,iv.current=null,d===null||d.return===null){xi=1,xd=o,ci=null;break}e:{var A=a,U=d.return,Z=d,ne=o;if(o=Bi,Z.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var be=ne,Fe=Z,Xe=Fe.tag;if((Fe.mode&1)===0&&(Xe===0||Xe===11||Xe===15)){var Oe=Fe.alternate;Oe?(Fe.updateQueue=Oe.updateQueue,Fe.memoizedState=Oe.memoizedState,Fe.lanes=Oe.lanes):(Fe.updateQueue=null,Fe.memoizedState=null)}var vt=_t(U);if(vt!==null){vt.flags&=-257,Xt(vt,U,Z,A,o),vt.mode&1&&qe(A,be,o),o=vt,ne=be;var Tt=o.updateQueue;if(Tt===null){var Ct=new Set;Ct.add(ne),o.updateQueue=Ct}else Tt.add(ne);break e}else{if((o&1)===0){qe(A,be,o),dv();break e}ne=Error(t(426))}}else if(In&&Z.mode&1){var ti=_t(U);if(ti!==null){(ti.flags&65536)===0&&(ti.flags|=256),Xt(ti,U,Z,A,o),No(b(ne,Z));break e}}A=ne=b(ne,Z),xi!==4&&(xi=2),_d===null?_d=[A]:_d.push(A),A=U;do{switch(A.tag){case 3:A.flags|=65536,o&=-o,A.lanes|=o;var fe=se(A,ne,o);Gs(A,fe);break e;case 1:Z=ne;var re=A.type,ge=A.stateNode;if((A.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(jo===null||!jo.has(ge)))){A.flags|=65536,o&=-o,A.lanes|=o;var Qe=Ee(A,Z,o);Gs(A,Qe);break e}}A=A.return}while(A!==null)}ix(d)}catch(Rt){o=Rt,ci===d&&d!==null&&(ci=d=d.return);continue}break}while(!0)}function tx(){var a=nm.current;return nm.current=Ru,a===null?Ru:a}function dv(){(xi===0||xi===3||xi===2)&&(xi=4),Ei===null||(Kl&268435455)===0&&(im&268435455)===0||Go(Ei,Bi)}function hm(a,o){var d=pn;pn|=2;var y=tx();(Ei!==a||Bi!==o)&&(Js=null,Jl(a,o));do try{Qw();break}catch(k){ex(a,k)}while(!0);if(Hs(),pn=d,nm.current=y,ci!==null)throw Error(t(261));return Ei=null,Bi=0,xi}function Qw(){for(;ci!==null;)nx(ci)}function $w(){for(;ci!==null&&!j();)nx(ci)}function nx(a){var o=sx(a.alternate,a,Ka);a.memoizedProps=a.pendingProps,o===null?ix(a):ci=o,iv.current=null}function ix(a){var o=a;do{var d=o.alternate;if(a=o.return,(o.flags&32768)===0){if(d=Ww(d,o,Ka),d!==null){ci=d;return}}else{if(d=Xw(d,o),d!==null){d.flags&=32767,ci=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{xi=6,ci=null;return}}if(o=o.sibling,o!==null){ci=o;return}ci=o=a}while(o!==null);xi===0&&(xi=5)}function Ql(a,o,d){var y=zt,k=dr.transition;try{dr.transition=null,zt=1,eS(a,o,d,y)}finally{dr.transition=k,zt=y}return null}function eS(a,o,d,y){do Ou();while(Vo!==null);if((pn&6)!==0)throw Error(t(327));d=a.finishedWork;var k=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var A=d.lanes|d.childLanes;if(Vi(a,A),a===Ei&&(ci=Ei=null,Bi=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||rm||(rm=!0,ox(ht,function(){return Ou(),null})),A=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||A){A=dr.transition,dr.transition=null;var U=zt;zt=1;var Z=pn;pn|=4,iv.current=null,qw(a,d),Y0(d,a),oi(Xc),_a=!!Ro,Xc=Ro=null,a.current=d,Kw(d),le(),pn=Z,zt=U,dr.transition=A}else a.current=d;if(rm&&(rm=!1,Vo=a,sm=k),A=a.pendingLanes,A===0&&(jo=null),at(d.stateNode),Ia(a,de()),o!==null)for(y=a.onRecoverableError,d=0;d<o.length;d++)k=o[d],y(k.value,{componentStack:k.stack,digest:k.digest});if(am)throw am=!1,a=sv,sv=null,a;return(sm&1)!==0&&a.tag!==0&&Ou(),A=a.pendingLanes,(A&1)!==0?a===ov?bd++:(bd=0,ov=a):bd=0,lr(),null}function Ou(){if(Vo!==null){var a=ir(sm),o=dr.transition,d=zt;try{if(dr.transition=null,zt=16>a?16:a,Vo===null)var y=!1;else{if(a=Vo,Vo=null,sm=0,(pn&6)!==0)throw Error(t(331));var k=pn;for(pn|=4,St=a.current;St!==null;){var A=St,U=A.child;if((St.flags&16)!==0){var Z=A.deletions;if(Z!==null){for(var ne=0;ne<Z.length;ne++){var be=Z[ne];for(St=be;St!==null;){var Fe=St;switch(Fe.tag){case 0:case 11:case 15:yd(8,Fe,A)}var Xe=Fe.child;if(Xe!==null)Xe.return=Fe,St=Xe;else for(;St!==null;){Fe=St;var Oe=Fe.sibling,vt=Fe.return;if(V0(Fe),Fe===be){St=null;break}if(Oe!==null){Oe.return=vt,St=Oe;break}St=vt}}}var Tt=A.alternate;if(Tt!==null){var Ct=Tt.child;if(Ct!==null){Tt.child=null;do{var ti=Ct.sibling;Ct.sibling=null,Ct=ti}while(Ct!==null)}}St=A}}if((A.subtreeFlags&2064)!==0&&U!==null)U.return=A,St=U;else e:for(;St!==null;){if(A=St,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:yd(9,A,A.return)}var fe=A.sibling;if(fe!==null){fe.return=A.return,St=fe;break e}St=A.return}}var re=a.current;for(St=re;St!==null;){U=St;var ge=U.child;if((U.subtreeFlags&2064)!==0&&ge!==null)ge.return=U,St=ge;else e:for(U=re;St!==null;){if(Z=St,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:tm(9,Z)}}catch(Rt){Zn(Z,Z.return,Rt)}if(Z===U){St=null;break e}var Qe=Z.sibling;if(Qe!==null){Qe.return=Z.return,St=Qe;break e}St=Z.return}}if(pn=k,lr(),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(At,a)}catch{}y=!0}return y}finally{zt=d,dr.transition=o}}return!1}function ax(a,o,d){o=b(d,o),o=se(a,o,1),a=Ln(a,o,1),o=fa(),a!==null&&(Yn(a,1,o),Ia(a,o))}function Zn(a,o,d){if(a.tag===3)ax(a,a,d);else for(;o!==null;){if(o.tag===3){ax(o,a,d);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(jo===null||!jo.has(y))){a=b(d,a),a=Ee(o,a,1),o=Ln(o,a,1),a=fa(),o!==null&&(Yn(o,1,a),Ia(o,a));break}}o=o.return}}function tS(a,o,d){var y=a.pingCache;y!==null&&y.delete(o),o=fa(),a.pingedLanes|=a.suspendedLanes&d,Ei===a&&(Bi&d)===d&&(xi===4||xi===3&&(Bi&130023424)===Bi&&500>de()-rv?Jl(a,0):av|=d),Ia(a,o)}function rx(a,o){o===0&&((a.mode&1)===0?o=1:(o=gt,gt<<=1,(gt&130023424)===0&&(gt=4194304)));var d=fa();a=Wa(a,o),a!==null&&(Yn(a,o,d),Ia(a,d))}function nS(a){var o=a.memoizedState,d=0;o!==null&&(d=o.retryLane),rx(a,d)}function iS(a,o){var d=0;switch(a.tag){case 13:var y=a.stateNode,k=a.memoizedState;k!==null&&(d=k.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(o),rx(a,d)}var sx;sx=function(a,o,d){if(a!==null)if(a.memoizedProps!==o.pendingProps||Ni.current)Qt=!0;else{if((a.lanes&d)===0&&(o.flags&128)===0)return Qt=!1,Gw(a,o,d);Qt=(a.flags&131072)!==0}else Qt=!1,In&&(o.flags&1048576)!==0&&ed(o,bu,o.index);switch(o.lanes=0,o.tag){case 2:var y=o.type;$f(a,o),a=o.pendingProps;var k=Os(o,mi.current);ls(o,d),k=Hl(null,o,y,a,k,d);var A=ld();return o.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Mi(y)?(A=!0,Us(o)):A=!1,o.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Kt(o),k.updater=Pu,o.stateNode=k,k._reactInternals=o,v(o,y,a,d),o=qt(null,o,y,!0,A,d)):(o.tag=0,In&&A&&td(o),pt(null,o,k,d),o=o.child),o;case 16:y=o.elementType;e:{switch($f(a,o),a=o.pendingProps,k=y._init,y=k(y._payload),o.type=y,k=o.tag=rS(y),a=Aa(y,a),k){case 0:o=ct(null,o,y,a,d);break e;case 1:o=It(null,o,y,a,d);break e;case 11:o=yi(null,o,y,a,d);break e;case 14:o=da(null,o,y,Aa(y.type,a),d);break e}throw Error(t(306,y,""))}return o;case 0:return y=o.type,k=o.pendingProps,k=o.elementType===y?k:Aa(y,k),ct(a,o,y,k,d);case 1:return y=o.type,k=o.pendingProps,k=o.elementType===y?k:Aa(y,k),It(a,o,y,k,d);case 3:e:{if(Yt(o),a===null)throw Error(t(387));y=o.pendingProps,A=o.memoizedState,k=A.element,Hn(a,o),zn(o,y,null,d);var U=o.memoizedState;if(y=U.element,A.isDehydrated)if(A={element:y,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){k=b(Error(t(423)),o),o=cn(a,o,y,d,k);break e}else if(y!==k){k=b(Error(t(424)),o),o=cn(a,o,y,d,k);break e}else for(Oi=Tr(o.stateNode.containerInfo.firstChild),pi=o,In=!0,Ea=null,d=Ul(o,null,y,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(os(),y===k){o=Zs(a,o,d);break e}pt(a,o,y,d)}o=o.child}return o;case 5:return Xs(o),a===null&&Su(o),y=o.type,k=o.pendingProps,A=a!==null?a.memoizedProps:null,U=k.children,Yc(y,k)?U=null:A!==null&&Yc(y,A)&&(o.flags|=32),ke(a,o),pt(a,o,U,d),o.child;case 6:return a===null&&Su(o),null;case 13:return Fr(a,o,d);case 4:return jl(o,o.stateNode.containerInfo),y=o.pendingProps,a===null?o.child=zs(o,null,y,d):pt(a,o,y,d),o.child;case 11:return y=o.type,k=o.pendingProps,k=o.elementType===y?k:Aa(y,k),yi(a,o,y,k,d);case 7:return pt(a,o,o.pendingProps,d),o.child;case 8:return pt(a,o,o.pendingProps.children,d),o.child;case 12:return pt(a,o,o.pendingProps.children,d),o.child;case 10:e:{if(y=o.type._context,k=o.pendingProps,A=o.memoizedProps,U=k.value,Mn(js,y._currentValue),y._currentValue=U,A!==null)if(ra(A.value,U)){if(A.children===k.children&&!Ni.current){o=Zs(a,o,d);break e}}else for(A=o.child,A!==null&&(A.return=o);A!==null;){var Z=A.dependencies;if(Z!==null){U=A.child;for(var ne=Z.firstContext;ne!==null;){if(ne.context===y){if(A.tag===1){ne=wn(-1,d&-d),ne.tag=2;var be=A.updateQueue;if(be!==null){be=be.shared;var Fe=be.pending;Fe===null?ne.next=ne:(ne.next=Fe.next,Fe.next=ne),be.pending=ne}}A.lanes|=d,ne=A.alternate,ne!==null&&(ne.lanes|=d),Bl(A.return,d,o),Z.lanes|=d;break}ne=ne.next}}else if(A.tag===10)U=A.type===o.type?null:A.child;else if(A.tag===18){if(U=A.return,U===null)throw Error(t(341));U.lanes|=d,Z=U.alternate,Z!==null&&(Z.lanes|=d),Bl(U,d,o),U=A.sibling}else U=A.child;if(U!==null)U.return=A;else for(U=A;U!==null;){if(U===o){U=null;break}if(A=U.sibling,A!==null){A.return=U.return,U=A;break}U=U.return}A=U}pt(a,o,k.children,d),o=o.child}return o;case 9:return k=o.type,y=o.pendingProps.children,ls(o,d),k=la(k),y=y(k),o.flags|=1,pt(a,o,y,d),o.child;case 14:return y=o.type,k=Aa(y,o.pendingProps),k=Aa(y.type,k),da(a,o,y,k,d);case 15:return xe(a,o,o.type,o.pendingProps,d);case 17:return y=o.type,k=o.pendingProps,k=o.elementType===y?k:Aa(y,k),$f(a,o),o.tag=1,Mi(y)?(a=!0,Us(o)):a=!1,ls(o,d),h(o,y,k),v(o,y,k,d),qt(null,o,y,!0,a,d);case 19:return U0(a,o,d);case 22:return oe(a,o,d)}throw Error(t(156,o.tag))};function ox(a,o){return Fh(a,o)}function aS(a,o,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(a,o,d,y){return new aS(a,o,d,y)}function fv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function rS(a){if(typeof a=="function")return fv(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ee)return 11;if(a===me)return 14}return 2}function Wo(a,o){var d=a.alternate;return d===null?(d=fr(a.tag,o,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=o,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,o=a.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function um(a,o,d,y,k,A){var U=2;if(y=a,typeof a=="function")fv(a)&&(U=1);else if(typeof a=="string")U=5;else e:switch(a){case z:return $l(d.children,k,A,o);case G:U=8,k|=8;break;case D:return a=fr(12,d,o,k|2),a.elementType=D,a.lanes=A,a;case ie:return a=fr(13,d,o,k),a.elementType=ie,a.lanes=A,a;case pe:return a=fr(19,d,o,k),a.elementType=pe,a.lanes=A,a;case Se:return cm(d,k,A,o);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case P:U=10;break e;case V:U=9;break e;case ee:U=11;break e;case me:U=14;break e;case ve:U=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return o=fr(U,d,o,k),o.elementType=a,o.type=y,o.lanes=A,o}function $l(a,o,d,y){return a=fr(7,a,y,o),a.lanes=d,a}function cm(a,o,d,y){return a=fr(22,a,y,o),a.elementType=Se,a.lanes=d,a.stateNode={isHidden:!1},a}function mv(a,o,d){return a=fr(6,a,null,o),a.lanes=d,a}function pv(a,o,d){return o=fr(4,a.children!==null?a.children:[],a.key,o),o.lanes=d,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}function sS(a,o,d,y,k){this.tag=o,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sn(0),this.expirationTimes=Sn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sn(0),this.identifierPrefix=y,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function gv(a,o,d,y,k,A,U,Z,ne){return a=new sS(a,o,d,Z,ne),o===1?(o=1,A===!0&&(o|=8)):o=0,A=fr(3,null,null,o),a.current=A,A.stateNode=a,A.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kt(A),a}function oS(a,o,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:y==null?null:""+y,children:a,containerInfo:o,implementation:d}}function lx(a){if(!a)return Ar;a=a._reactInternals;e:{if(nr(a)!==a||a.tag!==1)throw Error(t(170));var o=a;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Mi(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(a.tag===1){var d=a.type;if(Mi(d))return Pl(a,d,o)}return o}function hx(a,o,d,y,k,A,U,Z,ne){return a=gv(d,y,!0,a,k,A,U,Z,ne),a.context=lx(null),d=a.current,y=fa(),k=Ho(d),A=wn(y,k),A.callback=o??null,Ln(d,A,k),a.current.lanes=k,Yn(a,k,y),Ia(a,y),a}function dm(a,o,d,y){var k=o.current,A=fa(),U=Ho(k);return d=lx(d),o.context===null?o.context=d:o.pendingContext=d,o=wn(A,U),o.payload={element:a},y=y===void 0?null:y,y!==null&&(o.callback=y),a=Ln(k,o,U),a!==null&&(jr(a,k,U,A),ki(a,k,U)),U}function fm(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function ux(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<o?d:o}}function vv(a,o){ux(a,o),(a=a.alternate)&&ux(a,o)}function lS(){return null}var cx=typeof reportError=="function"?reportError:function(a){console.error(a)};function yv(a){this._internalRoot=a}mm.prototype.render=yv.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(t(409));dm(a,o,null,null)},mm.prototype.unmount=yv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Zl(function(){dm(null,a,null,null)}),o[oa]=null}};function mm(a){this._internalRoot=a}mm.prototype.unstable_scheduleHydration=function(a){if(a){var o=zh();a={blockedOn:null,target:a,priority:o};for(var d=0;d<$r.length&&o!==0&&o<$r[d].priority;d++);$r.splice(d,0,a),d===0&&Hh(a)}};function xv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function pm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function dx(){}function hS(a,o,d,y,k){if(k){if(typeof y=="function"){var A=y;y=function(){var be=fm(U);A.call(be)}}var U=hx(o,y,a,0,null,!1,!1,"",dx);return a._reactRootContainer=U,a[oa]=U.current,Co(a.nodeType===8?a.parentNode:a),Zl(),U}for(;k=a.lastChild;)a.removeChild(k);if(typeof y=="function"){var Z=y;y=function(){var be=fm(ne);Z.call(be)}}var ne=gv(a,0,!1,null,null,!1,!1,"",dx);return a._reactRootContainer=ne,a[oa]=ne.current,Co(a.nodeType===8?a.parentNode:a),Zl(function(){dm(o,ne,d,y)}),ne}function gm(a,o,d,y,k){var A=d._reactRootContainer;if(A){var U=A;if(typeof k=="function"){var Z=k;k=function(){var ne=fm(U);Z.call(ne)}}dm(o,U,a,k)}else U=hS(d,o,a,k,y);return fm(U)}ia=function(a){switch(a.tag){case 3:var o=a.stateNode;if(o.current.memoizedState.isDehydrated){var d=dn(o.pendingLanes);d!==0&&(Fn(o,d|1),Ia(o,de()),(pn&6)===0&&(Du=de()+500,lr()))}break;case 13:Zl(function(){var y=Wa(a,1);if(y!==null){var k=fa();jr(y,a,1,k)}}),vv(a,1)}},Cc=function(a){if(a.tag===13){var o=Wa(a,134217728);if(o!==null){var d=fa();jr(o,a,134217728,d)}vv(a,134217728)}},Tf=function(a){if(a.tag===13){var o=Ho(a),d=Wa(a,o);if(d!==null){var y=fa();jr(d,a,o,y)}vv(a,o)}},zh=function(){return zt},jh=function(a,o){var d=zt;try{return zt=a,o()}finally{zt=d}},Ve=function(a,o,d){switch(o){case"input":if(ze(a,d),o=d.name,d.type==="radio"&&o!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var y=d[o];if(y!==a&&y.form===a.form){var k=yu(y);if(!k)throw Error(t(90));on(y),ze(y,k)}}}break;case"textarea":O(a,d);break;case"select":o=d.value,o!=null&&$e(a,!!d.multiple,o,!1)}},Pt=uv,hn=Zl;var uS={usingClientEntryPoint:!1,Events:[Er,Vn,yu,Ie,lt,uv]},wd={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cS={bundleType:wd.bundleType,version:wd.version,rendererPackageName:wd.rendererPackageName,rendererConfig:wd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Oh(a),a===null?null:a.stateNode},findFiberByHostInstance:wd.findFiberByHostInstance||lS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vm.isDisabled&&vm.supportsFiber)try{At=vm.inject(cS),tt=vm}catch{}}return Ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uS,Ra.createPortal=function(a,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xv(o))throw Error(t(200));return oS(a,o,null,d)},Ra.createRoot=function(a,o){if(!xv(a))throw Error(t(299));var d=!1,y="",k=cx;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(k=o.onRecoverableError)),o=gv(a,1,!1,null,null,d,!1,y,k),a[oa]=o.current,Co(a.nodeType===8?a.parentNode:a),new yv(o)},Ra.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Oh(o),a=a===null?null:a.stateNode,a},Ra.flushSync=function(a){return Zl(a)},Ra.hydrate=function(a,o,d){if(!pm(o))throw Error(t(200));return gm(null,a,o,!0,d)},Ra.hydrateRoot=function(a,o,d){if(!xv(a))throw Error(t(405));var y=d!=null&&d.hydratedSources||null,k=!1,A="",U=cx;if(d!=null&&(d.unstable_strictMode===!0&&(k=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onRecoverableError!==void 0&&(U=d.onRecoverableError)),o=hx(o,null,a,1,d??null,k,!1,A,U),a[oa]=o.current,Co(a),y)for(a=0;a<y.length;a++)d=y[a],k=d._getVersion,k=k(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,k]:o.mutableSourceEagerHydrationData.push(d,k);return new mm(o)},Ra.render=function(a,o,d){if(!pm(o))throw Error(t(200));return gm(null,a,o,!1,d)},Ra.unmountComponentAtNode=function(a){if(!pm(a))throw Error(t(40));return a._reactRootContainer?(Zl(function(){gm(null,null,a,!1,function(){a._reactRootContainer=null,a[oa]=null})}),!0):!1},Ra.unstable_batchedUpdates=uv,Ra.unstable_renderSubtreeIntoContainer=function(a,o,d,y){if(!pm(d))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return gm(a,o,d,!1,y)},Ra.version="18.3.1-next-f1338f8080-20240426",Ra}var _x;function _S(){if(_x)return wv.exports;_x=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wv.exports=xS(),wv.exports}var bx;function bS(){if(bx)return ym;bx=1;var r=_S();return ym.createRoot=r.createRoot,ym.hydrateRoot=r.hydrateRoot,ym}var wS=bS();const SS=qy(wS),fp=[{id:1,name:"",name_meaning:"Arjuna's Despondency",chapter_number:1,verses_count:47,summary:"On the battlefield of Kurukshetra, Arjuna faces a moral dilemma as he sees his relatives and teachers in the opposing army. Overwhelmed with grief, he lays down his weapons.",verses:[{id:1,verse_number:1,chapter_number:1,text:`  |
    |
    ||-||`,transliteration:`dhitarhtra uvcha
dharma-khetre kuru-khetre samavet yuyutsava
mmak pavhchaiva kim akurvata sajaya`,hindi_meaning:"  :  !                 ?",meaning:"Dhritarashtra said: O Sanjaya, after my sons and the sons of Pandu assembled in the place of pilgrimage at Kurukshetra, desiring to fight, what did they do?"},{id:2,verse_number:2,chapter_number:1,text:`  |
     |
   ||-||`,transliteration:`sajaya uvcha
dihv tu pavnka vyha duryodhanas tad
chryam upasagamya rj vachanam abravt`,hindi_meaning:"  :  !            ()      ",meaning:"Sanjaya said: O King, after looking at the army of the Pandavas drawn in military array, King Duryodhana went to his teacher Dronacharya and spoke the following words."},{id:3,verse_number:3,chapter_number:1,text:`    |
     ||-||`,transliteration:`pahyait pu-putrm chrya mahat chamm
vyh drupada-putrea tava hihyea dhmat`,hindi_meaning:" !      ()            ",meaning:"O my teacher, behold the great army of the sons of Pandu, so expertly arranged by your intelligent disciple, the son of Drupada."},{id:4,verse_number:4,chapter_number:1,text:`     |
    ||-||`,transliteration:`atra hr mahehvs bhmrjuna-sam yudhi
yuyudhno virah cha drupadah cha mah-ratha`,hindi_meaning:"             ; ,        ",meaning:"Here in this army are many heroic bowmen equal in fighting to Bhima and Arjuna; there are also great fighters like Yuyudhana, Virata, and Drupada."},{id:5,verse_number:5,chapter_number:1,text:`   |
   ||-||`,transliteration:`dhihaketuh chekitna khirjah cha vryavn
purujit kuntibhojah cha haibyah cha nara-pugava`,hindi_meaning:", ,  , ,      ,        ",meaning:"There are also Dhrishtaketu, Cekitana, Kasiraja, Purujit, Kuntibhoja, and Saibya, all possessing great prowess and strength."},{id:6,verse_number:6,chapter_number:1,text:`    |
     ||-||`,transliteration:`yudhmanyuh cha vikrnta uttamaujh cha vryavn
saubhadro draupadeyh cha sarva eva mah-rath`,hindi_meaning:" ,   ,              ",meaning:"There are the mighty Yudhamanyu, the very powerful Uttamaujas, the son of Subhadra and the sons of Draupadi. All these warriors are great chariot fighters."},{id:7,verse_number:7,chapter_number:1,text:`      |
      ||-||`,transliteration:`asmka tu vihih ye tn nibodha dwijottama
nyak mama sainyasya sajrtha tn bravmi te`,hindi_meaning:" !       ,              ",meaning:"But for your information, O best of the brahmanas, let me tell you about the captains who are especially qualified to lead my military force."},{id:8,verse_number:8,chapter_number:1,text:`    |
    ||-||`,transliteration:`bhavn bhhmah cha karah cha kipah cha samitijaya
ahvatthm vikarah cha saumadattis tathaiva cha`,hindi_meaning:" , , , , ,       ,       ",meaning:"There are personalities like yourself, Bhishma, Karna, Kripa, Asvatthama, Vikarna, and the son of Somadatta called Bhurisrava, who are always victorious in battle."},{id:9,verse_number:9,chapter_number:1,text:`      |
   ||-||`,transliteration:`anye cha bahava hr mad-arthe tyakta-jvit
nn-hastra-prahara sarve yuddha-vihrad`,hindi_meaning:"                            ",meaning:"There are many other heroes who are prepared to lay down their lives for my sake. All of them are well equipped with different kinds of weapons, and all are experienced in military science."},{id:10,verse_number:10,chapter_number:1,text:`    |
    ||-||`,transliteration:`aparypta tad asmka bala bhhmbhirakhitam
parypta tv idam eteh bala bhmbhirakhitam`,hindi_meaning:"      ,         ",meaning:"Our strength is immeasurable, and we are perfectly protected by Grandfather Bhishma, whereas the strength of the Pandavas, carefully protected by Bhima, is limited."},{id:11,verse_number:11,chapter_number:1,text:`    |
     ||-||`,transliteration:`ayanehu cha sarvehu yath-bhgam avasthit
bhhmam evbhirakhantu bhavanta sarva eva hi`,hindi_meaning:" !    -           ",meaning:"Now all of you must give full support to Grandfather Bhishma, as you stand at your respective strategic points of entrance into the phalanx of the army."},{id:12,verse_number:12,chapter_number:1,text:`    |
     ||-||`,transliteration:`tasya sajanayan harha kuru-viddha pitmaha
siha-nda vinadyochchai hakha dadhmau pratpavn`,hindi_meaning:"      ,    ,   ,       ,     ",meaning:"Then Bhishma, the great valiant grandsire of the Kuru dynasty, the grandfather of the fighters, blew his conchshell very loudly, making a sound like the roar of a lion, giving Duryodhana joy."},{id:13,verse_number:13,chapter_number:1,text:`    |
   ||-||`,transliteration:`tata hakhh cha bheryah cha paavnaka-gomukh
sahasaivbhyahanyanta sa habdas tumulo bhavat`,hindi_meaning:" , , ,                ",meaning:"After that, the conchshells, drums, bugles, trumpets and horns were all suddenly sounded, and the combined sound was tumultuous."},{id:14,verse_number:14,chapter_number:1,text:`     |
     ||-||`,transliteration:`tata hvetair hayair yukte mahati syandane sthitau
mdhava pavah chaiva divyau hakhau pradadhmatu`,hindi_meaning:"          ()   ()     ",meaning:"On the other side, both Lord Krishna and Arjuna, stationed on a great chariot drawn by white horses, sounded their transcendental conchshells."},{id:15,verse_number:15,chapter_number:1,text:`    |
     ||-||`,transliteration:`pchajanya hihkeho devadatta dhanajaya
paura dadhmau mah-hakha bhma-karm vikodara`,hindi_meaning:" ()  ,  ()     ()    ",meaning:"Lord Krishna blew His conchshell, called Pancajanya; Arjuna blew his, the Devadatta; and Bhima, the voracious eater and performer of Herculean tasks, blew his terrific conchshell, called Paundra."},{id:16,verse_number:16,chapter_number:1,text:`    |
   ||-||`,transliteration:`anantavijaya rj kunt-putro yudhihhira
nakula sahadevah cha sughoha-maipuhpakau`,hindi_meaning:"      -     ",meaning:"King Yudhishthira, the son of Kunti, blew his conchshell, the Anantavijaya, and Nakula and Sahadeva blew the Sughosha and Manipushpaka."},{id:17,verse_number:17,chapter_number:1,text:`     |
   ||-||`,transliteration:`khyah cha paramehvsa hikha cha mah-ratha
dhihadyumno virah cha styakih chparjita`,hindi_meaning:"  ,  , ,    ...",meaning:"That great archer the King of Kasi, the great fighter Sikhandi, Dhrishtadyumna, Virata, the unconquerable Satyaki..."},{id:18,verse_number:18,chapter_number:1,text:`    |
    ||-||`,transliteration:`drupado draupadeyh cha sarvaha pithiv-pate
saubhadrah cha mah-bhu hakhn dadhmu pithak pithak`,hindi_meaning:" ! ,            -  ",meaning:"Drupada, the sons of Draupadi, and the others, O King, such as the mighty-armed son of Subhadra, all blew their respective conchshells."},{id:19,verse_number:19,chapter_number:1,text:`     |
     ||-||`,transliteration:`sa ghoho dhrtarhr hidayni vyadrayat
nabhah cha pithiv chaiva tumulo vyanundayan`,hindi_meaning:"                      ",meaning:"The blowing of these different conchshells became uproarious. Vibrating both in the sky and on the earth, it shattered the hearts of the sons of Dhritarashtra."},{id:20,verse_number:20,chapter_number:1,text:`    |
    |
    ||-||`,transliteration:`atha vyavasthitn dihv dhrtarhrn kapi-dhwaja
pravitte hastra-sampte dhanur udyamya pava
hihkeha tad vkyam idam ha mah-pate`,hindi_meaning:"  ()         ,        ,     ",meaning:"At that time Arjuna, the son of Pandu, seated in the chariot bearing the flag of Hanuman, took up his bow and prepared to shoot his arrows. O King, after looking at the sons of Dhritarashtra drawn in military array, Arjuna then spoke to Lord Krishna these words."},{id:21,verse_number:21,chapter_number:1,text:`  |
    |
  ||-||`,transliteration:`arjuna uvcha
senayor ubhayor madhye ratha sthpaya me chyuta
yvad etn nirkhe ha yoddhu-kmn avasthitn`,hindi_meaning:"  :  !         ,             ",meaning:"Arjuna said: O infallible one, please draw my chariot between the two armies so that I may see those present here, who desire to fight, and with whom I must contend in this great trial of arms."},{id:22,verse_number:22,chapter_number:1,text:"   ||-||",transliteration:"kair may saha yoddhavyam asmin raa-samudyame",hindi_meaning:"        -          ",meaning:"Let me see those who have come here to fight, wishing to please the evil-minded son of Dhritarashtra."},{id:23,verse_number:23,chapter_number:1,text:`  |
    |
   ||-||`,transliteration:`sajaya uvcha
evam ukto hihkeho gukehena bhrata
senayor ubhayor madhye sthpayitv rathottamam`,hindi_meaning:"  :  !     ,  ()          ",meaning:"Sanjaya said: O descendant of Bharata, having been thus addressed by Arjuna, Lord Krishna drew up the fine chariot in the midst of the armies of both parties."},{id:24,verse_number:24,chapter_number:1,text:`    |
   ||-||`,transliteration:`bhhma-droa-pramukhata sarveh cha mah-khitm
uvcha prtha pahyaitn samavetn kurn iti`,hindi_meaning:"         ,  !     ,  ",meaning:"In the presence of Bhishma, Drona and all the other chieftains of the world, the Lord said, Just behold, Partha, all the Kurus assembled here."},{id:25,verse_number:25,chapter_number:1,text:`   |
 ||-||`,transliteration:`tatrpahyat sthitn prtha pitin atha pitmahn
chryn mtuln bhrtin putrn pautrn sakhs tath`,hindi_meaning:"  ()     , , , , , , ,   ",meaning:"There Arjuna could see, within the midst of the armies of both parties, his fathers, grandfathers, teachers, maternal uncles, brothers, sons, grandsons, friends..."},{id:26,verse_number:26,chapter_number:1,text:`  |
    ||-||`,transliteration:`hvahurn suhidah chaiva senayor ubhayor api
tn samkhya sa kaunteya sarvn bandhn avasthitn`,hindi_meaning:"               ()   ",meaning:"...and also his fathers-in-law and well-wishers. When the son of Kunti, Arjuna, saw all these different grades of friends and relatives, he became overwhelmed with compassion and spoke thus."},{id:27,verse_number:27,chapter_number:1,text:`   |
  |
     ||-||`,transliteration:`kipay parayviho vihdann idam abravt
arjuna uvcha
dihvema sva-jana kiha yuyutsu samupasthitam`,hindi_meaning:"    ,      :  !         ",meaning:"Arjuna said: My dear Krishna, seeing my friends and relatives present before me in such a fighting spirit, I feel the limbs of my body quivering and my mouth drying up."},{id:28,verse_number:28,chapter_number:1,text:`      |
     ||-||`,transliteration:`sdanti mama gtri mukha cha parihuhyati
vepathuh cha harre me roma-harhah cha jyate`,hindi_meaning:"     ,    ,           ",meaning:"My whole body is trembling, my hair is standing on end, my bow Gandiva is slipping from my hand, and my skin is burning."},{id:29,verse_number:29,chapter_number:1,text:`    |
       ||-||`,transliteration:`gva srasate hastt tvak chaiva paridahyate
na cha haknomy avasthtu bhramatva cha me mana`,hindi_meaning:"                       ",meaning:"I am now unable to stand here any longer. I am forgetting myself, and my mind is reeling. I see only causes of misfortune, O Krishna, killer of the Kesi demon."},{id:30,verse_number:30,chapter_number:1,text:`     |
     ||-||`,transliteration:`nimittni cha pahymi vipartni kehava
na cha hreyo nupahymi hatv sva-janam have`,hindi_meaning:" !                  ",meaning:"I do not see how any good can come from killing my own kinsmen in this battle, nor can I, my dear Krishna, desire any subsequent victory, kingdom, or happiness."},{id:31,verse_number:31,chapter_number:1,text:`         |
       ||-||`,transliteration:`na kkhe vijaya kiha na cha rjya sukhni cha
ki no rjyena govinda ki bhogair jvitena v`,hindi_meaning:" !  ,         !   ,       ?",meaning:"O Govinda, of what avail to us are a kingdom, happiness or even life itself when all those for whom we may desire them are now arrayed on this battlefield?"},{id:32,verse_number:32,chapter_number:1,text:`       |
      ||-||`,transliteration:`yehm arthe kkhita no rjya bhog sukhni cha
ta ime vasthit yuddhe prs tyaktv dhanni cha`,hindi_meaning:"   ,       ,      ,    ",meaning:"O Madhusudana, when teachers, fathers, sons, grandfathers, maternal uncles, fathers-in-law, grandsons, brothers-in-law and other relatives are ready to give up their lives and properties and are standing before me, why should I wish to kill them, even though they might otherwise kill me?"},{id:33,verse_number:33,chapter_number:1,text:`     |
     ||-||`,transliteration:`chry pitara putrs tathaiva cha pitmah
mtul hvahur pautr hyl sambandhinas tath`,hindi_meaning:" ! , , , , , , ,     ",meaning:"Teachers, fathers, sons, grandfathers, maternal uncles, fathers-in-law, grandsons, brothers-in-law and other relatives are ready to give up their lives and properties and are standing before me."},{id:34,verse_number:34,chapter_number:1,text:`    |
      ||-||`,transliteration:`etn na hantum ichchhmi ghnato pi madhusdana
api trailokya-rjyasya heto ki nu mah-kite`,hindi_meaning:" !    ,      ,        ,       ?",meaning:"O maintainer of all living entities, I am not prepared to fight with them even in exchange for the three worlds, let alone this earth. What pleasure will we derive from killing the sons of Dhritarashtra?"},{id:35,verse_number:35,chapter_number:1,text:`     |
 ||-||`,transliteration:`nihatya dhrtarhrn na k prti syj janrdana
ppam evhrayed asmn hatvaitn tatyina`,hindi_meaning:" !         ?         ?",meaning:"Sin will overcome us if we slay such aggressors. Therefore it is not proper for us to kill the sons of Dhritarashtra and our friends. What should we gain, O Krishna, husband of the goddess of fortune, and how could we be happy by killing our own kinsmen?"},{id:36,verse_number:36,chapter_number:1,text:`    |
       ||-||`,transliteration:`tasmn nrh vaya hantu dhrtarhrn sa-bndhavn
sva-jana hi katha hatv sukhina syma mdhava`,hindi_meaning:" !              ",meaning:"Therefore, it is not proper for us to kill the sons of Dhritarashtra and our friends. What should we gain, O Krishna, husband of the goddess of fortune, and how could we be happy by killing our own kinsmen?"},{id:37,verse_number:37,chapter_number:1,text:`    |
     ||-||`,transliteration:`yady apy ete na pahyanti lobhopahata-chetasa
kula-khaya-kita doha mitra-drohe cha ptakam`,hindi_meaning:" !      ,         ",meaning:"O Janardana, although these men, their hearts overtaken by greed, see no fault in killing ones family or quarreling with friends, why should we, who can see the crime in destroying a family, engage in these acts of sin?"},{id:38,verse_number:38,chapter_number:1,text:`    |
   ||-||`,transliteration:`katha na jeyam asmbhi ppd asmn nivartitum
kula-khaya-kita doha prapahyadbhir janrdana`,hindi_meaning:" !                     ",meaning:"Why should we, who can see the crime in destroying a family, engage in these acts of sin?"},{id:39,verse_number:39,chapter_number:1,text:`    |
    ||-||`,transliteration:`kula-khaye praahyanti kula-dharm santan
dharme nahe kula kitsnam adharmo bhibhavaty uta`,hindi_meaning:" !      ,         ,         ",meaning:"With the destruction of dynasty, the eternal family tradition is vanquished, and thus the rest of the family becomes involved in irreligion."},{id:40,verse_number:40,chapter_number:1,text:`   |
     ||-||`,transliteration:`adharmbhibhavt kiha praduhyanti kula-striya
strhu duhsu vrheya jyate vara-sakara`,hindi_meaning:" !        ,        ",meaning:"When irreligion is prominent in the family, O Krishna, the women of the family become polluted, and from the degradation of womanhood, O descendant of Vrishni, comes unwanted progeny."},{id:41,verse_number:41,chapter_number:1,text:`     |
    ||-||`,transliteration:`sakaro narakyaiva kula-ghnn kulasya cha
patanti pitaro hy eh lupta-piodaka-kriy`,hindi_meaning:" !     ,           ",meaning:"An increase of unwanted population certainly causes hellish life both for the family and for those who destroy the family tradition. The ancestors of such corrupt families fall down, because the performances for offering them food and water are entirely stopped."},{id:42,verse_number:42,chapter_number:1,text:`   |
    ||-||`,transliteration:`dohair etai kula-ghnn vara-sakara-krakai
utsdyante jti-dharm kula-dharmh cha hhvat`,hindi_meaning:" !         ,      ",meaning:"By the evil deeds of those who destroy the family tradition and thus give rise to unwanted children, all kinds of community projects and family welfare activities are devastated."},{id:43,verse_number:43,chapter_number:1,text:`   |
    ||-||`,transliteration:`utsanna-kula-dharm manuhy janrdana
narake niyata vso bhavatty anuhuhruma`,hindi_meaning:"  :  !   ,        -           ,     ",meaning:"O Krishna, maintainer of the people, I have heard by disciplic succession that those who destroy family traditions dwell always in hell."},{id:44,verse_number:44,chapter_number:1,text:`      |
   ||-||`,transliteration:`aho bata mahat ppa kartu vyavasit vayam
yad rjya-sukha-lobhena hantu sva-janam udyat`,hindi_meaning:" !      ?            ",meaning:"Alas, how strange it is that we are preparing to commit greatly sinful acts. Driven by the desire to enjoy royal happiness, we are intent on killing our own kinsmen."},{id:45,verse_number:45,chapter_number:1,text:`   |
     ||-||`,transliteration:`yadi mm apratkram ahastra hastra-paya
dhrtarhr rae hanyus tan me khematara bhavet`,hindi_meaning:" !      ,                ",meaning:"Better for me if the sons of Dhritarashtra, weapons in hand, were to kill me unarmed and unresisting on the battlefield."},{id:46,verse_number:46,chapter_number:1,text:`  |
    |
    ||-||`,transliteration:`sajaya uvcha
evam uktv rjuna sakhye rathopastha upvihat
visijya sa-hara chpa hoka-savigna-mnasa`,hindi_meaning:" !       ?            ",meaning:"Sanjaya said: Arjuna, having thus spoken on the battlefield, cast aside his bow and arrows and sat down on the chariot, his mind overwhelmed with grief."},{id:47,verse_number:47,chapter_number:1,text:`  
  
  `,transliteration:`o tat sad iti hrmad bhagavad gtspanihatsu
brahma vidyy yoga hstre hr kihrjuna savde
arjuna vihdayogo nma prathamo dhyya`,hindi_meaning:" !      ?            ",meaning:"Thus in the Upanishads of the glorious Bhagavad Gita, the science of the Eternal, the scripture of Yoga, the dialogue between Sri Krishna and Arjuna, ends the first discourse entitled: The Yoga of Arjuna's Dejection."}]},{id:2,name:"",name_meaning:"The Yoga of Knowledge",chapter_number:2,verses_count:72,summary:"Lord Krishna imparts wisdom to the grieving Arjuna, explaining the eternal nature of the soul, the concept of duty (dharma), and the path of selfless action (Karma Yoga).",verses:[{id:48,verse_number:1,chapter_number:2,text:`  |
   |
   ||-||`,transliteration:`sajaya uvcha
ta tath kipayviham ahru-prkulekhaam
vihdantam ida vkyam uvcha madhusdana`,hindi_meaning:"  :   ,          ,     ",meaning:"Sanjaya said: Seeing Arjuna full of compassion, his mind depressed, his eyes full of tears, Madhusudana, Krishna, spoke the following words."},{id:49,verse_number:2,chapter_number:2,text:` |
    |
 ||-||`,transliteration:`hr bhagavn uvcha
kutas tv kahmalam ida vihame samupasthitam
anrya-juham asvargyam akrti-karam arjuna`,hindi_meaning:"   :  !            ?       ,            ",meaning:"The Supreme Personality of Godhead said: My dear Arjuna, how have these impurities come upon you? They are not at all befitting a man who knows the value of life. They lead not to higher planets but to infamy."},{id:50,verse_number:3,chapter_number:2,text:`      |
    ||-||`,transliteration:`klaibya m sma gama prtha naitat tvayy upapadyate
khudra hidaya-daurbalya tyaktvottihha parantapa`,hindi_meaning:" !   ,              ,  !",meaning:"O son of Pritha, do not yield to this degrading impotence. It does not become you. Give up such petty weakness of heart and arise, O chastiser of the enemy."},{id:51,verse_number:4,chapter_number:2,text:`  |
      |
   ||-||`,transliteration:`arjuna uvcha
katha bhhmam aha sakhye droa cha madhusdana
ihubhi pratiyotsymi pjrhv arisdana`,hindi_meaning:"  :   ,          ,     ",meaning:"Arjuna said: O killer of enemies, O killer of Madhu, how can I counterattack with arrows in battle men like Bhishma and Drona, who are worthy of my worship?"},{id:52,verse_number:5,chapter_number:2,text:`  
    |
 
  ||-||`,transliteration:`gurn ahatv hi mahnubhvn
hreyo bhoktu bhaikhyam apha loke
hatvrtha-kms tu gurn ihaiva
bhujya bhogn rudhira-pradigdhn`,hindi_meaning:"   :  !            ?       ,            ",meaning:"It would be better to live in this world by begging than to live at the cost of the lives of great souls who are my teachers. Even though desiring worldly gain, they are superiors. If they are killed, everything we enjoy will be tainted with blood."},{id:53,verse_number:6,chapter_number:2,text:`   
      |
   
   ||-||`,transliteration:`na chaitad vidma kataran no garyo
yad v jayema yadi v no jayeyu
yn eva hatv na jijvihmas
te vasthit pramukhe dhrtarhr`,hindi_meaning:" !   ,              ,  !",meaning:"Nor do we know which is betterconquering them or being conquered by them. If we killed the sons of Dhritarashtra, we should not care to live. Yet they are now standing before us on the battlefield."},{id:54,verse_number:7,chapter_number:2,text:`
   |
   
     ||-||`,transliteration:`krpaya-dohopahata-svabhva
pichchhmi tv dharma-sammha-chet
yach chhreya syn nihchita brhi tan me
hihyas te ha hdhi m tv prapannam`,hindi_meaning:"  :  !  !               ?",meaning:"Now I am confused about my duty and have lost all composure because of miserly weakness. In this condition I am asking You to tell me for certain what is best for me. Now I am Your disciple, and a soul surrendered unto You. Please instruct me."},{id:55,verse_number:8,chapter_number:2,text:`   
 |
 
   ||-||`,transliteration:`na hi prapahymi mampanudyd
yach chhokam uchchhohaam indriym
avpya bhmv asapatnam iddha
rjya surm api chdhipatyam`,hindi_meaning:"     ,                   ,        ",meaning:"I can find no means to drive away this grief which is drying up my senses. I will not be able to dispel it even if I win a prosperous, unrivaled kingdom on earth with sovereignty like the demigods in heaven."},{id:56,verse_number:9,chapter_number:2,text:`  |
    |
       ||-||`,transliteration:`sajaya uvcha
evam uktv hihkeha gukeha parantapa
na yotsya iti govindam uktv th babhva ha`,hindi_meaning:"  :   ,          ,     ",meaning:"Sanjaya said: Having spoken thus, Arjuna, chastiser of enemies, told Krishna, 'Govinda, I shall not fight,' and fell silent."},{id:57,verse_number:10,chapter_number:2,text:`    |
   ||-||`,transliteration:`tam uvcha hihkeha prahasann iva bhrata
senayor ubhayor madhye vihdantam ida vacha`,hindi_meaning:"   :  !            ?       ,            ",meaning:"O descendant of Bharata, at that time Krishna, smiling, in the midst of both the armies, spoke the following words to the grief-stricken Arjuna."},{id:58,verse_number:11,chapter_number:2,text:` |
   |
   ||-||`,transliteration:`hr bhagavn uvcha
ahochyn anvahochas tva praj-vdh cha bhhase
gatsn agatsh cha nnuhochanti pait`,hindi_meaning:"   :       ,                             ",meaning:"The Supreme Personality of Godhead said: While speaking learned words, you are mourning for what is not worthy of grief. Those who are wise lament neither for the living nor for the dead."},{id:59,verse_number:12,chapter_number:2,text:`        |
       ||-||`,transliteration:`na tv evha jtu nsa na tva neme jandhip
na chaiva na bhavihyma sarve vayam ata param`,hindi_meaning:"     ,  ,    ;           ",meaning:"Never was there a time when I did not exist, nor you, nor all these kings; nor in the future shall any of us cease to be."},{id:60,verse_number:13,chapter_number:2,text:`     |
    ||-||`,transliteration:`dehino smin yath dehe kaumra yauvana jar
tath dehntara-prptir dhras tatra na muhyati`,hindi_meaning:"     () ,      ,                    ",meaning:"As the embodied soul continuously passes, in this body, from boyhood to youth to old age, the soul similarly passes into another body at death. A sober person is not bewildered by such a change."},{id:61,verse_number:14,chapter_number:2,text:`   |
  ||-||`,transliteration:`mtr-sparhs tu kaunteya htoha-sukha-dukha-d
gampyino nitys ts titikhasva bhrata`,hindi_meaning:" !      -, -  -  ,    !    ",meaning:"O son of Kunti, the nonpermanent appearance of happiness and distress, and their disappearance in due course, are like the appearance and disappearance of winter and summer seasons. They arise from sense perception, O scion of Bharata, and one must learn to tolerate them without being disturbed."},{id:62,verse_number:15,chapter_number:2,text:`      |
    ||-||`,transliteration:`ya hi na vyathayanty ete puruha puruharhabha
sama-dukha-sukha dhra so mitatvya kalpate`,hindi_meaning:" !     (-)   ,  -      ,     ",meaning:"O best among men [Arjuna], the person who is not disturbed by happiness and distress and is steady in both is certainly eligible for liberation."},{id:63,verse_number:16,chapter_number:2,text:`      |
  ||-||`,transliteration:`nsato vidyate bhvo nbhvo vidyate sata
ubhayor api diho ntas tv anayos tattva-darhibhi`,hindi_meaning:"  ,      ()         ()     ",meaning:"Those who are seers of the truth have concluded that of the nonexistent [the material body] there is no endurance and of the eternal [the soul] there is no change. This they have concluded by studying the nature of both."},{id:64,verse_number:17,chapter_number:2,text:`      |
   ||-||`,transliteration:`avinhi tu tad viddhi yena sarvam ida tatam
vinham avyayasysya na kahchit kartum arhati`,hindi_meaning:"         ,            ",meaning:"That which pervades the entire body you should know to be indestructible. No one is able to destroy that imperishable soul."},{id:65,verse_number:18,chapter_number:2,text:`     |
   ||-||`,transliteration:`antavanta ime deh nityasyokt harria
anhino prameyasya tasmd yudhyasva bhrata`,hindi_meaning:" !   ,          ;    ",meaning:"The material body of the indestructible, immeasurable and eternal living entity is sure to come to an end; therefore, fight, O descendant of Bharata."},{id:66,verse_number:19,chapter_number:2,text:`       |
        ||-||`,transliteration:`ya ena vetti hantra yah chaina manyate hatam
ubhau tau na vijnto nya hanti na hanyate`,hindi_meaning:"          ,    ;             ",meaning:"Neither he who thinks the living entity the slayer nor he who thinks it slain is in knowledge, for the self slays not nor is slain."},{id:67,verse_number:20,chapter_number:2,text:`    
      |
   
    ||-||`,transliteration:`na jyate mriyate v kadchin
nya bhtv bhavit v na bhya
ajo nitya hhvato ya puro
na hanyate hanyamne harre`,hindi_meaning:"              ,        , ,              ",meaning:"For the soul there is neither birth nor death at any time. He has not come into being, does not come into being, and will not come into being. He is unborn, eternal, ever-existing and primeval. He is not slain when the body is slain."},{id:68,verse_number:21,chapter_number:2,text:`    |
        ||-||`,transliteration:`vedvinhina nitya ya enam ajam avyayam
katha sa puruha prtha ka ghtayati hanti kam`,hindi_meaning:" !    ,       ,           ?",meaning:"O Partha, how can a person who knows that the soul is indestructible, eternal, unborn and immutable kill anyone or cause anyone to kill?"},{id:69,verse_number:22,chapter_number:2,text:`   
   |
   
    ||-||`,transliteration:`vssi jrni yath vihya
navni gihti naro pari
tath harri vihya jrny
anyni sayti navni deh`,hindi_meaning:"          ,    ()          ",meaning:"As a person puts on new garments, giving up old ones, the soul similarly accepts new material bodies, giving up the old and useless ones."},{id:70,verse_number:23,chapter_number:2,text:`      |
      ||-||`,transliteration:`naina chhindanti hastri naina dahati pvaka
na chaina kledayanty po na hohayati mruta`,hindi_meaning:"      ,    ,          ",meaning:"The soul can never be cut to pieces by any weapon, nor burned by fire, nor moistened by water, nor withered by the wind."},{id:71,verse_number:24,chapter_number:2,text:`   |
    ||-||`,transliteration:`achchhedyo yam adhyo yam akledyo hohya eva cha
nitya sarva-gata sthur achalo ya santana`,hindi_meaning:" , ,      , , ,    ",meaning:"This individual soul is unbreakable and insoluble, and can be neither burned nor dried. He is everlasting, present everywhere, unchangeable, immovable and eternally the same."},{id:72,verse_number:25,chapter_number:2,text:` |
   ||-||`,transliteration:`avyakto yam achintyo yam avikryo yam uchyate
tasmd eva viditvaina nnuhochitum arhasi`,hindi_meaning:" ,                ",meaning:"It is said that the soul is invisible, inconceivable and immutable. Knowing this, you should not grieve for the body."},{id:73,verse_number:26,chapter_number:2,text:`       |
     ||-||`,transliteration:`atha chaina nitya-jta nitya v manyase mitam
tathpi tva mah-bho naina hochitum arhasi`,hindi_meaning:" !             ,         ",meaning:"If, however, you think that the soul [or the symptoms of life] is always born and dies forever, you still have no reason to lament, O mighty-armed."},{id:74,verse_number:27,chapter_number:2,text:`       |
   h ||-||`,transliteration:`jtasya hi dhruvo mityur dhruva janma mitasya cha
tasmd aparihrye rthe na tva hochitum arhasi`,hindi_meaning:"                       ",meaning:"One who has taken his birth is sure to die, and after death one is sure to take birth again. Therefore, in the unavoidable discharge of your duty, you should not lament."},{id:75,verse_number:28,chapter_number:2,text:`    |
    ||-||`,transliteration:`avyaktdni bhtni vyakta-madhyni bhrata
avyakta-nidhanny eva tatra k paridevan`,hindi_meaning:" !     ,              ?",meaning:"All created beings are unmanifest in their beginning, manifest in their interim state, and unmanifest again when annihilated. So what need is there for lamentation?"},{id:76,verse_number:29,chapter_number:2,text:` 
   |
 
     ||-||`,transliteration:`hcharya-vat pahyati kahchid enam
hcharya-vad vadati tathaiva chnya
hcharya-vach chainam anya hioti
hrutvpy ena veda na chaiva kahchit`,hindi_meaning:"      ,      ,             ",meaning:"Some look on the soul as amazing, some describe him as amazing, and some hear of him as amazing, while others, even after hearing about him, cannot understand him at all."},{id:77,verse_number:30,chapter_number:2,text:`     |
     ||-||`,transliteration:`deh nityam avadhyo ya dehe sarvasya bhrata
tasmt sarvi bhtni na tva hochitum arhasi`,hindi_meaning:" !                     ",meaning:"O descendant of Bharata, he who dwells in the body can never be slain. Therefore you need not grieve for any living being."},{id:78,verse_number:31,chapter_number:2,text:`    |
    ||-||`,transliteration:`sva-dharmam api chvekhya na vikampitum arhasi
dharmyd dhi yuddhch chhreyo nyat khatriyasya na vidyate`,hindi_meaning:" !           ;            ",meaning:"Considering your specific duty as a kshatriya, you should know that there is no better engagement for you than fighting on religious principles; and so there is no need for hesitation."},{id:79,verse_number:32,chapter_number:2,text:`   |
     ||-||`,transliteration:`yadichchhay chopapanna svarga-dvram apvitam
sukhina khatriy prtha labhante yuddham diham`,hindi_meaning:" !         ,               ",meaning:"O Partha, happy are the kshatriyas to whom such fighting opportunities come unsought, opening for them the doors of the heavenly planets."},{id:80,verse_number:33,chapter_number:2,text:`      |
      ||-||`,transliteration:`atha chet tvam ima dharmya sagrma na karihyasi
tata sva-dharma krti cha hitv ppam avpsyasi`,hindi_meaning:"      ,           ",meaning:"If, however, you do not perform your religious duty of fighting, then you will certainly incur sins for neglecting your duties and thus lose your reputation as a fighter."},{id:81,verse_number:34,chapter_number:2,text:`     |
  ||-||`,transliteration:`akrti chpi bhtni kathayihyanti te vyaym
sambhvitasya chkrtir marad atirichyate`,hindi_meaning:"             ,     ",meaning:"People will always speak of your infamy, and for a respectable person, dishonor is worse than death."},{id:82,verse_number:35,chapter_number:2,text:`    |
       ||-||`,transliteration:`bhayd rad uparata masyante tv mah-rath
yeh cha tva bahu-mato bhtv ysyasi lghavam`,hindi_meaning:"             ",meaning:"The great generals who have held your name and fame in high esteem will think that you have left the battlefield out of fear only, and thus they will consider you insignificant."},{id:83,verse_number:36,chapter_number:2,text:`   |
      ||-||`,transliteration:`avchya-vdh cha bahn vadihyanti tavhit
nindantas tava smarthya tato dukhatara nu kim`,hindi_meaning:"                      ?",meaning:"Your enemies will describe you in many unkind words and scorn your ability. What could be more painful for you?"},{id:84,verse_number:37,chapter_number:2,text:`        |
    ||-||`,transliteration:`hato v prpsyasi svarga jitv v bhokhyase mahm
tasmd uttihha kaunteya yuddhya kita-nihchaya`,hindi_meaning:" !    ,     ;   ,           ",meaning:"O son of Kunti, either you will be killed on the battlefield and attain the heavenly planets, or you will conquer and enjoy the earthly kingdom. Therefore, get up with determination and fight."},{id:85,verse_number:38,chapter_number:2,text:`     |
     ||-||`,transliteration:`sukha-dukhe same kitv lbhlbhau jayjayau
tato yuddhya yujyasva naiva ppam avpsyasi`,hindi_meaning:"-, -, -                 ",meaning:"Do thou fight for the sake of fighting, without considering happiness or distress, loss or gain, victory or defeatand by so doing you shall never incur sin."},{id:86,verse_number:39,chapter_number:2,text:`      |
      ||-||`,transliteration:`eh te bhihit skhye buddhir yoge tv im hiu
buddhy yukto yay prtha karma-bandha prahsyasi`,hindi_meaning:" !       ()     ,        ",meaning:"Thus far I have described this knowledge to you through analytical study. Now listen as I explain it in terms of working without fruitive results. O son of Pritha, when you act in such knowledge you can free yourself from the bondage of works."},{id:87,verse_number:40,chapter_number:2,text:`    |
     ||-||`,transliteration:`nehbhikrama-nho sti pratyavyo na vidyate
sv-alpam apy asya dharmasya tryate mahato bhayt`,hindi_meaning:"            ,         ",meaning:"In this endeavor there is no loss or diminution, and a little advancement on this path can protect one from the most dangerous type of fear."},{id:88,verse_number:41,chapter_number:2,text:`   |
   ||-||`,transliteration:`vyavasytmik buddhir ekeha kuru-nandana
bahu-hkh hy ananth cha buddhayo vyavasyinm`,hindi_meaning:" !        ,          ",meaning:"Those who are on this path are resolute in purpose, and their aim is one. O beloved child of the Kurus, the intelligence of those who are irresolute is many-branched."},{id:89,verse_number:42,chapter_number:2,text:`    |
    ||-||`,transliteration:`ym im puhpit vcha pravadanty avipahchita
veda-vda-rat prtha nnyad astti vdina`,hindi_meaning:" !                 ,     ",meaning:"Men of small knowledge are very much attached to the flowery words of the Vedas, which recommend various fruitive activities for elevation to heavenly planets, resultant good birth, power, and so forth."},{id:90,verse_number:43,chapter_number:2,text:`   |
   ||-||`,transliteration:`kmtmna svarga-par janma-karma-phala-pradm
kriy-viheha-bahul bhogaihvarya-gati prati`,hindi_meaning:"       ,     ,  -      ",meaning:"Being desirous of sense gratification and opulent life, they say that there is nothing more than this."},{id:91,verse_number:44,chapter_number:2,text:`  |
     ||-||`,transliteration:`bhogaihvarya-prasaktn taypahita-chetasm
vyavasytmik buddhi samdhau na vidhyate`,hindi_meaning:"         ,     ",meaning:"In the minds of those who are too attached to sense enjoyment and material opulence, and who are bewildered by such things, the resolute determination for devotional service to the Supreme Lord does not take place."},{id:92,verse_number:45,chapter_number:2,text:`    |
    ||-||`,transliteration:`trai-guya-vihay ved nistrai-guyo bhavrjuna
nirdvandvo nitya-sattva-stho niryoga-khema tmavn`,hindi_meaning:"   (, , )      !        ,     ,        -   ",meaning:"The Vedas deal mainly with the subject of the three modes of material nature. O Arjuna, become transcendental to these three modes. Be free from all dualities and from all anxieties for gain and safety, and be established in the self."},{id:93,verse_number:46,chapter_number:2,text:`    |
    ||-||`,transliteration:`yvn artha udapne sarvata samplutodake
tvn sarvehu vedehu brhmaasya vijnata`,hindi_meaning:"         ,               ",meaning:"All purposes served by a small well can at once be served by a great reservoir of water. Similarly, all the purposes of the Vedas can be served to one who knows the purpose behind them."},{id:94,verse_number:47,chapter_number:2,text:`    |
    ||-||`,transliteration:`karmay-evdhikras te m phalehu kadchana
m karma-phala-hetur bhr m te sago stvakarmai`,hindi_meaning:"      ,                     ",meaning:"You have a right to perform your prescribed duty, but you are not entitled to the fruits of action. Never consider yourself the cause of the results of your activities, and never be attached to not doing your duty."},{id:95,verse_number:48,chapter_number:2,text:`      |
      ||-||`,transliteration:`yoga-stha kuru karmi saga tyaktv dhanajaya
siddhy-asiddhyo samo bhtv samatva yoga uchyate`,hindi_meaning:" !      , -         ",meaning:"Perform your duty equipoised, O Arjuna, abandoning all attachment to success or failure. Such equanimity is called yoga."},{id:96,verse_number:49,chapter_number:2,text:`    |
    ||-||`,transliteration:`drea hy avara karma buddhi-yogd dhanajaya
buddhau haraam anvichchha kipa phala-hetava`,hindi_meaning:" !          ()       ,        ",meaning:"O Dhananjaya, keep all abominable activities far distant by devotional service, and in that consciousness surrender unto the Lord. Those who want to enjoy the fruits of their work are misers."},{id:97,verse_number:50,chapter_number:2,text:`    |
     ||-||`,transliteration:`buddhi-yukto jahtha ubhe sukita-duhkite
tasmd yogya yujyasva yoga karmasu kauhalam`,hindi_meaning:"     ,                    ",meaning:"A man engaged in devotional service rids himself of both good and bad actions even in this life. Therefore strive for yoga, which is the art of all work."},{id:98,verse_number:51,chapter_number:2,text:`      |
   ||-||`,transliteration:`karma-ja buddhi-yukt hi phala tyaktv manhia
janma-bandha-vinirmukt pada gachchhanty anmayam`,hindi_meaning:"                       ,    ",meaning:"By thus engaging in devotional service to the Lord, great sages or devotees free themselves from the results of work in the material world. In this way they become free from the cycle of birth and death and attain the state beyond all miseries [by going back to Godhead]."},{id:99,verse_number:52,chapter_number:2,text:`    |
      ||-||`,transliteration:`yad te moha-kalila buddhir vyatitarihyati
tad gantsi nirveda hrotavyasya hrutasya cha`,hindi_meaning:"       ,           ",meaning:"When your intelligence has passed out of the dense forest of delusion, you shall become indifferent to all that has been heard and all that is to be heard."},{id:100,verse_number:53,chapter_number:2,text:`     |
   ||-||`,transliteration:`hruti-vipratipann te yad sthsyati nihchal
samdhv achal buddhis tad yogam avpsyasi`,hindi_meaning:" !                 ,      ",meaning:"When your mind is no longer disturbed by the flowery language of the Vedas, and when it remains fixed in the trance of self-realization, then you will have attained the divine consciousness."},{id:101,verse_number:54,chapter_number:2,text:`  |
     |
      ||-||`,transliteration:`arjuna uvcha
sthita-prajasya k bhh samdhi-sthasya kehava
sthita-dh ki prabhheta kim sta vrajeta kim`,hindi_meaning:"  :  !      ,    ,    ?    ,       ?",meaning:"Arjuna said: O Krishna, what are the symptoms of one whose consciousness is thus merged in transcendence? How does he speak, and what is his language? How does he sit, and how does he walk?"},{id:102,verse_number:55,chapter_number:2,text:` |
    |
   ||-||`,transliteration:`hr bhagavn uvcha
prajahti yad kmn sarvn prtha mano-gatn
tmany evtman tuha sthita-prajas tadochyate`,hindi_meaning:"   :  !               ,     ",meaning:"The Supreme Personality of Godhead said: O Partha, when a man gives up all varieties of desire for sense gratification, which arise from mental concoction, and when his mind, thus purified, finds satisfaction in the self alone, then he is said to be in pure transcendental consciousness."},{id:103,verse_number:56,chapter_number:2,text:`   |
  ||-||`,transliteration:`dukhehv anudvigna-man sukhehu vigata-spiha
vta-rga-bhaya-krodha sthita-dhr munir uchyate`,hindi_meaning:"     ,     ,  ,      ,    ",meaning:"One who is not disturbed in mind even amidst the threefold miseries or elated when there is happiness, and who is free from attachment, fear and anger, is called a sage of steady mind."},{id:104,verse_number:57,chapter_number:2,text:`   |
      ||-||`,transliteration:`ya sarvatrn abhisnehas tat tat prpya hubhhubham
nbhinandati na dvehi tasya praj pratihhit`,hindi_meaning:"      , -    ,     ",meaning:"In the material world, one who is unaffected by whatever good or evil he may obtain, neither praising it nor despising it, is firmly fixed in perfect knowledge."},{id:105,verse_number:58,chapter_number:2,text:`     |
   ||-||`,transliteration:`yad saharate chya krmo gnva sarvaha
indriyndriyrthebyas tasya praj pratihhit`,hindi_meaning:"     -  ,         ,    ",meaning:"One who is able to withdraw his senses from sense objects, as the tortoise draws its limbs within the shell, is firmly fixed in perfect consciousness."},{id:106,verse_number:59,chapter_number:2,text:`    |
     ||-||`,transliteration:`vihay vinivartante nirhrasya dehina
rasa-varja raso py asya para dihv nivartate`,hindi_meaning:"-         ,                 ",meaning:"Though the embodied soul may be restricted from sense enjoyment, the taste for sense objects remains. But, ceasing such engagements by experiencing a higher taste, he is fixed in consciousness."},{id:107,verse_number:60,chapter_number:2,text:`     |
     ||-||`,transliteration:`yatato hy api kaunteya puruhasya vipahchita
indriyi pramthni haranti prasabha mana`,hindi_meaning:" !             ",meaning:"The senses are so strong and impetuous, O Arjuna, that they forcibly carry away the mind even of a man of discrimination who is endeavoring to control them."},{id:108,verse_number:61,chapter_number:2,text:`      |
      ||-||`,transliteration:`tni sarvi sayamya yukta sta mat-para
vahe hi yasyendriyi tasya praj pratihhit`,hindi_meaning:" !            ,    ",meaning:"One who restrains his senses, keeping them under full control, and fixes his consciousness upon Me, is known as a man of steady intelligence."},{id:109,verse_number:62,chapter_number:2,text:`   |
   ||-||`,transliteration:`dhyyato vihayn pusa sagas tehpajyate
sagt sajyate kma kmt krodho bhijyate`,hindi_meaning:" !       ,                    ",meaning:"While contemplating the objects of the senses, a person develops attachment for them, and from such attachment lust develops, and from lust anger arises."},{id:110,verse_number:63,chapter_number:2,text:`   |
  ||-||`,transliteration:`krodhd bhavati sammoha sammoht smiti-vibhrama
smiti-bhrahd buddhi-nho buddhi-nht praahyati`,hindi_meaning:"     ,      ,                      ",meaning:"From anger, complete delusion arises, and from delusion bewilderment of memory. When memory is bewildered, intelligence is lost, and when intelligence is lost one falls down again into the material pool."},{id:111,verse_number:64,chapter_number:2,text:`  |
  ||-||`,transliteration:`rga-dveha-vimuktais tu vihayn indriyaih charan
tma-vahyair vidheytm prasdam adhigachchhati`,hindi_meaning:"       , -   ,      ,     ",meaning:"But a person free from all attachment and aversion and able to control his senses through regulative principles of freedom can obtain the complete mercy of the Lord."},{id:112,verse_number:65,chapter_number:2,text:`   |
    ||-||`,transliteration:`prasde sarva-dukhn hnir asyopajyate
prasanna-chetaso hy hu buddhi paryavatihhate`,hindi_meaning:"                     ",meaning:"For one thus satisfied [in Krishna consciousness], the threefold miseries of material existence exist no longer; in such satisfied consciousness, ones intelligence is soon well established."},{id:113,verse_number:66,chapter_number:2,text:`     |
     ||-||`,transliteration:`nsti buddhir ayuktasya na chyuktasya bhvan
na chbhvayata hntir ahntasya kuta sukham`,hindi_meaning:"      ,                       ?",meaning:"One who is not connected with the Supreme [in Krishna consciousness] can have neither transcendental intelligence nor a steady mind, without which there is no possibility of peace. And how can there be any happiness without peace?"},{id:114,verse_number:67,chapter_number:2,text:`    |
    ||-||`,transliteration:`indriy hi charat yan mano nuvidhyate
tad asya harati praj vyur nvam ivmbhasi`,hindi_meaning:"   ,          -  ,        ",meaning:"As a strong wind sweeps away a boat on the water, even one of the roaming senses on which the mind focuses can carry away a mans intelligence."},{id:115,verse_number:68,chapter_number:2,text:`    |
   ||-||`,transliteration:`tasmd yasya mah-bho nigihtni sarvaha
indriyndriyrthebyas tasya praj pratihhit`,hindi_meaning:" !       -     ,    ",meaning:"Therefore, O mighty-armed Arjuna, one whose senses are restrained from their objects is certainly of steady intelligence."},{id:116,verse_number:69,chapter_number:2,text:`      |
       ||-||`,transliteration:`y nih sarva-bhtn tasy jgarti sayam
yasy jgrati bhtni s nih pahyato mune`,hindi_meaning:"      ,               ,       ",meaning:"What is night for all beings is the time of awakening for the self-controlled; and the time of awakening for all beings is night for the introspective sage."},{id:117,verse_number:70,chapter_number:2,text:`
   |
   
    ||-||`,transliteration:`pryamam achala-pratihha
samudram pa pravihanti yadvat
tadvat km ya pravihanti sarve
sa hntim pnoti na kma-km`,hindi_meaning:"       -   ,            ,     ",meaning:"A person who is not disturbed by the incessant flow of desiresthat enter like rivers into the ocean, which is ever being filled but is always stillcan alone achieve peace, and not the man who strives to satisfy such desires."},{id:118,verse_number:71,chapter_number:2,text:`    |
    ||-||`,transliteration:`vihya kmn ya sarvn pumnh charati nispiha
nirmamo nirahakra sa hntim adhigachchhati`,hindi_meaning:" !      ,      ,     ",meaning:"A person who has given up all desires for sense gratification, who lives free from desires, who has given up all sense of proprietorship and is devoid of false egohe alone can attain real peace."},{id:119,verse_number:72,chapter_number:2,text:`       |
  ||-||`,transliteration:`eh brhm sthiti prtha nain prpya vimuhyati
sthitvsym anta-kle pi brahma-nirvam ichchhati`,hindi_meaning:" !                 ,    ,  -    ",meaning:"That is the way of the spiritual and godly life, after attaining which a man is not bewildered. If one is thus situated even at the hour of death, one can enter into the kingdom of God."}]},{id:3,name:"",name_meaning:"The Yoga of Action",chapter_number:3,verses_count:43,summary:"Krishna elaborates on Karma Yoga, the path of selfless action. He emphasizes that performing one's duties without attachment to the results is the key to spiritual progress and liberation.",verses:[{id:120,verse_number:1,chapter_number:3,text:`  |
    |
      ||-||`,transliteration:`arjuna uvcha
jyyas chet karmaas te mat buddhir janrdana
tat ki karmai ghore m niyojayasi kehava`,hindi_meaning:"   :       ,                             ",meaning:"Arjuna said: O Janardana, O Kesava, why do You want to engage me in this ghastly warfare, if You think that intelligence is better than fruitive work?"},{id:121,verse_number:2,chapter_number:3,text:`     |
     ||-||`,transliteration:`vymihreeva vkyena buddhi mohayasva me
tad eka vada nihchitya yena hreyo ham pnuym`,hindi_meaning:"     ,  ,    ;           ",meaning:"My intelligence is bewildered by Your equivocal instructions. Therefore, please tell me decisively which will be most beneficial for me."},{id:122,verse_number:3,chapter_number:3,text:` |
     |
    ||-||`,transliteration:`hr bhagavn uvcha
loke smin dvi-vidh nihh pur prokt maynagha
jna-yogena skhyn karma-yogena yoginm`,hindi_meaning:"     () ,      ,                    ",meaning:"The Supreme Personality of Godhead said: O sinless Arjuna, I have already explained that there are two classes of men who try to realize the self. Some are inclined to understand it by empirical, philosophical speculation, and others by devotional service."},{id:123,verse_number:4,chapter_number:3,text:`   |
     ||-||`,transliteration:`na karmam anrambhn naihkarmya puruho hnute
na cha sannyasand eva siddhi samadhigachchhati`,hindi_meaning:" !      -, -  -  ,    !    ",meaning:"Not by merely abstaining from work can one achieve freedom from reaction, nor by renunciation alone can one attain perfection."},{id:124,verse_number:5,chapter_number:3,text:`     |
     ||-||`,transliteration:`na hi kahchit khaam api jtu tihhaty akarma-kit
kryate hy avaha karma sarva prakiti-jair guai`,hindi_meaning:" !     (-)   ,  -      ,     ",meaning:"Everyone is forced to act helplessly according to the qualities he has acquired from the modes of material nature; therefore no one can refrain from doing something, not even for a moment."},{id:125,verse_number:6,chapter_number:3,text:`      |
    ||-||`,transliteration:`karmendriyi sayamya ya ste manas smaran
indriyrthn vimhtm mithychra sa uchyate`,hindi_meaning:"  ,      ()         ()     ",meaning:"One who restrains the senses of action but whose mind dwells on sense objects certainly deludes himself and is called a pretender."},{id:126,verse_number:7,chapter_number:3,text:`   |
    ||-||`,transliteration:`yas tv indriyi manas niyamyrabhate rjuna
karmendriyai karma-yogam asakta sa vihihyate`,hindi_meaning:"         ,            ",meaning:"On the other hand, if a sincere person tries to control the active senses by the mind and begins karma-yoga [in Krishna consciousness] without attachment, he is by far superior."},{id:127,verse_number:8,chapter_number:3,text:`       |
     ||-||`,transliteration:`niyata kuru karma tva karma jyyo hy akarmaa
harra-ytrpi cha te na prasiddhyed akarmaa`,hindi_meaning:" !   ,          ;    ",meaning:"Perform your prescribed duty, for doing so is better than not working. One cannot even maintain ones physical body without work."},{id:128,verse_number:9,chapter_number:3,text:`   |
     ||-||`,transliteration:`yajrtht karmao nyatra loko ya karma-bandhana
tad-artha karma kaunteya mukta-saga samchara`,hindi_meaning:"          ,    ;             ",meaning:"Work done as a sacrifice for Vishnu has to be performed; otherwise work causes bondage in this material world. Therefore, O son of Kunti, perform your prescribed duties for His satisfaction, and in that way you will always remain free from bondage."},{id:129,verse_number:10,chapter_number:3,text:`     |
   ||-||`,transliteration:`saha-yaj praj sihv purovcha prajpati
anena prasavihyadhvam eha vo stv iha-kma-dhuk`,hindi_meaning:"              ,        , ,              ",meaning:"In the beginning of creation, the Lord of all creatures sent forth generations of men and demigods, along with sacrifices for Vishnu, and blessed them by saying, Be thou happy by this yajna [sacrifice] because its performance will bestow upon you everything desirable for living happily and achieving liberation."},{id:130,verse_number:11,chapter_number:3,text:`     |
    ||-||`,transliteration:`devn bhvayatnena te dev bhvayantu va
paraspara bhvayanta hreya param avpsyatha`,hindi_meaning:" !    ,       ,           ?",meaning:"The demigods, being pleased by sacrifices, will also please you, and thus, by cooperation between men and demigods, prosperity will reign for all."},{id:131,verse_number:12,chapter_number:3,text:`     |
      ||-||`,transliteration:`ihn bhogn hi vo dev dsyante yaja-bhvit
tair dattn apradyaibhyo yo bhukte stena eva sa`,hindi_meaning:"          ,    ()          ",meaning:"In charge of the various necessities of life, the demigods, being satisfied by the performance of yajna [sacrifice], will supply all necessities to you. But he who enjoys such gifts without offering them to the demigods in return is certainly a thief."},{id:132,verse_number:13,chapter_number:3,text:`    |
      ||-||`,transliteration:`yaja-hihhina santo muchyante sarva-kilbihai
bhujate te tv agha pp ye pachanty tma-krat`,hindi_meaning:"      ,    ,          ",meaning:"The devotees of the Lord are released from all kinds of sins because they eat food which is offered first for sacrifice. Others, who prepare food for personal sense enjoyment, verily eat only sin."},{id:133,verse_number:14,chapter_number:3,text:`   |
    ||-||`,transliteration:`annd bhavanti bhtni parjanyd anna-sambhava
yajd bhavati parjanyo yaja karma-samudbhava`,hindi_meaning:" , ,      , , ,    ",meaning:"All living bodies subsist on food grains, which are produced from rains. Rains are produced by performance of yajna [sacrifice], and yajna is born of prescribed duties."},{id:134,verse_number:15,chapter_number:3,text:`    |
     ||-||`,transliteration:`karma brahmodbhava viddhi brahmkhara-samudbhavam
tasmt sarva-gata brahma nitya yaje pratihhitam`,hindi_meaning:" ,                ",meaning:"Regulated activities are prescribed in the Vedas, and the Vedas are directly manifested from the Supreme Personality of Godhead. Consequently the all-pervading Transcendence is eternally situated in acts of sacrifice."},{id:135,verse_number:16,chapter_number:3,text:`     |
     ||-||`,transliteration:`eva pravartita chakra nnuvartayatha ya
aghyur indriyrmo mogha prtha sa jvati`,hindi_meaning:" !             ,         ",meaning:"My dear Arjuna, one who does not follow in human life the cycle of sacrifice thus established by the Vedas certainly leads a life full of sin. Living only for the satisfaction of the senses, such a person lives in vain."},{id:136,verse_number:17,chapter_number:3,text:`   |
      ||-||`,transliteration:`yas tv tma-ratir eva syd tma-tiptah cha mnava
tmany eva cha santuhas tasya krya na vidyate`,hindi_meaning:"                       ",meaning:"But for one who takes pleasure in the self, whose human life is one of self-realization, and who is satisfied in the self only, fully satiatedfor him there is no duty."},{id:137,verse_number:18,chapter_number:3,text:`     |
    ||-||`,transliteration:`naiva tasya kitenrtho nkiteneha kahchana
na chsya sarva-bhtehu kahchid artha-vyaphraya`,hindi_meaning:" !     ,              ?",meaning:"A self-realized man has no purpose to fulfill in the discharge of his prescribed duties, nor has he any reason not to perform such work. Nor has he any need to depend on any other living being."},{id:138,verse_number:19,chapter_number:3,text:`     |
    ||-||`,transliteration:`tasmd asakta satata krya karma samchara
asakto hy charan karma param pnoti pruha`,hindi_meaning:"      ,      ,             ",meaning:"Therefore, without being attached to the fruits of activities, one should act as a matter of duty, for by working without attachment one attains the Supreme."},{id:139,verse_number:20,chapter_number:3,text:`    |
  ||-||`,transliteration:`karmaaiva hi sasiddhim sthit janakdaya
loka-sagraham evpi sampahyan kartum arhasi`,hindi_meaning:" !                     ",meaning:"Kings such as Janaka attained perfection solely by performance of prescribed duties. Therefore, just for the sake of educating the people in general, you should perform your work."},{id:140,verse_number:21,chapter_number:3,text:`   |
    ||-||`,transliteration:`yad yad charati hrehhas tat tad evetaro jana
sa yat prama kurute lokas tad anuvartate`,hindi_meaning:" !           ;            ",meaning:"Whatever action a great man performs, common men follow. And whatever standards he sets by exemplary acts, all the world pursues."},{id:141,verse_number:22,chapter_number:3,text:`       |
     ||-||`,transliteration:`na me prthsti kartavya trihu lokehu kichana
nnavptam avptavya varta eva cha karmai`,hindi_meaning:" !         ,               ",meaning:"O son of Pritha, there is no work prescribed for Me within all the three planetary systems. Nor am I in want of anything, nor have I a need to obtain anythingand yet I am engaged in prescribed duties."},{id:142,verse_number:23,chapter_number:3,text:`      |
     ||-||`,transliteration:`yadi hy aha na varteya jtu karmay atandrita
mama vartmnuvartante manuhy prtha sarvaha`,hindi_meaning:"      ,           ",meaning:"For if I ever failed to engage in carefully performing prescribed duties, O Partha, certainly all men would follow My path."},{id:143,verse_number:24,chapter_number:3,text:`      |
     ||-||`,transliteration:`utsdeyur ime lok na kury karma ched aham
sakarasya cha kart sym upahanym im praj`,hindi_meaning:"             ,     ",meaning:"If I did not perform prescribed duties, all these worlds would be put to ruination. I would be the cause of creating unwanted population, and I would thereby destroy the peace of all living beings."},{id:144,verse_number:25,chapter_number:3,text:`     |
 ||-||`,transliteration:`sakt karmay avidvso yath kurvanti bhrata
kuryd vidvs tathsaktah chikrhur loka-sagraham`,hindi_meaning:"             ",meaning:"As the ignorant perform their duties with attachment to results, the learned may similarly act, but without attachment, for the sake of leading people on the right path."},{id:145,verse_number:26,chapter_number:3,text:`    |
   ||-||`,transliteration:`na buddhi-bheda janayed ajn karma-saginm
johayet sarva-karmi vidvn yukta samcharan`,hindi_meaning:"                      ?",meaning:"So as not to disrupt the minds of ignorant men attached to the fruitive results of prescribed duties, a learned person should not induce them to stop work. Rather, by working in the spirit of devotion, he should engage them in all sorts of activities [for the gradual development of Krishna consciousness]."},{id:146,verse_number:27,chapter_number:3,text:`     |
   ||-||`,transliteration:`prakite kriyamni guai karmi sarvaha
ahakra-vimhtm kartham iti manyate`,hindi_meaning:" !    ,     ;   ,           ",meaning:"The spirit soul bewildered by the influence of false ego thinks himself the doer of activities that are in actuality carried out by the three modes of material nature."},{id:147,verse_number:28,chapter_number:3,text:`   |
       ||-||`,transliteration:`tattva-vit tu mah-bho gua-karma-vibhgayo
gu guehu vartanta iti matv na sajjate`,hindi_meaning:"-, -, -                 ",meaning:"One who is in knowledge of the Absolute Truth, O mighty-armed, does not engage himself in the senses and sense gratification, knowing well the differences between work in devotion and work for fruitive results."},{id:148,verse_number:29,chapter_number:3,text:`   |
   ||-||`,transliteration:`prakiter gua-sammh sajjante gua-karmasu
tn akitsna-vido mandn kitsna-vin na vichlayet`,hindi_meaning:" !       ()     ,        ",meaning:"Bewildered by the modes of material nature, the ignorant fully engage themselves in material activities and become attached. But the wise should not unsettle them, although these duties are inferior due to the performers lack of knowledge."},{id:149,verse_number:30,chapter_number:3,text:`    |
    ||-||`,transliteration:`mayi sarvi karmi sannyasydhytma-chetas
nirhr nirmamo bhtv yudhyasva vigata-jvara`,hindi_meaning:"            ,         ",meaning:"Therefore, O Arjuna, surrendering all your works unto Me, with full knowledge of Me, without desires for profit, with no claims to proprietorship, and free from lethargy, fight."},{id:150,verse_number:31,chapter_number:3,text:`     |
    ||-||`,transliteration:`ye me matam ida nityam anutihhanti mnav
hraddhvanto nasyanto muchyante te pi karmabhi`,hindi_meaning:" !        ,          ",meaning:"Those persons who execute their duties according to My injunctions and who follow this teaching faithfully, without envy, become free from the bondage of fruitive actions."},{id:151,verse_number:32,chapter_number:3,text:`     |
  ||-||`,transliteration:`ye tv etad abhyasyanto nnutihhanti me matam
sarva-jna-vimhs tn viddhi nahn achetasa`,hindi_meaning:" !                 ,     ",meaning:"But those who, out of envy, disregard these teachings and do not follow them are to be considered bereft of all knowledge, befooled, and ruined in their endeavors for perfection."},{id:152,verse_number:33,chapter_number:3,text:`    |
      ||-||`,transliteration:`sadiha chehate svasy prakiter jnavn api
prakiti ynti bhtni nigraha ki karihyati`,hindi_meaning:"       ,     ,  -      ",meaning:"Even a man of knowledge acts according to his own nature, for everyone follows the nature he has acquired from the three modes. What can repression accomplish?"},{id:153,verse_number:34,chapter_number:3,text:`   |
    ||-||`,transliteration:`indriyasyendriyasyrthe rga-dvehau vyavasthitau
tayor na vaham gachchhet tau hy asya paripanthinau`,hindi_meaning:"         ,     ",meaning:"There are principles to regulate attachment and aversion pertaining to the senses and their objects. One should not come under the control of such attachment and aversion, because they are stumbling blocks on the path of self-realization."},{id:154,verse_number:35,chapter_number:3,text:`   |
     ||-||`,transliteration:`hreyn sva-dharmo vigua para-dharmt sv-anuhhitt
sva-dharme nidhana hreya para-dharmo bhayvaha`,hindi_meaning:"   (, , )      !        ,     ,        -   ",meaning:"It is far better to discharge ones prescribed duties, even though faultily, than anothers duties perfectly. Destruction in the course of performing ones own duty is better than engaging in anothers duties, for to follow anothers path is dangerous."},{id:155,verse_number:36,chapter_number:3,text:`  |
      |
    ||-||`,transliteration:`arjuna uvcha
atha kena prayukto ya ppa charati pruha
anichchhann api vrheya bald iva niyojita`,hindi_meaning:"         ,               ",meaning:"Arjuna said: O descendant of Vrishni, by what is one impelled to sinful acts, even unwillingly, as if engaged by force?"},{id:156,verse_number:37,chapter_number:3,text:` |
     |
    ||-||`,transliteration:`hr bhagavn uvcha
kma eha krodha eha rajo-gua-samudbhava
mahhano mah-ppm viddhy enam iha vairiam`,hindi_meaning:"      ,                     ",meaning:"The Supreme Personality of Godhead said: It is lust only, Arjuna, which is born of contact with the material mode of passion and later transformed into wrath, and which is the all-devouring sinful enemy of this world."},{id:157,verse_number:38,chapter_number:3,text:`    |
   ||-||`,transliteration:`dhmenvriyate vahnir yathdarho malena cha
yatholbenvito garbhas tath tenedam vitam`,hindi_meaning:" !      , -         ",meaning:"As fire is covered by smoke, as a mirror is covered by dust, or as the embryo is covered by the womb, the living entity is similarly covered by different degrees of this lust."},{id:158,verse_number:39,chapter_number:3,text:`    |
    ||-||`,transliteration:`vita jnam etena jnino nitya-vairi
kma-rpea kaunteya duhprenalena cha`,hindi_meaning:" !          ()       ,        ",meaning:"Thus the wise living entitys pure consciousness becomes covered by his eternal enemy in the form of lust, which is never satisfied and which burns like fire."},{id:159,verse_number:40,chapter_number:3,text:`   |
   ||-||`,transliteration:`indriyi mano buddhir asydhihhnam uchyate
etair vimohayaty eha jnam vitya dehinam`,hindi_meaning:"     ,                    ",meaning:"The senses, the mind and the intelligence are the sitting places of this lust. Through them lust covers the real knowledge of the living entity and bewilders him."},{id:160,verse_number:41,chapter_number:3,text:`   |
    ||-||`,transliteration:`tasmt tvam indriyy dau niyamya bharatarhabha
ppmna prajahi hy ena jna-vijna-nhanam`,hindi_meaning:"                       ,    ",meaning:"Therefore, O Arjuna, best of the Bharatas, in the very beginning curb this great symbol of sin [lust] by regulating the senses, and slay this destroyer of knowledge and self-realization."},{id:161,verse_number:42,chapter_number:3,text:`    |
      ||-||`,transliteration:`indriyi pary hur indriyebhya para mana
manasas tu par buddhir yo buddhe paratas tu sa`,hindi_meaning:"       ,           ",meaning:"The working senses are superior to dull matter; mind is higher than the senses; intelligence is still higher than the mind; and he [the soul] is even higher than the intelligence."},{id:162,verse_number:43,chapter_number:3,text:`     |
     ||-||`,transliteration:`eva buddhe para buddhv sastabhytmnam tman
jahi hatru mah-bho kma-rpa dursadam`,hindi_meaning:" !                 ,      ",meaning:"Thus knowing oneself to be transcendental to the material senses, mind and intelligence, O mighty-armed Arjuna, one should steady the mind by deliberate spiritual intelligence [Krishna consciousness] and thusby spiritual strengthconquer this insatiable enemy known as lust."}]},{id:4,name:"",name_meaning:"The Yoga of Knowledge and the Renunciation of Action",chapter_number:4,verses_count:42,summary:"Krishna reveals the ancient history of this divine knowledge, explaining that He has taught it in previous ages. He discusses the nature of divine incarnations (avatars) and the importance of finding a true spiritual master.",verses:[{id:163,verse_number:1,chapter_number:4,text:` |
    |
   ||-||`,transliteration:`hr bhagavn uvcha
ima vivasvate yoga proktavn aham avyayam
vivasvn manave prha manur ikhvkave bravt`,hindi_meaning:"  :  !      ,    ,    ?    ,       ?",meaning:"The Personality of Godhead, Lord Sri Krishna, said: I instructed this imperishable science of yoga to the sun-god, Vivasvan, and Vivasvan instructed it to Manu, the father of mankind, and Manu in turn instructed it to Iksvaku."},{id:164,verse_number:2,chapter_number:4,text:`    |
      ||-||`,transliteration:`eva parampar-prptam ima rjarhayo vidu
sa kleneha mahat yogo naha parantapa`,hindi_meaning:"   :  !               ,     ",meaning:"This supreme science was thus received through the chain of disciplic succession, and the saintly kings understood it in that way. But in course of time the succession was broken, and therefore the science as it is appears to be lost."},{id:165,verse_number:3,chapter_number:4,text:`       |
      ||-||`,transliteration:`sa evya may te dya yoga prokta purtana
bhakto si me sakh cheti rahasya hy etad uttamam`,hindi_meaning:"     ,     ,  ,      ,    ",meaning:"That very ancient science of the relationship with the Supreme is today told by Me to you because you are My devotee as well as My friend and can therefore understand the transcendental mystery of this science."},{id:166,verse_number:4,chapter_number:4,text:`  |
      |
   ||-||`,transliteration:`arjuna uvcha
apara bhavato janma para janma vivasvata
katham etad vijny tvam dau proktavn iti`,hindi_meaning:"      , -    ,     ",meaning:"Arjuna said: The sun-god Vivasvan is senior by birth to You. How am I to understand that in the beginning You instructed this science to him?"},{id:167,verse_number:5,chapter_number:4,text:` |
      |
       ||-||`,transliteration:`hr bhagavn uvcha
bahni me vyattni janmni tava chrjuna
tny aha veda sarvi na tva vettha parantapa`,hindi_meaning:"     -  ,         ,    ",meaning:"The Personality of Godhead said: Many, many births both you and I have passed. I can remember all of them, but you cannot, O subduer of the enemy!"},{id:168,verse_number:6,chapter_number:4,text:`    |
   ||-||`,transliteration:`ajo pi sann avyaytm bhtnm hvaro pi san
prakiti svm adhihhya sambhavmy tma-myay`,hindi_meaning:"-         ,                 ",meaning:"Although I am unborn and My transcendental body never deteriorates, and although I am the Lord of all living entities, I still appear in every millennium in My original transcendental form."},{id:169,verse_number:7,chapter_number:4,text:`      |
   ||-||`,transliteration:`yad yad hi dharmasya glnir bhavati bhrata
abhyutthnam adharmasya tadtmna sijmy aham`,hindi_meaning:" !             ",meaning:"Whenever and wherever there is a decline in religious practice, O descendant of Bharata, and a predominant rise of irreligionat that time I descend Myself."},{id:170,verse_number:8,chapter_number:4,text:`     |
    ||-||`,transliteration:`paritrya sdhn vinhya cha duhkitm
dharma-sasthpanrthya sambhavmi yuge yuge`,hindi_meaning:" !            ,    ",meaning:"To deliver the pious and to annihilate the miscreants, as well as to reestablish the principles of religion, I Myself appear, millennium after millennium."},{id:171,verse_number:9,chapter_number:4,text:`        |
 h     ||-||`,transliteration:`janma karma cha me divyam eva yo vetti tattvata
tyaktv deha punar janma naiti mm eti so rjuna`,hindi_meaning:" !       ,                    ",meaning:"One who knows the transcendental nature of My appearance and activities does not, upon leaving the body, take his birth again in this material world, but attains My eternal abode, O Arjuna."},{id:172,verse_number:10,chapter_number:4,text:`   |
    ||-||`,transliteration:`vta-rga-bhaya-krodh man-may mm uphrit
bahavo jna-tapas pt mad-bhvam gat`,hindi_meaning:"     ,      ,                      ",meaning:"Being freed from attachment, fear and anger, being fully absorbed in Me and taking refuge in Me, many, many persons in the past became purified by knowledge of Meand thus they all attained transcendental love for Me."},{id:173,verse_number:11,chapter_number:4,text:`      |
     ||-||`,transliteration:`ye yath m prapadyante ts tathaiva bhajmy aham
mama vartmnuvartante manuhy prtha sarvaha`,hindi_meaning:"       , -   ,      ,     ",meaning:"As all surrender unto Me, I reward them accordingly. Everyone follows My path in all respects, O son of Pritha."},{id:174,verse_number:12,chapter_number:4,text:`      |
      ||-||`,transliteration:`kkhanta karma siddhi yajanta iha devat
khipra hi mnuhe loke siddhir bhavati karma-j`,hindi_meaning:"                     ",meaning:"Men in this world desire success in fruitive activities, and therefore they worship the demigods. Quickly, of course, men get results from fruitive work in this world."},{id:175,verse_number:13,chapter_number:4,text:`    |
    ||-||`,transliteration:`chtur-varya may siha gua-karma-vibhgaha
tasya kartram api m viddhy akartram avyayam`,hindi_meaning:"      ,                       ?",meaning:"According to the three modes of material nature and the work associated with them, the four divisions of human society are created by Me. And although I am the creator of this system, you should know that I am yet the nondoer, being unchangeable."},{id:176,verse_number:14,chapter_number:4,text:`        |
      ||-||`,transliteration:`na m karmi limpanti na me karma-phale spih
iti m yo bhijnti karmabhir na sa badhyate`,hindi_meaning:"   ,          -  ,        ",meaning:"There is no work that affects Me; nor do I aspire for the fruits of action. One who understands this truth about Me also does not become entangled in the fruitive reactions of work."},{id:177,verse_number:15,chapter_number:4,text:`      |
      ||-||`,transliteration:`eva jtv kita karma prvair api mumukhubhi
kuru karmaiva tasmt tva prvai prvatara kitam`,hindi_meaning:" !       -     ,    ",meaning:"All the liberated souls in ancient times acted with this understanding of My transcendental nature. Therefore you should perform your duty, following in their footsteps."},{id:178,verse_number:16,chapter_number:4,text:`     |
     ||-||`,transliteration:`ki karma kim akarmeti kavayo py atra mohit
tat te karma pravakhymi yaj jtv mokhyase hubht`,hindi_meaning:"      ,               ,       ",meaning:"Even the intelligent are bewildered in determining what is action and what is inaction. Now I shall explain to you what action is, knowing which you shall be liberated from all misfortune."},{id:179,verse_number:17,chapter_number:4,text:`      |
     ||-||`,transliteration:`karmao hy api boddhavya boddhavya cha vikarmaa
akarmaah cha boddhavya gahan karmao gati`,hindi_meaning:"       -   ,            ,     ",meaning:"The intricacies of action are very hard to understand. Therefore one should know properly what action is, what forbidden action is, and what inaction is."},{id:180,verse_number:18,chapter_number:4,text:`      |
     ||-||`,transliteration:`karmay akarma ya pahyed akarmai cha karma ya
sa buddhimn manuhyehu sa yukta kitsna-karma-kit`,hindi_meaning:" !      ,      ,     ",meaning:"One who sees inaction in action, and action in inaction, is intelligent among men, and he is in the transcendental position, although engaged in all sorts of activities."},{id:181,verse_number:19,chapter_number:4,text:`    |
    ||-||`,transliteration:`yasya sarve samrambh kma-sakalpa-varjit
jngni-dagdha-karma tam hu paita budh`,hindi_meaning:" !                 ,    ,  -    ",meaning:"One is understood to be in full knowledge whose every endeavor is devoid of desire for sense gratification. He is said by sages to be a worker for whom the reactions of work have been burned up by the fire of perfect knowledge."},{id:182,verse_number:20,chapter_number:4,text:`    |
    ||-||`,transliteration:`tyaktv karma-phalsaga nitya-tipto nirhraya
karmay abhipravitto pi naiva kichit karoti sa`,hindi_meaning:"   :       ,                             ",meaning:"Abandoning all attachment to the results of his activities, ever satisfied and independent, he performs no fruitive action, although engaged in all kinds of undertakings."},{id:183,verse_number:21,chapter_number:4,text:`  |
     ||-||`,transliteration:`nirhr yata-chitttm tyakta-sarva-parigraha
hrra kevala karma kurvan npnoti kilbiham`,hindi_meaning:"     ,  ,    ;           ",meaning:"Such a man of understanding acts with mind and intelligence perfectly controlled, gives up all sense of proprietorship over his possessions, and acts only for the bare necessities of life. Thus working, he is not affected by sinful reactions."},{id:184,verse_number:22,chapter_number:4,text:`   |
      ||-||`,transliteration:`yadichchh-lbha-santuho dvandvtto vimatsara
sama siddhv asiddhau cha kitvpi na nibadhyate`,hindi_meaning:"     () ,      ,                    ",meaning:"He who is satisfied with gain which comes of its own accord, who is free from duality and does not envy, who is steady in both success and failure, is never entangled, although performing actions."},{id:185,verse_number:23,chapter_number:4,text:`   |
    ||-||`,transliteration:`gata-sagasya muktasya jnvasthita-chetasa
yajycharata karma samagra pravilyate`,hindi_meaning:" !      -, -  -  ,    !    ",meaning:"The work of a man who is unattached to the modes of material nature and who is fully situated in transcendental knowledge merges entirely into transcendence."},{id:186,verse_number:24,chapter_number:4,text:`     |
    ||-||`,transliteration:`brahmrpaa brahma havir brahmgnau brahma hutam
brahmaiva tena gantavya brahma-karma-samdhin`,hindi_meaning:" !     (-)   ,  -      ,     ",meaning:"A person who is fully absorbed in Krishna consciousness is sure to attain the spiritual kingdom because of his full contribution to spiritual activities, in which the consummation is absolute and that which is offered is of the same spiritual nature."},{id:187,verse_number:25,chapter_number:4,text:`    |
   ||-||`,transliteration:`daivam evpare yaja yogina paryupsate
brahmgnv apare yaja yajenaivopajuhvati`,hindi_meaning:"  ,      ()         ()     ",meaning:"Some yogis perfectly worship the demigods by offering different sacrifices to them, and some of them offer sacrifices in the fire of the Supreme Brahman."},{id:188,verse_number:26,chapter_number:4,text:`   |
   ||-||`,transliteration:`hrotrdnndriyy anye sayamgnihu juhvati
habddn vihayn anya indriygnihu juhvati`,hindi_meaning:"         ,            ",meaning:"Some [the unadulterated brahmacharis] sacrifice the hearing process and the senses in the fire of mental control, and others [the regulated householders] sacrifice the objects of the senses in the fire of the senses."},{id:189,verse_number:27,chapter_number:4,text:`   |
   ||-||`,transliteration:`sarvndriya-karmi pra-karmi chpare
tma-sayama-yoggnau juhvati jna-dpite`,hindi_meaning:" !   ,          ;    ",meaning:"Others, who are interested in achieving self-realization through control of the mind and senses, offer the functions of all the senses, and of the life breath, as oblations into the fire of the controlled mind."},{id:190,verse_number:28,chapter_number:4,text:`  |
   ||-||`,transliteration:`dravya-yajs tapo-yaj yoga-yajs tathpare
svdhyya-jna-yajh cha yataya sahita-vrat`,hindi_meaning:"          ,    ;             ",meaning:"Having accepted strict vows, some become enlightened by sacrificing their possessions, and others by performing severe austerities, by practicing the yoga of eightfold mysticism, or by studying the Vedas to advance in transcendental knowledge."},{id:191,verse_number:29,chapter_number:4,text:`     |
   |
    ||-||`,transliteration:`apne juhvati pra pre pna tathpare
prpna-gat ruddhv pryma-parya
apare niyathr prn prehu juhvati`,hindi_meaning:"              ,        , ,              ",meaning:"Still others, who are inclined to the process of breath restraint to remain in trance, practice by offering the movement of the outgoing breath into the incoming, and the incoming breath into the outgoing, and thus at last remain in trance, stopping all breathing. Others, curtailing the eating process, offer the outgoing breath into itself as a sacrifice."},{id:192,verse_number:30,chapter_number:4,text:`   |
    ||-||`,transliteration:`sarve py ete yaja-vido yaja-khapita-kalmah
yaja-hihmita-bhujo ynti brahma santanam`,hindi_meaning:" !    ,       ,           ?",meaning:"All these performers who know the meaning of sacrifice become cleansed of sinful reactions, and, having tasted the nectar of the results of sacrifices, they advance toward the supreme eternal atmosphere."},{id:193,verse_number:31,chapter_number:4,text:"    ||-||",transliteration:"nya loko sty ayajasya kuto nya kuru-sattama",hindi_meaning:"          ,    ()          ",meaning:"O best of the Kuru dynasty, without sacrifice one can never live happily on this planet or in this life: what then of the next?"},{id:194,verse_number:32,chapter_number:4,text:`      |
    ||-||`,transliteration:`eva bahu-vidh yaj vitat brahmao mukhe
karma-jn viddhi tn sarvn eva jtv vimokhyase`,hindi_meaning:"      ,    ,          ",meaning:"All these different types of sacrifice are approved by the Vedas, and all of them are born of different types of work. Knowing them as such, you will become liberated."},{id:195,verse_number:33,chapter_number:4,text:`  |
     ||-||`,transliteration:`hreyn dravya-mayd yajj jna-yaja parantapa
sarva karmkhila prtha jne parisampyate`,hindi_meaning:" , ,      , , ,    ",meaning:"O chastiser of the enemy, the sacrifice performed in knowledge is better than the mere sacrifice of material possessions. After all, O son of Pritha, all sacrifices of work culminate in transcendental knowledge."},{id:196,verse_number:34,chapter_number:4,text:`    |
    ||-||`,transliteration:`tad viddhi praiptena pariprahnena sevay
upadekhyanti te jna jninas tattva-darhina`,hindi_meaning:" ,                ",meaning:"Just try to learn the truth by approaching a spiritual master. Inquire from him submissively and render service unto him. The self-realized souls can impart knowledge unto you because they have seen the truth."},{id:197,verse_number:35,chapter_number:4,text:`     |
    ||-||`,transliteration:`yaj jtv na punar moham eva ysyasi pava
yena bhtny ahehea drakhyasy tmany atho mayi`,hindi_meaning:" !             ,         ",meaning:"Having obtained real knowledge from a self-realized soul, you will never fall again into such illusion, for by this knowledge you will see that all living beings are but part of the Supreme, or, in other words, that they are Mine."},{id:198,verse_number:36,chapter_number:4,text:`     |
    ||-||`,transliteration:`api ched asi ppebhya sarvebhya ppa-kit-tama
sarva jna-plavenaiva vijina santarihyasi`,hindi_meaning:"                       ",meaning:"Even if you are considered to be the most sinful of all sinners, when you are situated in the boat of transcendental knowledge you will be able to cross over the ocean of miseries."},{id:199,verse_number:37,chapter_number:4,text:`  |
    ||-||`,transliteration:`yathaidhsi samiddho gnir bhasma-st kurute rjuna
jngni sarva-karmi bhasma-st kurute tath`,hindi_meaning:" !     ,              ?",meaning:"As a blazing fire turns firewood to ashes, O Arjuna, so does the fire of knowledge burn to ashes all reactions to material activities."},{id:200,verse_number:38,chapter_number:4,text:`      |
    ||-||`,transliteration:`na hi jnena sadiha pavitram iha vidyate
tat svaya yoga-sasiddha klentmani vindati`,hindi_meaning:"      ,      ,             ",meaning:"In this world, there is nothing so sublime and pure as transcendental knowledge. Such knowledge is the mature fruit of all mysticism. And one who has become accomplished in the practice of devotional service enjoys this knowledge within himself in due course of time."},{id:201,verse_number:39,chapter_number:4,text:`    |
    ||-||`,transliteration:`hraddhv labhate jna tat-para sayatendriya
jna labdhv par hntim achiredhigachchhati`,hindi_meaning:" !                     ",meaning:"A faithful man who is dedicated to transcendental knowledge and who subdues his senses is eligible to achieve such knowledge, and having achieved it he quickly attains the supreme spiritual peace."},{id:202,verse_number:40,chapter_number:4,text:`   |
       ||-||`,transliteration:`ajah chhraddadhnah cha sahaytm vinahyati
nya loko sti na paro na sukha sahaytmana`,hindi_meaning:" !           ;            ",meaning:"But ignorant and faithless persons who doubt the revealed scriptures do not attain God consciousness; they fall down. For the doubting soul there is happiness neither in this world nor in the next."},{id:203,verse_number:41,chapter_number:4,text:`  |
     ||-||`,transliteration:`yoga-sannyasta-karma jna-sachhinna-sahayam
tmavanta na karmi nibadhnanti dhanajaya`,hindi_meaning:" !         ,               ",meaning:"One who acts in devotional service, renouncing the fruits of his actions, and whose doubts have been destroyed by transcendental knowledge, is situated factually in the self. Thus he is not bound by the reactions of work, O conqueror of riches."},{id:204,verse_number:42,chapter_number:4,text:`   |
    ||-||`,transliteration:`tasmd ajna-sambhta hit-stha jnsintmana
chhittvaina sahaya yogam tihhottihha bhrata`,hindi_meaning:"      ,           ",meaning:"Therefore the doubts which have arisen in your heart out of ignorance should be slashed by the weapon of knowledge. Armed with yoga, O Bharata, stand and fight."}]},{id:5,name:"",name_meaning:"The Yoga of Renunciation of Action",chapter_number:5,verses_count:29,summary:"Arjuna is confused about whether it is better to renounce actions or perform them. Krishna clarifies that both paths can lead to liberation, but acting without attachment (Karma Yoga) is superior and more practical for most people.",verses:[{id:205,verse_number:1,chapter_number:5,text:`  |
      |
     ||-||`,transliteration:`arjuna uvcha
sannysa karma kiha punar yoga cha hasasi
yach chhreya etayor eka tan me brhi sunihchitam`,hindi_meaning:"             ,     ",meaning:"Arjuna said: O Krishna, first of all You ask me to renounce work, and then again You recommend work with devotion. Now will You kindly tell me definitely which of the two is more beneficial?"},{id:206,verse_number:2,chapter_number:5,text:` |
   |
   ||-||`,transliteration:`hr bhagavn uvcha
sannysa karma-yogah cha nihreyasa-karv ubhau
tayos tu karma-sannyst karma-yogo vihihyate`,hindi_meaning:"             ",meaning:"The Personality of Godhead replied: The renunciation of work and work in devotion are both good for liberation. But, of the two, work in devotional service is better than renunciation of work."},{id:207,verse_number:3,chapter_number:5,text:`        |
     ||-||`,transliteration:`jeya sa nitya-sannys yo na dvehi na kkhati
nirdvandvo hi mah-bho sukha bandht pramuchyate`,hindi_meaning:"                      ?",meaning:"One who neither hates nor desires the fruits of his activities is known to be always renounced. Such a person, free from all dualities, easily overcomes material bondage and is completely liberated, O mighty-armed Arjuna."},{id:208,verse_number:4,chapter_number:5,text:`     |
   ||-||`,transliteration:`skhya-yogau pithag bl pravadanti na pait
ekam apy sthita samyag ubhayor vindate phalam`,hindi_meaning:" !    ,     ;   ,           ",meaning:"Only the ignorant speak of devotional service [karma-yoga] as being different from the analytical study of the material world [Sankhya]. Those who are actually learned say that he who applies himself well to one of these paths achieves the results of both."},{id:209,verse_number:5,chapter_number:5,text:`     |
         ||-||`,transliteration:`yat skhyai prpyate sthna tad yogair api gamyate
eka skhya cha yoga cha ya pahyati sa pahyati`,hindi_meaning:"-, -, -                 ",meaning:"One who knows that the position reached by means of analytical study can also be attained by devotional service, and who therefore sees analytical study and devotional service to be on the same level, sees things as they are."},{id:210,verse_number:6,chapter_number:5,text:`   |
   ||-||`,transliteration:`sannysas tu mah-bho dukham ptum ayogata
yoga-yukto munir brahma na chiredhigachchhati`,hindi_meaning:" !       ()     ,        ",meaning:"Merely renouncing all activities yet not engaging in the devotional service of the Lord cannot make one happy. But a thoughtful person engaged in devotional service can achieve the Supreme without delay."},{id:211,verse_number:7,chapter_number:5,text:`    |
    ||-||`,transliteration:`yoga-yukto vihuddhtm vijittm jitendriya
sarva-bhttma-bhttm kurvann api na lipyate`,hindi_meaning:"            ,         ",meaning:"One who works in devotion, who is a pure soul, and who controls his mind and senses is dear to everyone, and everyone is dear to him. Though always working, such a man is never entangled."},{id:212,verse_number:8,chapter_number:5,text:`     |
 ||-||`,transliteration:`naiva kichit karomti yukto manyeta tattva-vit
pahya hivan spiha jighrann ahnan gachchhan svapan hvasan`,hindi_meaning:" !        ,          ",meaning:"A person in the divine consciousness, although engaged in seeing, hearing, touching, smelling, eating, moving about, sleeping and breathing, always knows within himself that he actually does nothing at all."},{id:213,verse_number:9,chapter_number:5,text:` |
    ||-||`,transliteration:`pralapan visijan gihann unmihan nimihann api
indriyndriyrthehu vartanta iti dhrayan`,hindi_meaning:" !                 ,     ",meaning:"Because while speaking, evacuating, receiving, or opening or closing his eyes, he always knows that only the material senses are engaged with their objects and that he is aloof from them."},{id:214,verse_number:10,chapter_number:5,text:`      |
     ||-||`,transliteration:`brahmay dhya karmi saga tyaktv karoti ya
lipyate na sa ppena padma-patram ivmbhas`,hindi_meaning:"       ,     ,  -      ",meaning:"One who performs his duty without attachment, surrendering the results unto the Supreme Lord, is unaffected by sinful action, as the lotus leaf is untouched by water."},{id:215,verse_number:11,chapter_number:5,text:`    |
     ||-||`,transliteration:`kyena manas buddhy kevalair indriyair api
yogina karma kurvanti saga tyaktvtma-huddhaye`,hindi_meaning:"         ,     ",meaning:"The yogis, abandoning attachment, act with body, mind, intelligence and even with the senses, only for the purpose of purification."},{id:216,verse_number:12,chapter_number:5,text:`     |
     ||-||`,transliteration:`yukta karma-phala tyaktv hntim pnoti naihhikm
ayukta kma-krea phale sakto nibadhyate`,hindi_meaning:"   (, , )      !        ,     ,        -   ",meaning:"The steadily devoted soul attains unadulterated peace because he offers the result of all activities to Me; whereas a person who is not in union with the Divine, who is greedy for the fruits of his labor, becomes entangled."},{id:217,verse_number:13,chapter_number:5,text:`     |
      ||-||`,transliteration:`sarva-karmi manas sannyasyste sukha vah
nava-dvre pure deh naiva kurvan na krayan`,hindi_meaning:"         ,               ",meaning:"When the embodied living being controls his nature and mentally renounces all actions, he resides happily in the city of nine gates [the material body], neither working nor causing work to be done."},{id:218,verse_number:14,chapter_number:5,text:`       |
    ||-||`,transliteration:`na kartitva na karmi lokasya sijati prabhu
na karma-phala-sayoga svabhvas tu pravartate`,hindi_meaning:"      ,                     ",meaning:"The embodied spirit, master of the city of his body, does not create activities, nor does he induce people to act, nor does he create the fruits of action. All this is enacted by the modes of material nature."},{id:219,verse_number:15,chapter_number:5,text:`      |
     ||-||`,transliteration:`ndatte kasyachit ppa na chaiva sukita vibhu
ajnenvita jna tena muhyanti jantava`,hindi_meaning:" !      , -         ",meaning:"Nor does the Supreme Lord assume anyones sinful or pious activities. Embodied beings, however, are bewildered because of the ignorance which covers their real knowledge."},{id:220,verse_number:16,chapter_number:5,text:`     |
   ||-||`,transliteration:`jnena tu tad ajna yeh nhitam tmana
tehm ditya-vaj jna prakhayati tat param`,hindi_meaning:" !          ()       ,        ",meaning:"When, however, one is enlightened with the knowledge by which nescience is destroyed, then his knowledge reveals everything, as the sun lights up everything in the daytime."},{id:221,verse_number:17,chapter_number:5,text:` |
  ||-||`,transliteration:`tad-buddhayas tad-tmnas tan-nihhs tat-parya
gachchhanty apunar-vitti jna-nirdhta-kalmah`,hindi_meaning:"     ,                    ",meaning:"When ones intelligence, mind, faith and refuge are all fixed in the Supreme, then one becomes fully cleansed of misgivings through complete knowledge and thus proceeds straight on the path of liberation."},{id:222,verse_number:18,chapter_number:5,text:`    |
      ||-||`,transliteration:`vidy-vinaya-sampanne brhmae gavi hastini
huni chaiva hva-pke cha pait sama-darhina`,hindi_meaning:"                       ,    ",meaning:"The humble sages, by virtue of true knowledge, see with equal vision a learned and gentle brahmana, a cow, an elephant, a dog and a dog-eater [outcaste]."},{id:223,verse_number:19,chapter_number:5,text:`       |
       ||-||`,transliteration:`ihaiva tair jita sargo yeh smye sthita mana
nirdoha hi sama brahma tasmd brahmai te sthit`,hindi_meaning:"       ,           ",meaning:"Those whose minds are established in sameness and equanimity have already conquered the conditions of birth and death. They are flawless like Brahman, and thus they are already situated in Brahman."},{id:224,verse_number:20,chapter_number:5,text:`     |
   ||-||`,transliteration:`na prahihyet priya prpya nodvijet prpya chpriyam
sthira-buddhir asammho brahma-vid brahmai sthita`,hindi_meaning:" !                 ,      ",meaning:"A person who neither rejoices upon achieving something pleasant nor laments upon obtaining something unpleasant, who is self-intelligent, who is unbewildered, and who knows the science of God, is already situated in transcendence."},{id:225,verse_number:21,chapter_number:5,text:`   |
   ||-||`,transliteration:`bhya-sparhehv asakttm vindaty tmani yat sukham
sa brahma-yoga-yukttm sukham akhayam ahnute`,hindi_meaning:"  :  !      ,    ,    ?    ,       ?",meaning:"Such a liberated person is not attracted to material sense pleasure but is always in trance, enjoying the pleasure within. In this way the self-realized person enjoys unlimited happiness, for he concentrates on the Supreme."},{id:226,verse_number:22,chapter_number:5,text:`       |
      ||-||`,transliteration:`ye hi sasparha-j bhog dukha-yonaya eva te
dy-antavanta kaunteya na tehu ramate budha`,hindi_meaning:"   :  !               ,     ",meaning:"An intelligent person does not take part in the sources of misery, which are due to contact with the material senses. O son of Kunti, such pleasures have a beginning and an end, and so the wise man does not delight in them."},{id:227,verse_number:23,chapter_number:5,text:`    |
       ||-||`,transliteration:`haknothaiva ya sohu prk harra-vimokhat
kma-krodhodbhava vega sa yukta sa sukh nara`,hindi_meaning:"     ,     ,  ,      ,    ",meaning:"Before giving up this present body, if one is able to tolerate the urges of the material senses and check the force of desire and anger, he is well situated and is happy in this world."},{id:228,verse_number:24,chapter_number:5,text:`  |
    ||-||`,transliteration:`yo nta-sukho ntar-rmas tathntar-jyotir eva ya
sa yog brahma-nirva brahma-bhto dhigachchhati`,hindi_meaning:"      , -    ,     ",meaning:"One whose happiness is within, who is active and rejoices within, and whose aim is inward is actually the perfect mystic. He is liberated in the Supreme, and ultimately he attains the Supreme."},{id:229,verse_number:25,chapter_number:5,text:`   |
    ||-||`,transliteration:`labhante brahma-nirvam ihaya kha-kalmah
chhinna-dvaidh yattmna sarva-bhta-hite rat`,hindi_meaning:"     -  ,         ,    ",meaning:"Those who are beyond the dualities that arise from doubts, whose minds are engaged within, who are always busy working for the welfare of all living beings, and who are free from all sins achieve liberation in the Supreme."},{id:230,verse_number:26,chapter_number:5,text:`   |
    ||-||`,transliteration:`kma-krodha-vimuktn yatn yata-chetasm
abhito brahma-nirva vartate vidittmanm`,hindi_meaning:"-         ,                 ",meaning:"Those who are free from anger and all material desires, who are self-realized, self-disciplined and constantly endeavoring for perfection, are assured of liberation in the Supreme in the very near future."},{id:231,verse_number:27,chapter_number:5,text:`   |
    ||-||`,transliteration:`sparhn kitv bahir bhyh chakhuh chaivntare bhruvo
prpnau samau kitv nsbhyantara-chriau`,hindi_meaning:" !             ",meaning:"Shutting out all external sense objects, keeping the eyes and vision concentrated between the two eyebrows, suspending the inward and outward breaths within the nostrils..."},{id:232,verse_number:28,chapter_number:5,text:` |
      ||-||`,transliteration:`yatendriya-mano-buddhir munir mokha-paryaa
vigatechchh-bhaya-krodho ya sad mukta eva sa`,hindi_meaning:" !            ,    ",meaning:"...and thus controlling the mind, senses and intelligence, the transcendentalist aiming at liberation becomes free from desire, fear and anger. One who is always in this state is certainly liberated."},{id:233,verse_number:29,chapter_number:5,text:`   |
     ||-||`,transliteration:`bhoktra yaja-tapas sarva-loka-mahehvaram
suhida sarva-bhtn jtv m hntim ichchhati`,hindi_meaning:" !       ,                    ",meaning:"A person in full consciousness of Me, knowing Me to be the ultimate beneficiary of all sacrifices and austerities, the Supreme Lord of all planets and demigods, and the benefactor and well-wisher of all living entities, attains peace from the pangs of material miseries."}]},{id:6,name:"",name_meaning:"The Yoga of Self-Control",chapter_number:6,verses_count:47,summary:"Krishna describes the practice of meditation (Dhyana Yoga) as a means to control the mind and senses. He outlines the lifestyle, posture, and focus required for successful meditation and explains what happens to a yogi who is unsuccessful.",verses:[{id:234,verse_number:1,chapter_number:6,text:` |
      |
        ||-||`,transliteration:`hr bhagavn uvcha
anhrita karma-phala krya karma karoti ya
sa sannys cha yog cha na niragnir na chkriya`,hindi_meaning:"     ,      ,                      ",meaning:"The Supreme Personality of Godhead said: One who is unattached to the fruits of his work and who works as he is obligated is in the renounced order of life, and he is the true mystic, not he who lights no fire and performs no duty."},{id:235,verse_number:2,chapter_number:6,text:`      |
     ||-||`,transliteration:`ya sannysam iti prhur yoga ta viddhi pava
na hy asannyasta-sakalpo yog bhavati kahchana`,hindi_meaning:"       , -   ,      ,     ",meaning:"What is called renunciation you should know to be the same as yoga, or linking oneself with the Supreme, O son of Pandu, for one can never become a yogi unless he renounces the desire for sense gratification."},{id:236,verse_number:3,chapter_number:6,text:`   |
    ||-||`,transliteration:`rurukhor muner yoga karma kraam uchyate
yogrhasya tasyaiva hama kraam uchyate`,hindi_meaning:"                     ",meaning:"For one who is a neophyte in the eightfold yoga system, work is said to be the means; and for one who is already elevated in yoga, cessation of all material activities is said to be the means."},{id:237,verse_number:4,chapter_number:6,text:`     |
  ||-||`,transliteration:`yad hi nendriyrthehu na karmasv anuhajjate
sarva-sakalpa-sannys yogrhas tadochyate`,hindi_meaning:"      ,                       ?",meaning:"A person is said to be elevated in yoga when, having renounced all material desires, he neither acts for sense gratification nor engages in fruitive activities."},{id:238,verse_number:5,chapter_number:6,text:`  |
    ||-||`,transliteration:`uddhared tmantmna ntmnam avasdayet
tmaiva hy tmano bandhur tmaiva ripur tmana`,hindi_meaning:"   ,          -  ,        ",meaning:"One must deliver himself with the help of his mind, and not degrade himself. The mind is the friend of the conditioned soul, and his enemy as well."},{id:239,verse_number:6,chapter_number:6,text:`   |
    ||-||`,transliteration:`bandhur tmtmanas tasya yentmaivtman jita
antmanas tu hatrutve vartettmaiva hatru-vat`,hindi_meaning:" !       -     ,    ",meaning:"For him who has conquered the mind, the mind is the best of friends; but for one who has failed to do so, his mind will remain the greatest enemy."},{id:240,verse_number:7,chapter_number:6,text:`    |
   ||-||`,transliteration:`jittmana prahntasya paramtm samhita
htoha-sukha-dukhehu tath mnpamnayo`,hindi_meaning:"      ,               ,       ",meaning:"For one who has conquered the mind, the Supersoul is already reached, for he has attained tranquility. To such a man happiness and distress, heat and cold, honor and dishonor are all the same."},{id:241,verse_number:8,chapter_number:6,text:`   |
    ||-||`,transliteration:`jna-vijna-tipttm ka-stho vijitendriya
yukta ity uchyate yog sama-lohrhma-kchana`,hindi_meaning:"       -   ,            ,     ",meaning:"A person is said to be established in self-realization and is called a yogi [or mystic] when he is fully satisfied by virtue of acquired knowledge and realization. Such a person is situated in transcendence and is self-controlled. He sees everythingwhether it be pebbles, stones or goldas the same."},{id:242,verse_number:9,chapter_number:6,text:` |
    ||-||`,transliteration:`suhin-mitrry-udsna-madhyastha-dvehya-bandhuhu
sdhuhv api cha ppehu sama-buddhir vihihyate`,hindi_meaning:" !      ,      ,     ",meaning:"A person is considered still further advanced when he regards allthe honest well-wisher, friends and enemies, the envious, the pious, the sinner and those who are indifferent and impartialwith an equal mind."},{id:243,verse_number:10,chapter_number:6,text:`     |
   ||-||`,transliteration:`yog yujta satatam tmna rahasi sthita
ekk yata-chitttm nirhr aparigraha`,hindi_meaning:" !                 ,    ,  -    ",meaning:"A transcendentalist should always engage his body, mind and self in relationship with the Supreme; he should live alone in a secluded place and should always carefully control his mind. He should be free from desires and feelings of possessiveness."},{id:244,verse_number:11,chapter_number:6,text:`    |
   ||-||`,transliteration:`huchau dehe pratihhpya sthiram sanam tmana
nty-uchchhrita nti-ncha chailjina-kuhottaram`,hindi_meaning:"   :       ,                             ",meaning:"To practice yoga, one should go to a secluded place and should lay kusa grass on the ground and then cover it with a deerskin and a soft cloth. The seat should be neither too high nor too low and should be situated in a sacred place."},{id:245,verse_number:12,chapter_number:6,text:`    |
  ||-||`,transliteration:`tatraikgra mana kitv yata-chittendriya-kriya
upavihysane yujyd yogam tma-vihuddhaye`,hindi_meaning:"     ,  ,    ;           ",meaning:"The yogi should then sit on it very firmly and practice yoga to purify the heart by controlling his mind, senses and activities and fixing the mind on one point."},{id:246,verse_number:13,chapter_number:6,text:`    |
    ||-||`,transliteration:`sama kya-hiro-grva dhrayann achala sthira
samprekhya nsikgra sva dihah chnavalokayan`,hindi_meaning:"     () ,      ,                    ",meaning:"One should hold ones body, neck and head erect in a straight line and stare steadily at the tip of the nose."},{id:247,verse_number:14,chapter_number:6,text:`   |
      ||-||`,transliteration:`prahnttm vigata-bhr brahmachri-vrate sthita
mana sayamya mach-chitto yukta sta mat-para`,hindi_meaning:" !      -, -  -  ,    !    ",meaning:"Thus, with an unagitated, subdued mind, devoid of fear, completely free from sex life, one should meditate upon Me within the heart and make Me the ultimate goal of life."},{id:248,verse_number:15,chapter_number:6,text:`    |
   ||-||`,transliteration:`yujann eva sadtmna yog niyata-mnasa
hnti nirva-param mat-sasthm adhigachchhati`,hindi_meaning:" !     (-)   ,  -      ,     ",meaning:"Thus practicing constant control of the body, mind and activities, the mystic transcendentalist, his mind regulated, attains to the kingdom of God [or the abode of Krishna] by cessation of material existence."},{id:249,verse_number:16,chapter_number:6,text:`    |
      ||-||`,transliteration:`ntyahnatas tu yogo sti na chaikntam anahnata
na chti-svapna-hlasya jgrato naiva chrjuna`,hindi_meaning:"  ,      ()         ()     ",meaning:"There is no possibility of ones becoming a yogi, O Arjuna, if one eats too much or eats too little, sleeps too much or does not sleep enough."},{id:250,verse_number:17,chapter_number:6,text:`   |
    ||-||`,transliteration:`yukthra-vihrasya yukta-chehasya karmasu
yukta-svapnvabodhasya yogo bhavati dukha-h`,hindi_meaning:"         ,            ",meaning:"He who is regulated in his habits of eating, sleeping, recreation and work can mitigate all material pains by practicing the yoga system."},{id:251,verse_number:18,chapter_number:6,text:`   |
     ||-||`,transliteration:`yad viniyata chittam tmany evvatihhate
nispiha sarva-kmebhyo yukta ity uchyate tad`,hindi_meaning:" !   ,          ;    ",meaning:"When the yogi, by practice of yoga, disciplines his mental activities and becomes situated in transcendencedevoid of all material desireshe is said to be well established in yoga."},{id:252,verse_number:19,chapter_number:6,text:`      |
    ||-||`,transliteration:`yath dpo nivta-stho negate sopam smit
yogino yata-chittasya yujato yogam tmana`,hindi_meaning:"          ,    ;             ",meaning:"As a lamp in a windless place does not waver, so the transcendentalist, whose mind is controlled, remains always steady in his meditation on the transcendent self."},{id:253,verse_number:20,chapter_number:6,text:`    |
    ||-||`,transliteration:`yatroparamate chitta niruddha yoga-sevay
yatra chaivtmantmna pahyann tmani tuhyati`,hindi_meaning:"              ,        , ,              ",meaning:"In the stage of perfection called trance, or samadhi, ones mind is completely restrained from material mental activities by practice of yoga. This perfection is characterized by ones ability to see the self by the pure mind and to relish and rejoice in the self."},{id:254,verse_number:21,chapter_number:6,text:`  |
      ||-||`,transliteration:`sukham tyantika yat tad buddhi-grhyam atndriyam
vetti yatra na chaivya sthitah chalati tattvata`,hindi_meaning:" !    ,       ,           ?",meaning:"In that joyous state, one is situated in boundless transcendental happiness and enjoys himself through transcendental senses. Established thus, one never departs from the truth."},{id:255,verse_number:22,chapter_number:6,text:`       |
     ||-||`,transliteration:`ya labdhv chpara lbha manyate ndhika tata
yasmin sthito na dukhena gurupi vichlyate`,hindi_meaning:"          ,    ()          ",meaning:"And upon gaining this he thinks there is no greater gain. Being situated in such a position, one is never shaken, even in the midst of greatest difficulty."},{id:256,verse_number:23,chapter_number:6,text:`   |
    ||-||`,transliteration:`ta vidyd dukha-sayoga-viyoga yoga-sajitam
sa nihchayena yoktavyo yogo nirvia-chetas`,hindi_meaning:"      ,    ,          ",meaning:"This indeed is actual freedom from all miseries arising from material contact. One should engage oneself in the practice of yoga with determination and faith and not be deviated from the path."},{id:257,verse_number:24,chapter_number:6,text:`  |
   ||-||`,transliteration:`sakalpa-prabhavn kms tyaktv sarvn ahehata
manasaivendriya-grma viniyamya samantata`,hindi_meaning:" , ,      , , ,    ",meaning:"One should abandon without exception all material desires born of mental speculation and thus control all the senses on all sides by the mind."},{id:258,verse_number:25,chapter_number:6,text:`   |
      ||-||`,transliteration:`hanai hanair uparamed buddhy dhiti-gihtay
tma-sastha mana kitv na kichid api chintayet`,hindi_meaning:" ,                ",meaning:"Gradually, step by step, one should become situated in trance by means of intelligence sustained by full conviction, and thus the mind should be fixed on the self alone and should think of nothing else."},{id:259,verse_number:26,chapter_number:6,text:`    |
    ||-||`,transliteration:`yato yato nihcharati manah chachalam asthiram
tatas tato niyamyaitad tmany eva vaha nayet`,hindi_meaning:" !             ,         ",meaning:"From wherever the mind wanders due to its flickering and unsteady nature, one must certainly withdraw it and bring it back under the control of the self."},{id:260,verse_number:27,chapter_number:6,text:`    |
   ||-||`,transliteration:`prahnta-manasa hy ena yogina sukham uttamam
upaiti hnta-rajasa brahma-bhtam akalmaham`,hindi_meaning:"                       ",meaning:"The yogi whose mind is fixed on Me verily attains the highest perfection of transcendental happiness. He is beyond the mode of passion, he realizes his qualitative identity with the Supreme, and thus he is freed from all reactions to past deeds."},{id:261,verse_number:28,chapter_number:6,text:`    |
   ||-||`,transliteration:`yujann eva sadtmna yog vigata-kalmaha
sukhena brahma-sasparham atyanta sukham ahnute`,hindi_meaning:" !     ,              ?",meaning:"Thus the self-controlled yogi, constantly engaged in yoga practice, becomes free from all material contamination and achieves the highest stage of perfect happiness in transcendental loving service to the Lord."},{id:262,verse_number:29,chapter_number:6,text:`   |
    ||-||`,transliteration:`sarva-bhta-stham tmna sarva-bhtni chtmani
khate yoga-yukttm sarvatra sama-darhana`,hindi_meaning:"      ,      ,             ",meaning:"A true yogi observes Me in all beings and also sees every being in Me. Indeed, the self-realized person sees Me, the same Supreme Lord, everywhere."},{id:263,verse_number:30,chapter_number:6,text:`        |
        ||-||`,transliteration:`yo m pahyati sarvatra sarva cha mayi pahyati
tasyha na praahymi sa cha me na praahyati`,hindi_meaning:" !                     ",meaning:"For one who sees Me everywhere and sees everything in Me, I am never lost, nor is he ever lost to Me."},{id:264,verse_number:31,chapter_number:6,text:`    |
      ||-||`,transliteration:`sarva-bhta-sthita yo m bhajaty ekatvam sthita
sarvath vartamno pi sa yog mayi vartate`,hindi_meaning:" !           ;            ",meaning:"Such a yogi, who engages in the worshipful service of the Supersoul, knowing that I and the Supersoul are one, remains always in Me in all circumstances."},{id:265,verse_number:32,chapter_number:6,text:`     |
         ||-||`,transliteration:`tmaupamyena sarvatra sama pahyati yo rjuna
sukha v yadi v dukha sa yog paramo mata`,hindi_meaning:" !         ,               ",meaning:"He is a perfect yogi who, by comparison to his own self, sees the true equality of all beings, in both their happiness and their distress, O Arjuna!"},{id:266,verse_number:33,chapter_number:6,text:`  |
     |
     ||-||`,transliteration:`arjuna uvcha
yo ya yogas tvay prokta smyena madhusdana
etasyha na pahymi chachalatvt sthiti sthirm`,hindi_meaning:"      ,           ",meaning:"Arjuna said: O Madhusudana, the system of yoga which You have summarized appears impractical and unendurable to me, for the mind is restless and unsteady."},{id:267,verse_number:34,chapter_number:6,text:`      |
     ||-||`,transliteration:`chachala hi mana kiha pramthi balavad diham
tasyha nigraha manye vyor iva su-duhkaram`,hindi_meaning:"             ,     ",meaning:"For the mind is restless, turbulent, obstinate and very strong, O Krishna, and to subdue it, I think, is more difficult than controlling the wind."},{id:268,verse_number:35,chapter_number:6,text:` |
     |
      ||-||`,transliteration:`hr bhagavn uvcha
asahaya mah-bho mano durnigraha chalam
abhysena tu kaunteya vairgyea cha gihyate`,hindi_meaning:"             ",meaning:"Lord Sri Krishna said: O mighty-armed son of Kunti, it is undoubtedly very difficult to curb the restless mind, but it is possible by suitable practice and by detachment."},{id:269,verse_number:36,chapter_number:6,text:`      |
    ||-||`,transliteration:`asayattman yogo duhprpa iti me mati
vahytman tu yatat hakyo vptum upyata`,hindi_meaning:"                      ?",meaning:"For one whose mind is unbridled, self-realization is difficult work. But he whose mind is controlled and who strives by appropriate means is assured of success. That is My opinion."},{id:270,verse_number:37,chapter_number:6,text:`  |
   |
      ||-||`,transliteration:`arjuna uvcha
ayati hraddhayopeto yogch chalita-mnasa
aprpya yoga-sasiddhi k gati kiha gachchhati`,hindi_meaning:" !    ,     ;   ,           ",meaning:"Arjuna said: O Krishna, what is the destination of the unsuccessful transcendentalist, who in the beginning takes to the process of self-realization with faith but who later desists due to worldly-mindedness and thus does not attain perfection in mysticism?"},{id:271,verse_number:38,chapter_number:6,text:`  |
     ||-||`,transliteration:`kachchin nobhaya-vibhrahah chhinnbhram iva nahyati
apratihho mah-bho vimho brahmaa pathi`,hindi_meaning:"-, -, -                 ",meaning:"O mighty-armed Krishna, does not such a man, being deviated from the path of Transcendence, perish like a riven cloud, with no position in any sphere?"},{id:272,verse_number:39,chapter_number:6,text:`    |
     ||-||`,transliteration:`etan me sahaya kiha chhettum arhasy ahehata
tvad-anya sahayasysya chhett na hy upapadyate`,hindi_meaning:" !       ()     ,        ",meaning:"This is my doubt, O Krishna, and I ask You to dispel it completely. But for You, no one is to be found who can destroy this doubt."},{id:273,verse_number:40,chapter_number:6,text:` |
     |
     ||-||`,transliteration:`hr bhagavn uvcha
prtha naiveha nmutra vinhas tasya vidyate
na hi kalya-kit kahchid durgati tta gachchhati`,hindi_meaning:"            ,         ",meaning:"The Supreme Personality of Godhead said: Son of Pritha, a transcendentalist engaged in auspicious activities does not meet with destruction either in this world or in the spiritual world; one who does good, My friend, is never overcome by evil."},{id:274,verse_number:41,chapter_number:6,text:`     |
    ||-||`,transliteration:`prpya puya-kit lokn uhitv hhvat sam
huchn hrmat gehe yoga-bhraho bhijyate`,hindi_meaning:" !        ,          ",meaning:"The unsuccessful yogi, after many, many years of enjoyment on the planets of the pious living entities, is born into a family of righteous people, or into a family of rich aristocracy."},{id:275,verse_number:42,chapter_number:6,text:`     |
     ||-||`,transliteration:`athav yoginm eva kule bhavati dhmatm
etad dhi durlabhatara loke janma yad diham`,hindi_meaning:" !                 ,     ",meaning:"Or [if unsuccessful after long practice of yoga] he takes his birth in a family of transcendentalists who are surely great in wisdom. Certainly, such a birth is rare in this world."},{id:276,verse_number:43,chapter_number:6,text:`     |
      ||-||`,transliteration:`tatra ta buddhi-sayoga labhate paurva-dehikam
yatate cha tato bhya sasiddhau kuru-nandana`,hindi_meaning:"       ,     ,  -      ",meaning:"On taking such a birth, he revives the divine consciousness of his previous life, and he again tries to make further progress in order to achieve complete success, O son of Kuru."},{id:277,verse_number:44,chapter_number:6,text:`     |
   ||-||`,transliteration:`prvbhysena tenaiva hriyate hy avaho pi sa
jijsur api yogasya habda-brahmtivartate`,hindi_meaning:"         ,     ",meaning:"By virtue of the divine consciousness of his previous life, he automatically becomes attracted to the yogic principleseven without seeking them. Such an inquisitive transcendentalist stands always above the ritualistic principles of the scriptures."},{id:278,verse_number:45,chapter_number:6,text:`   |
    ||-||`,transliteration:`prayatnd yatamnas tu yog sahuddha-kilbiha
aneka-janma-sasiddhas tato yti par gatim`,hindi_meaning:"   (, , )      !        ,     ,        -   ",meaning:"And when the yogi engages himself with sincere endeavor in making further progress, being washed of all contaminations, then ultimately, achieving perfection after many, many births of practice, he attains the supreme goal."},{id:279,verse_number:46,chapter_number:6,text:`    |
    ||-||`,transliteration:`tapasvibhyo dhiko yog jnibhyo pi mato dhika
karmibhyah chdhiko yog tasmd yog bhavrjuna`,hindi_meaning:"         ,               ",meaning:"A yogi is greater than the ascetic, greater than the empiricist and greater than the fruitive worker. Therefore, O Arjuna, in all circumstances, be a yogi."},{id:280,verse_number:47,chapter_number:6,text:`   |
       ||-||`,transliteration:`yoginm api sarveh mad-gatenntar-tman
hraddhvn bhajate yo m sa me yuktatamo mata`,hindi_meaning:"      ,                     ",meaning:"And of all yogis, the one with great faith who always abides in Me, thinks of Me within himself, and renders transcendental loving service to Mehe is the most intimately united with Me in yoga and is the highest of all. That is My opinion."}]},{id:7,name:"",name_meaning:"The Yoga of Knowledge and Realization",chapter_number:7,verses_count:30,summary:"Krishna explains the nature of the Absolute Truth. He describes His material and spiritual energies and reveals Himself as the source of all creation. He also discusses who can and cannot surrender to Him.",verses:[{id:281,verse_number:1,chapter_number:7,text:` |
    |
      ||-||`,transliteration:`hr bhagavn uvcha
mayy sakta-man prtha yoga yujan mad-hraya
asahaya samagra m yath jsyasi tach chhiu`,hindi_meaning:" !      , -         ",meaning:"The Supreme Personality of Godhead said: Now hear, O son of Pritha, how by practicing yoga in full consciousness of Me, with mind attached to Me, you can know Me in full, free from doubt."},{id:282,verse_number:2,chapter_number:7,text:`    |
   ||-||`,transliteration:`jna te ha sa-vijnam ida vakhymy ahehata
yaj jtv neha bhyo nyaj jtavyam avahihyate`,hindi_meaning:" !          ()       ,        ",meaning:"I shall now declare unto you in full this knowledge, both phenomenal and numinous. This being known, nothing further shall remain for you to know."},{id:283,verse_number:3,chapter_number:7,text:`    |
     ||-||`,transliteration:`manuhy sahasrehu kahchid yatati siddhaye
yatatm api siddhn kahchin m vetti tattvata`,hindi_meaning:"     ,                    ",meaning:"Out of many thousands among men, one may endeavor for perfection, and of those who have achieved perfection, hardly one knows Me in truth."},{id:284,verse_number:4,chapter_number:7,text:`      |
     ||-||`,transliteration:`bhmir po nalo vyu kha mano buddhir eva cha
ahakra itya me bhinn prakitir ahadh`,hindi_meaning:"                       ,    ",meaning:"Earth, water, fire, air, ether, mind, intelligence and false egoall together these eight constitute My separated material energies."},{id:285,verse_number:5,chapter_number:7,text:`     |
     ||-||`,transliteration:`apareyam itas tv any prakiti viddhi me parm
jva-bht mah-bho yayeda dhryate jagat`,hindi_meaning:"       ,           ",meaning:"Besides these, O mighty-armed Arjuna, there is another, superior energy of Mine, which comprises the living entities who are exploiting the resources of this material, inferior nature."},{id:286,verse_number:6,chapter_number:7,text:`   |
     ||-||`,transliteration:`etad-yonni bhtni sarvty upadhraya
aha kitsnasya jagata prabhava pralayas tath`,hindi_meaning:" !                 ,      ",meaning:"All created beings have their source in these two natures. Of all that is material and all that is spiritual in this world, know for certain that I am both the origin and the dissolution."},{id:287,verse_number:7,chapter_number:7,text:`    |
      ||-||`,transliteration:`matta paratara nnyat kichid asti dhanajaya
mayi sarvam ida prota stre mai-ga iva`,hindi_meaning:"  :  !      ,    ,    ?    ,       ?",meaning:"O conqueror of wealth, there is no truth superior to Me. Everything rests upon Me, as pearls are strung on a thread."},{id:288,verse_number:8,chapter_number:7,text:`    |
      ||-||`,transliteration:`raso ham apsu kaunteya prabhsmi hahi-sryayo
praava sarva-vedehu habda khe pauruha nihu`,hindi_meaning:"   :  !               ,     ",meaning:"O son of Kunti, I am the taste of water, the light of the sun and the moon, the syllable om in the Vedic mantras; I am the sound in ether and ability in man."},{id:289,verse_number:9,chapter_number:7,text:`      |
    ||-||`,transliteration:`puyo gandha pithivy cha tejah chsmi vibhvasau
jvana sarva-bhtehu tapah chsmi tapasvihu`,hindi_meaning:"     ,     ,  ,      ,    ",meaning:"I am the original fragrance of the earth, and I am the heat in fire. I am the life of all that lives, and I am the penances of all ascetics."},{id:290,verse_number:10,chapter_number:7,text:`      |
  ||-||`,transliteration:`bja m sarva-bhtn viddhi prtha santanam
buddhir buddhimatm asmi tejas tejasvinm aham`,hindi_meaning:"      , -    ,     ",meaning:"O son of Pritha, know that I am the original seed of all existences, the intelligence of the intelligent, and the prowess of all powerful men."},{id:291,verse_number:11,chapter_number:7,text:`    |
    ||-||`,transliteration:`bala balavat chha kma-rga-vivarjitam
dharmviruddho bhtehu kmo smi bharatarhabha`,hindi_meaning:"     -  ,         ,    ",meaning:"I am the strength of the strong, devoid of passion and desire. I am sex life which is not contrary to religious principles, O lord of the Bharatas [Arjuna]."},{id:292,verse_number:12,chapter_number:7,text:`      |
        ||-||`,transliteration:`ye chaiva sttvik bhv rjass tmash cha ye
matta eveti tn viddhi na tv aha tehu te mayi`,hindi_meaning:"-         ,                 ",meaning:"Know that all states of beingbe they of goodness, passion or ignoranceare manifested by My energy. I am, in one sense, everything, but I am independent. I am not under the modes of material nature, for they, on the contrary, are within Me."},{id:293,verse_number:13,chapter_number:7,text:`   |
    ||-||`,transliteration:`tribhir gua-mayair bhvair ebhi sarvam ida jagat
mohita nbhijnti mm ebhya param avyayam`,hindi_meaning:" !             ",meaning:"Deluded by the three modes [goodness, passion and ignorance], the whole world does not know Me, who am above the modes and inexhaustible."},{id:294,verse_number:14,chapter_number:7,text:`      |
      ||-||`,transliteration:`daiv hy eh gua-may mama my duratyay
mm eva ye prapadyante mym et taranti te`,hindi_meaning:" !            ,    ",meaning:"This divine energy of Mine, consisting of the three modes of material nature, is difficult to overcome. But those who have surrendered unto Me can easily cross beyond it."},{id:295,verse_number:15,chapter_number:7,text:`      |
   ||-||`,transliteration:`na m duhkitino mh prapadyante nardham
myaypahita-jn sura bhvam hrit`,hindi_meaning:" !       ,                    ",meaning:"Those miscreants who are grossly foolish, who are lowest among mankind, whose knowledge is stolen by illusion, and who partake of the atheistic nature of demons do not surrender unto Me."},{id:296,verse_number:16,chapter_number:7,text:`     |
     ||-||`,transliteration:`chatur-vidh bhajante m jan sukitino rjuna
rto jijsur arthrth jn cha bharatarhabha`,hindi_meaning:"     ,      ,                      ",meaning:"O best among the Bharatas, four kinds of pious men begin to render devotional service unto Methe distressed, the desirer of wealth, the inquisitive, and he who is searching for knowledge of the Absolute."},{id:297,verse_number:17,chapter_number:7,text:`    |
       ||-||`,transliteration:`teh jn nitya-yukta eka-bhaktir vihihyate
priyo hi jnino tyartham aha sa cha mama priya`,hindi_meaning:"       , -   ,      ,     ",meaning:"Of these, the one who is in full knowledge and who is always engaged in pure devotional service is the best. For I am very dear to him, and he is dear to Me."},{id:298,verse_number:18,chapter_number:7,text:`       |
      ||-||`,transliteration:`udr sarva evaite jn tv tmaiva me matam
sthita sa hi yukttm mm evnuttam gatim`,hindi_meaning:"                     ",meaning:"All these devotees are undoubtedly magnanimous souls, but he who is situated in knowledge of Me I consider to be just like My own self. Being engaged in My transcendental service, he is sure to attain Me, the highest and most perfect goal."},{id:299,verse_number:19,chapter_number:7,text:`    |
     ||-||`,transliteration:`bahn janmanm ante jnavn m prapadyate
vsudeva sarvam iti sa mahtm su-durlabha`,hindi_meaning:"      ,                       ?",meaning:"After many births and deaths, he who is actually in knowledge surrenders unto Me, knowing Me to be the cause of all causes and all that is. Such a great soul is very rare."},{id:300,verse_number:20,chapter_number:7,text:`  |
      ||-||`,transliteration:`kmais tais tair hita-jn prapadyante nya-devat
ta ta niyamam sthya prakity niyat svay`,hindi_meaning:"   ,          -  ,        ",meaning:"Those whose intelligence has been stolen by material desires surrender unto demigods and follow the particular rules and regulations of worship according to their own natures."},{id:301,verse_number:21,chapter_number:7,text:`       |
     ||-||`,transliteration:`yo yo y y tanu bhakta hraddhayrchitum ichchhati
tasya tasychal hraddh tm eva vidadhmy aham`,hindi_meaning:" !       -     ,    ",meaning:"I am in everyones heart as the Supersoul. As soon as one desires to worship some demigod, I make his faith steady so that he can devote himself to that particular deity."},{id:302,verse_number:22,chapter_number:7,text:`    |
      ||-||`,transliteration:`sa tay hraddhay yuktas tasyrdhanam hate
labhate cha tata kmn mayaiva vihitn hi tn`,hindi_meaning:"      ,               ,       ",meaning:"Endowed with such a faith, he endeavors to worship a particular demigod and obtains his desires. But in actuality these benefits are bestowed by Me alone."},{id:303,verse_number:23,chapter_number:7,text:`    |
     ||-||`,transliteration:`antavat tu phala teh tad bhavaty alpa-medhasm
devn deva-yajo ynti mad-bhakt ynti mm api`,hindi_meaning:"       -   ,            ,     ",meaning:"Men of small intelligence worship the demigods, and their fruits are limited and temporary. Those who worship the demigods go to the planets of the demigods, but My devotees ultimately reach My supreme planet."},{id:304,verse_number:24,chapter_number:7,text:`    |
   ||-||`,transliteration:`avyakta vyaktim panna manyante mm abuddhaya
para bhvam ajnanto mamvyayam anuttamam`,hindi_meaning:" !      ,      ,     ",meaning:"Unintelligent men, who do not know Me perfectly, think that I, the Supreme Personality of Godhead, Krishna, was impersonal before and have now assumed this personality. Due to their small knowledge, they do not know My higher nature, which is imperishable and supreme."},{id:305,verse_number:25,chapter_number:7,text:`    |
    ||-||`,transliteration:`nha prakha sarvasya yoga-my-samvita
mho ya nbhijnti loko mm ajam avyayam`,hindi_meaning:" !                 ,    ,  -    ",meaning:"I am never manifest to the foolish and unintelligent. For them I am covered by My internal potency, and therefore they do not know that I am unborn and infallible."},{id:306,verse_number:26,chapter_number:7,text:`    |
        ||-||`,transliteration:`vedha samattni vartamnni chrjuna
bhavihyi cha bhtni m tu veda na kahchana`,hindi_meaning:"  :  !  !        ()  ,           ?",meaning:"O Arjuna, as the Supreme Personality of Godhead, I know everything that has happened in the past, all that is happening in the present, and all things that are yet to come. I also know all living entities; but Me no one knows."},{id:307,verse_number:27,chapter_number:7,text:`   |
     ||-||`,transliteration:`ichchh-dveha-samutthena dvandva-mohena bhrata
sarva-bhtni sammoha sarge ynti parantapa`,hindi_meaning:"               ,     ",meaning:"O scion of Bharata, O conqueror of the foe, all living entities are born into delusion, bewildered by the dualities arising from desire and hate."},{id:308,verse_number:28,chapter_number:7,text:`     |
     ||-||`,transliteration:`yeh tv anta-gata ppa jann puya-karmam
te dvandva-moha-nirmukt bhajante m diha-vrat`,hindi_meaning:"   :   !         -         ",meaning:"Persons who have acted piously in previous lives and in this life and whose sinful actions are completely eradicated are freed from the dualities of delusion, and they engage themselves in My service with determination."},{id:309,verse_number:29,chapter_number:7,text:`    |
      ||-||`,transliteration:`jar-maraa-mokhya mm hritya yatanti ye
te brahma tad vidu kitsnam adhytma karma chkhilam`,hindi_meaning:"                    ",meaning:"Intelligent persons who are endeavoring for liberation from old age and death take refuge in Me in devotional service. They are actually Brahman because they entirely know everything about transcendental activities."},{id:310,verse_number:30,chapter_number:7,text:`      |
     ||-||`,transliteration:`sdhibhtdhidaiva m sdhiyaja cha ye vidu
praya-kle pi cha m te vidur yukta-chetasa`,hindi_meaning:"         ,             ",meaning:"Those in full consciousness of Me, who know Me, the Supreme Lord, to be the governing principle of the material manifestation, of the demigods, and of all methods of sacrifice, can understand and know Me, the Supreme Personality of Godhead, even at the time of death."}]},{id:8,name:"",name_meaning:"The Yoga of the Imperishable Brahman",chapter_number:8,verses_count:28,summary:"Arjuna asks several questions about Brahman, karma, and the nature of the divine. Krishna answers these and explains how one can attain the supreme abode by remembering Him at the time of death.",verses:[{id:311,verse_number:1,chapter_number:8,text:`  |
      |
     ||-||`,transliteration:`arjuna uvcha
ki tad brahma kim adhytma ki karma puruhottama
adhibhta cha ki proktam adhidaiva kim uchyate`,hindi_meaning:"         -    ,      ",meaning:"Arjuna inquired: O my Lord, O Supreme Person, what is Brahman? What is the self? What are fruitive activities? What is this material manifestation? And what are the demigods? Please explain this to me."},{id:312,verse_number:2,chapter_number:8,text:`    |
     ||-||`,transliteration:`adhiyaja katha ko tra dehe smin madhusdana
praya-kle cha katha jeyo si niyattmabhi`,hindi_meaning:" !              ,   ",meaning:"Who is the Lord of sacrifice, and how does He live in the body, O Madhusudana? And how can those engaged in devotional service know You at the time of death?"},{id:313,verse_number:3,chapter_number:8,text:` |
    |
   ||-||`,transliteration:`hr bhagavn uvcha
akhara brahma parama svabhvo dhytmam uchyate
bhta-bhvodbhava-karo visarga karma-sajita`,hindi_meaning:"   ,               -    ",meaning:"The Supreme Personality of Godhead said: The indestructible, transcendental living entity is called Brahman, and his eternal nature is called adhyatma, the self. Action pertaining to the development of the material bodies of the living entities is called karma, or fruitive activities."},{id:314,verse_number:4,chapter_number:8,text:`    |
    ||-||`,transliteration:`adhibhta kharo bhva puruhah chdhidaivatam
adhiyajo ham evtra dehe deha-bhit vara`,hindi_meaning:" !                   ,   ",meaning:"O best of the embodied beings, the physical nature, which is constantly changing, is called adhibhuta [the material manifestation]. The universal form of the Lord, which includes all the demigods, like the sun and moon, is called adhidaiva. And I, the Supreme Lord, represented as the Supersoul in the heart of every embodied being, am called adhiyajna [the Lord of sacrifice]."},{id:315,verse_number:5,chapter_number:8,text:`     |
       ||-||`,transliteration:`anta-kle cha mm eva smaran muktv kalevaram
ya prayti sa mad-bhva yti nsty atra sahaya`,hindi_meaning:"        :            (     ) ",meaning:"And whoever, at the end of his life, quits his body, remembering Me alone, at once attains My nature. Of this there is no doubt."},{id:316,verse_number:6,chapter_number:8,text:`      |
     ||-||`,transliteration:`ya ya vpi smaran bhva tyajaty ante kalevaram
ta tam evaiti kaunteya sad tad-bhva-bhvita`,hindi_meaning:"            -         ",meaning:"Whatever state of being one remembers when he quits his body, O son of Kunti, that state he will attain without fail."},{id:317,verse_number:7,chapter_number:8,text:`     |
 ||-||`,transliteration:`tasmt sarvehu klehu mm anusmara yudhya cha
mayy arpita-mano-buddhir mm evaihyasy asahayam`,hindi_meaning:"                     ,   ",meaning:"Therefore, Arjuna, you should always think of Me in the form of Krishna and at the same time carry out your prescribed duty of fighting. With your activities dedicated to Me and your mind and intelligence fixed on Me, you will attain Me without doubt."},{id:318,verse_number:8,chapter_number:8,text:`   |
     ||-||`,transliteration:`abhysa-yoga-yuktena chetas nnya-gmin
parama puruha divya yti prthnuchintayan`,hindi_meaning:"            ,       ,     ",meaning:"He who meditates on Me as the Supreme Personality of Godhead, his mind constantly engaged in remembering Me, undeviated from the path, he, O Partha, is sure to reach Me."},{id:319,verse_number:9,chapter_number:8,text:` 
 |
 -
   ||-||`,transliteration:`kavi puram anuhsitra
aor aynsam anusmared ya
sarvasya dhtram achintya-rpam
ditya-vara tamasa parastt`,hindi_meaning:"      ,       ,           ",meaning:"One should meditate upon the Supreme Person as the one who knows everything, as He who is the oldest, who is the controller, who is smaller than the smallest, who is the maintainer of everything, who is beyond all material conception, who is inconceivable, and who is always a person. He is luminous like the sun, and He is transcendental, beyond this material nature."},{id:484,verse_number:10,chapter_number:8,text:` 
    |
  
     ||-||`,transliteration:`praya-kle manaschalena
bhakty yukto yoga-balena chaiva
bhruvor madhye pram vehya samyak
sa ta para puruham upaiti divyam`,hindi_meaning:"     ,   ()            ",meaning:"One who, at the time of death, fixes his life air between the eyebrows and, by the strength of yoga, engages himself in remembering the Supreme Lord with full devotion, will certainly attain to the Supreme Personality of Godhead."},{id:485,verse_number:11,chapter_number:8,text:`  
   |
  
    ||-||`,transliteration:`yad akhara veda-vido vadanti
vihanti yad yatayo vta-rg
yad ichchhanto brahmacharya charanti
tat te pada sagrahea pravakhye`,hindi_meaning:" !          ,        -    ,     ",meaning:"Persons who are learned in the Vedas, who utter omkara and who are great sages in the renounced order enter into Brahman. Desiring such perfection, one practices celibacy. I shall now briefly explain to you this process by which one may attain salvation."},{id:486,verse_number:12,chapter_number:8,text:`      |
   ||-||`,transliteration:`sarva-dvri sayamya mano hidi nirudhya cha
mrdhny dhytmana pram sthito yoga-dhram`,hindi_meaning:"      ,          ,      ",meaning:"The yogic situation is that of detachment from all sensual engagements. Closing all the doors of the senses and fixing the mind on the heart and the life air at the top of the head, one establishes himself in yoga."},{id:487,verse_number:13,chapter_number:8,text:`   |
       ||-||`,transliteration:`o ity ekkhara brahma vyharan mm anusmaran
ya prayti tyajan deha sa yti param gatim`,hindi_meaning:"                           ",meaning:"After being situated in this yoga practice and vibrating the sacred syllable om, the supreme combination of letters, if one thinks of the Supreme Personality of Godhead and quits his body, he will certainly reach the spiritual planets."},{id:488,verse_number:14,chapter_number:8,text:`      |
     ||-||`,transliteration:`ananya-chet satata yo m smarati nityaha
tasyha sulabha prtha nitya-yuktasya yogina`,hindi_meaning:"    ,               ",meaning:"For one who always remembers Me without deviation, I am easy to obtain, O son of Pritha, because of his constant engagement in devotional service."},{id:489,verse_number:15,chapter_number:8,text:`   |
     ||-||`,transliteration:`mm upetya punar janma dukhlayam ahhvatam
npnuvanti mahtmna sasiddhi param gat`,hindi_meaning:"                     ",meaning:"After attaining Me, the great souls, who are yogis in devotion, never return to this temporary world, which is full of miseries, because they have attained the highest perfection."},{id:490,verse_number:16,chapter_number:8,text:`  |
      ||-||`,transliteration:`-brahma-bhuvanl lok punar vartino rjuna
mm upetya tu kaunteya punar janma na vidyate`,hindi_meaning:"     ,            ,     ",meaning:"From the highest planet in the material world down to the lowest, all are places of misery wherein repeated birth and death take place. But one who attains to My abode, O son of Kunti, never takes birth again."},{id:491,verse_number:17,chapter_number:8,text:`  |
    ||-||`,transliteration:`sahasra-yuga-paryantam ahar yad brahmao vidu
rtri yuga-sahasrnt te ho-rtra-vido jan`,hindi_meaning:" !         ,            ,        ",meaning:"By human calculation, a thousand ages taken together form the duration of Brahmas one day. And such also is the duration of his night."},{id:492,verse_number:18,chapter_number:8,text:`   |
   ||-||`,transliteration:`avyaktd vyaktaya sarv prabhavanty ahar-game
rtry-game pralyante tatraivvyakta-sajake`,hindi_meaning:" !      ,              ",meaning:"At the beginning of Brahmas day, all living entities become manifest from the unmanifest state, and thereafter, when the night falls, they are merged into the unmanifest again."},{id:493,verse_number:19,chapter_number:8,text:`      |
   ||-||`,transliteration:`bhta-grma sa evya bhtv bhtv pralyate
rtry-game vaha prtha prabhavaty ahar-game`,hindi_meaning:" !          ,              ,   ",meaning:"Again and again, when Brahmas day arrives, all living entities come into being, and with the arrival of Brahmas night they are helplessly annihilated."},{id:494,verse_number:20,chapter_number:8,text:`  |
       ||-||`,transliteration:`paras tasmt tu bhvo nyo vyakto vyaktt santana
ya sa sarvehu bhtehu nahyatsu na vinahyati`,hindi_meaning:"                    ",meaning:"Yet there is another unmanifest nature, which is eternal and is transcendental to this manifested and unmanifested matter. It is supreme and is never annihilated. When all in this world is annihilated, that part remains as it is."},{id:495,verse_number:21,chapter_number:8,text:`    |
       ||-||`,transliteration:`avyakto khara ity uktas tam hu param gatim
ya prpya na nivartante tad dhma parama mama`,hindi_meaning:"     ,       ,            ",meaning:"That which the Vedantists describe as unmanifest and infallible, that which is known as the supreme destination, that place from which, having attained it, one never returnsthat is My supreme abode."},{id:496,verse_number:22,chapter_number:8,text:`      |
     ||-||`,transliteration:`puruha sa para prtha bhakty labhyas tv ananyay
yasynta-sthni bhtni yena sarvam ida tatam`,hindi_meaning:" !          ,                ",meaning:"The Supreme Personality of Godhead, who is greater than all, is attainable by unalloyed devotion. Although He is present in His abode, He is all-pervading, and everything is situated within Him."},{id:497,verse_number:23,chapter_number:8,text:`     |
      ||-||`,transliteration:`yatra kle tv anvittim vitti chaiva yogina
prayt ynti ta kla vakhymi bharatarhabha`,hindi_meaning:" !      ,           ,    ,    ",meaning:"O best of the Bharatas, I shall now explain to you the different times at which, passing away from this world, the yogi does or does not come back."},{id:498,verse_number:24,chapter_number:8,text:`    |
      ||-||`,transliteration:`agnir jyotir aha hukla ha-ms uttaryaam
tatra prayt gachchhanti brahma brahma-vido jan`,hindi_meaning:"     ,             ,            ",meaning:"Those who know the Supreme Brahman attain that Supreme by passing away from the world during the influence of the fiery god, in the light, at an auspicious moment of the day, during the fortnight of the waxing moon, or during the six months when the sun travels in the north."},{id:499,verse_number:25,chapter_number:8,text:`     |
     ||-||`,transliteration:`dhmo rtris tath kiha ha-ms dakhiyanam
tatra chndramasa jyotir yog prpya nivartate`,hindi_meaning:" !      ,   ,  ,                 ",meaning:"The mystic who passes away from this world during the smoke, the night, the fortnight of the waning moon, or the six months when the sun passes to the south reaches the moon planet but again comes back."},{id:500,verse_number:26,chapter_number:8,text:`      |
   ||-||`,transliteration:`hukla-kihe gat hy ete jagata hhvate mate
ekay yty anvittim anyayvartate puna`,hindi_meaning:" !         ,     ,     ",meaning:"According to Vedic opinion, there are two ways of passing from this worldone in light and one in darkness. When one passes in light, he does not come back; but when one passes in darkness, he returns."},{id:501,verse_number:27,chapter_number:8,text:`      |
    ||-||`,transliteration:`naite sit prtha jnan yog muhyati kahchana
tasmt sarvehu klehu yoga-yukto bhavrjuna`,hindi_meaning:"         ,     ",meaning:"Although the devotees know these two paths, O Arjuna, they are never bewildered. Therefore be always fixed in devotion."},{id:502,verse_number:28,chapter_number:8,text:`   
   |
  
    ||-||`,transliteration:`vedehu yajehu tapasu chaiva
dnehu yat puya-phala pradiham
atyeti tat sarvam ida viditv
yog para sthnam upaiti chdyam`,hindi_meaning:"        ,           ?",meaning:"A person who accepts the path of devotional service is not bereft of the results derived from studying the Vedas, performing austere sacrifices, giving charity or pursuing philosophical and fruitive activities. Simply by performing devotional service, he attains all these, and at the end he reaches the supreme eternal abode."}]},{id:9,name:"",name_meaning:"The Yoga of the Kingly Science and the Kingly Secret",chapter_number:9,verses_count:34,summary:"Krishna reveals the 'king of all knowledge,' the most confidential wisdom about His supreme nature. He explains that all beings are in Him, but He is not in them, and describes the path of pure devotion (Bhakti Yoga).",verses:[{id:320,verse_number:1,chapter_number:9,text:` |
     |
    ||-||`,transliteration:`hr bhagavn uvcha
ida tu te guhyatama pravakhymy anasyave
jna vijna-sahita yaj jtv mokhyase hubht`,hindi_meaning:"  -   -    ,         ",meaning:"The Supreme Personality of Godhead said: My dear Arjuna, because you are never envious of Me, I shall impart to you this most confidential knowledge and realization, knowing which you shall be relieved of the miseries of material existence."},{id:321,verse_number:2,chapter_number:9,text:`   |
    ||-||`,transliteration:`rja-vidy rja-guhya pavitram idam uttamam
pratyakhvagama dharmya su-sukha kartum avyayam`,hindi_meaning:"    ,     ,              ",meaning:"This knowledge is the king of education, the most secret of all secrets. It is the purest knowledge, and because it gives direct perception of the self by realization, it is the perfection of religion. It is everlasting, and it is joyfully performed."},{id:322,verse_number:3,chapter_number:9,text:`    |
    ||-||`,transliteration:`ahraddadhn puruh dharmasysya parantapa
aprpya m nivartante mityu-sasra-vartmani`,hindi_meaning:"  :  !            ,       ?",meaning:"Those who are not faithful in this devotional service cannot attain Me, O conqueror of enemies. Therefore they return to the path of birth and death in this material world."},{id:323,verse_number:4,chapter_number:9,text:`    |
     ||-||`,transliteration:`may tatam ida sarva jagad avyakta-mrtin
mat-sthni sarva-bhtni na chha tehv avasthita`,hindi_meaning:"   :   ,   ,                   ",meaning:"By Me, in My unmanifested form, this entire universe is pervaded. All beings are in Me, but I am not in them."},{id:324,verse_number:5,chapter_number:9,text:`       |
     ||-||`,transliteration:`na cha mat-sthni bhtni pahya me yogam aihvaram
bhta-bhin na cha bhta-stho mamtm bhta-bhvana`,hindi_meaning:"   ,          ,         ",meaning:"And yet everything that is created does not rest in Me. Behold My mystic opulence! Although I am the maintainer of all living entities and although I am everywhere, I am not a part of this cosmic manifestation, for My Self is the very source of creation."},{id:325,verse_number:6,chapter_number:9,text:`     |
    ||-||`,transliteration:`yathkha-sthito nitya vyu sarvatra-go mahn
tath sarvi bhtni mat-sthnty upadhraya`,hindi_meaning:" !          ,          ",meaning:"Understand that as the mighty wind, blowing everywhere, rests always in the sky, all created beings rest in Me."},{id:326,verse_number:7,chapter_number:9,text:`     |
    ||-||`,transliteration:`sarva-bhtni kaunteya prakiti ynti mmikm
kalpa-khaye punas tni kalpdau visijmy aham`,hindi_meaning:",                  ",meaning:"O son of Kunti, at the end of the millennium all material manifestations enter into My nature, and at the beginning of another millennium, by My potency, I create them again."},{id:327,verse_number:8,chapter_number:9,text:`     |
   ||-||`,transliteration:`prakiti svm avahabhya visijmi puna puna
bhta-grmam ima kitsnam avaha prakiter vaht`,hindi_meaning:" !               ,       ",meaning:"The whole cosmic order is under Me. Under My will it is automatically manifested again and again, and under My will it is annihilated at the end."},{id:328,verse_number:9,chapter_number:9,text:`       |
   ||-||`,transliteration:`na cha m tni karmi nibadhnanti dhanajaya
udsna-vad snam asakta tehu karmasu`,hindi_meaning:" !     ,           ",meaning:"O Dhananjaya, all this work cannot bind Me. I am ever detached from all these material activities, seated as though neutral."},{id:329,verse_number:10,chapter_number:9,text:`    |
   ||-||`,transliteration:`maydhyakhea prakiti syate sa-charcharam
hetunnena kaunteya jagad viparivartate`,hindi_meaning:"  !                ,        ",meaning:"This material nature, which is one of My energies, is working under My direction, O son of Kunti, producing all moving and nonmoving beings. Under its rule this manifestation is created and annihilated again and again."},{id:330,verse_number:11,chapter_number:9,text:`     |
    ||-||`,transliteration:`avajnanti m mh mnuh tanum hritam
para bhvam ajnanto mama bhta-mahehvaram`,hindi_meaning:"   :       ,                             ",meaning:"Fools deride Me when I descend in the human form. They do not know My transcendental nature as the Supreme Lord of all that be."},{id:331,verse_number:12,chapter_number:9,text:`    |
     ||-||`,transliteration:`moghh mogha-karmo mogha-jn vichetasa
rkhasm sur chaiva prakiti mohin hrit`,hindi_meaning:"     ,  ,    ;           ",meaning:"Those who are thus bewildered are attracted by demonic and atheistic views. In that deluded condition, their hopes for liberation, their fruitive activities, and their culture of knowledge are all defeated."},{id:332,verse_number:13,chapter_number:9,text:`     |
   ||-||`,transliteration:`mahtmnas tu m prtha daiv prakitim hrit
bhajanty ananya-manaso jtv bhtdim avyayam`,hindi_meaning:"     () ,      ,                    ",meaning:"O son of Pritha, those who are not deluded, the great souls, are under the protection of the divine nature. They are fully engaged in devotional service because they know Me as the Supreme Personality of Godhead, original and inexhaustible."},{id:333,verse_number:14,chapter_number:9,text:`     |
     ||-||`,transliteration:`satata krtayanto m yatantah cha diha-vrat
namasyantah cha m bhakty nitya-yukt upsate`,hindi_meaning:" !      -, -  -  ,    !    ",meaning:"Always chanting My glories, endeavoring with great determination, bowing down before Me, these great souls perpetually worship Me with devotion."},{id:334,verse_number:15,chapter_number:9,text:`    |
    ||-||`,transliteration:`jna-yajena chpy anye yajanto mm upsate
ekatvena pithaktvena bahudh vihvato-mukham`,hindi_meaning:" !     (-)   ,  -      ,     ",meaning:"Others, who engage in sacrifice by the cultivation of knowledge, worship the Supreme Lord as the one without a second, as diverse in many, and in the universal form."},{id:335,verse_number:16,chapter_number:9,text:`    |
  ||-||`,transliteration:`aha kratur aha yaja svadhham aham auhadham
mantro ham aham evjyam aham agnir aha hutam`,hindi_meaning:"  ,      ()         ()     ",meaning:"But it is I who am the ritual, I the sacrifice, the offering to the ancestors, the healing herb, the transcendental chant. I am the butter and the fire and the offering."},{id:336,verse_number:17,chapter_number:9,text:`     |
     ||-||`,transliteration:`pitham asya jagato mt dht pitmaha
vedya pavitram okra ik sma yajur eva cha`,hindi_meaning:"         ,            ",meaning:"I am the father of this universe, the mother, the support and the grandsire. I am the object of knowledge, the purifier and the syllable om. I am also the Rig, the Sama and the Yajur Vedas."},{id:337,verse_number:18,chapter_number:9,text:`      |
     ||-||`,transliteration:`gatir bhart prabhu skh nivsa haraa suhit
prabhava pralaya sthna nidhna bjam avyayam`,hindi_meaning:" !   ,          ;    ",meaning:"I am the goal, the sustainer, the master, the witness, the abode, the refuge and the most dear friend. I am the creation and the annihilation, the basis of everything, the resting place and the eternal seed."},{id:338,verse_number:19,chapter_number:9,text:`    |
    ||-||`,transliteration:`tapmy aham aha varha nigihmy utsijmi cha
amita chaiva mityuh cha sad asach chham arjuna`,hindi_meaning:"          ,    ;             ",meaning:"O Arjuna, I give heat, and I withhold and send forth the rain. I am immortality, and I am also death personified. Both spirit and matter are in Me."},{id:339,verse_number:20,chapter_number:9,text:`   
   |
  
   ||-||`,transliteration:`trai-vidy m soma-p pta-pp
yajair ihv svar-gati prrthayante
te puyam sdya surendra-lokam
ahnanti divyn divi deva-bhogn`,hindi_meaning:"              ,        , ,              ",meaning:"Those who study the Vedas and drink the soma juice, seeking the heavenly planets, worship Me indirectly. Purified of sinful reactions, they take birth on the pious, heavenly planet of Indra, where they enjoy godly delights."},{id:340,verse_number:21,chapter_number:9,text:`    
    |
 
   ||-||`,transliteration:`te ta bhuktv svarga-loka vihla
khe puye martya-loka vihanti
eva tray-dharmam anuprapann
gatgata kma-km labhante`,hindi_meaning:" !    ,       ,           ?",meaning:"When they have thus enjoyed vast heavenly sense pleasure and the results of their pious activities are exhausted, they return to this mortal planet again. Thus those who seek sense enjoyment by adhering to the principles of the three Vedas achieve only repeated birth and death."},{id:341,verse_number:22,chapter_number:9,text:`     |
    ||-||`,transliteration:`ananyh chintayanto m ye jan paryupsate
teh nitybhiyuktn yoga-khema vahmy aham`,hindi_meaning:"          ,    ()          ",meaning:"But those who always worship Me with exclusive devotion, meditating on My transcendental formto them I carry what they lack, and I preserve what they have."},{id:342,verse_number:23,chapter_number:9,text:`   |
    ||-||`,transliteration:`ye py anya-devat-bhakt yajante hraddhaynvit
te pi mm eva kaunteya yajanty avidhi-prvakam`,hindi_meaning:"      ,    ,          ",meaning:"Those who are devotees of other gods and who worship them with faith actually worship only Me, O son of Kunti, but they do so in a wrong way."},{id:343,verse_number:24,chapter_number:9,text:`       |
     ||-||`,transliteration:`aha hi sarva-yajn bhokt cha prabhur eva cha
na tu mm abhijnanti tattventah chyavanti te`,hindi_meaning:" , ,      , , ,    ",meaning:"I am the only enjoyer and master of all sacrifices. Therefore, those who do not recognize My true transcendental nature fall down."},{id:344,verse_number:25,chapter_number:9,text:`    |
      ||-||`,transliteration:`ynti deva-vrat devn pitn ynti piti-vrat
bhtni ynti bhtejy ynti mad-yjino pi mm`,hindi_meaning:" ,                ",meaning:"Those who worship the demigods will take birth among the demigods; those who worship the ancestors go to the ancestors; those who worship ghosts and spirits will take birth among such beings; and those who worship Me will live with Me."},{id:345,verse_number:26,chapter_number:9,text:`        |
   ||-||`,transliteration:`patra puhpa phala toya yo me bhakty prayachchhati
tad aha bhakty-upahitam ahnmi prayattmana`,hindi_meaning:" !             ,         ",meaning:"If one offers Me with love and devotion a leaf, a flower, a fruit or water, I will accept it."},{id:346,verse_number:27,chapter_number:9,text:`     |
    ||-||`,transliteration:`yat karohi yad ahnsi yaj juhohi dadsi yat
yat tapasyasi kaunteya tat kuruhva mad-arpaam`,hindi_meaning:"                       ",meaning:"Whatever you do, whatever you eat, whatever you offer or give away, and whatever austerities you performdo that, O son of Kunti, as an offering to Me."},{id:347,verse_number:28,chapter_number:9,text:`   |
   ||-||`,transliteration:`hubhhubha-phalair eva mokhyase karma-bandhanai
sannysa-yoga-yukttm vimukto mm upaihyasi`,hindi_meaning:" !     ,              ?",meaning:"In this way you will be freed from bondage to work and its auspicious and inauspicious results. With your mind fixed on Me in this principle of renunciation, you will be liberated and come to Me."},{id:348,verse_number:29,chapter_number:9,text:`       |
         ||-||`,transliteration:`samo ha sarva-bhtehu na me dvehyo sti na priya
ye bhajanti tu m bhakty mayi te tehu chpy aham`,hindi_meaning:"      ,      ,             ",meaning:"I envy no one, nor am I partial to anyone. I am equal to all. But whoever renders service unto Me in devotion is a friend, is in Me, and I am also a friend to him."},{id:349,verse_number:30,chapter_number:9,text:`    |
      ||-||`,transliteration:`api chet su-durchro bhajate mm ananya-bhk
sdhur eva sa mantavya samyag vyavasito hi sa`,hindi_meaning:" !                     ",meaning:"Even if one commits the most abominable action, if he is engaged in devotional service he is to be considered saintly because he is properly situated in his determination."},{id:350,verse_number:31,chapter_number:9,text:`     |
      ||-||`,transliteration:`khipra bhavati dharmtm hahvach-chhnti nigachchhati
kaunteya pratijnhi na me bhakta praahyati`,hindi_meaning:" !           ;            ",meaning:"He quickly becomes righteous and attains lasting peace. O son of Kunti, declare it boldly that My devotee never perishes."},{id:351,verse_number:32,chapter_number:9,text:`       |
      ||-||`,transliteration:`m hi prtha vyaphritya ye pi syu ppa-yonaya
striyo vaihys tath hdrs te pi ynti par gatim`,hindi_meaning:" !         ,               ",meaning:"O son of Pritha, those who take shelter in Me, though they be of lower birthwomen, vaisyas [merchants] and sudras [laborers]can approach the supreme destination."},{id:352,verse_number:33,chapter_number:9,text:`     |
     ||-||`,transliteration:`ki punar brhma puy bhakt rjarhayas tath
anityam asukha lokam ima prpya bhajasva mm`,hindi_meaning:"      ,           ",meaning:"How much more this is so of the righteous brahmanas, the devotees and the saintly kings. Therefore, having come to this temporary, miserable world, engage in loving service unto Me."},{id:353,verse_number:34,chapter_number:9,text:`      |
   ||-||`,transliteration:`man-man bhava mad-bhakto mad-yj m namaskuru
mm evaihyasi yuktvaivam tmna mat-paryaa`,hindi_meaning:"             ,     ",meaning:"Engage your mind always in thinking of Me, become My devotee, offer obeisances to Me and worship Me. Being completely absorbed in Me, surely you will come to Me."}]},{id:10,name:"",name_meaning:"The Yoga of Divine Glories",chapter_number:10,verses_count:42,summary:"Arjuna asks to hear more about Krishna's divine glories. Krishna describes His opulences, explaining that He is the source of all gods and sages and is manifest in the best of everything in creation.",verses:[{id:354,verse_number:1,chapter_number:10,text:` |
       |
    ||-||`,transliteration:`hr bhagavn uvcha
bhya eva mah-bho hiu me parama vacha
yat te ha pryamya vakhymi hita-kmyay`,hindi_meaning:"             ",meaning:"The Supreme Personality of Godhead said: Listen again, O mighty-armed Arjuna. Because you are My dear friend, for your benefit I shall speak to you further, giving knowledge that is better than what I have already explained."},{id:355,verse_number:2,chapter_number:10,text:`       |
     ||-||`,transliteration:`na me vidu sura-ga prabhava na maharhaya
aham dir hi devn maharh cha sarvaha`,hindi_meaning:"                      ?",meaning:"Neither the hosts of demigods nor the great sages know My origin or opulences, for, in every respect, I am the source of the demigods and sages."},{id:356,verse_number:3,chapter_number:10,text:`     |
     ||-||`,transliteration:`yo mm ajam andi cha vetti loka-mahehvaram
asammha sa martyehu sarva-ppai pramuchyate`,hindi_meaning:" !    ,     ;   ,           ",meaning:"He who knows Me as the unborn, as the beginningless, as the Supreme Lord of all the worldshe only, undeluded among men, is freed from all sins."},{id:357,verse_number:4,chapter_number:10,text:`     |
      ||-||`,transliteration:`buddhir jnam asammoha kham satya dama hama
sukha dukha bhavo bhvo bhaya chbhayam eva cha`,hindi_meaning:"-, -, -                 ",meaning:"Intelligence, knowledge, freedom from doubt and delusion, forgiveness, truthfulness, control of the senses, control of the mind, happiness and distress, birth, death, fear, fearlessness..."},{id:358,verse_number:5,chapter_number:10,text:`     |
      ||-||`,transliteration:`ahis samat tuhis tapo dna yaho yaha
bhavanti bhv bhtn matta eva pithag-vidh`,hindi_meaning:" !       ()     ,        ",meaning:"Nonviolence, equanimity, satisfaction, austerity, charity, fame and infamyall these various qualities of living beings are created by Me alone."},{id:359,verse_number:6,chapter_number:10,text:`     |
       ||-||`,transliteration:`maharhaya sapta prve chatvro manavas tath
mad-bhv mnas jt yeh loka im praj`,hindi_meaning:"            ,         ",meaning:"The seven great sages and before them the four other great sages and the Manus [progenitors of mankind] come from Me, born from My mind, and all the living beings populating the various planets descend from them."},{id:360,verse_number:7,chapter_number:10,text:`        |
     ||-||`,transliteration:`et vibhti yoga cha mama yo vetti tattvata
so vikampena yogena yujyate ntra sahaya`,hindi_meaning:" !        ,          ",meaning:"One who is factually convinced of this opulence and mystic power of Mine engages in unalloyed devotional service; of this there is no doubt."},{id:361,verse_number:8,chapter_number:10,text:`      |
      ||-||`,transliteration:`aha sarvasya prabhavo matta sarva pravartate
iti matv bhajante m budh bhva-samanvit`,hindi_meaning:" !                 ,     ",meaning:"I am the source of all spiritual and material worlds. Everything emanates from Me. The wise who perfectly know this engage in My devotional service and worship Me with all their hearts."},{id:362,verse_number:9,chapter_number:10,text:`    |
       ||-||`,transliteration:`mach-chitt mad-gata-pr bodhayanta parasparam
kathayantah cha m nitya tuhyanti cha ramanti cha`,hindi_meaning:"       ,     ,  -      ",meaning:"The thoughts of My pure devotees dwell in Me, their lives are fully devoted to My service, and they derive great satisfaction and bliss from always enlightening one another and conversing about Me."},{id:363,verse_number:10,chapter_number:10,text:`    |
      ||-||`,transliteration:`teh satata-yuktn bhajat prti-prvakam
dadmi buddhi-yoga ta yena mm upaynti te`,hindi_meaning:"         ,     ",meaning:"To those who are constantly devoted to serving Me with love, I give the understanding by which they can come to Me."},{id:364,verse_number:11,chapter_number:10,text:`  |
   ||-||`,transliteration:`tehm evnukamprtham aham ajna-ja tama
nhaymy tma-bhva-stho jna-dpena bhsvat`,hindi_meaning:"   (, , )      !        ,     ,        -   ",meaning:"To show them special mercy, I, dwelling in their hearts, destroy with the shining lamp of knowledge the darkness born of ignorance."},{id:365,verse_number:12,chapter_number:10,text:`  |
       |
    ||-||`,transliteration:`arjuna uvcha
para brahma para dhma pavitra parama bhavn
puruha hhvata divyam di-devam aja vibhum`,hindi_meaning:"         ,               ",meaning:"Arjuna said: You are the Supreme Personality of Godhead, the ultimate abode, the purest, the Absolute Truth. You are the eternal, transcendental, original person, the unborn, the greatest."},{id:366,verse_number:13,chapter_number:10,text:`   |
       ||-||`,transliteration:`hus tvm ihaya sarve devarhir nradas tath
asito devalo vysa svaya chaiva bravhi me`,hindi_meaning:"      ,                     ",meaning:"All the great sages such as Narada, Asita, Devala and Vyasa confirm this truth about You, and now You Yourself are declaring it to me."},{id:367,verse_number:14,chapter_number:10,text:`     |
       ||-||`,transliteration:`sarvam etad ita manye yan m vadasi kehava
na hi te bhagavan vyakti vidur dev na dnav`,hindi_meaning:" !      , -         ",meaning:"O Krishna, I totally accept as truth all that You have told me. Neither the demigods nor the demons, O Lord, can understand Your personality."},{id:368,verse_number:15,chapter_number:10,text:`    |
    ||-||`,transliteration:`svayam evtmantmna vettha tva puruhottama
bhta-bhvana bhteha deva-deva jagat-pate`,hindi_meaning:" !          ()       ,        ",meaning:"Indeed, You alone know Yourself by Your own internal potency, O Supreme Person, origin of all, Lord of all beings, God of gods, Lord of the universe!"},{id:369,verse_number:16,chapter_number:10,text:`   |
   ||-||`,transliteration:`vaktum arhasy ahehea divy hy tma-vibhtaya
ybhir vibhtibhir lokn ims tva vypya tihhasi`,hindi_meaning:"     ,                    ",meaning:"Please tell me in detail of Your divine opulences by which You pervade all these worlds."},{id:370,verse_number:17,chapter_number:10,text:`     |
      ||-||`,transliteration:`katha vidym aha yogis tv sad parichintayan
kehu kehu cha bhvehu chintyo si bhagavan may`,hindi_meaning:"                       ,    ",meaning:"O Krishna, O supreme mystic, how shall I constantly think of You, and how shall I know You? In what various forms are You to be remembered, O Supreme Personality of Godhead?"},{id:371,verse_number:18,chapter_number:10,text:`     |
      ||-||`,transliteration:`vistaretmano yoga vibhti cha janrdana
bhya kathaya tiptir hi hivato nsti me mitam`,hindi_meaning:"       ,           ",meaning:"O Janardana, again please describe in detail the mystic power of Your opulences. I am never satiated in hearing about You, for the more I hear the more I want to taste the nectar of Your words."},{id:372,verse_number:19,chapter_number:10,text:` |
     |
     ||-||`,transliteration:`hr bhagavn uvcha
hanta te kathayihymi divy hy tma-vibhtaya
prdhnyata kuru-hrehha nsty anto vistarasya me`,hindi_meaning:" !                 ,      ",meaning:"The Supreme Personality of Godhead said: Yes, I will tell you of My splendorous manifestations, but only of those which are prominent, O Arjuna, for My opulence is limitless."},{id:373,verse_number:20,chapter_number:10,text:`   |
      ||-||`,transliteration:`aham tm gukeha sarva-bhthaya-sthita
aham dih cha madhya cha bhtnm anta eva cha`,hindi_meaning:"  :  !      ,    ,    ?    ,       ?",meaning:"I am the Supersoul, O Arjuna, seated in the hearts of all living entities. I am the beginning, the middle and the end of all beings."},{id:374,verse_number:21,chapter_number:10,text:`   |
   ||-||`,transliteration:`ditynm aha vihur jyotih ravir ahumn
marchir marutm asmi nakhatrm aha hah`,hindi_meaning:"   :  !               ,     ",meaning:"Of the Adityas I am Vishnu, of lights I am the radiant sun, of the Maruts I am Marici, and among the stars I am the moon."},{id:375,verse_number:22,chapter_number:10,text:`    |
    ||-||`,transliteration:`vedn sma-vedo smi devnm asmi vsava
indriy manah chsmi bhtnm asmi chetan`,hindi_meaning:"     ,     ,  ,      ,    ",meaning:"Of the Vedas I am the Sama Veda; of the demigods I am Indra, the king of heaven; of the senses I am the mind; and in living beings I am the living force [consciousness]."},{id:376,verse_number:23,chapter_number:10,text:`    |
    ||-||`,transliteration:`rudr hakarah chsmi vitteho yakha-rakhasm
vasn pvakah chsmi meru hikharim aham`,hindi_meaning:"      , -    ,     ",meaning:"Of all the Rudras I am Lord Shiva, of the Yaksas and Raksasas I am the Lord of wealth [Kuvera], of the Vasus I am fire [Agni], and of mountains I am Meru."},{id:377,verse_number:24,chapter_number:10,text:`       |
    ||-||`,transliteration:`purodhas cha mukhya m viddhi prtha bihaspatim
sennnm aha skanda sarasm asmi sgara`,hindi_meaning:"     -  ,         ,    ",meaning:"Of priests, O Arjuna, know Me to be the chief, Brihaspati. Of generals I am Kartikeya, and of bodies of water I am the ocean."},{id:378,verse_number:25,chapter_number:10,text:`   |
    ||-||`,transliteration:`maharh bhigur aha girm asmy ekam akharam
yajn japa-yajo smi sthvar himlaya`,hindi_meaning:"-         ,                 ",meaning:"Of the great sages I am Bhrigu; of vibrations I am the transcendental om. Of sacrifices I am the chanting of the holy names [japa], and of immovable things I am the Himalayas."},{id:379,verse_number:26,chapter_number:10,text:`     |
     ||-||`,transliteration:`ahvattha sarva-vikh devarh cha nrada
gandharv chitraratha siddhn kapilo muni`,hindi_meaning:" !             ",meaning:"Of all trees I am the banyan tree, and of the sages among the demigods I am Narada. Of the Gandharvas I am Citraratha, and among perfected beings I am the sage Kapila."},{id:380,verse_number:27,chapter_number:10,text:`   |
     ||-||`,transliteration:`uchchaihravasam ahvn viddhi mm amitodbhavam
airvata gajendr nar cha nardhipam`,hindi_meaning:" !            ,    ",meaning:"Of horses know Me to be Uccaihsrava, produced during the churning of the ocean for nectar. Of lordly elephants I am Airavata, and among men I am the monarch."},{id:381,verse_number:28,chapter_number:10,text:`    |
    ||-||`,transliteration:`yudhnm aha vajra dhennm asmi kmadhuk
prajanah chsmi kandarpa sarpm asmi vsuki`,hindi_meaning:" !       ,                    ",meaning:"Of weapons I am the thunderbolt; among cows I am the surabhi. Of causes for procreation I am Kandarpa, the god of love, and of serpents I am Vasuki."},{id:382,verse_number:29,chapter_number:10,text:`    |
    ||-||`,transliteration:`anantah chsmi ngn varuo ydasm aham
pitm aryam chsmi yama sayamatm aham`,hindi_meaning:"     ,      ,                      ",meaning:"Of the many-hooded Nagas I am Ananta, and among the aquatics I am the demigod Varuna. Of departed ancestors I am Aryama, and among the dispensers of law I am Yama, the lord of death."},{id:383,verse_number:30,chapter_number:10,text:`    |
     ||-||`,transliteration:`prahldah chsmi daityn kla kalayatm aham
mig cha migendro ha vainateyah cha pakhim`,hindi_meaning:"       , -   ,      ,     ",meaning:"Among the Daitya demons I am the devoted Prahlada, among subduers I am time, among beasts I am the lion, and among birds I am Garuda."},{id:384,verse_number:31,chapter_number:10,text:`    |
    ||-||`,transliteration:`pavana pavatm asmi rma hastra-bhitm aham
jhah makarah chsmi srotasm asmi jhnav`,hindi_meaning:"                     ",meaning:"Of purifiers I am the wind, of the wielders of weapons I am Rama, of fishes I am the shark, and of flowing rivers I am the Ganges."},{id:385,verse_number:32,chapter_number:10,text:`   |
    ||-||`,transliteration:`sargm dir antah cha madhya chaivham arjuna
adhytma-vidy vidyn vda pravadatm aham`,hindi_meaning:"      ,                       ?",meaning:"Of all creations I am the beginning and the end and also the middle, O Arjuna. Of all sciences I am the spiritual science of the self, and among logicians I am the conclusive truth."},{id:386,verse_number:33,chapter_number:10,text:`    |
    ||-||`,transliteration:`akharm a-kro smi dvandva smsikasya cha
aham evkhaya klo dhtha vihvato-mukha`,hindi_meaning:"   ,          -  ,        ",meaning:"Of letters I am the letter A, and among compound words I am the dual compound. I am also inexhaustible time, and of creators I am Brahma."},{id:387,verse_number:34,chapter_number:10,text:`   |
      ||-||`,transliteration:`mityu sarva-harah chham udbhavah cha bhavihyatm
krti hrr vk cha nr smitir medh dhiti kham`,hindi_meaning:" !       -     ,    ",meaning:"I am all-devouring death, and I am the generating principle of all that is yet to be. Among women I am fame, fortune, fine speech, memory, intelligence, steadfastness and patience."},{id:388,verse_number:35,chapter_number:10,text:`     |
   ||-||`,transliteration:`bihat-sma tath smn gyatr chhandasm aham
msn mrga-hrho ham itn kusumkara`,hindi_meaning:"      ,               ,       ",meaning:"Of the hymns in the Sama Veda I am the Brihat-sama, and of poetry I am the Gayatri. Of months I am Margasirsa [November-December], and of seasons I am flower-bearing spring."},{id:389,verse_number:36,chapter_number:10,text:`   |
    ||-||`,transliteration:`dyta chhalayatm asmi tejas tejasvinm aham
jayo smi vyavasyo smi sattva sattvavatm aham`,hindi_meaning:"       -   ,            ,     ",meaning:"I am also the gambling of cheats, and of the splendid I am the splendor. I am victory, I am adventure, and I am the strength of the strong."},{id:390,verse_number:37,chapter_number:10,text:`    |
    ||-||`,transliteration:`vihn vsudevo smi pavn dhanajaya
munnm apy aha vysa kavnm uhan kavi`,hindi_meaning:" !      ,      ,     ",meaning:"Of the descendants of Vrishni I am Vasudeva, and of the Pandavas I am Arjuna. Of the sages I am Vyasa, and among great thinkers I am Usana."},{id:391,verse_number:38,chapter_number:10,text:`    |
     ||-||`,transliteration:`dao damayatm asmi ntir asmi jighatm
mauna chaivsmi guhyn jna jnavatm aham`,hindi_meaning:" !                 ,    ,  -    ",meaning:"Among all means of suppressing lawlessness I am punishment, and of those who seek victory I am morality. Of secret things I am silence, and of the wise I am the wisdom."},{id:392,verse_number:39,chapter_number:10,text:`    |
      ||-||`,transliteration:`yach chpi sarva-bhtn bja tad aham arjuna
na tad asti vin yat syn may bhta charcharam`,hindi_meaning:"  :  !  !        ()  ,           ?",meaning:"Furthermore, O Arjuna, I am the generating seed of all existences. There is no beingmoving or nonmovingthat can exist without Me."},{id:393,verse_number:40,chapter_number:10,text:`     |
     ||-||`,transliteration:`nnto sti mama divyn vibhtn parantapa
eha tddehata prokto vibhter vistaro may`,hindi_meaning:"               ,     ",meaning:"O mighty conqueror of enemies, there is no end to My divine manifestations. What I have spoken to you is but a mere indication of My infinite opulences."},{id:394,verse_number:41,chapter_number:10,text:`   |
    ||-||`,transliteration:`yad yad vibhtimat sattva hrmad rjitam eva v
tat tad evvagachchha tva mama tejo-ha-sambhavam`,hindi_meaning:"   :   !         -         ",meaning:"Know that all opulent, beautiful and glorious creations spring from but a spark of My splendor."},{id:395,verse_number:42,chapter_number:10,text:`     |
    ||-||`,transliteration:`athav bahunaitena ki jtena tavrjuna
vihabhyham ida kitsnam ekhena sthito jagat`,hindi_meaning:"                    ",meaning:"But what need is there, Arjuna, for all this detailed knowledge? With a single fragment of Myself I pervade and support this entire universe."}]},{id:11,name:"",name_meaning:"The Yoga of the Vision of the Cosmic Form",chapter_number:11,verses_count:55,summary:"Arjuna requests to see Krishna's universal form (Vishvarupa). Krishna grants him divine vision and reveals His awe-inspiring, cosmic form, which contains all universes and all beings. Overwhelmed, Arjuna offers prayers and asks Krishna to return to His gentle, four-armed form.",verses:[{id:396,verse_number:1,chapter_number:11,text:`  |
   |
     ||-||`,transliteration:`arjuna uvcha
mad-anugrahya parama guhyam adhytma-sajitam
yat tvayokta vachas tena moho ya vigato mama`,hindi_meaning:"         ,             ",meaning:"Arjuna said: By my hearing the instructions You have kindly given me about these most confidential spiritual subjects, my illusion has now been dispelled."},{id:397,verse_number:2,chapter_number:11,text:`      |
    ||-||`,transliteration:`bhavpyayau hi bhtn hrutau vistaraho may
tvatta kamala-patrkha mhtmyam api chvyayam`,hindi_meaning:"         -    ,      ",meaning:"O lotus-eyed one, I have heard from You in detail about the appearance and disappearance of every living entity and have realized Your inexhaustible glories."},{id:398,verse_number:3,chapter_number:11,text:`   |
    ||-||`,transliteration:`evam etad yathttha tvam tmna paramehvara
drahum ichchhmi te rpam aihvara puruhottama`,hindi_meaning:" !              ,   ",meaning:"O greatest of all personalities, O supreme form, though I see You here before me in Your actual position, as You have described Yourself, I wish to see how You have entered into this cosmic manifestation. I want to see that form of Yours."},{id:399,verse_number:4,chapter_number:11,text:`      |
     ||-||`,transliteration:`manyase yadi tach chhakya may drahum iti prabho
yogehvara tato me tva darhaytmnam avyayam`,hindi_meaning:"   ,               -    ",meaning:"If You think that I am able to behold Your cosmic form, O my Lord, O master of all mystic power, then kindly show me that universal Self."},{id:400,verse_number:5,chapter_number:11,text:` |
      |
    ||-||`,transliteration:`hr bhagavn uvcha
pahya me prtha rpi hataho tha sahasraha
nn-vidhni divyni nn-varkitni cha`,hindi_meaning:" !                   ,   ",meaning:"The Supreme Personality of Godhead said: My dear Arjuna, O son of Pritha, see now My opulences, hundreds of thousands of varied divine and multicolored forms."},{id:401,verse_number:6,chapter_number:11,text:`  |
   ||-||`,transliteration:`pahydityn vasn rudrn ahvinau marutas tath
bahny adiha-prvi pahyhcharyi bhrata`,hindi_meaning:"        :            (     ) ",meaning:"O best of the Bharatas, see here the different manifestations of Adityas, Vasus, Rudras, Asvini-kumaras and all the other demigods. Behold the many wonderful things which no one has ever seen or heard of before."},{id:402,verse_number:7,chapter_number:11,text:`    |
    ||-||`,transliteration:`ihaika-stha jagat kitsna pahydya sa-charcharam
mama dehe gukeha yach chnyad drahum ichchhasi`,hindi_meaning:"            -         ",meaning:"O Arjuna, whatever you wish to see, behold at once in this body of Mine! This universal form can show you whatever you now desire to see and whatever you may want to see in the future. Everythingmoving and nonmovingis here completely, in one place."},{id:403,verse_number:8,chapter_number:11,text:`      |
       ||-||`,transliteration:`na tu m hakyase drahum anenaiva sva-chakhuh
divya dadmi te chakhu pahya me yogam aihvaram`,hindi_meaning:"                     ,   ",meaning:"But you cannot see Me with your present eyes. Therefore I give you divine eyes. Behold My mystic opulence!"},{id:404,verse_number:9,chapter_number:11,text:`  |
    |
    ||-||`,transliteration:`sajaya uvcha
evam uktv tato rjan mah-yogehvaro hari
darhaym sa prthya parama rpam aihvaram`,hindi_meaning:"            ,       ,     ",meaning:"Sanjaya said: O King, having spoken thus, the Supreme Lord of all mystic power, the Personality of Godhead, displayed His universal form to Arjuna."},{id:405,verse_number:10,chapter_number:11,text:` |
  ||-||`,transliteration:`aneka-vaktra-nayanam anekdbhuta-darhanam
aneka-divybharaa divynekodyatyudham`,hindi_meaning:"      ,       ,           ",meaning:"Arjuna saw in that universal form unlimited mouths, unlimited eyes, unlimited wonderful visions. The form was decorated with many celestial ornaments and bore many divine upraised weapons."},{id:406,verse_number:11,chapter_number:11,text:`  |
   ||-||`,transliteration:`divya-mlymbara-dhara divya-gandhnulepanam
sarvhcharya-maya devam ananta vihvato-mukham`,hindi_meaning:"     ,   ()            ",meaning:"He wore celestial garlands and garments, and many divine scents were smeared over His body. All was wondrous, brilliant, unlimited, all-expanding."},{id:407,verse_number:12,chapter_number:11,text:`   |
      ||-||`,transliteration:`divi srya-sahasrasya bhaved yugapad utthit
yadi bh sadih s syd bhsas tasya mahtmana`,hindi_meaning:" !          ,        -    ,     ",meaning:"If hundreds of thousands of suns were to rise at once into the sky, their radiance might resemble the effulgence of the Supreme Person in that universal form."},{id:408,verse_number:13,chapter_number:11,text:`   |
   ||-||`,transliteration:`tatraika-stha jagat kitsna pravibhaktam anekadh
apahyad deva-devasya harre pavas tad`,hindi_meaning:"      ,          ,      ",meaning:"At that time Arjuna could see in the universal form of the Lord the unlimited expansions of the universe situated in one place although divided into many, many thousands."},{id:409,verse_number:14,chapter_number:11,text:`     |
    ||-||`,transliteration:`tata sa vismayviho hiha-rom dhanajaya
praamya hiras deva kitjalir abhhata`,hindi_meaning:"                           ",meaning:"Then, bewildered and astonished, his hair standing on end, Arjuna bowed his head to offer obeisances and with folded hands began to pray to the Supreme Lord."},{id:410,verse_number:15,chapter_number:11,text:`  |
   
  |
 
   ||-||`,transliteration:`arjuna uvcha
pahymi devs tava deva dehe
sarvs tath bhta-viheha-saghn
brahmam ha kamalsana-stham
ihh cha sarvn uragh cha divyn`,hindi_meaning:"    ,               ",meaning:"Arjuna said: My dear Lord Krishna, I see assembled in Your body all the demigods and various other living entities. I see Brahma sitting on the lotus flower, as well as Lord Shiva and all the sages and divine serpents."},{id:411,verse_number:16,chapter_number:11,text:`
   |
    
   ||-||`,transliteration:`aneka-bhdara-vaktra-netra
pahymi tv sarvato nanta-rpam
nnta na madhya na punas tavdi
pahymi vihvehvara vihva-rpa`,hindi_meaning:"                     ",meaning:"O Lord of the universe, O universal form, I see in Your body many, many arms, bellies, mouths and eyes, expanded everywhere, without limit. I see in You no end, no middle and no beginning."},{id:412,verse_number:17,chapter_number:11,text:`   
   |
   
 ||-||`,transliteration:`kirina gadina chakria cha
tejo-rhi sarvato dptimantam
pahymi tv durnirkhya samantd
dptnalrka-dyutim aprameyam`,hindi_meaning:"     ,            ,     ",meaning:"Your form is difficult to see because of its glaring effulgence, spreading on all sides, like blazing fire or the immeasurable radiance of the sun. Yet I see this glowing form everywhere, adorned with various crowns, clubs and discs."},{id:413,verse_number:18,chapter_number:11,text:`  
    |
 
    ||-||`,transliteration:`tvam akhara parama veditavya
tvam asya vihvasya para nidhnam
tvam avyaya hhvata-dharma-gopt
santanas tva puruho mato me`,hindi_meaning:" !         ,            ,        ",meaning:"You are the supreme primal objective. You are the ultimate resting place of all this universe. You are inexhaustible, and You are the oldest. You are the maintainer of the eternal religion, the Personality of Godhead. This is my opinion."},{id:414,verse_number:19,chapter_number:11,text:`
  |
  
   ||-||`,transliteration:`andi-madhyntam ananta-vryam
ananta-bhu hahi-srya-netram
pahymi tv dpta-hutha-vaktra
sva-tejas vihvam ida tapantam`,hindi_meaning:" !      ,              ",meaning:"You are without origin, middle or end. Your glory is unlimited. You have numberless arms, and the sun and moon are Your eyes. I see You with blazing fire coming forth from Your mouth, burning this entire universe by Your own radiance."},{id:415,verse_number:20,chapter_number:11,text:` 
    |
  
   ||-||`,transliteration:`dyv -pithivyor idam antara hi
vypta tvayaikena dihah cha sarv
dihvdbhuta rpam ugra taveda
loka-traya pravyathita mahtman`,hindi_meaning:" !          ,              ,   ",meaning:"Although You are one, You spread throughout the sky and the planets and all space between. O great one, seeing this wondrous and terrible form, all the planetary systems are perturbed."},{id:416,verse_number:21,chapter_number:11,text:`    
   |
 
    ||-||`,transliteration:`am hi tv sura-sagh vihanti
kechid bht prjalayo gianti
svastty uktv maharhi-siddha-sagh
stuvanti tv stutibhi puhkalbhi`,hindi_meaning:"                    ",meaning:"All the hosts of demigods are surrendering before You and entering into You. Some of them, very much afraid, are offering prayers with folded hands. Hosts of great sages and perfected beings, crying All peace! are praying to You by singing the Vedic hymns."},{id:417,verse_number:22,chapter_number:11,text:`    
  |

    ||-||`,transliteration:`rudrdity vasavo ye cha sdhy
vihve hvinau marutah chohmaph cha
gandharva-yakhsura-siddha-sagh
vkhante tv vismith chaiva sarve`,hindi_meaning:"     ,       ,            ",meaning:"All the various manifestations of Lord Shiva, the Adityas, the Vasus, the Sadhyas, the Visvedevas, the two Asvis, the Maruts, the forefathers, the Gandharvas, the Yaksas, the Asuras and the perfected demigods are beholding You in wonder."},{id:418,verse_number:23,chapter_number:11,text:`  
  |
 
   ||-||`,transliteration:`rpa mahat te bahu-vaktra-netra
mah-bho bahu-bhru-pdam
bahdara bahu-dahr-karla
dihv lok pravyathits tathham`,hindi_meaning:" !          ,                ",meaning:"O mighty-armed one, all the planets with their demigods are perturbed at seeing Your great form, with its many faces, eyes, arms, thighs, legs, and bellies and Your many terrible teeth; and as they are perturbed, so am I."},{id:419,verse_number:24,chapter_number:11,text:` 
  |
   
      ||-||`,transliteration:`nabha-spiha dptam aneka-vara
vyttnana dpta-vihla-netram
dihv hi tv pravyathitntar-tm
dhiti na vindmi hama cha viho`,hindi_meaning:" !      ,           ,    ,    ",meaning:"O all-pervading Vishnu, seeing You with Your many radiant colors touching the sky, Your gaping mouths, and Your great glowing eyes, my mind is perturbed by fear. I can no longer maintain my steadiness or equilibrium of mind."},{id:420,verse_number:25,chapter_number:11,text:`   
  |
      
   ||-||`,transliteration:`dahr-karlni cha te mukhni
dihvaiva klnala-sannibhni
diho na jne na labhe cha harma
prasda deveha jagan-nivsa`,hindi_meaning:"     ,             ,            ",meaning:"O Lord of lords, O refuge of the worlds, please be gracious to me. I cannot keep my balance seeing thus Your blazing deathlike faces and awful teeth. In all directions I am bewildered."},{id:421,verse_number:26,chapter_number:11,text:`    
  |
  
  ||-||`,transliteration:`am cha tv dhitarhrasya putr
sarve sahaivvani-pla-saghai
bhhmo droa sta-putras tathsau
sahsmadyair api yodha-mukhyai`,hindi_meaning:" !      ,   ,  ,                 ",meaning:"All the sons of Dhritarashtra, along with their allied kings, and Bhishma, Drona, Karnaand our chief soldiers alsoare rushing into Your fearful mouths."},{id:422,verse_number:27,chapter_number:11,text:`   
  |
 
  ||-||`,transliteration:`vaktri te tvaram vihanti
dahr-karlni bhaynakni
kechid vilagn dahanntarehu
sandihyante chritair uttamgai`,hindi_meaning:" !         ,     ,     ",meaning:"And some I see trapped with their heads smashed between Your teeth."},{id:423,verse_number:28,chapter_number:11,text:`  
  |
  
  ||-||`,transliteration:`yath nadn bahavo mbu-veg
samudram evbhimukh dravanti
tath tavm nara-loka-vr
vihanti vaktry abhivijvalanti`,hindi_meaning:"         ,     ",meaning:"As the many waves of the rivers flow into the ocean, so do all these great warriors enter Your blazing mouths."},{id:424,verse_number:29,chapter_number:11,text:`   
   |
   
   ||-||`,transliteration:`yath pradpta jvalana patag
vihanti nhya samiddha-veg
tathaiva nhya vihanti loks
tavpi vaktri samiddha-veg`,hindi_meaning:"        ,           ?",meaning:"I see all people rushing full speed into Your mouths, as moths dash to destruction in a blazing fire."},{id:425,verse_number:30,chapter_number:11,text:`  
 |
 
   ||-||`,transliteration:`lelihyase grasamna samantl
lokn samagrn vadanair jvaladbhi
tejobhir prya jagat samagra
bhsas tavogr pratapanti viho`,hindi_meaning:"  -   -    ,         ",meaning:"O Vishnu, I see You devouring all people from all sides with Your flaming mouths. Covering all the universe with Your effulgence, You are manifest with terrible, scorching rays."},{id:426,verse_number:31,chapter_number:11,text:`   
    |
 
     ||-||`,transliteration:`khyhi me ko bhavn ugra-rpo
namo stu te deva-vara prasda
vijtum ichchhmi bhavantam dya
na hi prajnmi tava pravittim`,hindi_meaning:"    ,     ,              ",meaning:"O Lord of lords, so fierce of form, please tell me who You are. I offer my obeisances unto You; please be gracious to me. You are the primal Lord. I want to know about You, for I do not know what Your mission is."},{id:427,verse_number:32,chapter_number:11,text:` |
 
  |
    
   ||-||`,transliteration:`hr bhagavn uvcha
klo smi loka-khaya-kit praviddho
lokn samhartum iha pravitta
ite pi tv na bhavihyanti sarve
ye vasthit pratyankehu yodh`,hindi_meaning:"  :  !            ,       ?",meaning:"The Supreme Personality of Godhead said: Time I am, the great destroyer of the worlds, and I have come here to destroy all people. With the exception of you [the Pandavas], all the soldiers here on both sides will be slain."},{id:428,verse_number:33,chapter_number:11,text:`  
    |
  
   ||-||`,transliteration:`tasmt tvam uttihha yaho labhasva
jitv hatrn bhukhva rjya samiddham
 Mayaivaita nihat prvam eva
 nimitta-mtra bhava savya-schin`,hindi_meaning:"   :   ,   ,                   ",meaning:"Therefore get up. Prepare to fight and win glory. Conquer your enemies and enjoy a flourishing kingdom. They are already put to death by My arrangement, and you, O Savyasaci, can be but an instrument in the fight."},{id:429,verse_number:34,chapter_number:11,text:`     
   |
    
    ||-||`,transliteration:`droa cha bhhma cha jayadratha cha
kara tathnyn api yodha-vrn
may hats tva jahi m vyathihh
yudhyasva jetsi rae sapatnn`,hindi_meaning:"   ,          ,         ",meaning:"Drona, Bhishma, Jayadratha, Karna and the other great warriors have already been destroyed by Me. Therefore, kill them and do not be disturbed. Simply fight, and you will vanquish your enemies in battle."},{id:430,verse_number:35,chapter_number:11,text:`  |
  
  |
   
   ||-||`,transliteration:`sajaya uvcha
etach chhrutv vachana kehavasya
kitjalir vepamna kir
namaskitv bhya evha kiha
sa-gadgada bhta-bhta praamya`,hindi_meaning:" !          ,          ",meaning:"Sanjaya said to Dhritarashtra: O King, after hearing these words from the Supreme Personality of Godhead, the trembling Arjuna offered obeisances with folded hands again and again. He spoke in a faltering voice, out of great fear."},{id:431,verse_number:36,chapter_number:11,text:`  |
   
  |
   
    ||-||`,transliteration:`arjuna uvcha
sthne hihkeha tava prakrty
jagat prahihyaty anurajyate cha
rakhsi bhtni diho dravanti
sarve namasyanti cha siddha-sagh`,hindi_meaning:",                  ",meaning:"Arjuna said: O master of the senses, the world becomes joyful upon hearing Your name, and thus everyone becomes attached to You. Although the perfected beings offer You their respectful homage, the demons are afraid, and they flee here and there. All this is rightly done."},{id:432,verse_number:37,chapter_number:11,text:`   
  |
  
   ||-||`,transliteration:`kasmch cha te na nameran mahtman
garyase brahmao py di-kartre
ananta deveha jagan-nivsa
tvam akhara sad-asat tat para yat`,hindi_meaning:" !               ,       ",meaning:"O great one, who stands above even Brahma, You are the original master. Why should they not offer their respectful obeisances unto You? O limitless one, God of gods, refuge of the universe! You are the invincible source, the cause of all causes, transcendental to this material manifestation."},{id:433,verse_number:38,chapter_number:11,text:`  
    |
     
   ||-||`,transliteration:`tvam di-deva puruha puras
tvam asya vihvasya para nidhnam
vettsi vedya cha para cha dhma
tvay tata vihvam ananta-rpa`,hindi_meaning:" !     ,           ",meaning:"You are the original Personality of Godhead, the oldest, the ultimate sanctuary of this manifested cosmic world. You are the knower of everything, and You are all that is knowable. You are the supreme refuge, above the material modes. O limitless form! This whole cosmic manifestation is pervaded by You!"},{id:434,verse_number:39,chapter_number:11,text:` 
  |
  
    ||-||`,transliteration:`vyur yamo gnir varua hahka
prajpatis tva prapitmahah cha
namo namas te stu sahasra-kitva
punah cha bhyo pi namo namas te`,hindi_meaning:"  !                ,        ",meaning:"You are air, and You are the supreme controller! You are fire, You are water, and You are the moon! You are Brahma, the first living creature, and You are the great-grandfather. I therefore offer my respectful obeisances unto You a thousand times, and again and yet again!"},{id:435,verse_number:40,chapter_number:11,text:`  
     |

    ||-||`,transliteration:`nama purastd atha pihhatas te
namo stu te sarvata eva sarva
ananta-vrymita-vikramas tva
sarva sampnohi tato si sarva`,hindi_meaning:"   :         ,           ",meaning:"Obeisances to You from the front, from behind and from all sides! O unbounded power, You are the master of limitless might! You are all-pervading, and thus You are everything!"},{id:436,verse_number:41,chapter_number:11,text:`   
      |
  
   ||-||`,transliteration:`sakheti matv prasabha yad ukta
he kiha he ydava he sakheti
ajanat mahimna taveda
may pramdt praayena vpi`,hindi_meaning:"         ,        ",meaning:"Thinking of You as my friend, I have rashly addressed You O Krishna, O Yadava, O my friend, not knowing Your glories. Please forgive whatever I may have done in madness or in love."},{id:437,verse_number:42,chapter_number:11,text:`
 |
 
  ||-||`,transliteration:`yach chvahsrtham asat-kito si
vihra-hayysana-bhojanehu
eko thavpy achyuta tat-samakha
tat khmaye tvm aham aprameyam`,hindi_meaning:" !         ,       ",meaning:"I have dishonored You many times, jesting as we relaxed, lay on the same bed, or sat or ate together, sometimes alone and sometimes in front of many friends. O infallible one, please excuse me for all those offenses."},{id:438,verse_number:43,chapter_number:11,text:`  
   |
  
 ||-||`,transliteration:`pitsi lokasya charcharasya
tvam asya pjyah cha gurur garyn
na tvat-samo sty abhyadhika kuto nyo
loka-traye py apratima-prabhva`,hindi_meaning:"  :                        ?",meaning:"You are the father of this complete cosmic manifestation, of the moving and the nonmoving. You are its worshipable chief, the supreme spiritual master. No one is greater than You, nor can anyone be one with You. How then could there be anyone greater than You within the three worlds, O Lord of immeasurable power?"},{id:439,verse_number:44,chapter_number:11,text:`  
  |
   
    ||-||`,transliteration:`tasmt praamya praidhya kya
prasdaye tvm aham ham yam
piteva putrasya sakheva sakhyu
priya priyyrhasi deva sohum`,hindi_meaning:"   :  !  !             ,    ",meaning:"You are the Supreme Lord, to be worshiped by every living being. Thus I fall down to offer You my respectful obeisances and ask Your mercy. As a father tolerates the impudence of his son, or a friend tolerates the impertinence of a friend, or a husband tolerates the familiarity of his wife, please tolerate the wrongs I may have done You."},{id:440,verse_number:45,chapter_number:11,text:`  
     |
    
   ||-||`,transliteration:`adiha-prva hihito smi dihv
bhayena cha pravyathita mano me
tad eva me darhaya deva rpa
prasda deveha jagan-nivsa`,hindi_meaning:"  ,           ,              ",meaning:"After seeing this universal form, which I have never seen before, I am gladdened, but at the same time my mind is disturbed with fear. Therefore please bestow Your grace upon me and reveal again Your form as the Personality of Godhead, O Lord of lords, O abode of the universe."},{id:441,verse_number:46,chapter_number:11,text:`  
    |
  
   ||-||`,transliteration:`kirina gadina chakra-hastam
ichchhmi tv drahum aha tathaiva
tenaiva rpea chatur-bhujena
sahasra-bho bhava vihva-mrte`,hindi_meaning:" ! -         , -      ",meaning:"O universal form, O thousand-armed Lord, I wish to see You in Your four-armed form, with helmeted head and with club, wheel, conch and lotus flower in Your hands. I long to see You in that form."},{id:442,verse_number:47,chapter_number:11,text:` |
  
   |
 
    ||-||`,transliteration:`hr bhagavn uvcha
may prasannena tavrjuneda
rpa para darhitam tma-yogt
tejo-maya vihvam anantam dya
yan me tvad-anyena na diha-prvam`,hindi_meaning:"  ,           -    ",meaning:"The Supreme Personality of Godhead said: My dear Arjuna, happily have I shown you, by My internal potency, this supreme universal form within the material world. No one before you has ever seen this primal form, unlimited and full of glaring effulgence."},{id:443,verse_number:48,chapter_number:11,text:`  
    |
   
   ||-||`,transliteration:`na veda-yajdhyayanair na dnair
na cha kriybhir na tapobhir ugrai
eva-rpa hakya aha ni-loke
drahu tvad-anyena kuru-pravra`,hindi_meaning:" !           ,         ,     ",meaning:"O best of the Kuru warriors, no one before you has ever seen this universal form of Mine, for neither by studying the Vedas, nor by performing sacrifices, nor by charity, nor by pious activities, nor by severe penances can I be seen in this form in the material world."},{id:444,verse_number:49,chapter_number:11,text:`     
   |
  
    ||-||`,transliteration:`m te vyath m cha vimha-bhvo
dihv rpa ghoram di mamedam
vyapeta-bh prta-man punas tva
tad eva me rpam ida prapahya`,hindi_meaning:",      ,   ,                   ",meaning:"You have been perturbed and bewildered by seeing this horrible feature of Mine. Now let it be finished. My devotee, be free again from all disturbances. With a peaceful mind you can now see the form you desire."},{id:445,verse_number:50,chapter_number:11,text:`  |
 
    |
  
   ||-||`,transliteration:`sajaya uvcha
ity arjuna vsudevas tathoktv
svaka rpa darhaym sa bhya
hvsaym sa cha bhtam ena
bhtv puna saumya-vapur mahtm`,hindi_meaning:"    ,         !           ",meaning:"Sanjaya said to Dhritarashtra: The Supreme Personality of Godhead, Krishna, having spoken thus to Arjuna, displayed His real four-armed form and at last showed His two-armed form, thus encouraging the fearful Arjuna."},{id:446,verse_number:51,chapter_number:11,text:`  |
      |
     ||-||`,transliteration:`arjuna uvcha
dihveda mnuha rpa tava saumya janrdana
idnm asmi savitta sa-chet prakiti gata`,hindi_meaning:"                    ",meaning:"When Arjuna thus saw Krishna in His original form, he said: O Janardana, seeing this humanlike form, so very beautiful, I am now composed in mind, and I am restored to my original nature."},{id:447,verse_number:52,chapter_number:11,text:` |
    |
     ||-||`,transliteration:`hr bhagavn uvcha
su-durdarham ida rpa dihavn asi yan mama
dev apy asya rpasya nitya darhana-kkhia`,hindi_meaning:"               ,         ",meaning:"The Supreme Personality of Godhead said: My dear Arjuna, this form of Mine you are now seeing is very difficult to behold. Even the demigods are ever seeking the opportunity to see this form, which is so dear."},{id:448,verse_number:53,chapter_number:11,text:`       |
      ||-||`,transliteration:`nha vedair na tapas na dnena na chejyay
hakya eva-vidho drahu dihavn asi m yath`,hindi_meaning:"    ,            ,        ",meaning:"The form you are seeing with your transcendental eyes cannot be understood simply by studying the Vedas, nor by undergoing serious penances, nor by charity, nor by worship. It is not by these means that one can see Me as I am."},{id:449,verse_number:54,chapter_number:11,text:`    |
       ||-||`,transliteration:`bhakty tv ananyay hakya aham eva-vidho rjuna
jtu drahu cha tattvena pravehu cha parantapa`,hindi_meaning:"                      ",meaning:"My dear Arjuna, only by undivided devotional service can I be understood as I am, standing before you, and can thus be seen directly. Only in this way can you enter into the mysteries of My understanding."},{id:450,verse_number:55,chapter_number:11,text:`   |
      ||-||`,transliteration:`mat-karma-kin mat-paramo mad-bhakta saga-varjita
nirvaira sarva-bhtehu ya sa mm eti pava`,hindi_meaning:"  ,        -            ",meaning:"My dear Arjuna, he who engages in My pure devotional service, free from the contaminations of fruitive activities and mental speculation, he who works for Me, who makes Me the supreme goal of his life, and who is friendly to every living beinghe certainly comes to Me."}]},{id:12,name:"",name_meaning:"The Yoga of Devotion",chapter_number:12,verses_count:20,summary:"Arjuna asks whether it is better to worship Krishna's personal form or the impersonal, unmanifest Brahman. Krishna declares that the path of devotion to His personal form is the highest and easiest, and He describes the qualities of His dear devotees.",verses:[{id:451,verse_number:1,chapter_number:12,text:`  |
     |
     ||-||`,transliteration:`arjuna uvcha
eva satata-yukt ye bhakts tv paryupsate
ye chpy akharam avyakta teh ke yoga-vittam`,hindi_meaning:"            ,         ,     ",meaning:"Arjuna inquired: Which are considered to be more perfect, those who are always properly engaged in Your devotional service or those who worship the impersonal Brahman, the unmanifested?"},{id:452,verse_number:2,chapter_number:12,text:` |
      |
     ||-||`,transliteration:`hr bhagavn uvcha
mayy vehya mano ye m nitya-yukt upsate
hraddhay parayopets te me yuktatam mat`,hindi_meaning:"             ,          ",meaning:"The Supreme Personality of Godhead said: Those who fix their minds on My personal form and are always engaged in worshiping Me with great and transcendental faith are considered by Me to be most perfect."},{id:453,verse_number:3,chapter_number:12,text:`   |
    ||-||`,transliteration:`ye tv akharam anirdehyam avyakta paryupsate
sarvatra-gam achintya cha ka-stham achala dhruvam`,hindi_meaning:"              ,            ",meaning:"But those who fully worship the unmanifested, that which lies beyond the perception of the senses, the all-pervading, inconceivable, unchanging, fixed and immovablethe impersonal conception of the Absolute Truth..."},{id:454,verse_number:4,chapter_number:12,text:`   |
     ||-||`,transliteration:`sanniyamyendriya-grma sarvatra sama-buddhaya
te prpnuvanti mm eva sarva-bhta-hite rat`,hindi_meaning:"      ,       ,      ,      ",meaning:"...by controlling the various senses and being equally disposed to everyone, such persons, engaged in the welfare of all, at last achieve Me."},{id:455,verse_number:5,chapter_number:12,text:` |
    ||-||`,transliteration:`kleho dhikataras tehm avyaktsakta-chetasm
avyakt hi gatir dukha dehavadbhir avpyate`,hindi_meaning:"     ,   ,       ,  -     ,    ",meaning:"For those whose minds are attached to the unmanifested, impersonal feature of the Supreme, advancement is very troublesome. To make progress in that discipline is always difficult for those who are embodied."},{id:456,verse_number:6,chapter_number:12,text:`       |
     ||-||`,transliteration:`ye tu sarvi karmi mayi sannyasya mat-par
ananyenaiva yogena m dhyyanta upsate`,hindi_meaning:"        ,     ,      -    ,        ",meaning:"But those who worship Me, giving up all their activities unto Me and being devoted to Me without deviation, engaged in devotional service and always meditating upon Me..."},{id:457,verse_number:7,chapter_number:12,text:`   |
   ||-||`,transliteration:`tehm aha samuddhart mityu-sasra-sgart
bhavmi na chirt prtha mayy vehita-chetasm`,hindi_meaning:"           ,             ",meaning:"...having fixed their minds upon Me, O son of Prithafor them I am the swift deliverer from the ocean of birth and death."},{id:458,verse_number:8,chapter_number:12,text:`      |
      ||-||`,transliteration:`mayy eva mana dhatsva mayi buddhi nivehaya
nivasihyasi mayy eva ata rdhva na sahaya`,hindi_meaning:"  ,   ,   ,    -             ",meaning:"Just fix your mind upon Me, the Supreme Personality of Godhead, and engage all your intelligence in Me. Thus you will live in Me always, without a doubt."},{id:459,verse_number:9,chapter_number:12,text:`       |
    ||-||`,transliteration:`atha chitta samdhtu na haknohi mayi sthiram
abhysa-yogena tato mm ichchhptu dhanajaya`,hindi_meaning:"       ,         ",meaning:"My dear Arjuna, O winner of wealth, if you cannot fix your mind upon Me without deviation, then follow the regulative principles of bhakti-yoga. In this way develop a desire to attain Me."},{id:460,verse_number:10,chapter_number:12,text:`   |
   ||-||`,transliteration:`abhyse py asamartho si mat-karma-paramo bhava
mad-artham api karmi kurvan siddhim avpsyasi`,hindi_meaning:"           ,              ",meaning:"If you cannot practice the regulations of bhakti-yoga, then just try to work for Me, because by working for Me you will come to the perfect stage."},{id:461,verse_number:11,chapter_number:12,text:`   |
    ||-||`,transliteration:`athaitad apy ahakto si kartu mad-yogam hrita
sarva-karma-phala-tyga tata kuru yattmavn`,hindi_meaning:"               ",meaning:"If, however, you are unable to work in this consciousness of Me, then try to act giving up all results of your work and try to be self-situated."},{id:462,verse_number:12,chapter_number:12,text:`    |
 ||-||`,transliteration:`hreyo hi jnam abhysj jnd dhyna vihihyate
dhynt karma-phala-tygas tygch chhntir anantaram`,hindi_meaning:"      ,    ,    ,     -       ",meaning:"If you cannot take to this practice, then engage yourself in the cultivation of knowledge. Better than knowledge, however, is meditation, and better than meditation is renunciation of the fruits of action, for by such renunciation one can attain peace of mind."},{id:463,verse_number:13,chapter_number:12,text:`      |
    ||-||`,transliteration:`adveh sarva-bhtn maitra karua eva cha
nirmamo nirahakra sama-dukha-sukha kham`,hindi_meaning:"    ,       ,     -      ",meaning:"One who is not envious but is a kind friend to all living entities, who does not think himself a proprietor and is free from false ego, who is equal in both happiness and distress, who is tolerant..."},{id:464,verse_number:14,chapter_number:12,text:`     |
     ||-||`,transliteration:`santuha satata yog yattm diha-nihchaya
mayy arpita-mano-buddhir yo mad-bhakta sa me priya`,hindi_meaning:" !   ,     ,        ",meaning:"...always satisfied, self-controlled, and engaged in devotional service with determination, his mind and intelligence fixed on Mesuch a devotee of Mine is very dear to Me."},{id:465,verse_number:15,chapter_number:12,text:`     |
      ||-||`,transliteration:`yasmn nodvijate loko lokn nodvijate cha ya
harhmarha-bhayodvegair mukto ya sa cha me priya`,hindi_meaning:" !       ,  ,       ",meaning:"He by whom no one is put into difficulty and who is not disturbed by anyone, who is equipoised in happiness and distress, fear and anxiety, is very dear to Me."},{id:466,verse_number:16,chapter_number:12,text:`    |
      ||-||`,transliteration:`anapekha huchir dakha udsno gata-vyatha
sarvrambha-parityg yo mad-bhakta sa me priya`,hindi_meaning:" !      ,        ",meaning:"My devotee who is not dependent on the ordinary course of activities, who is pure, expert, without cares, free from all pains, and not striving for some result, is very dear to Me."},{id:467,verse_number:17,chapter_number:12,text:`         |
     ||-||`,transliteration:`yo na hihyati na dvehi na hochati na kkhati
hubhhubha-parityg bhaktimn ya sa me priya`,hindi_meaning:" !  ,        ,         ",meaning:"One who neither rejoices nor grieves, who neither laments nor desires, and who renounces both auspicious and inauspicious thingssuch a devotee is very dear to Me."},{id:468,verse_number:18,chapter_number:12,text:`       |
   ||-||`,transliteration:`sama hatrau cha mitre cha tath mnpamnayo
htoha-sukha-dukhehu sama saga-vivarjita`,hindi_meaning:"    ,       ",meaning:"One who is equal to friends and enemies, who is equipoised in honor and dishonor, heat and cold, happiness and distress, fame and infamy, who is always free from contaminating association..."},{id:469,verse_number:19,chapter_number:12,text:`    |
    ||-||`,transliteration:`tulya-nind-stutir maun santuho yena kenachit
aniketa sthira-matir bhaktimn me priyo nara`,hindi_meaning:" !        ,               ",meaning:"...who is always silent and satisfied with anything, who doesnt care for any residence, who is fixed in knowledge and who is engaged in devotional servicesuch a person is very dear to Me."},{id:470,verse_number:20,chapter_number:12,text:`     |
     ||-||`,transliteration:`ye tu dharmymitam ida yathokta paryupsate
hraddadhn mat-param bhakts te tva me priy`,hindi_meaning:"         ,            ",meaning:"Those who follow this imperishable path of devotional service and who completely engage themselves with faith, making Me the supreme goal, are very, very dear to Me."}]},{id:13,name:"",name_meaning:"The Yoga of the Field and the Knower of the Field",chapter_number:13,verses_count:35,summary:"Krishna explains the difference between the physical body (the field, or 'kshetra') and the eternal soul (the knower of the field, or 'kshetrajna'). He describes the components of the material world and the qualities required to attain true knowledge.",verses:[{id:471,verse_number:1,chapter_number:13,text:`  |
      |
     ||-||`,transliteration:`arjuna uvcha
prakiti puruha chaiva khetra khetrajam eva cha
etad veditum ichchhmi jna jeya cha kehava`,hindi_meaning:"        ,          ",meaning:"Arjuna said: O my dear Krishna, I wish to know about nature [prakriti], the enjoyer [purusha], and the field and the knower of the field, and of knowledge and the object of knowledge."},{id:472,verse_number:2,chapter_number:13,text:` |
    |
       ||-||`,transliteration:`hr bhagavn uvcha
ida harra kaunteya khetram ity abhidhyate
etad yo vetti ta prhu khetraja iti tad-vida`,hindi_meaning:"                  ,          ",meaning:"The Supreme Personality of Godhead said: This body, O son of Kunti, is called the field, and one who knows this body is called the knower of the field."},{id:473,verse_number:3,chapter_number:13,text:`      |
    ||-||`,transliteration:`khetraja chpi m viddhi sarva-khetrehu bhrata
khetra-khetrajayor jna yat taj jna mata mama`,hindi_meaning:"          ,                ",meaning:"O scion of Bharata, you should understand that I am also the knower in all bodies, and to understand this body and its knower is called knowledge. That is My opinion."},{id:474,verse_number:4,chapter_number:13,text:`      |
       ||-||`,transliteration:`tat khetra yach cha ydik cha yad-vikri yatah cha yat
sa cha yo yat-prabhvah cha tat samsena me hiu`,hindi_meaning:"     ,              ,       ",meaning:"Now please hear My brief description of this field of activity and how it is constituted, what its changes are, whence it is produced, who that knower of the field of activities is, and what his influences are."},{id:475,verse_number:5,chapter_number:13,text:`    |
  ||-||`,transliteration:`ihibhir bahudh gta chhandobhir vividhai pithak
brahma-stra-padaih chaiva hetumadbhir vinihchitai`,hindi_meaning:" !          ,               ",meaning:"That knowledge of the field of activities and of the knower of activities is described by various sages in various Vedic writings. It is especially presented in Vedanta-sutra with all reasoning as to cause and effect."},{id:476,verse_number:6,chapter_number:13,text:`   |
     ||-||`,transliteration:`mah-bhtny ahakro buddhir avyaktam eva cha
indriyi dahaika cha pacha chendriya-gochar`,hindi_meaning:"                ,  !",meaning:"The five great elements, false ego, intelligence, the unmanifested, the ten senses and the mind, the five sense objects..."},{id:477,verse_number:7,chapter_number:13,text:`      |
   ||-||`,transliteration:`ichchh dveha sukha dukha saghtah chetan dhiti
etat khetra samsena sa-vikram udhitam`,hindi_meaning:"   :       ,                             ",meaning:"Desire, hatred, happiness, distress, the aggregate, the life symptoms, and convictionsall these are considered, in summary, to be the interactions of the field of activities."},{id:478,verse_number:8,chapter_number:13,text:`  |
   ||-||`,transliteration:`amnitvam adambhitvam ahis khntir rjavam
chryopsana haucha sthairyam tma-vinigraha`,hindi_meaning:"     ,  ,    ;           ",meaning:"Humility; pridelessness; nonviolence; tolerance; simplicity; approaching a bona fide spiritual master; cleanliness; steadiness; self-control;"},{id:479,verse_number:9,chapter_number:13,text:`    |
 ||-||`,transliteration:`indriyrthehu vairgyam anahakra eva cha
janma-mityu-jar-vydhi-dukha-dohnudarhanam`,hindi_meaning:"     () ,      ,                    ",meaning:"renunciation of the objects of sense gratification; absence of false ego; the perception of the evil of birth, death, old age and disease;"},{id:480,verse_number:10,chapter_number:13,text:`  |
   ||-||`,transliteration:`asaktir anabhihvaga putra-dra-gihdihu
nitya cha sama-chittatvam ihnihopapattihu`,hindi_meaning:" !      -, -  -  ,    !    ",meaning:"detachment; freedom from entanglement with children, wife, home and the rest; even-mindedness amid pleasant and unpleasant events;"},{id:481,verse_number:11,chapter_number:13,text:`   |
 ||-||`,transliteration:`mayi chnanya-yogena bhaktir avyabhichri
vivikta-deha-sevitvam aratir jana-sasadi`,hindi_meaning:" !     (-)   ,  -      ,     ",meaning:"constant and unalloyed devotion to Me; aspiring to live in a solitary place; detachment from the general mass of people;"},{id:482,verse_number:12,chapter_number:13,text:`  |
   ||-||`,transliteration:`adhytma-jna-nityatva tattva-jnrtha-darhanam
etaj jnam iti proktam ajna yad ato nyath`,hindi_meaning:"  ,      ()         ()     ",meaning:"accepting the importance of self-realization; and philosophical search for the Absolute Truthall these I declare to be knowledge, and besides this whatever there may be is ignorance."},{id:483,verse_number:13,chapter_number:13,text:`   |
    ||-||`,transliteration:`jeya yat tat pravakhymi yaj jtvmitam ahnute
andi mat-para brahma na sat tan nsad uchyate`,hindi_meaning:"         ,            ",meaning:"I shall now explain the knowable, knowing which you will taste the eternal. Brahman, the spirit, beginningless and subordinate to Me, lies beyond the cause and effect of this material world."},{id:484,verse_number:14,chapter_number:13,text:`   |
    ||-||`,transliteration:`sarvata pi-pda tat sarvato khi-hiro-mukham
sarvata hrutimal loke sarvam vitya tihhati`,hindi_meaning:" !   ,          ;    ",meaning:"Everywhere are His hands and legs, His eyes, heads and faces, and He has ears everywhere. In this way the Supersoul exists, pervading everything."},{id:485,verse_number:15,chapter_number:13,text:`  |
     ||-||`,transliteration:`sarvendriya-gubhsa sarvendriya-vivarjitam
asakta sarva-bhich chaiva nirgua gua-bhokti cha`,hindi_meaning:"          ,    ;             ",meaning:"The Supersoul is the original source of all senses, yet He is without senses. He is unattached, although He is the maintainer of all living beings. He transcends the modes of nature, and at the same time He is the master of all the modes of material nature."},{id:486,verse_number:16,chapter_number:13,text:`    |
     ||-||`,transliteration:`bahir antah cha bhtnm achara charam eva cha
skhmatvt tad avijeya dra-stha chntike cha tat`,hindi_meaning:"              ,        , ,              ",meaning:"The Supreme Truth exists outside and inside of all living beings, the moving and the nonmoving. Because He is subtle, He is beyond the power of the material senses to see or to know. Although far, far away, He is also near to all."},{id:487,verse_number:17,chapter_number:13,text:`      |
      ||-||`,transliteration:`avibhakta cha bhtehu vibhaktam iva cha sthitam
bhta-bharti cha taj jeya grasihu prabhavihu cha`,hindi_meaning:" !    ,       ,           ?",meaning:"Although the Supersoul appears to be divided among all beings, He is never divided. He is situated as one. Although He is the maintainer of every living entity, it is to be understood that He devours and develops all."},{id:488,verse_number:18,chapter_number:13,text:`   |
      ||-||`,transliteration:`jyotihm api taj jyotis tamasa param uchyate
jna jeya jna-gamya hidi sarvasya vihhitam`,hindi_meaning:"          ,    ()          ",meaning:"He is the source of light in all luminous objects. He is beyond the darkness of matter and is unmanifested. He is knowledge, He is the object of knowledge, and He is the goal of knowledge. He is situated in everyones heart."},{id:489,verse_number:19,chapter_number:13,text:`       |
   ||-||`,transliteration:`iti khetra tath jna jeya chokta samsata
mad-bhakta etad vijya mad-bhvyopapadyate`,hindi_meaning:"      ,    ,          ",meaning:"Thus the field of activities [the body], knowledge and the knowable have been summarily described by Me. Only My devotees can understand this thoroughly and thus attain to My nature."},{id:490,verse_number:20,chapter_number:13,text:`     |
    ||-||`,transliteration:`prakiti puruha chaiva viddhy and ubhv api
vikrh cha guh chaiva viddhi prakiti-sambhavn`,hindi_meaning:" , ,      , , ,    ",meaning:"Material nature and the living entities should be understood to be beginningless. Their transformations and the modes of matter are products of material nature."},{id:491,verse_number:21,chapter_number:13,text:`   |
    ||-||`,transliteration:`krya-kraa-kartitve hetu prakitir uchyate
puruha sukha-dukhn bhoktitve hetur uchyate`,hindi_meaning:" ,                ",meaning:"Nature is said to be the cause of all material causes and effects, whereas the living entity is the cause of the various sufferings and enjoyments in this world."},{id:492,verse_number:22,chapter_number:13,text:`     |
   ||-||`,transliteration:`puruha prakiti-stho hi bhukte prakiti-jn gun
kraa gua-sago sya sad-asad-yoni-janmasu`,hindi_meaning:" !             ,         ",meaning:"The living entity in material nature thus follows the ways of life, enjoying the three modes of nature. This is due to his association with that material nature. Thus he meets with good and evil among various species."},{id:493,verse_number:23,chapter_number:13,text:`     |
    ||-||`,transliteration:`upadrahnumant cha bhart bhokt mahehvara
paramtmeti chpy ukto dehe smin puruha para`,hindi_meaning:"                       ",meaning:"Yet in this body there is another, a transcendental enjoyer, who is the Lord, the supreme proprietor, who exists as the overseer and permitter, and who is known as the Supersoul."},{id:494,verse_number:24,chapter_number:13,text:`        |
     ||-||`,transliteration:`ya eva vetti puruha prakiti cha guai saha
sarvath vartamno pi na sa bhyo bhijyate`,hindi_meaning:" !     ,              ?",meaning:"One who understands this philosophy concerning material nature, the living entity and the interaction of the modes of nature is sure to attain liberation. He will not take birth here again, regardless of his present position."},{id:495,verse_number:25,chapter_number:13,text:`   |
     ||-||`,transliteration:`dhynentmani pahyanti kechid tmnam tman
anye skhyena yogena karma-yogena chpare`,hindi_meaning:"      ,      ,             ",meaning:"Some perceive the Supersoul within themselves through meditation, others through the cultivation of knowledge, and still others through working without fruitive desires."},{id:496,verse_number:26,chapter_number:13,text:`    |
    ||-||`,transliteration:`anye tv evam ajnanta hrutvnyebhya upsate
te pi chtitaranty eva mityu hruti-parya`,hindi_meaning:" !                     ",meaning:"Again there are those who, although not conversant in spiritual knowledge, begin to worship the Supreme Person upon hearing about Him from others. Because of their tendency to hear from authorities, they also transcend the path of birth and death."},{id:497,verse_number:27,chapter_number:13,text:`   |
  ||-||`,transliteration:`yvat sajyate kichit sattva sthvara-jagamam
khetra-khetraja-sayogt tad viddhi bharatarhabha`,hindi_meaning:" !           ;            ",meaning:"O chief of the Bharatas, know that whatever you see in existence, both the moving and the nonmoving, is only a combination of the field of activities and the knower of the field."},{id:498,verse_number:28,chapter_number:13,text:`     |
     ||-||`,transliteration:`sama sarvehu bhtehu tihhanta paramehvaram
vinahyatsv avinahyanta ya pahyati sa pahyati`,hindi_meaning:" !         ,               ",meaning:"One who sees the Supersoul accompanying the individual soul in all bodies, and who understands that neither the soul nor the Supersoul within the destructible body is ever destroyed, actually sees."},{id:499,verse_number:29,chapter_number:13,text:`    |
      ||-||`,transliteration:`sama pahyan hi sarvatra samavasthitam hvaram
na hinasty tmantmna tato yti par gatim`,hindi_meaning:"      ,           ",meaning:"One who sees the Supersoul equally present everywhere, in every living being, does not degrade himself by his mind. Thus he approaches the transcendental destination."},{id:500,verse_number:30,chapter_number:13,text:`     |
     ||-||`,transliteration:`prakityaiva cha karmi kriyamni sarvaha
ya pahyati tathtmnam akartra sa pahyati`,hindi_meaning:"             ,     ",meaning:"One who can see that all activities are performed by the body, which is created of material nature, and sees that the self does nothing, actually sees."},{id:501,verse_number:31,chapter_number:13,text:`  |
       ||-||`,transliteration:`yad bhta-pithag-bhvam eka-stham anupahyati
tata eva cha vistra brahma sampadyate tad`,hindi_meaning:"             ",meaning:"When a sensible man ceases to see different identities due to different material bodies and he sees how beings are expanded everywhere, he attains to the Brahman conception."},{id:502,verse_number:32,chapter_number:13,text:` |
      ||-||`,transliteration:`anditvn nirguatvt paramtmyam avyaya
harra-stho pi kaunteya na karoti na lipyate`,hindi_meaning:"                      ?",meaning:"Those with the vision of eternity can see that the imperishable soul is transcendental, eternal, and beyond the modes of nature. Despite contact with the material body, O Arjuna, the soul does neither anything nor is entangled."},{id:503,verse_number:33,chapter_number:13,text:`    |
    ||-||`,transliteration:`yath sarva-gata saukhmyd kha nopalipyate
sarvatrvasthito dehe tathtm nopalipyate`,hindi_meaning:" !    ,     ;   ,           ",meaning:"The sky, due to its subtle nature, does not mix with anything, although it is all-pervading. Similarly, the soul situated in Brahman vision does not mix with the body, though situated in that body."},{id:504,verse_number:34,chapter_number:13,text:`     |
      ||-||`,transliteration:`yath prakhayaty eka kitsna lokam ima ravi
khetra khetr tath kitsna prakhayati bhrata`,hindi_meaning:"-, -, -                 ",meaning:"O son of Bharata, as the sun alone illuminates all this universe, so does the living entity, one within the body, illuminate the entire body by consciousness."},{id:505,verse_number:35,chapter_number:13,text:`  |
      ||-||`,transliteration:`khetra-khetrajayor evam antara jna-chakhuh
bhta-prakiti-mokha cha ye vidur ynti te param`,hindi_meaning:" !       ()     ,        ",meaning:"Those who see with eyes of knowledge the difference between the body and the knower of the body, and can also understand the process of liberation from bondage in material nature, attain to the supreme goal."}]},{id:14,name:"",name_meaning:"The Yoga of the Three Gunas",chapter_number:14,verses_count:27,summary:"Krishna explains the three modes (gunas) of material nature: goodness (sattva), passion (rajas), and ignorance (tamas). He describes how these modes bind the soul to the material world and what qualities one must develop to transcend them.",verses:[{id:506,verse_number:1,chapter_number:14,text:` |
     |
      ||-||`,transliteration:`hr bhagavn uvcha
para bhya pravakhymi jnn jnam uttamam
yaj jtv munaya sarve par siddhim ito gat`,hindi_meaning:"            ,         ",meaning:"The Supreme Personality of Godhead said: Again I shall declare to you this supreme wisdom, the best of all knowledge, knowing which all the sages have attained the supreme perfection."},{id:507,verse_number:2,chapter_number:14,text:`    |
      ||-||`,transliteration:`ida jnam uphritya mama sdharmyam gat
sarge pi nopajyante pralaye na vyathanti cha`,hindi_meaning:" !        ,          ",meaning:"By becoming fixed in this knowledge, one can attain to the transcendental nature like My own. Thus established, one is not born at the time of creation or disturbed at the time of dissolution."},{id:508,verse_number:3,chapter_number:14,text:`    |
     ||-||`,transliteration:`mama yonir mahad brahma tasmin garbha dadhmy aham
sambhava sarva-bhtn tato bhavati bhrata`,hindi_meaning:" !                 ,     ",meaning:"The total material substance, called Brahman, is the source of birth, and it is that Brahman that I impregnate, making possible the births of all living beings, O son of Bharata."},{id:509,verse_number:4,chapter_number:14,text:`     |
     ||-||`,transliteration:`sarva-yonihu kaunteya mrtaya sambhavanti y
ts brahma mahad yonir aha bja-prada pit`,hindi_meaning:"       ,     ,  -      ",meaning:"It should be understood that all species of life, O son of Kunti, are made possible by birth in this material nature, and that I am the seed-giving father."},{id:510,verse_number:5,chapter_number:14,text:`     |
    ||-||`,transliteration:`sattva rajas tama iti gu prakiti-sambhav
nibadhnanti mah-bho dehe dehinam avyayam`,hindi_meaning:"         ,     ",meaning:"Material nature consists of three modesgoodness, passion and ignorance. When the eternal living entity comes in contact with nature, O mighty-armed Arjuna, he becomes conditioned by these modes."},{id:511,verse_number:6,chapter_number:14,text:`   |
    ||-||`,transliteration:`tatra sattva nirmalatvt prakhakam anmayam
sukha-sagena badhnti jna-sagena chnagha`,hindi_meaning:"   (, , )      !        ,     ,        -   ",meaning:"O sinless one, the mode of goodness, being purer than the others, is illuminating, and it frees one from all sinful reactions. Those situated in that mode become conditioned by a sense of happiness and knowledge."},{id:512,verse_number:7,chapter_number:14,text:`    |
    ||-||`,transliteration:`rajo rgtmaka viddhi tih-saga-samudbhavam
tan nibadhnti kaunteya karma-sagena dehinam`,hindi_meaning:"         ,               ",meaning:"The mode of passion is born of unlimited desires and longings, O son of Kunti, and because of this the embodied living entity is bound to material fruitive actions."},{id:513,verse_number:8,chapter_number:14,text:`    |
  ||-||`,transliteration:`tamas tv ajna-ja viddhi mohana sarva-dehinm
pramdlasya-nidrbhis tan nibadhnti bhrata`,hindi_meaning:"      ,                     ",meaning:"O son of Bharata, know that the mode of darkness, born of ignorance, is the delusion of all embodied living entities. The results of this mode are madness, indolence and sleep, which bind the conditioned soul."},{id:514,verse_number:9,chapter_number:14,text:`      |
     ||-||`,transliteration:`sattva sukhe sajayati raja karmai bhrata
jnam vitya tu tama pramde sajayaty uta`,hindi_meaning:" !      , -         ",meaning:"O son of Bharata, the mode of goodness conditions one to happiness; passion conditions one to fruitive action; and ignorance, covering ones knowledge, binds one to madness."},{id:515,verse_number:10,chapter_number:14,text:`    |
      ||-||`,transliteration:`rajas tamah chbhibhya sattva bhavati bhrata
raja sattva tamah chaiva tama sattva rajas tath`,hindi_meaning:" !          ()       ,        ",meaning:"Sometimes the mode of goodness becomes prominent, defeating the modes of passion and ignorance, O son of Bharata. Sometimes the mode of passion defeats goodness and ignorance, and at other times ignorance defeats goodness and passion. In this way there is always competition for supremacy."},{id:516,verse_number:11,chapter_number:14,text:`   |
     ||-||`,transliteration:`sarva-dvrehu dehe smin prakha upajyate
jna yad tad vidyd vividdha sattvam ity uta`,hindi_meaning:"     ,                    ",meaning:"The manifestation of the mode of goodness can be experienced when all the gates of the body are illuminated by knowledge."},{id:517,verse_number:12,chapter_number:14,text:`    |
    ||-||`,transliteration:`lobha pravittir rambha karmam ahama spih
rajasy etni jyante vividdhe bharatarhabha`,hindi_meaning:"                       ,    ",meaning:"O chief of the Bharatas, when there is an increase in the mode of passion the symptoms of great attachment, fruitive activity, intense endeavor, and uncontrollable desire and hankering develop."},{id:518,verse_number:13,chapter_number:14,text:`     |
    ||-||`,transliteration:`aprakho pravittih cha pramdo moha eva cha
tamasy etni jyante vividdhe kuru-nandana`,hindi_meaning:"       ,           ",meaning:"When there is an increase in the mode of ignorance, O son of Kuru, darkness, inertia, madness and illusion are manifested."},{id:519,verse_number:14,chapter_number:14,text:`       |
  ||-||`,transliteration:`yad sattve praviddhe tu pralaya yti deha-bhit
tadottama-vid lokn amaln pratipadyate`,hindi_meaning:" !                 ,      ",meaning:"When one dies in the mode of goodness, he attains to the pure higher planets of the great sages."},{id:520,verse_number:15,chapter_number:14,text:`     |
    ||-||`,transliteration:`rajasi pralaya gatv karma-sagihu jyate
tath pralnas tamasi mha-yonihu jyate`,hindi_meaning:"  :  !      ,    ,    ?    ,       ?",meaning:"When one dies in the mode of passion, he takes birth among those engaged in fruitive activities; and when one dies in the mode of ignorance, he takes birth in the animal kingdom."},{id:521,verse_number:16,chapter_number:14,text:`     |
     ||-||`,transliteration:`karmaa sukitasyhu sttvika nirmala phalam
rajasas tu phala dukham ajna tamasa phalam`,hindi_meaning:"   :  !               ,     ",meaning:"The result of pious action is pure and is said to be in the mode of goodness. But action done in the mode of passion results in misery, and action performed in the mode of ignorance results in foolishness."},{id:522,verse_number:17,chapter_number:14,text:`      |
    ||-||`,transliteration:`sattvt sajyate jna rajaso lobha eva cha
pramda-mohau tamaso bhavato jnam eva cha`,hindi_meaning:"     ,     ,  ,      ,    ",meaning:"From the mode of goodness, real knowledge develops; from the mode of passion, greed develops; and from the mode of ignorance develop foolishness, madness and illusion."},{id:523,verse_number:18,chapter_number:14,text:`      |
    ||-||`,transliteration:`rdhva gachchhanti sattva-sth madhye tihhanti rjas
jaghanya-gua-vitti-sth adho gachchhanti tmas`,hindi_meaning:"      , -    ,     ",meaning:"Those situated in the mode of goodness gradually go upward to the higher planets; those in the mode of passion live on the earthly planets; and those in the abominable mode of ignorance go down to the hellish worlds."},{id:524,verse_number:19,chapter_number:14,text:`     |
     ||-||`,transliteration:`nnya guebhya kartra yad drahnupahyati
guebhyah cha para vetti mad-bhva so dhigachchhati`,hindi_meaning:"     -  ,         ,    ",meaning:"When one properly sees that in all activities no other performer is at work than these modes of nature and he knows the Supreme Lord, who is transcendental to all these modes, he attains My spiritual nature."},{id:525,verse_number:20,chapter_number:14,text:`   |
 ||-||`,transliteration:`gun etn attya trn deh deha-samudbhavn
janma-mityu-jar-dukhair vimukto mitam ahnute`,hindi_meaning:"-         ,                 ",meaning:"When the embodied being is able to transcend these three modes associated with the material body, he can become free from birth, death, old age and their distresses and can enjoy nectar even in this life."},{id:526,verse_number:21,chapter_number:14,text:`  |
   |
   ||-||`,transliteration:`arjuna uvcha
kair ligais trn gun etn atto bhavati prabho
kim-chra katha chaits trn gun ativartate`,hindi_meaning:" !             ",meaning:"Arjuna inquired: O my dear Lord, by which signs is one known who is transcendental to these three modes? What is his behavior? And how does he transcend the modes of nature?"},{id:527,verse_number:22,chapter_number:14,text:` |
       |
      ||-||`,transliteration:`hr bhagavn uvcha
prakha cha pravitti cha moham eva cha pava
na dvehi sampravittni na nivittni kkhati`,hindi_meaning:" !            ,    ",meaning:"The Supreme Personality of Godhead said: O son of Pandu, he who does not hate illumination, attachment and delusion when they are present or long for them when they disappear;"},{id:528,verse_number:23,chapter_number:14,text:`    |
     ||-||`,transliteration:`udsna-vad sno guair yo na vichlyate
gu vartanta ity eva yo vatihhati negate`,hindi_meaning:" !       ,                    ",meaning:"who is unwavering and undisturbed through all these reactions of the material qualities, remaining neutral and transcendental, knowing that the modes alone are active;"},{id:529,verse_number:24,chapter_number:14,text:`   |
  ||-||`,transliteration:`sama-dukha-sukha svastha sama-lohrhma-kchana
tulya-priypriyo dhras tulya-nindtma-sastuti`,hindi_meaning:"     ,      ,                      ",meaning:"who is situated in the self and regards alike happiness and distress; who looks upon a lump of earth, a stone and a piece of gold with an equal eye; who is equal toward the desirable and the undesirable; who is steady, situated equally well in praise and blame, honor and dishonor;"},{id:530,verse_number:25,chapter_number:14,text:`  |
    ||-||`,transliteration:`mnpamnayos tulyas tulyo mitrri-pakhayo
sarvrambha-parityg gutta sa uchyate`,hindi_meaning:"       , -   ,      ,     ",meaning:"who treats the friend and the enemy alike; and who has renounced all material activitiessuch a person is said to have transcended the modes of nature."},{id:531,verse_number:26,chapter_number:14,text:`     |
   ||-||`,transliteration:`m cha yo vyabhichrea bhakti-yogena sevate
sa gun samattyaitn brahma-bhyya kalpate`,hindi_meaning:"                     ",meaning:"One who engages in full devotional service, unfailing in all circumstances, at once transcends the modes of material nature and thus comes to the level of Brahman."},{id:532,verse_number:27,chapter_number:14,text:`    |
     ||-||`,transliteration:`brahmao hi pratihhham amitasyvyayasya cha
hhvatasya cha dharmasya sukhasyaikntikasya cha`,hindi_meaning:"      ,                       ?",meaning:"And I am the basis of the impersonal Brahman, which is immortal, imperishable and eternal and is the constitutional position of ultimate happiness."}]},{id:15,name:"",name_meaning:"The Yoga of the Supreme Person",chapter_number:15,verses_count:20,summary:"Krishna uses the metaphor of an upside-down banyan tree to describe the material world. He explains how to cut the roots of this tree with the axe of detachment and surrender to the Supreme Person, thus attaining His eternal abode.",verses:[{id:533,verse_number:1,chapter_number:15,text:` |
  |
       ||-||`,transliteration:`hr bhagavn uvcha
rdhva-mlam adha-hkham ahvattha prhur avyayam
chhandsi yasya parni yas ta veda sa veda-vit`,hindi_meaning:"   ,          -  ,        ",meaning:"The Supreme Personality of Godhead said: It is said that there is an imperishable banyan tree that has its roots upward and its branches down and whose leaves are the Vedic hymns. One who knows this tree is the knower of the Vedas."},{id:534,verse_number:2,chapter_number:15,text:`  
  |
 
  ||-||`,transliteration:`adhah chordhva prasits tasya hkh
gua-praviddh vihaya-pravl
adhah cha mlny anusantatni
karma-nubandhni manuhya-loke`,hindi_meaning:" !       -     ,    ",meaning:"The branches of this tree extend downward and upward, nourished by the three modes of material nature. The twigs are the objects of the senses. This tree also has roots going down, and these are bound to the fruitive actions of human society."},{id:535,verse_number:3,chapter_number:15,text:`  
     |
 
   ||-||`,transliteration:`na rpam asyeha tathopalabhyate
nnto na chdir na cha sampratihh
ahvattham ena su-virha-mlam
asaga-hastrea dihena chhittv`,hindi_meaning:"      ,               ,       ",meaning:"The real form of this tree cannot be perceived in this world. No one can understand where it ends, where it begins, or where its foundation is. But with determination one must cut down this strongly rooted tree with the weapon of detachment."},{id:536,verse_number:4,chapter_number:15,text:`  
    |
   
    ||-||`,transliteration:`tata pada tat parimrgitavya
yasmin gat na nivartanti bhya
tam eva chdya puruha prapadye
yata pravitti prasit pur`,hindi_meaning:"       -   ,            ,     ",meaning:"Thereafter, one must seek that place from which, having gone, one never returns, and there surrender to that Supreme Personality of Godhead from whom everything began and from whom everything has extended since time immemorial."},{id:537,verse_number:5,chapter_number:15,text:` 
  |
 
   ||-||`,transliteration:`nirmna-moh jita-saga-doh
adhytma-nity vinivitta-km
dvandvair vimukt sukha-dukha-sajair
gachchhanty amh padam avyaya tat`,hindi_meaning:" !      ,      ,     ",meaning:"Those who are free from false prestige, illusion and false association, who understand the eternal, who are done with material lust, who are freed from the dualities of happiness and distress, and who, unbewildered, know how to surrender unto the Supreme Person attain to that eternal kingdom."},{id:538,verse_number:6,chapter_number:15,text:`       |
      ||-||`,transliteration:`na tad bhsayate sryo na hahko na pvaka
yad gatv na nivartante tad dhma parama mama`,hindi_meaning:" !                 ,    ,  -    ",meaning:"That supreme abode of Mine is not illumined by the sun or moon, nor by fire or electricity. Those who reach it never return to this material world."},{id:539,verse_number:7,chapter_number:15,text:`    |
   ||-||`,transliteration:`mamaivho jva-loke jva-bhta santana
mana-hahhnndriyi prakiti-sthni karhati`,hindi_meaning:"  :  !  !        ()  ,           ?",meaning:"The living entities in this conditioned world are My eternal fragmental parts. Due to conditioned life, they are struggling very hard with the six senses, which include the mind."},{id:540,verse_number:8,chapter_number:15,text:`   |
   ||-||`,transliteration:`harra yad avpnoti yach chpy utkrmathvara
gihtvaitni sayti vyur gandhn ivhayt`,hindi_meaning:"               ,     ",meaning:"The living entity in the material world carries his different conceptions of life from one body to another as the air carries aromas. Thus he takes one kind of body and again quits it to take another."},{id:541,verse_number:9,chapter_number:15,text:`       |
   ||-||`,transliteration:`hrotra chakhu sparhana cha rasana ghram eva cha
adhihhya manah chya vihayn upasevate`,hindi_meaning:"   :   !         -         ",meaning:"The living entity, thus taking another gross body, obtains a certain type of ear, eye, tongue, nose and sense of touch, which are grouped about the mind. He thus enjoys a particular set of sense objects."},{id:542,verse_number:10,chapter_number:15,text:`      |
    ||-||`,transliteration:`utkrmanta sthita vpi bhujna v gunvitam
vimh nnupahyanti pahyanti jna-chakhuha`,hindi_meaning:"                    ",meaning:"The foolish cannot understand how a living entity can quit his body, nor can they understand what sort of body he enjoys under the spell of the modes of nature. But one whose eyes are trained in knowledge can see all this."},{id:543,verse_number:11,chapter_number:15,text:`   |
   ||-||`,transliteration:`yatanto yoginah chaina pahyanty tmany avasthitam
yatanto py akittmno naina pahyanty achetasa`,hindi_meaning:"         ,             ",meaning:"The endeavoring transcendentalists who are situated in self-realization can see all this clearly. But those whose minds are not developed and who are not situated in self-realization cannot see what is taking place, though they may try."},{id:544,verse_number:12,chapter_number:15,text:`   |
     ||-||`,transliteration:`yad ditya-gata tejo jagad bhsayate khilam
yach chandramasi yach chgnau tat tejo viddhi mmakam`,hindi_meaning:"         -    ,      ",meaning:"The splendor of the sun, which dissipates the darkness of this whole world, comes from Me. And the splendor of the moon and the splendor of fire are also from Me."},{id:545,verse_number:13,chapter_number:15,text:`    |
      ||-||`,transliteration:`gm vihya cha bhtni dhraymy aham ojas
puhmi chauhadh sarv somo bhtv rastmaka`,hindi_meaning:" !              ,   ",meaning:"I enter into each planet, and by My energy they stay in orbit. I become the moon and thereby supply the juice of life to all vegetables."},{id:546,verse_number:14,chapter_number:15,text:`     |
   ||-||`,transliteration:`aha vaihvnaro bhtv prin deham hrita
prpna-samyukta pachmy anna chatur-vidham`,hindi_meaning:"   ,               -    ",meaning:"I am the fire of digestion in the bodies of all living entities, and I join with the air of life, outgoing and incoming, to digest the four kinds of foodstuff."},{id:547,verse_number:15,chapter_number:15,text:`   
   |
  
  ||-||`,transliteration:`sarvasya chha hidi sanniviho
matta smitir jnam apohana cha
vedaih cha sarvair aham eva vedyo
vednta-kid veda-vid eva chham`,hindi_meaning:" !                   ,   ",meaning:"I am seated in everyones heart, and from Me come remembrance, knowledge and forgetfulness. By all the Vedas, I am to be known. Indeed, I am the compiler of Vedanta, and I am the knower of the Vedas."},{id:548,verse_number:16,chapter_number:15,text:`      |
     ||-||`,transliteration:`dvv imau puruhau loke kharah chkhara eva cha
khara sarvi bhtni ka-stho khara uchyate`,hindi_meaning:"        :            (     ) ",meaning:"There are two classes of beings, the fallible and the infallible. In the material world every living entity is fallible, and in the spiritual world every living entity is called infallible."},{id:549,verse_number:17,chapter_number:15,text:`   |
    ||-||`,transliteration:`uttama puruhas tv anya paramtmety udhita
yo loka-trayam vihya bibharty avyaya hvara`,hindi_meaning:"            -         ",meaning:"Besides these two, there is the greatest living personality, the Supreme Soul, the imperishable Lord Himself, who has entered the three worlds and is maintaining them."},{id:550,verse_number:18,chapter_number:15,text:`  |
      ||-||`,transliteration:`yasmt kharam atto ham akhard api chottama
ato smi loke vede cha prathita puruhottama`,hindi_meaning:"                     ,   ",meaning:"Because I am transcendental, beyond both the fallible and the infallible, and because I am the greatest, I am celebrated both in the world and in the Vedas as that Supreme Person."},{id:551,verse_number:19,chapter_number:15,text:`    |
     ||-||`,transliteration:`yo mm evam asammho jnti puruhottamam
sa sarva-vid bhajati m sarva-bhvena bhrata`,hindi_meaning:"            ,       ,     ",meaning:"Whoever knows Me as the Supreme Personality of Godhead, without doubting, is the knower of everything. He therefore engages himself in full devotional service to Me, O son of Bharata."},{id:552,verse_number:20,chapter_number:15,text:`    |
   ||-||`,transliteration:`iti guhyatama hstram idam ukta maynagha
etad buddhv buddhimn syt kita-kityah cha bhrata`,hindi_meaning:"      ,       ,           ",meaning:"This is the most confidential part of the Vedic scriptures, O sinless one, and it is disclosed now by Me. Whoever understands this will become wise, and his endeavors will know perfection."}]},{id:16,name:"",name_meaning:"The Yoga of the Divine and Demoniac Natures",chapter_number:16,verses_count:24,summary:"Krishna describes the qualities of those with a divine nature (daivi sampad) and those with a demoniac nature (asuri sampad). He explains how these qualities determine one's actions and ultimate destiny.",verses:[{id:553,verse_number:1,chapter_number:16,text:` |
  |
     ||-||`,transliteration:`hr bhagavn uvcha
abhaya sattva-sahuddhir jna-yoga-vyavasthiti
dna damah cha yajah cha svdhyyas tapa rjavam`,hindi_meaning:"     ,   ()            ",meaning:"The Supreme Personality of Godhead said: Fearlessness; purification of ones existence; cultivation of spiritual knowledge; charity; self-control; performance of sacrifice; study of the Vedas; austerity; simplicity;"},{id:554,verse_number:2,chapter_number:16,text:`   |
    ||-||`,transliteration:`ahis satyam akrodhas tyga hntir apaihunam
day bhtehv aloluptva mrdava hrr achpalam`,hindi_meaning:" !          ,        -    ,     ",meaning:"nonviolence; truthfulness; freedom from anger; renunciation; tranquility; aversion to faultfinding; compassion for all living entities; freedom from covetousness; gentleness; modesty; steady determination;"},{id:555,verse_number:3,chapter_number:16,text:`     |
    ||-||`,transliteration:`teja kham dhiti haucham adroho nti-mnit
bhavanti sampada daivm abhijtasya bhrata`,hindi_meaning:"      ,          ,      ",meaning:"vigor; forgiveness; fortitude; cleanliness; and freedom from envy and from the passion for honorthese transcendental qualities, O son of Bharata, belong to godly men endowed with divine nature."},{id:556,verse_number:4,chapter_number:16,text:`     |
    ||-||`,transliteration:`dambho darpo bhimnah cha krodha pruhyam eva cha
ajna chbhijtasya prtha sampadam surm`,hindi_meaning:"                           ",meaning:"Pride, arrogance, conceit, anger, harshness and ignorancethese qualities belong to those of demonic nature, O son of Pritha."},{id:557,verse_number:5,chapter_number:16,text:`    |
     ||-||`,transliteration:`daiv sampad vimokhya nibandhysur mat
m hucha sampada daivm abhijto si pava`,hindi_meaning:"    ,               ",meaning:"The transcendental qualities are conducive to liberation, whereas the demonic qualities make for bondage. Do not worry, O son of Pandu, for you are born with the divine qualities."},{id:558,verse_number:6,chapter_number:16,text:`      |
       ||-||`,transliteration:`dvau bhta-sargau loke smin daiva sura eva cha
daivo vistaraha prokta sura prtha me hiu`,hindi_meaning:"                     ",meaning:"O son of Pritha, in this world there are two kinds of created beings. One is called the divine and the other demonic. I have already explained to you at length the divine qualities. Now hear from Me of the demonic."},{id:559,verse_number:7,chapter_number:16,text:`       |
        ||-||`,transliteration:`pravitti cha nivitti cha jan na vidur sur
na haucha npi chchro na satya tehu vidyate`,hindi_meaning:"     ,            ,     ",meaning:"Those who are demonic do not know what is to be done and what is not to be done. Neither cleanliness nor proper behavior nor truth is found in them."},{id:560,verse_number:8,chapter_number:16,text:`   |
  ||-||`,transliteration:`asatyam apratihha te jagad hur anhvaram
aparaspara-sambhta kim anyat kma-haitukam`,hindi_meaning:" !         ,            ,        ",meaning:"They say that this world is unreal, with no foundation, no God in control. They say it is produced of sex desire and has no cause other than lust."},{id:561,verse_number:9,chapter_number:16,text:`   |
   ||-||`,transliteration:`et dihim avahabhya nahtmno lpa-buddhaya
prabhavanty ugra-karma khayya jagato hit`,hindi_meaning:" !      ,              ",meaning:"Following such conclusions, the demonic, who are lost to themselves and who have no intelligence, engage in unbeneficial, horrible works meant to destroy the world."},{id:562,verse_number:10,chapter_number:16,text:`   |
 ||-||`,transliteration:`kmam hritya duhpra dambha-mna-madnvit
mohd gihtvsad-grhn pravartante huchi-vrat`,hindi_meaning:" !          ,              ,   ",meaning:"Taking shelter of insatiable lust and absorbed in the conceit of pride and false prestige, the demonic, thus illusioned, are always sworn to unclean work, attracted by the impermanent."},{id:563,verse_number:11,chapter_number:16,text:`   |
   ||-||`,transliteration:`chintm aparimey cha pralayntm uphrit
kmopabhoga-param etvad iti nihchit`,hindi_meaning:"                    ",meaning:"They believe that to gratify the senses is the prime necessity of human civilization. Thus until the end of life their anxiety is immeasurable. Bound by a network of hundreds of thousands of desires and absorbed in lust and anger, they secure money by illegal means for sense gratification."},{id:564,verse_number:12,chapter_number:16,text:`  |
  ||-||`,transliteration:`h-pha-hatair baddh kma-krodha-parya
hante kma-bhogrtham anyyenrtha-sachayn`,hindi_meaning:"     ,       ,            ",meaning:"Bound by a network of hundreds of thousands of desires and absorbed in lust and anger, they secure money by illegal means for sense gratification."},{id:565,verse_number:13,chapter_number:16,text:`     |
    ||-||`,transliteration:`idam adya may labdham ima prpsye manoratham
idam astdam api me bhavihyati punar dhanam`,hindi_meaning:" !          ,                ",meaning:"The demonic person thinks: So much wealth do I have today, and I will gain more according to my schemes. So much is mine now, and it will increase in the future, more and more."},{id:566,verse_number:14,chapter_number:16,text:`     |
    ||-||`,transliteration:`asau may hata hatrur hanihye chparn api
hvaro ham aha bhog siddho ha balavn sukh`,hindi_meaning:" !      ,           ,    ,    ",meaning:"He is my enemy, and I have killed him, and my other enemies will also be killed. I am the lord of everything. I am the enjoyer. I am perfect, powerful and happy."},{id:567,verse_number:15,chapter_number:16,text:`    |
    ||-||`,transliteration:`hyo bhijanavn asmi ko nyo sti sadiho may
yakhye dsymi modihya ity ajna-vimohit`,hindi_meaning:"     ,             ,            ",meaning:"I am the richest man, surrounded by aristocratic relatives. There is none so powerful and happy as I am. I shall perform sacrifices, I shall give some charity, and thus I shall rejoice. In this way, such persons are deluded by ignorance."},{id:568,verse_number:16,chapter_number:16,text:`  |
    ||-||`,transliteration:`aneka-chitta-vibhrnt moha-jla-samvit
prasakt kma-bhogehu patanti narake huchau`,hindi_meaning:" !      ,   ,  ,                 ",meaning:"Thus perplexed by various anxieties and bound by a network of illusions, they become too strongly attached to sense enjoyment and fall down into hell."},{id:569,verse_number:17,chapter_number:16,text:`   |
   ||-||`,transliteration:`tma-sambhvit stabdh dhana-mna-madnvit
yajante nma-yajais te dambhenvidhi-prvakam`,hindi_meaning:" !         ,     ,     ",meaning:"Self-complacent and always impudent, deluded by wealth and false prestige, they sometimes proudly perform sacrifices in name only, without following any rules or regulations."},{id:570,verse_number:18,chapter_number:16,text:`       |
  ||-||`,transliteration:`ahakra bala darpa kma krodha cha sahrit
mm tma-para-dehehu pradvihanto bhyasyak`,hindi_meaning:"         ,     ",meaning:"Bewildered by false ego, strength, pride, lust and anger, the demons become envious of the Supreme Personality of Godhead, who is situated in their own bodies and in the bodies of others, and blaspheme against the real religion."},{id:571,verse_number:19,chapter_number:16,text:`    |
  ||-||`,transliteration:`tn aha dvihata krrn sasrehu nardhamn
khipmy ajasram ahubhn surhv eva yonihu`,hindi_meaning:"        ,           ?",meaning:"Those who are envious and mischievous, who are the lowest among men, I perpetually cast into the ocean of material existence, into various demonic species of life."},{id:572,verse_number:20,chapter_number:16,text:`     |
     ||-||`,transliteration:`sur yonim pann mh janmani janmani
mm aprpyaiva kaunteya tato ynty adham gatim`,hindi_meaning:"  -   -    ,         ",meaning:"Attaining repeated birth amongst the species of demonic life, O son of Kunti, such persons can never approach Me. Gradually they sink down to the most abominable type of existence."},{id:573,verse_number:21,chapter_number:16,text:`    |
    ||-||`,transliteration:`tri-vidha narakasyeda dvra nhanam tmana
kma krodhas tath lobhas tasmd etat traya tyajet`,hindi_meaning:"    ,     ,              ",meaning:"There are three gates leading to this helllust, anger and greed. Every sane man should give these up, for they lead to the degradation of the soul."},{id:574,verse_number:22,chapter_number:16,text:`   |
     ||-||`,transliteration:`etair vimukta kaunteya tamo-dvrais tribhir nara
charaty tmana hreyas tato yti par gatim`,hindi_meaning:"  :  !            ,       ?",meaning:"The man who has escaped these three gates of hell, O son of Kunti, performs acts conducive to self-realization and thus gradually attains the supreme destination."},{id:575,verse_number:23,chapter_number:16,text:`    |
        ||-||`,transliteration:`ya hstra-vidhim utsijya vartate kma-krata
na sa siddhim avpnoti na sukha na par gatim`,hindi_meaning:"   :   ,   ,                   ",meaning:"He who discards scriptural injunctions and acts according to his own whims attains neither perfection, nor happiness, nor the supreme destination."},{id:576,verse_number:24,chapter_number:16,text:`    |
    ||-||`,transliteration:`tasmch chhstra prama te krykrya-vyavasthitau
jtv hstra-vidhnokta karma kartum ihrhasi`,hindi_meaning:"   ,          ,         ",meaning:"One should therefore understand what is duty and what is not duty by the regulations of the scriptures. Knowing such rules and regulations, one should act so that he may gradually be elevated."}]},{id:17,name:"",name_meaning:"The Yoga of the Threefold Faith",chapter_number:17,verses_count:28,summary:"Arjuna asks about those who worship with faith but without following the scriptures. Krishna explains that faith can be of three typessattvic, rajasic, or tamasicdepending on one's nature. This threefold division also applies to food, sacrifice, austerity, and charity.",verses:[{id:577,verse_number:1,chapter_number:17,text:`  |
    |
       ||-||`,transliteration:`arjuna uvcha
ye hstra-vidhim utsijya yajante hraddhaynvit
teh nihh tu k kiha sattvam ho rajas tama`,hindi_meaning:" !          ,          ",meaning:"Arjuna inquired: O Krishna, what is the situation of those who do not follow the principles of scripture but worship according to their own imagination? Are they in goodness, in passion or in ignorance?"},{id:578,verse_number:2,chapter_number:17,text:` |
      |
       ||-||`,transliteration:`hr bhagavn uvcha
tri-vidh bhavati hraddh dehin s svabhva-j
sttvik rjas chaiva tmas cheti t hiu`,hindi_meaning:",                  ",meaning:"The Supreme Personality of Godhead said: According to the modes of nature acquired by the embodied soul, ones faith can be of three kindsin goodness, in passion or in ignorance. Now hear about this."},{id:579,verse_number:3,chapter_number:17,text:`     |
       ||-||`,transliteration:`sattvnurp sarvasya hraddh bhavati bhrata
hraddh-mayo ya puruho yo yach-chhraddha sa eva sa`,hindi_meaning:" !               ,       ",meaning:"O son of Bharata, according to ones existence under the various modes of nature, one evolves a particular kind of faith. The living being is said to be of a particular faith according to the modes he has acquired."},{id:580,verse_number:4,chapter_number:17,text:`    |
    ||-||`,transliteration:`yajante sttvik devn yakha-rakhsi rjas
pretn bhta-gah chnye yajante tmas jan`,hindi_meaning:" !     ,           ",meaning:"Men in the mode of goodness worship the demigods; those in the mode of passion worship the demons; and those in the mode of ignorance worship ghosts and spirits."},{id:581,verse_number:5,chapter_number:17,text:`      |
  ||-||`,transliteration:`ahstra-vihita ghora tapyante ye tapo jan
dambhhakra-sayukt kma-rga-balnvit`,hindi_meaning:"  !                ,        ",meaning:"Those who undergo severe austerities and penances not recommended in the scriptures, performing them out of pride and egoism, who are impelled by lust and attachment..."},{id:582,verse_number:6,chapter_number:17,text:`   |
   ||-||`,transliteration:`karhayanta harra-stha bhta-grmam achetasa
m chaivnta-harra-stha tn viddhy sura-nihchayn`,hindi_meaning:"   :         ,           ",meaning:"...who are fools and who torture the material elements within the body as well as the Supersoul dwelling within, are to be known as demons."},{id:583,verse_number:7,chapter_number:17,text:`     |
     ||-||`,transliteration:`hras tv api sarvasya tri-vidho bhavati priya
yajas tapas tath dna teh bhedam ima hiu`,hindi_meaning:"         ,        ",meaning:"Even the food each person prefers is of three kinds, according to the three modes of material nature. The same is true of sacrifices, austerities and charity. Now hear of the distinctions between them."},{id:584,verse_number:8,chapter_number:17,text:` |
      ||-||`,transliteration:`yu-sattva-balrogya-sukha-prti-vivardhan
rasy snigdh sthir hidy hr sttvika-priy`,hindi_meaning:" !         ,       ",meaning:"Foods dear to those in the mode of goodness increase the duration of life, purify ones existence and give strength, health, happiness and satisfaction. Such foods are juicy, fatty, wholesome, and pleasing to the heart."},{id:585,verse_number:9,chapter_number:17,text:` |
   ||-||`,transliteration:`kav-amla-lavaty-uha-tkha-rkha-vidhina
hr rjasasyeh dukha-hokmaya-prad`,hindi_meaning:"  :                        ?",meaning:"Foods that are too bitter, too sour, too salty, too hot, pungent, dry and burning are dear to those in the mode of passion. Such foods cause distress, misery and disease."},{id:586,verse_number:10,chapter_number:17,text:`      |
    ||-||`,transliteration:`yta-yma gata-rasa pti paryuhita cha yat
uchchhiham api chmedhya bhojana tmasa-priyam`,hindi_meaning:"      ,   ,     ,       ",meaning:"Food prepared more than three hours before being eaten, food that is tasteless, decomposed and putrid, and food consisting of remnants and untouchable things is dear to those in the mode of darkness."},{id:605,verse_number:11,chapter_number:17,text:`    |
     ||-||`,transliteration:`aphalkkhibhir yajo vidhi-diho ya ijyate
yahavyam eveti mana samdhya sa sttvika`,hindi_meaning:"               '   '        ,   ",meaning:"Of sacrifices, the sacrifice performed according to the directions of scripture, as a matter of duty, by those who desire no reward, is of the nature of goodness."},{id:606,verse_number:12,chapter_number:17,text:`      |
      ||-||`,transliteration:`abhisandhya tu phala dambhrtham api chaiva yat
ijyate bharata-hrehha ta yaja viddhi rjasam`,hindi_meaning:" !             ,    ",meaning:"But the sacrifice performed for some material benefit, or for the sake of pride, O chief of the Bharatas, you should know to be in the mode of passion."},{id:607,verse_number:13,chapter_number:17,text:`  |
    ||-||`,transliteration:`vidhi-hnam asihnna mantra-hnam adakhiam
hraddh-virahita yaja tmasa parichakhate`,hindi_meaning:"   ,  ,  ,      ,      ",meaning:"Any sacrifice performed without regard for the directions of scripture, without distribution of prasdam [spiritual food], without chanting of Vedic hymns and remunerations to the priests, and without faith is considered to be in the mode of ignorance."},{id:608,verse_number:14,chapter_number:17,text:`  |
     ||-||`,transliteration:`deva-dvija-guru-prja-pjana haucham rjavam
brahmacharyam ahis cha hrra tapa uchyate`,hindi_meaning:", ,     , , ,    -      ",meaning:"Austerity of the body consists in worship of the Supreme Lord, the brhmaas, the spiritual master, and superiors like the father and mother, and in cleanliness, simplicity, celibacy and nonviolence."},{id:609,verse_number:15,chapter_number:17,text:`      |
     ||-||`,transliteration:`anudvega-kara vkya satya priya-hita cha yat
svdhyybhyasana chaiva v-maya tapa uchyate`,hindi_meaning:"  , ,         -      ",meaning:"Austerity of speech consists in speaking words that are truthful, pleasing, beneficial, and not agitating to others, and also in regularly reciting Vedic literature."},{id:610,verse_number:16,chapter_number:17,text:`   |
  ||-||`,transliteration:`mana-prasda saumyatva maunam tma-vinigraha
bhva-sahuddhir ity etat tapo mnasam uchyate`,hindi_meaning:"  , , ,        -      ",meaning:"And serenity, simplicity, gravity, self-control and purity of thought are the austerities of the mind."},{id:611,verse_number:17,chapter_number:17,text:`     |
   ||-||`,transliteration:`hraddhay paray tapta tapas tat tri-vidha narai
aphalkkhibhir yuktai sttvika parichakhate`,hindi_meaning:"     ,              ",meaning:"This threefold austerity, performed with transcendental faith by men not expecting material benefits but engaged only for the sake of the Supreme, is called austerity in goodness."},{id:612,verse_number:18,chapter_number:17,text:`     |
     ||-||`,transliteration:`satkra-mna-pjrtha tapo dambhena chaiva yat
kriyate tad iha prokta rjasa chalam adhruvam`,hindi_meaning:"  ,           ,      ,     ",meaning:"Penance performed out of pride and for the sake of gaining respect, honor and worship is said to be in the mode of passion. It is neither stable nor permanent."},{id:613,verse_number:19,chapter_number:17,text:`    |
   ||-||`,transliteration:`mha-grhetmano yat pay kriyate tapa
parasyotsdanrtha v tat tmasam udhitam`,hindi_meaning:"                  ,     ",meaning:"Penance performed out of foolishness, with self-torture, or to destroy or injure others, is said to be in the mode of ignorance."},{id:614,verse_number:20,chapter_number:17,text:`   |
        ||-||`,transliteration:`dtavyam iti yad dna dyate 'nupakrie
dehe kle cha ptre cha tad dna sttvika smitam`,hindi_meaning:"  ' '    ,  ,       ,      ",meaning:"Charity given out of duty, without expectation of return, at the proper time and place, and to a worthy person is considered to be in the mode of goodness."},{id:615,verse_number:21,chapter_number:17,text:`     |
      ||-||`,transliteration:`yat tu pratyupakrrtha phalam uddihya v puna
dyate cha parikliha tad dna rjasa smitam`,hindi_meaning:"                ,      ",meaning:"But charity performed with the expectation of some return, or with a desire for fruitive results, or in a grudging mood, is said to be charity in the mode of passion."},{id:616,verse_number:22,chapter_number:17,text:`   |
  ||-||`,transliteration:`adeha-kle yad dnam aptrebhyah cha dyate
asatkitam avajta tat tmasam udhitam`,hindi_meaning:"  ,             ,      ",meaning:"And charity performed at an impure place, at an improper time, to unworthy persons, or without proper attention and respect is said to be in the mode of ignorance."},{id:617,verse_number:23,chapter_number:17,text:`     |
     ||-||`,transliteration:`o tat sad iti nirdeho brahmaas tri-vidha smita
brhmas tena vedh cha yajh cha vihit pur`,hindi_meaning:"   -           ,     ",meaning:"From the beginning of creation, the three words o tat sat were used to indicate the Supreme Absolute Truth. These three symbolic representations were used by brhmaas while chanting the hymns of the Vedas and during sacrifices, for the satisfaction of the Supreme."},{id:618,verse_number:24,chapter_number:17,text:`  |
    ||-||`,transliteration:`tasmd o ity udhitya yaja-dna-tapa-kriy
pravartante vidhnokt satata brahma-vdinm`,hindi_meaning:" ''  ,              ",meaning:"Therefore, transcendentalists undertaking performances of sacrifice, charity and penance begin with o to attain the Supreme."},{id:619,verse_number:25,chapter_number:17,text:`   |
    ||-||`,transliteration:`tad ity anabhisandhya phala yaja-tapa-kriy
dna-kriyh cha vividh kriyante mokha-kkhibhi`,hindi_meaning:"     ''       ,        ",meaning:"Without desiring fruitive results, one should perform various kinds of sacrifice, penance and charity with the word tat. The purpose of such transcendental activities is to get free from material entanglement."},{id:620,verse_number:26,chapter_number:17,text:`    |
      ||-||`,transliteration:`sad-bhve sdhu-bhve cha sad ity etat prayujyate
prahaste karmai tath sac-chabda prtha yujyate`,hindi_meaning:" !     ''           ''     ",meaning:"The Absolute Truth is the objective of devotional sacrifice, and it is indicated by the word sat. The performer of such sacrifice is also called sat, as are all works of sacrifice, penance and charity which, true to the absolute nature, are performed to please the Supreme Person, O son of Pritha."},{id:621,verse_number:27,chapter_number:17,text:`       |
    ||-||`,transliteration:`yaje tapasi dne cha sthiti sad iti chochyate
karma chaiva tad-arthya sad ity evbhidhyate`,hindi_meaning:",       ''            ''   ",meaning:"And whatever is done for the sake of sacrifice, charity and penance, O son of Pritha, is called sat, and activities done for sat's sake are also called sat."},{id:622,verse_number:28,chapter_number:17,text:`       |
       ||-||`,transliteration:`ahraddhay huta datta tapas tapta kita cha yat
asad ity uchyate prtha na cha tat pretya no iha`,hindi_meaning:" !  , ,         ,  ''              ",meaning:"But sacrifice, charity and penance performed without faith in the Supreme are nonpermanent, O son of Pritha, regardless of whatever rites are performed. They are called asat and are useless both in this life and the next."}]},{id:18,name:"",name_meaning:"Moksha-Sannyasa Yoga",chapter_number:18,verses_count:78,summary:"The final chapter of the Bhagavad Gita, where Arjuna asks about the distinction between renunciation (sannyasa) and the renunciation of the fruits of action (tyaga). Krishna explains the three types of renunciation, the three types of knowledge, action, and actors, and concludes with the ultimate message of surrendering to God.",verses:[{id:605,verse_number:1,chapter_number:18,text:`  |
    |
    ||-||`,transliteration:`arjuna uvcha
sannysasya mahbho tattvam ichchhmi veditum
tygasya cha hihkeha pithak kehinihdana`,hindi_meaning:"  :  !  !  !        -   ",meaning:"Arjuna said: O mighty-armed one, I wish to understand the nature of renunciation [sannyasa] and also the nature of renunciation of fruits of action [tyaga], O killer of the Keshi demon, master of the senses."},{id:606,verse_number:2,chapter_number:18,text:` |
      |
   ||-||`,transliteration:`hr bhagavn uvcha
kmyn karma nysa sannysa kavayo vidu
sarva-karma-phala-tyga prhus tyga vichakha`,hindi_meaning:"   :                       ",meaning:"The Supreme Personality of Godhead said: The giving up of activities that are based on material desire is what great learned men call the renounced order of life [sannyasa]. And giving up the results of all activities is what the wise call renunciation [tyaga]."},{id:607,verse_number:3,chapter_number:18,text:`    |
    ||-||`,transliteration:`tyjya doha-vad ity eke karma prhur manhia
yaja-dna-tapa-karma na tyjyam iti chpare`,hindi_meaning:"            ,      ,         ",meaning:"Some learned men declare that all kinds of fruitive activities should be given up as faulty, yet other sages maintain that acts of sacrifice, charity and penance should never be abandoned."},{id:608,verse_number:4,chapter_number:18,text:`      |
     ||-||`,transliteration:`nihchaya hiu me tatra tyge bharata-sattama
tygo hi puruha-vyghra tri-vidha samprakrtita`,hindi_meaning:" !  !              ",meaning:"O best of the Bharatas, hear from Me now My final judgment about renunciation. O tiger among men, renunciation is declared in the scriptures to be of three kinds."},{id:609,verse_number:5,chapter_number:18,text:`     |
     ||-||`,transliteration:`yaja-dna-tapa-karma na tyjya kryam eva tat
yajo dna tapah chaiva pvanni manhim`,hindi_meaning:",         ,     ,    -        ",meaning:"Acts of sacrifice, charity and penance are not to be given up; they must be performed. Indeed, sacrifice, charity and penance purify even the great souls."},{id:610,verse_number:6,chapter_number:18,text:`       |
     ||-||`,transliteration:`etny api tu karmi saga tyaktv phalni cha
kartavynti me prtha nihchita matam uttamam`,hindi_meaning:" !                  ",meaning:"All these activities should be performed without attachment or any expectation of result. They should be performed as a matter of duty, O son of Pritha. That is My final opinion."},{id:611,verse_number:7,chapter_number:18,text:`     |
   ||-||`,transliteration:`niyatasya tu sannysa karmao nopapadyate
moht tasya paritygas tmasa parikrtita`,hindi_meaning:"              ",meaning:"Prescribed duties should never be renounced. If one gives up his prescribed duties because of illusion, such renunciation is said to be in the mode of ignorance."},{id:612,verse_number:8,chapter_number:18,text:`   |
       ||-||`,transliteration:`dukham ity eva yat karma kya-kleha-bhayt tyajet
sa kitv rjasa tyga naiva tyga-phala labhet`,hindi_meaning:"              ,           ",meaning:"Anyone who gives up prescribed duties as troublesome or out of fear of bodily discomfort is said to have renounced in the mode of passion. Such action never leads to the elevation of renunciation."},{id:613,verse_number:9,chapter_number:18,text:`    |
        ||-||`,transliteration:`kryam ity eva yat karma niyata kriyate 'rjuna
saga tyaktv phala chaiva sa tyga sttviko mata`,hindi_meaning:" !             ,      ",meaning:"O Arjuna, when one performs his prescribed duty only because it ought to be done, and renounces all material association and all attachment to the fruit, his renunciation is said to be in the mode of goodness."},{id:614,verse_number:10,chapter_number:18,text:`     |
    ||-||`,transliteration:`na dvehy akuhala karma kuhale nnuhajjate
tyg sattva-samviho medhv chhinna-sahaya`,hindi_meaning:"    ,    ,                  ",meaning:"Those who are situated in the mode of goodness, who are wise, who have renounced the fruits of their actions, and whose doubts are destroyed by transcendental knowledge, have no hatred for disagreeable work nor attachment for agreeable work."},{id:615,verse_number:11,chapter_number:18,text:`      |
    ||-||`,transliteration:`na hi deha-bhit hakya tyaktu karmy ahehata
yas tu karma-phala-tyg sa tygty abhidhyate`,hindi_meaning:"                ,    ",meaning:"It is indeed impossible for an embodied being to give up all activities. But he who renounces the fruits of action is called one who has truly renounced."},{id:616,verse_number:12,chapter_number:18,text:`      |
      ||-||`,transliteration:`aniham iha mihra cha tri-vidha karmaa phalam
bhavaty atygin pretya na tu sannysin kvachit`,hindi_meaning:"                 - ,          ",meaning:"For one who is not renounced, the threefold fruits of actiondesirable, undesirable and mixedaccrue after death. But those who are in the renounced order of life have no such results to suffer or enjoy."},{id:617,verse_number:13,chapter_number:18,text:`     |
     ||-||`,transliteration:`pachaitni mahbho krani nibodha me
skhye kitnte proktni siddhaye sarva-karmam`,hindi_meaning:" !                  ",meaning:"O mighty-armed one, learn from Me of the five factors in the accomplishment of all actions, as explained in the sankhya philosophy for understanding the end of all works."},{id:618,verse_number:14,chapter_number:18,text:`      |
     ||-||`,transliteration:`adhihhna tath kart karaa cha pithag-vidham
vividhh cha pithak cheh daiva chaivtra pachamam`,hindi_meaning:" (),  (),   (),   ()   () -    ",meaning:"The place of action [the body], the performer, the various senses, the many different kinds of endeavor, and ultimately the Supersoulthese are the five factors of action."},{id:619,verse_number:15,chapter_number:18,text:`   |
       ||-||`,transliteration:`harra-v-manobhir yat karma prrabhate nara
nyyya v viparta v pachaite tasya hetava`,hindi_meaning:"    ,       ,      ,     ",meaning:"Whatever right or wrong action a man performs by body, mind or speech is caused by these five factors."},{id:620,verse_number:16,chapter_number:18,text:`      |
    ||-||`,transliteration:`tatraiva sati kartram tmna kevala tu ya
pahyaty akita-buddhitvn na sa pahyati durmati`,hindi_meaning:"             ,       ,   ",meaning:"Therefore one who thinks himself the only doer, not considering the five factors, is certainly not very intelligent and cannot see things as they are."},{id:621,verse_number:17,chapter_number:18,text:`      |
      ||-||`,transliteration:`yasya nhakito bhvo buddhir yasya na lipyate
hatv 'pi sa iml lokn na hanti na nibadhyate`,hindi_meaning:"             ,             ",meaning:"One who is not motivated by false ego, whose intelligence is not entangled, though he kills men in this world, does not kill. Nor is he bound by his actions."},{id:622,verse_number:18,chapter_number:18,text:`     |
     ||-||`,transliteration:`jna jeya parijt tri-vidh karma-chodan
karaa karma karteti tri-vidha karma-sagraha`,hindi_meaning:",    -       ,    -      ",meaning:"Knowledge, the object of knowledge, and the knower are the three factors that motivate action; the senses, work and the worker comprise the threefold basis of action."},{id:623,verse_number:19,chapter_number:18,text:`       |
    ||-||`,transliteration:`jna karma cha kart cha tridhaiva gua-bhedata
prochyate gua-sakhyne yathvac chhiu tny api`,hindi_meaning:"    ,    -               ,    ",meaning:"In terms of the three modes of material nature, there are three kinds of knowledge, action and workers. Now hear of them from Me."},{id:624,verse_number:20,chapter_number:18,text:`   |
     ||-||`,transliteration:`sarva-bhtehu yenaika bhvam avyayam khate
avibhakta vibhaktehu taj jna viddhi sttvikam`,hindi_meaning:"         ,       ,    ",meaning:"That knowledge by which one undivided spiritual nature is seen in all living entities, though they are divided into innumerable forms, you should understand to be in the mode of goodness."},{id:625,verse_number:21,chapter_number:18,text:`    |
      ||-||`,transliteration:`pithaktvena tu yaj jna nn-bhvn pithag-vidhn
vetti sarvehu bhtehu taj jna viddhi rjasam`,hindi_meaning:"          -  ,    ",meaning:"That knowledge by which one sees different types of bodies as being different from one another, understand that knowledge to be in the mode of passion."},{id:626,verse_number:22,chapter_number:18,text:`   |
   ||-||`,transliteration:`yat tu kitsna-vad ekasmin krye saktam ahaitukam
atattvrtha-vad alpa cha tat tmasam udhitam`,hindi_meaning:"          , ,    ,      ",meaning:"And that knowledge by which one is attached to one kind of work as the all in all, without knowledge of the truth, and which is very meager, is said to be in the mode of darkness."},{id:627,verse_number:23,chapter_number:18,text:`   |
   ||-||`,transliteration:`niyata saga-rahitam arga-dvehata kitam
aphala-prepsun karma yat tat sttvikam uchyate`,hindi_meaning:"  , , -             ,      ",meaning:"Work done as a matter of duty, without attachment to the fruits of work and without any attraction or hatred, is said to be in the mode of goodness."},{id:628,verse_number:24,chapter_number:18,text:`      |
   ||-||`,transliteration:`yat tu kmepsun karma shakrea v puna
kriyate bahulysa tad rjasam udhitam`,hindi_meaning:"    ,          ,      ",meaning:"But work done with great effort by one seeking to gratify his desires, and which is enacted from a sense of false ego, is called action in the mode of passion."},{id:629,verse_number:25,chapter_number:18,text:`     |
   ||-||`,transliteration:`anubandha khaya hism anapekhya cha pauruham
mohd rabhyate karma yat tat tmasam uchyate`,hindi_meaning:"  , ,               ,      ",meaning:"That work which is begun in delusion, without consideration of future bondage, loss or injury to others, and which is done for the sake of one's own pleasure, is said to be in the mode of ignorance."},{id:630,verse_number:26,chapter_number:18,text:`  |
    ||-||`,transliteration:`mukta-sago 'nahavd dhity-utsha-samanvita
siddhy-asiddhyor nirvikra kart sttvika uchyate`,hindi_meaning:"  , ,       -   ,      ",meaning:"The worker who is free from all material attachments and false ego, who is enthusiastic and resolute, and who is indifferent to success or failure, is a worker in the mode of goodness."},{id:631,verse_number:27,chapter_number:18,text:`   |
    ||-||`,transliteration:`rg karma-phala-prepsur lubdho histmako 'huchi
harha-hoknvita kart rjasa parikrtita`,hindi_meaning:"  ,     , , ,   -   ,      ",meaning:"The worker who is attached to work and the fruits of work, who is greedy, always envious, impure, and moved by joy and sorrow, is said to be in the mode of passion."},{id:632,verse_number:28,chapter_number:18,text:`     |
      ||-||`,transliteration:`ayukta prkita stabdha haho naihkitiko 'lasa
vihd drgha-str cha kart tmasa uchyate`,hindi_meaning:"  , , , , , ,    ,      ",meaning:"The worker who is always engaged in work against the injunctions of the scripture, who is materialistic, obstinate, cheating and expert in insulting others, and who is lazy, always morose and procrastinating, is said to be a worker in the mode of ignorance."},{id:633,verse_number:29,chapter_number:18,text:`    |
   ||-||`,transliteration:`buddher bheda dhiteh chaiva guatas tri-vidha hiu
prochyamnam ahehea pithaktvena dhanajaya`,hindi_meaning:" !               ,     ",meaning:"O winner of wealth, now please listen as I tell you in detail of the different kinds of understanding and determination, according to the three modes of nature."},{id:634,verse_number:30,chapter_number:18,text:`      |
         ||-||`,transliteration:`pravitti cha nivitti cha krykrye bhaybhaye
bandha mokha cha y vetti buddhi s prtha sttvik`,hindi_meaning:" !     ,   ,   ,      ,    ",meaning:"O son of Pritha, that understanding by which one knows what ought to be done and what ought not to be done, what is to be feared and what is not to be feared, what is binding and what is liberating, is in the mode of goodness."},{id:635,verse_number:31,chapter_number:18,text:`      |
     ||-||`,transliteration:`yay dharmam adharma cha krya chkryam eva cha
ayathvat prajnti buddhi s prtha rjas`,hindi_meaning:" !      ,        ,    ",meaning:"O son of Pritha, that understanding which cannot distinguish between religion and irreligion, between action that should be done and action that should not be done, is in the mode of passion."},{id:636,verse_number:32,chapter_number:18,text:`     |
     ||-||`,transliteration:`adharma dharmam iti y manyate tamasvit
sarvrthn viparth cha buddhi s prtha tmas`,hindi_meaning:" !                  ,    ",meaning:"O son of Pritha, that understanding which considers irreligion to be religion and religion to be irreligion, under the spell of illusion and darkness, and strives always in the wrong direction, is in the mode of ignorance."},{id:637,verse_number:33,chapter_number:18,text:`    |
     ||-||`,transliteration:`dhity yay dhrayate mana-prendriya-kriy
yogenvyabhicriy dhiti s prtha sttvik`,hindi_meaning:" !       ,         ,    ",meaning:"O son of Pritha, that determination which is unbreakable, which is sustained with steadfastness by yoga practice, and which thus controls the activities of the mind, life and senses, is determination in the mode of goodness."},{id:638,verse_number:34,chapter_number:18,text:`    |
      ||-||`,transliteration:`yay tu dharma-kmrthn dhity dhrayate 'rjuna
prasagena phalkkh dhiti s prtha rjas`,hindi_meaning:" !  !         ,       ,    ",meaning:"But that determination by which one holds fast to fruitive results in religion, economic development and sense gratification is of the nature of passion, O Arjuna."},{id:639,verse_number:35,chapter_number:18,text:`       |
       ||-||`,transliteration:`yay svapna bhaya hoka vihda madam eva cha
na vimuchati durmedh dhiti s prtha tmas`,hindi_meaning:" !     , , ,      ,    ",meaning:"And that determination which cannot go beyond dreaming, fearfulness, lamentation, moroseness and illusionsuch unintelligent determination, O son of Pritha, is in the mode of darkness."},{id:640,verse_number:36,chapter_number:18,text:`      |
     ||-||`,transliteration:`sukha tv idn tri-vidha hiu me bharatarhabha
abhysd ramate yatra dukhnta cha nigachchhati`,hindi_meaning:" !      ,             ",meaning:"O best of the Bharatas, now please hear from Me about the three kinds of happiness by which the conditioned soul enjoys, and by which he sometimes comes to the end of all distress."},{id:641,verse_number:37,chapter_number:18,text:`   |
   ||-||`,transliteration:`yat tad agre viham iva parime 'mitopamam
tat sukha sttvika proktam tma-buddhi-prasdajam`,hindi_meaning:"        ,        ,           ",meaning:"That which in the beginning may be just like poison but at the end is just like nectar and which awakens one to self-realization is said to be happiness in the mode of goodness."},{id:642,verse_number:38,chapter_number:18,text:` |
     ||-||`,transliteration:`vihayendriya-sayogd yat tad agre 'mitopamam
parime viham iva tat sukha rjasa smitam`,hindi_meaning:"              ,        ,      ",meaning:"That happiness which is derived from contact of the senses with their objects and which appears like nectar at first but poison at the end is said to be of the nature of passion."},{id:643,verse_number:39,chapter_number:18,text:`     |
  ||-||`,transliteration:`yad agre chnubandhe cha sukha mohanam tmana
nidrlasya-pramdottha tat tmasam udhitam`,hindi_meaning:"             ,       ,      ",meaning:"And that happiness which is blind to self-realization, which is delusion from beginning to end and which arises from sleep, laziness and illusion, is said to be of the nature of ignorance."},{id:644,verse_number:40,chapter_number:18,text:`        |
    ||-||`,transliteration:`na tad asti pithivy v divi devehu v puna
sattva prakiti-jair mukta yad ebhi syt tribhir guai`,hindi_meaning:"             ,          ",meaning:"There is no being existing, either here or among the demigods in the higher planetary systems, which is free from these three modes born of material nature."},{id:645,verse_number:41,chapter_number:18,text:`    |
   ||-||`,transliteration:`brhmaa-khatriya-vih hdr cha parantapa
karmi pravibhaktni svabhva-prabhavair guai`,hindi_meaning:" ! , ,            ",meaning:"Brhmaas, katriyas, vaiyas and dras are distinguished by the qualities born of their own natures in accordance with the material modes, O chastiser of the enemy."},{id:646,verse_number:42,chapter_number:18,text:`     |
    ||-||`,transliteration:`hamo damas tapa haucha khntir rjavam eva cha
jna vijnam stikya brahma-karma svabhva-jam`,hindi_meaning:", , , , , , ,    -      ",meaning:"Peacefulness, self-control, austerity, purity, tolerance, honesty, knowledge, wisdom and religiousnessthese are the natural qualities by which the brhmaas work."},{id:647,verse_number:43,chapter_number:18,text:`     |
    ||-||`,transliteration:`haurya tejo dhitir dkhya yuddhe chpy apalyanam
dnam hvara-bhvah cha khtra karma svabhva-jam`,hindi_meaning:", , , ,     ,    -       ",meaning:"Heroism, power, determination, resourcefulness, courage in battle, generosity and leadership are the natural qualities of work for the katriyas."},{id:648,verse_number:44,chapter_number:18,text:`   |
    ||-||`,transliteration:`kihi-gaurakhya-vijya vaiya-karma svabhva-jam
paricharytmaka karma hdrasypi svabhva-jam`,hindi_meaning:",    -              ",meaning:"Farming, cow protection and business are the natural work for the vaiyas, and for the dras there is labor and service to others."},{id:649,verse_number:45,chapter_number:18,text:`      |
     ||-||`,transliteration:`sve sve karmay abhirata sasiddhi labhate nara
svakarma-nirata siddhi yath vindati tac chhiu`,hindi_meaning:" -                 ,  ",meaning:"By following his qualities of work, every man can become perfect. Now please hear from Me how this can be done."},{id:650,verse_number:46,chapter_number:18,text:`     |
     ||-||`,transliteration:`yata pravittir bhtn yena sarvam ida tatam
svakarma tam abhyarchya siddhi vindati mnava`,hindi_meaning:"            ,           ",meaning:"By worship of the Lord, who is the source of all beings and who is all-pervading, a man can attain perfection through performing his own work."},{id:651,verse_number:47,chapter_number:18,text:`   |
     ||-||`,transliteration:`hreyn sva-dharmo vigua para-dharmt sv-anuhhitt
sva-dharme nidhana hreya para-dharmo bhayvaha`,hindi_meaning:"               ,   ",meaning:"It is better to engage in one's own occupation, even though one may perform it imperfectly, than to accept another's occupation and perform it perfectly. Duties prescribed according to one's nature are never affected by sinful reactions."},{id:652,verse_number:48,chapter_number:18,text:`      |
    ||-||`,transliteration:`sahaja karma kaunteya sa-doham api na tyajet
sarvrambh hi dohea dhmengnir ivvit`,hindi_meaning:" !                 ,       ",meaning:"Every endeavor is covered by some fault, just as fire is covered by smoke. Therefore one should not give up the work born of his nature, O son of Kunt, even if such work is full of fault."},{id:653,verse_number:49,chapter_number:18,text:`    |
   ||-||`,transliteration:`asakta-buddhi sarvatra jittm vigata-spiha
naihkarmya-siddhi param sannysendhigachchhati`,hindi_meaning:"  ,     ,        ",meaning:"One who is self-controlled and unattached, who disregards all material enjoyments, can obtain, by practice of renunciation, the highest perfect stage of freedom from reaction."},{id:654,verse_number:50,chapter_number:18,text:`       |
      ||-||`,transliteration:`siddhi prpto yath brahma tathpnoti nibodha me
samsenaiva kaunteya nihh jnasya y par`,hindi_meaning:" !      ,               ,  ",meaning:"O son of Kunt, learn from Me how one who has achieved this perfection can attain to the supreme state of Brahman, the stage of highest knowledge, by acting in the way I shall now summarize."},{id:655,verse_number:51,chapter_number:18,text:`      |
    ||-||`,transliteration:`buddhy vihuddhay yukto dhitytmna niyamya cha
habddn vihayns tyaktv rga-dvehau vyudasya cha`,hindi_meaning:"    ,      ,       -   ",meaning:"Being purified by his intelligence and controlling the mind with determination, giving up the objects of sense gratification, being freed from attachment and hatred."},{id:656,verse_number:52,chapter_number:18,text:`   |
    ||-||`,transliteration:`vivikta-sev laghv-h yata-vk-kya-mnasa
dhyna-yoga-paro nitya vairgya samuphrita`,hindi_meaning:" , , ,          ",meaning:"One who lives in a secluded place, who eats little, and who controls his body, mind and power of speech, who is always in trance and who is detached, free from false ego, false strength, false pride, lust, anger, and acceptance of material things, free from false proprietorship, and peacefulsuch a person is certainly elevated to the position of self-realization."},{id:657,verse_number:53,chapter_number:18,text:`      |
     ||-||`,transliteration:`ahakra bala darpa kma krodha parigraham
vimucya nirmama hnto brahma-bhyya kalpate`,hindi_meaning:", , , ,     ,         ",meaning:"One who is thus transcendentally situated at once realizes the Supreme Brahman and becomes fully joyful. He never laments or desires to have anything. He is equally disposed toward every living entity. In that state he attains pure devotional service unto Me."},{id:658,verse_number:54,chapter_number:18,text:`      |
      ||-||`,transliteration:`brahma-bhta prasanntm na hochati na kkhati
sama sarvehu bhtehu mad-bhakti labhate parm`,hindi_meaning:"  ,     ,            ",meaning:"One who is thus transcendentally situated at once realizes the Supreme Brahman and becomes fully joyful. He never laments or desires to have anything. He is equally disposed toward every living entity. In that state he attains pure devotional service unto Me."},{id:659,verse_number:55,chapter_number:18,text:`    |
      ||-||`,transliteration:`bhakty mm abhijnti yvn yah chsmi tattvata
tato m tattvato jtv vihate tad-anantaram`,hindi_meaning:"                     ",meaning:"One can understand Me as I am, as the Supreme Personality of Godhead, only by devotional service. And when one is in full consciousness of Me by such devotion, he can enter into the kingdom of God."},{id:660,verse_number:56,chapter_number:18,text:`    |
   ||-||`,transliteration:`sarva-karmy api sad kurvo mad-vyaphraya
mat-prasdd avpnoti hhvata padam avyayam`,hindi_meaning:"                    ",meaning:"Though engaged in all kinds of activities, My pure devotee, under My protection, reaches the eternal and imperishable abode by My grace."},{id:661,verse_number:57,chapter_number:18,text:`     |
    ||-||`,transliteration:`chetas sarva-karmi mayi sannyasya mat-para
buddhi-yogam uphritya mac-citta satata bhava`,hindi_meaning:"        ,         ",meaning:"In all activities just depend upon Me and work always under My protection. In such devotional service, be fully conscious of Me."},{id:662,verse_number:58,chapter_number:18,text:`   |
    ||-||`,transliteration:`mac-citta sarva-durgi mat-prasdt tarihyasi
atha chet tvam ahakrn na hrohyasi vinakhyasi`,hindi_meaning:"                ,    ",meaning:"If you become conscious of Me, you will pass over all the obstacles of conditional life by My grace. If, however, you do not work in such consciousness but act through false ego, not hearing Me, you will be lost."},{id:663,verse_number:59,chapter_number:18,text:`     |
    ||-||`,transliteration:`yad ahakram hritya na yotsya iti manyase
mithyaiha vyavasyas te prakitis tv niyokhyati`,hindi_meaning:"      '   '   ,          ",meaning:"If you do not act according to My direction and do not fight, then you will be falsely directed. By your nature, you will have to be engaged in warfare."},{id:664,verse_number:60,chapter_number:18,text:`     |
    ||-||`,transliteration:`svabhva-jena kaunteya nibaddha svena karma
kartu nechchhasi yan moht karihyasy avaho 'pi tat`,hindi_meaning:" !     ,        ,      ",meaning:"O son of Kunt, being bound by your own fruitive activities, which are born of your own nature, you will have to do that which you do not wish to do out of delusion."},{id:665,verse_number:61,chapter_number:18,text:`    |
   ||-||`,transliteration:`hvara sarva-bhtn hid-dehe 'rjuna tihhati
bhrmayan sarva-bhtni yantrrhni myay`,hindi_meaning:" !                  ",meaning:"The Supreme Lord is situated in everyone's heart, O Arjuna, and is directing the wanderings of all living entities, who are seated as on a machine, made of the material energy."},{id:666,verse_number:62,chapter_number:18,text:`     |
     ||-||`,transliteration:`tam eva haraa gachchha sarva-bhvena bhrata
tat-prasdt par hnti sthna prpsyasi hhvatam`,hindi_meaning:" !                  ",meaning:"O scion of Bharata, surrender unto Him utterly. By His grace you will attain transcendental peace and the supreme and eternal abode."},{id:667,verse_number:63,chapter_number:18,text:`     |
    ||-||`,transliteration:`iti te jnam khyta guhyd guhyatara may
vimihyaitad ahehea yathechchhasi tath kuru`,hindi_meaning:"                   ,  ",meaning:"Thus I have explained to you knowledge still more confidential. Deliberate on this fully, and then do what you wish to do."},{id:668,verse_number:64,chapter_number:18,text:`      |
       ||-||`,transliteration:`sarva-guhyatama bhya hiu me parama vacha
iho 'si me diham iti tato vakhymi te hitam`,hindi_meaning:"             ,   ,       ",meaning:"Because you are My very dear friend, I am speaking to you My supreme instruction, the most confidential knowledge of all. Hear this from Me, for it is for your benefit."},{id:669,verse_number:65,chapter_number:18,text:`      |
   ||-||`,transliteration:`man-man bhava mad-bhakto mad-yj m namaskuru
mm evaihyasi yuktvai vam tmna mat-paryaa`,hindi_meaning:"   ,   ,            ,       ",meaning:"Always think of Me, become My devotee, worship Me and offer your homage unto Me. Thus you will come to Me without fail. I promise you this because you are My very dear friend."},{id:670,verse_number:66,chapter_number:18,text:`    |
      ||-||`,transliteration:`sarva-dharmn parityajya mm eka haraa vraja
aha tv sarva-ppebhyo mokhayihymi m hucha`,hindi_meaning:"                ,   ",meaning:"Abandon all varieties of religion and just surrender unto Me. I shall deliver you from all sinful reactions. Do not fear."},{id:671,verse_number:67,chapter_number:18,text:`     |
       ||-||`,transliteration:`idam te ntapaskya nbhaktya kadchana
na chhuhrhave vchya na cha m yo 'bhyasyati`,hindi_meaning:"    ,   ,              ",meaning:"This confidential knowledge may never be explained to those who are not austere, or devoted, or engaged in devotional service, nor to one who is envious of Me."},{id:672,verse_number:68,chapter_number:18,text:`     |
     ||-||`,transliteration:`ya ida parama guhya mad-bhaktehv abhidhsyati
bhakti mayi par kitv mm evaihyaty asahaya`,hindi_meaning:"       ,          ",meaning:"For one who explains this supreme secret to the devotees, pure devotional service is guaranteed, and at the end he will come back to Me."},{id:673,verse_number:69,chapter_number:18,text:`     |
       ||-||`,transliteration:`na cha tasmn manuhyehu kahchin me priya-kittama
bhavit na cha me tasmd anya priyataro bhuvi`,hindi_meaning:"                 ",meaning:"There is no servant in this world more dear to Me than he, nor will there ever be one more dear."},{id:674,verse_number:70,chapter_number:18,text:`      |
     ||-||`,transliteration:`adhyeshye cha ya ima dharmya savdam vayo
jna-yajena tenham iha sym iti me mati`,hindi_meaning:"         ,      ,    ",meaning:"And I declare that one who studies this sacred conversation of ours worships Me by his intelligence."},{id:675,verse_number:71,chapter_number:18,text:`    |
   ||-||`,transliteration:`hraddhvn anasyah cha hiuyd api yo nara
so 'pi mukta hubhll lokn prpnuyt puya-karmam`,hindi_meaning:"      ,           ",meaning:"And one who listens with faith and without envy becomes free from sinful reactions and attains to the auspicious planets where the pious dwell."},{id:676,verse_number:72,chapter_number:18,text:`    |
   ||-||`,transliteration:`kacchid etac chhruta prtha tvayaikgrea chetas
kacchid ajna-samoha pranahas te dhanajaya`,hindi_meaning:" !  !        ?       ?",meaning:"O son of Pritha, O conqueror of wealth, have you heard this with an attentive mind? And are your ignorance and illusions now dispelled?"},{id:677,verse_number:73,chapter_number:18,text:`  |
    |
     ||-||`,transliteration:`arjuna uvcha
naho moha smitir labdh tvat-prasdn maychyuta
sthito 'smi gata-sandeha karihye vacana tava`,hindi_meaning:"  :  !                 ,        ",meaning:"Arjuna said: My dear Ka, O infallible one, my illusion is now gone. I have regained my memory by Your mercy. I am now firm and free from doubt and am prepared to act according to Your instructions."},{id:678,verse_number:74,chapter_number:18,text:`  |
     |
   ||-||`,transliteration:`sajaya uvcha
ty aha vsudevasya prthasya cha mahtmana
savdam imam ahrauha adbhuta roma-harhaam`,hindi_meaning:"  :               ",meaning:"Sajaya said: Thus have I heard the conversation between two great souls, Ka and Arjuna. And so wonderful is that message that my hair is standing on end."},{id:679,verse_number:75,chapter_number:18,text:`  |
   ||-||`,transliteration:`vysa-prasdch chhrutavn etad guhyam aha param
yoga yogahvart kiht skht kathayata svayam`,hindi_meaning:"                ",meaning:"By the mercy of Vysa, I have heard these most confidential talks directly from the master of all mysticism, Ka, who was speaking personally to Arjuna."},{id:680,verse_number:76,chapter_number:18,text:`   |
     ||-||`,transliteration:`rjan sasmitya sasmitya savdam imam adbhutam
kehavrjunayo puya hihymi cha muhur muhu`,hindi_meaning:" !           -    -   ",meaning:"O King, as I repeatedly recall this wondrous and holy dialogue between Ka and Arjuna, I take pleasure, being thrilled at every moment."},{id:681,verse_number:77,chapter_number:18,text:`     |
      ||-||`,transliteration:`tac cha sasmitya sasmitya rpam aty-adbhuta hare
vismayo me mahn rjan hihymi cha puna puna`,hindi_meaning:" !       -          -   ",meaning:"O King, as I remember the wonderful form of Lord Ka, I am struck with wonder more and more, and I rejoice again and again."},{id:682,verse_number:78,chapter_number:18,text:`      |
    ||-||`,transliteration:`yatra yogahvara kiho yatra prtho dhanur-dhara
tatra hrr vijayo bhtir dhruv ntir matir mama`,hindi_meaning:"        ,  , , ,      ",meaning:"Wherever there is Ka, the master of all mystics, and wherever there is Arjuna, the supreme archer, there will also certainly be opulence, victory, extraordinary power, and morality. That is my opinion."}]}],MS=[{id:1,chapter_number:1,name:" ",name_meaning:"Hanuman Chalisa",summary:"The Hanuman Chalisa is a devotional hymn dedicated to Lord Hanuman, composed by Tulsidas. It consists of 40 chaupai (quatrains) framed by two opening dohas and one concluding doha, for a total of 43 lines.",verses_count:43,verses:[{id:1,verse_number:1,chapter_number:1,text:`   ,    
   ,    `,transliteration:`rguru charana saroja raja, nija manu mukuru sudhri
baranau raghubara bimala jasu, jo dyaku phala chri`,hindi_meaning:"               ()       ,    (, , , )   ",meaning:"With the dust of the Guru's lotus feet I clean the mirror of my mind and sing the pure glory of Raghuvara, the bestower of the fourfold fruits of life."},{id:2,verse_number:2,chapter_number:1,text:`  ,  -
    ,   `,transliteration:`buddhihna tanu jnike, sumirau pavana-kumra
bal buddhi bidy dehu mohi, harahu kalesa bikra`,hindi_meaning:"       ()       ,           ",meaning:"Knowing my ignorance, I remember you, O Son of the Wind; grant me strength, wisdom and knowledge, and remove my afflictions and impurities."},{id:3,verse_number:3,chapter_number:1,text:`    
    `,transliteration:`jaya hanumna jna guna sgara
jaya kapsa tihu loka ujgara`,hindi_meaning:"       ;         ",meaning:"Victory to Hanuman, ocean of wisdom and virtue; victory to the lord of monkeys who illuminates the three worlds."},{id:4,verse_number:4,chapter_number:1,text:`   
-  `,transliteration:`rmadta atulita bala dhm
ajani-putra pavanasuta nm`,hindi_meaning:"  ,    , -  -     ()",meaning:"Messenger of Rama, abode of incomparable strength; son of Anjani and son of the Wind."},{id:5,verse_number:5,chapter_number:1,text:`  
    `,transliteration:`mahbra bikrama bajarag
kumati nivra sumati ke sag`,hindi_meaning:",               ",meaning:"Great hero, mighty and thunderbolt-bodied; dispeller of evil thoughts and companion of good sense."},{id:6,verse_number:6,chapter_number:1,text:`   
   `,transliteration:`kacana barana birja subes
knana kuala kucita kes`,hindi_meaning:"     ,       ",meaning:"Golden-hued, beautifully attired, with earrings and curly hair."},{id:7,verse_number:7,chapter_number:1,text:`    
   `,transliteration:`htha bajra au dhvaj birjai
kdhe mja jane sjai`,hindi_meaning:"      ,       ",meaning:"Holding a thunderbolt and flag in your hands, wearing the sacred munja thread on the shoulder."},{id:8,verse_number:8,chapter_number:1,text:`   
    `,transliteration:`akara suvana kesar nandana
tej pratpa mah jaga vandana`,hindi_meaning:" ()               ",meaning:"Born of Shiva and Kesari, your brilliance and glory are revered throughout the world."},{id:9,verse_number:9,chapter_number:1,text:`   
    `,transliteration:`vidyvna gu ati chtura
rma kja karibe ko tura`,hindi_meaning:" ,    ,           ",meaning:"Learned, virtuous and extremely clever, eager always to perform Rama's work."},{id:10,verse_number:10,chapter_number:1,text:`    
    `,transliteration:`prabhu caritra sunibe ko rasiy
rma lakhana st mana basiy`,hindi_meaning:"       ; --     ",meaning:"Delighting in hearing about the Lord's deeds, with Rama, Lakshmana and Sita dwelling in the heart."},{id:11,verse_number:11,chapter_number:1,text:`    
    `,transliteration:`skma rpa dhari siyahi dikhv
bikaa rpa dhari laka jarv`,hindi_meaning:"                ",meaning:"Taking a subtle form you showed yourself to Sita; taking a dreadful form you burned Lanka."},{id:12,verse_number:12,chapter_number:1,text:`    
   `,transliteration:`bhma rpa dhari asura sahre
rmacandra ke kja savre`,hindi_meaning:"             ",meaning:"Assuming a mighty form you destroyed demons and accomplished Lord Rama's tasks."},{id:13,verse_number:13,chapter_number:1,text:`   
   `,transliteration:`lya sajvani lakhana jiyye
rraghubra hari ura lye`,hindi_meaning:"     ;  ()      ",meaning:"Bringing the Sanjivani herb you revived Lakshmana; Sri Raghubira embraced you in joy."},{id:14,verse_number:14,chapter_number:1,text:`   
     `,transliteration:`raghupati knh bahuta ba
tum mama priya bharatahi sama bh`,hindi_meaning:" ()            -  ",meaning:"Raghupati praised you greatly, saying you are as dear to me as my brother Bharata."},{id:15,verse_number:15,chapter_number:1,text:`    
    `,transliteration:`sahasa badana tumharo jasa gvai
asa kahi rpati kaha lagvai`,hindi_meaning:"     ;    ()    ",meaning:"Thousands sing your glory; saying this, the Lord embraced you."},{id:16,verse_number:16,chapter_number:1,text:`  
   `,transliteration:`sanakdika brahmdi muns
nrada srada sahita ahs`,hindi_meaning:" ,  ,         ",meaning:"Sanaka and other sages, Brahma and other gods, Narada and Saraswati all join in praising you."},{id:17,verse_number:17,chapter_number:1,text:`    
     `,transliteration:`jama kubera digapla jah te
kavi kovida kahi sake kah te`,hindi_meaning:",      , -       ",meaning:"Where Yama, Kubera and the guardians of directions are, how can poets and sages adequately praise you?"},{id:18,verse_number:18,chapter_number:1,text:`   
    `,transliteration:`tum upakra sugrvahi knh
rma milya rja pada dnh`,hindi_meaning:"    ;        ",meaning:"You helped Sugriva, introduced him to Rama and secured for him the throne."},{id:19,verse_number:19,chapter_number:1,text:`   
    `,transliteration:`tumharo mantra bibhaa mn
lakevara bhae saba jaga jn`,hindi_meaning:"              ",meaning:"Vibhishana accepted your counsel and became king of Lanka; the world knows this."},{id:20,verse_number:20,chapter_number:1,text:`    
    `,transliteration:`yuga sahasra yojana para bhn
lilyo thi madhura phala jn`,hindi_meaning:"           ",meaning:"You swallowed the sun thinking it a sweet fruit, though it was thousands of yojanas away."},{id:21,verse_number:21,chapter_number:1,text:`    
    `,transliteration:`prabhu mudrik meli mukha mh
jaladhi lghi gaye acaraja nh`,hindi_meaning:"             ",meaning:"Placing the Lord's ring in your mouth you crossed the ocean  no wonder at that."},{id:22,verse_number:22,chapter_number:1,text:`    
   `,transliteration:`durgama kja jagata ke jete
sugama anugraha tumhare tete`,hindi_meaning:"      ,        ",meaning:"All difficult tasks in the world become easy by your grace."},{id:23,verse_number:23,chapter_number:1,text:`   
    `,transliteration:`rma dure tum rakhvre
hota na j binu paisre`,hindi_meaning:"                ",meaning:"You are the guardian at Rama's door; none can enter without your permission."},{id:24,verse_number:24,chapter_number:1,text:`    
     `,transliteration:`saba sukha lahai tumhr saran
tum rakaka kh ko ara n`,hindi_meaning:"          ;   ,     ",meaning:"All happiness comes to those who take refuge in you; you are the protector so none fears."},{id:25,verse_number:25,chapter_number:1,text:`   
    `,transliteration:`pana teja samhro pai
tno loka hka te kpai`,hindi_meaning:"                ",meaning:"You control your own radiance; otherwise the three worlds would quake at your roar."},{id:26,verse_number:26,chapter_number:1,text:`    
   `,transliteration:`bhta pica nikaa nahi vai
mahbra jaba nma sunvai`,hindi_meaning:"-      ;         ",meaning:"Ghosts and evil spirits do not come near when the mighty one's name is chanted."},{id:27,verse_number:27,chapter_number:1,text:`    
   `,transliteration:`nsai roga harai saba pr
japata niratara hanumata br`,hindi_meaning:"              ",meaning:"All diseases vanish and all pains are removed by constant repetition of Hanuman's name."},{id:28,verse_number:28,chapter_number:1,text:`   
     `,transliteration:`sakaa te hanumna chuvai
man krama bacana dhyna jo lvai`,hindi_meaning:" ,         ,       ",meaning:"Hanuman delivers from troubles those who bring him in mind, deed and speech."},{id:29,verse_number:29,chapter_number:1,text:`    
     `,transliteration:`saba para rma tapasv rj
tina ke kja sakala tum sj`,hindi_meaning:"      ,       ",meaning:"Rama, the ascetic king, rules over all, and you made all his works successful."},{id:30,verse_number:30,chapter_number:1,text:`    
    `,transliteration:`aura manoratha jo ko lvai
sohi amita jvana phala pvai`,hindi_meaning:"   ()   ,   -  ",meaning:"Whoever brings a desire to you attains boundless fruits of life."},{id:31,verse_number:31,chapter_number:1,text:`   
   `,transliteration:`cro yuga paratpa tumhr
hai parasiddha jagata ujyr`,hindi_meaning:"              ",meaning:"Your glory shines across the four ages and your fame illumines the world."},{id:32,verse_number:32,chapter_number:1,text:`-   
   `,transliteration:`sdhu-sata ke tum rakhvre
asura nikadana rma dulre`,hindi_meaning:" -            ",meaning:"You are the guardian of saints, destroyer of demons, and beloved friend of Rama."},{id:33,verse_number:33,chapter_number:1,text:`     
    `,transliteration:`aa siddhi nava nidhi ke dt
asa bara dna jnak mt`,hindi_meaning:"             ()   ",meaning:"You are the grantor of the eight perfections and nine treasures, as given by Mother Janaki (Sita)."},{id:34,verse_number:34,chapter_number:1,text:`   
    `,transliteration:`rma rasyana tumhare ps
sad raho raghupati ke ds`,hindi_meaning:"  (-)           ",meaning:"The elixir of Rama is with you; may you remain forever the servant of Raghupati."},{id:35,verse_number:35,chapter_number:1,text:`    
-   `,transliteration:`tumhare bhajana rma ko pvai
janama-janama ke dukha bisarvai`,hindi_meaning:"        -     ",meaning:"By your devotion one attains Rama and forgets the sorrows of many births."},{id:36,verse_number:36,chapter_number:1,text:`    
  - `,transliteration:`ata kla raghubara pura j
jah janma hari-bhakta kah`,hindi_meaning:"         ,   -  ",meaning:"At the end one goes to Raghubira's abode where one is known as a devotee of Hari."},{id:37,verse_number:37,chapter_number:1,text:`    
    `,transliteration:`aura devat citta na dharai
hanumata sei sarba sukha karai`,hindi_meaning:"               ",meaning:"Fix not your mind on other deities; by Hanuman's grace all happiness is achieved."},{id:38,verse_number:38,chapter_number:1,text:`    
   `,transliteration:`sakaa kaai miai saba pr
jo sumirai hanumata balabr`,hindi_meaning:"     ,           ",meaning:"All troubles are cut and all pains removed for those who remember mighty Hanuman."},{id:39,verse_number:39,chapter_number:1,text:`    
    `,transliteration:`jaya jaya jaya hanumna gos
kp karahu gurudeva k n`,hindi_meaning:"           ",meaning:"Hail, hail, hail Hanuman Gosain; show mercy like a true guru."},{id:40,verse_number:40,chapter_number:1,text:`     
    `,transliteration:`jo sata bra pha kara jo
chuahi badi mah sukha ho`,hindi_meaning:"     ,         ",meaning:"Whoever recites this a hundred times is freed from bondage and attains great bliss."},{id:41,verse_number:41,chapter_number:1,text:`    
   `,transliteration:`jo yaha pahai hanumna cls
hoya siddhi skh gaurs`,hindi_meaning:"             () ",meaning:"Whoever reads this Hanuman Chalisa attains spiritual attainments; Gaurisa (Shiva) is witness."},{id:42,verse_number:42,chapter_number:1,text:`   
    `,transliteration:`tulasdsa sad hari cer
kjai ntha hdaya maha er`,hindi_meaning:"        !     ",meaning:"Tulsidas is forever a servant of Hari; O Lord, please make your abode in my heart."},{id:43,verse_number:43,chapter_number:1,text:`  ,   
   ,    `,transliteration:`pavanatanaya sakaa harana, magala mrti rpa
rma lakmaa st sahita, hdaya basahu sura bhpa`,hindi_meaning:" !    ,     --      ,    ",meaning:"O Son of the Wind, remover of troubles, embodiment of auspiciousness  dwell in my heart along with Rama, Lakshmana and Sita, O king of gods."}]}],kS=[{id:1,chapter_number:1,name:"",name_meaning:"Sunderkand - The Beautiful Chapter",summary:"Sunderkand is the fifth chapter of the Ramayana, describing Hanuman's journey to Lanka in search of Sita. It is considered one of the most powerful and auspicious chapters, filled with Hanuman's devotion, strength, and wisdom.",verses_count:68,verses:[{id:1,verse_number:1,chapter_number:1,text:`     
    `,transliteration:`tato rvaanitya ca bhrtara vibhaa sad
priya priyahita dhra bodhaymsa rghava`,hindi_meaning:"  ()     ,  ,       ",meaning:"Then Raghava (Rama) enlightened Vibhishana, the constant brother of Ravana, who was always dear, well-wishing, and wise."},{id:2,verse_number:2,chapter_number:1,text:"   ",transliteration:"rmad vlmkirmyae sundarake prathama sarga",hindi_meaning:"       ",meaning:"End of the first sarga of Sunderkand in the glorious Ramayana of Valmiki."},{id:3,verse_number:3,chapter_number:1,text:`     
   `,transliteration:`tato hanumn sugrvasya vacana rutv mahbala
prahamanas jagma lak rvaaplitm`,hindi_meaning:"                ",meaning:"Then the mighty Hanuman, hearing Sugriva's words, went to Lanka, protected by Ravana, with a joyful heart."},{id:4,verse_number:4,chapter_number:1,text:`     
    `,transliteration:`sa tu gatv mahvega samudra salilravam
dadara parvatareha mainka nma nmata`,hindi_meaning:"              ",meaning:"That one of great speed, going to the ocean of water, saw the excellent mountain Mainaka by name."},{id:5,verse_number:5,chapter_number:1,text:`   
    `,transliteration:`tasyopari samutpatya hanumn mruttmaja
jagma vegena mahat lak rvaaplitm`,hindi_meaning:"               ",meaning:"Rising above it, Hanuman, son of the wind, went to Lanka, protected by Ravana, with great speed."},{id:6,verse_number:6,chapter_number:1,text:`     
   `,transliteration:`tatastu rkas st dv hanumato balam
sursuraira gamya ta dadara parvatopamam`,hindi_meaning:"       ,     ,     ",meaning:"Then Sita, seeing Hanuman's strength, which was inaccessible to gods and demons, saw him like a mountain."},{id:7,verse_number:7,chapter_number:1,text:`     
     `,transliteration:`sa t dv mahbhu st okaparyam
abhivdya praamya ca tasthau hanumn agrata`,hindi_meaning:"               ",meaning:"That mighty-armed Hanuman, seeing Sita overcome with grief, saluted and bowed, and stood before her."},{id:8,verse_number:8,chapter_number:1,text:`   
   `,transliteration:`tatastu rmacandrasya datta mudrgulyakam
daraymsa styai hanumn mruttmaja`,hindi_meaning:"         ()   ",meaning:"Then Hanuman, son of the wind, showed Sita the ring given by Ramachandra."},{id:9,verse_number:9,chapter_number:1,text:`       
     `,transliteration:`s tu ta dv hanumanta st prtimat abhavat
rmasya darana prpya yath prtimat bhavet`,hindi_meaning:"       ,         ",meaning:"Sita, seeing Hanuman, became delighted, as she would be on seeing Rama."},{id:10,verse_number:10,chapter_number:1,text:`    
     `,transliteration:`tatastu hanumn vkya styai pratyabhata
rmasya kuala vkya sarva styai nyavedayat`,hindi_meaning:"                  ",meaning:"Then Hanuman spoke words to Sita and conveyed all of Rama's well-being messages to Sita."}]}],TS=[{id:1,chapter_number:1,name:" ",name_meaning:"Bajrang Baan - The Thunderbolt Arrow",summary:"Bajrang Baan is a powerful prayer dedicated to Lord Hanuman, traditionally attributed to Tulsidas. It is recited for protection, removal of obstacles, and strength.",verses_count:14,verses:[{id:1,verse_number:1,chapter_number:1,text:" ",transliteration:"hanumna bhuka",hindi_meaning:"  -    ()  ",meaning:"Hanuman Bahuk - Praise of Hanuman's arms"},{id:2,verse_number:2,chapter_number:1,text:" ",transliteration:"rgaeya nama",hindi_meaning:"   ",meaning:"Salutations to Lord Ganesha"},{id:3,verse_number:3,chapter_number:1,text:`    
    `,transliteration:`jaya hanumna jna guna sgara
jaya kapsa tihu loka ujgara`,hindi_meaning:"                  ",meaning:"Victory to Hanuman, ocean of wisdom and virtue. Victory to the Lord of monkeys, illuminator of the three worlds."},{id:4,verse_number:4,chapter_number:1,text:`   
-  `,transliteration:`rmadta atulita bala dhm
ajani-putra pavanasuta nm`,hindi_meaning:"  ,    ,        ()   ",meaning:"Messenger of Rama, possessor of incomparable strength, known as the son of Anjani and the son of the wind."},{id:5,verse_number:5,chapter_number:1,text:`  
    `,transliteration:`mahbra bikrama bajarag
kumati nivra sumati ke sag`,hindi_meaning:",    ()                ",meaning:"Great hero, valiant and thunderbolt-bodied. Remover of evil thoughts and companion of the virtuous."},{id:6,verse_number:6,chapter_number:1,text:`   
    `,transliteration:`bajaraga ba japata hanumn
saba sukha lahaim tumhr saran`,hindi_meaning:"               ,      ",meaning:"Chanting the Bajrang Baan brings refuge in Hanuman; all happiness is obtained by seeking your shelter."},{id:7,verse_number:7,chapter_number:1,text:`    
-   `,transliteration:`tumhare bhajana rma ko pvai
janama-janama ke dukha bisarvai`,hindi_meaning:"         -     ",meaning:"Through your devotion one attains Rama and forgets the sorrows of many births."},{id:8,verse_number:8,chapter_number:1,text:`    
  - `,transliteration:`ata kla raghubara pura j
jah janma hari-bhakta kah`,hindi_meaning:"    ()   ()    ,   -  ",meaning:"At the end one goes to Raghubira's city where one is called a devotee of Hari."},{id:9,verse_number:9,chapter_number:1,text:`    
    `,transliteration:`aura devat citta na dharai
hanumata sei sarba sukha karai`,hindi_meaning:"               ",meaning:"Fix not your mind on other deities; by Hanuman's grace all happiness is achieved."},{id:10,verse_number:10,chapter_number:1,text:`    
   `,transliteration:`sakaa kaai miai saba pr
jo sumirai hanumata balabr`,hindi_meaning:"   ()    ,          ",meaning:"Whoever remembers Hanuman, the mighty hero, all their troubles are cut and all pains are removed."},{id:11,verse_number:11,chapter_number:1,text:`    
    `,transliteration:`jaya jaya jaya hanumna gos
kp karahu gurudeva k n`,hindi_meaning:"           ",meaning:"Hail, hail, hail Hanuman Gosain; show mercy as a true guru."},{id:12,verse_number:12,chapter_number:1,text:`     
    `,transliteration:`jo sata bra pha kara jo
chuahi badi mah sukha ho`,hindi_meaning:"     ,           ",meaning:"Whoever recites this a hundred times is freed from bondage and attains great bliss."},{id:13,verse_number:13,chapter_number:1,text:`    
   `,transliteration:`jo yaha pahai bajaraga ba
hoya siddhi skh gaurs`,hindi_meaning:"     ,          () ",meaning:"Whoever reads this Bajrang Baan attains spiritual accomplishments; Gaurisa (Shiva) is witness."},{id:14,verse_number:14,chapter_number:1,text:`   
    `,transliteration:`tulasdsa sad hari cer
kjai ntha hdaya maha er`,hindi_meaning:"     ()    !     ",meaning:"Tulsidas is forever a servant of Hari; O Lord, please make your abode in my heart."}]}],ES=[{id:1,chapter_number:1,name:" ",name_meaning:"Yaksha Prashna  The Questions of the Yaksha",summary:"The Yaksha Prashna (Yaksha-Yudhishthira Samvad) appears in the Vana Parva of the Mahabharata. It consists of a series of philosophical and ethical questions posed by a Yaksha to Yudhishthira, testing his wisdom, righteousness, and knowledge.",verses_count:126,verses:[{id:1,verse_number:1,chapter_number:1,text:`  ?
   `,transliteration:"kata srya udeti? / brahmaa tejas srya udeti.",hindi_meaning:` :       ?

 :        `,meaning:"The Sun rises by the radiance of Brahman, the Absolute."},{id:2,verse_number:2,chapter_number:1,text:`  ?
  `,transliteration:"ki svargt param? / pit svargt para.",hindi_meaning:` :     ?

 :     `,meaning:"The father is higher than heaven."},{id:3,verse_number:3,chapter_number:1,text:`  ?
  `,transliteration:"ki bhme guru? / mt bhme gurutar.",hindi_meaning:` :     ?

 :     `,meaning:"Mother is heavier than the earth."},{id:4,verse_number:4,chapter_number:1,text:`  ?
  `,transliteration:"ki vtt ghram? / mana vtt ghram.",hindi_meaning:` :     ?

 :     `,meaning:"The mind is swifter than the wind."},{id:5,verse_number:5,chapter_number:1,text:`   ?
   `,transliteration:"ki td adhika bahu? / sakalp td adhik bahava.",hindi_meaning:` :      ?

 :  ()     `,meaning:"Thoughts are more numerous than blades of grass."},{id:6,verse_number:6,chapter_number:1,text:`  ?
  `,transliteration:"ki ghi dhanam? / santoa la ca.",hindi_meaning:` :     ?

 :    ( ) `,meaning:"Contentment and good conduct are the true wealth of a householder."},{id:7,verse_number:7,chapter_number:1,text:`  ?
  `,transliteration:"ka riye vardhana? / dna riye vardhanam.",hindi_meaning:` :     ?

 :     `,meaning:"Charity enhances prosperity."},{id:8,verse_number:8,chapter_number:1,text:` ?
 `,transliteration:"ka ppa? / vivsaghtaka ppihatama.",hindi_meaning:` :   ?

 :     `,meaning:"The betrayer of trust is the greatest sinner."},{id:9,verse_number:9,chapter_number:1,text:`  ?
   `,transliteration:"ka naraka yti? / yo dharma jtv'dharma carati.",hindi_meaning:` :    ?

 :        `,meaning:"He who knows righteousness but chooses unrighteousness goes to hell."},{id:10,verse_number:10,chapter_number:1,text:`  ?
  `,transliteration:"ki rog bhayakaratamam? / lobho rog bhayakaratama.",hindi_meaning:` :      ?

 :      `,meaning:"Greed is the most dreadful disease."},{id:11,verse_number:11,chapter_number:1,text:` ?
      Brahmaa `,transliteration:"ka brhmaa? / dama satya day ca  etai brhmaa lakaam.",hindi_meaning:` :   ?

 :  (-),         `,meaning:"The one who has selfcontrol, truth, and compassion is a Brahmin (not birth)."},{id:12,verse_number:12,chapter_number:1,text:`  ?
  `,transliteration:"ki katriyasya teja? / aurya rakaa ca.",hindi_meaning:` :     ?

 :    `,meaning:"Valor and protection constitute a Kshatriya's divinity."},{id:13,verse_number:13,chapter_number:1,text:`  ?
   `,transliteration:"ki vaiyasya karma? / ki pauplana vijya ca.",hindi_meaning:` :     ?

 : ,    `,meaning:"Agriculture, cattlerearing, and commerce are a Vaishya's duties."},{id:14,verse_number:14,chapter_number:1,text:`  ?
`,transliteration:"ki drasya dharma? / sev.",hindi_meaning:` :     ?

 :  `,meaning:"Service is the Shudra's duty."},{id:15,verse_number:15,chapter_number:1,text:` ?
   `,transliteration:"kim dtavyam? / do dtavy  tyjy.",hindi_meaning:` :   ?

 :         `,meaning:"What should be given away? One's faults  they must be discarded."},{id:16,verse_number:16,chapter_number:1,text:`  ?
  `,transliteration:"ki phalaprada mahat? / tapa ca dna ca.",hindi_meaning:` :      ?

 :     `,meaning:"Austerity and charity give the greatest fruit."},{id:17,verse_number:17,chapter_number:1,text:` ?
       `,transliteration:"ka mitram? / padi tath dharme ca upakaroti  sa mitram.",hindi_meaning:` :   ?

 :             `,meaning:"One who helps in adversity and righteousness is a true friend."},{id:18,verse_number:18,chapter_number:1,text:` ?
     `,transliteration:"ka atru? / yo drohena v lobhena v hinsati.",hindi_meaning:` :   ?

 :         `,meaning:"He who harms you by deceit or greed is an enemy."},{id:19,verse_number:19,chapter_number:1,text:` ?
   ,   `,transliteration:"kim caryam? / ahortra mta payanti jan, tatheha jvitavchino bhavanti.",hindi_meaning:` :   ?

 : -    ,         `,meaning:"People see death daily, yet live as if they will never die  that is the greatest wonder."},{id:20,verse_number:20,chapter_number:1,text:`  ?
  `,transliteration:"ki dhant reya? / la rehatara dhant.",hindi_meaning:` :     ?

 :  ()    `,meaning:"Character is superior to wealth."},{id:21,verse_number:21,chapter_number:1,text:` ?
  `,transliteration:"ka araam? / dharma araa reham.",hindi_meaning:` :   ?

 :    `,meaning:"Righteousness is the best refuge."},{id:22,verse_number:22,chapter_number:1,text:`  ?
    `,transliteration:"ka puruasya mpa? / karma  purua karma myate.",hindi_meaning:` :     ?

 :        `,meaning:"A man is measured by his actions."},{id:23,verse_number:23,chapter_number:1,text:` ?
 `,transliteration:"ki priyam? / satya priyam.",hindi_meaning:` :   ?

 :   `,meaning:"Truth is dearest."},{id:24,verse_number:24,chapter_number:1,text:` ?
 `,transliteration:"ka priyatama? / dama priyatama.",hindi_meaning:` :    ?

 :  (-)   `,meaning:"Self-control is the greatest friend."},{id:25,verse_number:25,chapter_number:1,text:`  ?
  `,transliteration:"ki puya nayati? / nind puya nayati.",hindi_meaning:` :      ?

 :      `,meaning:"Fault-finding destroys merit."},{id:26,verse_number:26,chapter_number:1,text:` ?
 `,transliteration:"ki ghratamam? / mana ghratamam.",hindi_meaning:` :    ?

 :    `,meaning:"The mind is the fastest."},{id:27,verse_number:27,chapter_number:1,text:` ?
 `,transliteration:"ka balavattara? / kla balavattara.",hindi_meaning:` :    ?

 :  ()   `,meaning:"Time is the strongest."},{id:28,verse_number:28,chapter_number:1,text:`  ?
`,transliteration:"ki dukheu hitakaram? / dhairyam.",hindi_meaning:` :     ?

 :  `,meaning:"Fortitude is most useful in adversity."},{id:29,verse_number:29,chapter_number:1,text:` ?
   `,transliteration:"ka mukta? / yo rgadveavarjita sa mukta.",hindi_meaning:` :   ?

 :          `,meaning:"He is free who is free from attachment and aversion."},{id:30,verse_number:30,chapter_number:1,text:` ?
 `,transliteration:"kica sukhatamam? / santoa sukhatama.",hindi_meaning:` :     ?

 :     `,meaning:"Contentment is the highest happiness."},{id:31,verse_number:31,chapter_number:1,text:`  ?
   `,transliteration:"kim rj anvicchet? / lokasya hitam dharma ca.",hindi_meaning:` :    ?

 :      `,meaning:"A king should seek the welfare of his people and righteousness."},{id:32,verse_number:32,chapter_number:1,text:`  ?
     `,transliteration:"ka caur ncatama? / ya krti harati sa caur ncatama.",hindi_meaning:` :      ?

 :          `,meaning:"He who steals another's reputation is the worst of thieves."},{id:33,verse_number:33,chapter_number:1,text:`  ?
  `,transliteration:"ka dna reham? / annadna jnadna ca.",hindi_meaning:` :     ?

 :    `,meaning:"The best charity is giving food and giving knowledge."},{id:34,verse_number:34,chapter_number:1,text:`  ?
  `,transliteration:"ki narasya obh? / vidy narasya obh.",hindi_meaning:` :     ?

 :     `,meaning:"Knowledge is a man's beauty."},{id:35,verse_number:35,chapter_number:1,text:`  ?
`,transliteration:"ki pumsam anugacchati? / dharmo'nugacchati.",hindi_meaning:` :      ?

 :    `,meaning:"Righteousness follows a person."},{id:36,verse_number:36,chapter_number:1,text:`  ?
  `,transliteration:"ki ppa nighnti? / pryacitta ppa nighnti.",hindi_meaning:` :      ?

 :      `,meaning:"Atonement destroys sin."},{id:37,verse_number:37,chapter_number:1,text:` ?
`,transliteration:"ki dukha? / dridryam.",hindi_meaning:` :   ?

 :  `,meaning:"Poverty is sorrow."},{id:38,verse_number:38,chapter_number:1,text:` ?
 `,transliteration:"ka rog? / matsar rog.",hindi_meaning:` :   ?

 :   `,meaning:"The envious person is diseased."},{id:39,verse_number:39,chapter_number:1,text:` ?
    `,transliteration:"ka mha? / yo adharme ramyate sa mha.",hindi_meaning:` :   ?

 :        `,meaning:"One who delights in unrighteousness is a fool."},{id:40,verse_number:40,chapter_number:1,text:`  ?
`,transliteration:"ki rakati manuya? / dharma.",hindi_meaning:` :      ?

 :  `,meaning:"Dharma protects the human being."},{id:41,verse_number:41,chapter_number:1,text:`  ?
 `,transliteration:"ki nar bandhanam? / moha bandhanam.",hindi_meaning:` :     ?

 :   `,meaning:"Delusion is the bondage of humans."},{id:42,verse_number:42,chapter_number:1,text:`  ?
 `,transliteration:"ka mrga reha? / satyamrga reha.",hindi_meaning:` :     ?

 :   `,meaning:"The path of truth is the best path."},{id:43,verse_number:43,chapter_number:1,text:`  ?
 `,transliteration:"ki narasya mitram? / dharmo mitram.",hindi_meaning:` :     ?

 :   `,meaning:"Dharma is a man's friend."},{id:44,verse_number:44,chapter_number:1,text:` ?
`,transliteration:"ka panth? / satpanth.",hindi_meaning:` :    ?

 :  `,meaning:"The righteous road is the true road."},{id:45,verse_number:45,chapter_number:1,text:` ?
 `,transliteration:"ki amtam? / jnam amtam.",hindi_meaning:` :   ?

 :   `,meaning:"Knowledge is immortal."},{id:46,verse_number:46,chapter_number:1,text:`  ?
  `,transliteration:"kim ajnasya nanam? / vidy ajnasya nanam.",hindi_meaning:` :      ?

 :      `,meaning:"Knowledge destroys ignorance."},{id:47,verse_number:47,chapter_number:1,text:`  ?
  `,transliteration:"ka sasrasya pram? / vairgyam sasrasya pram.",hindi_meaning:` :     ?

 :     `,meaning:"Detachment is the shore beyond the ocean of worldly existence."},{id:48,verse_number:48,chapter_number:1,text:`  ?
  `,transliteration:"ki sarve hitatamam? / ahis sarve hitatamam.",hindi_meaning:` :      ?

 :      `,meaning:"Nonviolence is the greatest good for all."},{id:49,verse_number:49,chapter_number:1,text:` ?
    `,transliteration:"ka ra? / yo kma jayati sa ra.",hindi_meaning:` :   ?

 :        `,meaning:"He is a hero who conquers desire."},{id:50,verse_number:50,chapter_number:1,text:` ?
    `,transliteration:"ka parjita? / yo manas parjita sa parjita.",hindi_meaning:` :   ?

 :        `,meaning:"He is defeated who is defeated by his own mind."},{id:51,verse_number:51,chapter_number:1,text:`  ?
  `,transliteration:"ki dukham anantam? / avidy dukham anantam.",hindi_meaning:` :    ?

 :    `,meaning:"Ignorance is endless sorrow."},{id:52,verse_number:52,chapter_number:1,text:` ?
 `,transliteration:"ka dhanavn? / santoavn dhanavn.",hindi_meaning:` :   ?

 :   `,meaning:"The contented person is rich."},{id:53,verse_number:53,chapter_number:1,text:`  ?
  `,transliteration:"ki dna nitya? / ahis dna nityam.",hindi_meaning:` :    ?

 :    `,meaning:"Nonviolence is perpetual charity."},{id:54,verse_number:54,chapter_number:1,text:` ?
    `,transliteration:"ka dea? / yatra jvo labhyate sa dea.",hindi_meaning:` :   ?

 :       `,meaning:"Where one can live is the proper land."},{id:55,verse_number:55,chapter_number:1,text:` ?
     `,transliteration:"ka paita? / ya bhtn hita veda sa paita.",hindi_meaning:` :   ?

 :           `,meaning:"He who understands the welfare of all beings is wise."},{id:56,verse_number:56,chapter_number:1,text:` ?
   `,transliteration:"ka mrkha? / yo garvita sa mrkha.",hindi_meaning:` :   ?

 :      `,meaning:"The arrogant person is a fool."},{id:57,verse_number:57,chapter_number:1,text:`  ?
  `,transliteration:"ki jagati durlabham? / sadbhva jagati durlabha.",hindi_meaning:` :     ?

 :     `,meaning:"Goodness is rare in the world."},{id:58,verse_number:58,chapter_number:1,text:` ?
  `,transliteration:"ki sram? / dharma eva sra.",hindi_meaning:` :   ?

 :    `,meaning:"Dharma is the essence."},{id:59,verse_number:59,chapter_number:1,text:` ?
     `,transliteration:"ka mahtm? / yo sarve hita icchati sa mahtm.",hindi_meaning:` :   ?

 :        `,meaning:"He who desires the welfare of all is noble."},{id:60,verse_number:60,chapter_number:1,text:`   ?
   `,transliteration:"ki nar param yu? / sadcra  sa yu.",hindi_meaning:` :      ?

 :     `,meaning:"Good conduct is the highest lifespan (it outlives the body)."},{id:61,verse_number:61,chapter_number:1,text:`   ?
    `,transliteration:"ka paita iti ucyate? / ya strrtha carati sa paita.",hindi_meaning:` :    ?

 :         `,meaning:"He who lives according to scriptural wisdom is truly learned."},{id:62,verse_number:62,chapter_number:1,text:`  ?
  `,transliteration:"ki rakati jvitam? / anna jvita rakati.",hindi_meaning:` :      ?

 :      `,meaning:"Food protects life."},{id:63,verse_number:63,chapter_number:1,text:`   ?
`,transliteration:"ka manuyn nayati ptlam? / lobha.",hindi_meaning:` :       ?

 :  `,meaning:"Greed drags humans to ruin."},{id:64,verse_number:64,chapter_number:1,text:`   ?
  `,transliteration:"ka manuya svarga nayati? / satya svarga nayati.",hindi_meaning:` :       ?

 :     `,meaning:"Truthfulness leads a person to heaven."},{id:65,verse_number:65,chapter_number:1,text:`  ?
`,transliteration:"ki sarve priyatamam? / jvitam.",hindi_meaning:` :     ?

 :  `,meaning:"Life is dearest to all beings."},{id:66,verse_number:66,chapter_number:1,text:`  ?
  `,transliteration:"ki para tpasya? / dharmaplana para tpasya.",hindi_meaning:` :     ?

 :     `,meaning:"Upholding dharma is supreme austerity."},{id:67,verse_number:67,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve bandhu? / dharma sarve bandhu.",hindi_meaning:` :    ?

 :    `,meaning:"Dharma is the universal relative and protector."},{id:68,verse_number:68,chapter_number:1,text:`  ?
  `,transliteration:"ki vidt uttamam? / dhairya vidt uttamam.",hindi_meaning:` :     ?

 :     `,meaning:"Courage is better than despair."},{id:69,verse_number:69,chapter_number:1,text:`  ?
  `,transliteration:"ka dukhasya mlam? / rga dukhasya mlam.",hindi_meaning:` :     ?

 :     `,meaning:"Attachment is the root of suffering."},{id:70,verse_number:70,chapter_number:1,text:`  ?
`,transliteration:"ka sukhasya mlam? / vairgyam.",hindi_meaning:` :     ?

 :  `,meaning:"Detachment is the root of happiness."},{id:71,verse_number:71,chapter_number:1,text:` ?
 `,transliteration:"kim anarthahetu? / apraj anarthahetu.",hindi_meaning:` :     ?

 :     `,meaning:"Lack of wisdom is the cause of misfortune."},{id:72,verse_number:72,chapter_number:1,text:`  ?
 `,transliteration:"ka patha kaatama? / adharmapatha kaatama.",hindi_meaning:` :      ?

 :    `,meaning:"The path of unrighteousness is the most difficult."},{id:73,verse_number:73,chapter_number:1,text:` ?
 `,transliteration:"kica vatam? / dharma vata.",hindi_meaning:` :   ?

 :   `,meaning:"Dharma alone is eternal."},{id:74,verse_number:74,chapter_number:1,text:`  ?
  `,transliteration:"ka sarvabhtn pit? / dharma sarvabhtn pit.",hindi_meaning:` :      ?

 :      `,meaning:"Dharma is the father of all beings."},{id:75,verse_number:75,chapter_number:1,text:`  ?
  `,transliteration:"ki rakati sarvn? / satya rakati sarvn.",hindi_meaning:` :     ?

 :     `,meaning:"Truth protects everyone."},{id:76,verse_number:76,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve atru? / ajna sarve atru.",hindi_meaning:` :    ?

 :    `,meaning:"Ignorance is the enemy of all."},{id:77,verse_number:77,chapter_number:1,text:`  ?
  `,transliteration:"ka dharmasya mlam? / ahis dharmasya mlam.",hindi_meaning:` :     ?

 :     `,meaning:"Non-violence is the root of dharma."},{id:78,verse_number:78,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve priya? / satyabh sarve priya.",hindi_meaning:` :    ?

 :    `,meaning:"The truth-speaker is dear to everyone."},{id:79,verse_number:79,chapter_number:1,text:`  ?
  `,transliteration:"ka para var? / jna para varam.",hindi_meaning:` :    ?

 :    `,meaning:"Knowledge is the supreme boon."},{id:80,verse_number:80,chapter_number:1,text:`  ?
  `,transliteration:"ka sarvasya dhra? / dharma sarvasya dhra.",hindi_meaning:` :    ?

 :    `,meaning:"Dharma is the foundation of everything."},{id:81,verse_number:81,chapter_number:1,text:`  ?
  `,transliteration:"ka satyasya mlam? / dharma satyasya mlam.",hindi_meaning:` :     ?

 :     `,meaning:"Dharma is the root of truth."},{id:82,verse_number:82,chapter_number:1,text:`  ?
 `,transliteration:"ki dna puyatamam? / annadna puyatamam.",hindi_meaning:` :     ?

 :    `,meaning:"Food-giving is the most sacred charity."},{id:83,verse_number:83,chapter_number:1,text:`  ?
     `,transliteration:"ka r ra? / yo dhairyea sthita sa r ra.",hindi_meaning:` :     ?

 :          `,meaning:"He who stands firm with courage is the hero among heroes."},{id:84,verse_number:84,chapter_number:1,text:`  ?
 `,transliteration:"ki nar saukhyam? / santoa saukhyam.",hindi_meaning:` :     ?

 :   `,meaning:"Contentment is happiness for humans."},{id:85,verse_number:85,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve hitakr? / dharma sarve hitakr.",hindi_meaning:` :    ?

 :    `,meaning:"Dharma benefits all beings."},{id:86,verse_number:86,chapter_number:1,text:` ?
    `,transliteration:"ka mahbala? / yo mana nighti sa mahbala.",hindi_meaning:` :   ?

 :         `,meaning:"He who controls his mind is truly powerful."},{id:87,verse_number:87,chapter_number:1,text:` ?
 `,transliteration:"kim updeyam? / sadcra updeya.",hindi_meaning:` :   ?

 :   `,meaning:"Good conduct is worth adopting."},{id:88,verse_number:88,chapter_number:1,text:` ?
 `,transliteration:"ka parityjya? / adharma parityjya.",hindi_meaning:` :    ?

 :    `,meaning:"Unrighteousness must be abandoned."},{id:89,verse_number:89,chapter_number:1,text:`  ?
 `,transliteration:"ka sarvadharm sra? / ahis sarvadharmasra.",hindi_meaning:` :      ?

 :      `,meaning:"Nonviolence is the essence of all dharma."},{id:90,verse_number:90,chapter_number:1,text:`   ?
  `,transliteration:"ki sarve priyatama dhanam? / vidy priyatama dhanam.",hindi_meaning:` :      ?

 :     `,meaning:"Knowledge is the most beloved wealth for all."},{id:91,verse_number:91,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve bandhanam? / rga sarve bandhanam.",hindi_meaning:` :    ?

 :    `,meaning:"Attachment is the bondage of all beings."},{id:92,verse_number:92,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve mokaka? / jna sarve mokaka.",hindi_meaning:` :    ?

 :    `,meaning:"Knowledge is the liberator of all beings."},{id:93,verse_number:93,chapter_number:1,text:` ?
 `,transliteration:"ka mahgua? / kam mahgua.",hindi_meaning:` :   ?

 :   `,meaning:"Forgiveness is the greatest virtue."},{id:94,verse_number:94,chapter_number:1,text:` ?
- `,transliteration:"ka mahppa? / ahis-tyga mahppa.",hindi_meaning:` :   ?

 :     `,meaning:"Abandoning non-violence is a great sin."},{id:95,verse_number:95,chapter_number:1,text:`  ?
  `,transliteration:"ki sarvath tyjyam? / krodha sarvath tyjya.",hindi_meaning:` :       ?

 :       `,meaning:"Anger must always be abandoned."},{id:96,verse_number:96,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve mitram? / samat sarve mitram.",hindi_meaning:` :    ?

 :    `,meaning:"Equanimity is the friend of all beings."},{id:97,verse_number:97,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve atru? / dvea sarve atru.",hindi_meaning:` :    ?

 :    `,meaning:"Hatred is the enemy of all beings."},{id:98,verse_number:98,chapter_number:1,text:`  ?
  `,transliteration:"ka ppasya mlam? / lobha ppasya mlam.",hindi_meaning:` :     ?

 :     `,meaning:"Greed is the root of sin."},{id:99,verse_number:99,chapter_number:1,text:`  ?
  `,transliteration:"ka puyasya mlam? / raddh puyasya mlam.",hindi_meaning:` :     ?

 :     `,meaning:"Faith is the root of merit."},{id:100,verse_number:100,chapter_number:1,text:`   ?
   `,transliteration:"ka narasya mahn vaira? / ajna narasya mahn vaira.",hindi_meaning:` :      ?

 :      `,meaning:"Ignorance is man's greatest enemy."},{id:101,verse_number:101,chapter_number:1,text:`  ?
  `,transliteration:"ki sarve gurutamam? / mt sarve gurutam.",hindi_meaning:` :      ?

 :      `,meaning:"The mother is the greatest teacher for all."},{id:102,verse_number:102,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve dayitatama? / pit sarve dayitatama.",hindi_meaning:` :     ?

 :     `,meaning:"The father is the most beloved of all."},{id:103,verse_number:103,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve poaka? / anna sarve poaka.",hindi_meaning:` :    ?

 :    `,meaning:"Food nourishes all beings."},{id:104,verse_number:104,chapter_number:1,text:`  ?
  `,transliteration:"ka dharm reha? / ahis dharm reha.",hindi_meaning:` :     ?

 :     `,meaning:"Nonviolence is the highest of all dharmas."},{id:105,verse_number:105,chapter_number:1,text:`  ?
  `,transliteration:"ka sarvappn naka? / pryacitta ppn naka.",hindi_meaning:` :      ?

 :     `,meaning:"Atonement destroys all sins."},{id:106,verse_number:106,chapter_number:1,text:` ?
  `,transliteration:"ka pvaka? / jna pvaka paramam.",hindi_meaning:` :   ?

 :    `,meaning:"Knowledge is the supreme purifier."},{id:107,verse_number:107,chapter_number:1,text:`  ?
 `,transliteration:"ka dukara manuyea? / manonigraha dukara.",hindi_meaning:` :      ?

 :   `,meaning:"Control of the mind is most difficult for humans."},{id:108,verse_number:108,chapter_number:1,text:` ?
 `,transliteration:"ka pvana? / satsaga pvana.",hindi_meaning:` :   ?

 :   `,meaning:"Association with the good is purifying."},{id:109,verse_number:109,chapter_number:1,text:`  ?
  `,transliteration:"ka para teja? / satya para teja.",hindi_meaning:` :    ?

 :    `,meaning:"Truth is the supreme light."},{id:110,verse_number:110,chapter_number:1,text:`  ?
 `,transliteration:"ka sarv adhihnam? / dharma sarvdhishnam.",hindi_meaning:` :    ?

 :    `,meaning:"Dharma is the foundation of all things."},{id:111,verse_number:111,chapter_number:1,text:`  ?
  `,transliteration:"ka nityam avekaya? / tm nityam avekaya.",hindi_meaning:` :    ?

 :     `,meaning:"The Self must be contemplated always."},{id:112,verse_number:112,chapter_number:1,text:`  ?
  `,transliteration:"ka nityam dhrya? / dharma nityam dhrya.",hindi_meaning:` :     ?

 :      `,meaning:"Dharma must be upheld at all times."},{id:113,verse_number:113,chapter_number:1,text:`  ?
  `,transliteration:"ki nitya sevanyam? / sadvtti nitya sevany.",hindi_meaning:` :     ?

 :      `,meaning:"Good conduct must always be practiced."},{id:114,verse_number:114,chapter_number:1,text:`  ?
  `,transliteration:"ka paramo bandhu? / dharma paramo bandhu.",hindi_meaning:` :    ?

 :    `,meaning:"Dharma is the supreme relative."},{id:115,verse_number:115,chapter_number:1,text:`  ?
  `,transliteration:"ka mantra sarvottama? / satya mantra sarvottama.",hindi_meaning:` :     ?

 :     `,meaning:"Truth is the highest mantra."},{id:116,verse_number:116,chapter_number:1,text:` ?
 `,transliteration:"ka hnikara? / adharma hnikara.",hindi_meaning:` :   ?

 :   `,meaning:"Unrighteousness is harmful."},{id:117,verse_number:117,chapter_number:1,text:` ?
 `,transliteration:"ka ntikara? / jna ntikaram.",hindi_meaning:` :   ?

 :   `,meaning:"Knowledge brings peace."},{id:118,verse_number:118,chapter_number:1,text:`  ?
  `,transliteration:"ka jvanasya sra? / vairgya jvanasya sra.",hindi_meaning:` :     ?

 :     `,meaning:"Detachment is the essence of life."},{id:119,verse_number:119,chapter_number:1,text:`  ?
  `,transliteration:"ka ppasya naka? / pryacitta ppasya naka.",hindi_meaning:` :     ?

 :     `,meaning:"Atonement destroys sin."},{id:120,verse_number:120,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve araam? / dharma sarve araam.",hindi_meaning:` :    ?

 :    `,meaning:"Dharma is the refuge of all beings."},{id:121,verse_number:121,chapter_number:1,text:` ?
    `,transliteration:"ka pp? / yo gurn avamanyate sa pp.",hindi_meaning:` :   ?

 :         `,meaning:"He who disrespects his teachers is sinful."},{id:122,verse_number:122,chapter_number:1,text:`  ?
 ,       `,transliteration:"ka naraka gacchati? / ahis tyajati, satya vadati na  sa naraka gacchati.",hindi_meaning:` :    ?

 :     ,        `,meaning:"He who abandons non-violence and truth goes to hell."},{id:123,verse_number:123,chapter_number:1,text:` ?
 `,transliteration:"ka pvanatama? / satsaga pvanatama.",hindi_meaning:` :    ?

 :    `,meaning:"Association with the virtuous is most purifying."},{id:124,verse_number:124,chapter_number:1,text:`  ?
  `,transliteration:"ka sarve prabhu? / dharma sarve prabhu.",hindi_meaning:` :    ?

 :    `,meaning:"Dharma is the lord of all beings."},{id:125,verse_number:125,chapter_number:1,text:`  ?
     `,transliteration:"ka sarvatra pjya? / yo dharma carati sa sarvatra pjya.",hindi_meaning:` :    ?

 :          `,meaning:"He who practices righteousness is honored everywhere."},{id:126,verse_number:126,chapter_number:1,text:` ?
 `,transliteration:"ka pavitratama? / satya pavitratamam.",hindi_meaning:` :    ?

 :    `,meaning:"Truth is the purest of all."}]}],AS=({chapter:r,onSelectChapter:e})=>{const t=Ae.useRef(null),[n,i]=Ae.useState(!1),s=c=>{if(!t.current)return;const f=t.current,m=f.getBoundingClientRect(),p=c.clientX-m.left,g=c.clientY-m.top,x=m.width/2,_=m.height/2,S=(g-_)/10,T=(x-p)/10;f.style.transform=`perspective(1000px) rotateX(${S}deg) rotateY(${T}deg) scale3d(1.05, 1.05, 1.05)`},l=()=>{t.current&&(t.current.style.transform="perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)"),i(!1)};return te.jsxs("div",{ref:t,onClick:()=>e(r),onMouseMove:s,onMouseEnter:()=>i(!0),onMouseLeave:l,className:"bg-white/50 border border-orange-200/50 rounded-xl shadow-lg p-6 cursor-pointer transition-all duration-300 hover:shadow-2xl relative",style:{transformStyle:"preserve-3d",transition:"transform 0.1s ease-out, box-shadow 0.3s ease"},children:[te.jsxs("div",{className:"flex items-center mb-4",style:{transform:"translateZ(20px)"},children:[te.jsx("span",{className:"bg-orange-800 text-white rounded-full w-12 h-12 flex items-center justify-center font-bold text-xl mr-4",style:{transform:"translateZ(30px)"},children:r.chapter_number}),te.jsxs("div",{style:{transform:"translateZ(20px)"},children:[te.jsx("h2",{className:"text-2xl font-bold text-orange-900 font-sanskrit",children:r.name}),te.jsx("p",{className:"text-orange-700",children:r.name_meaning})]})]}),te.jsx("p",{className:"text-gray-600 leading-relaxed",style:{transform:"translateZ(10px)"},children:r.summary}),n&&te.jsx("div",{className:"absolute inset-0 rounded-xl opacity-20 pointer-events-none",style:{background:"radial-gradient(circle at center, rgba(251, 146, 60, 0.4) 0%, transparent 70%)",transform:"translateZ(-10px)"}})]})},CS=({chapters:r,onSelectChapter:e})=>te.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(t=>te.jsx(AS,{chapter:t,onSelectChapter:e},t.id))}),IS=()=>te.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),RS=()=>te.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),PS=({chapter:r,currentVerseIndex:e})=>{const t=(e+1)/r.verses_count*100;return te.jsxs("div",{className:"w-full max-w-md mx-auto mb-4",children:[te.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm text-orange-700",children:[te.jsx("span",{className:"font-semibold",children:"Reading Progress"}),te.jsxs("span",{children:[Math.round(t),"%"]})]}),te.jsx("div",{className:"w-full bg-orange-200 rounded-full h-2 overflow-hidden",children:te.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-full rounded-full transition-all duration-300 ease-out shadow-sm",style:{width:`${t}%`}})}),te.jsxs("div",{className:"flex justify-between items-center mt-1 text-xs text-gray-600",children:[te.jsxs("span",{children:["Verse ",e+1]}),te.jsxs("span",{children:["of ",r.verses_count]})]})]})},LS=({chapter:r,verse:e})=>{const[t,n]=Ae.useState(!1),i=`${r.name} - Verse ${e.verse_number}

${e.text}

${e.transliteration}
${e.hindi_meaning?`
${e.hindi_meaning}
`:""}${e.meaning}

 Bhagavad Gita`,s=async()=>{const l={title:`${r.name} - Verse ${e.verse_number}`,text:i,url:window.location.href};try{navigator.share&&navigator.canShare(l)?await navigator.share(l):(await navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3))}catch{try{await navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3)}catch(f){console.error("Failed to share:",f)}}};return te.jsx("button",{onClick:s,className:"p-2 rounded-lg bg-white/80 backdrop-blur-sm border border-orange-200 hover:bg-orange-50 transition-colors","aria-label":"Share verse",title:"Share this verse",children:t?te.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):te.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})},NS=({chapter:r,initialVerseIndex:e=null})=>{const[t,n]=Ae.useState(e??0),[i,s]=Ae.useState(!1),[l,c]=Ae.useState({x:0,y:0,isHovering:!1}),[f,m]=Ae.useState(!1),[p,g]=Ae.useState(0),[x,_]=Ae.useState(1),[S,T]=Ae.useState({x:50,y:50}),[M,w]=Ae.useState(-100),C=Ae.useRef(null),I=Ae.useRef(null),L=r.verses[t];Ae.useEffect(()=>{if(i)return;let D=null,P=null;const V=pe=>{D=pe.touches[0].clientX},ee=()=>{if(D===null||P===null)return;const pe=D-P,me=50;pe>me&&t<r.verses.length-1?F():pe<-me&&t>0&&G(),D=null,P=null},ie=pe=>{P=pe.touches[0].clientX};return document.addEventListener("touchstart",V),document.addEventListener("touchend",ee),document.addEventListener("touchmove",ie),()=>{document.removeEventListener("touchstart",V),document.removeEventListener("touchend",ee),document.removeEventListener("touchmove",ie)}},[t,r.verses.length,i]),Ae.useEffect(()=>{e!==null&&n(e)},[e]),Ae.useEffect(()=>{C.current&&(C.current.style.transform="rotateY(0deg)")},[t]),Ae.useEffect(()=>{const D=P=>{P.target.tagName!=="INPUT"&&(P.key==="ArrowRight"||P.key==="ArrowDown"?(P.preventDefault(),F()):(P.key==="ArrowLeft"||P.key==="ArrowUp")&&(P.preventDefault(),G()))};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[t,r.verses.length,i]),Ae.useEffect(()=>{const D=setInterval(()=>{_(P=>P===1?1.05:1)},2e3);return()=>clearInterval(D)},[]),Ae.useEffect(()=>{if(l.isHovering){const D=setInterval(()=>{w(P=>P>=200?-100:P+5)},16);return()=>clearInterval(D)}else w(-100)},[l.isHovering]);const F=()=>{t<r.verses.length-1&&!i&&(s(!0),m(!0),g(p+360),I.current&&(I.current.style.transform="translateZ(-10px) scale(0.95)"),C.current&&(C.current.style.transform="rotateY(-90deg)"),setTimeout(()=>{n(t+1),C.current&&(C.current.style.transform="rotateY(90deg)"),setTimeout(()=>{C.current&&(C.current.style.transform="rotateY(0deg)"),s(!1),m(!1),I.current&&(I.current.style.transform="")},150)},300))},N=D=>{if(I.current&&!f){const P=I.current.getBoundingClientRect(),V=D.clientX-P.left,ee=D.clientY-P.top,ie=P.width/2,pe=P.height/2,me=(ee-pe)/pe*15,ve=(ie-V)/ie*15;c({x:me,y:ve,isHovering:!0}),T({x:V/P.width*100,y:ee/P.height*100}),I.current&&(I.current.style.transform=`perspective(1000px) rotateX(${me}deg) rotateY(${ve}deg) translateZ(10px) scale(${x})`)}},z=()=>{c({x:0,y:0,isHovering:!1}),I.current&&!f&&(I.current.style.transform="")},G=()=>{t>0&&!i&&(s(!0),C.current&&(C.current.style.transform="rotateY(90deg)"),setTimeout(()=>{n(t-1),C.current&&(C.current.style.transform="rotateY(-90deg)"),setTimeout(()=>{C.current&&(C.current.style.transform="rotateY(0deg)"),s(!1)},150)},300))};return te.jsxs("div",{className:"w-full",children:[te.jsx(PS,{chapter:r,currentVerseIndex:t}),te.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[te.jsx("div",{style:{perspective:"1000px",perspectiveOrigin:"center center"},className:"relative",children:te.jsx("div",{ref:C,className:"bg-white/60 backdrop-blur-sm border border-orange-200/50 rounded-xl shadow-lg p-6 md:p-8 text-center",style:{transformStyle:"preserve-3d",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",transform:"rotateY(0deg)"},children:te.jsxs("div",{style:{backfaceVisibility:"hidden"},children:[te.jsx("p",{className:"font-sanskrit text-2xl md:text-3xl text-orange-900 leading-relaxed mb-4",children:L.text}),te.jsx("p",{className:"text-lg md:text-xl text-orange-800 italic mb-6",children:L.transliteration}),L.hindi_meaning&&te.jsx("p",{className:"text-lg md:text-xl text-orange-700 mb-6 leading-relaxed whitespace-pre-line",children:L.hindi_meaning}),te.jsx("p",{className:"text-gray-700 leading-relaxed",children:L.meaning})]})})}),te.jsxs("div",{className:"flex justify-between items-center mt-6",children:[te.jsxs("button",{onClick:G,disabled:t===0,className:"flex items-center px-4 py-2 bg-orange-800 text-white rounded-lg shadow-md hover:bg-orange-900 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors","aria-label":"Previous verse",children:[te.jsx(IS,{}),te.jsx("span",{className:"ml-2",children:"Previous"})]}),te.jsxs("div",{className:"flex flex-col items-center gap-2",children:[te.jsxs("div",{className:"flex items-center gap-3",children:[te.jsxs("span",{className:"text-orange-800 font-semibold",children:["Verse ",L.verse_number," of ",r.verses_count]}),te.jsx(LS,{chapter:r,verse:L})]}),te.jsx("span",{className:"text-xs text-gray-500",children:"Use   arrow keys or swipe to navigate"})]}),te.jsx("div",{style:{perspective:"1000px",perspectiveOrigin:"center center"},children:te.jsxs("button",{ref:I,onClick:F,onMouseMove:N,onMouseLeave:z,disabled:t===r.verses.length-1,className:"flex items-center px-4 py-2 bg-orange-800 text-white rounded-lg shadow-md hover:bg-orange-900 disabled:bg-gray-400 disabled:cursor-not-allowed relative overflow-hidden",style:{transformStyle:"preserve-3d",transition:f?"transform 0.1s ease-out":"transform 0.2s ease-out, box-shadow 0.2s ease-out",boxShadow:l.isHovering?"0 20px 40px rgba(251, 146, 60, 0.4), 0 0 20px rgba(251, 146, 60, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)":"0 10px 20px rgba(0, 0, 0, 0.2)",background:l.isHovering?"linear-gradient(135deg, #ea580c 0%, #c2410c 50%, #ea580c 100%)":"linear-gradient(135deg, #9a3412 0%, #7c2d12 100%)",backgroundSize:l.isHovering?"200% 200%":"100% 100%",animation:l.isHovering?"gradientShift 3s ease infinite":"none"},children:[te.jsx("style",{children:`
                  @keyframes gradientShift {
                    0%, 100% { background-position: 0% 50%; }
                    50% { background-position: 100% 50%; }
                  }
                  @keyframes pulse {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                  }
                  @keyframes ripple {
                    0% { transform: scale(0); opacity: 1; }
                    100% { transform: scale(4); opacity: 0; }
                  }
                  @keyframes shimmer {
                    0% { transform: translateX(-100%) skewX(-20deg); }
                    100% { transform: translateX(200%) skewX(-20deg); }
                  }
                  @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-3px); }
                  }
                  @keyframes rotateBorder {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                  }
                `}),l.isHovering&&te.jsx("div",{className:"absolute -inset-0.5 rounded-lg opacity-75",style:{background:"linear-gradient(45deg, #ff8c42, #ffb84d, #ff8c42, #ffd700)",backgroundSize:"400% 400%",animation:"gradientShift 3s ease infinite",pointerEvents:"none",zIndex:-1,filter:"blur(1px)"}}),l.isHovering&&te.jsx("div",{className:"absolute rounded-full bg-white/30",style:{left:`${S.x}%`,top:`${S.y}%`,width:"20px",height:"20px",transform:"translate(-50%, -50%)",animation:"ripple 1s ease-out infinite",pointerEvents:"none"}}),l.isHovering&&te.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%)",transform:`translateX(${M}%) skewX(-20deg)`,animation:"shimmer 2s infinite",pointerEvents:"none"}}),l.isHovering&&te.jsx(te.Fragment,{children:[...Array(5)].map((D,P)=>te.jsx("div",{className:"absolute rounded-full bg-white/40",style:{width:"4px",height:"4px",left:`${20+P*15}%`,top:"50%",transform:"translate(-50%, -50%)",animation:"float 1.5s ease-in-out infinite",animationDelay:`${P*.2}s`,pointerEvents:"none"}},P))}),l.isHovering&&te.jsx("div",{className:"absolute inset-0 rounded-lg opacity-50",style:{background:"radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, transparent 70%)",transform:"translateZ(5px)",pointerEvents:"none",animation:"pulse 2s ease-in-out infinite"}}),te.jsx("span",{className:"mr-2 font-semibold relative z-10",style:{transform:"translateZ(10px)",textShadow:l.isHovering?"0 2px 10px rgba(255, 255, 255, 0.5)":"none",animation:l.isHovering?"float 2s ease-in-out infinite":"none"},children:"Next"}),te.jsx("div",{style:{transform:`translateZ(10px) rotateZ(${p}deg)`,transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",animation:l.isHovering?"float 2s ease-in-out infinite 0.3s":"none"},className:"relative z-10",children:te.jsx(RS,{})}),te.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-white/20",style:{transform:"translateZ(5px)",pointerEvents:"none",animation:l.isHovering?"pulse 2s ease-in-out infinite":"none"}})]})})]})]})]})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const hg="181",mh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ph={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Sb=0,Cy=1,Mb=2,DS=3,kb=0,ug=1,Vd=2,Wr=3,ho=0,ya=1,pr=2,gs=0,bh=1,Iy=2,Ry=3,Py=4,Tb=5,tl=100,Eb=101,Ab=102,Cb=103,Ib=104,Rb=200,Pb=201,Lb=202,Nb=203,yp=204,xp=205,Db=206,Ob=207,Ub=208,Fb=209,Bb=210,zb=211,jb=212,Vb=213,Hb=214,_p=0,bp=1,wp=2,kh=3,Sp=4,Mp=5,kp=6,Tp=7,pf=0,Gb=1,Wb=2,vs=0,Xb=1,Yb=2,qb=3,Ky=4,Kb=5,Zb=6,Jb=7,Ly="attached",Qb="detached",cg=300,uo=301,rl=302,Jd=303,Qd=304,Mc=306,$d=1e3,Oa=1001,ef=1002,zi=1003,Zy=1004,OS=1004,lc=1005,US=1005,Wn=1006,Hd=1007,FS=1007,ms=1008,BS=1008,gr=1009,Jy=1010,Qy=1011,fc=1012,dg=1013,co=1014,va=1015,ll=1016,fg=1017,mg=1018,mc=1020,$y=35902,e0=35899,t0=1021,n0=1022,$i=1023,pc=1026,gc=1027,pg=1028,gf=1029,gg=1030,vg=1031,zS=1032,yg=1033,Gd=33776,Wd=33777,Xd=33778,Yd=33779,Ep=35840,Ap=35841,Cp=35842,Ip=35843,Rp=36196,Pp=37492,Lp=37496,Np=37808,Dp=37809,Op=37810,Up=37811,Fp=37812,Bp=37813,zp=37814,jp=37815,Vp=37816,Hp=37817,Gp=37818,Wp=37819,Xp=37820,Yp=37821,qp=36492,Kp=36494,Zp=36495,Jp=36283,Qp=36284,$p=36285,eg=36286,$b=2200,e1=2201,t1=2202,tf=2300,tg=2301,mp=2302,yh=2400,xh=2401,nf=2402,xg=2500,i0=2501,jS=0,VS=1,HS=2,n1=3200,i1=3201,GS=3202,WS=3203,hl=0,a1=1,so="",Na="srgb",Th="srgb-linear",af="linear",kn="srgb",XS=0,gh=7680,YS=7681,qS=7682,KS=7683,ZS=34055,JS=34056,QS=5386,$S=512,eM=513,tM=514,nM=515,iM=516,aM=517,rM=518,Ny=519,r1=512,s1=513,o1=514,a0=515,l1=516,h1=517,u1=518,c1=519,rf=35044,sM=35048,oM=35040,lM=35045,hM=35049,uM=35041,cM=35046,dM=35050,fM=35042,mM="100",Dy="300 es",$a=2e3,vc=2001,pM={COMPUTE:"compute",RENDER:"render"},gM={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},vM={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function d1(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const yM={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hc(r,e){return new yM[r](e)}function sf(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function f1(){const r=sf("canvas");return r.style.display="block",r}const wx={};let sl=null;function xM(r){sl=r}function _M(){return sl}function of(...r){const e="THREE."+r.shift();sl?sl("log",e,...r):console.log(e,...r)}function ft(...r){const e="THREE."+r.shift();sl?sl("warn",e,...r):console.warn(e,...r)}function Wt(...r){const e="THREE."+r.shift();sl?sl("error",e,...r):console.error(e,...r)}function yc(...r){const e=r.join(" ");e in wx||(wx[e]=!0,ft(...r))}function bM(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}let ys=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,l=i.length;s<l;s++)i[s].call(this,e);e.target=null}}};const Zi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Sx=1234567;const wh=Math.PI/180,xc=180/Math.PI;function er(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Zi[r&255]+Zi[r>>8&255]+Zi[r>>16&255]+Zi[r>>24&255]+"-"+Zi[e&255]+Zi[e>>8&255]+"-"+Zi[e>>16&15|64]+Zi[e>>24&255]+"-"+Zi[t&63|128]+Zi[t>>8&255]+"-"+Zi[t>>16&255]+Zi[t>>24&255]+Zi[n&255]+Zi[n>>8&255]+Zi[n>>16&255]+Zi[n>>24&255]).toLowerCase()}function jt(r,e,t){return Math.max(e,Math.min(t,r))}function r0(r,e){return(r%e+e)%e}function wM(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function SM(r,e,t){return r!==e?(t-r)/(e-r):0}function qd(r,e,t){return(1-t)*r+t*e}function MM(r,e,t,n){return qd(r,e,1-Math.exp(-t*n))}function kM(r,e=1){return e-Math.abs(r0(r,e*2)-e)}function TM(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function EM(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function AM(r,e){return r+Math.floor(Math.random()*(e-r+1))}function CM(r,e){return r+Math.random()*(e-r)}function IM(r){return r*(.5-Math.random())}function RM(r){r!==void 0&&(Sx=r);let e=Sx+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function PM(r){return r*wh}function LM(r){return r*xc}function NM(r){return(r&r-1)===0&&r!==0}function DM(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function OM(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function UM(r,e,t,n,i){const s=Math.cos,l=Math.sin,c=s(t/2),f=l(t/2),m=s((e+n)/2),p=l((e+n)/2),g=s((e-n)/2),x=l((e-n)/2),_=s((n-e)/2),S=l((n-e)/2);switch(i){case"XYX":r.set(c*p,f*g,f*x,c*m);break;case"YZY":r.set(f*x,c*p,f*g,c*m);break;case"ZXZ":r.set(f*g,f*x,c*p,c*m);break;case"XZX":r.set(c*p,f*S,f*_,c*m);break;case"YXY":r.set(f*_,c*p,f*S,c*m);break;case"ZYZ":r.set(f*S,f*_,c*p,c*m);break;default:ft("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ga(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function $t(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const m1={DEG2RAD:wh,RAD2DEG:xc,generateUUID:er,clamp:jt,euclideanModulo:r0,mapLinear:wM,inverseLerp:SM,lerp:qd,damp:MM,pingpong:kM,smoothstep:TM,smootherstep:EM,randInt:AM,randFloat:CM,randFloatSpread:IM,seededRandom:RM,degToRad:PM,radToDeg:LM,isPowerOfTwo:NM,ceilPowerOfTwo:DM,floorPowerOfTwo:OM,setQuaternionFromProperEuler:UM,normalize:$t,denormalize:ga};class Ce{constructor(e=0,t=0){Ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,l=this.y-e.y;return this.x=s*n-l*i+e.x,this.y=s*i+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ea{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,l,c){let f=n[i+0],m=n[i+1],p=n[i+2],g=n[i+3],x=s[l+0],_=s[l+1],S=s[l+2],T=s[l+3];if(c<=0){e[t+0]=f,e[t+1]=m,e[t+2]=p,e[t+3]=g;return}if(c>=1){e[t+0]=x,e[t+1]=_,e[t+2]=S,e[t+3]=T;return}if(g!==T||f!==x||m!==_||p!==S){let M=f*x+m*_+p*S+g*T;M<0&&(x=-x,_=-_,S=-S,T=-T,M=-M);let w=1-c;if(M<.9995){const C=Math.acos(M),I=Math.sin(C);w=Math.sin(w*C)/I,c=Math.sin(c*C)/I,f=f*w+x*c,m=m*w+_*c,p=p*w+S*c,g=g*w+T*c}else{f=f*w+x*c,m=m*w+_*c,p=p*w+S*c,g=g*w+T*c;const C=1/Math.sqrt(f*f+m*m+p*p+g*g);f*=C,m*=C,p*=C,g*=C}}e[t]=f,e[t+1]=m,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,i,s,l){const c=n[i],f=n[i+1],m=n[i+2],p=n[i+3],g=s[l],x=s[l+1],_=s[l+2],S=s[l+3];return e[t]=c*S+p*g+f*_-m*x,e[t+1]=f*S+p*x+m*g-c*_,e[t+2]=m*S+p*_+c*x-f*g,e[t+3]=p*S-c*g-f*x-m*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,l=e._order,c=Math.cos,f=Math.sin,m=c(n/2),p=c(i/2),g=c(s/2),x=f(n/2),_=f(i/2),S=f(s/2);switch(l){case"XYZ":this._x=x*p*g+m*_*S,this._y=m*_*g-x*p*S,this._z=m*p*S+x*_*g,this._w=m*p*g-x*_*S;break;case"YXZ":this._x=x*p*g+m*_*S,this._y=m*_*g-x*p*S,this._z=m*p*S-x*_*g,this._w=m*p*g+x*_*S;break;case"ZXY":this._x=x*p*g-m*_*S,this._y=m*_*g+x*p*S,this._z=m*p*S+x*_*g,this._w=m*p*g-x*_*S;break;case"ZYX":this._x=x*p*g-m*_*S,this._y=m*_*g+x*p*S,this._z=m*p*S-x*_*g,this._w=m*p*g+x*_*S;break;case"YZX":this._x=x*p*g+m*_*S,this._y=m*_*g+x*p*S,this._z=m*p*S-x*_*g,this._w=m*p*g-x*_*S;break;case"XZY":this._x=x*p*g-m*_*S,this._y=m*_*g-x*p*S,this._z=m*p*S+x*_*g,this._w=m*p*g+x*_*S;break;default:ft("Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],l=t[1],c=t[5],f=t[9],m=t[2],p=t[6],g=t[10],x=n+c+g;if(x>0){const _=.5/Math.sqrt(x+1);this._w=.25/_,this._x=(p-f)*_,this._y=(s-m)*_,this._z=(l-i)*_}else if(n>c&&n>g){const _=2*Math.sqrt(1+n-c-g);this._w=(p-f)/_,this._x=.25*_,this._y=(i+l)/_,this._z=(s+m)/_}else if(c>g){const _=2*Math.sqrt(1+c-n-g);this._w=(s-m)/_,this._x=(i+l)/_,this._y=.25*_,this._z=(f+p)/_}else{const _=2*Math.sqrt(1+g-n-c);this._w=(l-i)/_,this._x=(s+m)/_,this._y=(f+p)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,l=e._w,c=t._x,f=t._y,m=t._z,p=t._w;return this._x=n*p+l*c+i*m-s*f,this._y=i*p+l*f+s*c-n*m,this._z=s*p+l*m+n*f-i*c,this._w=l*p-n*c-i*f-s*m,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,i=e._y,s=e._z,l=e._w,c=this.dot(e);c<0&&(n=-n,i=-i,s=-s,l=-l,c=-c);let f=1-t;if(c<.9995){const m=Math.acos(c),p=Math.sin(m);f=Math.sin(f*m)/p,t=Math.sin(t*m)/p,this._x=this._x*f+n*t,this._y=this._y*f+i*t,this._z=this._z*f+s*t,this._w=this._w*f+l*t,this._onChangeCallback()}else this._x=this._x*f+n*t,this._y=this._y*f+i*t,this._z=this._z*f+s*t,this._w=this._w*f+l*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,n=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Mx.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Mx.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,l=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*l,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*l,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,l=e.y,c=e.z,f=e.w,m=2*(l*i-c*n),p=2*(c*t-s*i),g=2*(s*n-l*t);return this.x=t+f*m+l*g-c*p,this.y=n+f*p+c*m-s*g,this.z=i+f*g+s*p-l*m,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this.z=jt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this.z=jt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,l=t.x,c=t.y,f=t.z;return this.x=i*f-s*c,this.y=s*l-n*f,this.z=n*c-i*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return kv.copy(this).projectOnVector(e),this.sub(kv)}reflect(e){return this.sub(kv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(jt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kv=new Y,Mx=new ea;class Zt{constructor(e,t,n,i,s,l,c,f,m){Zt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,l,c,f,m)}set(e,t,n,i,s,l,c,f,m){const p=this.elements;return p[0]=e,p[1]=i,p[2]=c,p[3]=t,p[4]=s,p[5]=f,p[6]=n,p[7]=l,p[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,l=n[0],c=n[3],f=n[6],m=n[1],p=n[4],g=n[7],x=n[2],_=n[5],S=n[8],T=i[0],M=i[3],w=i[6],C=i[1],I=i[4],L=i[7],F=i[2],N=i[5],z=i[8];return s[0]=l*T+c*C+f*F,s[3]=l*M+c*I+f*N,s[6]=l*w+c*L+f*z,s[1]=m*T+p*C+g*F,s[4]=m*M+p*I+g*N,s[7]=m*w+p*L+g*z,s[2]=x*T+_*C+S*F,s[5]=x*M+_*I+S*N,s[8]=x*w+_*L+S*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],l=e[4],c=e[5],f=e[6],m=e[7],p=e[8];return t*l*p-t*c*m-n*s*p+n*c*f+i*s*m-i*l*f}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],l=e[4],c=e[5],f=e[6],m=e[7],p=e[8],g=p*l-c*m,x=c*f-p*s,_=m*s-l*f,S=t*g+n*x+i*_;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/S;return e[0]=g*T,e[1]=(i*m-p*n)*T,e[2]=(c*n-i*l)*T,e[3]=x*T,e[4]=(p*t-i*f)*T,e[5]=(i*s-c*t)*T,e[6]=_*T,e[7]=(n*f-m*t)*T,e[8]=(l*t-n*s)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,l,c){const f=Math.cos(s),m=Math.sin(s);return this.set(n*f,n*m,-n*(f*l+m*c)+l+e,-i*m,i*f,-i*(-m*l+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Tv.makeScale(e,t)),this}rotate(e){return this.premultiply(Tv.makeRotation(-e)),this}translate(e,t){return this.premultiply(Tv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Tv=new Zt,kx=new Zt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Tx=new Zt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function FM(){const r={enabled:!0,workingColorSpace:Th,spaces:{},convert:function(i,s,l){return this.enabled===!1||s===l||!s||!l||(this.spaces[s].transfer===kn&&(i.r=lo(i.r),i.g=lo(i.g),i.b=lo(i.b)),this.spaces[s].primaries!==this.spaces[l].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===kn&&(i.r=dc(i.r),i.g=dc(i.g),i.b=dc(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===so?af:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,l){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return yc("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),r.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return yc("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),r.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[Th]:{primaries:e,whitePoint:n,transfer:af,toXYZ:kx,fromXYZ:Tx,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Na},outputColorSpaceConfig:{drawingBufferColorSpace:Na}},[Na]:{primaries:e,whitePoint:n,transfer:kn,toXYZ:kx,fromXYZ:Tx,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Na}}}),r}const mn=FM();function lo(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function dc(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Uu;class p1{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Uu===void 0&&(Uu=sf("canvas")),Uu.width=e.width,Uu.height=e.height;const i=Uu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Uu}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sf("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let l=0;l<s.length;l++)s[l]=lo(s[l]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(lo(t[n]/255)*255):t[n]=lo(t[n]);return{data:t,width:e.width,height:e.height}}else return ft("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let BM=0;class nl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:BM++}),this.uuid=er(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let l=0,c=i.length;l<c;l++)i[l].isDataTexture?s.push(Ev(i[l].image)):s.push(Ev(i[l]))}else s=Ev(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function Ev(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?p1.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(ft("Texture: Unable to serialize Texture."),{})}let zM=0;const Av=new Y;class Qn extends ys{constructor(e=Qn.DEFAULT_IMAGE,t=Qn.DEFAULT_MAPPING,n=Oa,i=Oa,s=Wn,l=ms,c=$i,f=gr,m=Qn.DEFAULT_ANISOTROPY,p=so){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zM++}),this.uuid=er(),this.name="",this.source=new nl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=l,this.anisotropy=m,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Av).x}get height(){return this.source.getSize(Av).y}get depth(){return this.source.getSize(Av).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){ft(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){ft(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==cg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $d:e.x=e.x-Math.floor(e.x);break;case Oa:e.x=e.x<0?0:1;break;case ef:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $d:e.y=e.y-Math.floor(e.y);break;case Oa:e.y=e.y<0?0:1;break;case ef:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Qn.DEFAULT_IMAGE=null;Qn.DEFAULT_MAPPING=cg;Qn.DEFAULT_ANISOTROPY=1;class vn{constructor(e=0,t=0,n=0,i=1){vn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*i+l[12]*s,this.y=l[1]*t+l[5]*n+l[9]*i+l[13]*s,this.z=l[2]*t+l[6]*n+l[10]*i+l[14]*s,this.w=l[3]*t+l[7]*n+l[11]*i+l[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const f=e.elements,m=f[0],p=f[4],g=f[8],x=f[1],_=f[5],S=f[9],T=f[2],M=f[6],w=f[10];if(Math.abs(p-x)<.01&&Math.abs(g-T)<.01&&Math.abs(S-M)<.01){if(Math.abs(p+x)<.1&&Math.abs(g+T)<.1&&Math.abs(S+M)<.1&&Math.abs(m+_+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(m+1)/2,L=(_+1)/2,F=(w+1)/2,N=(p+x)/4,z=(g+T)/4,G=(S+M)/4;return I>L&&I>F?I<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(I),i=N/n,s=z/n):L>F?L<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(L),n=N/i,s=G/i):F<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(F),n=z/s,i=G/s),this.set(n,i,s,t),this}let C=Math.sqrt((M-S)*(M-S)+(g-T)*(g-T)+(x-p)*(x-p));return Math.abs(C)<.001&&(C=1),this.x=(M-S)/C,this.y=(g-T)/C,this.z=(x-p)/C,this.w=Math.acos((m+_+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this.z=jt(this.z,e.z,t.z),this.w=jt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this.z=jt(this.z,e,t),this.w=jt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(jt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class s0 extends ys{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new vn(0,0,e,t),this.scissorTest=!1,this.viewport=new vn(0,0,e,t);const i={width:e,height:t,depth:n.depth},s=new Qn(i);this.textures=[];const l=n.count;for(let c=0;c<l;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Wn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new nl(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Kr extends s0{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class _g extends Qn{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=zi,this.minFilter=zi,this.wrapR=Oa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class jM extends Kr{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new _g(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class bg extends Qn{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=zi,this.minFilter=zi,this.wrapR=Oa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class VM extends Kr{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new bg(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class ta{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Vr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Vr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Vr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let l=0,c=s.count;l<c;l++)e.isMesh===!0?e.getVertexPosition(l,Vr):Vr.fromBufferAttribute(s,l),Vr.applyMatrix4(e.matrixWorld),this.expandByPoint(Vr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),xm.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),xm.copy(n.boundingBox)),xm.applyMatrix4(e.matrixWorld),this.union(xm)}const i=e.children;for(let s=0,l=i.length;s<l;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Vr),Vr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Md),_m.subVectors(this.max,Md),Fu.subVectors(e.a,Md),Bu.subVectors(e.b,Md),zu.subVectors(e.c,Md),Yo.subVectors(Bu,Fu),qo.subVectors(zu,Bu),eh.subVectors(Fu,zu);let t=[0,-Yo.z,Yo.y,0,-qo.z,qo.y,0,-eh.z,eh.y,Yo.z,0,-Yo.x,qo.z,0,-qo.x,eh.z,0,-eh.x,-Yo.y,Yo.x,0,-qo.y,qo.x,0,-eh.y,eh.x,0];return!Cv(t,Fu,Bu,zu,_m)||(t=[1,0,0,0,1,0,0,0,1],!Cv(t,Fu,Bu,zu,_m))?!1:(bm.crossVectors(Yo,qo),t=[bm.x,bm.y,bm.z],Cv(t,Fu,Bu,zu,_m))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Vr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Vr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Qs=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Vr=new Y,xm=new ta,Fu=new Y,Bu=new Y,zu=new Y,Yo=new Y,qo=new Y,eh=new Y,Md=new Y,_m=new Y,bm=new Y,th=new Y;function Cv(r,e,t,n,i){for(let s=0,l=r.length-3;s<=l;s+=3){th.fromArray(r,s);const c=i.x*Math.abs(th.x)+i.y*Math.abs(th.y)+i.z*Math.abs(th.z),f=e.dot(th),m=t.dot(th),p=n.dot(th);if(Math.max(-Math.max(f,m,p),Math.min(f,m,p))>c)return!1}return!0}const HM=new ta,kd=new Y,Iv=new Y;class ji{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):HM.setFromPoints(e).getCenter(n);let i=0;for(let s=0,l=e.length;s<l;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;kd.subVectors(e,this.center);const t=kd.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(kd,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Iv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(kd.copy(e.center).add(Iv)),this.expandByPoint(kd.copy(e.center).sub(Iv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const $s=new Y,Rv=new Y,wm=new Y,Ko=new Y,Pv=new Y,Sm=new Y,Lv=new Y;class Ch{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$s)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$s.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($s.copy(this.origin).addScaledVector(this.direction,t),$s.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Rv.copy(e).add(t).multiplyScalar(.5),wm.copy(t).sub(e).normalize(),Ko.copy(this.origin).sub(Rv);const s=e.distanceTo(t)*.5,l=-this.direction.dot(wm),c=Ko.dot(this.direction),f=-Ko.dot(wm),m=Ko.lengthSq(),p=Math.abs(1-l*l);let g,x,_,S;if(p>0)if(g=l*f-c,x=l*c-f,S=s*p,g>=0)if(x>=-S)if(x<=S){const T=1/p;g*=T,x*=T,_=g*(g+l*x+2*c)+x*(l*g+x+2*f)+m}else x=s,g=Math.max(0,-(l*x+c)),_=-g*g+x*(x+2*f)+m;else x=-s,g=Math.max(0,-(l*x+c)),_=-g*g+x*(x+2*f)+m;else x<=-S?(g=Math.max(0,-(-l*s+c)),x=g>0?-s:Math.min(Math.max(-s,-f),s),_=-g*g+x*(x+2*f)+m):x<=S?(g=0,x=Math.min(Math.max(-s,-f),s),_=x*(x+2*f)+m):(g=Math.max(0,-(l*s+c)),x=g>0?s:Math.min(Math.max(-s,-f),s),_=-g*g+x*(x+2*f)+m);else x=l>0?-s:s,g=Math.max(0,-(l*x+c)),_=-g*g+x*(x+2*f)+m;return n&&n.copy(this.origin).addScaledVector(this.direction,g),i&&i.copy(Rv).addScaledVector(wm,x),_}intersectSphere(e,t){$s.subVectors(e.center,this.origin);const n=$s.dot(this.direction),i=$s.dot($s)-n*n,s=e.radius*e.radius;if(i>s)return null;const l=Math.sqrt(s-i),c=n-l,f=n+l;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,l,c,f;const m=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,x=this.origin;return m>=0?(n=(e.min.x-x.x)*m,i=(e.max.x-x.x)*m):(n=(e.max.x-x.x)*m,i=(e.min.x-x.x)*m),p>=0?(s=(e.min.y-x.y)*p,l=(e.max.y-x.y)*p):(s=(e.max.y-x.y)*p,l=(e.min.y-x.y)*p),n>l||s>i||((s>n||isNaN(n))&&(n=s),(l<i||isNaN(i))&&(i=l),g>=0?(c=(e.min.z-x.z)*g,f=(e.max.z-x.z)*g):(c=(e.max.z-x.z)*g,f=(e.min.z-x.z)*g),n>f||c>i)||((c>n||n!==n)&&(n=c),(f<i||i!==i)&&(i=f),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,$s)!==null}intersectTriangle(e,t,n,i,s){Pv.subVectors(t,e),Sm.subVectors(n,e),Lv.crossVectors(Pv,Sm);let l=this.direction.dot(Lv),c;if(l>0){if(i)return null;c=1}else if(l<0)c=-1,l=-l;else return null;Ko.subVectors(this.origin,e);const f=c*this.direction.dot(Sm.crossVectors(Ko,Sm));if(f<0)return null;const m=c*this.direction.dot(Pv.cross(Ko));if(m<0||f+m>l)return null;const p=-c*Ko.dot(Lv);return p<0?null:this.at(p/l,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Vt{constructor(e,t,n,i,s,l,c,f,m,p,g,x,_,S,T,M){Vt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,l,c,f,m,p,g,x,_,S,T,M)}set(e,t,n,i,s,l,c,f,m,p,g,x,_,S,T,M){const w=this.elements;return w[0]=e,w[4]=t,w[8]=n,w[12]=i,w[1]=s,w[5]=l,w[9]=c,w[13]=f,w[2]=m,w[6]=p,w[10]=g,w[14]=x,w[3]=_,w[7]=S,w[11]=T,w[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Vt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/ju.setFromMatrixColumn(e,0).length(),s=1/ju.setFromMatrixColumn(e,1).length(),l=1/ju.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,l=Math.cos(n),c=Math.sin(n),f=Math.cos(i),m=Math.sin(i),p=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const x=l*p,_=l*g,S=c*p,T=c*g;t[0]=f*p,t[4]=-f*g,t[8]=m,t[1]=_+S*m,t[5]=x-T*m,t[9]=-c*f,t[2]=T-x*m,t[6]=S+_*m,t[10]=l*f}else if(e.order==="YXZ"){const x=f*p,_=f*g,S=m*p,T=m*g;t[0]=x+T*c,t[4]=S*c-_,t[8]=l*m,t[1]=l*g,t[5]=l*p,t[9]=-c,t[2]=_*c-S,t[6]=T+x*c,t[10]=l*f}else if(e.order==="ZXY"){const x=f*p,_=f*g,S=m*p,T=m*g;t[0]=x-T*c,t[4]=-l*g,t[8]=S+_*c,t[1]=_+S*c,t[5]=l*p,t[9]=T-x*c,t[2]=-l*m,t[6]=c,t[10]=l*f}else if(e.order==="ZYX"){const x=l*p,_=l*g,S=c*p,T=c*g;t[0]=f*p,t[4]=S*m-_,t[8]=x*m+T,t[1]=f*g,t[5]=T*m+x,t[9]=_*m-S,t[2]=-m,t[6]=c*f,t[10]=l*f}else if(e.order==="YZX"){const x=l*f,_=l*m,S=c*f,T=c*m;t[0]=f*p,t[4]=T-x*g,t[8]=S*g+_,t[1]=g,t[5]=l*p,t[9]=-c*p,t[2]=-m*p,t[6]=_*g+S,t[10]=x-T*g}else if(e.order==="XZY"){const x=l*f,_=l*m,S=c*f,T=c*m;t[0]=f*p,t[4]=-g,t[8]=m*p,t[1]=x*g+T,t[5]=l*p,t[9]=_*g-S,t[2]=S*g-_,t[6]=c*p,t[10]=T*g+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(GM,e,WM)}lookAt(e,t,n){const i=this.elements;return Za.subVectors(e,t),Za.lengthSq()===0&&(Za.z=1),Za.normalize(),Zo.crossVectors(n,Za),Zo.lengthSq()===0&&(Math.abs(n.z)===1?Za.x+=1e-4:Za.z+=1e-4,Za.normalize(),Zo.crossVectors(n,Za)),Zo.normalize(),Mm.crossVectors(Za,Zo),i[0]=Zo.x,i[4]=Mm.x,i[8]=Za.x,i[1]=Zo.y,i[5]=Mm.y,i[9]=Za.y,i[2]=Zo.z,i[6]=Mm.z,i[10]=Za.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,l=n[0],c=n[4],f=n[8],m=n[12],p=n[1],g=n[5],x=n[9],_=n[13],S=n[2],T=n[6],M=n[10],w=n[14],C=n[3],I=n[7],L=n[11],F=n[15],N=i[0],z=i[4],G=i[8],D=i[12],P=i[1],V=i[5],ee=i[9],ie=i[13],pe=i[2],me=i[6],ve=i[10],Se=i[14],B=i[3],Q=i[7],K=i[11],H=i[15];return s[0]=l*N+c*P+f*pe+m*B,s[4]=l*z+c*V+f*me+m*Q,s[8]=l*G+c*ee+f*ve+m*K,s[12]=l*D+c*ie+f*Se+m*H,s[1]=p*N+g*P+x*pe+_*B,s[5]=p*z+g*V+x*me+_*Q,s[9]=p*G+g*ee+x*ve+_*K,s[13]=p*D+g*ie+x*Se+_*H,s[2]=S*N+T*P+M*pe+w*B,s[6]=S*z+T*V+M*me+w*Q,s[10]=S*G+T*ee+M*ve+w*K,s[14]=S*D+T*ie+M*Se+w*H,s[3]=C*N+I*P+L*pe+F*B,s[7]=C*z+I*V+L*me+F*Q,s[11]=C*G+I*ee+L*ve+F*K,s[15]=C*D+I*ie+L*Se+F*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],l=e[1],c=e[5],f=e[9],m=e[13],p=e[2],g=e[6],x=e[10],_=e[14],S=e[3],T=e[7],M=e[11],w=e[15];return S*(+s*f*g-i*m*g-s*c*x+n*m*x+i*c*_-n*f*_)+T*(+t*f*_-t*m*x+s*l*x-i*l*_+i*m*p-s*f*p)+M*(+t*m*g-t*c*_-s*l*g+n*l*_+s*c*p-n*m*p)+w*(-i*c*p-t*f*g+t*c*x+i*l*g-n*l*x+n*f*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],l=e[4],c=e[5],f=e[6],m=e[7],p=e[8],g=e[9],x=e[10],_=e[11],S=e[12],T=e[13],M=e[14],w=e[15],C=g*M*m-T*x*m+T*f*_-c*M*_-g*f*w+c*x*w,I=S*x*m-p*M*m-S*f*_+l*M*_+p*f*w-l*x*w,L=p*T*m-S*g*m+S*c*_-l*T*_-p*c*w+l*g*w,F=S*g*f-p*T*f-S*c*x+l*T*x+p*c*M-l*g*M,N=t*C+n*I+i*L+s*F;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/N;return e[0]=C*z,e[1]=(T*x*s-g*M*s-T*i*_+n*M*_+g*i*w-n*x*w)*z,e[2]=(c*M*s-T*f*s+T*i*m-n*M*m-c*i*w+n*f*w)*z,e[3]=(g*f*s-c*x*s-g*i*m+n*x*m+c*i*_-n*f*_)*z,e[4]=I*z,e[5]=(p*M*s-S*x*s+S*i*_-t*M*_-p*i*w+t*x*w)*z,e[6]=(S*f*s-l*M*s-S*i*m+t*M*m+l*i*w-t*f*w)*z,e[7]=(l*x*s-p*f*s+p*i*m-t*x*m-l*i*_+t*f*_)*z,e[8]=L*z,e[9]=(S*g*s-p*T*s-S*n*_+t*T*_+p*n*w-t*g*w)*z,e[10]=(l*T*s-S*c*s+S*n*m-t*T*m-l*n*w+t*c*w)*z,e[11]=(p*c*s-l*g*s-p*n*m+t*g*m+l*n*_-t*c*_)*z,e[12]=F*z,e[13]=(p*T*i-S*g*i+S*n*x-t*T*x-p*n*M+t*g*M)*z,e[14]=(S*c*i-l*T*i-S*n*f+t*T*f+l*n*M-t*c*M)*z,e[15]=(l*g*i-p*c*i+p*n*f-t*g*f-l*n*x+t*c*x)*z,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,l=e.x,c=e.y,f=e.z,m=s*l,p=s*c;return this.set(m*l+n,m*c-i*f,m*f+i*c,0,m*c+i*f,p*c+n,p*f-i*l,0,m*f-i*c,p*f+i*l,s*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,l){return this.set(1,n,s,0,e,1,l,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,l=t._y,c=t._z,f=t._w,m=s+s,p=l+l,g=c+c,x=s*m,_=s*p,S=s*g,T=l*p,M=l*g,w=c*g,C=f*m,I=f*p,L=f*g,F=n.x,N=n.y,z=n.z;return i[0]=(1-(T+w))*F,i[1]=(_+L)*F,i[2]=(S-I)*F,i[3]=0,i[4]=(_-L)*N,i[5]=(1-(x+w))*N,i[6]=(M+C)*N,i[7]=0,i[8]=(S+I)*z,i[9]=(M-C)*z,i[10]=(1-(x+T))*z,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=ju.set(i[0],i[1],i[2]).length();const l=ju.set(i[4],i[5],i[6]).length(),c=ju.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Hr.copy(this);const m=1/s,p=1/l,g=1/c;return Hr.elements[0]*=m,Hr.elements[1]*=m,Hr.elements[2]*=m,Hr.elements[4]*=p,Hr.elements[5]*=p,Hr.elements[6]*=p,Hr.elements[8]*=g,Hr.elements[9]*=g,Hr.elements[10]*=g,t.setFromRotationMatrix(Hr),n.x=s,n.y=l,n.z=c,this}makePerspective(e,t,n,i,s,l,c=$a,f=!1){const m=this.elements,p=2*s/(t-e),g=2*s/(n-i),x=(t+e)/(t-e),_=(n+i)/(n-i);let S,T;if(f)S=s/(l-s),T=l*s/(l-s);else if(c===$a)S=-(l+s)/(l-s),T=-2*l*s/(l-s);else if(c===vc)S=-l/(l-s),T=-l*s/(l-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return m[0]=p,m[4]=0,m[8]=x,m[12]=0,m[1]=0,m[5]=g,m[9]=_,m[13]=0,m[2]=0,m[6]=0,m[10]=S,m[14]=T,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(e,t,n,i,s,l,c=$a,f=!1){const m=this.elements,p=2/(t-e),g=2/(n-i),x=-(t+e)/(t-e),_=-(n+i)/(n-i);let S,T;if(f)S=1/(l-s),T=l/(l-s);else if(c===$a)S=-2/(l-s),T=-(l+s)/(l-s);else if(c===vc)S=-1/(l-s),T=-s/(l-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return m[0]=p,m[4]=0,m[8]=0,m[12]=x,m[1]=0,m[5]=g,m[9]=0,m[13]=_,m[2]=0,m[6]=0,m[10]=S,m[14]=T,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ju=new Y,Hr=new Vt,GM=new Y(0,0,0),WM=new Y(1,1,1),Zo=new Y,Mm=new Y,Za=new Y,Ex=new Vt,Ax=new ea;class tr{constructor(e=0,t=0,n=0,i=tr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],l=i[4],c=i[8],f=i[1],m=i[5],p=i[9],g=i[2],x=i[6],_=i[10];switch(t){case"XYZ":this._y=Math.asin(jt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,_),this._z=Math.atan2(-l,s)):(this._x=Math.atan2(x,m),this._z=0);break;case"YXZ":this._x=Math.asin(-jt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(c,_),this._z=Math.atan2(f,m)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(jt(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-l,m)):(this._y=0,this._z=Math.atan2(f,s));break;case"ZYX":this._y=Math.asin(-jt(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(x,_),this._z=Math.atan2(f,s)):(this._x=0,this._z=Math.atan2(-l,m));break;case"YZX":this._z=Math.asin(jt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-p,m),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(c,_));break;case"XZY":this._z=Math.asin(-jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(x,m),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-p,_),this._y=0);break;default:ft("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ex.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ex,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ax.setFromEuler(this),this.setFromQuaternion(Ax,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}tr.DEFAULT_ORDER="XYZ";class Sh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let XM=0;const Cx=new Y,Vu=new ea,eo=new Vt,km=new Y,Td=new Y,YM=new Y,qM=new ea,Ix=new Y(1,0,0),Rx=new Y(0,1,0),Px=new Y(0,0,1),Lx={type:"added"},KM={type:"removed"},Hu={type:"childadded",child:null},Nv={type:"childremoved",child:null};class yn extends ys{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:XM++}),this.uuid=er(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yn.DEFAULT_UP.clone();const e=new Y,t=new tr,n=new ea,i=new Y(1,1,1);function s(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Vt},normalMatrix:{value:new Zt}}),this.matrix=new Vt,this.matrixWorld=new Vt,this.matrixAutoUpdate=yn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Sh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Vu.setFromAxisAngle(e,t),this.quaternion.multiply(Vu),this}rotateOnWorldAxis(e,t){return Vu.setFromAxisAngle(e,t),this.quaternion.premultiply(Vu),this}rotateX(e){return this.rotateOnAxis(Ix,e)}rotateY(e){return this.rotateOnAxis(Rx,e)}rotateZ(e){return this.rotateOnAxis(Px,e)}translateOnAxis(e,t){return Cx.copy(e).applyQuaternion(this.quaternion),this.position.add(Cx.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ix,e)}translateY(e){return this.translateOnAxis(Rx,e)}translateZ(e){return this.translateOnAxis(Px,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(eo.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?km.copy(e):km.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Td.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eo.lookAt(Td,km,this.up):eo.lookAt(km,Td,this.up),this.quaternion.setFromRotationMatrix(eo),i&&(eo.extractRotation(i.matrixWorld),Vu.setFromRotationMatrix(eo),this.quaternion.premultiply(Vu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Wt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Lx),Hu.child=e,this.dispatchEvent(Hu),Hu.child=null):Wt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(KM),Nv.child=e,this.dispatchEvent(Nv),Nv.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),eo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),eo.multiply(e.parent.matrixWorld)),e.applyMatrix4(eo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Lx),Hu.child=e,this.dispatchEvent(Hu),Hu.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,l=i.length;s<l;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Td,e,YM),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Td,qM,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,l=i.length;s<l;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(c=>({...c})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let m=0,p=f.length;m<p;m++){const g=f[m];s(e.shapes,g)}else s(e.shapes,f)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,m=this.material.length;f<m;f++)c.push(s(e.materials,this.material[f]));i.material=c}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let c=0;c<this.children.length;c++)i.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];i.animations.push(s(e.animations,f))}}if(t){const c=l(e.geometries),f=l(e.materials),m=l(e.textures),p=l(e.images),g=l(e.shapes),x=l(e.skeletons),_=l(e.animations),S=l(e.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),m.length>0&&(n.textures=m),p.length>0&&(n.images=p),g.length>0&&(n.shapes=g),x.length>0&&(n.skeletons=x),_.length>0&&(n.animations=_),S.length>0&&(n.nodes=S)}return n.object=i,n;function l(c){const f=[];for(const m in c){const p=c[m];delete p.metadata,f.push(p)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}yn.DEFAULT_UP=new Y(0,1,0);yn.DEFAULT_MATRIX_AUTO_UPDATE=!0;yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Gr=new Y,to=new Y,Dv=new Y,no=new Y,Gu=new Y,Wu=new Y,Nx=new Y,Ov=new Y,Uv=new Y,Fv=new Y,Bv=new vn,zv=new vn,jv=new vn;class Da{constructor(e=new Y,t=new Y,n=new Y){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Gr.subVectors(e,t),i.cross(Gr);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Gr.subVectors(i,t),to.subVectors(n,t),Dv.subVectors(e,t);const l=Gr.dot(Gr),c=Gr.dot(to),f=Gr.dot(Dv),m=to.dot(to),p=to.dot(Dv),g=l*m-c*c;if(g===0)return s.set(0,0,0),null;const x=1/g,_=(m*f-c*p)*x,S=(l*p-c*f)*x;return s.set(1-_-S,S,_)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,no)===null?!1:no.x>=0&&no.y>=0&&no.x+no.y<=1}static getInterpolation(e,t,n,i,s,l,c,f){return this.getBarycoord(e,t,n,i,no)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(s,no.x),f.addScaledVector(l,no.y),f.addScaledVector(c,no.z),f)}static getInterpolatedAttribute(e,t,n,i,s,l){return Bv.setScalar(0),zv.setScalar(0),jv.setScalar(0),Bv.fromBufferAttribute(e,t),zv.fromBufferAttribute(e,n),jv.fromBufferAttribute(e,i),l.setScalar(0),l.addScaledVector(Bv,s.x),l.addScaledVector(zv,s.y),l.addScaledVector(jv,s.z),l}static isFrontFacing(e,t,n,i){return Gr.subVectors(n,t),to.subVectors(e,t),Gr.cross(to).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gr.subVectors(this.c,this.b),to.subVectors(this.a,this.b),Gr.cross(to).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Da.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Da.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return Da.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return Da.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Da.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let l,c;Gu.subVectors(i,n),Wu.subVectors(s,n),Ov.subVectors(e,n);const f=Gu.dot(Ov),m=Wu.dot(Ov);if(f<=0&&m<=0)return t.copy(n);Uv.subVectors(e,i);const p=Gu.dot(Uv),g=Wu.dot(Uv);if(p>=0&&g<=p)return t.copy(i);const x=f*g-p*m;if(x<=0&&f>=0&&p<=0)return l=f/(f-p),t.copy(n).addScaledVector(Gu,l);Fv.subVectors(e,s);const _=Gu.dot(Fv),S=Wu.dot(Fv);if(S>=0&&_<=S)return t.copy(s);const T=_*m-f*S;if(T<=0&&m>=0&&S<=0)return c=m/(m-S),t.copy(n).addScaledVector(Wu,c);const M=p*S-_*g;if(M<=0&&g-p>=0&&_-S>=0)return Nx.subVectors(s,i),c=(g-p)/(g-p+(_-S)),t.copy(i).addScaledVector(Nx,c);const w=1/(M+T+x);return l=T*w,c=x*w,t.copy(n).addScaledVector(Gu,l).addScaledVector(Wu,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const g1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jo={h:0,s:0,l:0},Tm={h:0,s:0,l:0};function Vv(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class xt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Na){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,mn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,i=mn.workingColorSpace){return this.r=e,this.g=t,this.b=n,mn.colorSpaceToWorking(this,i),this}setHSL(e,t,n,i=mn.workingColorSpace){if(e=r0(e,1),t=jt(t,0,1),n=jt(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,l=2*n-s;this.r=Vv(l,s,e+1/3),this.g=Vv(l,s,e),this.b=Vv(l,s,e-1/3)}return mn.colorSpaceToWorking(this,i),this}setStyle(e,t=Na){function n(s){s!==void 0&&parseFloat(s)<1&&ft("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const l=i[1],c=i[2];switch(l){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:ft("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],l=s.length;if(l===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(s,16),t);ft("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Na){const n=g1[e.toLowerCase()];return n!==void 0?this.setHex(n,t):ft("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lo(e.r),this.g=lo(e.g),this.b=lo(e.b),this}copyLinearToSRGB(e){return this.r=dc(e.r),this.g=dc(e.g),this.b=dc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Na){return mn.workingToColorSpace(Ji.copy(this),e),Math.round(jt(Ji.r*255,0,255))*65536+Math.round(jt(Ji.g*255,0,255))*256+Math.round(jt(Ji.b*255,0,255))}getHexString(e=Na){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=mn.workingColorSpace){mn.workingToColorSpace(Ji.copy(this),t);const n=Ji.r,i=Ji.g,s=Ji.b,l=Math.max(n,i,s),c=Math.min(n,i,s);let f,m;const p=(c+l)/2;if(c===l)f=0,m=0;else{const g=l-c;switch(m=p<=.5?g/(l+c):g/(2-l-c),l){case n:f=(i-s)/g+(i<s?6:0);break;case i:f=(s-n)/g+2;break;case s:f=(n-i)/g+4;break}f/=6}return e.h=f,e.s=m,e.l=p,e}getRGB(e,t=mn.workingColorSpace){return mn.workingToColorSpace(Ji.copy(this),t),e.r=Ji.r,e.g=Ji.g,e.b=Ji.b,e}getStyle(e=Na){mn.workingToColorSpace(Ji.copy(this),e);const t=Ji.r,n=Ji.g,i=Ji.b;return e!==Na?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Jo),this.setHSL(Jo.h+e,Jo.s+t,Jo.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Jo),e.getHSL(Tm);const n=qd(Jo.h,Tm.h,t),i=qd(Jo.s,Tm.s,t),s=qd(Jo.l,Tm.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ji=new xt;xt.NAMES=g1;let ZM=0;class na extends ys{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ZM++}),this.uuid=er(),this.name="",this.type="Material",this.blending=bh,this.side=ho,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=yp,this.blendDst=xp,this.blendEquation=tl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xt(0,0,0),this.blendAlpha=0,this.depthFunc=kh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ny,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gh,this.stencilZFail=gh,this.stencilZPass=gh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){ft(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){ft(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==bh&&(n.blending=this.blending),this.side!==ho&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==yp&&(n.blendSrc=this.blendSrc),this.blendDst!==xp&&(n.blendDst=this.blendDst),this.blendEquation!==tl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==kh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ny&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==gh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==gh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==gh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const l=[];for(const c in s){const f=s[c];delete f.metadata,l.push(f)}return l}if(t){const s=i(e.textures),l=i(e.images);s.length>0&&(n.textures=s),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ul extends na{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tr,this.combine=pf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const oo=JM();function JM(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let f=0;f<256;++f){const m=f-127;m<-27?(n[f]=0,n[f|256]=32768,i[f]=24,i[f|256]=24):m<-14?(n[f]=1024>>-m-14,n[f|256]=1024>>-m-14|32768,i[f]=-m-1,i[f|256]=-m-1):m<=15?(n[f]=m+15<<10,n[f|256]=m+15<<10|32768,i[f]=13,i[f|256]=13):m<128?(n[f]=31744,n[f|256]=64512,i[f]=24,i[f|256]=24):(n[f]=31744,n[f|256]=64512,i[f]=13,i[f|256]=13)}const s=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let m=f<<13,p=0;for(;(m&8388608)===0;)m<<=1,p-=8388608;m&=-8388609,p+=947912704,s[f]=m|p}for(let f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)l[f]=f<<23;l[31]=1199570944,l[32]=2147483648;for(let f=33;f<63;++f)l[f]=2147483648+(f-32<<23);l[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:l,offsetTable:c}}function La(r){Math.abs(r)>65504&&ft("DataUtils.toHalfFloat(): Value out of range."),r=jt(r,-65504,65504),oo.floatView[0]=r;const e=oo.uint32View[0],t=e>>23&511;return oo.baseTable[t]+((e&8388607)>>oo.shiftTable[t])}function Bd(r){const e=r>>10;return oo.uint32View[0]=oo.mantissaTable[oo.offsetTable[e]+(r&1023)]+oo.exponentTable[e],oo.floatView[0]}class QM{static toHalfFloat(e){return La(e)}static fromHalfFloat(e){return Bd(e)}}const di=new Y,Em=new Ce;let $M=0;class Cn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:$M++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=rf,this.updateRanges=[],this.gpuType=va,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Em.fromBufferAttribute(this,t),Em.applyMatrix3(e),this.setXY(t,Em.x,Em.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)di.fromBufferAttribute(this,t),di.applyMatrix3(e),this.setXYZ(t,di.x,di.y,di.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)di.fromBufferAttribute(this,t),di.applyMatrix4(e),this.setXYZ(t,di.x,di.y,di.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)di.fromBufferAttribute(this,t),di.applyNormalMatrix(e),this.setXYZ(t,di.x,di.y,di.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)di.fromBufferAttribute(this,t),di.transformDirection(e),this.setXYZ(t,di.x,di.y,di.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ga(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=$t(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ga(t,this.array)),t}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ga(t,this.array)),t}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ga(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ga(t,this.array)),t}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array),s=$t(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==rf&&(e.usage=this.usage),e}}class e3 extends Cn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class t3 extends Cn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class n3 extends Cn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class i3 extends Cn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class o0 extends Cn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class a3 extends Cn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class l0 extends Cn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class r3 extends Cn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Bd(this.array[e*this.itemSize]);return this.normalized&&(t=ga(t,this.array)),t}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize]=La(t),this}getY(e){let t=Bd(this.array[e*this.itemSize+1]);return this.normalized&&(t=ga(t,this.array)),t}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+1]=La(t),this}getZ(e){let t=Bd(this.array[e*this.itemSize+2]);return this.normalized&&(t=ga(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+2]=La(t),this}getW(e){let t=Bd(this.array[e*this.itemSize+3]);return this.normalized&&(t=ga(t,this.array)),t}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.array[e*this.itemSize+3]=La(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.array[e+0]=La(t),this.array[e+1]=La(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array)),this.array[e+0]=La(t),this.array[e+1]=La(n),this.array[e+2]=La(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array),s=$t(s,this.array)),this.array[e+0]=La(t),this.array[e+1]=La(n),this.array[e+2]=La(i),this.array[e+3]=La(s),this}}class Et extends Cn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let s3=0;const mr=new Vt,Hv=new yn,Xu=new Y,Ja=new ta,Ed=new ta,Ci=new Y;class Jt extends ys{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:s3++}),this.uuid=er(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(d1(e)?l0:o0)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Zt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return mr.makeRotationFromQuaternion(e),this.applyMatrix4(mr),this}rotateX(e){return mr.makeRotationX(e),this.applyMatrix4(mr),this}rotateY(e){return mr.makeRotationY(e),this.applyMatrix4(mr),this}rotateZ(e){return mr.makeRotationZ(e),this.applyMatrix4(mr),this}translate(e,t,n){return mr.makeTranslation(e,t,n),this.applyMatrix4(mr),this}scale(e,t,n){return mr.makeScale(e,t,n),this.applyMatrix4(mr),this}lookAt(e){return Hv.lookAt(e),Hv.updateMatrix(),this.applyMatrix4(Hv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xu).negate(),this.translate(Xu.x,Xu.y,Xu.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,s=e.length;i<s;i++){const l=e[i];n.push(l.x,l.y,l.z||0)}this.setAttribute("position",new Et(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&ft("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ta);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Wt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Ja.setFromBufferAttribute(s),this.morphTargetsRelative?(Ci.addVectors(this.boundingBox.min,Ja.min),this.boundingBox.expandByPoint(Ci),Ci.addVectors(this.boundingBox.max,Ja.max),this.boundingBox.expandByPoint(Ci)):(this.boundingBox.expandByPoint(Ja.min),this.boundingBox.expandByPoint(Ja.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Wt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ji);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Wt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const n=this.boundingSphere.center;if(Ja.setFromBufferAttribute(e),t)for(let s=0,l=t.length;s<l;s++){const c=t[s];Ed.setFromBufferAttribute(c),this.morphTargetsRelative?(Ci.addVectors(Ja.min,Ed.min),Ja.expandByPoint(Ci),Ci.addVectors(Ja.max,Ed.max),Ja.expandByPoint(Ci)):(Ja.expandByPoint(Ed.min),Ja.expandByPoint(Ed.max))}Ja.getCenter(n);let i=0;for(let s=0,l=e.count;s<l;s++)Ci.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Ci));if(t)for(let s=0,l=t.length;s<l;s++){const c=t[s],f=this.morphTargetsRelative;for(let m=0,p=c.count;m<p;m++)Ci.fromBufferAttribute(c,m),f&&(Xu.fromBufferAttribute(e,m),Ci.add(Xu)),i=Math.max(i,n.distanceToSquared(Ci))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&Wt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Wt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Cn(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),c=[],f=[];for(let G=0;G<n.count;G++)c[G]=new Y,f[G]=new Y;const m=new Y,p=new Y,g=new Y,x=new Ce,_=new Ce,S=new Ce,T=new Y,M=new Y;function w(G,D,P){m.fromBufferAttribute(n,G),p.fromBufferAttribute(n,D),g.fromBufferAttribute(n,P),x.fromBufferAttribute(s,G),_.fromBufferAttribute(s,D),S.fromBufferAttribute(s,P),p.sub(m),g.sub(m),_.sub(x),S.sub(x);const V=1/(_.x*S.y-S.x*_.y);isFinite(V)&&(T.copy(p).multiplyScalar(S.y).addScaledVector(g,-_.y).multiplyScalar(V),M.copy(g).multiplyScalar(_.x).addScaledVector(p,-S.x).multiplyScalar(V),c[G].add(T),c[D].add(T),c[P].add(T),f[G].add(M),f[D].add(M),f[P].add(M))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let G=0,D=C.length;G<D;++G){const P=C[G],V=P.start,ee=P.count;for(let ie=V,pe=V+ee;ie<pe;ie+=3)w(e.getX(ie+0),e.getX(ie+1),e.getX(ie+2))}const I=new Y,L=new Y,F=new Y,N=new Y;function z(G){F.fromBufferAttribute(i,G),N.copy(F);const D=c[G];I.copy(D),I.sub(F.multiplyScalar(F.dot(D))).normalize(),L.crossVectors(N,D);const V=L.dot(f[G])<0?-1:1;l.setXYZW(G,I.x,I.y,I.z,V)}for(let G=0,D=C.length;G<D;++G){const P=C[G],V=P.start,ee=P.count;for(let ie=V,pe=V+ee;ie<pe;ie+=3)z(e.getX(ie+0)),z(e.getX(ie+1)),z(e.getX(ie+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Cn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let x=0,_=n.count;x<_;x++)n.setXYZ(x,0,0,0);const i=new Y,s=new Y,l=new Y,c=new Y,f=new Y,m=new Y,p=new Y,g=new Y;if(e)for(let x=0,_=e.count;x<_;x+=3){const S=e.getX(x+0),T=e.getX(x+1),M=e.getX(x+2);i.fromBufferAttribute(t,S),s.fromBufferAttribute(t,T),l.fromBufferAttribute(t,M),p.subVectors(l,s),g.subVectors(i,s),p.cross(g),c.fromBufferAttribute(n,S),f.fromBufferAttribute(n,T),m.fromBufferAttribute(n,M),c.add(p),f.add(p),m.add(p),n.setXYZ(S,c.x,c.y,c.z),n.setXYZ(T,f.x,f.y,f.z),n.setXYZ(M,m.x,m.y,m.z)}else for(let x=0,_=t.count;x<_;x+=3)i.fromBufferAttribute(t,x+0),s.fromBufferAttribute(t,x+1),l.fromBufferAttribute(t,x+2),p.subVectors(l,s),g.subVectors(i,s),p.cross(g),n.setXYZ(x+0,p.x,p.y,p.z),n.setXYZ(x+1,p.x,p.y,p.z),n.setXYZ(x+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ci.fromBufferAttribute(e,t),Ci.normalize(),e.setXYZ(t,Ci.x,Ci.y,Ci.z)}toNonIndexed(){function e(c,f){const m=c.array,p=c.itemSize,g=c.normalized,x=new m.constructor(f.length*p);let _=0,S=0;for(let T=0,M=f.length;T<M;T++){c.isInterleavedBufferAttribute?_=f[T]*c.data.stride+c.offset:_=f[T]*p;for(let w=0;w<p;w++)x[S++]=m[_++]}return new Cn(x,p,g)}if(this.index===null)return ft("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jt,n=this.index.array,i=this.attributes;for(const c in i){const f=i[c],m=e(f,n);t.setAttribute(c,m)}const s=this.morphAttributes;for(const c in s){const f=[],m=s[c];for(let p=0,g=m.length;p<g;p++){const x=m[p],_=e(x,n);f.push(_)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,f=l.length;c<f;c++){const m=l[c];t.addGroup(m.start,m.count,m.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const m in f)f[m]!==void 0&&(e[m]=f[m]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const m=n[f];e.data.attributes[f]=m.toJSON(e.data)}const i={};let s=!1;for(const f in this.morphAttributes){const m=this.morphAttributes[f],p=[];for(let g=0,x=m.length;g<x;g++){const _=m[g];p.push(_.toJSON(e.data))}p.length>0&&(i[f]=p,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere=c.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const i=e.attributes;for(const m in i){const p=i[m];this.setAttribute(m,p.clone(t))}const s=e.morphAttributes;for(const m in s){const p=[],g=s[m];for(let x=0,_=g.length;x<_;x++)p.push(g[x].clone(t));this.morphAttributes[m]=p}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let m=0,p=l.length;m<p;m++){const g=l[m];this.addGroup(g.start,g.count,g.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Dx=new Vt,nh=new Ch,Am=new ji,Ox=new Y,Cm=new Y,Im=new Y,Rm=new Y,Gv=new Y,Pm=new Y,Ux=new Y,Lm=new Y;class _i extends yn{constructor(e=new Jt,t=new ul){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=i.length;s<l;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const c=this.morphTargetInfluences;if(s&&c){Pm.set(0,0,0);for(let f=0,m=s.length;f<m;f++){const p=c[f],g=s[f];p!==0&&(Gv.fromBufferAttribute(g,e),l?Pm.addScaledVector(Gv,p):Pm.addScaledVector(Gv.sub(t),p))}t.add(Pm)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Am.copy(n.boundingSphere),Am.applyMatrix4(s),nh.copy(e.ray).recast(e.near),!(Am.containsPoint(nh.origin)===!1&&(nh.intersectSphere(Am,Ox)===null||nh.origin.distanceToSquared(Ox)>(e.far-e.near)**2))&&(Dx.copy(s).invert(),nh.copy(e.ray).applyMatrix4(Dx),!(n.boundingBox!==null&&nh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,nh)))}_computeIntersections(e,t,n){let i;const s=this.geometry,l=this.material,c=s.index,f=s.attributes.position,m=s.attributes.uv,p=s.attributes.uv1,g=s.attributes.normal,x=s.groups,_=s.drawRange;if(c!==null)if(Array.isArray(l))for(let S=0,T=x.length;S<T;S++){const M=x[S],w=l[M.materialIndex],C=Math.max(M.start,_.start),I=Math.min(c.count,Math.min(M.start+M.count,_.start+_.count));for(let L=C,F=I;L<F;L+=3){const N=c.getX(L),z=c.getX(L+1),G=c.getX(L+2);i=Nm(this,w,e,n,m,p,g,N,z,G),i&&(i.faceIndex=Math.floor(L/3),i.face.materialIndex=M.materialIndex,t.push(i))}}else{const S=Math.max(0,_.start),T=Math.min(c.count,_.start+_.count);for(let M=S,w=T;M<w;M+=3){const C=c.getX(M),I=c.getX(M+1),L=c.getX(M+2);i=Nm(this,l,e,n,m,p,g,C,I,L),i&&(i.faceIndex=Math.floor(M/3),t.push(i))}}else if(f!==void 0)if(Array.isArray(l))for(let S=0,T=x.length;S<T;S++){const M=x[S],w=l[M.materialIndex],C=Math.max(M.start,_.start),I=Math.min(f.count,Math.min(M.start+M.count,_.start+_.count));for(let L=C,F=I;L<F;L+=3){const N=L,z=L+1,G=L+2;i=Nm(this,w,e,n,m,p,g,N,z,G),i&&(i.faceIndex=Math.floor(L/3),i.face.materialIndex=M.materialIndex,t.push(i))}}else{const S=Math.max(0,_.start),T=Math.min(f.count,_.start+_.count);for(let M=S,w=T;M<w;M+=3){const C=M,I=M+1,L=M+2;i=Nm(this,l,e,n,m,p,g,C,I,L),i&&(i.faceIndex=Math.floor(M/3),t.push(i))}}}}function o3(r,e,t,n,i,s,l,c){let f;if(e.side===ya?f=n.intersectTriangle(l,s,i,!0,c):f=n.intersectTriangle(i,s,l,e.side===ho,c),f===null)return null;Lm.copy(c),Lm.applyMatrix4(r.matrixWorld);const m=t.ray.origin.distanceTo(Lm);return m<t.near||m>t.far?null:{distance:m,point:Lm.clone(),object:r}}function Nm(r,e,t,n,i,s,l,c,f,m){r.getVertexPosition(c,Cm),r.getVertexPosition(f,Im),r.getVertexPosition(m,Rm);const p=o3(r,e,t,n,Cm,Im,Rm,Ux);if(p){const g=new Y;Da.getBarycoord(Ux,Cm,Im,Rm,g),i&&(p.uv=Da.getInterpolatedAttribute(i,c,f,m,g,new Ce)),s&&(p.uv1=Da.getInterpolatedAttribute(s,c,f,m,g,new Ce)),l&&(p.normal=Da.getInterpolatedAttribute(l,c,f,m,g,new Y),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const x={a:c,b:f,c:m,normal:new Y,materialIndex:0};Da.getNormal(Cm,Im,Rm,x.normal),p.face=x,p.barycoord=g}return p}class Ih extends Jt{constructor(e=1,t=1,n=1,i=1,s=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:l};const c=this;i=Math.floor(i),s=Math.floor(s),l=Math.floor(l);const f=[],m=[],p=[],g=[];let x=0,_=0;S("z","y","x",-1,-1,n,t,e,l,s,0),S("z","y","x",1,-1,n,t,-e,l,s,1),S("x","z","y",1,1,e,n,t,i,l,2),S("x","z","y",1,-1,e,n,-t,i,l,3),S("x","y","z",1,-1,e,t,n,i,s,4),S("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(f),this.setAttribute("position",new Et(m,3)),this.setAttribute("normal",new Et(p,3)),this.setAttribute("uv",new Et(g,2));function S(T,M,w,C,I,L,F,N,z,G,D){const P=L/z,V=F/G,ee=L/2,ie=F/2,pe=N/2,me=z+1,ve=G+1;let Se=0,B=0;const Q=new Y;for(let K=0;K<ve;K++){const H=K*V-ie;for(let ae=0;ae<me;ae++){const Re=ae*P-ee;Q[T]=Re*C,Q[M]=H*I,Q[w]=pe,m.push(Q.x,Q.y,Q.z),Q[T]=0,Q[M]=0,Q[w]=N>0?1:-1,p.push(Q.x,Q.y,Q.z),g.push(ae/z),g.push(1-K/G),Se+=1}}for(let K=0;K<G;K++)for(let H=0;H<z;H++){const ae=x+H+me*K,Re=x+H+me*(K+1),Ye=x+(H+1)+me*(K+1),rt=x+(H+1)+me*K;f.push(ae,Re,rt),f.push(Re,Ye,rt),B+=6}c.addGroup(_,B,D),_+=B,x+=Se}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ih(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function _c(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(ft("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function pa(r){const e={};for(let t=0;t<r.length;t++){const n=_c(r[t]);for(const i in n)e[i]=n[i]}return e}function l3(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function v1(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:mn.workingColorSpace}const y1={clone:_c,merge:pa};var h3=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,u3=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vr extends na{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=h3,this.fragmentShader=u3,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_c(e.uniforms),this.uniformsGroups=l3(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const l=this.uniforms[i].value;l&&l.isTexture?t.uniforms[i]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[i]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[i]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[i]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[i]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[i]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[i]={type:"m4",value:l.toArray()}:t.uniforms[i]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class vf extends yn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vt,this.projectionMatrix=new Vt,this.projectionMatrixInverse=new Vt,this.coordinateSystem=$a,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Qo=new Y,Fx=new Ce,Bx=new Ce;let ii=class extends vf{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=xc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(wh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return xc*2*Math.atan(Math.tan(wh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Qo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z),Qo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Qo.x,Qo.y).multiplyScalar(-e/Qo.z)}getViewSize(e,t){return this.getViewBounds(e,Fx,Bx),t.subVectors(Bx,Fx)}setViewOffset(e,t,n,i,s,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(wh*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const l=this.view;if(this.view!==null&&this.view.enabled){const f=l.fullWidth,m=l.fullHeight;s+=l.offsetX*i/f,t-=l.offsetY*n/m,i*=l.width/f,n*=l.height/m}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Yu=-90,qu=1;class x1 extends yn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ii(Yu,qu,e,t);i.layers=this.layers,this.add(i);const s=new ii(Yu,qu,e,t);s.layers=this.layers,this.add(s);const l=new ii(Yu,qu,e,t);l.layers=this.layers,this.add(l);const c=new ii(Yu,qu,e,t);c.layers=this.layers,this.add(c);const f=new ii(Yu,qu,e,t);f.layers=this.layers,this.add(f);const m=new ii(Yu,qu,e,t);m.layers=this.layers,this.add(m)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,l,c,f]=t;for(const m of t)this.remove(m);if(e===$a)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===vc)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const m of t)this.add(m),m.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,l,c,f,m,p]=this.children,g=e.getRenderTarget(),x=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,l),e.setRenderTarget(n,2,i),e.render(t,c),e.setRenderTarget(n,3,i),e.render(t,f),e.setRenderTarget(n,4,i),e.render(t,m),n.texture.generateMipmaps=T,e.setRenderTarget(n,5,i),e.render(t,p),e.setRenderTarget(g,x,_),e.xr.enabled=S,n.texture.needsPMREMUpdate=!0}}class yf extends Qn{constructor(e=[],t=uo,n,i,s,l,c,f,m,p){super(e,t,n,i,s,l,c,f,m,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class _1 extends Kr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new yf(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ih(5,5,5),s=new vr({name:"CubemapFromEquirect",uniforms:_c(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ya,blending:gs});s.uniforms.tEquirect.value=t;const l=new _i(i,s),c=t.minFilter;return t.minFilter===ms&&(t.minFilter=Wn),new x1(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const s=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,i);e.setRenderTarget(s)}}class uc extends yn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const c3={type:"move"};class pp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new uc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new uc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new uc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,l=null;const c=this._targetRay,f=this._grip,m=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(m&&e.hand){l=!0;for(const T of e.hand.values()){const M=t.getJointPose(T,n),w=this._getHandJoint(m,T);M!==null&&(w.matrix.fromArray(M.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=M.radius),w.visible=M!==null}const p=m.joints["index-finger-tip"],g=m.joints["thumb-tip"],x=p.position.distanceTo(g.position),_=.02,S=.005;m.inputState.pinching&&x>_+S?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!m.inputState.pinching&&x<=_-S&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(f.matrix.fromArray(s.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,s.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(s.linearVelocity)):f.hasLinearVelocity=!1,s.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(s.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(c.matrix.fromArray(i.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,i.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(i.linearVelocity)):c.hasLinearVelocity=!1,i.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(i.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(c3)))}return c!==null&&(c.visible=i!==null),f!==null&&(f.visible=s!==null),m!==null&&(m.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new uc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class wg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new xt(e),this.density=t}clone(){return new wg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Sg{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new xt(e),this.near=t,this.far=n}clone(){return new Sg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class h0 extends yn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new tr,this.environmentIntensity=1,this.environmentRotation=new tr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Mg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=rf,this.updateRanges=[],this.version=0,this.uuid=er()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=er()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=er()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ma=new Y;class Eh{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ma.fromBufferAttribute(this,t),ma.applyMatrix4(e),this.setXYZ(t,ma.x,ma.y,ma.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ma.fromBufferAttribute(this,t),ma.applyNormalMatrix(e),this.setXYZ(t,ma.x,ma.y,ma.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ma.fromBufferAttribute(this,t),ma.transformDirection(e),this.setXYZ(t,ma.x,ma.y,ma.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ga(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=$t(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=$t(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ga(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ga(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ga(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ga(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=$t(t,this.array),n=$t(n,this.array),i=$t(i,this.array),s=$t(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){of("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Cn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Eh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){of("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class u0 extends na{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ku;const Ad=new Y,Zu=new Y,Ju=new Y,Qu=new Ce,Cd=new Ce,b1=new Vt,Dm=new Y,Id=new Y,Om=new Y,zx=new Ce,Wv=new Ce,jx=new Ce;class w1 extends yn{constructor(e=new u0){if(super(),this.isSprite=!0,this.type="Sprite",Ku===void 0){Ku=new Jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Mg(t,5);Ku.setIndex([0,1,2,0,2,3]),Ku.setAttribute("position",new Eh(n,3,0,!1)),Ku.setAttribute("uv",new Eh(n,2,3,!1))}this.geometry=Ku,this.material=e,this.center=new Ce(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Wt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zu.setFromMatrixScale(this.matrixWorld),b1.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ju.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zu.multiplyScalar(-Ju.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const l=this.center;Um(Dm.set(-.5,-.5,0),Ju,l,Zu,i,s),Um(Id.set(.5,-.5,0),Ju,l,Zu,i,s),Um(Om.set(.5,.5,0),Ju,l,Zu,i,s),zx.set(0,0),Wv.set(1,0),jx.set(1,1);let c=e.ray.intersectTriangle(Dm,Id,Om,!1,Ad);if(c===null&&(Um(Id.set(-.5,.5,0),Ju,l,Zu,i,s),Wv.set(0,1),c=e.ray.intersectTriangle(Dm,Om,Id,!1,Ad),c===null))return;const f=e.ray.origin.distanceTo(Ad);f<e.near||f>e.far||t.push({distance:f,point:Ad.clone(),uv:Da.getInterpolation(Ad,Dm,Id,Om,zx,Wv,jx,new Ce),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Um(r,e,t,n,i,s){Qu.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Cd.x=s*Qu.x-i*Qu.y,Cd.y=i*Qu.x+s*Qu.y):Cd.copy(Qu),r.copy(e),r.x+=Cd.x,r.y+=Cd.y,r.applyMatrix4(b1)}const Fm=new Y,Vx=new Y;class S1 extends yn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Fm.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Fm);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Fm.setFromMatrixPosition(e.matrixWorld),Vx.setFromMatrixPosition(this.matrixWorld);const n=Fm.distanceTo(Vx)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let l=t[i].distance;if(t[i].object.visible&&(l-=l*t[i].hysteresis),n>=l)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const l=n[i];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const Hx=new Y,Gx=new vn,Wx=new vn,d3=new Y,Xx=new Vt,Bm=new Y,Xv=new ji,Yx=new Vt,Yv=new Ch;class M1 extends _i{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Ly,this.bindMatrix=new Vt,this.bindMatrixInverse=new Vt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ta),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Bm),this.boundingBox.expandByPoint(Bm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ji),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Bm),this.boundingSphere.expandByPoint(Bm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xv.copy(this.boundingSphere),Xv.applyMatrix4(i),e.ray.intersectsSphere(Xv)!==!1&&(Yx.copy(i).invert(),Yv.copy(e.ray).applyMatrix4(Yx),!(this.boundingBox!==null&&Yv.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Yv)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new vn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Ly?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Qb?this.bindMatrixInverse.copy(this.bindMatrix).invert():ft("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;Gx.fromBufferAttribute(i.attributes.skinIndex,e),Wx.fromBufferAttribute(i.attributes.skinWeight,e),Hx.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const l=Wx.getComponent(s);if(l!==0){const c=Gx.getComponent(s);Xx.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(d3.copy(Hx).applyMatrix4(Xx),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class c0 extends yn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class qr extends Qn{constructor(e=null,t=1,n=1,i,s,l,c,f,m=zi,p=zi,g,x){super(null,l,c,f,m,p,i,s,g,x),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const qx=new Vt,f3=new Vt;class kg{constructor(e=[],t=[]){this.uuid=er(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){ft("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Vt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Vt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,l=e.length;s<l;s++){const c=e[s]?e[s].matrixWorld:f3;qx.multiplyMatrices(c,t[s]),qx.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new kg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new qr(t,e,e,$i,va);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let l=t[s];l===void 0&&(ft("Skeleton: No bone found with UUID:",s),l=new c0),this.bones.push(l),this.boneInverses.push(new Vt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const l=t[i];e.bones.push(l.uuid);const c=n[i];e.boneInverses.push(c.toArray())}return e}}class bc extends Cn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const $u=new Vt,Kx=new Vt,zm=[],Zx=new ta,m3=new Vt,Rd=new _i,Pd=new ji;class k1 extends _i{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new bc(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,m3)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ta),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,$u),Zx.copy(e.boundingBox).applyMatrix4($u),this.boundingBox.union(Zx)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ji),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,$u),Pd.copy(e.boundingSphere).applyMatrix4($u),this.boundingSphere.union(Pd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,l=e*s+1;for(let c=0;c<n.length;c++)n[c]=i[l+c]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Rd.geometry=this.geometry,Rd.material=this.material,Rd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Pd.copy(this.boundingSphere),Pd.applyMatrix4(n),e.ray.intersectsSphere(Pd)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,$u),Kx.multiplyMatrices(n,$u),Rd.matrixWorld=Kx,Rd.raycast(e,zm);for(let l=0,c=zm.length;l<c;l++){const f=zm[l];f.instanceId=s,f.object=this,t.push(f)}zm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new bc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new qr(new Float32Array(i*this.count),i,this.count,pg,va));const s=this.morphTexture.source.data.data;let l=0;for(let m=0;m<n.length;m++)l+=n[m];const c=this.geometry.morphTargetsRelative?1:1-l,f=i*e;s[f]=c,s.set(n,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const qv=new Y,p3=new Y,g3=new Zt;class ro{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=qv.subVectors(n,t).cross(p3.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(qv),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||g3.getNormalMatrix(e),i=this.coplanarPoint(qv).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ih=new ji,v3=new Ce(.5,.5),jm=new Y;class kc{constructor(e=new ro,t=new ro,n=new ro,i=new ro,s=new ro,l=new ro){this.planes=[e,t,n,i,s,l]}set(e,t,n,i,s,l){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(i),c[4].copy(s),c[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=$a,n=!1){const i=this.planes,s=e.elements,l=s[0],c=s[1],f=s[2],m=s[3],p=s[4],g=s[5],x=s[6],_=s[7],S=s[8],T=s[9],M=s[10],w=s[11],C=s[12],I=s[13],L=s[14],F=s[15];if(i[0].setComponents(m-l,_-p,w-S,F-C).normalize(),i[1].setComponents(m+l,_+p,w+S,F+C).normalize(),i[2].setComponents(m+c,_+g,w+T,F+I).normalize(),i[3].setComponents(m-c,_-g,w-T,F-I).normalize(),n)i[4].setComponents(f,x,M,L).normalize(),i[5].setComponents(m-f,_-x,w-M,F-L).normalize();else if(i[4].setComponents(m-f,_-x,w-M,F-L).normalize(),t===$a)i[5].setComponents(m+f,_+x,w+M,F+L).normalize();else if(t===vc)i[5].setComponents(f,x,M,L).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ih.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ih.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ih)}intersectsSprite(e){ih.center.set(0,0,0);const t=v3.distanceTo(e.center);return ih.radius=.7071067811865476+t,ih.applyMatrix4(e.matrixWorld),this.intersectsSphere(ih)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(jm.x=i.normal.x>0?e.max.x:e.min.x,jm.y=i.normal.y>0?e.max.y:e.min.y,jm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(jm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ds=new Vt,fs=new kc;class Tg{constructor(){this.coordinateSystem=$a}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ds.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),fs.setFromProjectionMatrix(ds,i.coordinateSystem,i.reversedDepth),fs.containsPoint(e))return!0}return!1}clone(){return new Tg}}function Kv(r,e){return r-e}function y3(r,e){return r.z-e.z}function x3(r,e){return e.z-r.z}class _3{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const s=this.pool,l=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];l.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=i}reset(){this.list.length=0,this.index=0}}const Pa=new Vt,b3=new xt(1,1,1),Jx=new kc,w3=new Tg,Vm=new ta,ah=new ji,Ld=new Y,Qx=new Y,S3=new Y,Zv=new _3,Qi=new _i,Hm=[];function M3(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let l=0;l<n;l++)e.setComponent(s+t,l,r.getComponent(s,l))}else e.array.set(r.array,t*n);e.needsUpdate=!0}function rh(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)e[n]=r[n]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class T1 extends _i{constructor(e,t,n=t*2,i){super(new Jt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new qr(t,e,e,$i,va);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new qr(t,e,e,gf,co);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new qr(t,e,e,$i,va);n.colorSpace=mn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const l=e.getAttribute(s),{array:c,itemSize:f,normalized:m}=l,p=new c.constructor(n*f),g=new Cn(p,f,m);t.setAttribute(s,g)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Cn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ta);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Pa),this.getBoundingBoxAt(s,Vm).applyMatrix4(Pa),e.union(Vm)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ji);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Pa),this.getBoundingSphereAt(s,ah).applyMatrix4(Pa),e.union(ah)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Kv),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;Pa.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const l=this._colorsTexture;return l&&(b3.toArray(l.image.data,i*4),l.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?l.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Kv),f=this._availableGeometryIds.shift(),s[f]=i):(f=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(f,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),l=t.getIndex(),c=this._geometryInfo[e];if(i&&l.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=c.vertexStart,m=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const p in n.attributes){const g=t.getAttribute(p),x=n.getAttribute(p);M3(g,x,f);const _=g.itemSize;for(let S=g.count,T=m;S<T;S++){const M=f+S;for(let w=0;w<_;w++)x.setComponent(M,w,0)}x.needsUpdate=!0,x.addUpdateRange(f*_,m*_)}if(i){const p=c.indexStart,g=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let x=0;x<l.count;x++)s.setX(p+x,f+l.getX(x));for(let x=l.count,_=g;x<_;x++)s.setX(p+x,f);s.needsUpdate=!0,s.addUpdateRange(p,c.reservedIndexCount)}return c.start=i?c.indexStart:c.vertexStart,c.count=i?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,s=n.length;i<s;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((l,c)=>c).sort((l,c)=>n[l].vertexStart-n[c].vertexStart),s=this.geometry;for(let l=0,c=n.length;l<c;l++){const f=i[l],m=n[f];if(m.active!==!1){if(s.index!==null){if(m.indexStart!==t){const{indexStart:p,vertexStart:g,reservedIndexCount:x}=m,_=s.index,S=_.array,T=e-g;for(let M=p;M<p+x;M++)S[M]=S[M]+T;_.array.copyWithin(t,p,p+x),_.addUpdateRange(t,x),m.indexStart=t}t+=m.reservedIndexCount}if(m.vertexStart!==e){const{vertexStart:p,reservedVertexCount:g}=m,x=s.attributes;for(const _ in x){const S=x[_],{array:T,itemSize:M}=S;T.copyWithin(e*M,p*M,(p+g)*M),S.addUpdateRange(e*M,g*M)}m.vertexStart=e}e+=m.reservedVertexCount,m.start=s.index?m.indexStart:m.vertexStart,this._nextIndexStart=s.index?m.indexStart+m.reservedIndexCount:0,this._nextVertexStart=m.vertexStart+m.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new ta,l=n.index,c=n.attributes.position;for(let f=i.start,m=i.start+i.count;f<m;f++){let p=f;l&&(p=l.getX(p)),s.expandByPoint(Ld.fromBufferAttribute(c,p))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new ji;this.getBoundingBoxAt(e,Vm),Vm.getCenter(s.center);const l=n.index,c=n.attributes.position;let f=0;for(let m=i.start,p=i.start+i.count;m<p;m++){let g=m;l&&(g=l.getX(g)),Ld.fromBufferAttribute(c,g),f=Math.max(f,s.center.distanceToSquared(Ld))}s.radius=Math.sqrt(f),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Kv);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);rh(this._multiDrawCounts,i),rh(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const l=this._indirectTexture,c=this._matricesTexture,f=this._colorsTexture;l.dispose(),this._initIndirectTexture(),rh(l.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),rh(c.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),rh(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(f=>f.indexStart+f.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Jt,this._initializeGeometry(s));const l=this.geometry;s.index&&rh(s.index.array,l.index.array);for(const c in s.attributes)rh(s.attributes[c].array,l.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,l=this.geometry;Qi.material=this.material,Qi.geometry.index=l.index,Qi.geometry.attributes=l.attributes,Qi.geometry.boundingBox===null&&(Qi.geometry.boundingBox=new ta),Qi.geometry.boundingSphere===null&&(Qi.geometry.boundingSphere=new ji);for(let c=0,f=n.length;c<f;c++){if(!n[c].visible||!n[c].active)continue;const m=n[c].geometryIndex,p=i[m];Qi.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(c,Qi.matrixWorld).premultiply(s),this.getBoundingBoxAt(m,Qi.geometry.boundingBox),this.getBoundingSphereAt(m,Qi.geometry.boundingSphere),Qi.raycast(e,Hm);for(let g=0,x=Hm.length;g<x;g++){const _=Hm[g];_.object=this,_.batchId=c,t.push(_)}Hm.length=0}Qi.material=null,Qi.geometry.index=null,Qi.geometry.attributes={},Qi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=i.getIndex(),c=l===null?1:l.array.BYTES_PER_ELEMENT,f=this._instanceInfo,m=this._multiDrawStarts,p=this._multiDrawCounts,g=this._geometryInfo,x=this.perObjectFrustumCulled,_=this._indirectTexture,S=_.image.data,T=n.isArrayCamera?w3:Jx;x&&!n.isArrayCamera&&(Pa.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Jx.setFromProjectionMatrix(Pa,n.coordinateSystem,n.reversedDepth));let M=0;if(this.sortObjects){Pa.copy(this.matrixWorld).invert(),Ld.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Pa),Qx.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Pa);for(let I=0,L=f.length;I<L;I++)if(f[I].visible&&f[I].active){const F=f[I].geometryIndex;this.getMatrixAt(I,Pa),this.getBoundingSphereAt(F,ah).applyMatrix4(Pa);let N=!1;if(x&&(N=!T.intersectsSphere(ah,n)),!N){const z=g[F],G=S3.subVectors(ah.center,Ld).dot(Qx);Zv.push(z.start,z.count,G,I)}}const w=Zv.list,C=this.customSort;C===null?w.sort(s.transparent?x3:y3):C.call(this,w,n);for(let I=0,L=w.length;I<L;I++){const F=w[I];m[M]=F.start*c,p[M]=F.count,S[M]=F.index,M++}Zv.reset()}else for(let w=0,C=f.length;w<C;w++)if(f[w].visible&&f[w].active){const I=f[w].geometryIndex;let L=!1;if(x&&(this.getMatrixAt(w,Pa),this.getBoundingSphereAt(I,ah).applyMatrix4(Pa),L=!T.intersectsSphere(ah,n)),!L){const F=g[I];m[M]=F.start*c,p[M]=F.count,S[M]=w,M++}}_.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,l){this.onBeforeRender(e,null,i,s,l)}}class xa extends na{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ng=new Y,ig=new Y,$x=new Vt,Nd=new Ch,Gm=new ji,Jv=new Y,e_=new Y;class ol extends yn{constructor(e=new Jt,t=new xa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)ng.fromBufferAttribute(t,i-1),ig.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=ng.distanceTo(ig);e.setAttribute("lineDistance",new Et(n,1))}else ft("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Gm.copy(n.boundingSphere),Gm.applyMatrix4(i),Gm.radius+=s,e.ray.intersectsSphere(Gm)===!1)return;$x.copy(i).invert(),Nd.copy(e.ray).applyMatrix4($x);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,m=this.isLineSegments?2:1,p=n.index,x=n.attributes.position;if(p!==null){const _=Math.max(0,l.start),S=Math.min(p.count,l.start+l.count);for(let T=_,M=S-1;T<M;T+=m){const w=p.getX(T),C=p.getX(T+1),I=Wm(this,e,Nd,f,w,C,T);I&&t.push(I)}if(this.isLineLoop){const T=p.getX(S-1),M=p.getX(_),w=Wm(this,e,Nd,f,T,M,S-1);w&&t.push(w)}}else{const _=Math.max(0,l.start),S=Math.min(x.count,l.start+l.count);for(let T=_,M=S-1;T<M;T+=m){const w=Wm(this,e,Nd,f,T,T+1,T);w&&t.push(w)}if(this.isLineLoop){const T=Wm(this,e,Nd,f,S-1,_,S-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=i.length;s<l;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function Wm(r,e,t,n,i,s,l){const c=r.geometry.attributes.position;if(ng.fromBufferAttribute(c,i),ig.fromBufferAttribute(c,s),t.distanceSqToSegment(ng,ig,Jv,e_)>n)return;Jv.applyMatrix4(r.matrixWorld);const m=e.ray.origin.distanceTo(Jv);if(!(m<e.near||m>e.far))return{distance:m,point:e_.clone().applyMatrix4(r.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:r}}const t_=new Y,n_=new Y;class xs extends ol{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)t_.fromBufferAttribute(t,i),n_.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+t_.distanceTo(n_);e.setAttribute("lineDistance",new Et(n,1))}else ft("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class E1 extends ol{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class d0 extends na{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const i_=new Vt,Oy=new Ch,Xm=new ji,Ym=new Y;class A1 extends yn{constructor(e=new Jt,t=new d0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Xm.copy(n.boundingSphere),Xm.applyMatrix4(i),Xm.radius+=s,e.ray.intersectsSphere(Xm)===!1)return;i_.copy(i).invert(),Oy.copy(e.ray).applyMatrix4(i_);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,m=n.index,g=n.attributes.position;if(m!==null){const x=Math.max(0,l.start),_=Math.min(m.count,l.start+l.count);for(let S=x,T=_;S<T;S++){const M=m.getX(S);Ym.fromBufferAttribute(g,M),a_(Ym,M,f,i,e,t,this)}}else{const x=Math.max(0,l.start),_=Math.min(g.count,l.start+l.count);for(let S=x,T=_;S<T;S++)Ym.fromBufferAttribute(g,S),a_(Ym,S,f,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=i.length;s<l;s++){const c=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function a_(r,e,t,n,i,s,l){const c=Oy.distanceSqToPoint(r);if(c<t){const f=new Y;Oy.closestPointToPoint(r,f),f.applyMatrix4(n);const m=i.ray.origin.distanceTo(f);if(m<i.near||m>i.far)return;s.push({distance:m,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class C1 extends Qn{constructor(e,t,n,i,s=Wn,l=Wn,c,f,m){super(e,t,n,i,s,l,c,f,m),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const p=this;function g(){p.needsUpdate=!0,p._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class k3 extends C1{constructor(e,t,n,i,s,l,c,f){super({},e,t,n,i,s,l,c,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class T3 extends Qn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=zi,this.minFilter=zi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Eg extends Qn{constructor(e,t,n,i,s,l,c,f,m,p,g,x){super(null,l,c,f,m,p,i,s,g,x),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class E3 extends Eg{constructor(e,t,n,i,s,l){super(e,t,n,s,l),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Oa,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class A3 extends Eg{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,uo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class C3 extends Qn{constructor(e,t,n,i,s,l,c,f,m){super(e,t,n,i,s,l,c,f,m),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ag extends Qn{constructor(e,t,n=co,i,s,l,c=zi,f=zi,m,p=pc,g=1){if(p!==pc&&p!==gc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:e,height:t,depth:g};super(x,i,s,l,c,f,p,n,m),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new nl(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class f0 extends Qn{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Cg extends Jt{constructor(e=1,t=1,n=4,i=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),s=Math.max(1,Math.floor(s));const l=[],c=[],f=[],m=[],p=t/2,g=Math.PI/2*e,x=t,_=2*g+x,S=n*2+s,T=i+1,M=new Y,w=new Y;for(let C=0;C<=S;C++){let I=0,L=0,F=0,N=0;if(C<=n){const D=C/n,P=D*Math.PI/2;L=-p-e*Math.cos(P),F=e*Math.sin(P),N=-e*Math.cos(P),I=D*g}else if(C<=n+s){const D=(C-n)/s;L=-p+D*t,F=e,N=0,I=g+D*x}else{const D=(C-n-s)/n,P=D*Math.PI/2;L=p+e*Math.sin(P),F=e*Math.cos(P),N=e*Math.sin(P),I=g+x+D*g}const z=Math.max(0,Math.min(1,I/_));let G=0;C===0?G=.5/i:C===S&&(G=-.5/i);for(let D=0;D<=i;D++){const P=D/i,V=P*Math.PI*2,ee=Math.sin(V),ie=Math.cos(V);w.x=-F*ie,w.y=L,w.z=F*ee,c.push(w.x,w.y,w.z),M.set(-F*ie,N,F*ee),M.normalize(),f.push(M.x,M.y,M.z),m.push(P+G,z)}if(C>0){const D=(C-1)*T;for(let P=0;P<i;P++){const V=D+P,ee=D+P+1,ie=C*T+P,pe=C*T+P+1;l.push(V,ee,ie),l.push(ee,pe,ie)}}}this.setIndex(l),this.setAttribute("position",new Et(c,3)),this.setAttribute("normal",new Et(f,3)),this.setAttribute("uv",new Et(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cg(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Ig extends Jt{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],l=[],c=[],f=[],m=new Y,p=new Ce;l.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let g=0,x=3;g<=t;g++,x+=3){const _=n+g/t*i;m.x=e*Math.cos(_),m.y=e*Math.sin(_),l.push(m.x,m.y,m.z),c.push(0,0,1),p.x=(l[x]/e+1)/2,p.y=(l[x+1]/e+1)/2,f.push(p.x,p.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ig(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xf extends Jt{constructor(e=1,t=1,n=1,i=32,s=1,l=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:l,thetaStart:c,thetaLength:f};const m=this;i=Math.floor(i),s=Math.floor(s);const p=[],g=[],x=[],_=[];let S=0;const T=[],M=n/2;let w=0;C(),l===!1&&(e>0&&I(!0),t>0&&I(!1)),this.setIndex(p),this.setAttribute("position",new Et(g,3)),this.setAttribute("normal",new Et(x,3)),this.setAttribute("uv",new Et(_,2));function C(){const L=new Y,F=new Y;let N=0;const z=(t-e)/n;for(let G=0;G<=s;G++){const D=[],P=G/s,V=P*(t-e)+e;for(let ee=0;ee<=i;ee++){const ie=ee/i,pe=ie*f+c,me=Math.sin(pe),ve=Math.cos(pe);F.x=V*me,F.y=-P*n+M,F.z=V*ve,g.push(F.x,F.y,F.z),L.set(me,z,ve).normalize(),x.push(L.x,L.y,L.z),_.push(ie,1-P),D.push(S++)}T.push(D)}for(let G=0;G<i;G++)for(let D=0;D<s;D++){const P=T[D][G],V=T[D+1][G],ee=T[D+1][G+1],ie=T[D][G+1];(e>0||D!==0)&&(p.push(P,V,ie),N+=3),(t>0||D!==s-1)&&(p.push(V,ee,ie),N+=3)}m.addGroup(w,N,0),w+=N}function I(L){const F=S,N=new Ce,z=new Y;let G=0;const D=L===!0?e:t,P=L===!0?1:-1;for(let ee=1;ee<=i;ee++)g.push(0,M*P,0),x.push(0,P,0),_.push(.5,.5),S++;const V=S;for(let ee=0;ee<=i;ee++){const pe=ee/i*f+c,me=Math.cos(pe),ve=Math.sin(pe);z.x=D*ve,z.y=M*P,z.z=D*me,g.push(z.x,z.y,z.z),x.push(0,P,0),N.x=me*.5+.5,N.y=ve*.5*P+.5,_.push(N.x,N.y),S++}for(let ee=0;ee<i;ee++){const ie=F+ee,pe=V+ee;L===!0?p.push(pe,pe+1,ie):p.push(pe+1,pe,ie),G+=3}m.addGroup(w,G,L===!0?1:2),w+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _f extends xf{constructor(e=1,t=1,n=32,i=1,s=!1,l=0,c=Math.PI*2){super(0,e,t,n,i,s,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:l,thetaLength:c}}static fromJSON(e){return new _f(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class cl extends Jt{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],l=[];c(i),m(n),p(),this.setAttribute("position",new Et(s,3)),this.setAttribute("normal",new Et(s.slice(),3)),this.setAttribute("uv",new Et(l,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function c(C){const I=new Y,L=new Y,F=new Y;for(let N=0;N<t.length;N+=3)_(t[N+0],I),_(t[N+1],L),_(t[N+2],F),f(I,L,F,C)}function f(C,I,L,F){const N=F+1,z=[];for(let G=0;G<=N;G++){z[G]=[];const D=C.clone().lerp(L,G/N),P=I.clone().lerp(L,G/N),V=N-G;for(let ee=0;ee<=V;ee++)ee===0&&G===N?z[G][ee]=D:z[G][ee]=D.clone().lerp(P,ee/V)}for(let G=0;G<N;G++)for(let D=0;D<2*(N-G)-1;D++){const P=Math.floor(D/2);D%2===0?(x(z[G][P+1]),x(z[G+1][P]),x(z[G][P])):(x(z[G][P+1]),x(z[G+1][P+1]),x(z[G+1][P]))}}function m(C){const I=new Y;for(let L=0;L<s.length;L+=3)I.x=s[L+0],I.y=s[L+1],I.z=s[L+2],I.normalize().multiplyScalar(C),s[L+0]=I.x,s[L+1]=I.y,s[L+2]=I.z}function p(){const C=new Y;for(let I=0;I<s.length;I+=3){C.x=s[I+0],C.y=s[I+1],C.z=s[I+2];const L=M(C)/2/Math.PI+.5,F=w(C)/Math.PI+.5;l.push(L,1-F)}S(),g()}function g(){for(let C=0;C<l.length;C+=6){const I=l[C+0],L=l[C+2],F=l[C+4],N=Math.max(I,L,F),z=Math.min(I,L,F);N>.9&&z<.1&&(I<.2&&(l[C+0]+=1),L<.2&&(l[C+2]+=1),F<.2&&(l[C+4]+=1))}}function x(C){s.push(C.x,C.y,C.z)}function _(C,I){const L=C*3;I.x=e[L+0],I.y=e[L+1],I.z=e[L+2]}function S(){const C=new Y,I=new Y,L=new Y,F=new Y,N=new Ce,z=new Ce,G=new Ce;for(let D=0,P=0;D<s.length;D+=9,P+=6){C.set(s[D+0],s[D+1],s[D+2]),I.set(s[D+3],s[D+4],s[D+5]),L.set(s[D+6],s[D+7],s[D+8]),N.set(l[P+0],l[P+1]),z.set(l[P+2],l[P+3]),G.set(l[P+4],l[P+5]),F.copy(C).add(I).add(L).divideScalar(3);const V=M(F);T(N,P+0,C,V),T(z,P+2,I,V),T(G,P+4,L,V)}}function T(C,I,L,F){F<0&&C.x===1&&(l[I]=C.x-1),L.x===0&&L.z===0&&(l[I]=F/2/Math.PI+.5)}function M(C){return Math.atan2(C.z,-C.x)}function w(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cl(e.vertices,e.indices,e.radius,e.details)}}class Rg extends cl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rg(e.radius,e.detail)}}const qm=new Y,Km=new Y,Qv=new Y,Zm=new Da;class I1 extends Jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(wh*t),l=e.getIndex(),c=e.getAttribute("position"),f=l?l.count:c.count,m=[0,0,0],p=["a","b","c"],g=new Array(3),x={},_=[];for(let S=0;S<f;S+=3){l?(m[0]=l.getX(S),m[1]=l.getX(S+1),m[2]=l.getX(S+2)):(m[0]=S,m[1]=S+1,m[2]=S+2);const{a:T,b:M,c:w}=Zm;if(T.fromBufferAttribute(c,m[0]),M.fromBufferAttribute(c,m[1]),w.fromBufferAttribute(c,m[2]),Zm.getNormal(Qv),g[0]=`${Math.round(T.x*i)},${Math.round(T.y*i)},${Math.round(T.z*i)}`,g[1]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,g[2]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let C=0;C<3;C++){const I=(C+1)%3,L=g[C],F=g[I],N=Zm[p[C]],z=Zm[p[I]],G=`${L}_${F}`,D=`${F}_${L}`;D in x&&x[D]?(Qv.dot(x[D].normal)<=s&&(_.push(N.x,N.y,N.z),_.push(z.x,z.y,z.z)),x[D]=null):G in x||(x[G]={index0:m[C],index1:m[I],normal:Qv.clone()})}}for(const S in x)if(x[S]){const{index0:T,index1:M}=x[S];qm.fromBufferAttribute(c,T),Km.fromBufferAttribute(c,M),_.push(qm.x,qm.y,qm.z),_.push(Km.x,Km.y,Km.z)}this.setAttribute("position",new Et(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Zr{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ft("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let l=1;l<=e;l++)n=this.getPoint(l/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const s=n.length;let l;t?l=t:l=e*n[s-1];let c=0,f=s-1,m;for(;c<=f;)if(i=Math.floor(c+(f-c)/2),m=n[i]-l,m<0)c=i+1;else if(m>0)f=i-1;else{f=i;break}if(i=f,n[i]===l)return i/(s-1);const p=n[i],x=n[i+1]-p,_=(l-p)/x;return(i+_)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const l=this.getPoint(i),c=this.getPoint(s),f=t||(l.isVector2?new Ce:new Y);return f.copy(c).sub(l).normalize(),f}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new Y,i=[],s=[],l=[],c=new Y,f=new Vt;for(let _=0;_<=e;_++){const S=_/e;i[_]=this.getTangentAt(S,new Y)}s[0]=new Y,l[0]=new Y;let m=Number.MAX_VALUE;const p=Math.abs(i[0].x),g=Math.abs(i[0].y),x=Math.abs(i[0].z);p<=m&&(m=p,n.set(1,0,0)),g<=m&&(m=g,n.set(0,1,0)),x<=m&&n.set(0,0,1),c.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],c),l[0].crossVectors(i[0],s[0]);for(let _=1;_<=e;_++){if(s[_]=s[_-1].clone(),l[_]=l[_-1].clone(),c.crossVectors(i[_-1],i[_]),c.length()>Number.EPSILON){c.normalize();const S=Math.acos(jt(i[_-1].dot(i[_]),-1,1));s[_].applyMatrix4(f.makeRotationAxis(c,S))}l[_].crossVectors(i[_],s[_])}if(t===!0){let _=Math.acos(jt(s[0].dot(s[e]),-1,1));_/=e,i[0].dot(c.crossVectors(s[0],s[e]))>0&&(_=-_);for(let S=1;S<=e;S++)s[S].applyMatrix4(f.makeRotationAxis(i[S],_*S)),l[S].crossVectors(i[S],s[S])}return{tangents:i,normals:s,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Pg extends Zr{constructor(e=0,t=0,n=1,i=1,s=0,l=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=l,this.aClockwise=c,this.aRotation=f}getPoint(e,t=new Ce){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const l=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(l?s=0:s=i),this.aClockwise===!0&&!l&&(s===i?s=-i:s=s-i);const c=this.aStartAngle+e*s;let f=this.aX+this.xRadius*Math.cos(c),m=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),x=f-this.aX,_=m-this.aY;f=x*p-_*g+this.aX,m=x*g+_*p+this.aY}return n.set(f,m)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class R1 extends Pg{constructor(e,t,n,i,s,l){super(e,t,n,n,i,s,l),this.isArcCurve=!0,this.type="ArcCurve"}}function m0(){let r=0,e=0,t=0,n=0;function i(s,l,c,f){r=s,e=c,t=-3*s+3*l-2*c-f,n=2*s-2*l+c+f}return{initCatmullRom:function(s,l,c,f,m){i(l,c,m*(c-s),m*(f-l))},initNonuniformCatmullRom:function(s,l,c,f,m,p,g){let x=(l-s)/m-(c-s)/(m+p)+(c-l)/p,_=(c-l)/p-(f-l)/(p+g)+(f-c)/g;x*=p,_*=p,i(l,c,x,_)},calc:function(s){const l=s*s,c=l*s;return r+e*s+t*l+n*c}}}const Jm=new Y,$v=new m0,ey=new m0,ty=new m0;class P1 extends Zr{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Y){const n=t,i=this.points,s=i.length,l=(s-(this.closed?0:1))*e;let c=Math.floor(l),f=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:f===0&&c===s-1&&(c=s-2,f=1);let m,p;this.closed||c>0?m=i[(c-1)%s]:(Jm.subVectors(i[0],i[1]).add(i[0]),m=Jm);const g=i[c%s],x=i[(c+1)%s];if(this.closed||c+2<s?p=i[(c+2)%s]:(Jm.subVectors(i[s-1],i[s-2]).add(i[s-1]),p=Jm),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let S=Math.pow(m.distanceToSquared(g),_),T=Math.pow(g.distanceToSquared(x),_),M=Math.pow(x.distanceToSquared(p),_);T<1e-4&&(T=1),S<1e-4&&(S=T),M<1e-4&&(M=T),$v.initNonuniformCatmullRom(m.x,g.x,x.x,p.x,S,T,M),ey.initNonuniformCatmullRom(m.y,g.y,x.y,p.y,S,T,M),ty.initNonuniformCatmullRom(m.z,g.z,x.z,p.z,S,T,M)}else this.curveType==="catmullrom"&&($v.initCatmullRom(m.x,g.x,x.x,p.x,this.tension),ey.initCatmullRom(m.y,g.y,x.y,p.y,this.tension),ty.initCatmullRom(m.z,g.z,x.z,p.z,this.tension));return n.set($v.calc(f),ey.calc(f),ty.calc(f)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Y().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r_(r,e,t,n,i){const s=(n-e)*.5,l=(i-t)*.5,c=r*r,f=r*c;return(2*t-2*n+s+l)*f+(-3*t+3*n-2*s-l)*c+s*r+t}function I3(r,e){const t=1-r;return t*t*e}function R3(r,e){return 2*(1-r)*r*e}function P3(r,e){return r*r*e}function Kd(r,e,t,n){return I3(r,e)+R3(r,t)+P3(r,n)}function L3(r,e){const t=1-r;return t*t*t*e}function N3(r,e){const t=1-r;return 3*t*t*r*e}function D3(r,e){return 3*(1-r)*r*r*e}function O3(r,e){return r*r*r*e}function Zd(r,e,t,n,i){return L3(r,e)+N3(r,t)+D3(r,n)+O3(r,i)}class p0 extends Zr{constructor(e=new Ce,t=new Ce,n=new Ce,i=new Ce){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ce){const n=t,i=this.v0,s=this.v1,l=this.v2,c=this.v3;return n.set(Zd(e,i.x,s.x,l.x,c.x),Zd(e,i.y,s.y,l.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class L1 extends Zr{constructor(e=new Y,t=new Y,n=new Y,i=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Y){const n=t,i=this.v0,s=this.v1,l=this.v2,c=this.v3;return n.set(Zd(e,i.x,s.x,l.x,c.x),Zd(e,i.y,s.y,l.y,c.y),Zd(e,i.z,s.z,l.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class g0 extends Zr{constructor(e=new Ce,t=new Ce){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ce){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ce){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class N1 extends Zr{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class v0 extends Zr{constructor(e=new Ce,t=new Ce,n=new Ce){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ce){const n=t,i=this.v0,s=this.v1,l=this.v2;return n.set(Kd(e,i.x,s.x,l.x),Kd(e,i.y,s.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class y0 extends Zr{constructor(e=new Y,t=new Y,n=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Y){const n=t,i=this.v0,s=this.v1,l=this.v2;return n.set(Kd(e,i.x,s.x,l.x),Kd(e,i.y,s.y,l.y),Kd(e,i.z,s.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class x0 extends Zr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ce){const n=t,i=this.points,s=(i.length-1)*e,l=Math.floor(s),c=s-l,f=i[l===0?l:l-1],m=i[l],p=i[l>i.length-2?i.length-1:l+1],g=i[l>i.length-3?i.length-1:l+2];return n.set(r_(c,f.x,m.x,p.x,g.x),r_(c,f.y,m.y,p.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ce().fromArray(i))}return this}}var ag=Object.freeze({__proto__:null,ArcCurve:R1,CatmullRomCurve3:P1,CubicBezierCurve:p0,CubicBezierCurve3:L1,EllipseCurve:Pg,LineCurve:g0,LineCurve3:N1,QuadraticBezierCurve:v0,QuadraticBezierCurve3:y0,SplineCurve:x0});class D1 extends Zr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ag[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const l=i[s]-n,c=this.curves[s],f=c.getLength(),m=f===0?0:1-l/f;return c.getPointAt(m,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const l=s[i],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,f=l.getPoints(c);for(let m=0;m<f.length;m++){const p=f[m];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new ag[i.type]().fromJSON(i))}return this}}class rg extends D1{constructor(e){super(),this.type="Path",this.currentPoint=new Ce,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new g0(this.currentPoint.clone(),new Ce(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new v0(this.currentPoint.clone(),new Ce(e,t),new Ce(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,l){const c=new p0(this.currentPoint.clone(),new Ce(e,t),new Ce(n,i),new Ce(s,l));return this.curves.push(c),this.currentPoint.set(s,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new x0(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,l){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,n,i,s,l),this}absarc(e,t,n,i,s,l){return this.absellipse(e,t,n,n,i,s,l),this}ellipse(e,t,n,i,s,l,c,f){const m=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+m,t+p,n,i,s,l,c,f),this}absellipse(e,t,n,i,s,l,c,f){const m=new Pg(e,t,n,i,s,l,c,f);if(this.curves.length>0){const g=m.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(m);const p=m.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Mh extends rg{constructor(e){super(e),this.uuid=er(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new rg().fromJSON(i))}return this}}function U3(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=O1(r,0,i,t,!0);const l=[];if(!s||s.next===s.prev)return l;let c,f,m;if(n&&(s=V3(r,e,s,t)),r.length>80*t){c=r[0],f=r[1];let p=c,g=f;for(let x=t;x<i;x+=t){const _=r[x],S=r[x+1];_<c&&(c=_),S<f&&(f=S),_>p&&(p=_),S>g&&(g=S)}m=Math.max(p-c,g-f),m=m!==0?32767/m:0}return lf(s,l,t,c,f,m,0),l}function O1(r,e,t,n,i){let s;if(i===$3(r,e,t,n)>0)for(let l=e;l<t;l+=n)s=s_(l/n|0,r[l],r[l+1],s);else for(let l=t-n;l>=e;l-=n)s=s_(l/n|0,r[l],r[l+1],s);return s&&wc(s,s.next)&&(uf(s),s=s.next),s}function Ah(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(wc(t,t.next)||Gn(t.prev,t,t.next)===0)){if(uf(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function lf(r,e,t,n,i,s,l){if(!r)return;!l&&s&&Y3(r,n,i,s);let c=r;for(;r.prev!==r.next;){const f=r.prev,m=r.next;if(s?B3(r,n,i,s):F3(r)){e.push(f.i,r.i,m.i),uf(r),r=m.next,c=m.next;continue}if(r=m,r===c){l?l===1?(r=z3(Ah(r),e),lf(r,e,t,n,i,s,2)):l===2&&j3(r,e,t,n,i,s):lf(Ah(r),e,t,n,i,s,1);break}}}function F3(r){const e=r.prev,t=r,n=r.next;if(Gn(e,t,n)>=0)return!1;const i=e.x,s=t.x,l=n.x,c=e.y,f=t.y,m=n.y,p=Math.min(i,s,l),g=Math.min(c,f,m),x=Math.max(i,s,l),_=Math.max(c,f,m);let S=n.next;for(;S!==e;){if(S.x>=p&&S.x<=x&&S.y>=g&&S.y<=_&&zd(i,c,s,f,l,m,S.x,S.y)&&Gn(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function B3(r,e,t,n){const i=r.prev,s=r,l=r.next;if(Gn(i,s,l)>=0)return!1;const c=i.x,f=s.x,m=l.x,p=i.y,g=s.y,x=l.y,_=Math.min(c,f,m),S=Math.min(p,g,x),T=Math.max(c,f,m),M=Math.max(p,g,x),w=Uy(_,S,e,t,n),C=Uy(T,M,e,t,n);let I=r.prevZ,L=r.nextZ;for(;I&&I.z>=w&&L&&L.z<=C;){if(I.x>=_&&I.x<=T&&I.y>=S&&I.y<=M&&I!==i&&I!==l&&zd(c,p,f,g,m,x,I.x,I.y)&&Gn(I.prev,I,I.next)>=0||(I=I.prevZ,L.x>=_&&L.x<=T&&L.y>=S&&L.y<=M&&L!==i&&L!==l&&zd(c,p,f,g,m,x,L.x,L.y)&&Gn(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;I&&I.z>=w;){if(I.x>=_&&I.x<=T&&I.y>=S&&I.y<=M&&I!==i&&I!==l&&zd(c,p,f,g,m,x,I.x,I.y)&&Gn(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;L&&L.z<=C;){if(L.x>=_&&L.x<=T&&L.y>=S&&L.y<=M&&L!==i&&L!==l&&zd(c,p,f,g,m,x,L.x,L.y)&&Gn(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function z3(r,e){let t=r;do{const n=t.prev,i=t.next.next;!wc(n,i)&&F1(n,t,t.next,i)&&hf(n,i)&&hf(i,n)&&(e.push(n.i,t.i,i.i),uf(t),uf(t.next),t=r=i),t=t.next}while(t!==r);return Ah(t)}function j3(r,e,t,n,i,s){let l=r;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&Z3(l,c)){let f=B1(l,c);l=Ah(l,l.next),f=Ah(f,f.next),lf(l,e,t,n,i,s,0),lf(f,e,t,n,i,s,0);return}c=c.next}l=l.next}while(l!==r)}function V3(r,e,t,n){const i=[];for(let s=0,l=e.length;s<l;s++){const c=e[s]*n,f=s<l-1?e[s+1]*n:r.length,m=O1(r,c,f,n,!1);m===m.next&&(m.steiner=!0),i.push(K3(m))}i.sort(H3);for(let s=0;s<i.length;s++)t=G3(i[s],t);return t}function H3(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const n=(r.next.y-r.y)/(r.next.x-r.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function G3(r,e){const t=W3(r,e);if(!t)return e;const n=B1(t,r);return Ah(n,n.next),Ah(t,t.next)}function W3(r,e){let t=e;const n=r.x,i=r.y;let s=-1/0,l;if(wc(r,t))return t;do{if(wc(r,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const g=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>s&&(s=g,l=t.x<t.next.x?t:t.next,g===n))return l}t=t.next}while(t!==e);if(!l)return null;const c=l,f=l.x,m=l.y;let p=1/0;t=l;do{if(n>=t.x&&t.x>=f&&n!==t.x&&U1(i<m?n:s,i,f,m,i<m?s:n,i,t.x,t.y)){const g=Math.abs(i-t.y)/(n-t.x);hf(t,r)&&(g<p||g===p&&(t.x>l.x||t.x===l.x&&X3(l,t)))&&(l=t,p=g)}t=t.next}while(t!==c);return l}function X3(r,e){return Gn(r.prev,r,e.prev)<0&&Gn(e.next,r,r.next)<0}function Y3(r,e,t,n){let i=r;do i.z===0&&(i.z=Uy(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,q3(i)}function q3(r){let e,t=1;do{let n=r,i;r=null;let s=null;for(e=0;n;){e++;let l=n,c=0;for(let m=0;m<t&&(c++,l=l.nextZ,!!l);m++);let f=t;for(;c>0||f>0&&l;)c!==0&&(f===0||!l||n.z<=l.z)?(i=n,n=n.nextZ,c--):(i=l,l=l.nextZ,f--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;n=l}s.nextZ=null,t*=2}while(e>1);return r}function Uy(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function K3(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function U1(r,e,t,n,i,s,l,c){return(i-l)*(e-c)>=(r-l)*(s-c)&&(r-l)*(n-c)>=(t-l)*(e-c)&&(t-l)*(s-c)>=(i-l)*(n-c)}function zd(r,e,t,n,i,s,l,c){return!(r===l&&e===c)&&U1(r,e,t,n,i,s,l,c)}function Z3(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!J3(r,e)&&(hf(r,e)&&hf(e,r)&&Q3(r,e)&&(Gn(r.prev,r,e.prev)||Gn(r,e.prev,e))||wc(r,e)&&Gn(r.prev,r,r.next)>0&&Gn(e.prev,e,e.next)>0)}function Gn(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function wc(r,e){return r.x===e.x&&r.y===e.y}function F1(r,e,t,n){const i=$m(Gn(r,e,t)),s=$m(Gn(r,e,n)),l=$m(Gn(t,n,r)),c=$m(Gn(t,n,e));return!!(i!==s&&l!==c||i===0&&Qm(r,t,e)||s===0&&Qm(r,n,e)||l===0&&Qm(t,r,n)||c===0&&Qm(t,e,n))}function Qm(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function $m(r){return r>0?1:r<0?-1:0}function J3(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&F1(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function hf(r,e){return Gn(r.prev,r,r.next)<0?Gn(r,e,r.next)>=0&&Gn(r,r.prev,e)>=0:Gn(r,e,r.prev)<0||Gn(r,r.next,e)<0}function Q3(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function B1(r,e){const t=Fy(r.i,r.x,r.y),n=Fy(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function s_(r,e,t,n){const i=Fy(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function uf(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Fy(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function $3(r,e,t,n){let i=0;for(let s=e,l=t-n;s<t;s+=n)i+=(r[l]-r[s])*(r[s+1]+r[l+1]),l=s;return i}class e2{static triangulate(e,t,n=2){return U3(e,t,n)}}class Yr{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Yr.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];o_(e),l_(n,e);let l=e.length;t.forEach(o_);for(let f=0;f<t.length;f++)i.push(l),l+=t[f].length,l_(n,t[f]);const c=e2.triangulate(n,i);for(let f=0;f<c.length;f+=3)s.push(c.slice(f,f+3));return s}}function o_(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function l_(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Lg extends Jt{constructor(e=new Mh([new Ce(.5,.5),new Ce(-.5,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let c=0,f=e.length;c<f;c++){const m=e[c];l(m)}this.setAttribute("position",new Et(i,3)),this.setAttribute("uv",new Et(s,2)),this.computeVertexNormals();function l(c){const f=[],m=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:_-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:t2;let I,L=!1,F,N,z,G;w&&(I=w.getSpacedPoints(p),L=!0,x=!1,F=w.computeFrenetFrames(p,!1),N=new Y,z=new Y,G=new Y),x||(M=0,_=0,S=0,T=0);const D=c.extractPoints(m);let P=D.shape;const V=D.holes;if(!Yr.isClockWise(P)){P=P.reverse();for(let Le=0,X=V.length;Le<X;Le++){const Ne=V[Le];Yr.isClockWise(Ne)&&(V[Le]=Ne.reverse())}}function ie(Le){const Ne=10000000000000001e-36;let ze=Le[0];for(let Ke=1;Ke<=Le.length;Ke++){const Ue=Ke%Le.length,ot=Le[Ue],$e=ot.x-ze.x,ut=ot.y-ze.y,W=$e*$e+ut*ut,O=Math.max(Math.abs(ot.x),Math.abs(ot.y),Math.abs(ze.x),Math.abs(ze.y)),ue=Ne*O*O;if(W<=ue){Le.splice(Ue,1),Ke--;continue}ze=ot}}ie(P),V.forEach(ie);const pe=V.length,me=P;for(let Le=0;Le<pe;Le++){const X=V[Le];P=P.concat(X)}function ve(Le,X,Ne){return X||Wt("ExtrudeGeometry: vec does not exist"),Le.clone().addScaledVector(X,Ne)}const Se=P.length;function B(Le,X,Ne){let ze,Ke,Ue;const ot=Le.x-X.x,$e=Le.y-X.y,ut=Ne.x-Le.x,W=Ne.y-Le.y,O=ot*ot+$e*$e,ue=ot*W-$e*ut;if(Math.abs(ue)>Number.EPSILON){const Te=Math.sqrt(O),Pe=Math.sqrt(ut*ut+W*W),Me=X.x-$e/Te,Mt=X.y+ot/Te,et=Ne.x-W/Pe,kt=Ne.y+ut/Pe,wt=((et-Me)*W-(kt-Mt)*ut)/(ot*W-$e*ut);ze=Me+ot*wt-Le.x,Ke=Mt+$e*wt-Le.y;const De=ze*ze+Ke*Ke;if(De<=2)return new Ce(ze,Ke);Ue=Math.sqrt(De/2)}else{let Te=!1;ot>Number.EPSILON?ut>Number.EPSILON&&(Te=!0):ot<-Number.EPSILON?ut<-Number.EPSILON&&(Te=!0):Math.sign($e)===Math.sign(W)&&(Te=!0),Te?(ze=-$e,Ke=ot,Ue=Math.sqrt(O)):(ze=ot,Ke=$e,Ue=Math.sqrt(O/2))}return new Ce(ze/Ue,Ke/Ue)}const Q=[];for(let Le=0,X=me.length,Ne=X-1,ze=Le+1;Le<X;Le++,Ne++,ze++)Ne===X&&(Ne=0),ze===X&&(ze=0),Q[Le]=B(me[Le],me[Ne],me[ze]);const K=[];let H,ae=Q.concat();for(let Le=0,X=pe;Le<X;Le++){const Ne=V[Le];H=[];for(let ze=0,Ke=Ne.length,Ue=Ke-1,ot=ze+1;ze<Ke;ze++,Ue++,ot++)Ue===Ke&&(Ue=0),ot===Ke&&(ot=0),H[ze]=B(Ne[ze],Ne[Ue],Ne[ot]);K.push(H),ae=ae.concat(H)}let Re;if(M===0)Re=Yr.triangulateShape(me,V);else{const Le=[],X=[];for(let Ne=0;Ne<M;Ne++){const ze=Ne/M,Ke=_*Math.cos(ze*Math.PI/2),Ue=S*Math.sin(ze*Math.PI/2)+T;for(let ot=0,$e=me.length;ot<$e;ot++){const ut=ve(me[ot],Q[ot],Ue);it(ut.x,ut.y,-Ke),ze===0&&Le.push(ut)}for(let ot=0,$e=pe;ot<$e;ot++){const ut=V[ot];H=K[ot];const W=[];for(let O=0,ue=ut.length;O<ue;O++){const Te=ve(ut[O],H[O],Ue);it(Te.x,Te.y,-Ke),ze===0&&W.push(Te)}ze===0&&X.push(W)}}Re=Yr.triangulateShape(Le,X)}const Ye=Re.length,rt=S+T;for(let Le=0;Le<Se;Le++){const X=x?ve(P[Le],ae[Le],rt):P[Le];L?(z.copy(F.normals[0]).multiplyScalar(X.x),N.copy(F.binormals[0]).multiplyScalar(X.y),G.copy(I[0]).add(z).add(N),it(G.x,G.y,G.z)):it(X.x,X.y,0)}for(let Le=1;Le<=p;Le++)for(let X=0;X<Se;X++){const Ne=x?ve(P[X],ae[X],rt):P[X];L?(z.copy(F.normals[Le]).multiplyScalar(Ne.x),N.copy(F.binormals[Le]).multiplyScalar(Ne.y),G.copy(I[Le]).add(z).add(N),it(G.x,G.y,G.z)):it(Ne.x,Ne.y,g/p*Le)}for(let Le=M-1;Le>=0;Le--){const X=Le/M,Ne=_*Math.cos(X*Math.PI/2),ze=S*Math.sin(X*Math.PI/2)+T;for(let Ke=0,Ue=me.length;Ke<Ue;Ke++){const ot=ve(me[Ke],Q[Ke],ze);it(ot.x,ot.y,g+Ne)}for(let Ke=0,Ue=V.length;Ke<Ue;Ke++){const ot=V[Ke];H=K[Ke];for(let $e=0,ut=ot.length;$e<ut;$e++){const W=ve(ot[$e],H[$e],ze);L?it(W.x,W.y+I[p-1].y,I[p-1].x+Ne):it(W.x,W.y,g+Ne)}}}ce(),we();function ce(){const Le=i.length/3;if(x){let X=0,Ne=Se*X;for(let ze=0;ze<Ye;ze++){const Ke=Re[ze];st(Ke[2]+Ne,Ke[1]+Ne,Ke[0]+Ne)}X=p+M*2,Ne=Se*X;for(let ze=0;ze<Ye;ze++){const Ke=Re[ze];st(Ke[0]+Ne,Ke[1]+Ne,Ke[2]+Ne)}}else{for(let X=0;X<Ye;X++){const Ne=Re[X];st(Ne[2],Ne[1],Ne[0])}for(let X=0;X<Ye;X++){const Ne=Re[X];st(Ne[0]+Se*p,Ne[1]+Se*p,Ne[2]+Se*p)}}n.addGroup(Le,i.length/3-Le,0)}function we(){const Le=i.length/3;let X=0;Be(me,X),X+=me.length;for(let Ne=0,ze=V.length;Ne<ze;Ne++){const Ke=V[Ne];Be(Ke,X),X+=Ke.length}n.addGroup(Le,i.length/3-Le,1)}function Be(Le,X){let Ne=Le.length;for(;--Ne>=0;){const ze=Ne;let Ke=Ne-1;Ke<0&&(Ke=Le.length-1);for(let Ue=0,ot=p+M*2;Ue<ot;Ue++){const $e=Se*Ue,ut=Se*(Ue+1),W=X+ze+$e,O=X+Ke+$e,ue=X+Ke+ut,Te=X+ze+ut;Lt(W,O,ue,Te)}}}function it(Le,X,Ne){f.push(Le),f.push(X),f.push(Ne)}function st(Le,X,Ne){on(Le),on(X),on(Ne);const ze=i.length/3,Ke=C.generateTopUV(n,i,ze-3,ze-2,ze-1);yt(Ke[0]),yt(Ke[1]),yt(Ke[2])}function Lt(Le,X,Ne,ze){on(Le),on(X),on(ze),on(X),on(Ne),on(ze);const Ke=i.length/3,Ue=C.generateSideWallUV(n,i,Ke-6,Ke-3,Ke-2,Ke-1);yt(Ue[0]),yt(Ue[1]),yt(Ue[3]),yt(Ue[1]),yt(Ue[2]),yt(Ue[3])}function on(Le){i.push(f[Le*3+0]),i.push(f[Le*3+1]),i.push(f[Le*3+2])}function yt(Le){s.push(Le.x),s.push(Le.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return n2(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,l=e.shapes.length;s<l;s++){const c=t[e.shapes[s]];n.push(c)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new ag[i.type]().fromJSON(i)),new Lg(n,e.options)}}const t2={generateTopUV:function(r,e,t,n,i){const s=e[t*3],l=e[t*3+1],c=e[n*3],f=e[n*3+1],m=e[i*3],p=e[i*3+1];return[new Ce(s,l),new Ce(c,f),new Ce(m,p)]},generateSideWallUV:function(r,e,t,n,i,s){const l=e[t*3],c=e[t*3+1],f=e[t*3+2],m=e[n*3],p=e[n*3+1],g=e[n*3+2],x=e[i*3],_=e[i*3+1],S=e[i*3+2],T=e[s*3],M=e[s*3+1],w=e[s*3+2];return Math.abs(c-p)<Math.abs(l-m)?[new Ce(l,1-f),new Ce(m,1-g),new Ce(x,1-S),new Ce(T,1-w)]:[new Ce(c,1-f),new Ce(p,1-g),new Ce(_,1-S),new Ce(M,1-w)]}};function n2(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ng extends cl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ng(e.radius,e.detail)}}class Dg extends Jt{constructor(e=[new Ce(0,-.5),new Ce(.5,0),new Ce(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=jt(i,0,Math.PI*2);const s=[],l=[],c=[],f=[],m=[],p=1/t,g=new Y,x=new Ce,_=new Y,S=new Y,T=new Y;let M=0,w=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:M=e[C+1].x-e[C].x,w=e[C+1].y-e[C].y,_.x=w*1,_.y=-M,_.z=w*0,T.copy(_),_.normalize(),f.push(_.x,_.y,_.z);break;case e.length-1:f.push(T.x,T.y,T.z);break;default:M=e[C+1].x-e[C].x,w=e[C+1].y-e[C].y,_.x=w*1,_.y=-M,_.z=w*0,S.copy(_),_.x+=T.x,_.y+=T.y,_.z+=T.z,_.normalize(),f.push(_.x,_.y,_.z),T.copy(S)}for(let C=0;C<=t;C++){const I=n+C*p*i,L=Math.sin(I),F=Math.cos(I);for(let N=0;N<=e.length-1;N++){g.x=e[N].x*L,g.y=e[N].y,g.z=e[N].x*F,l.push(g.x,g.y,g.z),x.x=C/t,x.y=N/(e.length-1),c.push(x.x,x.y);const z=f[3*N+0]*L,G=f[3*N+1],D=f[3*N+0]*F;m.push(z,G,D)}}for(let C=0;C<t;C++)for(let I=0;I<e.length-1;I++){const L=I+C*e.length,F=L,N=L+e.length,z=L+e.length+1,G=L+1;s.push(F,N,G),s.push(z,G,N)}this.setIndex(s),this.setAttribute("position",new Et(l,3)),this.setAttribute("uv",new Et(c,2)),this.setAttribute("normal",new Et(m,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dg(e.points,e.segments,e.phiStart,e.phiLength)}}class bf extends cl{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bf(e.radius,e.detail)}}class Tc extends Jt{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,l=t/2,c=Math.floor(n),f=Math.floor(i),m=c+1,p=f+1,g=e/c,x=t/f,_=[],S=[],T=[],M=[];for(let w=0;w<p;w++){const C=w*x-l;for(let I=0;I<m;I++){const L=I*g-s;S.push(L,-C,0),T.push(0,0,1),M.push(I/c),M.push(1-w/f)}}for(let w=0;w<f;w++)for(let C=0;C<c;C++){const I=C+m*w,L=C+m*(w+1),F=C+1+m*(w+1),N=C+1+m*w;_.push(I,L,N),_.push(L,F,N)}this.setIndex(_),this.setAttribute("position",new Et(S,3)),this.setAttribute("normal",new Et(T,3)),this.setAttribute("uv",new Et(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tc(e.width,e.height,e.widthSegments,e.heightSegments)}}class Og extends Jt{constructor(e=.5,t=1,n=32,i=1,s=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:l},n=Math.max(3,n),i=Math.max(1,i);const c=[],f=[],m=[],p=[];let g=e;const x=(t-e)/i,_=new Y,S=new Ce;for(let T=0;T<=i;T++){for(let M=0;M<=n;M++){const w=s+M/n*l;_.x=g*Math.cos(w),_.y=g*Math.sin(w),f.push(_.x,_.y,_.z),m.push(0,0,1),S.x=(_.x/t+1)/2,S.y=(_.y/t+1)/2,p.push(S.x,S.y)}g+=x}for(let T=0;T<i;T++){const M=T*(n+1);for(let w=0;w<n;w++){const C=w+M,I=C,L=C+n+1,F=C+n+2,N=C+1;c.push(I,L,N),c.push(L,F,N)}}this.setIndex(c),this.setAttribute("position",new Et(f,3)),this.setAttribute("normal",new Et(m,3)),this.setAttribute("uv",new Et(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Og(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ug extends Jt{constructor(e=new Mh([new Ce(0,.5),new Ce(-.5,-.5),new Ce(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],l=[];let c=0,f=0;if(Array.isArray(e)===!1)m(e);else for(let p=0;p<e.length;p++)m(e[p]),this.addGroup(c,f,p),c+=f,f=0;this.setIndex(n),this.setAttribute("position",new Et(i,3)),this.setAttribute("normal",new Et(s,3)),this.setAttribute("uv",new Et(l,2));function m(p){const g=i.length/3,x=p.extractPoints(t);let _=x.shape;const S=x.holes;Yr.isClockWise(_)===!1&&(_=_.reverse());for(let M=0,w=S.length;M<w;M++){const C=S[M];Yr.isClockWise(C)===!0&&(S[M]=C.reverse())}const T=Yr.triangulateShape(_,S);for(let M=0,w=S.length;M<w;M++){const C=S[M];_=_.concat(C)}for(let M=0,w=_.length;M<w;M++){const C=_[M];i.push(C.x,C.y,0),s.push(0,0,1),l.push(C.x,C.y)}for(let M=0,w=T.length;M<w;M++){const C=T[M],I=C[0]+g,L=C[1]+g,F=C[2]+g;n.push(I,L,F),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return i2(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const l=t[e.shapes[i]];n.push(l)}return new Ug(n,e.curveSegments)}}function i2(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class wf extends Jt{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const f=Math.min(l+c,Math.PI);let m=0;const p=[],g=new Y,x=new Y,_=[],S=[],T=[],M=[];for(let w=0;w<=n;w++){const C=[],I=w/n;let L=0;w===0&&l===0?L=.5/t:w===n&&f===Math.PI&&(L=-.5/t);for(let F=0;F<=t;F++){const N=F/t;g.x=-e*Math.cos(i+N*s)*Math.sin(l+I*c),g.y=e*Math.cos(l+I*c),g.z=e*Math.sin(i+N*s)*Math.sin(l+I*c),S.push(g.x,g.y,g.z),x.copy(g).normalize(),T.push(x.x,x.y,x.z),M.push(N+L,1-I),C.push(m++)}p.push(C)}for(let w=0;w<n;w++)for(let C=0;C<t;C++){const I=p[w][C+1],L=p[w][C],F=p[w+1][C],N=p[w+1][C+1];(w!==0||l>0)&&_.push(I,L,N),(w!==n-1||f<Math.PI)&&_.push(L,F,N)}this.setIndex(_),this.setAttribute("position",new Et(S,3)),this.setAttribute("normal",new Et(T,3)),this.setAttribute("uv",new Et(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Fg extends cl{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fg(e.radius,e.detail)}}class Bg extends Jt{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const l=[],c=[],f=[],m=[],p=new Y,g=new Y,x=new Y;for(let _=0;_<=n;_++)for(let S=0;S<=i;S++){const T=S/i*s,M=_/n*Math.PI*2;g.x=(e+t*Math.cos(M))*Math.cos(T),g.y=(e+t*Math.cos(M))*Math.sin(T),g.z=t*Math.sin(M),c.push(g.x,g.y,g.z),p.x=e*Math.cos(T),p.y=e*Math.sin(T),x.subVectors(g,p).normalize(),f.push(x.x,x.y,x.z),m.push(S/i),m.push(_/n)}for(let _=1;_<=n;_++)for(let S=1;S<=i;S++){const T=(i+1)*_+S-1,M=(i+1)*(_-1)+S-1,w=(i+1)*(_-1)+S,C=(i+1)*_+S;l.push(T,M,C),l.push(M,w,C)}this.setIndex(l),this.setAttribute("position",new Et(c,3)),this.setAttribute("normal",new Et(f,3)),this.setAttribute("uv",new Et(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zg extends Jt{constructor(e=1,t=.4,n=64,i=8,s=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:l},n=Math.floor(n),i=Math.floor(i);const c=[],f=[],m=[],p=[],g=new Y,x=new Y,_=new Y,S=new Y,T=new Y,M=new Y,w=new Y;for(let I=0;I<=n;++I){const L=I/n*s*Math.PI*2;C(L,s,l,e,_),C(L+.01,s,l,e,S),M.subVectors(S,_),w.addVectors(S,_),T.crossVectors(M,w),w.crossVectors(T,M),T.normalize(),w.normalize();for(let F=0;F<=i;++F){const N=F/i*Math.PI*2,z=-t*Math.cos(N),G=t*Math.sin(N);g.x=_.x+(z*w.x+G*T.x),g.y=_.y+(z*w.y+G*T.y),g.z=_.z+(z*w.z+G*T.z),f.push(g.x,g.y,g.z),x.subVectors(g,_).normalize(),m.push(x.x,x.y,x.z),p.push(I/n),p.push(F/i)}}for(let I=1;I<=n;I++)for(let L=1;L<=i;L++){const F=(i+1)*(I-1)+(L-1),N=(i+1)*I+(L-1),z=(i+1)*I+L,G=(i+1)*(I-1)+L;c.push(F,N,G),c.push(N,z,G)}this.setIndex(c),this.setAttribute("position",new Et(f,3)),this.setAttribute("normal",new Et(m,3)),this.setAttribute("uv",new Et(p,2));function C(I,L,F,N,z){const G=Math.cos(I),D=Math.sin(I),P=F/L*I,V=Math.cos(P);z.x=N*(2+V)*.5*G,z.y=N*(2+V)*D*.5,z.z=N*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zg(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class jg extends Jt{constructor(e=new y0(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const l=e.computeFrenetFrames(t,s);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new Y,f=new Y,m=new Ce;let p=new Y;const g=[],x=[],_=[],S=[];T(),this.setIndex(S),this.setAttribute("position",new Et(g,3)),this.setAttribute("normal",new Et(x,3)),this.setAttribute("uv",new Et(_,2));function T(){for(let I=0;I<t;I++)M(I);M(s===!1?t:0),C(),w()}function M(I){p=e.getPointAt(I/t,p);const L=l.normals[I],F=l.binormals[I];for(let N=0;N<=i;N++){const z=N/i*Math.PI*2,G=Math.sin(z),D=-Math.cos(z);f.x=D*L.x+G*F.x,f.y=D*L.y+G*F.y,f.z=D*L.z+G*F.z,f.normalize(),x.push(f.x,f.y,f.z),c.x=p.x+n*f.x,c.y=p.y+n*f.y,c.z=p.z+n*f.z,g.push(c.x,c.y,c.z)}}function w(){for(let I=1;I<=t;I++)for(let L=1;L<=i;L++){const F=(i+1)*(I-1)+(L-1),N=(i+1)*I+(L-1),z=(i+1)*I+L,G=(i+1)*(I-1)+L;S.push(F,N,G),S.push(N,z,G)}}function C(){for(let I=0;I<=t;I++)for(let L=0;L<=i;L++)m.x=I/t,m.y=L/i,_.push(m.x,m.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new jg(new ag[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class z1 extends Jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new Y,s=new Y;if(e.index!==null){const l=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let m=0,p=f.length;m<p;++m){const g=f[m],x=g.start,_=g.count;for(let S=x,T=x+_;S<T;S+=3)for(let M=0;M<3;M++){const w=c.getX(S+M),C=c.getX(S+(M+1)%3);i.fromBufferAttribute(l,w),s.fromBufferAttribute(l,C),h_(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const l=e.attributes.position;for(let c=0,f=l.count/3;c<f;c++)for(let m=0;m<3;m++){const p=3*c+m,g=3*c+(m+1)%3;i.fromBufferAttribute(l,p),s.fromBufferAttribute(l,g),h_(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Et(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function h_(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var u_=Object.freeze({__proto__:null,BoxGeometry:Ih,CapsuleGeometry:Cg,CircleGeometry:Ig,ConeGeometry:_f,CylinderGeometry:xf,DodecahedronGeometry:Rg,EdgesGeometry:I1,ExtrudeGeometry:Lg,IcosahedronGeometry:Ng,LatheGeometry:Dg,OctahedronGeometry:bf,PlaneGeometry:Tc,PolyhedronGeometry:cl,RingGeometry:Og,ShapeGeometry:Ug,SphereGeometry:wf,TetrahedronGeometry:Fg,TorusGeometry:Bg,TorusKnotGeometry:zg,TubeGeometry:jg,WireframeGeometry:z1});class j1 extends na{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class V1 extends vr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _0 extends na{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new xt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class H1 extends _0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class G1 extends na{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xt(16777215),this.specular=new xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tr,this.combine=pf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class W1 extends na{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class X1 extends na{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Y1 extends na{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tr,this.combine=pf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class b0 extends na{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=n1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class w0 extends na{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class q1 extends na{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hl,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class K1 extends xa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function _h(r,e){return!r||r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function Z1(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function J1(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function By(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,l=0;l!==n;++s){const c=t[s]*e;for(let f=0;f!==e;++f)i[l++]=r[c+f]}return i}function S0(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let l=s[n];if(l!==void 0)if(Array.isArray(l))do l=s[n],l!==void 0&&(e.push(s.time),t.push(...l)),s=r[i++];while(s!==void 0);else if(l.toArray!==void 0)do l=s[n],l!==void 0&&(e.push(s.time),l.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do l=s[n],l!==void 0&&(e.push(s.time),t.push(l)),s=r[i++];while(s!==void 0)}function a2(r,e,t,n,i=30){const s=r.clone();s.name=e;const l=[];for(let f=0;f<s.tracks.length;++f){const m=s.tracks[f],p=m.getValueSize(),g=[],x=[];for(let _=0;_<m.times.length;++_){const S=m.times[_]*i;if(!(S<t||S>=n)){g.push(m.times[_]);for(let T=0;T<p;++T)x.push(m.values[_*p+T])}}g.length!==0&&(m.times=_h(g,m.times.constructor),m.values=_h(x,m.values.constructor),l.push(m))}s.tracks=l;let c=1/0;for(let f=0;f<s.tracks.length;++f)c>s.tracks[f].times[0]&&(c=s.tracks[f].times[0]);for(let f=0;f<s.tracks.length;++f)s.tracks[f].shift(-1*c);return s.resetDuration(),s}function r2(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let l=0;l<i;++l){const c=t.tracks[l],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const m=r.tracks.find(function(w){return w.name===c.name&&w.ValueTypeName===f});if(m===void 0)continue;let p=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let x=0;const _=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=_/3);const S=c.times.length-1;let T;if(s<=c.times[0]){const w=p,C=g-p;T=c.values.slice(w,C)}else if(s>=c.times[S]){const w=S*g+p,C=w+g-p;T=c.values.slice(w,C)}else{const w=c.createInterpolant(),C=p,I=g-p;w.evaluate(s),T=w.resultBuffer.slice(C,I)}f==="quaternion"&&new ea().fromArray(T).normalize().conjugate().toArray(T);const M=m.times.length;for(let w=0;w<M;++w){const C=w*_+x;if(f==="quaternion")ea.multiplyQuaternionsFlat(m.values,C,T,0,m.values,C);else{const I=_-x*2;for(let L=0;L<I;++L)m.values[C+L]-=T[L]}}}return r.blendMode=i0,r}class s2{static convertArray(e,t){return _h(e,t)}static isTypedArray(e){return Z1(e)}static getKeyframeOrder(e){return J1(e)}static sortedArray(e,t,n){return By(e,t,n)}static flattenJSON(e,t,n,i){S0(e,t,n,i)}static subclip(e,t,n,i,s=30){return a2(e,t,n,i,s)}static makeClipAdditive(e,t=0,n=e,i=30){return r2(e,t,n,i)}}class Sf{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let l;n:{i:if(!(e<i)){for(let c=n+2;;){if(i===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(s=i,i=t[++n],e<i)break t}l=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(n=2,s=c);for(let f=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(i=s,s=t[--n-1],e>=s)break t}l=n,n=0;break n}break e}for(;n<l;){const c=n+l>>>1;e<t[c]?l=c:n=c+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let l=0;l!==i;++l)t[l]=n[s+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Q1 extends Sf{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yh,endingEnd:yh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,l=e+1,c=i[s],f=i[l];if(c===void 0)switch(this.getSettings_().endingStart){case xh:s=e,c=2*t-n;break;case nf:s=i.length-2,c=t+i[s]-i[s+1];break;default:s=e,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case xh:l=e,f=2*n-t;break;case nf:l=1,f=n+i[1]-i[0];break;default:l=e-1,f=t}const m=(n-t)*.5,p=this.valueSize;this._weightPrev=m/(t-c),this._weightNext=m/(f-n),this._offsetPrev=s*p,this._offsetNext=l*p}interpolate_(e,t,n,i){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=e*c,m=f-c,p=this._offsetPrev,g=this._offsetNext,x=this._weightPrev,_=this._weightNext,S=(n-t)/(i-t),T=S*S,M=T*S,w=-x*M+2*x*T-x*S,C=(1+x)*M+(-1.5-2*x)*T+(-.5+x)*S+1,I=(-1-_)*M+(1.5+_)*T+.5*S,L=_*M-_*T;for(let F=0;F!==c;++F)s[F]=w*l[p+F]+C*l[m+F]+I*l[f+F]+L*l[g+F];return s}}class M0 extends Sf{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=e*c,m=f-c,p=(n-t)/(i-t),g=1-p;for(let x=0;x!==c;++x)s[x]=l[m+x]*g+l[f+x]*p;return s}}class $1 extends Sf{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class yr{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_h(t,this.TimeBufferType),this.values=_h(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:_h(e.times,Array),values:_h(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new $1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new M0(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Q1(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tf:t=this.InterpolantFactoryMethodDiscrete;break;case tg:t=this.InterpolantFactoryMethodLinear;break;case mp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return ft("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tf;case this.InterpolantFactoryMethodLinear:return tg;case this.InterpolantFactoryMethodSmooth:return mp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,l=i-1;for(;s!==i&&n[s]<e;)++s;for(;l!==-1&&n[l]>t;)--l;if(++l,s!==0||l!==i){s>=l&&(l=Math.max(l,1),s=l-1);const c=this.getValueSize();this.times=n.slice(s,l),this.values=this.values.slice(s*c,l*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Wt("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(Wt("KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==s;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){Wt("KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(l!==null&&l>f){Wt("KeyframeTrack: Out of order keys.",this,c,f,l),e=!1;break}l=f}if(i!==void 0&&Z1(i))for(let c=0,f=i.length;c!==f;++c){const m=i[c];if(isNaN(m)){Wt("KeyframeTrack: Value is not a valid number.",this,c,m),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===mp,s=e.length-1;let l=1;for(let c=1;c<s;++c){let f=!1;const m=e[c],p=e[c+1];if(m!==p&&(c!==1||m!==e[0]))if(i)f=!0;else{const g=c*n,x=g-n,_=g+n;for(let S=0;S!==n;++S){const T=t[g+S];if(T!==t[x+S]||T!==t[_+S]){f=!0;break}}}if(f){if(c!==l){e[l]=e[c];const g=c*n,x=l*n;for(let _=0;_!==n;++_)t[x+_]=t[g+_]}++l}}if(s>0){e[l]=e[s];for(let c=s*n,f=l*n,m=0;m!==n;++m)t[f+m]=t[c+m];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}yr.prototype.ValueTypeName="";yr.prototype.TimeBufferType=Float32Array;yr.prototype.ValueBufferType=Float32Array;yr.prototype.DefaultInterpolation=tg;class Rh extends yr{constructor(e,t,n){super(e,t,n)}}Rh.prototype.ValueTypeName="bool";Rh.prototype.ValueBufferType=Array;Rh.prototype.DefaultInterpolation=tf;Rh.prototype.InterpolantFactoryMethodLinear=void 0;Rh.prototype.InterpolantFactoryMethodSmooth=void 0;class k0 extends yr{constructor(e,t,n,i){super(e,t,n,i)}}k0.prototype.ValueTypeName="color";class cf extends yr{constructor(e,t,n,i){super(e,t,n,i)}}cf.prototype.ValueTypeName="number";class ew extends Sf{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,f=(n-t)/(i-t);let m=e*c;for(let p=m+c;m!==p;m+=4)ea.slerpFlat(s,0,l,m-c,l,m,f);return s}}class Mf extends yr{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new ew(this.times,this.values,this.getValueSize(),e)}}Mf.prototype.ValueTypeName="quaternion";Mf.prototype.InterpolantFactoryMethodSmooth=void 0;class Ph extends yr{constructor(e,t,n){super(e,t,n)}}Ph.prototype.ValueTypeName="string";Ph.prototype.ValueBufferType=Array;Ph.prototype.DefaultInterpolation=tf;Ph.prototype.InterpolantFactoryMethodLinear=void 0;Ph.prototype.InterpolantFactoryMethodSmooth=void 0;class df extends yr{constructor(e,t,n,i){super(e,t,n,i)}}df.prototype.ValueTypeName="vector";class ff{constructor(e="",t=-1,n=[],i=xg){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=er(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let l=0,c=n.length;l!==c;++l)t.push(l2(n[l]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,l=n.length;s!==l;++s)t.push(yr.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,l=[];for(let c=0;c<s;c++){let f=[],m=[];f.push((c+s-1)%s,c,(c+1)%s),m.push(0,1,0);const p=J1(f);f=By(f,1,p),m=By(m,1,p),!i&&f[0]===0&&(f.push(s),m.push(m[0])),l.push(new cf(".morphTargetInfluences["+t[c].name+"]",f,m).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const m=e[c],p=m.name.match(s);if(p&&p.length>1){const g=p[1];let x=i[g];x||(i[g]=x=[]),x.push(m)}}const l=[];for(const c in i)l.push(this.CreateFromMorphTargetSequence(c,i[c],t,n));return l}static parseAnimation(e,t){if(ft("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Wt("AnimationClip: No animation in JSONLoader data."),null;const n=function(g,x,_,S,T){if(_.length!==0){const M=[],w=[];S0(_,M,w,S),M.length!==0&&T.push(new g(x,M,w))}},i=[],s=e.name||"default",l=e.fps||30,c=e.blendMode;let f=e.length||-1;const m=e.hierarchy||[];for(let g=0;g<m.length;g++){const x=m[g].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const _={};let S;for(S=0;S<x.length;S++)if(x[S].morphTargets)for(let T=0;T<x[S].morphTargets.length;T++)_[x[S].morphTargets[T]]=-1;for(const T in _){const M=[],w=[];for(let C=0;C!==x[S].morphTargets.length;++C){const I=x[S];M.push(I.time),w.push(I.morphTarget===T?1:0)}i.push(new cf(".morphTargetInfluence["+T+"]",M,w))}f=_.length*l}else{const _=".bones["+t[g].name+"]";n(df,_+".position",x,"pos",i),n(Mf,_+".quaternion",x,"rot",i),n(df,_+".scale",x,"scl",i)}}return i.length===0?null:new this(s,f,i,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function o2(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cf;case"vector":case"vector2":case"vector3":case"vector4":return df;case"color":return k0;case"quaternion":return Mf;case"bool":case"boolean":return Rh;case"string":return Ph}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function l2(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=o2(r.type);if(r.times===void 0){const t=[],n=[];S0(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const ps={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class T0{constructor(e,t,n){const i=this;let s=!1,l=0,c=0,f;const m=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(p){c++,s===!1&&i.onStart!==void 0&&i.onStart(p,l,c),s=!0},this.itemEnd=function(p){l++,i.onProgress!==void 0&&i.onProgress(p,l,c),l===c&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return f?f(p):p},this.setURLModifier=function(p){return f=p,this},this.addHandler=function(p,g){return m.push(p,g),this},this.removeHandler=function(p){const g=m.indexOf(p);return g!==-1&&m.splice(g,2),this},this.getHandler=function(p){for(let g=0,x=m.length;g<x;g+=2){const _=m[g],S=m[g+1];if(_.global&&(_.lastIndex=0),_.test(p))return S}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const tw=new T0;class Ua{constructor(e){this.manager=e!==void 0?e:tw,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Ua.DEFAULT_MATERIAL_NAME="__DEFAULT";const io={};class h2 extends Error{constructor(e,t){super(e),this.response=t}}class fo extends Ua{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ps.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(io[e]!==void 0){io[e].push({onLoad:t,onProgress:n,onError:i});return}io[e]=[],io[e].push({onLoad:t,onProgress:n,onError:i});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,f=this.responseType;fetch(l).then(m=>{if(m.status===200||m.status===0){if(m.status===0&&ft("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||m.body===void 0||m.body.getReader===void 0)return m;const p=io[e],g=m.body.getReader(),x=m.headers.get("X-File-Size")||m.headers.get("Content-Length"),_=x?parseInt(x):0,S=_!==0;let T=0;const M=new ReadableStream({start(w){C();function C(){g.read().then(({done:I,value:L})=>{if(I)w.close();else{T+=L.byteLength;const F=new ProgressEvent("progress",{lengthComputable:S,loaded:T,total:_});for(let N=0,z=p.length;N<z;N++){const G=p[N];G.onProgress&&G.onProgress(F)}w.enqueue(L),C()}},I=>{w.error(I)})}}});return new Response(M)}else throw new h2(`fetch for "${m.url}" responded with ${m.status}: ${m.statusText}`,m)}).then(m=>{switch(f){case"arraybuffer":return m.arrayBuffer();case"blob":return m.blob();case"document":return m.text().then(p=>new DOMParser().parseFromString(p,c));case"json":return m.json();default:if(c==="")return m.text();{const g=/charset="?([^;"\s]*)"?/i.exec(c),x=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(x);return m.arrayBuffer().then(S=>_.decode(S))}}}).then(m=>{ps.add(`file:${e}`,m);const p=io[e];delete io[e];for(let g=0,x=p.length;g<x;g++){const _=p[g];_.onLoad&&_.onLoad(m)}}).catch(m=>{const p=io[e];if(p===void 0)throw this.manager.itemError(e),m;delete io[e];for(let g=0,x=p.length;g<x;g++){const _=p[g];_.onError&&_.onError(m)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class u2 extends Ua{constructor(e){super(e)}load(e,t,n,i){const s=this,l=new fo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){i?i(f):Wt(f),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=ff.parse(e[n]);t.push(i)}return t}}class c2 extends Ua{constructor(e){super(e)}load(e,t,n,i){const s=this,l=[],c=new Eg,f=new fo(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(s.withCredentials);let m=0;function p(g){f.load(e[g],function(x){const _=s.parse(x,!0);l[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},m+=1,m===6&&(_.mipmapCount===1&&(c.minFilter=Wn),c.image=l,c.format=_.format,c.needsUpdate=!0,t&&t(c))},n,i)}if(Array.isArray(e))for(let g=0,x=e.length;g<x;++g)p(g);else f.load(e,function(g){const x=s.parse(g,!0);if(x.isCubemap){const _=x.mipmaps.length/x.mipmapCount;for(let S=0;S<_;S++){l[S]={mipmaps:[]};for(let T=0;T<x.mipmapCount;T++)l[S].mipmaps.push(x.mipmaps[S*x.mipmapCount+T]),l[S].format=x.format,l[S].width=x.width,l[S].height=x.height}c.image=l}else c.image.width=x.width,c.image.height=x.height,c.mipmaps=x.mipmaps;x.mipmapCount===1&&(c.minFilter=Wn),c.format=x.format,c.needsUpdate=!0,t&&t(c)},n,i);return c}}const ec=new WeakMap;class mf extends Ua{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,l=ps.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0);else{let g=ec.get(l);g===void 0&&(g=[],ec.set(l,g)),g.push({onLoad:t,onError:i})}return l}const c=sf("img");function f(){p(),t&&t(this);const g=ec.get(this)||[];for(let x=0;x<g.length;x++){const _=g[x];_.onLoad&&_.onLoad(this)}ec.delete(this),s.manager.itemEnd(e)}function m(g){p(),i&&i(g),ps.remove(`image:${e}`);const x=ec.get(this)||[];for(let _=0;_<x.length;_++){const S=x[_];S.onError&&S.onError(g)}ec.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){c.removeEventListener("load",f,!1),c.removeEventListener("error",m,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",m,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),ps.add(`image:${e}`,c),s.manager.itemStart(e),c.src=e,c}}class d2 extends Ua{constructor(e){super(e)}load(e,t,n,i){const s=new yf;s.colorSpace=Na;const l=new mf(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function f(m){l.load(e[m],function(p){s.images[m]=p,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let m=0;m<e.length;++m)f(m);return s}}class f2 extends Ua{constructor(e){super(e)}load(e,t,n,i){const s=this,l=new qr,c=new fo(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(f){let m;try{m=s.parse(f)}catch(p){if(i!==void 0)i(p);else{p(p);return}}m.image!==void 0?l.image=m.image:m.data!==void 0&&(l.image.width=m.width,l.image.height=m.height,l.image.data=m.data),l.wrapS=m.wrapS!==void 0?m.wrapS:Oa,l.wrapT=m.wrapT!==void 0?m.wrapT:Oa,l.magFilter=m.magFilter!==void 0?m.magFilter:Wn,l.minFilter=m.minFilter!==void 0?m.minFilter:Wn,l.anisotropy=m.anisotropy!==void 0?m.anisotropy:1,m.colorSpace!==void 0&&(l.colorSpace=m.colorSpace),m.flipY!==void 0&&(l.flipY=m.flipY),m.format!==void 0&&(l.format=m.format),m.type!==void 0&&(l.type=m.type),m.mipmaps!==void 0&&(l.mipmaps=m.mipmaps,l.minFilter=ms),m.mipmapCount===1&&(l.minFilter=Wn),m.generateMipmaps!==void 0&&(l.generateMipmaps=m.generateMipmaps),l.needsUpdate=!0,t&&t(l,m)},n,i),l}}class m2 extends Ua{constructor(e){super(e)}load(e,t,n,i){const s=new Qn,l=new mf(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class dl extends yn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new xt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class nw extends dl{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ny=new Vt,c_=new Y,d_=new Y;class E0{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.mapType=gr,this.map=null,this.mapPass=null,this.matrix=new Vt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kc,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new vn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;c_.setFromMatrixPosition(e.matrixWorld),t.position.copy(c_),d_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(d_),t.updateMatrixWorld(),ny.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ny,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ny)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class p2 extends E0{constructor(){super(new ii(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=xc*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class iw extends dl{constructor(e,t,n=0,i=Math.PI/3,s=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.distance=n,this.angle=i,this.penumbra=s,this.decay=l,this.map=null,this.shadow=new p2}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const f_=new Vt,Dd=new Y,iy=new Y;class g2 extends E0{constructor(){super(new ii(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ce(4,2),this._viewportCount=6,this._viewports=[new vn(2,1,1,1),new vn(0,1,1,1),new vn(3,1,1,1),new vn(1,1,1,1),new vn(3,0,1,1),new vn(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Dd.setFromMatrixPosition(e.matrixWorld),n.position.copy(Dd),iy.copy(n.position),iy.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(iy),n.updateMatrixWorld(),i.makeTranslation(-Dd.x,-Dd.y,-Dd.z),f_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(f_,n.coordinateSystem,n.reversedDepth)}}class aw extends dl{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new g2}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class al extends vf{constructor(e=-1,t=1,n=1,i=-1,s=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,l=n+e,c=i+t,f=i-t;if(this.view!==null&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=m*this.view.offsetX,l=s+m*this.view.width,c-=p*this.view.offsetY,f=c-p*this.view.height}this.projectionMatrix.makeOrthographic(s,l,c,f,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class v2 extends E0{constructor(){super(new al(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class rw extends dl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.shadow=new v2}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class sw extends dl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ow extends dl{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class lw{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*i),t.addScaledVector(l[2],.488603*s),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],1.092548*(n*i)),t.addScaledVector(l[5],1.092548*(i*s)),t.addScaledVector(l[6],.315392*(3*s*s-1)),t.addScaledVector(l[7],1.092548*(n*s)),t.addScaledVector(l[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*i),t.addScaledVector(l[2],2*.511664*s),t.addScaledVector(l[3],2*.511664*n),t.addScaledVector(l[4],2*.429043*n*i),t.addScaledVector(l[5],2*.429043*i*s),t.addScaledVector(l[6],.743125*s*s-.247708),t.addScaledVector(l[7],2*.429043*n*s),t.addScaledVector(l[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class hw extends dl{constructor(e=new lw,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Vg extends Ua{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,l=new fo(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){i?i(f):Wt(f),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&ft("MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new xt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const l=e.uniforms[s];switch(i.uniforms[s]={},l.type){case"t":i.uniforms[s].value=n(l.value);break;case"c":i.uniforms[s].value=new xt().setHex(l.value);break;case"v2":i.uniforms[s].value=new Ce().fromArray(l.value);break;case"v3":i.uniforms[s].value=new Y().fromArray(l.value);break;case"v4":i.uniforms[s].value=new vn().fromArray(l.value);break;case"m3":i.uniforms[s].value=new Zt().fromArray(l.value);break;case"m4":i.uniforms[s].value=new Vt().fromArray(l.value);break;default:i.uniforms[s].value=l.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ce().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ce().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Vg.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:j1,SpriteMaterial:u0,RawShaderMaterial:V1,ShaderMaterial:vr,PointsMaterial:d0,MeshPhysicalMaterial:H1,MeshStandardMaterial:_0,MeshPhongMaterial:G1,MeshToonMaterial:W1,MeshNormalMaterial:X1,MeshLambertMaterial:Y1,MeshDepthMaterial:b0,MeshDistanceMaterial:w0,MeshBasicMaterial:ul,MeshMatcapMaterial:q1,LineDashedMaterial:K1,LineBasicMaterial:xa,Material:na};return new t[e]}}class zy{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class uw extends Jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class cw extends Ua{constructor(e){super(e)}load(e,t,n,i){const s=this,l=new fo(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){i?i(f):Wt(f),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(_,S){if(t[S]!==void 0)return t[S];const M=_.interleavedBuffers[S],w=s(_,M.buffer),C=hc(M.type,w),I=new Mg(C,M.stride);return I.uuid=M.uuid,t[S]=I,I}function s(_,S){if(n[S]!==void 0)return n[S];const M=_.arrayBuffers[S],w=new Uint32Array(M).buffer;return n[S]=w,w}const l=e.isInstancedBufferGeometry?new uw:new Jt,c=e.data.index;if(c!==void 0){const _=hc(c.type,c.array);l.setIndex(new Cn(_,1))}const f=e.data.attributes;for(const _ in f){const S=f[_];let T;if(S.isInterleavedBufferAttribute){const M=i(e.data,S.data);T=new Eh(M,S.itemSize,S.offset,S.normalized)}else{const M=hc(S.type,S.array),w=S.isInstancedBufferAttribute?bc:Cn;T=new w(M,S.itemSize,S.normalized)}S.name!==void 0&&(T.name=S.name),S.usage!==void 0&&T.setUsage(S.usage),l.setAttribute(_,T)}const m=e.data.morphAttributes;if(m)for(const _ in m){const S=m[_],T=[];for(let M=0,w=S.length;M<w;M++){const C=S[M];let I;if(C.isInterleavedBufferAttribute){const L=i(e.data,C.data);I=new Eh(L,C.itemSize,C.offset,C.normalized)}else{const L=hc(C.type,C.array);I=new Cn(L,C.itemSize,C.normalized)}C.name!==void 0&&(I.name=C.name),T.push(I)}l.morphAttributes[_]=T}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let _=0,S=g.length;_!==S;++_){const T=g[_];l.addGroup(T.start,T.count,T.materialIndex)}const x=e.data.boundingSphere;return x!==void 0&&(l.boundingSphere=new ji().fromJSON(x)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class y2 extends Ua{constructor(e){super(e)}load(e,t,n,i){const s=this,l=this.path===""?zy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const c=new fo(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let m=null;try{m=JSON.parse(f)}catch(g){i!==void 0&&i(g),g("ObjectLoader: Can't parse "+e+".",g.message);return}const p=m.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),Wt("ObjectLoader: Can't load "+e);return}s.parse(m,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?zy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new fo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const l=await s.loadAsync(e,t),c=JSON.parse(l),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),l=this.parseImages(e.images,function(){t!==void 0&&t(m)}),c=this.parseTextures(e.textures,l),f=this.parseMaterials(e.materials,c),m=this.parseObject(e.object,s,f,c,n),p=this.parseSkeletons(e.skeletons,m);if(this.bindSkeletons(m,p),this.bindLightTargets(m),t!==void 0){let g=!1;for(const x in l)if(l[x].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(m)}return m}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,i,c,l,t),m=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,m),this.bindLightTargets(f),f}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new Mh().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,l=e.length;s<l;s++){const c=new kg().fromJSON(e[s],i);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new cw;for(let s=0,l=e.length;s<l;s++){let c;const f=e[s];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=i.parse(f);break;default:f.type in u_?c=u_[f.type].fromJSON(f,t):ft(`ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),n[f.uuid]=c}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new Vg;s.setTextures(t);for(let l=0,c=e.length;l<c;l++){const f=e[l];n[f.uuid]===void 0&&(n[f.uuid]=s.parse(f)),i[f.uuid]=n[f.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=ff.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function l(f){return n.manager.itemStart(f),s.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const m=f,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m)?m:n.resourcePath+m;return l(p)}else return f.data?{data:hc(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new T0(t);s=new mf(f),s.setCrossOrigin(this.crossOrigin);for(let m=0,p=e.length;m<p;m++){const g=e[m],x=g.url;if(Array.isArray(x)){const _=[];for(let S=0,T=x.length;S<T;S++){const M=x[S],w=c(M);w!==null&&(w instanceof HTMLImageElement?_.push(w):_.push(new qr(w.data,w.width,w.height)))}i[g.uuid]=new nl(_)}else{const _=c(g.url);i[g.uuid]=new nl(_)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(l){if(typeof l=="string"){const c=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await i.loadAsync(f)}else return l.data?{data:hc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){i=new mf(this.manager),i.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const f=e[l],m=f.url;if(Array.isArray(m)){const p=[];for(let g=0,x=m.length;g<x;g++){const _=m[g],S=await s(_);S!==null&&(S instanceof HTMLImageElement?p.push(S):p.push(new qr(S.data,S.width,S.height)))}n[f.uuid]=new nl(p)}else{const p=await s(f.url);n[f.uuid]=new nl(p)}}}return n}parseTextures(e,t){function n(s,l){return typeof s=="number"?s:(ft("ObjectLoader.parseTexture: Constant should be in numeric form.",s),l[s])}const i={};if(e!==void 0)for(let s=0,l=e.length;s<l;s++){const c=e[s];c.image===void 0&&ft('ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&ft("ObjectLoader: Undefined image",c.image);const f=t[c.image],m=f.data;let p;Array.isArray(m)?(p=new yf,m.length===6&&(p.needsUpdate=!0)):(m&&m.data?p=new qr:p=new Qn,m&&(p.needsUpdate=!0)),p.source=f,p.uuid=c.uuid,c.name!==void 0&&(p.name=c.name),c.mapping!==void 0&&(p.mapping=n(c.mapping,x2)),c.channel!==void 0&&(p.channel=c.channel),c.offset!==void 0&&p.offset.fromArray(c.offset),c.repeat!==void 0&&p.repeat.fromArray(c.repeat),c.center!==void 0&&p.center.fromArray(c.center),c.rotation!==void 0&&(p.rotation=c.rotation),c.wrap!==void 0&&(p.wrapS=n(c.wrap[0],m_),p.wrapT=n(c.wrap[1],m_)),c.format!==void 0&&(p.format=c.format),c.internalFormat!==void 0&&(p.internalFormat=c.internalFormat),c.type!==void 0&&(p.type=c.type),c.colorSpace!==void 0&&(p.colorSpace=c.colorSpace),c.minFilter!==void 0&&(p.minFilter=n(c.minFilter,p_)),c.magFilter!==void 0&&(p.magFilter=n(c.magFilter,p_)),c.anisotropy!==void 0&&(p.anisotropy=c.anisotropy),c.flipY!==void 0&&(p.flipY=c.flipY),c.generateMipmaps!==void 0&&(p.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(p.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(p.compareFunction=c.compareFunction),c.userData!==void 0&&(p.userData=c.userData),i[c.uuid]=p}return i}parseObject(e,t,n,i,s){let l;function c(x){return t[x]===void 0&&ft("ObjectLoader: Undefined geometry",x),t[x]}function f(x){if(x!==void 0){if(Array.isArray(x)){const _=[];for(let S=0,T=x.length;S<T;S++){const M=x[S];n[M]===void 0&&ft("ObjectLoader: Undefined material",M),_.push(n[M])}return _}return n[x]===void 0&&ft("ObjectLoader: Undefined material",x),n[x]}}function m(x){return i[x]===void 0&&ft("ObjectLoader: Undefined texture",x),i[x]}let p,g;switch(e.type){case"Scene":l=new h0,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new xt(e.background):l.background=m(e.background)),e.environment!==void 0&&(l.environment=m(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new Sg(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new wg(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new ii(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new al(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new sw(e.color,e.intensity);break;case"DirectionalLight":l=new rw(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new aw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new ow(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new iw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new nw(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new hw().fromJSON(e);break;case"SkinnedMesh":p=c(e.geometry),g=f(e.material),l=new M1(p,g),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":p=c(e.geometry),g=f(e.material),l=new _i(p,g);break;case"InstancedMesh":p=c(e.geometry),g=f(e.material);const x=e.count,_=e.instanceMatrix,S=e.instanceColor;l=new k1(p,g,x),l.instanceMatrix=new bc(new Float32Array(_.array),16),S!==void 0&&(l.instanceColor=new bc(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":p=c(e.geometry),g=f(e.material),l=new T1(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),l.geometry=p,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(T=>{let M=null,w=null;return T.boundingBox!==void 0&&(M=new ta().fromJSON(T.boundingBox)),T.boundingSphere!==void 0&&(w=new ji().fromJSON(T.boundingSphere)),{...T,boundingBox:M,boundingSphere:w}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=m(e.matricesTexture.uuid),l._indirectTexture=m(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=m(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new ji().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new ta().fromJSON(e.boundingBox));break;case"LOD":l=new S1;break;case"Line":l=new ol(c(e.geometry),f(e.material));break;case"LineLoop":l=new E1(c(e.geometry),f(e.material));break;case"LineSegments":l=new xs(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":l=new A1(c(e.geometry),f(e.material));break;case"Sprite":l=new w1(f(e.material));break;case"Group":l=new uc;break;case"Bone":l=new c0;break;default:l=new yn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let _=0;_<x.length;_++)l.add(this.parseObject(x[_],t,n,i,s))}if(e.animations!==void 0){const x=e.animations;for(let _=0;_<x.length;_++){const S=x[_];l.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const x=e.levels;for(let _=0;_<x.length;_++){const S=x[_],T=l.getObjectByProperty("uuid",S.object);T!==void 0&&l.addLevel(T,S.distance,S.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?ft("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new yn}})}}const x2={UVMapping:cg,CubeReflectionMapping:uo,CubeRefractionMapping:rl,EquirectangularReflectionMapping:Jd,EquirectangularRefractionMapping:Qd,CubeUVReflectionMapping:Mc},m_={RepeatWrapping:$d,ClampToEdgeWrapping:Oa,MirroredRepeatWrapping:ef},p_={NearestFilter:zi,NearestMipmapNearestFilter:Zy,NearestMipmapLinearFilter:lc,LinearFilter:Wn,LinearMipmapNearestFilter:Hd,LinearMipmapLinearFilter:ms},ay=new WeakMap;class _2 extends Ua{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ft("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ft("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,l=ps.get(`image-bitmap:${e}`);if(l!==void 0){if(s.manager.itemStart(e),l.then){l.then(m=>{if(ay.has(l)===!0)i&&i(ay.get(l)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(m),s.manager.itemEnd(e),m});return}return setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0),l}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const f=fetch(e,c).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(m){return ps.add(`image-bitmap:${e}`,m),t&&t(m),s.manager.itemEnd(e),m}).catch(function(m){i&&i(m),ay.set(f,m),ps.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});ps.add(`image-bitmap:${e}`,f),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let ep;class A0{static getContext(){return ep===void 0&&(ep=new(window.AudioContext||window.webkitAudioContext)),ep}static setContext(e){ep=e}}class b2 extends Ua{constructor(e){super(e)}load(e,t,n,i){const s=this,l=new fo(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(f){try{const m=f.slice(0);A0.getContext().decodeAudioData(m,function(g){t(g)}).catch(c)}catch(m){c(m)}},n,i);function c(f){i?i(f):Wt(f),s.manager.itemError(e)}}}const g_=new Vt,v_=new Vt,sh=new Vt;class w2{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ii,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ii,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,sh.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,l=t.near*Math.tan(wh*t.fov*.5)/t.zoom;let c,f;v_.elements[12]=-i,g_.elements[12]=i,c=-l*t.aspect+s,f=l*t.aspect+s,sh.elements[0]=2*t.near/(f-c),sh.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(sh),c=-l*t.aspect-s,f=l*t.aspect-s,sh.elements[0]=2*t.near/(f-c),sh.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(sh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(v_),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(g_)}}class dw extends ii{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class C0{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const oh=new Y,ry=new ea,S2=new Y,lh=new Y,hh=new Y;class M2 extends yn{constructor(){super(),this.type="AudioListener",this.context=A0.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new C0}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(oh,ry,S2),lh.set(0,0,-1).applyQuaternion(ry),hh.set(0,1,0).applyQuaternion(ry),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(oh.x,n),t.positionY.linearRampToValueAtTime(oh.y,n),t.positionZ.linearRampToValueAtTime(oh.z,n),t.forwardX.linearRampToValueAtTime(lh.x,n),t.forwardY.linearRampToValueAtTime(lh.y,n),t.forwardZ.linearRampToValueAtTime(lh.z,n),t.upX.linearRampToValueAtTime(hh.x,n),t.upY.linearRampToValueAtTime(hh.y,n),t.upZ.linearRampToValueAtTime(hh.z,n)}else t.setPosition(oh.x,oh.y,oh.z),t.setOrientation(lh.x,lh.y,lh.z,hh.x,hh.y,hh.z)}}class fw extends yn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){ft("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(ft("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){ft("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(ft("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const uh=new Y,y_=new ea,k2=new Y,ch=new Y;class T2 extends fw{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(uh,y_,k2),ch.set(0,0,1).applyQuaternion(y_);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(uh.x,n),t.positionY.linearRampToValueAtTime(uh.y,n),t.positionZ.linearRampToValueAtTime(uh.z,n),t.orientationX.linearRampToValueAtTime(ch.x,n),t.orientationY.linearRampToValueAtTime(ch.y,n),t.orientationZ.linearRampToValueAtTime(ch.z,n)}else t.setPosition(uh.x,uh.y,uh.z),t.setOrientation(ch.x,ch.y,ch.z)}}class E2{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class mw{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,l;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==i;++c)n[s+c]=n[c];l=t}else{l+=t;const c=t/l;this._mixBufferRegion(n,s,0,c,i)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const f=t*this._origIndex;this._mixBufferRegion(n,i,f,1-s,t)}l>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let f=t,m=t+t;f!==m;++f)if(n[f]!==n[f+t]){c.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,l=i;s!==l;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let l=0;l!==s;++l)e[t+l]=e[n+l]}_slerp(e,t,n,i){ea.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const l=this._workIndex*s;ea.multiplyQuaternionsFlat(e,l,e,t,e,n),ea.slerpFlat(e,t,e,t,e,l,i)}_lerp(e,t,n,i,s){const l=1-i;for(let c=0;c!==s;++c){const f=t+c;e[f]=e[f]*l+e[n+c]*i}}_lerpAdditive(e,t,n,i,s){for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]+e[n+l]*i}}}const I0="\\[\\]\\.:\\/",A2=new RegExp("["+I0+"]","g"),R0="[^"+I0+"]",C2="[^"+I0.replace("\\.","")+"]",I2=/((?:WC+[\/:])*)/.source.replace("WC",R0),R2=/(WCOD+)?/.source.replace("WCOD",C2),P2=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",R0),L2=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",R0),N2=new RegExp("^"+I2+R2+P2+L2+"$"),D2=["material","materials","bones","map"];class O2{constructor(e,t,n){const i=n||gn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class gn{constructor(e,t,n){this.path=t,this.parsedPath=n||gn.parseTrackName(t),this.node=gn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new gn.Composite(e,t,n):new gn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(A2,"")}static parseTrackName(e){const t=N2.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);D2.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let l=0;l<s.length;l++){const c=s[l];if(c.name===t||c.uuid===t)return c;const f=n(c.children);if(f)return f}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=gn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){ft("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let m=t.objectIndex;switch(n){case"materials":if(!e.material){Wt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Wt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Wt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===m){m=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Wt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Wt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){Wt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(m!==void 0){if(e[m]===void 0){Wt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[m]}}const l=e[i];if(l===void 0){const m=t.nodeName;Wt("PropertyBinding: Trying to update property for track: "+m+"."+i+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){Wt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Wt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}f=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=s}else l.fromArray!==void 0&&l.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(f=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=i;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}gn.Composite=O2;gn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};gn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};gn.prototype.GetterByBindingType=[gn.prototype._getValue_direct,gn.prototype._getValue_array,gn.prototype._getValue_arrayElement,gn.prototype._getValue_toArray];gn.prototype.SetterByBindingTypeAndVersioning=[[gn.prototype._setValue_direct,gn.prototype._setValue_direct_setNeedsUpdate,gn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_array,gn.prototype._setValue_array_setNeedsUpdate,gn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_arrayElement,gn.prototype._setValue_arrayElement_setNeedsUpdate,gn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gn.prototype._setValue_fromArray,gn.prototype._setValue_fromArray_setNeedsUpdate,gn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class U2{constructor(){this.isAnimationObjectGroup=!0,this.uuid=er(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,l=s.length;let c,f=e.length,m=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const x=arguments[p],_=x.uuid;let S=t[_];if(S===void 0){S=f++,t[_]=S,e.push(x);for(let T=0,M=l;T!==M;++T)s[T].push(new gn(x,n[T],i[T]))}else if(S<m){c=e[S];const T=--m,M=e[T];t[M.uuid]=S,e[S]=M,t[_]=T,e[T]=x;for(let w=0,C=l;w!==C;++w){const I=s[w],L=I[T];let F=I[S];I[S]=L,F===void 0&&(F=new gn(x,n[w],i[w])),I[T]=F}}else e[S]!==c&&Wt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=m}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],m=f.uuid,p=t[m];if(p!==void 0&&p>=s){const g=s++,x=e[g];t[x.uuid]=p,e[p]=x,t[m]=g,e[g]=f;for(let _=0,S=i;_!==S;++_){const T=n[_],M=T[g],w=T[p];T[p]=M,T[g]=w}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,l=e.length;for(let c=0,f=arguments.length;c!==f;++c){const m=arguments[c],p=m.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<s){const x=--s,_=e[x],S=--l,T=e[S];t[_.uuid]=g,e[g]=_,t[T.uuid]=x,e[x]=T,e.pop();for(let M=0,w=i;M!==w;++M){const C=n[M],I=C[x],L=C[S];C[g]=I,C[x]=L,C.pop()}}else{const x=--l,_=e[x];x>0&&(t[_.uuid]=g),e[g]=_,e.pop();for(let S=0,T=i;S!==T;++S){const M=n[S];M[g]=M[x],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const l=this._paths,c=this._parsedPaths,f=this._objects,m=f.length,p=this.nCachedObjects_,g=new Array(m);i=s.length,n[e]=i,l.push(e),c.push(t),s.push(g);for(let x=p,_=f.length;x!==_;++x){const S=f[x];g[x]=new gn(S,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,l=this._bindings,c=l.length-1,f=l[c],m=e[c];t[m]=n,l[n]=f,l.pop(),s[n]=s[c],s.pop(),i[n]=i[c],i.pop()}}}class pw{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,l=s.length,c=new Array(l),f={endingStart:yh,endingEnd:yh};for(let m=0;m!==l;++m){const p=s[m].createInterpolant(null);c[m]=p,p.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=e1,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const i=this._clip.duration,s=e._clip.duration,l=s/i,c=i/s;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=i._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,m=c.sampleValues;return f[0]=s,f[1]=s+n,m[0]=e/l,m[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const f=(e-s)*n;f<0||n===0?t=0:(this._startTime=null,t=n*f)}t*=this._updateTimeScale(e);const l=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,m=this._propertyBindings;switch(this.blendMode){case i0:for(let p=0,g=f.length;p!==g;++p)f[p].evaluate(l),m[p].accumulateAdditive(c);break;case xg:default:for(let p=0,g=f.length;p!==g;++p)f[p].evaluate(l),m[p].accumulate(i,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const l=n===t1;if(e===0)return s===-1?i:l&&(s&1)===1?t-i:i;if(n===$b){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),i>=t||i<0){const c=Math.floor(i/t);i-=t*c,s+=Math.abs(c);const f=this.repetitions-s;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const m=e<0;this._setEndings(m,!m,l)}else this._setEndings(!1,!1,l);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=i;if(l&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=xh,i.endingEnd=xh):(e?i.endingStart=this.zeroSlopeAtStart?xh:yh:i.endingStart=nf,t?i.endingEnd=this.zeroSlopeAtEnd?xh:yh:i.endingEnd=nf)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let l=this._weightInterpolant;l===null&&(l=i._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=s,f[0]=t,c[1]=s+e,f[1]=n,this}}const F2=new Float32Array(1);class B2 extends ys{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,l=e._propertyBindings,c=e._interpolants,f=n.uuid,m=this._bindingsByRootAndName;let p=m[f];p===void 0&&(p={},m[f]=p);for(let g=0;g!==s;++g){const x=i[g],_=x.name;let S=p[_];if(S!==void 0)++S.referenceCount,l[g]=S;else{if(S=l[g],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,f,_));continue}const T=t&&t._propertyBindings[g].binding.parsedPath;S=new mw(gn.create(n,_,T),x.ValueTypeName,x.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,f,_),l[g]=S}c[g].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let l=s[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=l;else{const c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=i.length,i.push(e),l.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,l=this._actionsByClip,c=l[s],f=c.knownActions,m=f[f.length-1],p=e._byClipCacheIndex;m._byClipCacheIndex=p,f[p]=m,f.pop(),e._byClipCacheIndex=null;const g=c.actionByRoot,x=(e._localRoot||this._root).uuid;delete g[x],f.length===0&&delete l[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let l=i[t];l===void 0&&(l={},i[t]=l),l[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,l=this._bindingsByRootAndName,c=l[i],f=t[t.length-1],m=e._cacheIndex;f._cacheIndex=m,t[m]=f,t.pop(),delete c[s],Object.keys(c).length===0&&delete l[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new M0(new Float32Array(2),new Float32Array(2),1,F2),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let l=typeof e=="string"?ff.findByName(i,e):e;const c=l!==null?l.uuid:e,f=this._actionsByClip[c];let m=null;if(n===void 0&&(l!==null?n=l.blendMode:n=xg),f!==void 0){const g=f.actionByRoot[s];if(g!==void 0&&g.blendMode===n)return g;m=f.knownActions[0],l===null&&(l=m._clip)}if(l===null)return null;const p=new pw(this,l,t,n);return this._bindAction(p,m),this._addInactiveAction(p,c,s),p}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?ff.findByName(n,e):e,l=s?s.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),l=this._accuIndex^=1;for(let m=0;m!==n;++m)t[m]._update(i,e,s,l);const c=this._bindings,f=this._nActiveBindings;for(let m=0;m!==f;++m)c[m].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const l=s.knownActions;for(let c=0,f=l.length;c!==f;++c){const m=l[c];this._deactivateAction(m);const p=m._cacheIndex,g=t[t.length-1];m._cacheIndex=null,m._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(m)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const l in n){const c=n[l].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const l in s){const c=s[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class z2 extends s0{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new bg(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class P0{constructor(e){this.value=e}clone(){return new P0(this.value.clone===void 0?this.value:this.value.clone())}}let j2=0;class V2 extends ys{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:j2++}),this.name="",this.usage=rf,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let l=0;l<s.length;l++)this.uniforms.push(s[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class H2 extends Mg{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class G2{constructor(e,t,n,i,s,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const x_=new Vt;class gw{constructor(e,t,n=0,i=1/0){this.ray=new Ch(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Sh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Wt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return x_.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(x_),this}intersectObject(e,t=!0,n=[]){return jy(e,this,n,t),n.sort(__),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)jy(e[i],this,n,t);return n.sort(__),n}}function __(r,e){return r.distance-e.distance}function jy(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let l=0,c=s.length;l<c;l++)jy(s[l],e,t,!0)}}class W2{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=X2.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function X2(){this._document.hidden===!1&&this.reset()}class Vy{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(jt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Y2{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class L0{constructor(e,t,n,i){L0.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const b_=new Ce;class q2{constructor(e=new Ce(1/0,1/0),t=new Ce(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=b_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,b_).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const w_=new Y,tp=new Y,tc=new Y,nc=new Y,sy=new Y,K2=new Y,Z2=new Y;class J2{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){w_.subVectors(e,this.start),tp.subVectors(this.end,this.start);const n=tp.dot(tp);let s=tp.dot(w_)/n;return t&&(s=jt(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=K2,n=Z2){const i=10000000000000001e-32;let s,l;const c=this.start,f=e.start,m=this.end,p=e.end;tc.subVectors(m,c),nc.subVectors(p,f),sy.subVectors(c,f);const g=tc.dot(tc),x=nc.dot(nc),_=nc.dot(sy);if(g<=i&&x<=i)return t.copy(c),n.copy(f),t.sub(n),t.dot(t);if(g<=i)s=0,l=_/x,l=jt(l,0,1);else{const S=tc.dot(sy);if(x<=i)l=0,s=jt(-S/g,0,1);else{const T=tc.dot(nc),M=g*x-T*T;M!==0?s=jt((T*_-S*x)/M,0,1):s=0,l=(T*s+_)/x,l<0?(l=0,s=jt(-S/g,0,1)):l>1&&(l=1,s=jt((T-S)/g,0,1))}}return t.copy(c).add(tc.multiplyScalar(s)),n.copy(f).add(nc.multiplyScalar(l)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const S_=new Y;class Q2 extends yn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Jt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,f=32;l<f;l++,c++){const m=l/f*Math.PI*2,p=c/f*Math.PI*2;i.push(Math.cos(m),Math.sin(m),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new Et(i,3));const s=new xa({fog:!1,toneMapped:!1});this.cone=new xs(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),S_.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(S_),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $o=new Y,np=new Vt,oy=new Vt;class $2 extends xs{constructor(e){const t=vw(e),n=new Jt,i=[],s=[];for(let m=0;m<t.length;m++){const p=t[m];p.parent&&p.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new Et(i,3)),n.setAttribute("color",new Et(s,3));const l=new xa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const c=new xt(255),f=new xt(65280);this.setColors(c,f)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");oy.copy(this.root.matrixWorld).invert();for(let s=0,l=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(np.multiplyMatrices(oy,c.matrixWorld),$o.setFromMatrixPosition(np),i.setXYZ(l,$o.x,$o.y,$o.z),np.multiplyMatrices(oy,c.parent.matrixWorld),$o.setFromMatrixPosition(np),i.setXYZ(l+1,$o.x,$o.y,$o.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let s=0;s<i.count;s+=2)i.setXYZ(s,e.r,e.g,e.b),i.setXYZ(s+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function vw(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push(...vw(r.children[t]));return e}class ek extends _i{constructor(e,t,n){const i=new wf(t,4,2),s=new ul({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tk=new Y,M_=new xt,k_=new xt;class nk extends yn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new bf(t);i.rotateY(Math.PI*.5),this.material=new ul({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),l=new Float32Array(s.count*3);i.setAttribute("color",new Cn(l,3)),this.add(new _i(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");M_.copy(this.light.color),k_.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?M_:k_;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tk.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ik extends xs{constructor(e=10,t=10,n=4473924,i=8947848){n=new xt(n),i=new xt(i);const s=t/2,l=e/t,c=e/2,f=[],m=[];for(let x=0,_=0,S=-c;x<=t;x++,S+=l){f.push(-c,0,S,c,0,S),f.push(S,0,-c,S,0,c);const T=x===s?n:i;T.toArray(m,_),_+=3,T.toArray(m,_),_+=3,T.toArray(m,_),_+=3,T.toArray(m,_),_+=3}const p=new Jt;p.setAttribute("position",new Et(f,3)),p.setAttribute("color",new Et(m,3));const g=new xa({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ak extends xs{constructor(e=10,t=16,n=8,i=64,s=4473924,l=8947848){s=new xt(s),l=new xt(l);const c=[],f=[];if(t>1)for(let g=0;g<t;g++){const x=g/t*(Math.PI*2),_=Math.sin(x)*e,S=Math.cos(x)*e;c.push(0,0,0),c.push(_,0,S);const T=g&1?s:l;f.push(T.r,T.g,T.b),f.push(T.r,T.g,T.b)}for(let g=0;g<n;g++){const x=g&1?s:l,_=e-e/n*g;for(let S=0;S<i;S++){let T=S/i*(Math.PI*2),M=Math.sin(T)*_,w=Math.cos(T)*_;c.push(M,0,w),f.push(x.r,x.g,x.b),T=(S+1)/i*(Math.PI*2),M=Math.sin(T)*_,w=Math.cos(T)*_,c.push(M,0,w),f.push(x.r,x.g,x.b)}}const m=new Jt;m.setAttribute("position",new Et(c,3)),m.setAttribute("color",new Et(f,3));const p=new xa({vertexColors:!0,toneMapped:!1});super(m,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const T_=new Y,ip=new Y,E_=new Y;class rk extends yn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Jt;i.setAttribute("position",new Et([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new xa({fog:!1,toneMapped:!1});this.lightPlane=new ol(i,s),this.add(this.lightPlane),i=new Jt,i.setAttribute("position",new Et([0,0,0,0,0,1],3)),this.targetLine=new ol(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),T_.setFromMatrixPosition(this.light.matrixWorld),ip.setFromMatrixPosition(this.light.target.matrixWorld),E_.subVectors(ip,T_),this.lightPlane.lookAt(ip),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ip),this.targetLine.scale.z=E_.length()}}const ap=new Y,Jn=new vf;class sk extends xs{constructor(e){const t=new Jt,n=new xa({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(S,T){f(S),f(T)}function f(S){i.push(0,0,0),s.push(0,0,0),l[S]===void 0&&(l[S]=[]),l[S].push(i.length/3-1)}t.setAttribute("position",new Et(i,3)),t.setAttribute("color",new Et(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const m=new xt(16755200),p=new xt(16711680),g=new xt(43775),x=new xt(16777215),_=new xt(3355443);this.setColors(m,p,g,x,_)}setColors(e,t,n,i,s){const c=this.geometry.getAttribute("color");return c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,i.r,i.g,i.b),c.setXYZ(39,i.r,i.g,i.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;let s,l;if(Jn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,l=0;else if(this.camera.coordinateSystem===$a)s=-1,l=1;else if(this.camera.coordinateSystem===vc)s=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ni("c",t,e,Jn,0,0,s),ni("t",t,e,Jn,0,0,l),ni("n1",t,e,Jn,-n,-i,s),ni("n2",t,e,Jn,n,-i,s),ni("n3",t,e,Jn,-n,i,s),ni("n4",t,e,Jn,n,i,s),ni("f1",t,e,Jn,-n,-i,l),ni("f2",t,e,Jn,n,-i,l),ni("f3",t,e,Jn,-n,i,l),ni("f4",t,e,Jn,n,i,l),ni("u1",t,e,Jn,n*.7,i*1.1,s),ni("u2",t,e,Jn,-n*.7,i*1.1,s),ni("u3",t,e,Jn,0,i*2,s),ni("cf1",t,e,Jn,-n,0,l),ni("cf2",t,e,Jn,n,0,l),ni("cf3",t,e,Jn,0,-i,l),ni("cf4",t,e,Jn,0,i,l),ni("cn1",t,e,Jn,-n,0,s),ni("cn2",t,e,Jn,n,0,s),ni("cn3",t,e,Jn,0,-i,s),ni("cn4",t,e,Jn,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ni(r,e,t,n,i,s,l){ap.set(i,s,l).unproject(n);const c=e[r];if(c!==void 0){const f=t.getAttribute("position");for(let m=0,p=c.length;m<p;m++)f.setXYZ(c[m],ap.x,ap.y,ap.z)}}const rp=new ta;class ok extends xs{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new Jt;s.setIndex(new Cn(n,1)),s.setAttribute("position",new Cn(i,3)),super(s,new xa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&rp.setFromObject(this.object),rp.isEmpty())return;const e=rp.min,t=rp.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lk extends xs{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Jt;s.setIndex(new Cn(n,1)),s.setAttribute("position",new Et(i,3)),super(s,new xa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class hk extends ol{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Jt;l.setAttribute("position",new Et(s,3)),l.computeBoundingSphere(),super(l,new xa({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new Jt;f.setAttribute("position",new Et(c,3)),f.computeBoundingSphere(),this.add(new _i(f,new ul({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const A_=new Y;let sp,ly;class uk extends yn{constructor(e=new Y(0,0,1),t=new Y(0,0,0),n=1,i=16776960,s=n*.2,l=s*.2){super(),this.type="ArrowHelper",sp===void 0&&(sp=new Jt,sp.setAttribute("position",new Et([0,0,0,0,1,0],3)),ly=new _f(.5,1,5,1),ly.translate(0,-.5,0)),this.position.copy(t),this.line=new ol(sp,new xa({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _i(ly,new ul({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{A_.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(A_,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ck extends xs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Jt;i.setAttribute("position",new Et(t,3)),i.setAttribute("color",new Et(n,3));const s=new xa({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new xt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class dk{constructor(){this.type="ShapePath",this.color=new xt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new rg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,l){return this.currentPath.bezierCurveTo(e,t,n,i,s,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const C=[];for(let I=0,L=w.length;I<L;I++){const F=w[I],N=new Mh;N.curves=F.curves,C.push(N)}return C}function n(w,C){const I=C.length;let L=!1;for(let F=I-1,N=0;N<I;F=N++){let z=C[F],G=C[N],D=G.x-z.x,P=G.y-z.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(z=C[N],D=-D,G=C[F],P=-P),w.y<z.y||w.y>G.y)continue;if(w.y===z.y){if(w.x===z.x)return!0}else{const V=P*(w.x-z.x)-D*(w.y-z.y);if(V===0)return!0;if(V<0)continue;L=!L}}else{if(w.y!==z.y)continue;if(G.x<=w.x&&w.x<=z.x||z.x<=w.x&&w.x<=G.x)return!0}}return L}const i=Yr.isClockWise,s=this.subPaths;if(s.length===0)return[];let l,c,f;const m=[];if(s.length===1)return c=s[0],f=new Mh,f.curves=c.curves,m.push(f),m;let p=!i(s[0].getPoints());p=e?!p:p;const g=[],x=[];let _=[],S=0,T;x[S]=void 0,_[S]=[];for(let w=0,C=s.length;w<C;w++)c=s[w],T=c.getPoints(),l=i(T),l=e?!l:l,l?(!p&&x[S]&&S++,x[S]={s:new Mh,p:T},x[S].s.curves=c.curves,p&&S++,_[S]=[]):_[S].push({h:c,p:T[0]});if(!x[0])return t(s);if(x.length>1){let w=!1,C=0;for(let I=0,L=x.length;I<L;I++)g[I]=[];for(let I=0,L=x.length;I<L;I++){const F=_[I];for(let N=0;N<F.length;N++){const z=F[N];let G=!0;for(let D=0;D<x.length;D++)n(z.p,x[D].p)&&(I!==D&&C++,G?(G=!1,g[D].push(z)):w=!0);G&&g[I].push(z)}}C>0&&w===!1&&(_=g)}let M;for(let w=0,C=x.length;w<C;w++){f=x[w].s,m.push(f),M=_[w];for(let I=0,L=M.length;I<L;I++)f.holes.push(M[I].h)}return m}}class fk extends ys{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ft("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function mk(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function pk(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function gk(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function Hy(r,e,t,n){const i=vk(n);switch(t){case t0:return r*e;case pg:return r*e/i.components*i.byteLength;case gf:return r*e/i.components*i.byteLength;case gg:return r*e*2/i.components*i.byteLength;case vg:return r*e*2/i.components*i.byteLength;case n0:return r*e*3/i.components*i.byteLength;case $i:return r*e*4/i.components*i.byteLength;case yg:return r*e*4/i.components*i.byteLength;case Gd:case Wd:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Xd:case Yd:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Ap:case Ip:return Math.max(r,16)*Math.max(e,8)/4;case Ep:case Cp:return Math.max(r,8)*Math.max(e,8)/2;case Rp:case Pp:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Lp:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Np:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Dp:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case Op:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case Up:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case Fp:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case Bp:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case zp:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case jp:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case Vp:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case Hp:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case Gp:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case Wp:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case Xp:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case Yp:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case qp:case Kp:case Zp:return Math.ceil(r/4)*Math.ceil(e/4)*16;case Jp:case Qp:return Math.ceil(r/4)*Math.ceil(e/4)*8;case $p:case eg:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function vk(r){switch(r){case gr:case Jy:return{byteLength:1,components:1};case fc:case Qy:case ll:return{byteLength:2,components:1};case fg:case mg:return{byteLength:2,components:4};case co:case dg:case va:return{byteLength:4,components:1};case $y:case e0:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class yk{static contain(e,t){return mk(e,t)}static cover(e,t){return pk(e,t)}static fill(e){return gk(e)}static getByteLength(e,t,n,i){return Hy(e,t,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hg}}));typeof window<"u"&&(window.__THREE__?ft("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=hg);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function yw(){let r=null,e=!1,t=null,n=null;function i(s,l){t(s,l),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function xk(r){const e=new WeakMap;function t(c,f){const m=c.array,p=c.usage,g=m.byteLength,x=r.createBuffer();r.bindBuffer(f,x),r.bufferData(f,m,p),c.onUploadCallback();let _;if(m instanceof Float32Array)_=r.FLOAT;else if(typeof Float16Array<"u"&&m instanceof Float16Array)_=r.HALF_FLOAT;else if(m instanceof Uint16Array)c.isFloat16BufferAttribute?_=r.HALF_FLOAT:_=r.UNSIGNED_SHORT;else if(m instanceof Int16Array)_=r.SHORT;else if(m instanceof Uint32Array)_=r.UNSIGNED_INT;else if(m instanceof Int32Array)_=r.INT;else if(m instanceof Int8Array)_=r.BYTE;else if(m instanceof Uint8Array)_=r.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)_=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:x,type:_,bytesPerElement:m.BYTES_PER_ELEMENT,version:c.version,size:g}}function n(c,f,m){const p=f.array,g=f.updateRanges;if(r.bindBuffer(m,c),g.length===0)r.bufferSubData(m,0,p);else{g.sort((_,S)=>_.start-S.start);let x=0;for(let _=1;_<g.length;_++){const S=g[x],T=g[_];T.start<=S.start+S.count+1?S.count=Math.max(S.count,T.start+T.count-S.start):(++x,g[x]=T)}g.length=x+1;for(let _=0,S=g.length;_<S;_++){const T=g[_];r.bufferSubData(m,T.start*p.BYTES_PER_ELEMENT,p,T.start,T.count)}f.clearUpdateRanges()}f.onUploadCallback()}function i(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=e.get(c);f&&(r.deleteBuffer(f.buffer),e.delete(c))}function l(c,f){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const p=e.get(c);(!p||p.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const m=e.get(c);if(m===void 0)e.set(c,t(c,f));else if(m.version<c.version){if(m.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(m.buffer,c,f),m.version=c.version}}return{get:i,remove:s,update:l}}var _k=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bk=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,wk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Sk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Mk=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,kk=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Tk=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ek=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ak=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Ck=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Ik=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Rk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Pk=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Lk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Nk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Dk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Ok=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Uk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Fk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Bk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Vk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Hk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Gk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wk=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Xk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Yk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,qk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Kk=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Zk="gl_FragColor = linearToOutputTexel( gl_FragColor );",Jk=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Qk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$k=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,eT=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tT=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nT=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,iT=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aT=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rT=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,sT=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,oT=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lT=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hT=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,uT=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cT=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dT=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fT=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mT=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pT=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gT=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vT=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,yT=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xT=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_T=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,bT=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,wT=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ST=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,MT=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kT=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,TT=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ET=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AT=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,CT=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IT=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,RT=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,PT=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,LT=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,NT=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,DT=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,OT=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,UT=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,FT=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,BT=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zT=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jT=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,VT=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,HT=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,GT=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,WT=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,XT=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,YT=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qT=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KT=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ZT=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,JT=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,QT=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$T=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eE=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tE=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,nE=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,iE=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aE=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,rE=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,sE=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,oE=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lE=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hE=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uE=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,cE=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dE=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fE=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,mE=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,pE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,yE=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const xE=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_E=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bE=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wE=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SE=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ME=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kE=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,TE=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,EE=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,AE=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,CE=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,IE=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RE=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,PE=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,LE=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NE=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DE=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OE=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UE=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,FE=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BE=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zE=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jE=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VE=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HE=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,GE=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WE=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XE=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YE=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qE=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KE=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZE=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,JE=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QE=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nn={alphahash_fragment:_k,alphahash_pars_fragment:bk,alphamap_fragment:wk,alphamap_pars_fragment:Sk,alphatest_fragment:Mk,alphatest_pars_fragment:kk,aomap_fragment:Tk,aomap_pars_fragment:Ek,batching_pars_vertex:Ak,batching_vertex:Ck,begin_vertex:Ik,beginnormal_vertex:Rk,bsdfs:Pk,iridescence_fragment:Lk,bumpmap_pars_fragment:Nk,clipping_planes_fragment:Dk,clipping_planes_pars_fragment:Ok,clipping_planes_pars_vertex:Uk,clipping_planes_vertex:Fk,color_fragment:Bk,color_pars_fragment:zk,color_pars_vertex:jk,color_vertex:Vk,common:Hk,cube_uv_reflection_fragment:Gk,defaultnormal_vertex:Wk,displacementmap_pars_vertex:Xk,displacementmap_vertex:Yk,emissivemap_fragment:qk,emissivemap_pars_fragment:Kk,colorspace_fragment:Zk,colorspace_pars_fragment:Jk,envmap_fragment:Qk,envmap_common_pars_fragment:$k,envmap_pars_fragment:eT,envmap_pars_vertex:tT,envmap_physical_pars_fragment:dT,envmap_vertex:nT,fog_vertex:iT,fog_pars_vertex:aT,fog_fragment:rT,fog_pars_fragment:sT,gradientmap_pars_fragment:oT,lightmap_pars_fragment:lT,lights_lambert_fragment:hT,lights_lambert_pars_fragment:uT,lights_pars_begin:cT,lights_toon_fragment:fT,lights_toon_pars_fragment:mT,lights_phong_fragment:pT,lights_phong_pars_fragment:gT,lights_physical_fragment:vT,lights_physical_pars_fragment:yT,lights_fragment_begin:xT,lights_fragment_maps:_T,lights_fragment_end:bT,logdepthbuf_fragment:wT,logdepthbuf_pars_fragment:ST,logdepthbuf_pars_vertex:MT,logdepthbuf_vertex:kT,map_fragment:TT,map_pars_fragment:ET,map_particle_fragment:AT,map_particle_pars_fragment:CT,metalnessmap_fragment:IT,metalnessmap_pars_fragment:RT,morphinstance_vertex:PT,morphcolor_vertex:LT,morphnormal_vertex:NT,morphtarget_pars_vertex:DT,morphtarget_vertex:OT,normal_fragment_begin:UT,normal_fragment_maps:FT,normal_pars_fragment:BT,normal_pars_vertex:zT,normal_vertex:jT,normalmap_pars_fragment:VT,clearcoat_normal_fragment_begin:HT,clearcoat_normal_fragment_maps:GT,clearcoat_pars_fragment:WT,iridescence_pars_fragment:XT,opaque_fragment:YT,packing:qT,premultiplied_alpha_fragment:KT,project_vertex:ZT,dithering_fragment:JT,dithering_pars_fragment:QT,roughnessmap_fragment:$T,roughnessmap_pars_fragment:eE,shadowmap_pars_fragment:tE,shadowmap_pars_vertex:nE,shadowmap_vertex:iE,shadowmask_pars_fragment:aE,skinbase_vertex:rE,skinning_pars_vertex:sE,skinning_vertex:oE,skinnormal_vertex:lE,specularmap_fragment:hE,specularmap_pars_fragment:uE,tonemapping_fragment:cE,tonemapping_pars_fragment:dE,transmission_fragment:fE,transmission_pars_fragment:mE,uv_pars_fragment:pE,uv_pars_vertex:gE,uv_vertex:vE,worldpos_vertex:yE,background_vert:xE,background_frag:_E,backgroundCube_vert:bE,backgroundCube_frag:wE,cube_vert:SE,cube_frag:ME,depth_vert:kE,depth_frag:TE,distanceRGBA_vert:EE,distanceRGBA_frag:AE,equirect_vert:CE,equirect_frag:IE,linedashed_vert:RE,linedashed_frag:PE,meshbasic_vert:LE,meshbasic_frag:NE,meshlambert_vert:DE,meshlambert_frag:OE,meshmatcap_vert:UE,meshmatcap_frag:FE,meshnormal_vert:BE,meshnormal_frag:zE,meshphong_vert:jE,meshphong_frag:VE,meshphysical_vert:HE,meshphysical_frag:GE,meshtoon_vert:WE,meshtoon_frag:XE,points_vert:YE,points_frag:qE,shadow_vert:KE,shadow_frag:ZE,sprite_vert:JE,sprite_frag:QE},dt={common:{diffuse:{value:new xt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Zt}},envmap:{envMap:{value:null},envMapRotation:{value:new Zt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Zt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Zt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Zt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Zt},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Zt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Zt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Zt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Zt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0},uvTransform:{value:new Zt}},sprite:{diffuse:{value:new xt(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}}},Xr={basic:{uniforms:pa([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:pa([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new xt(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:pa([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new xt(0)},specular:{value:new xt(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:pa([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:pa([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new xt(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:pa([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:pa([dt.points,dt.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:pa([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:pa([dt.common,dt.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:pa([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:pa([dt.sprite,dt.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new Zt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Zt}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:pa([dt.common,dt.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:pa([dt.lights,dt.fog,{color:{value:new xt(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};Xr.physical={uniforms:pa([Xr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Zt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Zt},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Zt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Zt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Zt},sheen:{value:0},sheenColor:{value:new xt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Zt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Zt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Zt},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Zt},attenuationDistance:{value:0},attenuationColor:{value:new xt(0)},specularColor:{value:new xt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Zt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Zt},anisotropyVector:{value:new Ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Zt}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const op={r:0,b:0,g:0},dh=new tr,$E=new Vt;function eA(r,e,t,n,i,s,l){const c=new xt(0);let f=s===!0?0:1,m,p,g=null,x=0,_=null;function S(I){let L=I.isScene===!0?I.background:null;return L&&L.isTexture&&(L=(I.backgroundBlurriness>0?t:e).get(L)),L}function T(I){let L=!1;const F=S(I);F===null?w(c,f):F&&F.isColor&&(w(F,1),L=!0);const N=r.xr.getEnvironmentBlendMode();N==="additive"?n.buffers.color.setClear(0,0,0,1,l):N==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(r.autoClear||L)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function M(I,L){const F=S(L);F&&(F.isCubeTexture||F.mapping===Mc)?(p===void 0&&(p=new _i(new Ih(1,1,1),new vr({name:"BackgroundCubeMaterial",uniforms:_c(Xr.backgroundCube.uniforms),vertexShader:Xr.backgroundCube.vertexShader,fragmentShader:Xr.backgroundCube.fragmentShader,side:ya,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(N,z,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),dh.copy(L.backgroundRotation),dh.x*=-1,dh.y*=-1,dh.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(dh.y*=-1,dh.z*=-1),p.material.uniforms.envMap.value=F,p.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=L.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=L.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4($E.makeRotationFromEuler(dh)),p.material.toneMapped=mn.getTransfer(F.colorSpace)!==kn,(g!==F||x!==F.version||_!==r.toneMapping)&&(p.material.needsUpdate=!0,g=F,x=F.version,_=r.toneMapping),p.layers.enableAll(),I.unshift(p,p.geometry,p.material,0,0,null)):F&&F.isTexture&&(m===void 0&&(m=new _i(new Tc(2,2),new vr({name:"BackgroundMaterial",uniforms:_c(Xr.background.uniforms),vertexShader:Xr.background.vertexShader,fragmentShader:Xr.background.fragmentShader,side:ho,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(m)),m.material.uniforms.t2D.value=F,m.material.uniforms.backgroundIntensity.value=L.backgroundIntensity,m.material.toneMapped=mn.getTransfer(F.colorSpace)!==kn,F.matrixAutoUpdate===!0&&F.updateMatrix(),m.material.uniforms.uvTransform.value.copy(F.matrix),(g!==F||x!==F.version||_!==r.toneMapping)&&(m.material.needsUpdate=!0,g=F,x=F.version,_=r.toneMapping),m.layers.enableAll(),I.unshift(m,m.geometry,m.material,0,0,null))}function w(I,L){I.getRGB(op,v1(r)),n.buffers.color.setClear(op.r,op.g,op.b,L,l)}function C(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0)}return{getClearColor:function(){return c},setClearColor:function(I,L=1){c.set(I),f=L,w(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(I){f=I,w(c,f)},render:T,addToRenderList:M,dispose:C}}function tA(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=x(null);let s=i,l=!1;function c(P,V,ee,ie,pe){let me=!1;const ve=g(ie,ee,V);s!==ve&&(s=ve,m(s.object)),me=_(P,ie,ee,pe),me&&S(P,ie,ee,pe),pe!==null&&e.update(pe,r.ELEMENT_ARRAY_BUFFER),(me||l)&&(l=!1,L(P,V,ee,ie),pe!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(pe).buffer))}function f(){return r.createVertexArray()}function m(P){return r.bindVertexArray(P)}function p(P){return r.deleteVertexArray(P)}function g(P,V,ee){const ie=ee.wireframe===!0;let pe=n[P.id];pe===void 0&&(pe={},n[P.id]=pe);let me=pe[V.id];me===void 0&&(me={},pe[V.id]=me);let ve=me[ie];return ve===void 0&&(ve=x(f()),me[ie]=ve),ve}function x(P){const V=[],ee=[],ie=[];for(let pe=0;pe<t;pe++)V[pe]=0,ee[pe]=0,ie[pe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:ee,attributeDivisors:ie,object:P,attributes:{},index:null}}function _(P,V,ee,ie){const pe=s.attributes,me=V.attributes;let ve=0;const Se=ee.getAttributes();for(const B in Se)if(Se[B].location>=0){const K=pe[B];let H=me[B];if(H===void 0&&(B==="instanceMatrix"&&P.instanceMatrix&&(H=P.instanceMatrix),B==="instanceColor"&&P.instanceColor&&(H=P.instanceColor)),K===void 0||K.attribute!==H||H&&K.data!==H.data)return!0;ve++}return s.attributesNum!==ve||s.index!==ie}function S(P,V,ee,ie){const pe={},me=V.attributes;let ve=0;const Se=ee.getAttributes();for(const B in Se)if(Se[B].location>=0){let K=me[B];K===void 0&&(B==="instanceMatrix"&&P.instanceMatrix&&(K=P.instanceMatrix),B==="instanceColor"&&P.instanceColor&&(K=P.instanceColor));const H={};H.attribute=K,K&&K.data&&(H.data=K.data),pe[B]=H,ve++}s.attributes=pe,s.attributesNum=ve,s.index=ie}function T(){const P=s.newAttributes;for(let V=0,ee=P.length;V<ee;V++)P[V]=0}function M(P){w(P,0)}function w(P,V){const ee=s.newAttributes,ie=s.enabledAttributes,pe=s.attributeDivisors;ee[P]=1,ie[P]===0&&(r.enableVertexAttribArray(P),ie[P]=1),pe[P]!==V&&(r.vertexAttribDivisor(P,V),pe[P]=V)}function C(){const P=s.newAttributes,V=s.enabledAttributes;for(let ee=0,ie=V.length;ee<ie;ee++)V[ee]!==P[ee]&&(r.disableVertexAttribArray(ee),V[ee]=0)}function I(P,V,ee,ie,pe,me,ve){ve===!0?r.vertexAttribIPointer(P,V,ee,pe,me):r.vertexAttribPointer(P,V,ee,ie,pe,me)}function L(P,V,ee,ie){T();const pe=ie.attributes,me=ee.getAttributes(),ve=V.defaultAttributeValues;for(const Se in me){const B=me[Se];if(B.location>=0){let Q=pe[Se];if(Q===void 0&&(Se==="instanceMatrix"&&P.instanceMatrix&&(Q=P.instanceMatrix),Se==="instanceColor"&&P.instanceColor&&(Q=P.instanceColor)),Q!==void 0){const K=Q.normalized,H=Q.itemSize,ae=e.get(Q);if(ae===void 0)continue;const Re=ae.buffer,Ye=ae.type,rt=ae.bytesPerElement,ce=Ye===r.INT||Ye===r.UNSIGNED_INT||Q.gpuType===dg;if(Q.isInterleavedBufferAttribute){const we=Q.data,Be=we.stride,it=Q.offset;if(we.isInstancedInterleavedBuffer){for(let st=0;st<B.locationSize;st++)w(B.location+st,we.meshPerAttribute);P.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let st=0;st<B.locationSize;st++)M(B.location+st);r.bindBuffer(r.ARRAY_BUFFER,Re);for(let st=0;st<B.locationSize;st++)I(B.location+st,H/B.locationSize,Ye,K,Be*rt,(it+H/B.locationSize*st)*rt,ce)}else{if(Q.isInstancedBufferAttribute){for(let we=0;we<B.locationSize;we++)w(B.location+we,Q.meshPerAttribute);P.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let we=0;we<B.locationSize;we++)M(B.location+we);r.bindBuffer(r.ARRAY_BUFFER,Re);for(let we=0;we<B.locationSize;we++)I(B.location+we,H/B.locationSize,Ye,K,H*rt,H/B.locationSize*we*rt,ce)}}else if(ve!==void 0){const K=ve[Se];if(K!==void 0)switch(K.length){case 2:r.vertexAttrib2fv(B.location,K);break;case 3:r.vertexAttrib3fv(B.location,K);break;case 4:r.vertexAttrib4fv(B.location,K);break;default:r.vertexAttrib1fv(B.location,K)}}}}C()}function F(){G();for(const P in n){const V=n[P];for(const ee in V){const ie=V[ee];for(const pe in ie)p(ie[pe].object),delete ie[pe];delete V[ee]}delete n[P]}}function N(P){if(n[P.id]===void 0)return;const V=n[P.id];for(const ee in V){const ie=V[ee];for(const pe in ie)p(ie[pe].object),delete ie[pe];delete V[ee]}delete n[P.id]}function z(P){for(const V in n){const ee=n[V];if(ee[P.id]===void 0)continue;const ie=ee[P.id];for(const pe in ie)p(ie[pe].object),delete ie[pe];delete ee[P.id]}}function G(){D(),l=!0,s!==i&&(s=i,m(s.object))}function D(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:c,reset:G,resetDefaultState:D,dispose:F,releaseStatesOfGeometry:N,releaseStatesOfProgram:z,initAttributes:T,enableAttribute:M,disableUnusedAttributes:C}}function nA(r,e,t){let n;function i(m){n=m}function s(m,p){r.drawArrays(n,m,p),t.update(p,n,1)}function l(m,p,g){g!==0&&(r.drawArraysInstanced(n,m,p,g),t.update(p,n,g))}function c(m,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,m,0,p,0,g);let _=0;for(let S=0;S<g;S++)_+=p[S];t.update(_,n,1)}function f(m,p,g,x){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let S=0;S<m.length;S++)l(m[S],p[S],x[S]);else{_.multiDrawArraysInstancedWEBGL(n,m,0,p,0,x,0,g);let S=0;for(let T=0;T<g;T++)S+=p[T]*x[T];t.update(S,n,1)}}this.setMode=i,this.render=s,this.renderInstances=l,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function iA(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function l(z){return!(z!==$i&&n.convert(z)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(z){const G=z===ll&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==gr&&n.convert(z)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==va&&!G)}function f(z){if(z==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let m=t.precision!==void 0?t.precision:"highp";const p=f(m);p!==m&&(ft("WebGLRenderer:",m,"not supported, using",p,"instead."),m=p);const g=t.logarithmicDepthBuffer===!0,x=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),S=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=r.getParameter(r.MAX_TEXTURE_SIZE),M=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),w=r.getParameter(r.MAX_VERTEX_ATTRIBS),C=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),I=r.getParameter(r.MAX_VARYING_VECTORS),L=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),F=S>0,N=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:f,textureFormatReadable:l,textureTypeReadable:c,precision:m,logarithmicDepthBuffer:g,reversedDepthBuffer:x,maxTextures:_,maxVertexTextures:S,maxTextureSize:T,maxCubemapSize:M,maxAttributes:w,maxVertexUniforms:C,maxVaryings:I,maxFragmentUniforms:L,vertexTextures:F,maxSamples:N}}function aA(r){const e=this;let t=null,n=0,i=!1,s=!1;const l=new ro,c=new Zt,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(g,x){const _=g.length!==0||x||n!==0||i;return i=x,n=g.length,_},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,x){t=p(g,x,0)},this.setState=function(g,x,_){const S=g.clippingPlanes,T=g.clipIntersection,M=g.clipShadows,w=r.get(g);if(!i||S===null||S.length===0||s&&!M)s?p(null):m();else{const C=s?0:n,I=C*4;let L=w.clippingState||null;f.value=L,L=p(S,x,I,_);for(let F=0;F!==I;++F)L[F]=t[F];w.clippingState=L,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=C}};function m(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(g,x,_,S){const T=g!==null?g.length:0;let M=null;if(T!==0){if(M=f.value,S!==!0||M===null){const w=_+T*4,C=x.matrixWorldInverse;c.getNormalMatrix(C),(M===null||M.length<w)&&(M=new Float32Array(w));for(let I=0,L=_;I!==T;++I,L+=4)l.copy(g[I]).applyMatrix4(C,c),l.normal.toArray(M,L),M[L+3]=l.constant}f.value=M,f.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,M}}function rA(r){let e=new WeakMap;function t(l,c){return c===Jd?l.mapping=uo:c===Qd&&(l.mapping=rl),l}function n(l){if(l&&l.isTexture){const c=l.mapping;if(c===Jd||c===Qd)if(e.has(l)){const f=e.get(l).texture;return t(f,l.mapping)}else{const f=l.image;if(f&&f.height>0){const m=new _1(f.height);return m.fromEquirectangularTexture(r,l),e.set(l,m),l.addEventListener("dispose",i),t(m.texture,l.mapping)}else return null}}return l}function i(l){const c=l.target;c.removeEventListener("dispose",i);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const il=4,C_=[.125,.215,.35,.446,.526,.582],vh=20,sA=512,Od=new al,I_=new xt;let hy=null,uy=0,cy=0,dy=!1;const oA=new Y;class Gy{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,i=100,s={}){const{size:l=256,position:c=oA}=s;hy=this._renderer.getRenderTarget(),uy=this._renderer.getActiveCubeFace(),cy=this._renderer.getActiveMipmapLevel(),dy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,n,i,f,c),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=L_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=P_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(hy,uy,cy),this._renderer.xr.enabled=dy,e.scissorTest=!1,ic(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===uo||e.mapping===rl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),hy=this._renderer.getRenderTarget(),uy=this._renderer.getActiveCubeFace(),cy=this._renderer.getActiveMipmapLevel(),dy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:ll,format:$i,colorSpace:Th,depthBuffer:!1},i=R_(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=R_(e,t,n);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=lA(s)),this._blurMaterial=uA(s,e,t)}return i}_compileMaterial(e){const t=new _i(new Jt,e);this._renderer.compile(t,Od)}_sceneToCubeUV(e,t,n,i,s){const f=new ii(90,1,t,n),m=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],g=this._renderer,x=g.autoClear,_=g.toneMapping;g.getClearColor(I_),g.toneMapping=vs,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(i),g.clearDepth(),g.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new _i(new Ih,new ul({name:"PMREM.Background",side:ya,depthWrite:!1,depthTest:!1})));const T=this._backgroundBox,M=T.material;let w=!1;const C=e.background;C?C.isColor&&(M.color.copy(C),e.background=null,w=!0):(M.color.copy(I_),w=!0);for(let I=0;I<6;I++){const L=I%3;L===0?(f.up.set(0,m[I],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x+p[I],s.y,s.z)):L===1?(f.up.set(0,0,m[I]),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y+p[I],s.z)):(f.up.set(0,m[I],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y,s.z+p[I]));const F=this._cubeSize;ic(i,L*F,I>2?F:0,F,F),g.setRenderTarget(i),w&&g.render(T,f),g.render(e,f)}g.toneMapping=_,g.autoClear=x,e.background=C}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===uo||e.mapping===rl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=L_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=P_());const s=i?this._cubemapMaterial:this._equirectMaterial,l=this._lodMeshes[0];l.material=s;const c=s.uniforms;c.envMap.value=e;const f=this._cubeSize;ic(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(l,Od)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let s=1;s<i;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=n}_applyGGXFilter(e,t,n){const i=this._renderer,s=this._pingPongRenderTarget;if(this._ggxMaterial===null){const C=3*Math.max(this._cubeSize,16),I=4*this._cubeSize;this._ggxMaterial=hA(this._lodMax,C,I)}const l=this._ggxMaterial,c=this._lodMeshes[n];c.material=l;const f=l.uniforms,m=n/(this._lodMeshes.length-1),p=t/(this._lodMeshes.length-1),g=Math.sqrt(m*m-p*p),x=.05+m*.95,_=g*x,{_lodMax:S}=this,T=this._sizeLods[n],M=3*T*(n>S-il?n-S+il:0),w=4*(this._cubeSize-T);f.envMap.value=e.texture,f.roughness.value=_,f.mipInt.value=S-t,ic(s,M,w,3*T,2*T),i.setRenderTarget(s),i.render(c,Od),f.envMap.value=s.texture,f.roughness.value=0,f.mipInt.value=S-n,ic(e,M,w,3*T,2*T),i.setRenderTarget(e),i.render(c,Od)}_blur(e,t,n,i,s){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,i,"latitudinal",s),this._halfBlur(l,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,l,c){const f=this._renderer,m=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&Wt("blur direction must be either latitudinal or longitudinal!");const p=3,g=this._lodMeshes[i];g.material=m;const x=m.uniforms,_=this._sizeLods[n]-1,S=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*vh-1),T=s/S,M=isFinite(s)?1+Math.floor(p*T):vh;M>vh&&ft(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${vh}`);const w=[];let C=0;for(let z=0;z<vh;++z){const G=z/T,D=Math.exp(-G*G/2);w.push(D),z===0?C+=D:z<M&&(C+=2*D)}for(let z=0;z<w.length;z++)w[z]=w[z]/C;x.envMap.value=e.texture,x.samples.value=M,x.weights.value=w,x.latitudinal.value=l==="latitudinal",c&&(x.poleAxis.value=c);const{_lodMax:I}=this;x.dTheta.value=S,x.mipInt.value=I-n;const L=this._sizeLods[i],F=3*L*(i>I-il?i-I+il:0),N=4*(this._cubeSize-L);ic(t,F,N,3*L,2*L),f.setRenderTarget(t),f.render(g,Od)}}function lA(r){const e=[],t=[],n=[];let i=r;const s=r-il+1+C_.length;for(let l=0;l<s;l++){const c=Math.pow(2,i);e.push(c);let f=1/c;l>r-il?f=C_[l-r+il-1]:l===0&&(f=0),t.push(f);const m=1/(c-2),p=-m,g=1+m,x=[p,p,g,p,g,g,p,p,g,g,p,g],_=6,S=6,T=3,M=2,w=1,C=new Float32Array(T*S*_),I=new Float32Array(M*S*_),L=new Float32Array(w*S*_);for(let N=0;N<_;N++){const z=N%3*2/3-1,G=N>2?0:-1,D=[z,G,0,z+2/3,G,0,z+2/3,G+1,0,z,G,0,z+2/3,G+1,0,z,G+1,0];C.set(D,T*S*N),I.set(x,M*S*N);const P=[N,N,N,N,N,N];L.set(P,w*S*N)}const F=new Jt;F.setAttribute("position",new Cn(C,T)),F.setAttribute("uv",new Cn(I,M)),F.setAttribute("faceIndex",new Cn(L,w)),n.push(new _i(F,null)),i>il&&i--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function R_(r,e,t){const n=new Kr(r,e,t);return n.texture.mapping=Mc,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ic(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function hA(r,e,t){return new vr({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:sA,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:gs,depthTest:!1,depthWrite:!1})}function uA(r,e,t){const n=new Float32Array(vh),i=new Y(0,1,0);return new vr({name:"SphericalGaussianBlur",defines:{n:vh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gs,depthTest:!1,depthWrite:!1})}function P_(){return new vr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gs,depthTest:!1,depthWrite:!1})}function L_(){return new vr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Hg(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gs,depthTest:!1,depthWrite:!1})}function Hg(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cA(r){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const f=c.mapping,m=f===Jd||f===Qd,p=f===uo||f===rl;if(m||p){let g=e.get(c);const x=g!==void 0?g.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==x)return t===null&&(t=new Gy(r)),g=m?t.fromEquirectangular(c,g):t.fromCubemap(c,g),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),g.texture;if(g!==void 0)return g.texture;{const _=c.image;return m&&_&&_.height>0||p&&_&&i(_)?(t===null&&(t=new Gy(r)),g=m?t.fromEquirectangular(c):t.fromCubemap(c),g.texture.pmremVersion=c.pmremVersion,e.set(c,g),c.addEventListener("dispose",s),g.texture):null}}}return c}function i(c){let f=0;const m=6;for(let p=0;p<m;p++)c[p]!==void 0&&f++;return f===m}function s(c){const f=c.target;f.removeEventListener("dispose",s);const m=e.get(f);m!==void 0&&(e.delete(f),m.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function dA(r){const e={};function t(n){if(e[n]!==void 0)return e[n];const i=r.getExtension(n);return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&yc("WebGLRenderer: "+n+" extension not supported."),i}}}function fA(r,e,t,n){const i={},s=new WeakMap;function l(g){const x=g.target;x.index!==null&&e.remove(x.index);for(const S in x.attributes)e.remove(x.attributes[S]);x.removeEventListener("dispose",l),delete i[x.id];const _=s.get(x);_&&(e.remove(_),s.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function c(g,x){return i[x.id]===!0||(x.addEventListener("dispose",l),i[x.id]=!0,t.memory.geometries++),x}function f(g){const x=g.attributes;for(const _ in x)e.update(x[_],r.ARRAY_BUFFER)}function m(g){const x=[],_=g.index,S=g.attributes.position;let T=0;if(_!==null){const C=_.array;T=_.version;for(let I=0,L=C.length;I<L;I+=3){const F=C[I+0],N=C[I+1],z=C[I+2];x.push(F,N,N,z,z,F)}}else if(S!==void 0){const C=S.array;T=S.version;for(let I=0,L=C.length/3-1;I<L;I+=3){const F=I+0,N=I+1,z=I+2;x.push(F,N,N,z,z,F)}}else return;const M=new(d1(x)?l0:o0)(x,1);M.version=T;const w=s.get(g);w&&e.remove(w),s.set(g,M)}function p(g){const x=s.get(g);if(x){const _=g.index;_!==null&&x.version<_.version&&m(g)}else m(g);return s.get(g)}return{get:c,update:f,getWireframeAttribute:p}}function mA(r,e,t){let n;function i(x){n=x}let s,l;function c(x){s=x.type,l=x.bytesPerElement}function f(x,_){r.drawElements(n,_,s,x*l),t.update(_,n,1)}function m(x,_,S){S!==0&&(r.drawElementsInstanced(n,_,s,x*l,S),t.update(_,n,S))}function p(x,_,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,s,x,0,S);let M=0;for(let w=0;w<S;w++)M+=_[w];t.update(M,n,1)}function g(x,_,S,T){if(S===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let w=0;w<x.length;w++)m(x[w]/l,_[w],T[w]);else{M.multiDrawElementsInstancedWEBGL(n,_,0,s,x,0,T,0,S);let w=0;for(let C=0;C<S;C++)w+=_[C]*T[C];t.update(w,n,1)}}this.setMode=i,this.setIndex=c,this.render=f,this.renderInstances=m,this.renderMultiDraw=p,this.renderMultiDrawInstances=g}function pA(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,l,c){switch(t.calls++,l){case r.TRIANGLES:t.triangles+=c*(s/3);break;case r.LINES:t.lines+=c*(s/2);break;case r.LINE_STRIP:t.lines+=c*(s-1);break;case r.LINE_LOOP:t.lines+=c*s;break;case r.POINTS:t.points+=c*s;break;default:Wt("WebGLInfo: Unknown draw mode:",l);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function gA(r,e,t){const n=new WeakMap,i=new vn;function s(l,c,f){const m=l.morphTargetInfluences,p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,g=p!==void 0?p.length:0;let x=n.get(c);if(x===void 0||x.count!==g){let P=function(){G.dispose(),n.delete(c),c.removeEventListener("dispose",P)};var _=P;x!==void 0&&x.texture.dispose();const S=c.morphAttributes.position!==void 0,T=c.morphAttributes.normal!==void 0,M=c.morphAttributes.color!==void 0,w=c.morphAttributes.position||[],C=c.morphAttributes.normal||[],I=c.morphAttributes.color||[];let L=0;S===!0&&(L=1),T===!0&&(L=2),M===!0&&(L=3);let F=c.attributes.position.count*L,N=1;F>e.maxTextureSize&&(N=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const z=new Float32Array(F*N*4*g),G=new _g(z,F,N,g);G.type=va,G.needsUpdate=!0;const D=L*4;for(let V=0;V<g;V++){const ee=w[V],ie=C[V],pe=I[V],me=F*N*4*V;for(let ve=0;ve<ee.count;ve++){const Se=ve*D;S===!0&&(i.fromBufferAttribute(ee,ve),z[me+Se+0]=i.x,z[me+Se+1]=i.y,z[me+Se+2]=i.z,z[me+Se+3]=0),T===!0&&(i.fromBufferAttribute(ie,ve),z[me+Se+4]=i.x,z[me+Se+5]=i.y,z[me+Se+6]=i.z,z[me+Se+7]=0),M===!0&&(i.fromBufferAttribute(pe,ve),z[me+Se+8]=i.x,z[me+Se+9]=i.y,z[me+Se+10]=i.z,z[me+Se+11]=pe.itemSize===4?i.w:1)}}x={count:g,texture:G,size:new Ce(F,N)},n.set(c,x),c.addEventListener("dispose",P)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)f.getUniforms().setValue(r,"morphTexture",l.morphTexture,t);else{let S=0;for(let M=0;M<m.length;M++)S+=m[M];const T=c.morphTargetsRelative?1:1-S;f.getUniforms().setValue(r,"morphTargetBaseInfluence",T),f.getUniforms().setValue(r,"morphTargetInfluences",m)}f.getUniforms().setValue(r,"morphTargetsTexture",x.texture,t),f.getUniforms().setValue(r,"morphTargetsTextureSize",x.size)}return{update:s}}function vA(r,e,t,n){let i=new WeakMap;function s(f){const m=n.render.frame,p=f.geometry,g=e.get(f,p);if(i.get(g)!==m&&(e.update(g),i.set(g,m)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),i.get(f)!==m&&(t.update(f.instanceMatrix,r.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,r.ARRAY_BUFFER),i.set(f,m))),f.isSkinnedMesh){const x=f.skeleton;i.get(x)!==m&&(x.update(),i.set(x,m))}return g}function l(){i=new WeakMap}function c(f){const m=f.target;m.removeEventListener("dispose",c),t.remove(m.instanceMatrix),m.instanceColor!==null&&t.remove(m.instanceColor)}return{update:s,dispose:l}}const xw=new Qn,N_=new Ag(1,1),_w=new _g,bw=new bg,ww=new yf,D_=[],O_=[],U_=new Float32Array(16),F_=new Float32Array(9),B_=new Float32Array(4);function Ec(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=D_[i];if(s===void 0&&(s=new Float32Array(i),D_[i]=s),e!==0){n.toArray(s,0);for(let l=1,c=0;l!==e;++l)c+=t,r[l].toArray(s,c)}return s}function bi(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function wi(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Gg(r,e){let t=O_[e];t===void 0&&(t=new Int32Array(e),O_[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function yA(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function xA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;r.uniform2fv(this.addr,e),wi(t,e)}}function _A(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(bi(t,e))return;r.uniform3fv(this.addr,e),wi(t,e)}}function bA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;r.uniform4fv(this.addr,e),wi(t,e)}}function wA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;B_.set(n),r.uniformMatrix2fv(this.addr,!1,B_),wi(t,n)}}function SA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;F_.set(n),r.uniformMatrix3fv(this.addr,!1,F_),wi(t,n)}}function MA(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(bi(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),wi(t,e)}else{if(bi(t,n))return;U_.set(n),r.uniformMatrix4fv(this.addr,!1,U_),wi(t,n)}}function kA(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function TA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;r.uniform2iv(this.addr,e),wi(t,e)}}function EA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;r.uniform3iv(this.addr,e),wi(t,e)}}function AA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;r.uniform4iv(this.addr,e),wi(t,e)}}function CA(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function IA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bi(t,e))return;r.uniform2uiv(this.addr,e),wi(t,e)}}function RA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bi(t,e))return;r.uniform3uiv(this.addr,e),wi(t,e)}}function PA(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bi(t,e))return;r.uniform4uiv(this.addr,e),wi(t,e)}}function LA(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(N_.compareFunction=a0,s=N_):s=xw,t.setTexture2D(e||s,i)}function NA(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||bw,i)}function DA(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||ww,i)}function OA(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||_w,i)}function UA(r){switch(r){case 5126:return yA;case 35664:return xA;case 35665:return _A;case 35666:return bA;case 35674:return wA;case 35675:return SA;case 35676:return MA;case 5124:case 35670:return kA;case 35667:case 35671:return TA;case 35668:case 35672:return EA;case 35669:case 35673:return AA;case 5125:return CA;case 36294:return IA;case 36295:return RA;case 36296:return PA;case 35678:case 36198:case 36298:case 36306:case 35682:return LA;case 35679:case 36299:case 36307:return NA;case 35680:case 36300:case 36308:case 36293:return DA;case 36289:case 36303:case 36311:case 36292:return OA}}function FA(r,e){r.uniform1fv(this.addr,e)}function BA(r,e){const t=Ec(e,this.size,2);r.uniform2fv(this.addr,t)}function zA(r,e){const t=Ec(e,this.size,3);r.uniform3fv(this.addr,t)}function jA(r,e){const t=Ec(e,this.size,4);r.uniform4fv(this.addr,t)}function VA(r,e){const t=Ec(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function HA(r,e){const t=Ec(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function GA(r,e){const t=Ec(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function WA(r,e){r.uniform1iv(this.addr,e)}function XA(r,e){r.uniform2iv(this.addr,e)}function YA(r,e){r.uniform3iv(this.addr,e)}function qA(r,e){r.uniform4iv(this.addr,e)}function KA(r,e){r.uniform1uiv(this.addr,e)}function ZA(r,e){r.uniform2uiv(this.addr,e)}function JA(r,e){r.uniform3uiv(this.addr,e)}function QA(r,e){r.uniform4uiv(this.addr,e)}function $A(r,e,t){const n=this.cache,i=e.length,s=Gg(t,i);bi(n,s)||(r.uniform1iv(this.addr,s),wi(n,s));for(let l=0;l!==i;++l)t.setTexture2D(e[l]||xw,s[l])}function eC(r,e,t){const n=this.cache,i=e.length,s=Gg(t,i);bi(n,s)||(r.uniform1iv(this.addr,s),wi(n,s));for(let l=0;l!==i;++l)t.setTexture3D(e[l]||bw,s[l])}function tC(r,e,t){const n=this.cache,i=e.length,s=Gg(t,i);bi(n,s)||(r.uniform1iv(this.addr,s),wi(n,s));for(let l=0;l!==i;++l)t.setTextureCube(e[l]||ww,s[l])}function nC(r,e,t){const n=this.cache,i=e.length,s=Gg(t,i);bi(n,s)||(r.uniform1iv(this.addr,s),wi(n,s));for(let l=0;l!==i;++l)t.setTexture2DArray(e[l]||_w,s[l])}function iC(r){switch(r){case 5126:return FA;case 35664:return BA;case 35665:return zA;case 35666:return jA;case 35674:return VA;case 35675:return HA;case 35676:return GA;case 5124:case 35670:return WA;case 35667:case 35671:return XA;case 35668:case 35672:return YA;case 35669:case 35673:return qA;case 5125:return KA;case 36294:return ZA;case 36295:return JA;case 36296:return QA;case 35678:case 36198:case 36298:case 36306:case 35682:return $A;case 35679:case 36299:case 36307:return eC;case 35680:case 36300:case 36308:case 36293:return tC;case 36289:case 36303:case 36311:case 36292:return nC}}class aC{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=UA(t.type)}}class rC{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=iC(t.type)}}class sC{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,l=i.length;s!==l;++s){const c=i[s];c.setValue(e,t[c.id],n)}}}const fy=/(\w+)(\])?(\[|\.)?/g;function z_(r,e){r.seq.push(e),r.map[e.id]=e}function oC(r,e,t){const n=r.name,i=n.length;for(fy.lastIndex=0;;){const s=fy.exec(n),l=fy.lastIndex;let c=s[1];const f=s[2]==="]",m=s[3];if(f&&(c=c|0),m===void 0||m==="["&&l+2===i){z_(t,m===void 0?new aC(c,r,e):new rC(c,r,e));break}else{let g=t.map[c];g===void 0&&(g=new sC(c),z_(t,g)),t=g}}}class gp{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),l=e.getUniformLocation(t,s.name);oC(s,l,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,l=t.length;s!==l;++s){const c=t[s],f=n[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const l=e[i];l.id in t&&n.push(l)}return n}}function j_(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const lC=37297;let hC=0;function uC(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let l=i;l<s;l++){const c=l+1;n.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return n.join(`
`)}const V_=new Zt;function cC(r){mn._getMatrix(V_,mn.workingColorSpace,r);const e=`mat3( ${V_.elements.map(t=>t.toFixed(4))} )`;switch(mn.getTransfer(r)){case af:return[e,"LinearTransferOETF"];case kn:return[e,"sRGBTransferOETF"];default:return ft("WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function H_(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),s=(r.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const l=/ERROR: 0:(\d+)/.exec(s);if(l){const c=parseInt(l[1]);return t.toUpperCase()+`

`+s+`

`+uC(r.getShaderSource(e),c)}else return s}function dC(r,e){const t=cC(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function fC(r,e){let t;switch(e){case Xb:t="Linear";break;case Yb:t="Reinhard";break;case qb:t="Cineon";break;case Ky:t="ACESFilmic";break;case Zb:t="AgX";break;case Jb:t="Neutral";break;case Kb:t="Custom";break;default:ft("WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const lp=new Y;function mC(){mn.getLuminanceCoefficients(lp);const r=lp.x.toFixed(4),e=lp.y.toFixed(4),t=lp.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function pC(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(jd).join(`
`)}function gC(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function vC(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),l=s.name;let c=1;s.type===r.FLOAT_MAT2&&(c=2),s.type===r.FLOAT_MAT3&&(c=3),s.type===r.FLOAT_MAT4&&(c=4),t[l]={type:s.type,location:r.getAttribLocation(e,l),locationSize:c}}return t}function jd(r){return r!==""}function G_(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function W_(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const yC=/^[ \t]*#include +<([\w\d./]+)>/gm;function Wy(r){return r.replace(yC,_C)}const xC=new Map;function _C(r,e){let t=nn[e];if(t===void 0){const n=xC.get(e);if(n!==void 0)t=nn[n],ft('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Wy(t)}const bC=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function X_(r){return r.replace(bC,wC)}function wC(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Y_(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function SC(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===ug?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Vd?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Wr&&(e="SHADOWMAP_TYPE_VSM"),e}function MC(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case uo:case rl:e="ENVMAP_TYPE_CUBE";break;case Mc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kC(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case rl:e="ENVMAP_MODE_REFRACTION";break}return e}function TC(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case pf:e="ENVMAP_BLENDING_MULTIPLY";break;case Gb:e="ENVMAP_BLENDING_MIX";break;case Wb:e="ENVMAP_BLENDING_ADD";break}return e}function EC(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function AC(r,e,t,n){const i=r.getContext(),s=t.defines;let l=t.vertexShader,c=t.fragmentShader;const f=SC(t),m=MC(t),p=kC(t),g=TC(t),x=EC(t),_=pC(t),S=gC(s),T=i.createProgram();let M,w,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(jd).join(`
`),M.length>0&&(M+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(jd).join(`
`),w.length>0&&(w+=`
`)):(M=[Y_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(jd).join(`
`),w=[Y_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==vs?"#define TONE_MAPPING":"",t.toneMapping!==vs?nn.tonemapping_pars_fragment:"",t.toneMapping!==vs?fC("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nn.colorspace_pars_fragment,dC("linearToOutputTexel",t.outputColorSpace),mC(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(jd).join(`
`)),l=Wy(l),l=G_(l,t),l=W_(l,t),c=Wy(c),c=G_(c,t),c=W_(c,t),l=X_(l),c=X_(c),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,M=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,w=["#define varying in",t.glslVersion===Dy?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Dy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const I=C+M+l,L=C+w+c,F=j_(i,i.VERTEX_SHADER,I),N=j_(i,i.FRAGMENT_SHADER,L);i.attachShader(T,F),i.attachShader(T,N),t.index0AttributeName!==void 0?i.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(T,0,"position"),i.linkProgram(T);function z(V){if(r.debug.checkShaderErrors){const ee=i.getProgramInfoLog(T)||"",ie=i.getShaderInfoLog(F)||"",pe=i.getShaderInfoLog(N)||"",me=ee.trim(),ve=ie.trim(),Se=pe.trim();let B=!0,Q=!0;if(i.getProgramParameter(T,i.LINK_STATUS)===!1)if(B=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,T,F,N);else{const K=H_(i,F,"vertex"),H=H_(i,N,"fragment");Wt("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(T,i.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+me+`
`+K+`
`+H)}else me!==""?ft("WebGLProgram: Program Info Log:",me):(ve===""||Se==="")&&(Q=!1);Q&&(V.diagnostics={runnable:B,programLog:me,vertexShader:{log:ve,prefix:M},fragmentShader:{log:Se,prefix:w}})}i.deleteShader(F),i.deleteShader(N),G=new gp(i,T),D=vC(i,T)}let G;this.getUniforms=function(){return G===void 0&&z(this),G};let D;this.getAttributes=function(){return D===void 0&&z(this),D};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(T,lC)),P},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=hC++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=F,this.fragmentShader=N,this}let CC=0;class IC{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(i)===!1&&(l.add(i),i.usedTimes++),l.has(s)===!1&&(l.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new RC(e),t.set(e,n)),n}}class RC{constructor(e){this.id=CC++,this.code=e,this.usedTimes=0}}function PC(r,e,t,n,i,s,l){const c=new Sh,f=new IC,m=new Set,p=[],g=i.logarithmicDepthBuffer,x=i.vertexTextures;let _=i.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(D){return m.add(D),D===0?"uv":`uv${D}`}function M(D,P,V,ee,ie){const pe=ee.fog,me=ie.geometry,ve=D.isMeshStandardMaterial?ee.environment:null,Se=(D.isMeshStandardMaterial?t:e).get(D.envMap||ve),B=Se&&Se.mapping===Mc?Se.image.height:null,Q=S[D.type];D.precision!==null&&(_=i.getMaxPrecision(D.precision),_!==D.precision&&ft("WebGLProgram.getParameters:",D.precision,"not supported, using",_,"instead."));const K=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,H=K!==void 0?K.length:0;let ae=0;me.morphAttributes.position!==void 0&&(ae=1),me.morphAttributes.normal!==void 0&&(ae=2),me.morphAttributes.color!==void 0&&(ae=3);let Re,Ye,rt,ce;if(Q){const en=Xr[Q];Re=en.vertexShader,Ye=en.fragmentShader}else Re=D.vertexShader,Ye=D.fragmentShader,f.update(D),rt=f.getVertexShaderID(D),ce=f.getFragmentShaderID(D);const we=r.getRenderTarget(),Be=r.state.buffers.depth.getReversed(),it=ie.isInstancedMesh===!0,st=ie.isBatchedMesh===!0,Lt=!!D.map,on=!!D.matcap,yt=!!Se,Le=!!D.aoMap,X=!!D.lightMap,Ne=!!D.bumpMap,ze=!!D.normalMap,Ke=!!D.displacementMap,Ue=!!D.emissiveMap,ot=!!D.metalnessMap,$e=!!D.roughnessMap,ut=D.anisotropy>0,W=D.clearcoat>0,O=D.dispersion>0,ue=D.iridescence>0,Te=D.sheen>0,Pe=D.transmission>0,Me=ut&&!!D.anisotropyMap,Mt=W&&!!D.clearcoatMap,et=W&&!!D.clearcoatNormalMap,kt=W&&!!D.clearcoatRoughnessMap,wt=ue&&!!D.iridescenceMap,De=ue&&!!D.iridescenceThicknessMap,Je=Te&&!!D.sheenColorMap,Dt=Te&&!!D.sheenRoughnessMap,$=!!D.specularMap,ye=!!D.specularColorMap,je=!!D.specularIntensityMap,J=Pe&&!!D.transmissionMap,Ve=Pe&&!!D.thicknessMap,He=!!D.gradientMap,Ge=!!D.alphaMap,We=D.alphaTest>0,Ie=!!D.alphaHash,lt=!!D.extensions;let Pt=vs;D.toneMapped&&(we===null||we.isXRRenderTarget===!0)&&(Pt=r.toneMapping);const hn={shaderID:Q,shaderType:D.type,shaderName:D.name,vertexShader:Re,fragmentShader:Ye,defines:D.defines,customVertexShaderID:rt,customFragmentShaderID:ce,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:_,batching:st,batchingColor:st&&ie._colorsTexture!==null,instancing:it,instancingColor:it&&ie.instanceColor!==null,instancingMorph:it&&ie.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:we===null?r.outputColorSpace:we.isXRRenderTarget===!0?we.texture.colorSpace:Th,alphaToCoverage:!!D.alphaToCoverage,map:Lt,matcap:on,envMap:yt,envMapMode:yt&&Se.mapping,envMapCubeUVHeight:B,aoMap:Le,lightMap:X,bumpMap:Ne,normalMap:ze,displacementMap:x&&Ke,emissiveMap:Ue,normalMapObjectSpace:ze&&D.normalMapType===a1,normalMapTangentSpace:ze&&D.normalMapType===hl,metalnessMap:ot,roughnessMap:$e,anisotropy:ut,anisotropyMap:Me,clearcoat:W,clearcoatMap:Mt,clearcoatNormalMap:et,clearcoatRoughnessMap:kt,dispersion:O,iridescence:ue,iridescenceMap:wt,iridescenceThicknessMap:De,sheen:Te,sheenColorMap:Je,sheenRoughnessMap:Dt,specularMap:$,specularColorMap:ye,specularIntensityMap:je,transmission:Pe,transmissionMap:J,thicknessMap:Ve,gradientMap:He,opaque:D.transparent===!1&&D.blending===bh&&D.alphaToCoverage===!1,alphaMap:Ge,alphaTest:We,alphaHash:Ie,combine:D.combine,mapUv:Lt&&T(D.map.channel),aoMapUv:Le&&T(D.aoMap.channel),lightMapUv:X&&T(D.lightMap.channel),bumpMapUv:Ne&&T(D.bumpMap.channel),normalMapUv:ze&&T(D.normalMap.channel),displacementMapUv:Ke&&T(D.displacementMap.channel),emissiveMapUv:Ue&&T(D.emissiveMap.channel),metalnessMapUv:ot&&T(D.metalnessMap.channel),roughnessMapUv:$e&&T(D.roughnessMap.channel),anisotropyMapUv:Me&&T(D.anisotropyMap.channel),clearcoatMapUv:Mt&&T(D.clearcoatMap.channel),clearcoatNormalMapUv:et&&T(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:kt&&T(D.clearcoatRoughnessMap.channel),iridescenceMapUv:wt&&T(D.iridescenceMap.channel),iridescenceThicknessMapUv:De&&T(D.iridescenceThicknessMap.channel),sheenColorMapUv:Je&&T(D.sheenColorMap.channel),sheenRoughnessMapUv:Dt&&T(D.sheenRoughnessMap.channel),specularMapUv:$&&T(D.specularMap.channel),specularColorMapUv:ye&&T(D.specularColorMap.channel),specularIntensityMapUv:je&&T(D.specularIntensityMap.channel),transmissionMapUv:J&&T(D.transmissionMap.channel),thicknessMapUv:Ve&&T(D.thicknessMap.channel),alphaMapUv:Ge&&T(D.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&(ze||ut),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,pointsUvs:ie.isPoints===!0&&!!me.attributes.uv&&(Lt||Ge),fog:!!pe,useFog:D.fog===!0,fogExp2:!!pe&&pe.isFogExp2,flatShading:D.flatShading===!0&&D.wireframe===!1,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:g,reversedDepthBuffer:Be,skinning:ie.isSkinnedMesh===!0,morphTargets:me.morphAttributes.position!==void 0,morphNormals:me.morphAttributes.normal!==void 0,morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:ae,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:D.dithering,shadowMapEnabled:r.shadowMap.enabled&&V.length>0,shadowMapType:r.shadowMap.type,toneMapping:Pt,decodeVideoTexture:Lt&&D.map.isVideoTexture===!0&&mn.getTransfer(D.map.colorSpace)===kn,decodeVideoTextureEmissive:Ue&&D.emissiveMap.isVideoTexture===!0&&mn.getTransfer(D.emissiveMap.colorSpace)===kn,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===pr,flipSided:D.side===ya,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:lt&&D.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(lt&&D.extensions.multiDraw===!0||st)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return hn.vertexUv1s=m.has(1),hn.vertexUv2s=m.has(2),hn.vertexUv3s=m.has(3),m.clear(),hn}function w(D){const P=[];if(D.shaderID?P.push(D.shaderID):(P.push(D.customVertexShaderID),P.push(D.customFragmentShaderID)),D.defines!==void 0)for(const V in D.defines)P.push(V),P.push(D.defines[V]);return D.isRawShaderMaterial===!1&&(C(P,D),I(P,D),P.push(r.outputColorSpace)),P.push(D.customProgramCacheKey),P.join()}function C(D,P){D.push(P.precision),D.push(P.outputColorSpace),D.push(P.envMapMode),D.push(P.envMapCubeUVHeight),D.push(P.mapUv),D.push(P.alphaMapUv),D.push(P.lightMapUv),D.push(P.aoMapUv),D.push(P.bumpMapUv),D.push(P.normalMapUv),D.push(P.displacementMapUv),D.push(P.emissiveMapUv),D.push(P.metalnessMapUv),D.push(P.roughnessMapUv),D.push(P.anisotropyMapUv),D.push(P.clearcoatMapUv),D.push(P.clearcoatNormalMapUv),D.push(P.clearcoatRoughnessMapUv),D.push(P.iridescenceMapUv),D.push(P.iridescenceThicknessMapUv),D.push(P.sheenColorMapUv),D.push(P.sheenRoughnessMapUv),D.push(P.specularMapUv),D.push(P.specularColorMapUv),D.push(P.specularIntensityMapUv),D.push(P.transmissionMapUv),D.push(P.thicknessMapUv),D.push(P.combine),D.push(P.fogExp2),D.push(P.sizeAttenuation),D.push(P.morphTargetsCount),D.push(P.morphAttributeCount),D.push(P.numDirLights),D.push(P.numPointLights),D.push(P.numSpotLights),D.push(P.numSpotLightMaps),D.push(P.numHemiLights),D.push(P.numRectAreaLights),D.push(P.numDirLightShadows),D.push(P.numPointLightShadows),D.push(P.numSpotLightShadows),D.push(P.numSpotLightShadowsWithMaps),D.push(P.numLightProbes),D.push(P.shadowMapType),D.push(P.toneMapping),D.push(P.numClippingPlanes),D.push(P.numClipIntersection),D.push(P.depthPacking)}function I(D,P){c.disableAll(),P.supportsVertexTextures&&c.enable(0),P.instancing&&c.enable(1),P.instancingColor&&c.enable(2),P.instancingMorph&&c.enable(3),P.matcap&&c.enable(4),P.envMap&&c.enable(5),P.normalMapObjectSpace&&c.enable(6),P.normalMapTangentSpace&&c.enable(7),P.clearcoat&&c.enable(8),P.iridescence&&c.enable(9),P.alphaTest&&c.enable(10),P.vertexColors&&c.enable(11),P.vertexAlphas&&c.enable(12),P.vertexUv1s&&c.enable(13),P.vertexUv2s&&c.enable(14),P.vertexUv3s&&c.enable(15),P.vertexTangents&&c.enable(16),P.anisotropy&&c.enable(17),P.alphaHash&&c.enable(18),P.batching&&c.enable(19),P.dispersion&&c.enable(20),P.batchingColor&&c.enable(21),P.gradientMap&&c.enable(22),D.push(c.mask),c.disableAll(),P.fog&&c.enable(0),P.useFog&&c.enable(1),P.flatShading&&c.enable(2),P.logarithmicDepthBuffer&&c.enable(3),P.reversedDepthBuffer&&c.enable(4),P.skinning&&c.enable(5),P.morphTargets&&c.enable(6),P.morphNormals&&c.enable(7),P.morphColors&&c.enable(8),P.premultipliedAlpha&&c.enable(9),P.shadowMapEnabled&&c.enable(10),P.doubleSided&&c.enable(11),P.flipSided&&c.enable(12),P.useDepthPacking&&c.enable(13),P.dithering&&c.enable(14),P.transmission&&c.enable(15),P.sheen&&c.enable(16),P.opaque&&c.enable(17),P.pointsUvs&&c.enable(18),P.decodeVideoTexture&&c.enable(19),P.decodeVideoTextureEmissive&&c.enable(20),P.alphaToCoverage&&c.enable(21),D.push(c.mask)}function L(D){const P=S[D.type];let V;if(P){const ee=Xr[P];V=y1.clone(ee.uniforms)}else V=D.uniforms;return V}function F(D,P){let V;for(let ee=0,ie=p.length;ee<ie;ee++){const pe=p[ee];if(pe.cacheKey===P){V=pe,++V.usedTimes;break}}return V===void 0&&(V=new AC(r,P,D,s),p.push(V)),V}function N(D){if(--D.usedTimes===0){const P=p.indexOf(D);p[P]=p[p.length-1],p.pop(),D.destroy()}}function z(D){f.remove(D)}function G(){f.dispose()}return{getParameters:M,getProgramCacheKey:w,getUniforms:L,acquireProgram:F,releaseProgram:N,releaseShaderCache:z,programs:p,dispose:G}}function LC(){let r=new WeakMap;function e(l){return r.has(l)}function t(l){let c=r.get(l);return c===void 0&&(c={},r.set(l,c)),c}function n(l){r.delete(l)}function i(l,c,f){r.get(l)[c]=f}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function NC(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function q_(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function K_(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function l(g,x,_,S,T,M){let w=r[e];return w===void 0?(w={id:g.id,object:g,geometry:x,material:_,groupOrder:S,renderOrder:g.renderOrder,z:T,group:M},r[e]=w):(w.id=g.id,w.object=g,w.geometry=x,w.material=_,w.groupOrder=S,w.renderOrder=g.renderOrder,w.z=T,w.group=M),e++,w}function c(g,x,_,S,T,M){const w=l(g,x,_,S,T,M);_.transmission>0?n.push(w):_.transparent===!0?i.push(w):t.push(w)}function f(g,x,_,S,T,M){const w=l(g,x,_,S,T,M);_.transmission>0?n.unshift(w):_.transparent===!0?i.unshift(w):t.unshift(w)}function m(g,x){t.length>1&&t.sort(g||NC),n.length>1&&n.sort(x||q_),i.length>1&&i.sort(x||q_)}function p(){for(let g=e,x=r.length;g<x;g++){const _=r[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:c,unshift:f,finish:p,sort:m}}function DC(){let r=new WeakMap;function e(n,i){const s=r.get(n);let l;return s===void 0?(l=new K_,r.set(n,[l])):i>=s.length?(l=new K_,s.push(l)):l=s[i],l}function t(){r=new WeakMap}return{get:e,dispose:t}}function OC(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new xt};break;case"SpotLight":t={position:new Y,direction:new Y,color:new xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new xt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new xt,groundColor:new xt};break;case"RectAreaLight":t={color:new xt,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return r[e.id]=t,t}}}function UC(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let FC=0;function BC(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function zC(r){const e=new OC,t=UC(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;m<9;m++)n.probe.push(new Y);const i=new Y,s=new Vt,l=new Vt;function c(m){let p=0,g=0,x=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let _=0,S=0,T=0,M=0,w=0,C=0,I=0,L=0,F=0,N=0,z=0;m.sort(BC);for(let D=0,P=m.length;D<P;D++){const V=m[D],ee=V.color,ie=V.intensity,pe=V.distance,me=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)p+=ee.r*ie,g+=ee.g*ie,x+=ee.b*ie;else if(V.isLightProbe){for(let ve=0;ve<9;ve++)n.probe[ve].addScaledVector(V.sh.coefficients[ve],ie);z++}else if(V.isDirectionalLight){const ve=e.get(V);if(ve.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const Se=V.shadow,B=t.get(V);B.shadowIntensity=Se.intensity,B.shadowBias=Se.bias,B.shadowNormalBias=Se.normalBias,B.shadowRadius=Se.radius,B.shadowMapSize=Se.mapSize,n.directionalShadow[_]=B,n.directionalShadowMap[_]=me,n.directionalShadowMatrix[_]=V.shadow.matrix,C++}n.directional[_]=ve,_++}else if(V.isSpotLight){const ve=e.get(V);ve.position.setFromMatrixPosition(V.matrixWorld),ve.color.copy(ee).multiplyScalar(ie),ve.distance=pe,ve.coneCos=Math.cos(V.angle),ve.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),ve.decay=V.decay,n.spot[T]=ve;const Se=V.shadow;if(V.map&&(n.spotLightMap[F]=V.map,F++,Se.updateMatrices(V),V.castShadow&&N++),n.spotLightMatrix[T]=Se.matrix,V.castShadow){const B=t.get(V);B.shadowIntensity=Se.intensity,B.shadowBias=Se.bias,B.shadowNormalBias=Se.normalBias,B.shadowRadius=Se.radius,B.shadowMapSize=Se.mapSize,n.spotShadow[T]=B,n.spotShadowMap[T]=me,L++}T++}else if(V.isRectAreaLight){const ve=e.get(V);ve.color.copy(ee).multiplyScalar(ie),ve.halfWidth.set(V.width*.5,0,0),ve.halfHeight.set(0,V.height*.5,0),n.rectArea[M]=ve,M++}else if(V.isPointLight){const ve=e.get(V);if(ve.color.copy(V.color).multiplyScalar(V.intensity),ve.distance=V.distance,ve.decay=V.decay,V.castShadow){const Se=V.shadow,B=t.get(V);B.shadowIntensity=Se.intensity,B.shadowBias=Se.bias,B.shadowNormalBias=Se.normalBias,B.shadowRadius=Se.radius,B.shadowMapSize=Se.mapSize,B.shadowCameraNear=Se.camera.near,B.shadowCameraFar=Se.camera.far,n.pointShadow[S]=B,n.pointShadowMap[S]=me,n.pointShadowMatrix[S]=V.shadow.matrix,I++}n.point[S]=ve,S++}else if(V.isHemisphereLight){const ve=e.get(V);ve.skyColor.copy(V.color).multiplyScalar(ie),ve.groundColor.copy(V.groundColor).multiplyScalar(ie),n.hemi[w]=ve,w++}}M>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=dt.LTC_FLOAT_1,n.rectAreaLTC2=dt.LTC_FLOAT_2):(n.rectAreaLTC1=dt.LTC_HALF_1,n.rectAreaLTC2=dt.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=g,n.ambient[2]=x;const G=n.hash;(G.directionalLength!==_||G.pointLength!==S||G.spotLength!==T||G.rectAreaLength!==M||G.hemiLength!==w||G.numDirectionalShadows!==C||G.numPointShadows!==I||G.numSpotShadows!==L||G.numSpotMaps!==F||G.numLightProbes!==z)&&(n.directional.length=_,n.spot.length=T,n.rectArea.length=M,n.point.length=S,n.hemi.length=w,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=I,n.pointShadowMap.length=I,n.spotShadow.length=L,n.spotShadowMap.length=L,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=I,n.spotLightMatrix.length=L+F-N,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=N,n.numLightProbes=z,G.directionalLength=_,G.pointLength=S,G.spotLength=T,G.rectAreaLength=M,G.hemiLength=w,G.numDirectionalShadows=C,G.numPointShadows=I,G.numSpotShadows=L,G.numSpotMaps=F,G.numLightProbes=z,n.version=FC++)}function f(m,p){let g=0,x=0,_=0,S=0,T=0;const M=p.matrixWorldInverse;for(let w=0,C=m.length;w<C;w++){const I=m[w];if(I.isDirectionalLight){const L=n.directional[g];L.direction.setFromMatrixPosition(I.matrixWorld),i.setFromMatrixPosition(I.target.matrixWorld),L.direction.sub(i),L.direction.transformDirection(M),g++}else if(I.isSpotLight){const L=n.spot[_];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(M),L.direction.setFromMatrixPosition(I.matrixWorld),i.setFromMatrixPosition(I.target.matrixWorld),L.direction.sub(i),L.direction.transformDirection(M),_++}else if(I.isRectAreaLight){const L=n.rectArea[S];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(M),l.identity(),s.copy(I.matrixWorld),s.premultiply(M),l.extractRotation(s),L.halfWidth.set(I.width*.5,0,0),L.halfHeight.set(0,I.height*.5,0),L.halfWidth.applyMatrix4(l),L.halfHeight.applyMatrix4(l),S++}else if(I.isPointLight){const L=n.point[x];L.position.setFromMatrixPosition(I.matrixWorld),L.position.applyMatrix4(M),x++}else if(I.isHemisphereLight){const L=n.hemi[T];L.direction.setFromMatrixPosition(I.matrixWorld),L.direction.transformDirection(M),T++}}}return{setup:c,setupView:f,state:n}}function Z_(r){const e=new zC(r),t=[],n=[];function i(p){m.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function l(p){n.push(p)}function c(){e.setup(t)}function f(p){e.setupView(t,p)}const m={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:m,setupLights:c,setupLightsView:f,pushLight:s,pushShadow:l}}function jC(r){let e=new WeakMap;function t(i,s=0){const l=e.get(i);let c;return l===void 0?(c=new Z_(r),e.set(i,[c])):s>=l.length?(c=new Z_(r),l.push(c)):c=l[s],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const VC=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,HC=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GC(r,e,t){let n=new kc;const i=new Ce,s=new Ce,l=new vn,c=new b0({depthPacking:i1}),f=new w0,m={},p=t.maxTextureSize,g={[ho]:ya,[ya]:ho,[pr]:pr},x=new vr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:VC,fragmentShader:HC}),_=x.clone();_.defines.HORIZONTAL_PASS=1;const S=new Jt;S.setAttribute("position",new Cn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new _i(S,x),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ug;let w=this.type;this.render=function(N,z,G){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||N.length===0)return;const D=r.getRenderTarget(),P=r.getActiveCubeFace(),V=r.getActiveMipmapLevel(),ee=r.state;ee.setBlending(gs),ee.buffers.depth.getReversed()===!0?ee.buffers.color.setClear(0,0,0,0):ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const ie=w!==Wr&&this.type===Wr,pe=w===Wr&&this.type!==Wr;for(let me=0,ve=N.length;me<ve;me++){const Se=N[me],B=Se.shadow;if(B===void 0){ft("WebGLShadowMap:",Se,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const Q=B.getFrameExtents();if(i.multiply(Q),s.copy(B.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(s.x=Math.floor(p/Q.x),i.x=s.x*Q.x,B.mapSize.x=s.x),i.y>p&&(s.y=Math.floor(p/Q.y),i.y=s.y*Q.y,B.mapSize.y=s.y)),B.map===null||ie===!0||pe===!0){const H=this.type!==Wr?{minFilter:zi,magFilter:zi}:{};B.map!==null&&B.map.dispose(),B.map=new Kr(i.x,i.y,H),B.map.texture.name=Se.name+".shadowMap",B.camera.updateProjectionMatrix()}r.setRenderTarget(B.map),r.clear();const K=B.getViewportCount();for(let H=0;H<K;H++){const ae=B.getViewport(H);l.set(s.x*ae.x,s.y*ae.y,s.x*ae.z,s.y*ae.w),ee.viewport(l),B.updateMatrices(Se,H),n=B.getFrustum(),L(z,G,B.camera,Se,this.type)}B.isPointLightShadow!==!0&&this.type===Wr&&C(B,G),B.needsUpdate=!1}w=this.type,M.needsUpdate=!1,r.setRenderTarget(D,P,V)};function C(N,z){const G=e.update(T);x.defines.VSM_SAMPLES!==N.blurSamples&&(x.defines.VSM_SAMPLES=N.blurSamples,_.defines.VSM_SAMPLES=N.blurSamples,x.needsUpdate=!0,_.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Kr(i.x,i.y)),x.uniforms.shadow_pass.value=N.map.texture,x.uniforms.resolution.value=N.mapSize,x.uniforms.radius.value=N.radius,r.setRenderTarget(N.mapPass),r.clear(),r.renderBufferDirect(z,null,G,x,T,null),_.uniforms.shadow_pass.value=N.mapPass.texture,_.uniforms.resolution.value=N.mapSize,_.uniforms.radius.value=N.radius,r.setRenderTarget(N.map),r.clear(),r.renderBufferDirect(z,null,G,_,T,null)}function I(N,z,G,D){let P=null;const V=G.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(V!==void 0)P=V;else if(P=G.isPointLight===!0?f:c,r.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const ee=P.uuid,ie=z.uuid;let pe=m[ee];pe===void 0&&(pe={},m[ee]=pe);let me=pe[ie];me===void 0&&(me=P.clone(),pe[ie]=me,z.addEventListener("dispose",F)),P=me}if(P.visible=z.visible,P.wireframe=z.wireframe,D===Wr?P.side=z.shadowSide!==null?z.shadowSide:z.side:P.side=z.shadowSide!==null?z.shadowSide:g[z.side],P.alphaMap=z.alphaMap,P.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,P.map=z.map,P.clipShadows=z.clipShadows,P.clippingPlanes=z.clippingPlanes,P.clipIntersection=z.clipIntersection,P.displacementMap=z.displacementMap,P.displacementScale=z.displacementScale,P.displacementBias=z.displacementBias,P.wireframeLinewidth=z.wireframeLinewidth,P.linewidth=z.linewidth,G.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const ee=r.properties.get(P);ee.light=G}return P}function L(N,z,G,D,P){if(N.visible===!1)return;if(N.layers.test(z.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&P===Wr)&&(!N.frustumCulled||n.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,N.matrixWorld);const ie=e.update(N),pe=N.material;if(Array.isArray(pe)){const me=ie.groups;for(let ve=0,Se=me.length;ve<Se;ve++){const B=me[ve],Q=pe[B.materialIndex];if(Q&&Q.visible){const K=I(N,Q,D,P);N.onBeforeShadow(r,N,z,G,ie,K,B),r.renderBufferDirect(G,null,ie,K,N,B),N.onAfterShadow(r,N,z,G,ie,K,B)}}}else if(pe.visible){const me=I(N,pe,D,P);N.onBeforeShadow(r,N,z,G,ie,me,null),r.renderBufferDirect(G,null,ie,me,N,null),N.onAfterShadow(r,N,z,G,ie,me,null)}}const ee=N.children;for(let ie=0,pe=ee.length;ie<pe;ie++)L(ee[ie],z,G,D,P)}function F(N){N.target.removeEventListener("dispose",F);for(const G in m){const D=m[G],P=N.target.uuid;P in D&&(D[P].dispose(),delete D[P])}}}const WC={[_p]:bp,[wp]:kp,[Sp]:Tp,[kh]:Mp,[bp]:_p,[kp]:wp,[Tp]:Sp,[Mp]:kh};function XC(r,e){function t(){let J=!1;const Ve=new vn;let He=null;const Ge=new vn(0,0,0,0);return{setMask:function(We){He!==We&&!J&&(r.colorMask(We,We,We,We),He=We)},setLocked:function(We){J=We},setClear:function(We,Ie,lt,Pt,hn){hn===!0&&(We*=Pt,Ie*=Pt,lt*=Pt),Ve.set(We,Ie,lt,Pt),Ge.equals(Ve)===!1&&(r.clearColor(We,Ie,lt,Pt),Ge.copy(Ve))},reset:function(){J=!1,He=null,Ge.set(-1,0,0,0)}}}function n(){let J=!1,Ve=!1,He=null,Ge=null,We=null;return{setReversed:function(Ie){if(Ve!==Ie){const lt=e.get("EXT_clip_control");Ie?lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.ZERO_TO_ONE_EXT):lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.NEGATIVE_ONE_TO_ONE_EXT),Ve=Ie;const Pt=We;We=null,this.setClear(Pt)}},getReversed:function(){return Ve},setTest:function(Ie){Ie?we(r.DEPTH_TEST):Be(r.DEPTH_TEST)},setMask:function(Ie){He!==Ie&&!J&&(r.depthMask(Ie),He=Ie)},setFunc:function(Ie){if(Ve&&(Ie=WC[Ie]),Ge!==Ie){switch(Ie){case _p:r.depthFunc(r.NEVER);break;case bp:r.depthFunc(r.ALWAYS);break;case wp:r.depthFunc(r.LESS);break;case kh:r.depthFunc(r.LEQUAL);break;case Sp:r.depthFunc(r.EQUAL);break;case Mp:r.depthFunc(r.GEQUAL);break;case kp:r.depthFunc(r.GREATER);break;case Tp:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ge=Ie}},setLocked:function(Ie){J=Ie},setClear:function(Ie){We!==Ie&&(Ve&&(Ie=1-Ie),r.clearDepth(Ie),We=Ie)},reset:function(){J=!1,He=null,Ge=null,We=null,Ve=!1}}}function i(){let J=!1,Ve=null,He=null,Ge=null,We=null,Ie=null,lt=null,Pt=null,hn=null;return{setTest:function(en){J||(en?we(r.STENCIL_TEST):Be(r.STENCIL_TEST))},setMask:function(en){Ve!==en&&!J&&(r.stencilMask(en),Ve=en)},setFunc:function(en,Xn,Un){(He!==en||Ge!==Xn||We!==Un)&&(r.stencilFunc(en,Xn,Un),He=en,Ge=Xn,We=Un)},setOp:function(en,Xn,Un){(Ie!==en||lt!==Xn||Pt!==Un)&&(r.stencilOp(en,Xn,Un),Ie=en,lt=Xn,Pt=Un)},setLocked:function(en){J=en},setClear:function(en){hn!==en&&(r.clearStencil(en),hn=en)},reset:function(){J=!1,Ve=null,He=null,Ge=null,We=null,Ie=null,lt=null,Pt=null,hn=null}}}const s=new t,l=new n,c=new i,f=new WeakMap,m=new WeakMap;let p={},g={},x=new WeakMap,_=[],S=null,T=!1,M=null,w=null,C=null,I=null,L=null,F=null,N=null,z=new xt(0,0,0),G=0,D=!1,P=null,V=null,ee=null,ie=null,pe=null;const me=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ve=!1,Se=0;const B=r.getParameter(r.VERSION);B.indexOf("WebGL")!==-1?(Se=parseFloat(/^WebGL (\d)/.exec(B)[1]),ve=Se>=1):B.indexOf("OpenGL ES")!==-1&&(Se=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),ve=Se>=2);let Q=null,K={};const H=r.getParameter(r.SCISSOR_BOX),ae=r.getParameter(r.VIEWPORT),Re=new vn().fromArray(H),Ye=new vn().fromArray(ae);function rt(J,Ve,He,Ge){const We=new Uint8Array(4),Ie=r.createTexture();r.bindTexture(J,Ie),r.texParameteri(J,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(J,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let lt=0;lt<He;lt++)J===r.TEXTURE_3D||J===r.TEXTURE_2D_ARRAY?r.texImage3D(Ve,0,r.RGBA,1,1,Ge,0,r.RGBA,r.UNSIGNED_BYTE,We):r.texImage2D(Ve+lt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,We);return Ie}const ce={};ce[r.TEXTURE_2D]=rt(r.TEXTURE_2D,r.TEXTURE_2D,1),ce[r.TEXTURE_CUBE_MAP]=rt(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),ce[r.TEXTURE_2D_ARRAY]=rt(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),ce[r.TEXTURE_3D]=rt(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),we(r.DEPTH_TEST),l.setFunc(kh),Ne(!1),ze(Cy),we(r.CULL_FACE),Le(gs);function we(J){p[J]!==!0&&(r.enable(J),p[J]=!0)}function Be(J){p[J]!==!1&&(r.disable(J),p[J]=!1)}function it(J,Ve){return g[J]!==Ve?(r.bindFramebuffer(J,Ve),g[J]=Ve,J===r.DRAW_FRAMEBUFFER&&(g[r.FRAMEBUFFER]=Ve),J===r.FRAMEBUFFER&&(g[r.DRAW_FRAMEBUFFER]=Ve),!0):!1}function st(J,Ve){let He=_,Ge=!1;if(J){He=x.get(Ve),He===void 0&&(He=[],x.set(Ve,He));const We=J.textures;if(He.length!==We.length||He[0]!==r.COLOR_ATTACHMENT0){for(let Ie=0,lt=We.length;Ie<lt;Ie++)He[Ie]=r.COLOR_ATTACHMENT0+Ie;He.length=We.length,Ge=!0}}else He[0]!==r.BACK&&(He[0]=r.BACK,Ge=!0);Ge&&r.drawBuffers(He)}function Lt(J){return S!==J?(r.useProgram(J),S=J,!0):!1}const on={[tl]:r.FUNC_ADD,[Eb]:r.FUNC_SUBTRACT,[Ab]:r.FUNC_REVERSE_SUBTRACT};on[Cb]=r.MIN,on[Ib]=r.MAX;const yt={[Rb]:r.ZERO,[Pb]:r.ONE,[Lb]:r.SRC_COLOR,[yp]:r.SRC_ALPHA,[Bb]:r.SRC_ALPHA_SATURATE,[Ub]:r.DST_COLOR,[Db]:r.DST_ALPHA,[Nb]:r.ONE_MINUS_SRC_COLOR,[xp]:r.ONE_MINUS_SRC_ALPHA,[Fb]:r.ONE_MINUS_DST_COLOR,[Ob]:r.ONE_MINUS_DST_ALPHA,[zb]:r.CONSTANT_COLOR,[jb]:r.ONE_MINUS_CONSTANT_COLOR,[Vb]:r.CONSTANT_ALPHA,[Hb]:r.ONE_MINUS_CONSTANT_ALPHA};function Le(J,Ve,He,Ge,We,Ie,lt,Pt,hn,en){if(J===gs){T===!0&&(Be(r.BLEND),T=!1);return}if(T===!1&&(we(r.BLEND),T=!0),J!==Tb){if(J!==M||en!==D){if((w!==tl||L!==tl)&&(r.blendEquation(r.FUNC_ADD),w=tl,L=tl),en)switch(J){case bh:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Iy:r.blendFunc(r.ONE,r.ONE);break;case Ry:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Py:r.blendFuncSeparate(r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ZERO,r.ONE);break;default:Wt("WebGLState: Invalid blending: ",J);break}else switch(J){case bh:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Iy:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE,r.ONE,r.ONE);break;case Ry:Wt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Py:Wt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Wt("WebGLState: Invalid blending: ",J);break}C=null,I=null,F=null,N=null,z.set(0,0,0),G=0,M=J,D=en}return}We=We||Ve,Ie=Ie||He,lt=lt||Ge,(Ve!==w||We!==L)&&(r.blendEquationSeparate(on[Ve],on[We]),w=Ve,L=We),(He!==C||Ge!==I||Ie!==F||lt!==N)&&(r.blendFuncSeparate(yt[He],yt[Ge],yt[Ie],yt[lt]),C=He,I=Ge,F=Ie,N=lt),(Pt.equals(z)===!1||hn!==G)&&(r.blendColor(Pt.r,Pt.g,Pt.b,hn),z.copy(Pt),G=hn),M=J,D=!1}function X(J,Ve){J.side===pr?Be(r.CULL_FACE):we(r.CULL_FACE);let He=J.side===ya;Ve&&(He=!He),Ne(He),J.blending===bh&&J.transparent===!1?Le(gs):Le(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),l.setFunc(J.depthFunc),l.setTest(J.depthTest),l.setMask(J.depthWrite),s.setMask(J.colorWrite);const Ge=J.stencilWrite;c.setTest(Ge),Ge&&(c.setMask(J.stencilWriteMask),c.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),c.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),Ue(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?we(r.SAMPLE_ALPHA_TO_COVERAGE):Be(r.SAMPLE_ALPHA_TO_COVERAGE)}function Ne(J){P!==J&&(J?r.frontFace(r.CW):r.frontFace(r.CCW),P=J)}function ze(J){J!==Sb?(we(r.CULL_FACE),J!==V&&(J===Cy?r.cullFace(r.BACK):J===Mb?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):Be(r.CULL_FACE),V=J}function Ke(J){J!==ee&&(ve&&r.lineWidth(J),ee=J)}function Ue(J,Ve,He){J?(we(r.POLYGON_OFFSET_FILL),(ie!==Ve||pe!==He)&&(r.polygonOffset(Ve,He),ie=Ve,pe=He)):Be(r.POLYGON_OFFSET_FILL)}function ot(J){J?we(r.SCISSOR_TEST):Be(r.SCISSOR_TEST)}function $e(J){J===void 0&&(J=r.TEXTURE0+me-1),Q!==J&&(r.activeTexture(J),Q=J)}function ut(J,Ve,He){He===void 0&&(Q===null?He=r.TEXTURE0+me-1:He=Q);let Ge=K[He];Ge===void 0&&(Ge={type:void 0,texture:void 0},K[He]=Ge),(Ge.type!==J||Ge.texture!==Ve)&&(Q!==He&&(r.activeTexture(He),Q=He),r.bindTexture(J,Ve||ce[J]),Ge.type=J,Ge.texture=Ve)}function W(){const J=K[Q];J!==void 0&&J.type!==void 0&&(r.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function O(){try{r.compressedTexImage2D(...arguments)}catch(J){J("WebGLState:",J)}}function ue(){try{r.compressedTexImage3D(...arguments)}catch(J){J("WebGLState:",J)}}function Te(){try{r.texSubImage2D(...arguments)}catch(J){J("WebGLState:",J)}}function Pe(){try{r.texSubImage3D(...arguments)}catch(J){J("WebGLState:",J)}}function Me(){try{r.compressedTexSubImage2D(...arguments)}catch(J){J("WebGLState:",J)}}function Mt(){try{r.compressedTexSubImage3D(...arguments)}catch(J){J("WebGLState:",J)}}function et(){try{r.texStorage2D(...arguments)}catch(J){J("WebGLState:",J)}}function kt(){try{r.texStorage3D(...arguments)}catch(J){J("WebGLState:",J)}}function wt(){try{r.texImage2D(...arguments)}catch(J){J("WebGLState:",J)}}function De(){try{r.texImage3D(...arguments)}catch(J){J("WebGLState:",J)}}function Je(J){Re.equals(J)===!1&&(r.scissor(J.x,J.y,J.z,J.w),Re.copy(J))}function Dt(J){Ye.equals(J)===!1&&(r.viewport(J.x,J.y,J.z,J.w),Ye.copy(J))}function $(J,Ve){let He=m.get(Ve);He===void 0&&(He=new WeakMap,m.set(Ve,He));let Ge=He.get(J);Ge===void 0&&(Ge=r.getUniformBlockIndex(Ve,J.name),He.set(J,Ge))}function ye(J,Ve){const Ge=m.get(Ve).get(J);f.get(Ve)!==Ge&&(r.uniformBlockBinding(Ve,Ge,J.__bindingPointIndex),f.set(Ve,Ge))}function je(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),l.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),p={},Q=null,K={},g={},x=new WeakMap,_=[],S=null,T=!1,M=null,w=null,C=null,I=null,L=null,F=null,N=null,z=new xt(0,0,0),G=0,D=!1,P=null,V=null,ee=null,ie=null,pe=null,Re.set(0,0,r.canvas.width,r.canvas.height),Ye.set(0,0,r.canvas.width,r.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:we,disable:Be,bindFramebuffer:it,drawBuffers:st,useProgram:Lt,setBlending:Le,setMaterial:X,setFlipSided:Ne,setCullFace:ze,setLineWidth:Ke,setPolygonOffset:Ue,setScissorTest:ot,activeTexture:$e,bindTexture:ut,unbindTexture:W,compressedTexImage2D:O,compressedTexImage3D:ue,texImage2D:wt,texImage3D:De,updateUBOMapping:$,uniformBlockBinding:ye,texStorage2D:et,texStorage3D:kt,texSubImage2D:Te,texSubImage3D:Pe,compressedTexSubImage2D:Me,compressedTexSubImage3D:Mt,scissor:Je,viewport:Dt,reset:je}}function YC(r,e,t,n,i,s,l){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new Ce,p=new WeakMap;let g;const x=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(W,O){return _?new OffscreenCanvas(W,O):sf("canvas")}function T(W,O,ue){let Te=1;const Pe=ut(W);if((Pe.width>ue||Pe.height>ue)&&(Te=ue/Math.max(Pe.width,Pe.height)),Te<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const Me=Math.floor(Te*Pe.width),Mt=Math.floor(Te*Pe.height);g===void 0&&(g=S(Me,Mt));const et=O?S(Me,Mt):g;return et.width=Me,et.height=Mt,et.getContext("2d").drawImage(W,0,0,Me,Mt),ft("WebGLRenderer: Texture has been resized from ("+Pe.width+"x"+Pe.height+") to ("+Me+"x"+Mt+")."),et}else return"data"in W&&ft("WebGLRenderer: Image in DataTexture is too big ("+Pe.width+"x"+Pe.height+")."),W;return W}function M(W){return W.generateMipmaps}function w(W){r.generateMipmap(W)}function C(W){return W.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:W.isWebGL3DRenderTarget?r.TEXTURE_3D:W.isWebGLArrayRenderTarget||W.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function I(W,O,ue,Te,Pe=!1){if(W!==null){if(r[W]!==void 0)return r[W];ft("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Me=O;if(O===r.RED&&(ue===r.FLOAT&&(Me=r.R32F),ue===r.HALF_FLOAT&&(Me=r.R16F),ue===r.UNSIGNED_BYTE&&(Me=r.R8)),O===r.RED_INTEGER&&(ue===r.UNSIGNED_BYTE&&(Me=r.R8UI),ue===r.UNSIGNED_SHORT&&(Me=r.R16UI),ue===r.UNSIGNED_INT&&(Me=r.R32UI),ue===r.BYTE&&(Me=r.R8I),ue===r.SHORT&&(Me=r.R16I),ue===r.INT&&(Me=r.R32I)),O===r.RG&&(ue===r.FLOAT&&(Me=r.RG32F),ue===r.HALF_FLOAT&&(Me=r.RG16F),ue===r.UNSIGNED_BYTE&&(Me=r.RG8)),O===r.RG_INTEGER&&(ue===r.UNSIGNED_BYTE&&(Me=r.RG8UI),ue===r.UNSIGNED_SHORT&&(Me=r.RG16UI),ue===r.UNSIGNED_INT&&(Me=r.RG32UI),ue===r.BYTE&&(Me=r.RG8I),ue===r.SHORT&&(Me=r.RG16I),ue===r.INT&&(Me=r.RG32I)),O===r.RGB_INTEGER&&(ue===r.UNSIGNED_BYTE&&(Me=r.RGB8UI),ue===r.UNSIGNED_SHORT&&(Me=r.RGB16UI),ue===r.UNSIGNED_INT&&(Me=r.RGB32UI),ue===r.BYTE&&(Me=r.RGB8I),ue===r.SHORT&&(Me=r.RGB16I),ue===r.INT&&(Me=r.RGB32I)),O===r.RGBA_INTEGER&&(ue===r.UNSIGNED_BYTE&&(Me=r.RGBA8UI),ue===r.UNSIGNED_SHORT&&(Me=r.RGBA16UI),ue===r.UNSIGNED_INT&&(Me=r.RGBA32UI),ue===r.BYTE&&(Me=r.RGBA8I),ue===r.SHORT&&(Me=r.RGBA16I),ue===r.INT&&(Me=r.RGBA32I)),O===r.RGB&&(ue===r.UNSIGNED_INT_5_9_9_9_REV&&(Me=r.RGB9_E5),ue===r.UNSIGNED_INT_10F_11F_11F_REV&&(Me=r.R11F_G11F_B10F)),O===r.RGBA){const Mt=Pe?af:mn.getTransfer(Te);ue===r.FLOAT&&(Me=r.RGBA32F),ue===r.HALF_FLOAT&&(Me=r.RGBA16F),ue===r.UNSIGNED_BYTE&&(Me=Mt===kn?r.SRGB8_ALPHA8:r.RGBA8),ue===r.UNSIGNED_SHORT_4_4_4_4&&(Me=r.RGBA4),ue===r.UNSIGNED_SHORT_5_5_5_1&&(Me=r.RGB5_A1)}return(Me===r.R16F||Me===r.R32F||Me===r.RG16F||Me===r.RG32F||Me===r.RGBA16F||Me===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Me}function L(W,O){let ue;return W?O===null||O===co||O===mc?ue=r.DEPTH24_STENCIL8:O===va?ue=r.DEPTH32F_STENCIL8:O===fc&&(ue=r.DEPTH24_STENCIL8,ft("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===co||O===mc?ue=r.DEPTH_COMPONENT24:O===va?ue=r.DEPTH_COMPONENT32F:O===fc&&(ue=r.DEPTH_COMPONENT16),ue}function F(W,O){return M(W)===!0||W.isFramebufferTexture&&W.minFilter!==zi&&W.minFilter!==Wn?Math.log2(Math.max(O.width,O.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?O.mipmaps.length:1}function N(W){const O=W.target;O.removeEventListener("dispose",N),G(O),O.isVideoTexture&&p.delete(O)}function z(W){const O=W.target;O.removeEventListener("dispose",z),P(O)}function G(W){const O=n.get(W);if(O.__webglInit===void 0)return;const ue=W.source,Te=x.get(ue);if(Te){const Pe=Te[O.__cacheKey];Pe.usedTimes--,Pe.usedTimes===0&&D(W),Object.keys(Te).length===0&&x.delete(ue)}n.remove(W)}function D(W){const O=n.get(W);r.deleteTexture(O.__webglTexture);const ue=W.source,Te=x.get(ue);delete Te[O.__cacheKey],l.memory.textures--}function P(W){const O=n.get(W);if(W.depthTexture&&(W.depthTexture.dispose(),n.remove(W.depthTexture)),W.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(O.__webglFramebuffer[Te]))for(let Pe=0;Pe<O.__webglFramebuffer[Te].length;Pe++)r.deleteFramebuffer(O.__webglFramebuffer[Te][Pe]);else r.deleteFramebuffer(O.__webglFramebuffer[Te]);O.__webglDepthbuffer&&r.deleteRenderbuffer(O.__webglDepthbuffer[Te])}else{if(Array.isArray(O.__webglFramebuffer))for(let Te=0;Te<O.__webglFramebuffer.length;Te++)r.deleteFramebuffer(O.__webglFramebuffer[Te]);else r.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&r.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&r.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let Te=0;Te<O.__webglColorRenderbuffer.length;Te++)O.__webglColorRenderbuffer[Te]&&r.deleteRenderbuffer(O.__webglColorRenderbuffer[Te]);O.__webglDepthRenderbuffer&&r.deleteRenderbuffer(O.__webglDepthRenderbuffer)}const ue=W.textures;for(let Te=0,Pe=ue.length;Te<Pe;Te++){const Me=n.get(ue[Te]);Me.__webglTexture&&(r.deleteTexture(Me.__webglTexture),l.memory.textures--),n.remove(ue[Te])}n.remove(W)}let V=0;function ee(){V=0}function ie(){const W=V;return W>=i.maxTextures&&ft("WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+i.maxTextures),V+=1,W}function pe(W){const O=[];return O.push(W.wrapS),O.push(W.wrapT),O.push(W.wrapR||0),O.push(W.magFilter),O.push(W.minFilter),O.push(W.anisotropy),O.push(W.internalFormat),O.push(W.format),O.push(W.type),O.push(W.generateMipmaps),O.push(W.premultiplyAlpha),O.push(W.flipY),O.push(W.unpackAlignment),O.push(W.colorSpace),O.join()}function me(W,O){const ue=n.get(W);if(W.isVideoTexture&&ot(W),W.isRenderTargetTexture===!1&&W.isExternalTexture!==!0&&W.version>0&&ue.__version!==W.version){const Te=W.image;if(Te===null)ft("WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)ft("WebGLRenderer: Texture marked for update but image is incomplete");else{ce(ue,W,O);return}}else W.isExternalTexture&&(ue.__webglTexture=W.sourceTexture?W.sourceTexture:null);t.bindTexture(r.TEXTURE_2D,ue.__webglTexture,r.TEXTURE0+O)}function ve(W,O){const ue=n.get(W);if(W.isRenderTargetTexture===!1&&W.version>0&&ue.__version!==W.version){ce(ue,W,O);return}else W.isExternalTexture&&(ue.__webglTexture=W.sourceTexture?W.sourceTexture:null);t.bindTexture(r.TEXTURE_2D_ARRAY,ue.__webglTexture,r.TEXTURE0+O)}function Se(W,O){const ue=n.get(W);if(W.isRenderTargetTexture===!1&&W.version>0&&ue.__version!==W.version){ce(ue,W,O);return}t.bindTexture(r.TEXTURE_3D,ue.__webglTexture,r.TEXTURE0+O)}function B(W,O){const ue=n.get(W);if(W.version>0&&ue.__version!==W.version){we(ue,W,O);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ue.__webglTexture,r.TEXTURE0+O)}const Q={[$d]:r.REPEAT,[Oa]:r.CLAMP_TO_EDGE,[ef]:r.MIRRORED_REPEAT},K={[zi]:r.NEAREST,[Zy]:r.NEAREST_MIPMAP_NEAREST,[lc]:r.NEAREST_MIPMAP_LINEAR,[Wn]:r.LINEAR,[Hd]:r.LINEAR_MIPMAP_NEAREST,[ms]:r.LINEAR_MIPMAP_LINEAR},H={[r1]:r.NEVER,[c1]:r.ALWAYS,[s1]:r.LESS,[a0]:r.LEQUAL,[o1]:r.EQUAL,[u1]:r.GEQUAL,[l1]:r.GREATER,[h1]:r.NOTEQUAL};function ae(W,O){if(O.type===va&&e.has("OES_texture_float_linear")===!1&&(O.magFilter===Wn||O.magFilter===Hd||O.magFilter===lc||O.magFilter===ms||O.minFilter===Wn||O.minFilter===Hd||O.minFilter===lc||O.minFilter===ms)&&ft("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(W,r.TEXTURE_WRAP_S,Q[O.wrapS]),r.texParameteri(W,r.TEXTURE_WRAP_T,Q[O.wrapT]),(W===r.TEXTURE_3D||W===r.TEXTURE_2D_ARRAY)&&r.texParameteri(W,r.TEXTURE_WRAP_R,Q[O.wrapR]),r.texParameteri(W,r.TEXTURE_MAG_FILTER,K[O.magFilter]),r.texParameteri(W,r.TEXTURE_MIN_FILTER,K[O.minFilter]),O.compareFunction&&(r.texParameteri(W,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(W,r.TEXTURE_COMPARE_FUNC,H[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===zi||O.minFilter!==lc&&O.minFilter!==ms||O.type===va&&e.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||n.get(O).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");r.texParameterf(W,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),n.get(O).__currentAnisotropy=O.anisotropy}}}function Re(W,O){let ue=!1;W.__webglInit===void 0&&(W.__webglInit=!0,O.addEventListener("dispose",N));const Te=O.source;let Pe=x.get(Te);Pe===void 0&&(Pe={},x.set(Te,Pe));const Me=pe(O);if(Me!==W.__cacheKey){Pe[Me]===void 0&&(Pe[Me]={texture:r.createTexture(),usedTimes:0},l.memory.textures++,ue=!0),Pe[Me].usedTimes++;const Mt=Pe[W.__cacheKey];Mt!==void 0&&(Pe[W.__cacheKey].usedTimes--,Mt.usedTimes===0&&D(O)),W.__cacheKey=Me,W.__webglTexture=Pe[Me].texture}return ue}function Ye(W,O,ue){return Math.floor(Math.floor(W/ue)/O)}function rt(W,O,ue,Te){const Me=W.updateRanges;if(Me.length===0)t.texSubImage2D(r.TEXTURE_2D,0,0,0,O.width,O.height,ue,Te,O.data);else{Me.sort((De,Je)=>De.start-Je.start);let Mt=0;for(let De=1;De<Me.length;De++){const Je=Me[Mt],Dt=Me[De],$=Je.start+Je.count,ye=Ye(Dt.start,O.width,4),je=Ye(Je.start,O.width,4);Dt.start<=$+1&&ye===je&&Ye(Dt.start+Dt.count-1,O.width,4)===ye?Je.count=Math.max(Je.count,Dt.start+Dt.count-Je.start):(++Mt,Me[Mt]=Dt)}Me.length=Mt+1;const et=r.getParameter(r.UNPACK_ROW_LENGTH),kt=r.getParameter(r.UNPACK_SKIP_PIXELS),wt=r.getParameter(r.UNPACK_SKIP_ROWS);r.pixelStorei(r.UNPACK_ROW_LENGTH,O.width);for(let De=0,Je=Me.length;De<Je;De++){const Dt=Me[De],$=Math.floor(Dt.start/4),ye=Math.ceil(Dt.count/4),je=$%O.width,J=Math.floor($/O.width),Ve=ye,He=1;r.pixelStorei(r.UNPACK_SKIP_PIXELS,je),r.pixelStorei(r.UNPACK_SKIP_ROWS,J),t.texSubImage2D(r.TEXTURE_2D,0,je,J,Ve,He,ue,Te,O.data)}W.clearUpdateRanges(),r.pixelStorei(r.UNPACK_ROW_LENGTH,et),r.pixelStorei(r.UNPACK_SKIP_PIXELS,kt),r.pixelStorei(r.UNPACK_SKIP_ROWS,wt)}}function ce(W,O,ue){let Te=r.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Te=r.TEXTURE_2D_ARRAY),O.isData3DTexture&&(Te=r.TEXTURE_3D);const Pe=Re(W,O),Me=O.source;t.bindTexture(Te,W.__webglTexture,r.TEXTURE0+ue);const Mt=n.get(Me);if(Me.version!==Mt.__version||Pe===!0){t.activeTexture(r.TEXTURE0+ue);const et=mn.getPrimaries(mn.workingColorSpace),kt=O.colorSpace===so?null:mn.getPrimaries(O.colorSpace),wt=O.colorSpace===so||et===kt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,O.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,O.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,wt);let De=T(O.image,!1,i.maxTextureSize);De=$e(O,De);const Je=s.convert(O.format,O.colorSpace),Dt=s.convert(O.type);let $=I(O.internalFormat,Je,Dt,O.colorSpace,O.isVideoTexture);ae(Te,O);let ye;const je=O.mipmaps,J=O.isVideoTexture!==!0,Ve=Mt.__version===void 0||Pe===!0,He=Me.dataReady,Ge=F(O,De);if(O.isDepthTexture)$=L(O.format===gc,O.type),Ve&&(J?t.texStorage2D(r.TEXTURE_2D,1,$,De.width,De.height):t.texImage2D(r.TEXTURE_2D,0,$,De.width,De.height,0,Je,Dt,null));else if(O.isDataTexture)if(je.length>0){J&&Ve&&t.texStorage2D(r.TEXTURE_2D,Ge,$,je[0].width,je[0].height);for(let We=0,Ie=je.length;We<Ie;We++)ye=je[We],J?He&&t.texSubImage2D(r.TEXTURE_2D,We,0,0,ye.width,ye.height,Je,Dt,ye.data):t.texImage2D(r.TEXTURE_2D,We,$,ye.width,ye.height,0,Je,Dt,ye.data);O.generateMipmaps=!1}else J?(Ve&&t.texStorage2D(r.TEXTURE_2D,Ge,$,De.width,De.height),He&&rt(O,De,Je,Dt)):t.texImage2D(r.TEXTURE_2D,0,$,De.width,De.height,0,Je,Dt,De.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){J&&Ve&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ge,$,je[0].width,je[0].height,De.depth);for(let We=0,Ie=je.length;We<Ie;We++)if(ye=je[We],O.format!==$i)if(Je!==null)if(J){if(He)if(O.layerUpdates.size>0){const lt=Hy(ye.width,ye.height,O.format,O.type);for(const Pt of O.layerUpdates){const hn=ye.data.subarray(Pt*lt/ye.data.BYTES_PER_ELEMENT,(Pt+1)*lt/ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,We,0,0,Pt,ye.width,ye.height,1,Je,hn)}O.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,We,0,0,0,ye.width,ye.height,De.depth,Je,ye.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,We,$,ye.width,ye.height,De.depth,0,ye.data,0,0);else ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else J?He&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,We,0,0,0,ye.width,ye.height,De.depth,Je,Dt,ye.data):t.texImage3D(r.TEXTURE_2D_ARRAY,We,$,ye.width,ye.height,De.depth,0,Je,Dt,ye.data)}else{J&&Ve&&t.texStorage2D(r.TEXTURE_2D,Ge,$,je[0].width,je[0].height);for(let We=0,Ie=je.length;We<Ie;We++)ye=je[We],O.format!==$i?Je!==null?J?He&&t.compressedTexSubImage2D(r.TEXTURE_2D,We,0,0,ye.width,ye.height,Je,ye.data):t.compressedTexImage2D(r.TEXTURE_2D,We,$,ye.width,ye.height,0,ye.data):ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):J?He&&t.texSubImage2D(r.TEXTURE_2D,We,0,0,ye.width,ye.height,Je,Dt,ye.data):t.texImage2D(r.TEXTURE_2D,We,$,ye.width,ye.height,0,Je,Dt,ye.data)}else if(O.isDataArrayTexture)if(J){if(Ve&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ge,$,De.width,De.height,De.depth),He)if(O.layerUpdates.size>0){const We=Hy(De.width,De.height,O.format,O.type);for(const Ie of O.layerUpdates){const lt=De.data.subarray(Ie*We/De.data.BYTES_PER_ELEMENT,(Ie+1)*We/De.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Ie,De.width,De.height,1,Je,Dt,lt)}O.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,De.width,De.height,De.depth,Je,Dt,De.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,$,De.width,De.height,De.depth,0,Je,Dt,De.data);else if(O.isData3DTexture)J?(Ve&&t.texStorage3D(r.TEXTURE_3D,Ge,$,De.width,De.height,De.depth),He&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,De.width,De.height,De.depth,Je,Dt,De.data)):t.texImage3D(r.TEXTURE_3D,0,$,De.width,De.height,De.depth,0,Je,Dt,De.data);else if(O.isFramebufferTexture){if(Ve)if(J)t.texStorage2D(r.TEXTURE_2D,Ge,$,De.width,De.height);else{let We=De.width,Ie=De.height;for(let lt=0;lt<Ge;lt++)t.texImage2D(r.TEXTURE_2D,lt,$,We,Ie,0,Je,Dt,null),We>>=1,Ie>>=1}}else if(je.length>0){if(J&&Ve){const We=ut(je[0]);t.texStorage2D(r.TEXTURE_2D,Ge,$,We.width,We.height)}for(let We=0,Ie=je.length;We<Ie;We++)ye=je[We],J?He&&t.texSubImage2D(r.TEXTURE_2D,We,0,0,Je,Dt,ye):t.texImage2D(r.TEXTURE_2D,We,$,Je,Dt,ye);O.generateMipmaps=!1}else if(J){if(Ve){const We=ut(De);t.texStorage2D(r.TEXTURE_2D,Ge,$,We.width,We.height)}He&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Je,Dt,De)}else t.texImage2D(r.TEXTURE_2D,0,$,Je,Dt,De);M(O)&&w(Te),Mt.__version=Me.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}function we(W,O,ue){if(O.image.length!==6)return;const Te=Re(W,O),Pe=O.source;t.bindTexture(r.TEXTURE_CUBE_MAP,W.__webglTexture,r.TEXTURE0+ue);const Me=n.get(Pe);if(Pe.version!==Me.__version||Te===!0){t.activeTexture(r.TEXTURE0+ue);const Mt=mn.getPrimaries(mn.workingColorSpace),et=O.colorSpace===so?null:mn.getPrimaries(O.colorSpace),kt=O.colorSpace===so||Mt===et?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,O.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,O.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,kt);const wt=O.isCompressedTexture||O.image[0].isCompressedTexture,De=O.image[0]&&O.image[0].isDataTexture,Je=[];for(let Ie=0;Ie<6;Ie++)!wt&&!De?Je[Ie]=T(O.image[Ie],!0,i.maxCubemapSize):Je[Ie]=De?O.image[Ie].image:O.image[Ie],Je[Ie]=$e(O,Je[Ie]);const Dt=Je[0],$=s.convert(O.format,O.colorSpace),ye=s.convert(O.type),je=I(O.internalFormat,$,ye,O.colorSpace),J=O.isVideoTexture!==!0,Ve=Me.__version===void 0||Te===!0,He=Pe.dataReady;let Ge=F(O,Dt);ae(r.TEXTURE_CUBE_MAP,O);let We;if(wt){J&&Ve&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Ge,je,Dt.width,Dt.height);for(let Ie=0;Ie<6;Ie++){We=Je[Ie].mipmaps;for(let lt=0;lt<We.length;lt++){const Pt=We[lt];O.format!==$i?$!==null?J?He&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,lt,0,0,Pt.width,Pt.height,$,Pt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,lt,je,Pt.width,Pt.height,0,Pt.data):ft("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):J?He&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,lt,0,0,Pt.width,Pt.height,$,ye,Pt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,lt,je,Pt.width,Pt.height,0,$,ye,Pt.data)}}}else{if(We=O.mipmaps,J&&Ve){We.length>0&&Ge++;const Ie=ut(Je[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Ge,je,Ie.width,Ie.height)}for(let Ie=0;Ie<6;Ie++)if(De){J?He&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,Je[Ie].width,Je[Ie].height,$,ye,Je[Ie].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,je,Je[Ie].width,Je[Ie].height,0,$,ye,Je[Ie].data);for(let lt=0;lt<We.length;lt++){const hn=We[lt].image[Ie].image;J?He&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,lt+1,0,0,hn.width,hn.height,$,ye,hn.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,lt+1,je,hn.width,hn.height,0,$,ye,hn.data)}}else{J?He&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,$,ye,Je[Ie]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,je,$,ye,Je[Ie]);for(let lt=0;lt<We.length;lt++){const Pt=We[lt];J?He&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,lt+1,0,0,$,ye,Pt.image[Ie]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,lt+1,je,$,ye,Pt.image[Ie])}}}M(O)&&w(r.TEXTURE_CUBE_MAP),Me.__version=Pe.version,O.onUpdate&&O.onUpdate(O)}W.__version=O.version}function Be(W,O,ue,Te,Pe,Me){const Mt=s.convert(ue.format,ue.colorSpace),et=s.convert(ue.type),kt=I(ue.internalFormat,Mt,et,ue.colorSpace),wt=n.get(O),De=n.get(ue);if(De.__renderTarget=O,!wt.__hasExternalTextures){const Je=Math.max(1,O.width>>Me),Dt=Math.max(1,O.height>>Me);Pe===r.TEXTURE_3D||Pe===r.TEXTURE_2D_ARRAY?t.texImage3D(Pe,Me,kt,Je,Dt,O.depth,0,Mt,et,null):t.texImage2D(Pe,Me,kt,Je,Dt,0,Mt,et,null)}t.bindFramebuffer(r.FRAMEBUFFER,W),Ue(O)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Te,Pe,De.__webglTexture,0,Ke(O)):(Pe===r.TEXTURE_2D||Pe>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Pe<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Te,Pe,De.__webglTexture,Me),t.bindFramebuffer(r.FRAMEBUFFER,null)}function it(W,O,ue){if(r.bindRenderbuffer(r.RENDERBUFFER,W),O.depthBuffer){const Te=O.depthTexture,Pe=Te&&Te.isDepthTexture?Te.type:null,Me=L(O.stencilBuffer,Pe),Mt=O.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,et=Ke(O);Ue(O)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,et,Me,O.width,O.height):ue?r.renderbufferStorageMultisample(r.RENDERBUFFER,et,Me,O.width,O.height):r.renderbufferStorage(r.RENDERBUFFER,Me,O.width,O.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,Mt,r.RENDERBUFFER,W)}else{const Te=O.textures;for(let Pe=0;Pe<Te.length;Pe++){const Me=Te[Pe],Mt=s.convert(Me.format,Me.colorSpace),et=s.convert(Me.type),kt=I(Me.internalFormat,Mt,et,Me.colorSpace),wt=Ke(O);ue&&Ue(O)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,wt,kt,O.width,O.height):Ue(O)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,wt,kt,O.width,O.height):r.renderbufferStorage(r.RENDERBUFFER,kt,O.width,O.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function st(W,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,W),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Te=n.get(O.depthTexture);Te.__renderTarget=O,(!Te.__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),me(O.depthTexture,0);const Pe=Te.__webglTexture,Me=Ke(O);if(O.depthTexture.format===pc)Ue(O)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Pe,0,Me):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Pe,0);else if(O.depthTexture.format===gc)Ue(O)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Pe,0,Me):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function Lt(W){const O=n.get(W),ue=W.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==W.depthTexture){const Te=W.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),Te){const Pe=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,Te.removeEventListener("dispose",Pe)};Te.addEventListener("dispose",Pe),O.__depthDisposeCallback=Pe}O.__boundDepthTexture=Te}if(W.depthTexture&&!O.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");const Te=W.texture.mipmaps;Te&&Te.length>0?st(O.__webglFramebuffer[0],W):st(O.__webglFramebuffer,W)}else if(ue){O.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)if(t.bindFramebuffer(r.FRAMEBUFFER,O.__webglFramebuffer[Te]),O.__webglDepthbuffer[Te]===void 0)O.__webglDepthbuffer[Te]=r.createRenderbuffer(),it(O.__webglDepthbuffer[Te],W,!1);else{const Pe=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Me=O.__webglDepthbuffer[Te];r.bindRenderbuffer(r.RENDERBUFFER,Me),r.framebufferRenderbuffer(r.FRAMEBUFFER,Pe,r.RENDERBUFFER,Me)}}else{const Te=W.texture.mipmaps;if(Te&&Te.length>0?t.bindFramebuffer(r.FRAMEBUFFER,O.__webglFramebuffer[0]):t.bindFramebuffer(r.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=r.createRenderbuffer(),it(O.__webglDepthbuffer,W,!1);else{const Pe=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Me=O.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Me),r.framebufferRenderbuffer(r.FRAMEBUFFER,Pe,r.RENDERBUFFER,Me)}}t.bindFramebuffer(r.FRAMEBUFFER,null)}function on(W,O,ue){const Te=n.get(W);O!==void 0&&Be(Te.__webglFramebuffer,W,W.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ue!==void 0&&Lt(W)}function yt(W){const O=W.texture,ue=n.get(W),Te=n.get(O);W.addEventListener("dispose",z);const Pe=W.textures,Me=W.isWebGLCubeRenderTarget===!0,Mt=Pe.length>1;if(Mt||(Te.__webglTexture===void 0&&(Te.__webglTexture=r.createTexture()),Te.__version=O.version,l.memory.textures++),Me){ue.__webglFramebuffer=[];for(let et=0;et<6;et++)if(O.mipmaps&&O.mipmaps.length>0){ue.__webglFramebuffer[et]=[];for(let kt=0;kt<O.mipmaps.length;kt++)ue.__webglFramebuffer[et][kt]=r.createFramebuffer()}else ue.__webglFramebuffer[et]=r.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){ue.__webglFramebuffer=[];for(let et=0;et<O.mipmaps.length;et++)ue.__webglFramebuffer[et]=r.createFramebuffer()}else ue.__webglFramebuffer=r.createFramebuffer();if(Mt)for(let et=0,kt=Pe.length;et<kt;et++){const wt=n.get(Pe[et]);wt.__webglTexture===void 0&&(wt.__webglTexture=r.createTexture(),l.memory.textures++)}if(W.samples>0&&Ue(W)===!1){ue.__webglMultisampledFramebuffer=r.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let et=0;et<Pe.length;et++){const kt=Pe[et];ue.__webglColorRenderbuffer[et]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ue.__webglColorRenderbuffer[et]);const wt=s.convert(kt.format,kt.colorSpace),De=s.convert(kt.type),Je=I(kt.internalFormat,wt,De,kt.colorSpace,W.isXRRenderTarget===!0),Dt=Ke(W);r.renderbufferStorageMultisample(r.RENDERBUFFER,Dt,Je,W.width,W.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+et,r.RENDERBUFFER,ue.__webglColorRenderbuffer[et])}r.bindRenderbuffer(r.RENDERBUFFER,null),W.depthBuffer&&(ue.__webglDepthRenderbuffer=r.createRenderbuffer(),it(ue.__webglDepthRenderbuffer,W,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Me){t.bindTexture(r.TEXTURE_CUBE_MAP,Te.__webglTexture),ae(r.TEXTURE_CUBE_MAP,O);for(let et=0;et<6;et++)if(O.mipmaps&&O.mipmaps.length>0)for(let kt=0;kt<O.mipmaps.length;kt++)Be(ue.__webglFramebuffer[et][kt],W,O,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+et,kt);else Be(ue.__webglFramebuffer[et],W,O,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);M(O)&&w(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Mt){for(let et=0,kt=Pe.length;et<kt;et++){const wt=Pe[et],De=n.get(wt);let Je=r.TEXTURE_2D;(W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(Je=W.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Je,De.__webglTexture),ae(Je,wt),Be(ue.__webglFramebuffer,W,wt,r.COLOR_ATTACHMENT0+et,Je,0),M(wt)&&w(Je)}t.unbindTexture()}else{let et=r.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(et=W.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(et,Te.__webglTexture),ae(et,O),O.mipmaps&&O.mipmaps.length>0)for(let kt=0;kt<O.mipmaps.length;kt++)Be(ue.__webglFramebuffer[kt],W,O,r.COLOR_ATTACHMENT0,et,kt);else Be(ue.__webglFramebuffer,W,O,r.COLOR_ATTACHMENT0,et,0);M(O)&&w(et),t.unbindTexture()}W.depthBuffer&&Lt(W)}function Le(W){const O=W.textures;for(let ue=0,Te=O.length;ue<Te;ue++){const Pe=O[ue];if(M(Pe)){const Me=C(W),Mt=n.get(Pe).__webglTexture;t.bindTexture(Me,Mt),w(Me),t.unbindTexture()}}}const X=[],Ne=[];function ze(W){if(W.samples>0){if(Ue(W)===!1){const O=W.textures,ue=W.width,Te=W.height;let Pe=r.COLOR_BUFFER_BIT;const Me=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Mt=n.get(W),et=O.length>1;if(et)for(let wt=0;wt<O.length;wt++)t.bindFramebuffer(r.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+wt,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Mt.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+wt,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);const kt=W.texture.mipmaps;kt&&kt.length>0?t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer[0]):t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let wt=0;wt<O.length;wt++){if(W.resolveDepthBuffer&&(W.depthBuffer&&(Pe|=r.DEPTH_BUFFER_BIT),W.stencilBuffer&&W.resolveStencilBuffer&&(Pe|=r.STENCIL_BUFFER_BIT)),et){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Mt.__webglColorRenderbuffer[wt]);const De=n.get(O[wt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,De,0)}r.blitFramebuffer(0,0,ue,Te,0,0,ue,Te,Pe,r.NEAREST),f===!0&&(X.length=0,Ne.length=0,X.push(r.COLOR_ATTACHMENT0+wt),W.depthBuffer&&W.resolveDepthBuffer===!1&&(X.push(Me),Ne.push(Me),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,Ne)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,X))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),et)for(let wt=0;wt<O.length;wt++){t.bindFramebuffer(r.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+wt,r.RENDERBUFFER,Mt.__webglColorRenderbuffer[wt]);const De=n.get(O[wt]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Mt.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+wt,r.TEXTURE_2D,De,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else if(W.depthBuffer&&W.resolveDepthBuffer===!1&&f){const O=W.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[O])}}}function Ke(W){return Math.min(i.maxSamples,W.samples)}function Ue(W){const O=n.get(W);return W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function ot(W){const O=l.render.frame;p.get(W)!==O&&(p.set(W,O),W.update())}function $e(W,O){const ue=W.colorSpace,Te=W.format,Pe=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||ue!==Th&&ue!==so&&(mn.getTransfer(ue)===kn?(Te!==$i||Pe!==gr)&&ft("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Wt("WebGLTextures: Unsupported texture color space:",ue)),O}function ut(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(m.width=W.naturalWidth||W.width,m.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(m.width=W.displayWidth,m.height=W.displayHeight):(m.width=W.width,m.height=W.height),m}this.allocateTextureUnit=ie,this.resetTextureUnits=ee,this.setTexture2D=me,this.setTexture2DArray=ve,this.setTexture3D=Se,this.setTextureCube=B,this.rebindTextures=on,this.setupRenderTarget=yt,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=ze,this.setupDepthRenderbuffer=Lt,this.setupFrameBufferTexture=Be,this.useMultisampledRTT=Ue}function Sw(r,e){function t(n,i=so){let s;const l=mn.getTransfer(i);if(n===gr)return r.UNSIGNED_BYTE;if(n===fg)return r.UNSIGNED_SHORT_4_4_4_4;if(n===mg)return r.UNSIGNED_SHORT_5_5_5_1;if(n===$y)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===e0)return r.UNSIGNED_INT_10F_11F_11F_REV;if(n===Jy)return r.BYTE;if(n===Qy)return r.SHORT;if(n===fc)return r.UNSIGNED_SHORT;if(n===dg)return r.INT;if(n===co)return r.UNSIGNED_INT;if(n===va)return r.FLOAT;if(n===ll)return r.HALF_FLOAT;if(n===t0)return r.ALPHA;if(n===n0)return r.RGB;if(n===$i)return r.RGBA;if(n===pc)return r.DEPTH_COMPONENT;if(n===gc)return r.DEPTH_STENCIL;if(n===pg)return r.RED;if(n===gf)return r.RED_INTEGER;if(n===gg)return r.RG;if(n===vg)return r.RG_INTEGER;if(n===yg)return r.RGBA_INTEGER;if(n===Gd||n===Wd||n===Xd||n===Yd)if(l===kn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Gd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Wd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Xd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Yd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Gd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Wd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Xd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Yd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Ep||n===Ap||n===Cp||n===Ip)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Ep)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ap)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Cp)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ip)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Rp||n===Pp||n===Lp)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===Rp||n===Pp)return l===kn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Lp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Np||n===Dp||n===Op||n===Up||n===Fp||n===Bp||n===zp||n===jp||n===Vp||n===Hp||n===Gp||n===Wp||n===Xp||n===Yp)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Np)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Dp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Op)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Up)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Fp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Bp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===zp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===jp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Vp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Hp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Gp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Wp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Xp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Yp)return l===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===qp||n===Kp||n===Zp)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===qp)return l===kn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Kp)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Zp)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Jp||n===Qp||n===$p||n===eg)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Jp)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Qp)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===$p)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===eg)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===mc?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}const qC=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,KC=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ZC{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new f0(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new vr({vertexShader:qC,fragmentShader:KC,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new _i(new Tc(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class JC extends ys{constructor(e,t){super();const n=this;let i=null,s=1,l=null,c="local-floor",f=1,m=null,p=null,g=null,x=null,_=null,S=null;const T=typeof XRWebGLBinding<"u",M=new ZC,w={},C=t.getContextAttributes();let I=null,L=null;const F=[],N=[],z=new Ce;let G=null;const D=new ii;D.viewport=new vn;const P=new ii;P.viewport=new vn;const V=[D,P],ee=new dw;let ie=null,pe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let we=F[ce];return we===void 0&&(we=new pp,F[ce]=we),we.getTargetRaySpace()},this.getControllerGrip=function(ce){let we=F[ce];return we===void 0&&(we=new pp,F[ce]=we),we.getGripSpace()},this.getHand=function(ce){let we=F[ce];return we===void 0&&(we=new pp,F[ce]=we),we.getHandSpace()};function me(ce){const we=N.indexOf(ce.inputSource);if(we===-1)return;const Be=F[we];Be!==void 0&&(Be.update(ce.inputSource,ce.frame,m||l),Be.dispatchEvent({type:ce.type,data:ce.inputSource}))}function ve(){i.removeEventListener("select",me),i.removeEventListener("selectstart",me),i.removeEventListener("selectend",me),i.removeEventListener("squeeze",me),i.removeEventListener("squeezestart",me),i.removeEventListener("squeezeend",me),i.removeEventListener("end",ve),i.removeEventListener("inputsourceschange",Se);for(let ce=0;ce<F.length;ce++){const we=N[ce];we!==null&&(N[ce]=null,F[ce].disconnect(we))}ie=null,pe=null,M.reset();for(const ce in w)delete w[ce];e.setRenderTarget(I),_=null,x=null,g=null,i=null,L=null,rt.stop(),n.isPresenting=!1,e.setPixelRatio(G),e.setSize(z.width,z.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,n.isPresenting===!0&&ft("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){c=ce,n.isPresenting===!0&&ft("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||l},this.setReferenceSpace=function(ce){m=ce},this.getBaseLayer=function(){return x!==null?x:_},this.getBinding=function(){return g===null&&T&&(g=new XRWebGLBinding(i,t)),g},this.getFrame=function(){return S},this.getSession=function(){return i},this.setSession=async function(ce){if(i=ce,i!==null){if(I=e.getRenderTarget(),i.addEventListener("select",me),i.addEventListener("selectstart",me),i.addEventListener("selectend",me),i.addEventListener("squeeze",me),i.addEventListener("squeezestart",me),i.addEventListener("squeezeend",me),i.addEventListener("end",ve),i.addEventListener("inputsourceschange",Se),C.xrCompatible!==!0&&await t.makeXRCompatible(),G=e.getPixelRatio(),e.getSize(z),T&&"createProjectionLayer"in XRWebGLBinding.prototype){let Be=null,it=null,st=null;C.depth&&(st=C.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Be=C.stencil?gc:pc,it=C.stencil?mc:co);const Lt={colorFormat:t.RGBA8,depthFormat:st,scaleFactor:s};g=this.getBinding(),x=g.createProjectionLayer(Lt),i.updateRenderState({layers:[x]}),e.setPixelRatio(1),e.setSize(x.textureWidth,x.textureHeight,!1),L=new Kr(x.textureWidth,x.textureHeight,{format:$i,type:gr,depthTexture:new Ag(x.textureWidth,x.textureHeight,it,void 0,void 0,void 0,void 0,void 0,void 0,Be),stencilBuffer:C.stencil,colorSpace:e.outputColorSpace,samples:C.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const Be={antialias:C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:s};_=new XRWebGLLayer(i,t,Be),i.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),L=new Kr(_.framebufferWidth,_.framebufferHeight,{format:$i,type:gr,colorSpace:e.outputColorSpace,stencilBuffer:C.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}L.isXRRenderTarget=!0,this.setFoveation(f),m=null,l=await i.requestReferenceSpace(c),rt.setContext(i),rt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function Se(ce){for(let we=0;we<ce.removed.length;we++){const Be=ce.removed[we],it=N.indexOf(Be);it>=0&&(N[it]=null,F[it].disconnect(Be))}for(let we=0;we<ce.added.length;we++){const Be=ce.added[we];let it=N.indexOf(Be);if(it===-1){for(let Lt=0;Lt<F.length;Lt++)if(Lt>=N.length){N.push(Be),it=Lt;break}else if(N[Lt]===null){N[Lt]=Be,it=Lt;break}if(it===-1)break}const st=F[it];st&&st.connect(Be)}}const B=new Y,Q=new Y;function K(ce,we,Be){B.setFromMatrixPosition(we.matrixWorld),Q.setFromMatrixPosition(Be.matrixWorld);const it=B.distanceTo(Q),st=we.projectionMatrix.elements,Lt=Be.projectionMatrix.elements,on=st[14]/(st[10]-1),yt=st[14]/(st[10]+1),Le=(st[9]+1)/st[5],X=(st[9]-1)/st[5],Ne=(st[8]-1)/st[0],ze=(Lt[8]+1)/Lt[0],Ke=on*Ne,Ue=on*ze,ot=it/(-Ne+ze),$e=ot*-Ne;if(we.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX($e),ce.translateZ(ot),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert(),st[10]===-1)ce.projectionMatrix.copy(we.projectionMatrix),ce.projectionMatrixInverse.copy(we.projectionMatrixInverse);else{const ut=on+ot,W=yt+ot,O=Ke-$e,ue=Ue+(it-$e),Te=Le*yt/W*ut,Pe=X*yt/W*ut;ce.projectionMatrix.makePerspective(O,ue,Te,Pe,ut,W),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}}function H(ce,we){we===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(we.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(i===null)return;let we=ce.near,Be=ce.far;M.texture!==null&&(M.depthNear>0&&(we=M.depthNear),M.depthFar>0&&(Be=M.depthFar)),ee.near=P.near=D.near=we,ee.far=P.far=D.far=Be,(ie!==ee.near||pe!==ee.far)&&(i.updateRenderState({depthNear:ee.near,depthFar:ee.far}),ie=ee.near,pe=ee.far),ee.layers.mask=ce.layers.mask|6,D.layers.mask=ee.layers.mask&3,P.layers.mask=ee.layers.mask&5;const it=ce.parent,st=ee.cameras;H(ee,it);for(let Lt=0;Lt<st.length;Lt++)H(st[Lt],it);st.length===2?K(ee,D,P):ee.projectionMatrix.copy(D.projectionMatrix),ae(ce,ee,it)};function ae(ce,we,Be){Be===null?ce.matrix.copy(we.matrixWorld):(ce.matrix.copy(Be.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(we.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(we.projectionMatrix),ce.projectionMatrixInverse.copy(we.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=xc*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return ee},this.getFoveation=function(){if(!(x===null&&_===null))return f},this.setFoveation=function(ce){f=ce,x!==null&&(x.fixedFoveation=ce),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ce)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(ee)},this.getCameraTexture=function(ce){return w[ce]};let Re=null;function Ye(ce,we){if(p=we.getViewerPose(m||l),S=we,p!==null){const Be=p.views;_!==null&&(e.setRenderTargetFramebuffer(L,_.framebuffer),e.setRenderTarget(L));let it=!1;Be.length!==ee.cameras.length&&(ee.cameras.length=0,it=!0);for(let yt=0;yt<Be.length;yt++){const Le=Be[yt];let X=null;if(_!==null)X=_.getViewport(Le);else{const ze=g.getViewSubImage(x,Le);X=ze.viewport,yt===0&&(e.setRenderTargetTextures(L,ze.colorTexture,ze.depthStencilTexture),e.setRenderTarget(L))}let Ne=V[yt];Ne===void 0&&(Ne=new ii,Ne.layers.enable(yt),Ne.viewport=new vn,V[yt]=Ne),Ne.matrix.fromArray(Le.transform.matrix),Ne.matrix.decompose(Ne.position,Ne.quaternion,Ne.scale),Ne.projectionMatrix.fromArray(Le.projectionMatrix),Ne.projectionMatrixInverse.copy(Ne.projectionMatrix).invert(),Ne.viewport.set(X.x,X.y,X.width,X.height),yt===0&&(ee.matrix.copy(Ne.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale)),it===!0&&ee.cameras.push(Ne)}const st=i.enabledFeatures;if(st&&st.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&T){g=n.getBinding();const yt=g.getDepthInformation(Be[0]);yt&&yt.isValid&&yt.texture&&M.init(yt,i.renderState)}if(st&&st.includes("camera-access")&&T){e.state.unbindTexture(),g=n.getBinding();for(let yt=0;yt<Be.length;yt++){const Le=Be[yt].camera;if(Le){let X=w[Le];X||(X=new f0,w[Le]=X);const Ne=g.getCameraImage(Le);X.sourceTexture=Ne}}}}for(let Be=0;Be<F.length;Be++){const it=N[Be],st=F[Be];it!==null&&st!==void 0&&st.update(it,we,m||l)}Re&&Re(ce,we),we.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:we}),S=null}const rt=new yw;rt.setAnimationLoop(Ye),this.setAnimationLoop=function(ce){Re=ce},this.dispose=function(){}}}const fh=new tr,QC=new Vt;function $C(r,e){function t(M,w){M.matrixAutoUpdate===!0&&M.updateMatrix(),w.value.copy(M.matrix)}function n(M,w){w.color.getRGB(M.fogColor.value,v1(r)),w.isFog?(M.fogNear.value=w.near,M.fogFar.value=w.far):w.isFogExp2&&(M.fogDensity.value=w.density)}function i(M,w,C,I,L){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(M,w):w.isMeshToonMaterial?(s(M,w),g(M,w)):w.isMeshPhongMaterial?(s(M,w),p(M,w)):w.isMeshStandardMaterial?(s(M,w),x(M,w),w.isMeshPhysicalMaterial&&_(M,w,L)):w.isMeshMatcapMaterial?(s(M,w),S(M,w)):w.isMeshDepthMaterial?s(M,w):w.isMeshDistanceMaterial?(s(M,w),T(M,w)):w.isMeshNormalMaterial?s(M,w):w.isLineBasicMaterial?(l(M,w),w.isLineDashedMaterial&&c(M,w)):w.isPointsMaterial?f(M,w,C,I):w.isSpriteMaterial?m(M,w):w.isShadowMaterial?(M.color.value.copy(w.color),M.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function s(M,w){M.opacity.value=w.opacity,w.color&&M.diffuse.value.copy(w.color),w.emissive&&M.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(M.map.value=w.map,t(w.map,M.mapTransform)),w.alphaMap&&(M.alphaMap.value=w.alphaMap,t(w.alphaMap,M.alphaMapTransform)),w.bumpMap&&(M.bumpMap.value=w.bumpMap,t(w.bumpMap,M.bumpMapTransform),M.bumpScale.value=w.bumpScale,w.side===ya&&(M.bumpScale.value*=-1)),w.normalMap&&(M.normalMap.value=w.normalMap,t(w.normalMap,M.normalMapTransform),M.normalScale.value.copy(w.normalScale),w.side===ya&&M.normalScale.value.negate()),w.displacementMap&&(M.displacementMap.value=w.displacementMap,t(w.displacementMap,M.displacementMapTransform),M.displacementScale.value=w.displacementScale,M.displacementBias.value=w.displacementBias),w.emissiveMap&&(M.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,M.emissiveMapTransform)),w.specularMap&&(M.specularMap.value=w.specularMap,t(w.specularMap,M.specularMapTransform)),w.alphaTest>0&&(M.alphaTest.value=w.alphaTest);const C=e.get(w),I=C.envMap,L=C.envMapRotation;I&&(M.envMap.value=I,fh.copy(L),fh.x*=-1,fh.y*=-1,fh.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(fh.y*=-1,fh.z*=-1),M.envMapRotation.value.setFromMatrix4(QC.makeRotationFromEuler(fh)),M.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=w.reflectivity,M.ior.value=w.ior,M.refractionRatio.value=w.refractionRatio),w.lightMap&&(M.lightMap.value=w.lightMap,M.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,M.lightMapTransform)),w.aoMap&&(M.aoMap.value=w.aoMap,M.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,M.aoMapTransform))}function l(M,w){M.diffuse.value.copy(w.color),M.opacity.value=w.opacity,w.map&&(M.map.value=w.map,t(w.map,M.mapTransform))}function c(M,w){M.dashSize.value=w.dashSize,M.totalSize.value=w.dashSize+w.gapSize,M.scale.value=w.scale}function f(M,w,C,I){M.diffuse.value.copy(w.color),M.opacity.value=w.opacity,M.size.value=w.size*C,M.scale.value=I*.5,w.map&&(M.map.value=w.map,t(w.map,M.uvTransform)),w.alphaMap&&(M.alphaMap.value=w.alphaMap,t(w.alphaMap,M.alphaMapTransform)),w.alphaTest>0&&(M.alphaTest.value=w.alphaTest)}function m(M,w){M.diffuse.value.copy(w.color),M.opacity.value=w.opacity,M.rotation.value=w.rotation,w.map&&(M.map.value=w.map,t(w.map,M.mapTransform)),w.alphaMap&&(M.alphaMap.value=w.alphaMap,t(w.alphaMap,M.alphaMapTransform)),w.alphaTest>0&&(M.alphaTest.value=w.alphaTest)}function p(M,w){M.specular.value.copy(w.specular),M.shininess.value=Math.max(w.shininess,1e-4)}function g(M,w){w.gradientMap&&(M.gradientMap.value=w.gradientMap)}function x(M,w){M.metalness.value=w.metalness,w.metalnessMap&&(M.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,M.metalnessMapTransform)),M.roughness.value=w.roughness,w.roughnessMap&&(M.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,M.roughnessMapTransform)),w.envMap&&(M.envMapIntensity.value=w.envMapIntensity)}function _(M,w,C){M.ior.value=w.ior,w.sheen>0&&(M.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),M.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(M.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,M.sheenColorMapTransform)),w.sheenRoughnessMap&&(M.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,M.sheenRoughnessMapTransform))),w.clearcoat>0&&(M.clearcoat.value=w.clearcoat,M.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(M.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,M.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(M.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===ya&&M.clearcoatNormalScale.value.negate())),w.dispersion>0&&(M.dispersion.value=w.dispersion),w.iridescence>0&&(M.iridescence.value=w.iridescence,M.iridescenceIOR.value=w.iridescenceIOR,M.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(M.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,M.iridescenceMapTransform)),w.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),w.transmission>0&&(M.transmission.value=w.transmission,M.transmissionSamplerMap.value=C.texture,M.transmissionSamplerSize.value.set(C.width,C.height),w.transmissionMap&&(M.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,M.transmissionMapTransform)),M.thickness.value=w.thickness,w.thicknessMap&&(M.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=w.attenuationDistance,M.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(M.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(M.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=w.specularIntensity,M.specularColor.value.copy(w.specularColor),w.specularColorMap&&(M.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,M.specularColorMapTransform)),w.specularIntensityMap&&(M.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,M.specularIntensityMapTransform))}function S(M,w){w.matcap&&(M.matcap.value=w.matcap)}function T(M,w){const C=e.get(w).light;M.referencePosition.value.setFromMatrixPosition(C.matrixWorld),M.nearDistance.value=C.shadow.camera.near,M.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function eI(r,e,t,n){let i={},s={},l=[];const c=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function f(C,I){const L=I.program;n.uniformBlockBinding(C,L)}function m(C,I){let L=i[C.id];L===void 0&&(S(C),L=p(C),i[C.id]=L,C.addEventListener("dispose",M));const F=I.program;n.updateUBOMapping(C,F);const N=e.render.frame;s[C.id]!==N&&(x(C),s[C.id]=N)}function p(C){const I=g();C.__bindingPointIndex=I;const L=r.createBuffer(),F=C.__size,N=C.usage;return r.bindBuffer(r.UNIFORM_BUFFER,L),r.bufferData(r.UNIFORM_BUFFER,F,N),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,I,L),L}function g(){for(let C=0;C<c;C++)if(l.indexOf(C)===-1)return l.push(C),C;return Wt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(C){const I=i[C.id],L=C.uniforms,F=C.__cache;r.bindBuffer(r.UNIFORM_BUFFER,I);for(let N=0,z=L.length;N<z;N++){const G=Array.isArray(L[N])?L[N]:[L[N]];for(let D=0,P=G.length;D<P;D++){const V=G[D];if(_(V,N,D,F)===!0){const ee=V.__offset,ie=Array.isArray(V.value)?V.value:[V.value];let pe=0;for(let me=0;me<ie.length;me++){const ve=ie[me],Se=T(ve);typeof ve=="number"||typeof ve=="boolean"?(V.__data[0]=ve,r.bufferSubData(r.UNIFORM_BUFFER,ee+pe,V.__data)):ve.isMatrix3?(V.__data[0]=ve.elements[0],V.__data[1]=ve.elements[1],V.__data[2]=ve.elements[2],V.__data[3]=0,V.__data[4]=ve.elements[3],V.__data[5]=ve.elements[4],V.__data[6]=ve.elements[5],V.__data[7]=0,V.__data[8]=ve.elements[6],V.__data[9]=ve.elements[7],V.__data[10]=ve.elements[8],V.__data[11]=0):(ve.toArray(V.__data,pe),pe+=Se.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,ee,V.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function _(C,I,L,F){const N=C.value,z=I+"_"+L;if(F[z]===void 0)return typeof N=="number"||typeof N=="boolean"?F[z]=N:F[z]=N.clone(),!0;{const G=F[z];if(typeof N=="number"||typeof N=="boolean"){if(G!==N)return F[z]=N,!0}else if(G.equals(N)===!1)return G.copy(N),!0}return!1}function S(C){const I=C.uniforms;let L=0;const F=16;for(let z=0,G=I.length;z<G;z++){const D=Array.isArray(I[z])?I[z]:[I[z]];for(let P=0,V=D.length;P<V;P++){const ee=D[P],ie=Array.isArray(ee.value)?ee.value:[ee.value];for(let pe=0,me=ie.length;pe<me;pe++){const ve=ie[pe],Se=T(ve),B=L%F,Q=B%Se.boundary,K=B+Q;L+=Q,K!==0&&F-K<Se.storage&&(L+=F-K),ee.__data=new Float32Array(Se.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=L,L+=Se.storage}}}const N=L%F;return N>0&&(L+=F-N),C.__size=L,C.__cache={},this}function T(C){const I={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(I.boundary=4,I.storage=4):C.isVector2?(I.boundary=8,I.storage=8):C.isVector3||C.isColor?(I.boundary=16,I.storage=12):C.isVector4?(I.boundary=16,I.storage=16):C.isMatrix3?(I.boundary=48,I.storage=48):C.isMatrix4?(I.boundary=64,I.storage=64):C.isTexture?ft("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ft("WebGLRenderer: Unsupported uniform value type.",C),I}function M(C){const I=C.target;I.removeEventListener("dispose",M);const L=l.indexOf(I.__bindingPointIndex);l.splice(L,1),r.deleteBuffer(i[I.id]),delete i[I.id],delete s[I.id]}function w(){for(const C in i)r.deleteBuffer(i[C]);l=[],i={},s={}}return{bind:f,update:m,dispose:w}}const tI=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let ao=null;function nI(){return ao===null&&(ao=new qr(tI,32,32,gg,ll),ao.minFilter=Wn,ao.magFilter=Wn,ao.wrapS=Oa,ao.wrapT=Oa,ao.generateMipmaps=!1,ao.needsUpdate=!0),ao}class Mw{constructor(e={}){const{canvas:t=f1(),context:n=null,depth:i=!0,stencil:s=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:m=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:x=!1}=e;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=l;const S=new Set([yg,vg,gf]),T=new Set([gr,co,fc,mc,fg,mg]),M=new Uint32Array(4),w=new Int32Array(4);let C=null,I=null;const L=[],F=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=vs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const N=this;let z=!1;this._outputColorSpace=Na;let G=0,D=0,P=null,V=-1,ee=null;const ie=new vn,pe=new vn;let me=null;const ve=new xt(0);let Se=0,B=t.width,Q=t.height,K=1,H=null,ae=null;const Re=new vn(0,0,B,Q),Ye=new vn(0,0,B,Q);let rt=!1;const ce=new kc;let we=!1,Be=!1;const it=new Vt,st=new Y,Lt=new vn,on={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let yt=!1;function Le(){return P===null?K:1}let X=n;function Ne(j,le){return t.getContext(j,le)}try{const j={alpha:!0,depth:i,stencil:s,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:m,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${hg}`),t.addEventListener("webglcontextlost",We,!1),t.addEventListener("webglcontextrestored",Ie,!1),t.addEventListener("webglcontextcreationerror",lt,!1),X===null){const le="webgl2";if(X=Ne(le,j),X===null)throw Ne(le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(j){throw j("WebGLRenderer: "+j.message),j}let ze,Ke,Ue,ot,$e,ut,W,O,ue,Te,Pe,Me,Mt,et,kt,wt,De,Je,Dt,$,ye,je,J,Ve;function He(){ze=new dA(X),ze.init(),je=new Sw(X,ze),Ke=new iA(X,ze,e,je),Ue=new XC(X,ze),Ke.reversedDepthBuffer&&x&&Ue.buffers.depth.setReversed(!0),ot=new pA(X),$e=new LC,ut=new YC(X,ze,Ue,$e,Ke,je,ot),W=new rA(N),O=new cA(N),ue=new xk(X),J=new tA(X,ue),Te=new fA(X,ue,ot,J),Pe=new vA(X,Te,ue,ot),Dt=new gA(X,Ke,ut),wt=new aA($e),Me=new PC(N,W,O,ze,Ke,J,wt),Mt=new $C(N,$e),et=new DC,kt=new jC(ze),Je=new eA(N,W,O,Ue,Pe,_,f),De=new GC(N,Pe,Ke),Ve=new eI(X,ot,Ke,Ue),$=new nA(X,ze,ot),ye=new mA(X,ze,ot),ot.programs=Me.programs,N.capabilities=Ke,N.extensions=ze,N.properties=$e,N.renderLists=et,N.shadowMap=De,N.state=Ue,N.info=ot}He();const Ge=new JC(N,X);this.xr=Ge,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const j=ze.get("WEBGL_lose_context");j&&j.loseContext()},this.forceContextRestore=function(){const j=ze.get("WEBGL_lose_context");j&&j.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(j){j!==void 0&&(K=j,this.setSize(B,Q,!1))},this.getSize=function(j){return j.set(B,Q)},this.setSize=function(j,le,de=!0){if(Ge.isPresenting){ft("WebGLRenderer: Can't change size while VR device is presenting.");return}B=j,Q=le,t.width=Math.floor(j*K),t.height=Math.floor(le*K),de===!0&&(t.style.width=j+"px",t.style.height=le+"px"),this.setViewport(0,0,j,le)},this.getDrawingBufferSize=function(j){return j.set(B*K,Q*K).floor()},this.setDrawingBufferSize=function(j,le,de){B=j,Q=le,K=de,t.width=Math.floor(j*de),t.height=Math.floor(le*de),this.setViewport(0,0,j,le)},this.getCurrentViewport=function(j){return j.copy(ie)},this.getViewport=function(j){return j.copy(Re)},this.setViewport=function(j,le,de,_e){j.isVector4?Re.set(j.x,j.y,j.z,j.w):Re.set(j,le,de,_e),Ue.viewport(ie.copy(Re).multiplyScalar(K).round())},this.getScissor=function(j){return j.copy(Ye)},this.setScissor=function(j,le,de,_e){j.isVector4?Ye.set(j.x,j.y,j.z,j.w):Ye.set(j,le,de,_e),Ue.scissor(pe.copy(Ye).multiplyScalar(K).round())},this.getScissorTest=function(){return rt},this.setScissorTest=function(j){Ue.setScissorTest(rt=j)},this.setOpaqueSort=function(j){H=j},this.setTransparentSort=function(j){ae=j},this.getClearColor=function(j){return j.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor(...arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha(...arguments)},this.clear=function(j=!0,le=!0,de=!0){let _e=0;if(j){let he=!1;if(P!==null){const Ze=P.texture.format;he=S.has(Ze)}if(he){const Ze=P.texture.type,ht=T.has(Ze),bt=Je.getClearColor(),mt=Je.getClearAlpha(),At=bt.r,tt=bt.g,at=bt.b;ht?(M[0]=At,M[1]=tt,M[2]=at,M[3]=mt,X.clearBufferuiv(X.COLOR,0,M)):(w[0]=At,w[1]=tt,w[2]=at,w[3]=mt,X.clearBufferiv(X.COLOR,0,w))}else _e|=X.COLOR_BUFFER_BIT}le&&(_e|=X.DEPTH_BUFFER_BIT),de&&(_e|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(_e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",We,!1),t.removeEventListener("webglcontextrestored",Ie,!1),t.removeEventListener("webglcontextcreationerror",lt,!1),Je.dispose(),et.dispose(),kt.dispose(),$e.dispose(),W.dispose(),O.dispose(),Pe.dispose(),J.dispose(),Ve.dispose(),Me.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",Jr),Ge.removeEventListener("sessionend",ml),Ii.stop()};function We(j){j.preventDefault(),of("WebGLRenderer: Context Lost."),z=!0}function Ie(){of("WebGLRenderer: Context Restored."),z=!1;const j=ot.autoReset,le=De.enabled,de=De.autoUpdate,_e=De.needsUpdate,he=De.type;He(),ot.autoReset=j,De.enabled=le,De.autoUpdate=de,De.needsUpdate=_e,De.type=he}function lt(j){Wt("WebGLRenderer: A WebGL context could not be created. Reason: ",j.statusMessage)}function Pt(j){const le=j.target;le.removeEventListener("dispose",Pt),hn(le)}function hn(j){en(j),$e.remove(j)}function en(j){const le=$e.get(j).programs;le!==void 0&&(le.forEach(function(de){Me.releaseProgram(de)}),j.isShaderMaterial&&Me.releaseShaderCache(j))}this.renderBufferDirect=function(j,le,de,_e,he,Ze){le===null&&(le=on);const ht=he.isMesh&&he.matrixWorld.determinant()<0,bt=Nh(j,le,de,_e,he);Ue.setMaterial(_e,ht);let mt=de.index,At=1;if(_e.wireframe===!0){if(mt=Te.getWireframeAttribute(de),mt===void 0)return;At=2}const tt=de.drawRange,at=de.attributes.position;let Nt=tt.start*At,Ht=(tt.start+tt.count)*At;Ze!==null&&(Nt=Math.max(Nt,Ze.start*At),Ht=Math.min(Ht,(Ze.start+Ze.count)*At)),mt!==null?(Nt=Math.max(Nt,0),Ht=Math.min(Ht,mt.count)):at!=null&&(Nt=Math.max(Nt,0),Ht=Math.min(Ht,at.count));const rn=Ht-Nt;if(rn<0||rn===1/0)return;J.setup(he,_e,bt,de,mt);let xn,sn=$;if(mt!==null&&(xn=ue.get(mt),sn=ye,sn.setIndex(xn)),he.isMesh)_e.wireframe===!0?(Ue.setLineWidth(_e.wireframeLinewidth*Le()),sn.setMode(X.LINES)):sn.setMode(X.TRIANGLES);else if(he.isLine){let gt=_e.linewidth;gt===void 0&&(gt=1),Ue.setLineWidth(gt*Le()),he.isLineSegments?sn.setMode(X.LINES):he.isLineLoop?sn.setMode(X.LINE_LOOP):sn.setMode(X.LINE_STRIP)}else he.isPoints?sn.setMode(X.POINTS):he.isSprite&&sn.setMode(X.TRIANGLES);if(he.isBatchedMesh)if(he._multiDrawInstances!==null)yc("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),sn.renderMultiDrawInstances(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount,he._multiDrawInstances);else if(ze.get("WEBGL_multi_draw"))sn.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else{const gt=he._multiDrawStarts,dn=he._multiDrawCounts,an=he._multiDrawCount,Si=mt?ue.get(mt).bytesPerElement:1,Ba=$e.get(_e).currentProgram.getUniforms();for(let ai=0;ai<an;ai++)Ba.setValue(X,"_gl_DrawID",ai),sn.render(gt[ai]/Si,dn[ai])}else if(he.isInstancedMesh)sn.renderInstances(Nt,rn,he.count);else if(de.isInstancedBufferGeometry){const gt=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,dn=Math.min(de.instanceCount,gt);sn.renderInstances(Nt,rn,dn)}else sn.render(Nt,rn)};function Xn(j,le,de){j.transparent===!0&&j.side===pr&&j.forceSinglePass===!1?(j.side=ya,j.needsUpdate=!0,go(j,le,de),j.side=ho,j.needsUpdate=!0,go(j,le,de),j.side=pr):go(j,le,de)}this.compile=function(j,le,de=null){de===null&&(de=j),I=kt.get(de),I.init(le),F.push(I),de.traverseVisible(function(he){he.isLight&&he.layers.test(le.layers)&&(I.pushLight(he),he.castShadow&&I.pushShadow(he))}),j!==de&&j.traverseVisible(function(he){he.isLight&&he.layers.test(le.layers)&&(I.pushLight(he),he.castShadow&&I.pushShadow(he))}),I.setupLights();const _e=new Set;return j.traverse(function(he){if(!(he.isMesh||he.isPoints||he.isLine||he.isSprite))return;const Ze=he.material;if(Ze)if(Array.isArray(Ze))for(let ht=0;ht<Ze.length;ht++){const bt=Ze[ht];Xn(bt,de,he),_e.add(bt)}else Xn(Ze,de,he),_e.add(Ze)}),I=F.pop(),_e},this.compileAsync=function(j,le,de=null){const _e=this.compile(j,le,de);return new Promise(he=>{function Ze(){if(_e.forEach(function(ht){$e.get(ht).currentProgram.isReady()&&_e.delete(ht)}),_e.size===0){he(j);return}setTimeout(Ze,10)}ze.get("KHR_parallel_shader_compile")!==null?Ze():setTimeout(Ze,10)})};let Un=null;function fl(j){Un&&Un(j)}function Jr(){Ii.stop()}function ml(){Ii.start()}const Ii=new yw;Ii.setAnimationLoop(fl),typeof self<"u"&&Ii.setContext(self),this.setAnimationLoop=function(j){Un=j,Ge.setAnimationLoop(j),j===null?Ii.stop():Ii.start()},Ge.addEventListener("sessionstart",Jr),Ge.addEventListener("sessionend",ml),this.render=function(j,le){if(le!==void 0&&le.isCamera!==!0){Wt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(z===!0)return;if(j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),le.parent===null&&le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(le),le=Ge.getCamera()),j.isScene===!0&&j.onBeforeRender(N,j,le,P),I=kt.get(j,F.length),I.init(le),F.push(I),it.multiplyMatrices(le.projectionMatrix,le.matrixWorldInverse),ce.setFromProjectionMatrix(it,$a,le.reversedDepth),Be=this.localClippingEnabled,we=wt.init(this.clippingPlanes,Be),C=et.get(j,L.length),C.init(),L.push(C),Ge.enabled===!0&&Ge.isPresenting===!0){const Ze=N.xr.getDepthSensingMesh();Ze!==null&&Qr(Ze,le,-1/0,N.sortObjects)}Qr(j,le,0,N.sortObjects),C.finish(),N.sortObjects===!0&&C.sort(H,ae),yt=Ge.enabled===!1||Ge.isPresenting===!1||Ge.hasDepthSensing()===!1,yt&&Je.addToRenderList(C,j),this.info.render.frame++,we===!0&&wt.beginShadows();const de=I.state.shadowsArray;De.render(de,j,le),we===!0&&wt.endShadows(),this.info.autoReset===!0&&this.info.reset();const _e=C.opaque,he=C.transmissive;if(I.setupLights(),le.isArrayCamera){const Ze=le.cameras;if(he.length>0)for(let ht=0,bt=Ze.length;ht<bt;ht++){const mt=Ze[ht];mo(_e,he,j,mt)}yt&&Je.render(j);for(let ht=0,bt=Ze.length;ht<bt;ht++){const mt=Ze[ht];Fa(C,j,mt,mt.viewport)}}else he.length>0&&mo(_e,he,j,le),yt&&Je.render(j),Fa(C,j,le);P!==null&&D===0&&(ut.updateMultisampleRenderTarget(P),ut.updateRenderTargetMipmap(P)),j.isScene===!0&&j.onAfterRender(N,j,le),J.resetDefaultState(),V=-1,ee=null,F.pop(),F.length>0?(I=F[F.length-1],we===!0&&wt.setGlobalState(N.clippingPlanes,I.state.camera)):I=null,L.pop(),L.length>0?C=L[L.length-1]:C=null};function Qr(j,le,de,_e){if(j.visible===!1)return;if(j.layers.test(le.layers)){if(j.isGroup)de=j.renderOrder;else if(j.isLOD)j.autoUpdate===!0&&j.update(le);else if(j.isLight)I.pushLight(j),j.castShadow&&I.pushShadow(j);else if(j.isSprite){if(!j.frustumCulled||ce.intersectsSprite(j)){_e&&Lt.setFromMatrixPosition(j.matrixWorld).applyMatrix4(it);const ht=Pe.update(j),bt=j.material;bt.visible&&C.push(j,ht,bt,de,Lt.z,null)}}else if((j.isMesh||j.isLine||j.isPoints)&&(!j.frustumCulled||ce.intersectsObject(j))){const ht=Pe.update(j),bt=j.material;if(_e&&(j.boundingSphere!==void 0?(j.boundingSphere===null&&j.computeBoundingSphere(),Lt.copy(j.boundingSphere.center)):(ht.boundingSphere===null&&ht.computeBoundingSphere(),Lt.copy(ht.boundingSphere.center)),Lt.applyMatrix4(j.matrixWorld).applyMatrix4(it)),Array.isArray(bt)){const mt=ht.groups;for(let At=0,tt=mt.length;At<tt;At++){const at=mt[At],Nt=bt[at.materialIndex];Nt&&Nt.visible&&C.push(j,ht,Nt,de,Lt.z,at)}}else bt.visible&&C.push(j,ht,bt,de,Lt.z,null)}}const Ze=j.children;for(let ht=0,bt=Ze.length;ht<bt;ht++)Qr(Ze[ht],le,de,_e)}function Fa(j,le,de,_e){const{opaque:he,transmissive:Ze,transparent:ht}=j;I.setupLightsView(de),we===!0&&wt.setGlobalState(N.clippingPlanes,de),_e&&Ue.viewport(ie.copy(_e)),he.length>0&&po(he,le,de),Ze.length>0&&po(Ze,le,de),ht.length>0&&po(ht,le,de),Ue.buffers.depth.setTest(!0),Ue.buffers.depth.setMask(!0),Ue.buffers.color.setMask(!0),Ue.setPolygonOffset(!1)}function mo(j,le,de,_e){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;I.state.transmissionRenderTarget[_e.id]===void 0&&(I.state.transmissionRenderTarget[_e.id]=new Kr(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")||ze.has("EXT_color_buffer_float")?ll:gr,minFilter:ms,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:mn.workingColorSpace}));const Ze=I.state.transmissionRenderTarget[_e.id],ht=_e.viewport||ie;Ze.setSize(ht.z*N.transmissionResolutionScale,ht.w*N.transmissionResolutionScale);const bt=N.getRenderTarget(),mt=N.getActiveCubeFace(),At=N.getActiveMipmapLevel();N.setRenderTarget(Ze),N.getClearColor(ve),Se=N.getClearAlpha(),Se<1&&N.setClearColor(16777215,.5),N.clear(),yt&&Je.render(de);const tt=N.toneMapping;N.toneMapping=vs;const at=_e.viewport;if(_e.viewport!==void 0&&(_e.viewport=void 0),I.setupLightsView(_e),we===!0&&wt.setGlobalState(N.clippingPlanes,_e),po(j,de,_e),ut.updateMultisampleRenderTarget(Ze),ut.updateRenderTargetMipmap(Ze),ze.has("WEBGL_multisampled_render_to_texture")===!1){let Nt=!1;for(let Ht=0,rn=le.length;Ht<rn;Ht++){const xn=le[Ht],{object:sn,geometry:gt,material:dn,group:an}=xn;if(dn.side===pr&&sn.layers.test(_e.layers)){const Si=dn.side;dn.side=ya,dn.needsUpdate=!0,Lh(sn,de,_e,gt,dn,an),dn.side=Si,dn.needsUpdate=!0,Nt=!0}}Nt===!0&&(ut.updateMultisampleRenderTarget(Ze),ut.updateRenderTargetMipmap(Ze))}N.setRenderTarget(bt,mt,At),N.setClearColor(ve,Se),at!==void 0&&(_e.viewport=at),N.toneMapping=tt}function po(j,le,de){const _e=le.isScene===!0?le.overrideMaterial:null;for(let he=0,Ze=j.length;he<Ze;he++){const ht=j[he],{object:bt,geometry:mt,group:At}=ht;let tt=ht.material;tt.allowOverride===!0&&_e!==null&&(tt=_e),bt.layers.test(de.layers)&&Lh(bt,le,de,mt,tt,At)}}function Lh(j,le,de,_e,he,Ze){j.onBeforeRender(N,le,de,_e,he,Ze),j.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,j.matrixWorld),j.normalMatrix.getNormalMatrix(j.modelViewMatrix),he.onBeforeRender(N,le,de,_e,j,Ze),he.transparent===!0&&he.side===pr&&he.forceSinglePass===!1?(he.side=ya,he.needsUpdate=!0,N.renderBufferDirect(de,le,_e,he,j,Ze),he.side=ho,he.needsUpdate=!0,N.renderBufferDirect(de,le,_e,he,j,Ze),he.side=pr):N.renderBufferDirect(de,le,_e,he,j,Ze),j.onAfterRender(N,le,de,_e,he,Ze)}function go(j,le,de){le.isScene!==!0&&(le=on);const _e=$e.get(j),he=I.state.lights,Ze=I.state.shadowsArray,ht=he.state.version,bt=Me.getParameters(j,he.state,Ze,le,de),mt=Me.getProgramCacheKey(bt);let At=_e.programs;_e.environment=j.isMeshStandardMaterial?le.environment:null,_e.fog=le.fog,_e.envMap=(j.isMeshStandardMaterial?O:W).get(j.envMap||_e.environment),_e.envMapRotation=_e.environment!==null&&j.envMap===null?le.environmentRotation:j.envMapRotation,At===void 0&&(j.addEventListener("dispose",Pt),At=new Map,_e.programs=At);let tt=At.get(mt);if(tt!==void 0){if(_e.currentProgram===tt&&_e.lightsStateVersion===ht)return pl(j,bt),tt}else bt.uniforms=Me.getUniforms(j),j.onBeforeCompile(bt,N),tt=Me.acquireProgram(bt,mt),At.set(mt,tt),_e.uniforms=bt.uniforms;const at=_e.uniforms;return(!j.isShaderMaterial&&!j.isRawShaderMaterial||j.clipping===!0)&&(at.clippingPlanes=wt.uniform),pl(j,bt),_e.needsLights=Oh(j),_e.lightsStateVersion=ht,_e.needsLights&&(at.ambientLightColor.value=he.state.ambient,at.lightProbe.value=he.state.probe,at.directionalLights.value=he.state.directional,at.directionalLightShadows.value=he.state.directionalShadow,at.spotLights.value=he.state.spot,at.spotLightShadows.value=he.state.spotShadow,at.rectAreaLights.value=he.state.rectArea,at.ltc_1.value=he.state.rectAreaLTC1,at.ltc_2.value=he.state.rectAreaLTC2,at.pointLights.value=he.state.point,at.pointLightShadows.value=he.state.pointShadow,at.hemisphereLights.value=he.state.hemi,at.directionalShadowMap.value=he.state.directionalShadowMap,at.directionalShadowMatrix.value=he.state.directionalShadowMatrix,at.spotShadowMap.value=he.state.spotShadowMap,at.spotLightMatrix.value=he.state.spotLightMatrix,at.spotLightMap.value=he.state.spotLightMap,at.pointShadowMap.value=he.state.pointShadowMap,at.pointShadowMatrix.value=he.state.pointShadowMatrix),_e.currentProgram=tt,_e.uniformsList=null,tt}function nr(j){if(j.uniformsList===null){const le=j.currentProgram.getUniforms();j.uniformsList=gp.seqWithValue(le.seq,j.uniforms)}return j.uniformsList}function pl(j,le){const de=$e.get(j);de.outputColorSpace=le.outputColorSpace,de.batching=le.batching,de.batchingColor=le.batchingColor,de.instancing=le.instancing,de.instancingColor=le.instancingColor,de.instancingMorph=le.instancingMorph,de.skinning=le.skinning,de.morphTargets=le.morphTargets,de.morphNormals=le.morphNormals,de.morphColors=le.morphColors,de.morphTargetsCount=le.morphTargetsCount,de.numClippingPlanes=le.numClippingPlanes,de.numIntersection=le.numClipIntersection,de.vertexAlphas=le.vertexAlphas,de.vertexTangents=le.vertexTangents,de.toneMapping=le.toneMapping}function Nh(j,le,de,_e,he){le.isScene!==!0&&(le=on),ut.resetTextureUnits();const Ze=le.fog,ht=_e.isMeshStandardMaterial?le.environment:null,bt=P===null?N.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Th,mt=(_e.isMeshStandardMaterial?O:W).get(_e.envMap||ht),At=_e.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,tt=!!de.attributes.tangent&&(!!_e.normalMap||_e.anisotropy>0),at=!!de.morphAttributes.position,Nt=!!de.morphAttributes.normal,Ht=!!de.morphAttributes.color;let rn=vs;_e.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(rn=N.toneMapping);const xn=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,sn=xn!==void 0?xn.length:0,gt=$e.get(_e),dn=I.state.lights;if(we===!0&&(Be===!0||j!==ee)){const Fn=j===ee&&_e.id===V;wt.setState(_e,j,Fn)}let an=!1;_e.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==dn.state.version||gt.outputColorSpace!==bt||he.isBatchedMesh&&gt.batching===!1||!he.isBatchedMesh&&gt.batching===!0||he.isBatchedMesh&&gt.batchingColor===!0&&he.colorTexture===null||he.isBatchedMesh&&gt.batchingColor===!1&&he.colorTexture!==null||he.isInstancedMesh&&gt.instancing===!1||!he.isInstancedMesh&&gt.instancing===!0||he.isSkinnedMesh&&gt.skinning===!1||!he.isSkinnedMesh&&gt.skinning===!0||he.isInstancedMesh&&gt.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&gt.instancingColor===!1&&he.instanceColor!==null||he.isInstancedMesh&&gt.instancingMorph===!0&&he.morphTexture===null||he.isInstancedMesh&&gt.instancingMorph===!1&&he.morphTexture!==null||gt.envMap!==mt||_e.fog===!0&&gt.fog!==Ze||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==wt.numPlanes||gt.numIntersection!==wt.numIntersection)||gt.vertexAlphas!==At||gt.vertexTangents!==tt||gt.morphTargets!==at||gt.morphNormals!==Nt||gt.morphColors!==Ht||gt.toneMapping!==rn||gt.morphTargetsCount!==sn)&&(an=!0):(an=!0,gt.__version=_e.version);let Si=gt.currentProgram;an===!0&&(Si=go(_e,le,he));let Ba=!1,ai=!1,ri=!1;const Sn=Si.getUniforms(),Yn=gt.uniforms;if(Ue.useProgram(Si.program)&&(Ba=!0,ai=!0,ri=!0),_e.id!==V&&(V=_e.id,ai=!0),Ba||ee!==j){Ue.buffers.depth.getReversed()&&j.reversedDepth!==!0&&(j._reversedDepth=!0,j.updateProjectionMatrix()),Sn.setValue(X,"projectionMatrix",j.projectionMatrix),Sn.setValue(X,"viewMatrix",j.matrixWorldInverse);const zt=Sn.map.cameraPosition;zt!==void 0&&zt.setValue(X,st.setFromMatrixPosition(j.matrixWorld)),Ke.logarithmicDepthBuffer&&Sn.setValue(X,"logDepthBufFC",2/(Math.log(j.far+1)/Math.LN2)),(_e.isMeshPhongMaterial||_e.isMeshToonMaterial||_e.isMeshLambertMaterial||_e.isMeshBasicMaterial||_e.isMeshStandardMaterial||_e.isShaderMaterial)&&Sn.setValue(X,"isOrthographic",j.isOrthographicCamera===!0),ee!==j&&(ee=j,ai=!0,ri=!0)}if(he.isSkinnedMesh){Sn.setOptional(X,he,"bindMatrix"),Sn.setOptional(X,he,"bindMatrixInverse");const Fn=he.skeleton;Fn&&(Fn.boneTexture===null&&Fn.computeBoneTexture(),Sn.setValue(X,"boneTexture",Fn.boneTexture,ut))}he.isBatchedMesh&&(Sn.setOptional(X,he,"batchingTexture"),Sn.setValue(X,"batchingTexture",he._matricesTexture,ut),Sn.setOptional(X,he,"batchingIdTexture"),Sn.setValue(X,"batchingIdTexture",he._indirectTexture,ut),Sn.setOptional(X,he,"batchingColorTexture"),he._colorsTexture!==null&&Sn.setValue(X,"batchingColorTexture",he._colorsTexture,ut));const Vi=de.morphAttributes;if((Vi.position!==void 0||Vi.normal!==void 0||Vi.color!==void 0)&&Dt.update(he,de,Si),(ai||gt.receiveShadow!==he.receiveShadow)&&(gt.receiveShadow=he.receiveShadow,Sn.setValue(X,"receiveShadow",he.receiveShadow)),_e.isMeshGouraudMaterial&&_e.envMap!==null&&(Yn.envMap.value=mt,Yn.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),_e.isMeshStandardMaterial&&_e.envMap===null&&le.environment!==null&&(Yn.envMapIntensity.value=le.environmentIntensity),Yn.dfgLUT!==void 0&&(Yn.dfgLUT.value=nI()),ai&&(Sn.setValue(X,"toneMappingExposure",N.toneMappingExposure),gt.needsLights&&Dh(Yn,ri),Ze&&_e.fog===!0&&Mt.refreshFogUniforms(Yn,Ze),Mt.refreshMaterialUniforms(Yn,_e,K,Q,I.state.transmissionRenderTarget[j.id]),gp.upload(X,nr(gt),Yn,ut)),_e.isShaderMaterial&&_e.uniformsNeedUpdate===!0&&(gp.upload(X,nr(gt),Yn,ut),_e.uniformsNeedUpdate=!1),_e.isSpriteMaterial&&Sn.setValue(X,"center",he.center),Sn.setValue(X,"modelViewMatrix",he.modelViewMatrix),Sn.setValue(X,"normalMatrix",he.normalMatrix),Sn.setValue(X,"modelMatrix",he.matrixWorld),_e.isShaderMaterial||_e.isRawShaderMaterial){const Fn=_e.uniformsGroups;for(let zt=0,ir=Fn.length;zt<ir;zt++){const ia=Fn[zt];Ve.update(ia,Si),Ve.bind(ia,Si)}}return Si}function Dh(j,le){j.ambientLightColor.needsUpdate=le,j.lightProbe.needsUpdate=le,j.directionalLights.needsUpdate=le,j.directionalLightShadows.needsUpdate=le,j.pointLights.needsUpdate=le,j.pointLightShadows.needsUpdate=le,j.spotLights.needsUpdate=le,j.spotLightShadows.needsUpdate=le,j.rectAreaLights.needsUpdate=le,j.hemisphereLights.needsUpdate=le}function Oh(j){return j.isMeshLambertMaterial||j.isMeshToonMaterial||j.isMeshPhongMaterial||j.isMeshStandardMaterial||j.isShadowMaterial||j.isShaderMaterial&&j.lights===!0}this.getActiveCubeFace=function(){return G},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(j,le,de){const _e=$e.get(j);_e.__autoAllocateDepthBuffer=j.resolveDepthBuffer===!1,_e.__autoAllocateDepthBuffer===!1&&(_e.__useRenderToTexture=!1),$e.get(j.texture).__webglTexture=le,$e.get(j.depthTexture).__webglTexture=_e.__autoAllocateDepthBuffer?void 0:de,_e.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(j,le){const de=$e.get(j);de.__webglFramebuffer=le,de.__useDefaultFramebuffer=le===void 0};const Uh=X.createFramebuffer();this.setRenderTarget=function(j,le=0,de=0){P=j,G=le,D=de;let _e=!0,he=null,Ze=!1,ht=!1;if(j){const mt=$e.get(j);if(mt.__useDefaultFramebuffer!==void 0)Ue.bindFramebuffer(X.FRAMEBUFFER,null),_e=!1;else if(mt.__webglFramebuffer===void 0)ut.setupRenderTarget(j);else if(mt.__hasExternalTextures)ut.rebindTextures(j,$e.get(j.texture).__webglTexture,$e.get(j.depthTexture).__webglTexture);else if(j.depthBuffer){const at=j.depthTexture;if(mt.__boundDepthTexture!==at){if(at!==null&&$e.has(at)&&(j.width!==at.image.width||j.height!==at.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ut.setupDepthRenderbuffer(j)}}const At=j.texture;(At.isData3DTexture||At.isDataArrayTexture||At.isCompressedArrayTexture)&&(ht=!0);const tt=$e.get(j).__webglFramebuffer;j.isWebGLCubeRenderTarget?(Array.isArray(tt[le])?he=tt[le][de]:he=tt[le],Ze=!0):j.samples>0&&ut.useMultisampledRTT(j)===!1?he=$e.get(j).__webglMultisampledFramebuffer:Array.isArray(tt)?he=tt[de]:he=tt,ie.copy(j.viewport),pe.copy(j.scissor),me=j.scissorTest}else ie.copy(Re).multiplyScalar(K).floor(),pe.copy(Ye).multiplyScalar(K).floor(),me=rt;if(de!==0&&(he=Uh),Ue.bindFramebuffer(X.FRAMEBUFFER,he)&&_e&&Ue.drawBuffers(j,he),Ue.viewport(ie),Ue.scissor(pe),Ue.setScissorTest(me),Ze){const mt=$e.get(j.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+le,mt.__webglTexture,de)}else if(ht){const mt=le;for(let At=0;At<j.textures.length;At++){const tt=$e.get(j.textures[At]);X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0+At,tt.__webglTexture,de,mt)}}else if(j!==null&&de!==0){const mt=$e.get(j.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,mt.__webglTexture,de)}V=-1},this.readRenderTargetPixels=function(j,le,de,_e,he,Ze,ht,bt=0){if(!(j&&j.isWebGLRenderTarget)){Wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mt=$e.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&ht!==void 0&&(mt=mt[ht]),mt){Ue.bindFramebuffer(X.FRAMEBUFFER,mt);try{const At=j.textures[bt],tt=At.format,at=At.type;if(!Ke.textureFormatReadable(tt)){Wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ke.textureTypeReadable(at)){Wt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}le>=0&&le<=j.width-_e&&de>=0&&de<=j.height-he&&(j.textures.length>1&&X.readBuffer(X.COLOR_ATTACHMENT0+bt),X.readPixels(le,de,_e,he,je.convert(tt),je.convert(at),Ze))}finally{const At=P!==null?$e.get(P).__webglFramebuffer:null;Ue.bindFramebuffer(X.FRAMEBUFFER,At)}}},this.readRenderTargetPixelsAsync=async function(j,le,de,_e,he,Ze,ht,bt=0){if(!(j&&j.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let mt=$e.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&ht!==void 0&&(mt=mt[ht]),mt)if(le>=0&&le<=j.width-_e&&de>=0&&de<=j.height-he){Ue.bindFramebuffer(X.FRAMEBUFFER,mt);const At=j.textures[bt],tt=At.format,at=At.type;if(!Ke.textureFormatReadable(tt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ke.textureTypeReadable(at))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Nt=X.createBuffer();X.bindBuffer(X.PIXEL_PACK_BUFFER,Nt),X.bufferData(X.PIXEL_PACK_BUFFER,Ze.byteLength,X.STREAM_READ),j.textures.length>1&&X.readBuffer(X.COLOR_ATTACHMENT0+bt),X.readPixels(le,de,_e,he,je.convert(tt),je.convert(at),0);const Ht=P!==null?$e.get(P).__webglFramebuffer:null;Ue.bindFramebuffer(X.FRAMEBUFFER,Ht);const rn=X.fenceSync(X.SYNC_GPU_COMMANDS_COMPLETE,0);return X.flush(),await bM(X,rn,4),X.bindBuffer(X.PIXEL_PACK_BUFFER,Nt),X.getBufferSubData(X.PIXEL_PACK_BUFFER,0,Ze),X.deleteBuffer(Nt),X.deleteSync(rn),Ze}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(j,le=null,de=0){const _e=Math.pow(2,-de),he=Math.floor(j.image.width*_e),Ze=Math.floor(j.image.height*_e),ht=le!==null?le.x:0,bt=le!==null?le.y:0;ut.setTexture2D(j,0),X.copyTexSubImage2D(X.TEXTURE_2D,de,0,0,ht,bt,he,Ze),Ue.unbindTexture()};const Fh=X.createFramebuffer(),Bh=X.createFramebuffer();this.copyTextureToTexture=function(j,le,de=null,_e=null,he=0,Ze=null){Ze===null&&(he!==0?(yc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ze=he,he=0):Ze=0);let ht,bt,mt,At,tt,at,Nt,Ht,rn;const xn=j.isCompressedTexture?j.mipmaps[Ze]:j.image;if(de!==null)ht=de.max.x-de.min.x,bt=de.max.y-de.min.y,mt=de.isBox3?de.max.z-de.min.z:1,At=de.min.x,tt=de.min.y,at=de.isBox3?de.min.z:0;else{const Vi=Math.pow(2,-he);ht=Math.floor(xn.width*Vi),bt=Math.floor(xn.height*Vi),j.isDataArrayTexture?mt=xn.depth:j.isData3DTexture?mt=Math.floor(xn.depth*Vi):mt=1,At=0,tt=0,at=0}_e!==null?(Nt=_e.x,Ht=_e.y,rn=_e.z):(Nt=0,Ht=0,rn=0);const sn=je.convert(le.format),gt=je.convert(le.type);let dn;le.isData3DTexture?(ut.setTexture3D(le,0),dn=X.TEXTURE_3D):le.isDataArrayTexture||le.isCompressedArrayTexture?(ut.setTexture2DArray(le,0),dn=X.TEXTURE_2D_ARRAY):(ut.setTexture2D(le,0),dn=X.TEXTURE_2D),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,le.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,le.unpackAlignment);const an=X.getParameter(X.UNPACK_ROW_LENGTH),Si=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Ba=X.getParameter(X.UNPACK_SKIP_PIXELS),ai=X.getParameter(X.UNPACK_SKIP_ROWS),ri=X.getParameter(X.UNPACK_SKIP_IMAGES);X.pixelStorei(X.UNPACK_ROW_LENGTH,xn.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,xn.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,At),X.pixelStorei(X.UNPACK_SKIP_ROWS,tt),X.pixelStorei(X.UNPACK_SKIP_IMAGES,at);const Sn=j.isDataArrayTexture||j.isData3DTexture,Yn=le.isDataArrayTexture||le.isData3DTexture;if(j.isDepthTexture){const Vi=$e.get(j),Fn=$e.get(le),zt=$e.get(Vi.__renderTarget),ir=$e.get(Fn.__renderTarget);Ue.bindFramebuffer(X.READ_FRAMEBUFFER,zt.__webglFramebuffer),Ue.bindFramebuffer(X.DRAW_FRAMEBUFFER,ir.__webglFramebuffer);for(let ia=0;ia<mt;ia++)Sn&&(X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,$e.get(j).__webglTexture,he,at+ia),X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,$e.get(le).__webglTexture,Ze,rn+ia)),X.blitFramebuffer(At,tt,ht,bt,Nt,Ht,ht,bt,X.DEPTH_BUFFER_BIT,X.NEAREST);Ue.bindFramebuffer(X.READ_FRAMEBUFFER,null),Ue.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else if(he!==0||j.isRenderTargetTexture||$e.has(j)){const Vi=$e.get(j),Fn=$e.get(le);Ue.bindFramebuffer(X.READ_FRAMEBUFFER,Fh),Ue.bindFramebuffer(X.DRAW_FRAMEBUFFER,Bh);for(let zt=0;zt<mt;zt++)Sn?X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Vi.__webglTexture,he,at+zt):X.framebufferTexture2D(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,Vi.__webglTexture,he),Yn?X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Fn.__webglTexture,Ze,rn+zt):X.framebufferTexture2D(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,Fn.__webglTexture,Ze),he!==0?X.blitFramebuffer(At,tt,ht,bt,Nt,Ht,ht,bt,X.COLOR_BUFFER_BIT,X.NEAREST):Yn?X.copyTexSubImage3D(dn,Ze,Nt,Ht,rn+zt,At,tt,ht,bt):X.copyTexSubImage2D(dn,Ze,Nt,Ht,At,tt,ht,bt);Ue.bindFramebuffer(X.READ_FRAMEBUFFER,null),Ue.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else Yn?j.isDataTexture||j.isData3DTexture?X.texSubImage3D(dn,Ze,Nt,Ht,rn,ht,bt,mt,sn,gt,xn.data):le.isCompressedArrayTexture?X.compressedTexSubImage3D(dn,Ze,Nt,Ht,rn,ht,bt,mt,sn,xn.data):X.texSubImage3D(dn,Ze,Nt,Ht,rn,ht,bt,mt,sn,gt,xn):j.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,Ze,Nt,Ht,ht,bt,sn,gt,xn.data):j.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,Ze,Nt,Ht,xn.width,xn.height,sn,xn.data):X.texSubImage2D(X.TEXTURE_2D,Ze,Nt,Ht,ht,bt,sn,gt,xn);X.pixelStorei(X.UNPACK_ROW_LENGTH,an),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Si),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Ba),X.pixelStorei(X.UNPACK_SKIP_ROWS,ai),X.pixelStorei(X.UNPACK_SKIP_IMAGES,ri),Ze===0&&le.generateMipmaps&&X.generateMipmap(dn),Ue.unbindTexture()},this.initRenderTarget=function(j){$e.get(j).__webglFramebuffer===void 0&&ut.setupRenderTarget(j)},this.initTexture=function(j){j.isCubeTexture?ut.setTextureCube(j,0):j.isData3DTexture?ut.setTexture3D(j,0):j.isDataArrayTexture||j.isCompressedArrayTexture?ut.setTexture2DArray(j,0):ut.setTexture2D(j,0),Ue.unbindTexture()},this.resetState=function(){G=0,D=0,P=null,Ue.reset(),J.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return $a}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=mn._getDrawingBufferColorSpace(e),t.unpackColorSpace=mn._getUnpackColorSpace()}}const iI=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Ky,AddEquation:tl,AddOperation:Wb,AdditiveAnimationBlendMode:i0,AdditiveBlending:Iy,AgXToneMapping:Zb,AlphaFormat:t0,AlwaysCompare:c1,AlwaysDepth:bp,AlwaysStencilFunc:Ny,AmbientLight:sw,AnimationAction:pw,AnimationClip:ff,AnimationLoader:u2,AnimationMixer:B2,AnimationObjectGroup:U2,AnimationUtils:s2,ArcCurve:R1,ArrayCamera:dw,ArrowHelper:uk,AttachedBindMode:Ly,Audio:fw,AudioAnalyser:E2,AudioContext:A0,AudioListener:M2,AudioLoader:b2,AxesHelper:ck,BackSide:ya,BasicDepthPacking:n1,BasicShadowMap:kb,BatchedMesh:T1,Bone:c0,BooleanKeyframeTrack:Rh,Box2:q2,Box3:ta,Box3Helper:lk,BoxGeometry:Ih,BoxHelper:ok,BufferAttribute:Cn,BufferGeometry:Jt,BufferGeometryLoader:cw,ByteType:Jy,Cache:ps,Camera:vf,CameraHelper:sk,CanvasTexture:C3,CapsuleGeometry:Cg,CatmullRomCurve3:P1,CineonToneMapping:qb,CircleGeometry:Ig,ClampToEdgeWrapping:Oa,Clock:C0,Color:xt,ColorKeyframeTrack:k0,ColorManagement:mn,CompressedArrayTexture:E3,CompressedCubeTexture:A3,CompressedTexture:Eg,CompressedTextureLoader:c2,ConeGeometry:_f,ConstantAlphaFactor:Vb,ConstantColorFactor:zb,Controls:fk,CubeCamera:x1,CubeReflectionMapping:uo,CubeRefractionMapping:rl,CubeTexture:yf,CubeTextureLoader:d2,CubeUVReflectionMapping:Mc,CubicBezierCurve:p0,CubicBezierCurve3:L1,CubicInterpolant:Q1,CullFaceBack:Cy,CullFaceFront:Mb,CullFaceFrontBack:DS,CullFaceNone:Sb,Curve:Zr,CurvePath:D1,CustomBlending:Tb,CustomToneMapping:Kb,CylinderGeometry:xf,Cylindrical:Y2,Data3DTexture:bg,DataArrayTexture:_g,DataTexture:qr,DataTextureLoader:f2,DataUtils:QM,DecrementStencilOp:KS,DecrementWrapStencilOp:JS,DefaultLoadingManager:tw,DepthFormat:pc,DepthStencilFormat:gc,DepthTexture:Ag,DetachedBindMode:Qb,DirectionalLight:rw,DirectionalLightHelper:rk,DiscreteInterpolant:$1,DodecahedronGeometry:Rg,DoubleSide:pr,DstAlphaFactor:Db,DstColorFactor:Ub,DynamicCopyUsage:dM,DynamicDrawUsage:sM,DynamicReadUsage:hM,EdgesGeometry:I1,EllipseCurve:Pg,EqualCompare:o1,EqualDepth:Sp,EqualStencilFunc:tM,EquirectangularReflectionMapping:Jd,EquirectangularRefractionMapping:Qd,Euler:tr,EventDispatcher:ys,ExternalTexture:f0,ExtrudeGeometry:Lg,FileLoader:fo,Float16BufferAttribute:r3,Float32BufferAttribute:Et,FloatType:va,Fog:Sg,FogExp2:wg,FramebufferTexture:T3,FrontSide:ho,Frustum:kc,FrustumArray:Tg,GLBufferAttribute:G2,GLSL1:mM,GLSL3:Dy,GreaterCompare:l1,GreaterDepth:kp,GreaterEqualCompare:u1,GreaterEqualDepth:Mp,GreaterEqualStencilFunc:rM,GreaterStencilFunc:iM,GridHelper:ik,Group:uc,HalfFloatType:ll,HemisphereLight:nw,HemisphereLightHelper:nk,IcosahedronGeometry:Ng,ImageBitmapLoader:_2,ImageLoader:mf,ImageUtils:p1,IncrementStencilOp:qS,IncrementWrapStencilOp:ZS,InstancedBufferAttribute:bc,InstancedBufferGeometry:uw,InstancedInterleavedBuffer:H2,InstancedMesh:k1,Int16BufferAttribute:i3,Int32BufferAttribute:a3,Int8BufferAttribute:e3,IntType:dg,InterleavedBuffer:Mg,InterleavedBufferAttribute:Eh,Interpolant:Sf,InterpolateDiscrete:tf,InterpolateLinear:tg,InterpolateSmooth:mp,InterpolationSamplingMode:vM,InterpolationSamplingType:gM,InvertStencilOp:QS,KeepStencilOp:gh,KeyframeTrack:yr,LOD:S1,LatheGeometry:Dg,Layers:Sh,LessCompare:s1,LessDepth:wp,LessEqualCompare:a0,LessEqualDepth:kh,LessEqualStencilFunc:nM,LessStencilFunc:eM,Light:dl,LightProbe:hw,Line:ol,Line3:J2,LineBasicMaterial:xa,LineCurve:g0,LineCurve3:N1,LineDashedMaterial:K1,LineLoop:E1,LineSegments:xs,LinearFilter:Wn,LinearInterpolant:M0,LinearMipMapLinearFilter:BS,LinearMipMapNearestFilter:FS,LinearMipmapLinearFilter:ms,LinearMipmapNearestFilter:Hd,LinearSRGBColorSpace:Th,LinearToneMapping:Xb,LinearTransfer:af,Loader:Ua,LoaderUtils:zy,LoadingManager:T0,LoopOnce:$b,LoopPingPong:t1,LoopRepeat:e1,MOUSE:mh,Material:na,MaterialLoader:Vg,MathUtils:m1,Matrix2:L0,Matrix3:Zt,Matrix4:Vt,MaxEquation:Ib,Mesh:_i,MeshBasicMaterial:ul,MeshDepthMaterial:b0,MeshDistanceMaterial:w0,MeshLambertMaterial:Y1,MeshMatcapMaterial:q1,MeshNormalMaterial:X1,MeshPhongMaterial:G1,MeshPhysicalMaterial:H1,MeshStandardMaterial:_0,MeshToonMaterial:W1,MinEquation:Cb,MirroredRepeatWrapping:ef,MixOperation:Gb,MultiplyBlending:Py,MultiplyOperation:pf,NearestFilter:zi,NearestMipMapLinearFilter:US,NearestMipMapNearestFilter:OS,NearestMipmapLinearFilter:lc,NearestMipmapNearestFilter:Zy,NeutralToneMapping:Jb,NeverCompare:r1,NeverDepth:_p,NeverStencilFunc:$S,NoBlending:gs,NoColorSpace:so,NoToneMapping:vs,NormalAnimationBlendMode:xg,NormalBlending:bh,NotEqualCompare:h1,NotEqualDepth:Tp,NotEqualStencilFunc:aM,NumberKeyframeTrack:cf,Object3D:yn,ObjectLoader:y2,ObjectSpaceNormalMap:a1,OctahedronGeometry:bf,OneFactor:Pb,OneMinusConstantAlphaFactor:Hb,OneMinusConstantColorFactor:jb,OneMinusDstAlphaFactor:Ob,OneMinusDstColorFactor:Fb,OneMinusSrcAlphaFactor:xp,OneMinusSrcColorFactor:Nb,OrthographicCamera:al,PCFShadowMap:ug,PCFSoftShadowMap:Vd,PMREMGenerator:Gy,Path:rg,PerspectiveCamera:ii,Plane:ro,PlaneGeometry:Tc,PlaneHelper:hk,PointLight:aw,PointLightHelper:ek,Points:A1,PointsMaterial:d0,PolarGridHelper:ak,PolyhedronGeometry:cl,PositionalAudio:T2,PropertyBinding:gn,PropertyMixer:mw,QuadraticBezierCurve:v0,QuadraticBezierCurve3:y0,Quaternion:ea,QuaternionKeyframeTrack:Mf,QuaternionLinearInterpolant:ew,RED_GREEN_RGTC2_Format:$p,RED_RGTC1_Format:Jp,REVISION:hg,RGBADepthPacking:i1,RGBAFormat:$i,RGBAIntegerFormat:yg,RGBA_ASTC_10x10_Format:Wp,RGBA_ASTC_10x5_Format:Vp,RGBA_ASTC_10x6_Format:Hp,RGBA_ASTC_10x8_Format:Gp,RGBA_ASTC_12x10_Format:Xp,RGBA_ASTC_12x12_Format:Yp,RGBA_ASTC_4x4_Format:Np,RGBA_ASTC_5x4_Format:Dp,RGBA_ASTC_5x5_Format:Op,RGBA_ASTC_6x5_Format:Up,RGBA_ASTC_6x6_Format:Fp,RGBA_ASTC_8x5_Format:Bp,RGBA_ASTC_8x6_Format:zp,RGBA_ASTC_8x8_Format:jp,RGBA_BPTC_Format:qp,RGBA_ETC2_EAC_Format:Lp,RGBA_PVRTC_2BPPV1_Format:Ip,RGBA_PVRTC_4BPPV1_Format:Cp,RGBA_S3TC_DXT1_Format:Wd,RGBA_S3TC_DXT3_Format:Xd,RGBA_S3TC_DXT5_Format:Yd,RGBDepthPacking:GS,RGBFormat:n0,RGBIntegerFormat:zS,RGB_BPTC_SIGNED_Format:Kp,RGB_BPTC_UNSIGNED_Format:Zp,RGB_ETC1_Format:Rp,RGB_ETC2_Format:Pp,RGB_PVRTC_2BPPV1_Format:Ap,RGB_PVRTC_4BPPV1_Format:Ep,RGB_S3TC_DXT1_Format:Gd,RGDepthPacking:WS,RGFormat:gg,RGIntegerFormat:vg,RawShaderMaterial:V1,Ray:Ch,Raycaster:gw,RectAreaLight:ow,RedFormat:pg,RedIntegerFormat:gf,ReinhardToneMapping:Yb,RenderTarget:s0,RenderTarget3D:z2,RepeatWrapping:$d,ReplaceStencilOp:YS,ReverseSubtractEquation:Ab,RingGeometry:Og,SIGNED_RED_GREEN_RGTC2_Format:eg,SIGNED_RED_RGTC1_Format:Qp,SRGBColorSpace:Na,SRGBTransfer:kn,Scene:h0,ShaderChunk:nn,ShaderLib:Xr,ShaderMaterial:vr,ShadowMaterial:j1,Shape:Mh,ShapeGeometry:Ug,ShapePath:dk,ShapeUtils:Yr,ShortType:Qy,Skeleton:kg,SkeletonHelper:$2,SkinnedMesh:M1,Source:nl,Sphere:ji,SphereGeometry:wf,Spherical:Vy,SphericalHarmonics3:lw,SplineCurve:x0,SpotLight:iw,SpotLightHelper:Q2,Sprite:w1,SpriteMaterial:u0,SrcAlphaFactor:yp,SrcAlphaSaturateFactor:Bb,SrcColorFactor:Lb,StaticCopyUsage:cM,StaticDrawUsage:rf,StaticReadUsage:lM,StereoCamera:w2,StreamCopyUsage:fM,StreamDrawUsage:oM,StreamReadUsage:uM,StringKeyframeTrack:Ph,SubtractEquation:Eb,SubtractiveBlending:Ry,TOUCH:ph,TangentSpaceNormalMap:hl,TetrahedronGeometry:Fg,Texture:Qn,TextureLoader:m2,TextureUtils:yk,Timer:W2,TimestampQuery:pM,TorusGeometry:Bg,TorusKnotGeometry:zg,Triangle:Da,TriangleFanDrawMode:HS,TriangleStripDrawMode:VS,TrianglesDrawMode:jS,TubeGeometry:jg,UVMapping:cg,Uint16BufferAttribute:o0,Uint32BufferAttribute:l0,Uint8BufferAttribute:t3,Uint8ClampedBufferAttribute:n3,Uniform:P0,UniformsGroup:V2,UniformsLib:dt,UniformsUtils:y1,UnsignedByteType:gr,UnsignedInt101111Type:e0,UnsignedInt248Type:mc,UnsignedInt5999Type:$y,UnsignedIntType:co,UnsignedShort4444Type:fg,UnsignedShort5551Type:mg,UnsignedShortType:fc,VSMShadowMap:Wr,Vector2:Ce,Vector3:Y,Vector4:vn,VectorKeyframeTrack:df,VideoFrameTexture:k3,VideoTexture:C1,WebGL3DRenderTarget:VM,WebGLArrayRenderTarget:jM,WebGLCoordinateSystem:$a,WebGLCubeRenderTarget:_1,WebGLRenderTarget:Kr,WebGLRenderer:Mw,WebGLUtils:Sw,WebGPUCoordinateSystem:vc,WebXRController:pp,WireframeGeometry:z1,WrapAroundEnding:nf,ZeroCurvatureEnding:yh,ZeroFactor:Rb,ZeroSlopeEnding:xh,ZeroStencilOp:XS,createCanvasElement:f1,error:Wt,getConsoleFunction:_M,log:of,setConsoleFunction:xM,warn:ft,warnOnce:yc},Symbol.toStringTag,{value:"Module"}));var my={exports:{}},el={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function aI(){return J_||(J_=1,el.ConcurrentRoot=1,el.ContinuousEventPriority=4,el.DefaultEventPriority=16,el.DiscreteEventPriority=1,el.IdleEventPriority=536870912,el.LegacyRoot=0),el}var Q_;function rI(){return Q_||(Q_=1,my.exports=aI()),my.exports}var cc=rI();function sI(r){let e;const t=new Set,n=(m,p)=>{const g=typeof m=="function"?m(e):m;if(g!==e){const x=e;e=p?g:Object.assign({},e,g),t.forEach(_=>_(e,x))}},i=()=>e,s=(m,p=i,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let x=p(e);function _(){const S=p(e);if(!g(x,S)){const T=x;m(x=S,T)}}return t.add(_),()=>t.delete(_)},f={setState:n,getState:i,subscribe:(m,p,g)=>p||g?s(m,p,g):(t.add(m),()=>t.delete(m)),destroy:()=>t.clear()};return e=r(n,i,f),f}const oI=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),$_=oI?Ae.useEffect:Ae.useLayoutEffect;function lI(r){const e=typeof r=="function"?sI(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=Ae.useReducer(M=>M+1,0),l=e.getState(),c=Ae.useRef(l),f=Ae.useRef(n),m=Ae.useRef(i),p=Ae.useRef(!1),g=Ae.useRef();g.current===void 0&&(g.current=n(l));let x,_=!1;(c.current!==l||f.current!==n||m.current!==i||p.current)&&(x=n(l),_=!i(g.current,x)),$_(()=>{_&&(g.current=x),c.current=l,f.current=n,m.current=i,p.current=!1});const S=Ae.useRef(l);$_(()=>{const M=()=>{try{const C=e.getState(),I=f.current(C);m.current(g.current,I)||(c.current=C,g.current=I,s())}catch{p.current=!0,s()}},w=e.subscribe(M);return e.getState()!==S.current&&M(),w},[]);const T=_?x:g.current;return Ae.useDebugValue(T),T};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}var py={exports:{}},gy={exports:{}},vy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function hI(){return eb||(eb=1,(function(r){function e(B,Q){var K=B.length;B.push(Q);e:for(;0<K;){var H=K-1>>>1,ae=B[H];if(0<i(ae,Q))B[H]=Q,B[K]=ae,K=H;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var Q=B[0],K=B.pop();if(K!==Q){B[0]=K;e:for(var H=0,ae=B.length,Re=ae>>>1;H<Re;){var Ye=2*(H+1)-1,rt=B[Ye],ce=Ye+1,we=B[ce];if(0>i(rt,K))ce<ae&&0>i(we,rt)?(B[H]=we,B[ce]=K,H=ce):(B[H]=rt,B[Ye]=K,H=Ye);else if(ce<ae&&0>i(we,K))B[H]=we,B[ce]=K,H=ce;else break e}}return Q}function i(B,Q){var K=B.sortIndex-Q.sortIndex;return K!==0?K:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var f=[],m=[],p=1,g=null,x=3,_=!1,S=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var Q=t(m);Q!==null;){if(Q.callback===null)n(m);else if(Q.startTime<=B)n(m),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(m)}}function L(B){if(T=!1,I(B),!S)if(t(f)!==null)S=!0,ve(F);else{var Q=t(m);Q!==null&&Se(L,Q.startTime-B)}}function F(B,Q){S=!1,T&&(T=!1,w(G),G=-1),_=!0;var K=x;try{for(I(Q),g=t(f);g!==null&&(!(g.expirationTime>Q)||B&&!V());){var H=g.callback;if(typeof H=="function"){g.callback=null,x=g.priorityLevel;var ae=H(g.expirationTime<=Q);Q=r.unstable_now(),typeof ae=="function"?g.callback=ae:g===t(f)&&n(f),I(Q)}else n(f);g=t(f)}if(g!==null)var Re=!0;else{var Ye=t(m);Ye!==null&&Se(L,Ye.startTime-Q),Re=!1}return Re}finally{g=null,x=K,_=!1}}var N=!1,z=null,G=-1,D=5,P=-1;function V(){return!(r.unstable_now()-P<D)}function ee(){if(z!==null){var B=r.unstable_now();P=B;var Q=!0;try{Q=z(!0,B)}finally{Q?ie():(N=!1,z=null)}}else N=!1}var ie;if(typeof C=="function")ie=function(){C(ee)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,me=pe.port2;pe.port1.onmessage=ee,ie=function(){me.postMessage(null)}}else ie=function(){M(ee,0)};function ve(B){z=B,N||(N=!0,ie())}function Se(B,Q){G=M(function(){B(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_continueExecution=function(){S||_||(S=!0,ve(F))},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(B){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var K=x;x=Q;try{return B()}finally{x=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=x;x=B;try{return Q()}finally{x=K}},r.unstable_scheduleCallback=function(B,Q,K){var H=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?H+K:H):K=H,B){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=K+ae,B={id:p++,callback:Q,priorityLevel:B,startTime:K,expirationTime:ae,sortIndex:-1},K>H?(B.sortIndex=K,e(m,B),t(f)===null&&B===t(m)&&(T?(w(G),G=-1):T=!0,Se(L,K-H))):(B.sortIndex=ae,e(f,B),S||_||(S=!0,ve(F))),B},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(B){var Q=x;return function(){var K=x;x=Q;try{return B.apply(this,arguments)}finally{x=K}}}})(vy)),vy}var tb;function uI(){return tb||(tb=1,gy.exports=hI()),gy.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy,nb;function cI(){return nb||(nb=1,yy=function(e){var t={},n=lg(),i=uI(),s=Object.assign;function l(h){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+h,v=1;v<arguments.length;v++)u+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+h+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f=Symbol.for("react.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),F=Symbol.iterator;function N(h){return h===null||typeof h!="object"?null:(h=F&&h[F]||h["@@iterator"],typeof h=="function"?h:null)}function z(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case p:return"Fragment";case m:return"Portal";case x:return"Profiler";case g:return"StrictMode";case M:return"Suspense";case w:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case S:return(h.displayName||"Context")+".Consumer";case _:return(h._context.displayName||"Context")+".Provider";case T:var u=h.render;return h=h.displayName,h||(h=u.displayName||u.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case C:return u=h.displayName||null,u!==null?u:z(h.type)||"Memo";case I:u=h._payload,h=h._init;try{return z(h(u))}catch{}}return null}function G(h){var u=h.type;switch(h.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=u.render,h=h.displayName||h.name||"",u.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(u);case 8:return u===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function D(h){var u=h,v=h;if(h.alternate)for(;u.return;)u=u.return;else{h=u;do u=h,(u.flags&4098)!==0&&(v=u.return),h=u.return;while(h)}return u.tag===3?v:null}function P(h){if(D(h)!==h)throw Error(l(188))}function V(h){var u=h.alternate;if(!u){if(u=D(h),u===null)throw Error(l(188));return u!==h?null:h}for(var v=h,b=u;;){var E=v.return;if(E===null)break;var R=E.alternate;if(R===null){if(b=E.return,b!==null){v=b;continue}break}if(E.child===R.child){for(R=E.child;R;){if(R===v)return P(E),h;if(R===b)return P(E),u;R=R.sibling}throw Error(l(188))}if(v.return!==b.return)v=E,b=R;else{for(var q=!1,se=E.child;se;){if(se===v){q=!0,v=E,b=R;break}if(se===b){q=!0,b=E,v=R;break}se=se.sibling}if(!q){for(se=R.child;se;){if(se===v){q=!0,v=R,b=E;break}if(se===b){q=!0,b=R,v=E;break}se=se.sibling}if(!q)throw Error(l(189))}}if(v.alternate!==b)throw Error(l(190))}if(v.tag!==3)throw Error(l(188));return v.stateNode.current===v?h:u}function ee(h){return h=V(h),h!==null?ie(h):null}function ie(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var u=ie(h);if(u!==null)return u;h=h.sibling}return null}function pe(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var u=pe(h);if(u!==null)return u}h=h.sibling}return null}var me=Array.isArray,ve=e.getPublicInstance,Se=e.getRootHostContext,B=e.getChildHostContext,Q=e.prepareForCommit,K=e.resetAfterCommit,H=e.createInstance,ae=e.appendInitialChild,Re=e.finalizeInitialChildren,Ye=e.prepareUpdate,rt=e.shouldSetTextContent,ce=e.createTextInstance,we=e.scheduleTimeout,Be=e.cancelTimeout,it=e.noTimeout,st=e.isPrimaryRenderer,Lt=e.supportsMutation,on=e.supportsPersistence,yt=e.supportsHydration,Le=e.getInstanceFromNode,X=e.preparePortalMount,Ne=e.getCurrentEventPriority,ze=e.detachDeletedInstance,Ke=e.supportsMicrotasks,Ue=e.scheduleMicrotask,ot=e.supportsTestSelectors,$e=e.findFiberRoot,ut=e.getBoundingRect,W=e.getTextContent,O=e.isHiddenSubtree,ue=e.matchAccessibilityRole,Te=e.setFocusIfFocusable,Pe=e.setupIntersectionObserver,Me=e.appendChild,Mt=e.appendChildToContainer,et=e.commitTextUpdate,kt=e.commitMount,wt=e.commitUpdate,De=e.insertBefore,Je=e.insertInContainerBefore,Dt=e.removeChild,$=e.removeChildFromContainer,ye=e.resetTextContent,je=e.hideInstance,J=e.hideTextInstance,Ve=e.unhideInstance,He=e.unhideTextInstance,Ge=e.clearContainer,We=e.cloneInstance,Ie=e.createContainerChildSet,lt=e.appendChildToContainerChildSet,Pt=e.finalizeContainerChildren,hn=e.replaceContainerChildren,en=e.cloneHiddenInstance,Xn=e.cloneHiddenTextInstance,Un=e.canHydrateInstance,fl=e.canHydrateTextInstance,Jr=e.canHydrateSuspenseInstance,ml=e.isSuspenseInstancePending,Ii=e.isSuspenseInstanceFallback,Qr=e.registerSuspenseInstanceRetry,Fa=e.getNextHydratableSibling,mo=e.getFirstHydratableChild,po=e.getFirstHydratableChildWithinContainer,Lh=e.getFirstHydratableChildWithinSuspenseInstance,go=e.hydrateInstance,nr=e.hydrateTextInstance,pl=e.hydrateSuspenseInstance,Nh=e.getNextHydratableInstanceAfterSuspenseInstance,Dh=e.commitHydratedContainer,Oh=e.commitHydratedSuspenseInstance,Uh=e.clearSuspenseBoundary,Fh=e.clearSuspenseBoundaryFromContainer,Bh=e.shouldDeleteUnhydratedTailInstances,j=e.didNotMatchHydratedContainerTextInstance,le=e.didNotMatchHydratedTextInstance,de;function _e(h){if(de===void 0)try{throw Error()}catch(v){var u=v.stack.trim().match(/\n( *(at )?)/);de=u&&u[1]||""}return`
`+de+h}var he=!1;function Ze(h,u){if(!h||he)return"";he=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(qe){var b=qe}Reflect.construct(h,[],u)}else{try{u.call()}catch(qe){b=qe}h.call(u.prototype)}else{try{throw Error()}catch(qe){b=qe}h()}}catch(qe){if(qe&&b&&typeof qe.stack=="string"){for(var E=qe.stack.split(`
`),R=b.stack.split(`
`),q=E.length-1,se=R.length-1;1<=q&&0<=se&&E[q]!==R[se];)se--;for(;1<=q&&0<=se;q--,se--)if(E[q]!==R[se]){if(q!==1||se!==1)do if(q--,se--,0>se||E[q]!==R[se]){var Ee=`
`+E[q].replace(" at new "," at ");return h.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",h.displayName)),Ee}while(1<=q&&0<=se);break}}}finally{he=!1,Error.prepareStackTrace=v}return(h=h?h.displayName||h.name:"")?_e(h):""}var ht=Object.prototype.hasOwnProperty,bt=[],mt=-1;function At(h){return{current:h}}function tt(h){0>mt||(h.current=bt[mt],bt[mt]=null,mt--)}function at(h,u){mt++,bt[mt]=h.current,h.current=u}var Nt={},Ht=At(Nt),rn=At(!1),xn=Nt;function sn(h,u){var v=h.type.contextTypes;if(!v)return Nt;var b=h.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===u)return b.__reactInternalMemoizedMaskedChildContext;var E={},R;for(R in v)E[R]=u[R];return b&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=u,h.__reactInternalMemoizedMaskedChildContext=E),E}function gt(h){return h=h.childContextTypes,h!=null}function dn(){tt(rn),tt(Ht)}function an(h,u,v){if(Ht.current!==Nt)throw Error(l(168));at(Ht,u),at(rn,v)}function Si(h,u,v){var b=h.stateNode;if(u=u.childContextTypes,typeof b.getChildContext!="function")return v;b=b.getChildContext();for(var E in b)if(!(E in u))throw Error(l(108,G(h)||"Unknown",E));return s({},v,b)}function Ba(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Nt,xn=Ht.current,at(Ht,h),at(rn,rn.current),!0}function ai(h,u,v){var b=h.stateNode;if(!b)throw Error(l(169));v?(h=Si(h,u,xn),b.__reactInternalMemoizedMergedChildContext=h,tt(rn),tt(Ht),at(Ht,h)):tt(rn),at(rn,v)}var ri=Math.clz32?Math.clz32:Vi,Sn=Math.log,Yn=Math.LN2;function Vi(h){return h>>>=0,h===0?32:31-(Sn(h)/Yn|0)|0}var Fn=64,zt=4194304;function ir(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function ia(h,u){var v=h.pendingLanes;if(v===0)return 0;var b=0,E=h.suspendedLanes,R=h.pingedLanes,q=v&268435455;if(q!==0){var se=q&~E;se!==0?b=ir(se):(R&=q,R!==0&&(b=ir(R)))}else q=v&~E,q!==0?b=ir(q):R!==0&&(b=ir(R));if(b===0)return 0;if(u!==0&&u!==b&&(u&E)===0&&(E=b&-b,R=u&-u,E>=R||E===16&&(R&4194240)!==0))return u;if((b&4)!==0&&(b|=v&16),u=h.entangledLanes,u!==0)for(h=h.entanglements,u&=b;0<u;)v=31-ri(u),E=1<<v,b|=h[v],u&=~E;return b}function Cc(h,u){switch(h){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tf(h,u){for(var v=h.suspendedLanes,b=h.pingedLanes,E=h.expirationTimes,R=h.pendingLanes;0<R;){var q=31-ri(R),se=1<<q,Ee=E[q];Ee===-1?((se&v)===0||(se&b)!==0)&&(E[q]=Cc(se,u)):Ee<=u&&(h.expiredLanes|=se),R&=~se}}function zh(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function jh(h){for(var u=[],v=0;31>v;v++)u.push(h);return u}function _s(h,u,v){h.pendingLanes|=u,u!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,u=31-ri(u),h[u]=v}function Vh(h,u){var v=h.pendingLanes&~u;h.pendingLanes=u,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=u,h.mutableReadLanes&=u,h.entangledLanes&=u,u=h.entanglements;var b=h.eventTimes;for(h=h.expirationTimes;0<v;){var E=31-ri(v),R=1<<E;u[E]=0,b[E]=-1,h[E]=-1,v&=~R}}function ar(h,u){var v=h.entangledLanes|=u;for(h=h.entanglements;v;){var b=31-ri(v),E=1<<b;E&u|h[b]&u&&(h[b]|=u),v&=~E}}var tn=0;function xr(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var bs=i.unstable_scheduleCallback,vo=i.unstable_cancelCallback,$r=i.unstable_shouldYield,Wg=i.unstable_requestPaint,$n=i.unstable_now,ws=i.unstable_ImmediatePriority,Xg=i.unstable_UserBlockingPriority,Hh=i.unstable_NormalPriority,Gh=i.unstable_IdlePriority,gl=null,rr=null;function vl(h){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(gl,h,void 0,(h.current.flags&128)===128)}catch{}}function yl(h,u){return h===u&&(h!==0||1/h===1/u)||h!==h&&u!==u}var Ri=typeof Object.is=="function"?Object.is:yl,_a=null,Wh=!1,Ic=!1;function Xh(h){_a===null?_a=[h]:_a.push(h)}function Yh(h){Wh=!0,Xh(h)}function ba(){if(!Ic&&_a!==null){Ic=!0;var h=0,u=tn;try{var v=_a;for(tn=1;h<v.length;h++){var b=v[h];do b=b(!0);while(b!==null)}_a=null,Wh=!1}catch(E){throw _a!==null&&(_a=_a.slice(h+1)),bs(ws,ba),E}finally{tn=u,Ic=!1}}return null}var Ef=c.ReactCurrentBatchConfig;function za(h,u){if(Ri(h,u))return!0;if(typeof h!="object"||h===null||typeof u!="object"||u===null)return!1;var v=Object.keys(h),b=Object.keys(u);if(v.length!==b.length)return!1;for(b=0;b<v.length;b++){var E=v[b];if(!ht.call(u,E)||!Ri(h[E],u[E]))return!1}return!0}function Rc(h){switch(h.tag){case 5:return _e(h.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return h=Ze(h.type,!1),h;case 11:return h=Ze(h.type.render,!1),h;case 1:return h=Ze(h.type,!0),h;default:return""}}function Hi(h,u){if(h&&h.defaultProps){u=s({},u),h=h.defaultProps;for(var v in h)u[v]===void 0&&(u[v]=h[v]);return u}return u}var xl=At(null),Ss=null,_r=null,qh=null;function Pi(){qh=_r=Ss=null}function Ms(h,u,v){st?(at(xl,u._currentValue),u._currentValue=v):(at(xl,u._currentValue2),u._currentValue2=v)}function _l(h){var u=xl.current;tt(xl),st?h._currentValue=u:h._currentValue2=u}function ks(h,u,v){for(;h!==null;){var b=h.alternate;if((h.childLanes&u)!==u?(h.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),h===v)break;h=h.return}}function yo(h,u){Ss=h,qh=_r=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&u)!==0&&(hi=!0),h.firstContext=null)}function Gi(h){var u=st?h._currentValue:h._currentValue2;if(qh!==h)if(h={context:h,memoizedValue:u,next:null},_r===null){if(Ss===null)throw Error(l(308));_r=h,Ss.dependencies={lanes:0,firstContext:h}}else _r=_r.next=h;return u}var wa=null,Sa=!1;function xo(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pc(h,u){h=h.updateQueue,u.updateQueue===h&&(u.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function br(h,u){return{eventTime:h,lane:u,tag:0,payload:null,callback:null,next:null}}function es(h,u){var v=h.updateQueue;v!==null&&(v=v.shared,Hn!==null&&(h.mode&1)!==0&&(Kt&2)===0?(h=v.interleaved,h===null?(u.next=u,wa===null?wa=[v]:wa.push(v)):(u.next=h.next,h.next=u),v.interleaved=u):(h=v.pending,h===null?u.next=u:(u.next=h.next,h.next=u),v.pending=u))}function Kh(h,u,v){if(u=u.updateQueue,u!==null&&(u=u.shared,(v&4194240)!==0)){var b=u.lanes;b&=h.pendingLanes,v|=b,u.lanes=v,ar(h,v)}}function Zh(h,u){var v=h.updateQueue,b=h.alternate;if(b!==null&&(b=b.updateQueue,v===b)){var E=null,R=null;if(v=v.firstBaseUpdate,v!==null){do{var q={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};R===null?E=R=q:R=R.next=q,v=v.next}while(v!==null);R===null?E=R=u:R=R.next=u}else E=R=u;v={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:R,shared:b.shared,effects:b.effects},h.updateQueue=v;return}h=v.lastBaseUpdate,h===null?v.firstBaseUpdate=u:h.next=u,v.lastBaseUpdate=u}function Jh(h,u,v,b){var E=h.updateQueue;Sa=!1;var R=E.firstBaseUpdate,q=E.lastBaseUpdate,se=E.shared.pending;if(se!==null){E.shared.pending=null;var Ee=se,qe=Ee.next;Ee.next=null,q===null?R=qe:q.next=qe,q=Ee;var _t=h.alternate;_t!==null&&(_t=_t.updateQueue,se=_t.lastBaseUpdate,se!==q&&(se===null?_t.firstBaseUpdate=qe:se.next=qe,_t.lastBaseUpdate=Ee))}if(R!==null){var Xt=E.baseState;q=0,_t=qe=Ee=null,se=R;do{var Ot=se.lane,Qt=se.eventTime;if((b&Ot)===Ot){_t!==null&&(_t=_t.next={eventTime:Qt,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var pt=h,yi=se;switch(Ot=u,Qt=v,yi.tag){case 1:if(pt=yi.payload,typeof pt=="function"){Xt=pt.call(Qt,Xt,Ot);break e}Xt=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=yi.payload,Ot=typeof pt=="function"?pt.call(Qt,Xt,Ot):pt,Ot==null)break e;Xt=s({},Xt,Ot);break e;case 2:Sa=!0}}se.callback!==null&&se.lane!==0&&(h.flags|=64,Ot=E.effects,Ot===null?E.effects=[se]:Ot.push(se))}else Qt={eventTime:Qt,lane:Ot,tag:se.tag,payload:se.payload,callback:se.callback,next:null},_t===null?(qe=_t=Qt,Ee=Xt):_t=_t.next=Qt,q|=Ot;if(se=se.next,se===null){if(se=E.shared.pending,se===null)break;Ot=se,se=Ot.next,Ot.next=null,E.lastBaseUpdate=Ot,E.shared.pending=null}}while(!0);if(_t===null&&(Ee=Xt),E.baseState=Ee,E.firstBaseUpdate=qe,E.lastBaseUpdate=_t,u=E.shared.interleaved,u!==null){E=u;do q|=E.lane,E=E.next;while(E!==u)}else R===null&&(E.shared.lanes=0);hr|=q,h.lanes=q,h.memoizedState=Xt}}function Af(h,u,v){if(h=u.effects,u.effects=null,h!==null)for(u=0;u<h.length;u++){var b=h[u],E=b.callback;if(E!==null){if(b.callback=null,b=v,typeof E!="function")throw Error(l(191,E));E.call(b)}}}var Cf=new n.Component().refs;function Lc(h,u,v,b){u=h.memoizedState,v=v(b,u),v=v==null?u:s({},u,v),h.memoizedState=v,h.lanes===0&&(h.updateQueue.baseState=v)}var Qh={isMounted:function(h){return(h=h._reactInternals)?D(h)===h:!1},enqueueSetState:function(h,u,v){h=h._reactInternals;var b=fn(),E=Ya(h),R=br(b,E);R.payload=u,v!=null&&(R.callback=v),es(h,R),u=Ti(h,E,b),u!==null&&Kh(u,h,E)},enqueueReplaceState:function(h,u,v){h=h._reactInternals;var b=fn(),E=Ya(h),R=br(b,E);R.tag=1,R.payload=u,v!=null&&(R.callback=v),es(h,R),u=Ti(h,E,b),u!==null&&Kh(u,h,E)},enqueueForceUpdate:function(h,u){h=h._reactInternals;var v=fn(),b=Ya(h),E=br(v,b);E.tag=2,u!=null&&(E.callback=u),es(h,E),u=Ti(h,b,v),u!==null&&Kh(u,h,b)}};function Nc(h,u,v,b,E,R,q){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(b,R,q):u.prototype&&u.prototype.isPureReactComponent?!za(v,b)||!za(E,R):!0}function If(h,u,v){var b=!1,E=Nt,R=u.contextType;return typeof R=="object"&&R!==null?R=Gi(R):(E=gt(u)?xn:Ht.current,b=u.contextTypes,R=(b=b!=null)?sn(h,E):Nt),u=new u(v,R),h.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Qh,h.stateNode=u,u._reactInternals=h,b&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=E,h.__reactInternalMemoizedMaskedChildContext=R),u}function Rf(h,u,v,b){h=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(v,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(v,b),u.state!==h&&Qh.enqueueReplaceState(u,u.state,null)}function Dc(h,u,v,b){var E=h.stateNode;E.props=v,E.state=h.memoizedState,E.refs=Cf,xo(h);var R=u.contextType;typeof R=="object"&&R!==null?E.context=Gi(R):(R=gt(u)?xn:Ht.current,E.context=sn(h,R)),E.state=h.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(Lc(h,u,R,v),E.state=h.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(u=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),u!==E.state&&Qh.enqueueReplaceState(E,E.state,null),Jh(h,v,E,b),E.state=h.memoizedState),typeof E.componentDidMount=="function"&&(h.flags|=4194308)}var _o=[],ts=0,$h=null,eu=0,Ma=[],aa=0,Ts=null,wr=1,Sr="";function Es(h,u){_o[ts++]=eu,_o[ts++]=$h,$h=h,eu=u}function Pf(h,u,v){Ma[aa++]=wr,Ma[aa++]=Sr,Ma[aa++]=Ts,Ts=h;var b=wr;h=Sr;var E=32-ri(b)-1;b&=~(1<<E),v+=1;var R=32-ri(u)+E;if(30<R){var q=E-E%5;R=(b&(1<<q)-1).toString(32),b>>=q,E-=q,wr=1<<32-ri(u)+E|v<<E|b,Sr=R+h}else wr=1<<R|v<<E|b,Sr=h}function Oc(h){h.return!==null&&(Es(h,1),Pf(h,1,0))}function Uc(h){for(;h===$h;)$h=_o[--ts],_o[ts]=null,eu=_o[--ts],_o[ts]=null;for(;h===Ts;)Ts=Ma[--aa],Ma[aa]=null,Sr=Ma[--aa],Ma[aa]=null,wr=Ma[--aa],Ma[aa]=null}var Li=null,fi=null,Pn=!1,bo=!1,ka=null;function Fc(h,u){var v=ca(5,null,null,0);v.elementType="DELETED",v.stateNode=u,v.return=h,u=h.deletions,u===null?(h.deletions=[v],h.flags|=16):u.push(v)}function Bc(h,u){switch(h.tag){case 5:return u=Un(u,h.type,h.pendingProps),u!==null?(h.stateNode=u,Li=h,fi=mo(u),!0):!1;case 6:return u=fl(u,h.pendingProps),u!==null?(h.stateNode=u,Li=h,fi=null,!0):!1;case 13:if(u=Jr(u),u!==null){var v=Ts!==null?{id:wr,overflow:Sr}:null;return h.memoizedState={dehydrated:u,treeContext:v,retryLane:1073741824},v=ca(18,null,null,0),v.stateNode=u,v.return=h,h.child=v,Li=h,fi=null,!0}return!1;default:return!1}}function tu(h){return(h.mode&1)!==0&&(h.flags&128)===0}function ns(h){if(Pn){var u=fi;if(u){var v=u;if(!Bc(h,u)){if(tu(h))throw Error(l(418));u=Fa(v);var b=Li;u&&Bc(h,u)?Fc(b,v):(h.flags=h.flags&-4097|2,Pn=!1,Li=h)}}else{if(tu(h))throw Error(l(418));h.flags=h.flags&-4097|2,Pn=!1,Li=h}}}function Lf(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Li=h}function bl(h){if(!yt||h!==Li)return!1;if(!Pn)return Lf(h),Pn=!0,!1;if(h.tag!==3&&(h.tag!==5||Bh(h.type)&&!rt(h.type,h.memoizedProps))){var u=fi;if(u){if(tu(h)){for(h=fi;h;)h=Fa(h);throw Error(l(418))}for(;u;)Fc(h,u),u=Fa(u)}}if(Lf(h),h.tag===13){if(!yt)throw Error(l(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));fi=Nh(h)}else fi=Li?Fa(h.stateNode):null;return!0}function wo(){yt&&(fi=Li=null,bo=Pn=!1)}function nu(h){ka===null?ka=[h]:ka.push(h)}function So(h,u,v){if(h=v.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(l(309));var b=v.stateNode}if(!b)throw Error(l(147,h));var E=b,R=""+h;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===R?u.ref:(u=function(q){var se=E.refs;se===Cf&&(se=E.refs={}),q===null?delete se[R]:se[R]=q},u._stringRef=R,u)}if(typeof h!="string")throw Error(l(284));if(!v._owner)throw Error(l(290,h))}return h}function is(h,u){throw h=Object.prototype.toString.call(u),Error(l(31,h==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":h))}function Mo(h){var u=h._init;return u(h._payload)}function Nf(h){function u(xe,oe){if(h){var ke=xe.deletions;ke===null?(xe.deletions=[oe],xe.flags|=16):ke.push(oe)}}function v(xe,oe){if(!h)return null;for(;oe!==null;)u(xe,oe),oe=oe.sibling;return null}function b(xe,oe){for(xe=new Map;oe!==null;)oe.key!==null?xe.set(oe.key,oe):xe.set(oe.index,oe),oe=oe.sibling;return xe}function E(xe,oe){return xe=Ur(xe,oe),xe.index=0,xe.sibling=null,xe}function R(xe,oe,ke){return xe.index=ke,h?(ke=xe.alternate,ke!==null?(ke=ke.index,ke<oe?(xe.flags|=2,oe):ke):(xe.flags|=2,oe)):(xe.flags|=1048576,oe)}function q(xe){return h&&xe.alternate===null&&(xe.flags|=2),xe}function se(xe,oe,ke,ct){return oe===null||oe.tag!==6?(oe=Cu(ke,xe.mode,ct),oe.return=xe,oe):(oe=E(oe,ke),oe.return=xe,oe)}function Ee(xe,oe,ke,ct){var It=ke.type;return It===p?_t(xe,oe,ke.props.children,ct,ke.key):oe!==null&&(oe.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===I&&Mo(It)===oe.type)?(ct=E(oe,ke.props),ct.ref=So(xe,oe,ke),ct.return=xe,ct):(ct=Au(ke.type,ke.key,ke.props,null,xe.mode,ct),ct.ref=So(xe,oe,ke),ct.return=xe,ct)}function qe(xe,oe,ke,ct){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ke.containerInfo||oe.stateNode.implementation!==ke.implementation?(oe=Iu(ke,xe.mode,ct),oe.return=xe,oe):(oe=E(oe,ke.children||[]),oe.return=xe,oe)}function _t(xe,oe,ke,ct,It){return oe===null||oe.tag!==7?(oe=Ks(ke,xe.mode,ct,It),oe.return=xe,oe):(oe=E(oe,ke),oe.return=xe,oe)}function Xt(xe,oe,ke){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Cu(""+oe,xe.mode,ke),oe.return=xe,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case f:return ke=Au(oe.type,oe.key,oe.props,null,xe.mode,ke),ke.ref=So(xe,null,oe),ke.return=xe,ke;case m:return oe=Iu(oe,xe.mode,ke),oe.return=xe,oe;case I:var ct=oe._init;return Xt(xe,ct(oe._payload),ke)}if(me(oe)||N(oe))return oe=Ks(oe,xe.mode,ke,null),oe.return=xe,oe;is(xe,oe)}return null}function Ot(xe,oe,ke,ct){var It=oe!==null?oe.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return It!==null?null:se(xe,oe,""+ke,ct);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case f:return ke.key===It?Ee(xe,oe,ke,ct):null;case m:return ke.key===It?qe(xe,oe,ke,ct):null;case I:return It=ke._init,Ot(xe,oe,It(ke._payload),ct)}if(me(ke)||N(ke))return It!==null?null:_t(xe,oe,ke,ct,null);is(xe,ke)}return null}function Qt(xe,oe,ke,ct,It){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return xe=xe.get(ke)||null,se(oe,xe,""+ct,It);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case f:return xe=xe.get(ct.key===null?ke:ct.key)||null,Ee(oe,xe,ct,It);case m:return xe=xe.get(ct.key===null?ke:ct.key)||null,qe(oe,xe,ct,It);case I:var qt=ct._init;return Qt(xe,oe,ke,qt(ct._payload),It)}if(me(ct)||N(ct))return xe=xe.get(ke)||null,_t(oe,xe,ct,It,null);is(oe,ct)}return null}function pt(xe,oe,ke,ct){for(var It=null,qt=null,Yt=oe,cn=oe=0,Kn=null;Yt!==null&&cn<ke.length;cn++){Yt.index>cn?(Kn=Yt,Yt=null):Kn=Yt.sibling;var un=Ot(xe,Yt,ke[cn],ct);if(un===null){Yt===null&&(Yt=Kn);break}h&&Yt&&un.alternate===null&&u(xe,Yt),oe=R(un,oe,cn),qt===null?It=un:qt.sibling=un,qt=un,Yt=Kn}if(cn===ke.length)return v(xe,Yt),Pn&&Es(xe,cn),It;if(Yt===null){for(;cn<ke.length;cn++)Yt=Xt(xe,ke[cn],ct),Yt!==null&&(oe=R(Yt,oe,cn),qt===null?It=Yt:qt.sibling=Yt,qt=Yt);return Pn&&Es(xe,cn),It}for(Yt=b(xe,Yt);cn<ke.length;cn++)Kn=Qt(Yt,xe,cn,ke[cn],ct),Kn!==null&&(h&&Kn.alternate!==null&&Yt.delete(Kn.key===null?cn:Kn.key),oe=R(Kn,oe,cn),qt===null?It=Kn:qt.sibling=Kn,qt=Kn);return h&&Yt.forEach(function(Fr){return u(xe,Fr)}),Pn&&Es(xe,cn),It}function yi(xe,oe,ke,ct){var It=N(ke);if(typeof It!="function")throw Error(l(150));if(ke=It.call(ke),ke==null)throw Error(l(151));for(var qt=It=null,Yt=oe,cn=oe=0,Kn=null,un=ke.next();Yt!==null&&!un.done;cn++,un=ke.next()){Yt.index>cn?(Kn=Yt,Yt=null):Kn=Yt.sibling;var Fr=Ot(xe,Yt,un.value,ct);if(Fr===null){Yt===null&&(Yt=Kn);break}h&&Yt&&Fr.alternate===null&&u(xe,Yt),oe=R(Fr,oe,cn),qt===null?It=Fr:qt.sibling=Fr,qt=Fr,Yt=Kn}if(un.done)return v(xe,Yt),Pn&&Es(xe,cn),It;if(Yt===null){for(;!un.done;cn++,un=ke.next())un=Xt(xe,un.value,ct),un!==null&&(oe=R(un,oe,cn),qt===null?It=un:qt.sibling=un,qt=un);return Pn&&Es(xe,cn),It}for(Yt=b(xe,Yt);!un.done;cn++,un=ke.next())un=Qt(Yt,xe,cn,un.value,ct),un!==null&&(h&&un.alternate!==null&&Yt.delete(un.key===null?cn:un.key),oe=R(un,oe,cn),qt===null?It=un:qt.sibling=un,qt=un);return h&&Yt.forEach(function(gd){return u(xe,gd)}),Pn&&Es(xe,cn),It}function da(xe,oe,ke,ct){if(typeof ke=="object"&&ke!==null&&ke.type===p&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case f:e:{for(var It=ke.key,qt=oe;qt!==null;){if(qt.key===It){if(It=ke.type,It===p){if(qt.tag===7){v(xe,qt.sibling),oe=E(qt,ke.props.children),oe.return=xe,xe=oe;break e}}else if(qt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===I&&Mo(It)===qt.type){v(xe,qt.sibling),oe=E(qt,ke.props),oe.ref=So(xe,qt,ke),oe.return=xe,xe=oe;break e}v(xe,qt);break}else u(xe,qt);qt=qt.sibling}ke.type===p?(oe=Ks(ke.props.children,xe.mode,ct,ke.key),oe.return=xe,xe=oe):(ct=Au(ke.type,ke.key,ke.props,null,xe.mode,ct),ct.ref=So(xe,oe,ke),ct.return=xe,xe=ct)}return q(xe);case m:e:{for(qt=ke.key;oe!==null;){if(oe.key===qt)if(oe.tag===4&&oe.stateNode.containerInfo===ke.containerInfo&&oe.stateNode.implementation===ke.implementation){v(xe,oe.sibling),oe=E(oe,ke.children||[]),oe.return=xe,xe=oe;break e}else{v(xe,oe);break}else u(xe,oe);oe=oe.sibling}oe=Iu(ke,xe.mode,ct),oe.return=xe,xe=oe}return q(xe);case I:return qt=ke._init,da(xe,oe,qt(ke._payload),ct)}if(me(ke))return pt(xe,oe,ke,ct);if(N(ke))return yi(xe,oe,ke,ct);is(xe,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"?(ke=""+ke,oe!==null&&oe.tag===6?(v(xe,oe.sibling),oe=E(oe,ke),oe.return=xe,xe=oe):(v(xe,oe),oe=Cu(ke,xe.mode,ct),oe.return=xe,xe=oe),q(xe)):v(xe,oe)}return da}var Mr=Nf(!0),Df=Nf(!1),ko={},Wi=At(ko),As=At(ko),Cs=At(ko);function ja(h){if(h===ko)throw Error(l(174));return h}function iu(h,u){at(Cs,u),at(As,h),at(Wi,ko),h=Se(u),tt(Wi),at(Wi,h)}function To(){tt(Wi),tt(As),tt(Cs)}function Of(h){var u=ja(Cs.current),v=ja(Wi.current);u=B(v,h.type,u),v!==u&&(at(As,h),at(Wi,u))}function zc(h){As.current===h&&(tt(Wi),tt(As))}var Nn=At(0);function au(h){for(var u=h;u!==null;){if(u.tag===13){var v=u.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||ml(v)||Ii(v)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break;for(;u.sibling===null;){if(u.return===null||u.return===h)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ra=[];function Is(){for(var h=0;h<ra.length;h++){var u=ra[h];st?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}ra.length=0}var wl=c.ReactCurrentDispatcher,sa=c.ReactCurrentBatchConfig,Rs=0,Dn=null,si=null,oi=null,ru=!1,sr=!1,Ps=0,Sl=0;function li(){throw Error(l(321))}function su(h,u){if(u===null)return!1;for(var v=0;v<u.length&&v<h.length;v++)if(!Ri(h[v],u[v]))return!1;return!0}function Eo(h,u,v,b,E,R){if(Rs=R,Dn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,wl.current=h===null||h.memoizedState===null?Xc:Yc,h=v(b,E),sr){R=0;do{if(sr=!1,Ps=0,25<=R)throw Error(l(301));R+=1,oi=si=null,u.updateQueue=null,wl.current=qc,h=v(b,E)}while(sr)}if(wl.current=Ro,u=si!==null&&si.next!==null,Rs=0,oi=si=Dn=null,ru=!1,u)throw Error(l(300));return h}function as(){var h=Ps!==0;return Ps=0,h}function Va(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?Dn.memoizedState=oi=h:oi=oi.next=h,oi}function Ha(){if(si===null){var h=Dn.alternate;h=h!==null?h.memoizedState:null}else h=si.next;var u=oi===null?Dn.memoizedState:oi.next;if(u!==null)oi=u,si=h;else{if(h===null)throw Error(l(310));si=h,h={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},oi===null?Dn.memoizedState=oi=h:oi=oi.next=h}return oi}function or(h,u){return typeof u=="function"?u(h):u}function Ml(h){var u=Ha(),v=u.queue;if(v===null)throw Error(l(311));v.lastRenderedReducer=h;var b=si,E=b.baseQueue,R=v.pending;if(R!==null){if(E!==null){var q=E.next;E.next=R.next,R.next=q}b.baseQueue=E=R,v.pending=null}if(E!==null){R=E.next,b=b.baseState;var se=q=null,Ee=null,qe=R;do{var _t=qe.lane;if((Rs&_t)===_t)Ee!==null&&(Ee=Ee.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),b=qe.hasEagerState?qe.eagerState:h(b,qe.action);else{var Xt={lane:_t,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};Ee===null?(se=Ee=Xt,q=b):Ee=Ee.next=Xt,Dn.lanes|=_t,hr|=_t}qe=qe.next}while(qe!==null&&qe!==R);Ee===null?q=b:Ee.next=se,Ri(b,u.memoizedState)||(hi=!0),u.memoizedState=b,u.baseState=q,u.baseQueue=Ee,v.lastRenderedState=b}if(h=v.interleaved,h!==null){E=h;do R=E.lane,Dn.lanes|=R,hr|=R,E=E.next;while(E!==h)}else E===null&&(v.lanes=0);return[u.memoizedState,v.dispatch]}function kl(h){var u=Ha(),v=u.queue;if(v===null)throw Error(l(311));v.lastRenderedReducer=h;var b=v.dispatch,E=v.pending,R=u.memoizedState;if(E!==null){v.pending=null;var q=E=E.next;do R=h(R,q.action),q=q.next;while(q!==E);Ri(R,u.memoizedState)||(hi=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),v.lastRenderedState=R}return[R,b]}function jc(){}function Vc(h,u){var v=Dn,b=Ha(),E=u(),R=!Ri(b.memoizedState,E);if(R&&(b.memoizedState=E,hi=!0),b=b.queue,Ao(kr.bind(null,v,b,h),[h]),b.getSnapshot!==u||R||oi!==null&&oi.memoizedState.tag&1){if(v.flags|=2048,El(9,Gc.bind(null,v,b,E,u),void 0,null),Hn===null)throw Error(l(349));(Rs&30)!==0||Hc(v,u,E)}return E}function Hc(h,u,v){h.flags|=16384,h={getSnapshot:u,value:v},u=Dn.updateQueue,u===null?(u={lastEffect:null,stores:null},Dn.updateQueue=u,u.stores=[h]):(v=u.stores,v===null?u.stores=[h]:v.push(h))}function Gc(h,u,v,b){u.value=v,u.getSnapshot=b,ou(u)&&Ti(h,1,-1)}function kr(h,u,v){return v(function(){ou(u)&&Ti(h,1,-1)})}function ou(h){var u=h.getSnapshot;h=h.value;try{var v=u();return!Ri(h,v)}catch{return!0}}function Tl(h){var u=Va();return typeof h=="function"&&(h=h()),u.memoizedState=u.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:h},u.queue=h,h=h.dispatch=Yg.bind(null,Dn,h),[u.memoizedState,h]}function El(h,u,v,b){return h={tag:h,create:u,destroy:v,deps:b,next:null},u=Dn.updateQueue,u===null?(u={lastEffect:null,stores:null},Dn.updateQueue=u,u.lastEffect=h.next=h):(v=u.lastEffect,v===null?u.lastEffect=h.next=h:(b=v.next,v.next=h,h.next=b,u.lastEffect=h)),h}function Uf(){return Ha().memoizedState}function rs(h,u,v,b){var E=Va();Dn.flags|=h,E.memoizedState=El(1|u,v,void 0,b===void 0?null:b)}function lu(h,u,v,b){var E=Ha();b=b===void 0?null:b;var R=void 0;if(si!==null){var q=si.memoizedState;if(R=q.destroy,b!==null&&su(b,q.deps)){E.memoizedState=El(u,v,R,b);return}}Dn.flags|=h,E.memoizedState=El(1|u,v,R,b)}function hu(h,u){return rs(8390656,8,h,u)}function Ao(h,u){return lu(2048,8,h,u)}function Tn(h,u){return lu(4,2,h,u)}function uu(h,u){return lu(4,4,h,u)}function Al(h,u){if(typeof u=="function")return h=h(),u(h),function(){u(null)};if(u!=null)return h=h(),u.current=h,function(){u.current=null}}function Co(h,u,v){return v=v!=null?v.concat([h]):null,lu(4,4,Al.bind(null,u,h),v)}function cu(){}function du(h,u){var v=Ha();u=u===void 0?null:u;var b=v.memoizedState;return b!==null&&u!==null&&su(u,b[1])?b[0]:(v.memoizedState=[h,u],h)}function Io(h,u){var v=Ha();u=u===void 0?null:u;var b=v.memoizedState;return b!==null&&u!==null&&su(u,b[1])?b[0]:(h=h(),v.memoizedState=[h,u],h)}function fu(h,u){var v=tn;tn=v!==0&&4>v?v:4,h(!0);var b=sa.transition;sa.transition={};try{h(!1),u()}finally{tn=v,sa.transition=b}}function Ls(){return Ha().memoizedState}function Ff(h,u,v){var b=Ya(h);v={lane:b,action:v,hasEagerState:!1,eagerState:null,next:null},Bf(h)?Wc(u,v):(Cl(h,u,v),v=fn(),h=Ti(h,b,v),h!==null&&Il(h,u,b))}function Yg(h,u,v){var b=Ya(h),E={lane:b,action:v,hasEagerState:!1,eagerState:null,next:null};if(Bf(h))Wc(u,E);else{Cl(h,u,E);var R=h.alternate;if(h.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var q=u.lastRenderedState,se=R(q,v);if(E.hasEagerState=!0,E.eagerState=se,Ri(se,q))return}catch{}finally{}v=fn(),h=Ti(h,b,v),h!==null&&Il(h,u,b)}}function Bf(h){var u=h.alternate;return h===Dn||u!==null&&u===Dn}function Wc(h,u){sr=ru=!0;var v=h.pending;v===null?u.next=u:(u.next=v.next,v.next=u),h.pending=u}function Cl(h,u,v){Hn!==null&&(h.mode&1)!==0&&(Kt&2)===0?(h=u.interleaved,h===null?(v.next=v,wa===null?wa=[u]:wa.push(u)):(v.next=h.next,h.next=v),u.interleaved=v):(h=u.pending,h===null?v.next=v:(v.next=h.next,h.next=v),u.pending=v)}function Il(h,u,v){if((v&4194240)!==0){var b=u.lanes;b&=h.pendingLanes,v|=b,u.lanes=v,ar(h,v)}}var Ro={readContext:Gi,useCallback:li,useContext:li,useEffect:li,useImperativeHandle:li,useInsertionEffect:li,useLayoutEffect:li,useMemo:li,useReducer:li,useRef:li,useState:li,useDebugValue:li,useDeferredValue:li,useTransition:li,useMutableSource:li,useSyncExternalStore:li,useId:li,unstable_isNewReconciler:!1},Xc={readContext:Gi,useCallback:function(h,u){return Va().memoizedState=[h,u===void 0?null:u],h},useContext:Gi,useEffect:hu,useImperativeHandle:function(h,u,v){return v=v!=null?v.concat([h]):null,rs(4194308,4,Al.bind(null,u,h),v)},useLayoutEffect:function(h,u){return rs(4194308,4,h,u)},useInsertionEffect:function(h,u){return rs(4,2,h,u)},useMemo:function(h,u){var v=Va();return u=u===void 0?null:u,h=h(),v.memoizedState=[h,u],h},useReducer:function(h,u,v){var b=Va();return u=v!==void 0?v(u):u,b.memoizedState=b.baseState=u,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:u},b.queue=h,h=h.dispatch=Ff.bind(null,Dn,h),[b.memoizedState,h]},useRef:function(h){var u=Va();return h={current:h},u.memoizedState=h},useState:Tl,useDebugValue:cu,useDeferredValue:function(h){var u=Tl(h),v=u[0],b=u[1];return hu(function(){var E=sa.transition;sa.transition={};try{b(h)}finally{sa.transition=E}},[h]),v},useTransition:function(){var h=Tl(!1),u=h[0];return h=fu.bind(null,h[1]),Va().memoizedState=h,[u,h]},useMutableSource:function(){},useSyncExternalStore:function(h,u,v){var b=Dn,E=Va();if(Pn){if(v===void 0)throw Error(l(407));v=v()}else{if(v=u(),Hn===null)throw Error(l(349));(Rs&30)!==0||Hc(b,u,v)}E.memoizedState=v;var R={value:v,getSnapshot:u};return E.queue=R,hu(kr.bind(null,b,R,h),[h]),b.flags|=2048,El(9,Gc.bind(null,b,R,v,u),void 0,null),v},useId:function(){var h=Va(),u=Hn.identifierPrefix;if(Pn){var v=Sr,b=wr;v=(b&~(1<<32-ri(b)-1)).toString(32)+v,u=":"+u+"R"+v,v=Ps++,0<v&&(u+="H"+v.toString(32)),u+=":"}else v=Sl++,u=":"+u+"r"+v.toString(32)+":";return h.memoizedState=u},unstable_isNewReconciler:!1},Yc={readContext:Gi,useCallback:du,useContext:Gi,useEffect:Ao,useImperativeHandle:Co,useInsertionEffect:Tn,useLayoutEffect:uu,useMemo:Io,useReducer:Ml,useRef:Uf,useState:function(){return Ml(or)},useDebugValue:cu,useDeferredValue:function(h){var u=Ml(or),v=u[0],b=u[1];return Ao(function(){var E=sa.transition;sa.transition={};try{b(h)}finally{sa.transition=E}},[h]),v},useTransition:function(){var h=Ml(or)[0],u=Ha().memoizedState;return[h,u]},useMutableSource:jc,useSyncExternalStore:Vc,useId:Ls,unstable_isNewReconciler:!1},qc={readContext:Gi,useCallback:du,useContext:Gi,useEffect:Ao,useImperativeHandle:Co,useInsertionEffect:Tn,useLayoutEffect:uu,useMemo:Io,useReducer:kl,useRef:Uf,useState:function(){return kl(or)},useDebugValue:cu,useDeferredValue:function(h){var u=kl(or),v=u[0],b=u[1];return Ao(function(){var E=sa.transition;sa.transition={};try{b(h)}finally{sa.transition=E}},[h]),v},useTransition:function(){var h=kl(or)[0],u=Ha().memoizedState;return[h,u]},useMutableSource:jc,useSyncExternalStore:Vc,useId:Ls,unstable_isNewReconciler:!1};function Kc(h,u){try{var v="",b=u;do v+=Rc(b),b=b.return;while(b);var E=v}catch(R){E=`
Error generating stack: `+R.message+`
`+R.stack}return{value:h,source:u,stack:E}}function mu(h,u){try{console.error(u.value)}catch(v){setTimeout(function(){throw v})}}var qg=typeof WeakMap=="function"?WeakMap:Map;function zf(h,u,v){v=br(-1,v),v.tag=3,v.payload={element:null};var b=u.value;return v.callback=function(){Uo||(Uo=!0,Rn=b),mu(h,u)},v}function pu(h,u,v){v=br(-1,v),v.tag=3;var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var E=u.value;v.payload=function(){return b(E)},v.callback=function(){mu(h,u)}}var R=h.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(v.callback=function(){mu(h,u),typeof b!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var q=u.stack;this.componentDidCatch(u.value,{componentStack:q!==null?q:""})}),v}function Tr(h,u,v){var b=h.pingCache;if(b===null){b=h.pingCache=new qg;var E=new Set;b.set(u,E)}else E=b.get(u),E===void 0&&(E=new Set,b.set(u,E));E.has(v)||(E.add(v),h=fd.bind(null,h,u,v),u.then(h,h))}function Zc(h){do{var u;if((u=h.tag===13)&&(u=h.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return h;h=h.return}while(h!==null);return null}function Ns(h,u,v,b,E){return(h.mode&1)===0?(h===u?h.flags|=65536:(h.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(u=br(-1,1),u.tag=2,es(v,u))),v.lanes|=1),h):(h.flags|=65536,h.lanes=E,h)}function ei(h){h.flags|=4}function Po(h,u){if(h!==null&&h.child===u.child)return!0;if((u.flags&16)!==0)return!1;for(h=u.child;h!==null;){if((h.flags&12854)!==0||(h.subtreeFlags&12854)!==0)return!1;h=h.sibling}return!0}var oa,Ds,gu,vu;if(Lt)oa=function(h,u){for(var v=u.child;v!==null;){if(v.tag===5||v.tag===6)ae(h,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Ds=function(){},gu=function(h,u,v,b,E){if(h=h.memoizedProps,h!==b){var R=u.stateNode,q=ja(Wi.current);v=Ye(R,v,h,b,E,q),(u.updateQueue=v)&&ei(u)}},vu=function(h,u,v,b){v!==b&&ei(u)};else if(on){oa=function(h,u,v,b){for(var E=u.child;E!==null;){if(E.tag===5){var R=E.stateNode;v&&b&&(R=en(R,E.type,E.memoizedProps,E)),ae(h,R)}else if(E.tag===6)R=E.stateNode,v&&b&&(R=Xn(R,E.memoizedProps,E)),ae(h,R);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)R=E.child,R!==null&&(R.return=E),oa(h,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===u)break;for(;E.sibling===null;){if(E.return===null||E.return===u)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var ss=function(h,u,v,b){for(var E=u.child;E!==null;){if(E.tag===5){var R=E.stateNode;v&&b&&(R=en(R,E.type,E.memoizedProps,E)),lt(h,R)}else if(E.tag===6)R=E.stateNode,v&&b&&(R=Xn(R,E.memoizedProps,E)),lt(h,R);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)R=E.child,R!==null&&(R.return=E),ss(h,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===u)break;for(;E.sibling===null;){if(E.return===null||E.return===u)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Ds=function(h,u){var v=u.stateNode;if(!Po(h,u)){h=v.containerInfo;var b=Ie(h);ss(b,u,!1,!1),v.pendingChildren=b,ei(u),Pt(h,b)}},gu=function(h,u,v,b,E){var R=h.stateNode,q=h.memoizedProps;if((h=Po(h,u))&&q===b)u.stateNode=R;else{var se=u.stateNode,Ee=ja(Wi.current),qe=null;q!==b&&(qe=Ye(se,v,q,b,E,Ee)),h&&qe===null?u.stateNode=R:(R=We(R,qe,v,q,b,u,h,se),Re(R,v,b,E,Ee)&&ei(u),u.stateNode=R,h?ei(u):oa(R,u,!1,!1))}},vu=function(h,u,v,b){v!==b?(h=ja(Cs.current),v=ja(Wi.current),u.stateNode=ce(b,h,v,u),ei(u)):u.stateNode=h.stateNode}}else Ds=function(){},gu=function(){},vu=function(){};function Er(h,u){if(!Pn)switch(h.tailMode){case"hidden":u=h.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?h.tail=null:v.sibling=null;break;case"collapsed":v=h.tail;for(var b=null;v!==null;)v.alternate!==null&&(b=v),v=v.sibling;b===null?u||h.tail===null?h.tail=null:h.tail.sibling=null:b.sibling=null}}function Vn(h){var u=h.alternate!==null&&h.alternate.child===h.child,v=0,b=0;if(u)for(var E=h.child;E!==null;)v|=E.lanes|E.childLanes,b|=E.subtreeFlags&14680064,b|=E.flags&14680064,E.return=h,E=E.sibling;else for(E=h.child;E!==null;)v|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=h,E=E.sibling;return h.subtreeFlags|=b,h.childLanes=v,u}function yu(h,u,v){var b=u.pendingProps;switch(Uc(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(u),null;case 1:return gt(u.type)&&dn(),Vn(u),null;case 3:return b=u.stateNode,To(),tt(rn),tt(Ht),Is(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(h===null||h.child===null)&&(bl(u)?ei(u):h===null||h.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ka!==null&&(Hl(ka),ka=null))),Ds(h,u),Vn(u),null;case 5:zc(u),v=ja(Cs.current);var E=u.type;if(h!==null&&u.stateNode!=null)gu(h,u,E,b,v),h.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!b){if(u.stateNode===null)throw Error(l(166));return Vn(u),null}if(h=ja(Wi.current),bl(u)){if(!yt)throw Error(l(175));h=go(u.stateNode,u.type,u.memoizedProps,v,h,u,!bo),u.updateQueue=h,h!==null&&ei(u)}else{var R=H(E,b,v,h,u);oa(R,u,!1,!1),u.stateNode=R,Re(R,E,b,v,h)&&ei(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Vn(u),null;case 6:if(h&&u.stateNode!=null)vu(h,u,h.memoizedProps,b);else{if(typeof b!="string"&&u.stateNode===null)throw Error(l(166));if(h=ja(Cs.current),v=ja(Wi.current),bl(u)){if(!yt)throw Error(l(176));if(h=u.stateNode,b=u.memoizedProps,(v=nr(h,b,u,!bo))&&(E=Li,E!==null))switch(R=(E.mode&1)!==0,E.tag){case 3:j(E.stateNode.containerInfo,h,b,R);break;case 5:le(E.type,E.memoizedProps,E.stateNode,h,b,R)}v&&ei(u)}else u.stateNode=ce(b,h,v,u)}return Vn(u),null;case 13:if(tt(Nn),b=u.memoizedState,Pn&&fi!==null&&(u.mode&1)!==0&&(u.flags&128)===0){for(h=fi;h;)h=Fa(h);return wo(),u.flags|=98560,u}if(b!==null&&b.dehydrated!==null){if(b=bl(u),h===null){if(!b)throw Error(l(318));if(!yt)throw Error(l(344));if(h=u.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));pl(h,u)}else wo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;return Vn(u),null}return ka!==null&&(Hl(ka),ka=null),(u.flags&128)!==0?(u.lanes=v,u):(b=b!==null,v=!1,h===null?bl(u):v=h.memoizedState!==null,b&&!v&&(u.child.flags|=8192,(u.mode&1)!==0&&(h===null||(Nn.current&1)!==0?zn===0&&(zn=3):ku())),u.updateQueue!==null&&(u.flags|=4),Vn(u),null);case 4:return To(),Ds(h,u),h===null&&X(u.stateNode.containerInfo),Vn(u),null;case 10:return _l(u.type._context),Vn(u),null;case 17:return gt(u.type)&&dn(),Vn(u),null;case 19:if(tt(Nn),E=u.memoizedState,E===null)return Vn(u),null;if(b=(u.flags&128)!==0,R=E.rendering,R===null)if(b)Er(E,!1);else{if(zn!==0||h!==null&&(h.flags&128)!==0)for(h=u.child;h!==null;){if(R=au(h),R!==null){for(u.flags|=128,Er(E,!1),h=R.updateQueue,h!==null&&(u.updateQueue=h,u.flags|=4),u.subtreeFlags=0,h=v,b=u.child;b!==null;)v=b,E=h,v.flags&=14680066,R=v.alternate,R===null?(v.childLanes=0,v.lanes=E,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=R.childLanes,v.lanes=R.lanes,v.child=R.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=R.memoizedProps,v.memoizedState=R.memoizedState,v.updateQueue=R.updateQueue,v.type=R.type,E=R.dependencies,v.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),b=b.sibling;return at(Nn,Nn.current&1|2),u.child}h=h.sibling}E.tail!==null&&$n()>hs&&(u.flags|=128,b=!0,Er(E,!1),u.lanes=4194304)}else{if(!b)if(h=au(R),h!==null){if(u.flags|=128,b=!0,h=h.updateQueue,h!==null&&(u.updateQueue=h,u.flags|=4),Er(E,!0),E.tail===null&&E.tailMode==="hidden"&&!R.alternate&&!Pn)return Vn(u),null}else 2*$n()-E.renderingStartTime>hs&&v!==1073741824&&(u.flags|=128,b=!0,Er(E,!1),u.lanes=4194304);E.isBackwards?(R.sibling=u.child,u.child=R):(h=E.last,h!==null?h.sibling=R:u.child=R,E.last=R)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=$n(),u.sibling=null,h=Nn.current,at(Nn,b?h&1|2:h&1),u):(Vn(u),null);case 22:case 23:return Gl(),b=u.memoizedState!==null,h!==null&&h.memoizedState!==null!==b&&(u.flags|=8192),b&&(u.mode&1)!==0?(ki&1073741824)!==0&&(Vn(u),Lt&&u.subtreeFlags&6&&(u.flags|=8192)):Vn(u),null;case 24:return null;case 25:return null}throw Error(l(156,u.tag))}var Jc=c.ReactCurrentOwner,hi=!1;function Bn(h,u,v,b){u.child=h===null?Df(u,null,v,b):Mr(u,h.child,v,b)}function En(h,u,v,b,E){v=v.render;var R=u.ref;return yo(u,E),b=Eo(h,u,v,b,R,E),v=as(),h!==null&&!hi?(u.updateQueue=h.updateQueue,u.flags&=-2053,h.lanes&=~E,Xi(h,u,E)):(Pn&&v&&Oc(u),u.flags|=1,Bn(h,u,b,E),u.child)}function Mn(h,u,v,b,E){if(h===null){var R=v.type;return typeof R=="function"&&!Eu(R)&&R.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(u.tag=15,u.type=R,Ar(h,u,R,b,E)):(h=Au(v.type,null,b,u,u.mode,E),h.ref=u.ref,h.return=u,u.child=h)}if(R=h.child,(h.lanes&E)===0){var q=R.memoizedProps;if(v=v.compare,v=v!==null?v:za,v(q,b)&&h.ref===u.ref)return Xi(h,u,E)}return u.flags|=1,h=Ur(R,b),h.ref=u.ref,h.return=u,u.child=h}function Ar(h,u,v,b,E){if(h!==null&&za(h.memoizedProps,b)&&h.ref===u.ref)if(hi=!1,(h.lanes&E)!==0)(h.flags&131072)!==0&&(hi=!0);else return u.lanes=h.lanes,Xi(h,u,E);return Cr(h,u,v,b,E)}function mi(h,u,v){var b=u.pendingProps,E=b.children,R=h!==null?h.memoizedState:null;if(b.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null},at(Gs,ki),ki|=v;else if((v&1073741824)!==0)u.memoizedState={baseLanes:0,cachePool:null},b=R!==null?R.baseLanes:v,at(Gs,ki),ki|=b;else return h=R!==null?R.baseLanes|v:v,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:h,cachePool:null},u.updateQueue=null,at(Gs,ki),ki|=h,null;else R!==null?(b=R.baseLanes|v,u.memoizedState=null):b=v,at(Gs,ki),ki|=b;return Bn(h,u,E,v),u.child}function Ni(h,u){var v=u.ref;(h===null&&v!==null||h!==null&&h.ref!==v)&&(u.flags|=512,u.flags|=2097152)}function Cr(h,u,v,b,E){var R=gt(v)?xn:Ht.current;return R=sn(u,R),yo(u,E),v=Eo(h,u,v,b,R,E),b=as(),h!==null&&!hi?(u.updateQueue=h.updateQueue,u.flags&=-2053,h.lanes&=~E,Xi(h,u,E)):(Pn&&b&&Oc(u),u.flags|=1,Bn(h,u,v,E),u.child)}function Os(h,u,v,b,E){if(gt(v)){var R=!0;Ba(u)}else R=!1;if(yo(u,E),u.stateNode===null)h!==null&&(h.alternate=null,u.alternate=null,u.flags|=2),If(u,v,b),Dc(u,v,b,E),b=!0;else if(h===null){var q=u.stateNode,se=u.memoizedProps;q.props=se;var Ee=q.context,qe=v.contextType;typeof qe=="object"&&qe!==null?qe=Gi(qe):(qe=gt(v)?xn:Ht.current,qe=sn(u,qe));var _t=v.getDerivedStateFromProps,Xt=typeof _t=="function"||typeof q.getSnapshotBeforeUpdate=="function";Xt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(se!==b||Ee!==qe)&&Rf(u,q,b,qe),Sa=!1;var Ot=u.memoizedState;q.state=Ot,Jh(u,b,q,E),Ee=u.memoizedState,se!==b||Ot!==Ee||rn.current||Sa?(typeof _t=="function"&&(Lc(u,v,_t,b),Ee=u.memoizedState),(se=Sa||Nc(u,v,se,b,Ot,Ee,qe))?(Xt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(u.flags|=4194308)):(typeof q.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=Ee),q.props=b,q.state=Ee,q.context=qe,b=se):(typeof q.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{q=u.stateNode,Pc(h,u),se=u.memoizedProps,qe=u.type===u.elementType?se:Hi(u.type,se),q.props=qe,Xt=u.pendingProps,Ot=q.context,Ee=v.contextType,typeof Ee=="object"&&Ee!==null?Ee=Gi(Ee):(Ee=gt(v)?xn:Ht.current,Ee=sn(u,Ee));var Qt=v.getDerivedStateFromProps;(_t=typeof Qt=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(se!==Xt||Ot!==Ee)&&Rf(u,q,b,Ee),Sa=!1,Ot=u.memoizedState,q.state=Ot,Jh(u,b,q,E);var pt=u.memoizedState;se!==Xt||Ot!==pt||rn.current||Sa?(typeof Qt=="function"&&(Lc(u,v,Qt,b),pt=u.memoizedState),(qe=Sa||Nc(u,v,qe,b,Ot,pt,Ee)||!1)?(_t||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(b,pt,Ee),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(b,pt,Ee)),typeof q.componentDidUpdate=="function"&&(u.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof q.componentDidUpdate!="function"||se===h.memoizedProps&&Ot===h.memoizedState||(u.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||se===h.memoizedProps&&Ot===h.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=pt),q.props=b,q.state=pt,q.context=Ee,b=qe):(typeof q.componentDidUpdate!="function"||se===h.memoizedProps&&Ot===h.memoizedState||(u.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||se===h.memoizedProps&&Ot===h.memoizedState||(u.flags|=1024),b=!1)}return Mi(h,u,v,b,R,E)}function Mi(h,u,v,b,E,R){Ni(h,u);var q=(u.flags&128)!==0;if(!b&&!q)return E&&ai(u,v,!1),Xi(h,u,R);b=u.stateNode,Jc.current=u;var se=q&&typeof v.getDerivedStateFromError!="function"?null:b.render();return u.flags|=1,h!==null&&q?(u.child=Mr(u,h.child,null,R),u.child=Mr(u,null,se,R)):Bn(h,u,se,R),u.memoizedState=b.state,E&&ai(u,v,!0),u.child}function Rl(h){var u=h.stateNode;u.pendingContext?an(h,u.pendingContext,u.pendingContext!==u.context):u.context&&an(h,u.context,!1),iu(h,u.containerInfo)}function Qc(h,u,v,b,E){return wo(),nu(E),u.flags|=256,Bn(h,u,v,b),u.child}var Pl={dehydrated:null,treeContext:null,retryLane:0};function Us(h){return{baseLanes:h,cachePool:null}}function $c(h,u,v){var b=u.pendingProps,E=Nn.current,R=!1,q=(u.flags&128)!==0,se;if((se=q)||(se=h!==null&&h.memoizedState===null?!1:(E&2)!==0),se?(R=!0,u.flags&=-129):(h===null||h.memoizedState!==null)&&(E|=1),at(Nn,E&1),h===null)return ns(u),h=u.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((u.mode&1)===0?u.lanes=1:Ii(h)?u.lanes=8:u.lanes=1073741824,null):(E=b.children,h=b.fallback,R?(b=u.mode,R=u.child,E={mode:"hidden",children:E},(b&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=E):R=Yl(E,b,0,null),h=Ks(h,b,v,null),R.return=u,h.return=u,R.sibling=h,u.child=R,u.child.memoizedState=Us(v),u.memoizedState=Pl,h):Ga(u,E));if(E=h.memoizedState,E!==null){if(se=E.dehydrated,se!==null){if(q)return u.flags&256?(u.flags&=-257,Nl(h,u,v,Error(l(422)))):u.memoizedState!==null?(u.child=h.child,u.flags|=128,null):(R=b.fallback,E=u.mode,b=Yl({mode:"visible",children:b.children},E,0,null),R=Ks(R,E,v,null),R.flags|=2,b.return=u,R.return=u,b.sibling=R,u.child=b,(u.mode&1)!==0&&Mr(u,h.child,null,v),u.child.memoizedState=Us(v),u.memoizedState=Pl,R);if((u.mode&1)===0)u=Nl(h,u,v,null);else if(Ii(se))u=Nl(h,u,v,Error(l(419)));else if(b=(v&h.childLanes)!==0,hi||b){if(b=Hn,b!==null){switch(v&-v){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}b=(R&(b.suspendedLanes|v))!==0?0:R,b!==0&&b!==E.retryLane&&(E.retryLane=b,Ti(h,b,-1))}ku(),u=Nl(h,u,v,Error(l(421)))}else ml(se)?(u.flags|=128,u.child=h.child,u=Wf.bind(null,h),Qr(se,u),u=null):(v=E.treeContext,yt&&(fi=Lh(se),Li=u,Pn=!0,ka=null,bo=!1,v!==null&&(Ma[aa++]=wr,Ma[aa++]=Sr,Ma[aa++]=Ts,wr=v.id,Sr=v.overflow,Ts=u)),u=Ga(u,u.pendingProps.children),u.flags|=4096);return u}return R?(b=xu(h,u,b.children,b.fallback,v),R=u.child,E=h.child.memoizedState,R.memoizedState=E===null?Us(v):{baseLanes:E.baseLanes|v,cachePool:null},R.childLanes=h.childLanes&~v,u.memoizedState=Pl,b):(v=Ll(h,u,b.children,v),u.memoizedState=null,v)}return R?(b=xu(h,u,b.children,b.fallback,v),R=u.child,E=h.child.memoizedState,R.memoizedState=E===null?Us(v):{baseLanes:E.baseLanes|v,cachePool:null},R.childLanes=h.childLanes&~v,u.memoizedState=Pl,b):(v=Ll(h,u,b.children,v),u.memoizedState=null,v)}function Ga(h,u){return u=Yl({mode:"visible",children:u},h.mode,0,null),u.return=h,h.child=u}function Ll(h,u,v,b){var E=h.child;return h=E.sibling,v=Ur(E,{mode:"visible",children:v}),(u.mode&1)===0&&(v.lanes=b),v.return=u,v.sibling=null,h!==null&&(b=u.deletions,b===null?(u.deletions=[h],u.flags|=16):b.push(h)),u.child=v}function xu(h,u,v,b,E){var R=u.mode;h=h.child;var q=h.sibling,se={mode:"hidden",children:v};return(R&1)===0&&u.child!==h?(v=u.child,v.childLanes=0,v.pendingProps=se,u.deletions=null):(v=Ur(h,se),v.subtreeFlags=h.subtreeFlags&14680064),q!==null?b=Ur(q,b):(b=Ks(b,R,E,null),b.flags|=2),b.return=u,v.return=u,v.sibling=b,u.child=v,b}function Nl(h,u,v,b){return b!==null&&nu(b),Mr(u,h.child,null,v),h=Ga(u,u.pendingProps.children),h.flags|=2,u.memoizedState=null,h}function jf(h,u,v){h.lanes|=u;var b=h.alternate;b!==null&&(b.lanes|=u),ks(h.return,u,v)}function lr(h,u,v,b,E){var R=h.memoizedState;R===null?h.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:v,tailMode:E}:(R.isBackwards=u,R.rendering=null,R.renderingStartTime=0,R.last=b,R.tail=v,R.tailMode=E)}function Fs(h,u,v){var b=u.pendingProps,E=b.revealOrder,R=b.tail;if(Bn(h,u,b.children,v),b=Nn.current,(b&2)!==0)b=b&1|2,u.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=u.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&jf(h,v,u);else if(h.tag===19)jf(h,v,u);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}b&=1}if(at(Nn,b),(u.mode&1)===0)u.memoizedState=null;else switch(E){case"forwards":for(v=u.child,E=null;v!==null;)h=v.alternate,h!==null&&au(h)===null&&(E=v),v=v.sibling;v=E,v===null?(E=u.child,u.child=null):(E=v.sibling,v.sibling=null),lr(u,!1,E,v,R);break;case"backwards":for(v=null,E=u.child,u.child=null;E!==null;){if(h=E.alternate,h!==null&&au(h)===null){u.child=E;break}h=E.sibling,E.sibling=v,v=E,E=h}lr(u,!0,v,null,R);break;case"together":lr(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Xi(h,u,v){if(h!==null&&(u.dependencies=h.dependencies),hr|=u.lanes,(v&u.childLanes)===0)return null;if(h!==null&&u.child!==h.child)throw Error(l(153));if(u.child!==null){for(h=u.child,v=Ur(h,h.pendingProps),u.child=v,v.return=u;h.sibling!==null;)h=h.sibling,v=v.sibling=Ur(h,h.pendingProps),v.return=u;v.sibling=null}return u.child}function _u(h,u,v){switch(u.tag){case 3:Rl(u),wo();break;case 5:Of(u);break;case 1:gt(u.type)&&Ba(u);break;case 4:iu(u,u.stateNode.containerInfo);break;case 10:Ms(u,u.type._context,u.memoizedProps.value);break;case 13:var b=u.memoizedState;if(b!==null)return b.dehydrated!==null?(at(Nn,Nn.current&1),u.flags|=128,null):(v&u.child.childLanes)!==0?$c(h,u,v):(at(Nn,Nn.current&1),h=Xi(h,u,v),h!==null?h.sibling:null);at(Nn,Nn.current&1);break;case 19:if(b=(v&u.childLanes)!==0,(h.flags&128)!==0){if(b)return Fs(h,u,v);u.flags|=128}var E=u.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),at(Nn,Nn.current),b)break;return null;case 22:case 23:return u.lanes=0,mi(h,u,v)}return Xi(h,u,v)}function bu(h,u){switch(Uc(u),u.tag){case 1:return gt(u.type)&&dn(),h=u.flags,h&65536?(u.flags=h&-65537|128,u):null;case 3:return To(),tt(rn),tt(Ht),Is(),h=u.flags,(h&65536)!==0&&(h&128)===0?(u.flags=h&-65537|128,u):null;case 5:return zc(u),null;case 13:if(tt(Nn),h=u.memoizedState,h!==null&&h.dehydrated!==null){if(u.alternate===null)throw Error(l(340));wo()}return h=u.flags,h&65536?(u.flags=h&-65537|128,u):null;case 19:return tt(Nn),null;case 4:return To(),null;case 10:return _l(u.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var Di=!1,ui=!1,Bs=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Ta(h,u){var v=h.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(b){Ui(h,u,b)}else v.current=null}function Ir(h,u,v){try{v()}catch(b){Ui(h,u,b)}}var ed=!1;function td(h,u){for(Q(h.containerInfo),nt=u;nt!==null;)if(h=nt,u=h.child,(h.subtreeFlags&1028)!==0&&u!==null)u.return=h,nt=u;else for(;nt!==null;){h=nt;try{var v=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,E=v.memoizedState,R=h.stateNode,q=R.getSnapshotBeforeUpdate(h.elementType===h.type?b:Hi(h.type,b),E);R.__reactInternalSnapshotBeforeUpdate=q}break;case 3:Lt&&Ge(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(se){Ui(h,h.return,se)}if(u=h.sibling,u!==null){u.return=h.return,nt=u;break}nt=h.return}return v=ed,ed=!1,v}function Rr(h,u,v){var b=u.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var E=b=b.next;do{if((E.tag&h)===h){var R=E.destroy;E.destroy=void 0,R!==void 0&&Ir(u,v,R)}E=E.next}while(E!==b)}}function pi(h,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var v=u=u.next;do{if((v.tag&h)===h){var b=v.create;v.destroy=b()}v=v.next}while(v!==u)}}function Oi(h){var u=h.ref;if(u!==null){var v=h.stateNode;switch(h.tag){case 5:h=ve(v);break;default:h=v}typeof u=="function"?u(h):u.current=h}}function In(h,u,v){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(gl,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:if(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var b=h=h.next;do{var E=b,R=E.destroy;E=E.tag,R!==void 0&&((E&2)!==0||(E&4)!==0)&&Ir(u,v,R),b=b.next}while(b!==h)}break;case 1:if(Ta(u,v),h=u.stateNode,typeof h.componentWillUnmount=="function")try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(q){Ui(u,v,q)}break;case 5:Ta(u,v);break;case 4:Lt?ad(h,u,v):on&&on&&(u=u.stateNode.containerInfo,v=Ie(u),hn(u,v))}}function Ea(h,u,v){for(var b=u;;)if(In(h,b,v),b.child===null||Lt&&b.tag===4){if(b===u)break;for(;b.sibling===null;){if(b.return===null||b.return===u)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function nd(h){var u=h.alternate;u!==null&&(h.alternate=null,nd(u)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(u=h.stateNode,u!==null&&ze(u)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function id(h){return h.tag===5||h.tag===3||h.tag===4}function wu(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||id(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Su(h){if(Lt){e:{for(var u=h.return;u!==null;){if(id(u))break e;u=u.return}throw Error(l(160))}var v=u;switch(v.tag){case 5:u=v.stateNode,v.flags&32&&(ye(u),v.flags&=-33),v=wu(h),Lo(h,v,u);break;case 3:case 4:u=v.stateNode.containerInfo,v=wu(h),Mu(h,v,u);break;default:throw Error(l(161))}}}function Mu(h,u,v){var b=h.tag;if(b===5||b===6)h=h.stateNode,u?Je(v,h,u):Mt(v,h);else if(b!==4&&(h=h.child,h!==null))for(Mu(h,u,v),h=h.sibling;h!==null;)Mu(h,u,v),h=h.sibling}function Lo(h,u,v){var b=h.tag;if(b===5||b===6)h=h.stateNode,u?De(v,h,u):Me(v,h);else if(b!==4&&(h=h.child,h!==null))for(Lo(h,u,v),h=h.sibling;h!==null;)Lo(h,u,v),h=h.sibling}function ad(h,u,v){for(var b=u,E=!1,R,q;;){if(!E){E=b.return;e:for(;;){if(E===null)throw Error(l(160));switch(R=E.stateNode,E.tag){case 5:q=!1;break e;case 3:R=R.containerInfo,q=!0;break e;case 4:R=R.containerInfo,q=!0;break e}E=E.return}E=!0}if(b.tag===5||b.tag===6)Ea(h,b,v),q?$(R,b.stateNode):Dt(R,b.stateNode);else if(b.tag===18)q?Fh(R,b.stateNode):Uh(R,b.stateNode);else if(b.tag===4){if(b.child!==null){R=b.stateNode.containerInfo,q=!0,b.child.return=b,b=b.child;continue}}else if(In(h,b,v),b.child!==null){b.child.return=b,b=b.child;continue}if(b===u)break;for(;b.sibling===null;){if(b.return===null||b.return===u)return;b=b.return,b.tag===4&&(E=!1)}b.sibling.return=b.return,b=b.sibling}}function os(h,u){if(Lt){switch(u.tag){case 0:case 11:case 14:case 15:Rr(3,u,u.return),pi(3,u),Rr(5,u,u.return);return;case 1:return;case 5:var v=u.stateNode;if(v!=null){var b=u.memoizedProps;h=h!==null?h.memoizedProps:b;var E=u.type,R=u.updateQueue;u.updateQueue=null,R!==null&&wt(v,R,E,h,b,u)}return;case 6:if(u.stateNode===null)throw Error(l(162));v=u.memoizedProps,et(u.stateNode,h!==null?h.memoizedProps:v,v);return;case 3:yt&&h!==null&&h.memoizedState.isDehydrated&&Dh(u.stateNode.containerInfo);return;case 12:return;case 13:No(u);return;case 19:No(u);return;case 17:return}throw Error(l(163))}switch(u.tag){case 0:case 11:case 14:case 15:Rr(3,u,u.return),pi(3,u),Rr(5,u,u.return);return;case 12:return;case 13:No(u);return;case 19:No(u);return;case 3:yt&&h!==null&&h.memoizedState.isDehydrated&&Dh(u.stateNode.containerInfo);break;case 22:case 23:return}e:if(on){switch(u.tag){case 1:case 5:case 6:break e;case 3:case 4:u=u.stateNode,hn(u.containerInfo,u.pendingChildren);break e}throw Error(l(163))}}function No(h){var u=h.updateQueue;if(u!==null){h.updateQueue=null;var v=h.stateNode;v===null&&(v=h.stateNode=new Bs),u.forEach(function(b){var E=Xf.bind(null,h,b);v.has(b)||(v.add(b),b.then(E,E))})}}function Kg(h,u){for(nt=u;nt!==null;){u=nt;var v=u.deletions;if(v!==null)for(var b=0;b<v.length;b++){var E=v[b];try{var R=h;Lt?ad(R,E,u):Ea(R,E,u);var q=E.alternate;q!==null&&(q.return=null),E.return=null}catch(It){Ui(E,u,It)}}if(v=u.child,(u.subtreeFlags&12854)!==0&&v!==null)v.return=u,nt=v;else for(;nt!==null;){u=nt;try{var se=u.flags;if(se&32&&Lt&&ye(u.stateNode),se&512){var Ee=u.alternate;if(Ee!==null){var qe=Ee.ref;qe!==null&&(typeof qe=="function"?qe(null):qe.current=null)}}if(se&8192)switch(u.tag){case 13:if(u.memoizedState!==null){var _t=u.alternate;(_t===null||_t.memoizedState===null)&&(jl=$n())}break;case 22:var Xt=u.memoizedState!==null,Ot=u.alternate,Qt=Ot!==null&&Ot.memoizedState!==null;if(v=u,Lt){e:if(b=v,E=Xt,R=null,Lt)for(var pt=b;;){if(pt.tag===5){if(R===null){R=pt;var yi=pt.stateNode;E?je(yi):Ve(pt.stateNode,pt.memoizedProps)}}else if(pt.tag===6){if(R===null){var da=pt.stateNode;E?J(da):He(da,pt.memoizedProps)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===b)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===b)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===b)break e;R===pt&&(R=null),pt=pt.return}R===pt&&(R=null),pt.sibling.return=pt.return,pt=pt.sibling}}if(Xt&&!Qt&&(v.mode&1)!==0){nt=v;for(var xe=v.child;xe!==null;){for(v=nt=xe;nt!==null;){b=nt;var oe=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Rr(4,b,b.return);break;case 1:Ta(b,b.return);var ke=b.stateNode;if(typeof ke.componentWillUnmount=="function"){var ct=b.return;try{ke.props=b.memoizedProps,ke.state=b.memoizedState,ke.componentWillUnmount()}catch(It){Ui(b,ct,It)}}break;case 5:Ta(b,b.return);break;case 22:if(b.memoizedState!==null){sd(v);continue}}oe!==null?(oe.return=b,nt=oe):sd(v)}xe=xe.sibling}}}switch(se&4102){case 2:Su(u),u.flags&=-3;break;case 6:Su(u),u.flags&=-3,os(u.alternate,u);break;case 4096:u.flags&=-4097;break;case 4100:u.flags&=-4097,os(u.alternate,u);break;case 4:os(u.alternate,u)}}catch(It){Ui(u,u.return,It)}if(v=u.sibling,v!==null){v.return=u.return,nt=v;break}nt=u.return}}}function Dl(h,u,v){nt=h,Ol(h)}function Ol(h,u,v){for(var b=(h.mode&1)!==0;nt!==null;){var E=nt,R=E.child;if(E.tag===22&&b){var q=E.memoizedState!==null||Di;if(!q){var se=E.alternate,Ee=se!==null&&se.memoizedState!==null||ui;se=Di;var qe=ui;if(Di=q,(ui=Ee)&&!qe)for(nt=E;nt!==null;)q=nt,Ee=q.child,q.tag===22&&q.memoizedState!==null?zs(E):Ee!==null?(Ee.return=q,nt=Ee):zs(E);for(;R!==null;)nt=R,Ol(R),R=R.sibling;nt=E,Di=se,ui=qe}rd(h)}else(E.subtreeFlags&8772)!==0&&R!==null?(R.return=E,nt=R):rd(h)}}function rd(h){for(;nt!==null;){var u=nt;if((u.flags&8772)!==0){var v=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:ui||pi(5,u);break;case 1:var b=u.stateNode;if(u.flags&4&&!ui)if(v===null)b.componentDidMount();else{var E=u.elementType===u.type?v.memoizedProps:Hi(u.type,v.memoizedProps);b.componentDidUpdate(E,v.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var R=u.updateQueue;R!==null&&Af(u,R,b);break;case 3:var q=u.updateQueue;if(q!==null){if(v=null,u.child!==null)switch(u.child.tag){case 5:v=ve(u.child.stateNode);break;case 1:v=u.child.stateNode}Af(u,q,v)}break;case 5:var se=u.stateNode;v===null&&u.flags&4&&kt(se,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(yt&&u.memoizedState===null){var Ee=u.alternate;if(Ee!==null){var qe=Ee.memoizedState;if(qe!==null){var _t=qe.dehydrated;_t!==null&&Oh(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}ui||u.flags&512&&Oi(u)}catch(Xt){Ui(u,u.return,Xt)}}if(u===h){nt=null;break}if(v=u.sibling,v!==null){v.return=u.return,nt=v;break}nt=u.return}}function sd(h){for(;nt!==null;){var u=nt;if(u===h){nt=null;break}var v=u.sibling;if(v!==null){v.return=u.return,nt=v;break}nt=u.return}}function zs(h){for(;nt!==null;){var u=nt;try{switch(u.tag){case 0:case 11:case 15:var v=u.return;try{pi(4,u)}catch(Ee){Ui(u,v,Ee)}break;case 1:var b=u.stateNode;if(typeof b.componentDidMount=="function"){var E=u.return;try{b.componentDidMount()}catch(Ee){Ui(u,E,Ee)}}var R=u.return;try{Oi(u)}catch(Ee){Ui(u,R,Ee)}break;case 5:var q=u.return;try{Oi(u)}catch(Ee){Ui(u,q,Ee)}}}catch(Ee){Ui(u,u.return,Ee)}if(u===h){nt=null;break}var se=u.sibling;if(se!==null){se.return=u.return,nt=se;break}nt=u.return}}var Ul=0,js=1,Vs=2,Pr=3,Do=4;if(typeof Symbol=="function"&&Symbol.for){var Hs=Symbol.for;Ul=Hs("selector.component"),js=Hs("selector.has_pseudo_class"),Vs=Hs("selector.role"),Pr=Hs("selector.test_id"),Do=Hs("selector.text")}function Fl(h){var u=Le(h);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(l(364));return u}if(h=$e(h),h===null)throw Error(l(362));return h.stateNode.current}function Bl(h,u){switch(u.$$typeof){case Ul:if(h.type===u.value)return!0;break;case js:e:{u=u.value,h=[h,0];for(var v=0;v<h.length;){var b=h[v++],E=h[v++],R=u[E];if(b.tag!==5||!O(b)){for(;R!=null&&Bl(b,R);)E++,R=u[E];if(E===u.length){u=!0;break e}else for(b=b.child;b!==null;)h.push(b,E),b=b.sibling}}u=!1}return u;case Vs:if(h.tag===5&&ue(h.stateNode,u.value))return!0;break;case Do:if((h.tag===5||h.tag===6)&&(h=W(h),h!==null&&0<=h.indexOf(u.value)))return!0;break;case Pr:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function ls(h){switch(h.$$typeof){case Ul:return"<"+(z(h.value)||"Unknown")+">";case js:return":has("+(ls(h)||"")+")";case Vs:return'[role="'+h.value+'"]';case Do:return'"'+h.value+'"';case Pr:return'[data-testname="'+h.value+'"]';default:throw Error(l(365))}}function la(h,u){var v=[];h=[h,0];for(var b=0;b<h.length;){var E=h[b++],R=h[b++],q=u[R];if(E.tag!==5||!O(E)){for(;q!=null&&Bl(E,q);)R++,q=u[R];if(R===u.length)v.push(E);else for(E=E.child;E!==null;)h.push(E,R),E=E.sibling}}return v}function Lr(h,u){if(!ot)throw Error(l(363));h=Fl(h),h=la(h,u),u=[],h=Array.from(h);for(var v=0;v<h.length;){var b=h[v++];if(b.tag===5)O(b)||u.push(b.stateNode);else for(b=b.child;b!==null;)h.push(b),b=b.sibling}return u}var od=Math.ceil,zl=c.ReactCurrentDispatcher,Wa=c.ReactCurrentOwner,bn=c.ReactCurrentBatchConfig,Kt=0,Hn=null,wn=null,Ln=0,ki=0,Gs=At(0),zn=0,Oo=null,hr=0,ha=0,Ws=0,Nr=null,qn=null,jl=0,hs=1/0;function Xs(){hs=$n()+500}var Uo=!1,Rn=null,Xa=null,Fo=!1,ur=null,Ys=0,qs=0,Dr=null,An=-1,jn=0;function fn(){return(Kt&6)!==0?$n():An!==-1?An:An=$n()}function Ya(h){return(h.mode&1)===0?1:(Kt&2)!==0&&Ln!==0?Ln&-Ln:Ef.transition!==null?(jn===0&&(h=Fn,Fn<<=1,(Fn&4194240)===0&&(Fn=64),jn=h),jn):(h=tn,h!==0?h:Ne())}function Ti(h,u,v){if(50<qs)throw qs=0,Dr=null,Error(l(185));var b=us(h,u);return b===null?null:(_s(b,u,v),((Kt&2)===0||b!==Hn)&&(b===Hn&&((Kt&2)===0&&(ha|=u),zn===4&&vi(b,Ln)),Yi(b,v),u===1&&Kt===0&&(h.mode&1)===0&&(Xs(),Wh&&ba())),b)}function us(h,u){h.lanes|=u;var v=h.alternate;for(v!==null&&(v.lanes|=u),v=h,h=h.return;h!==null;)h.childLanes|=u,v=h.alternate,v!==null&&(v.childLanes|=u),v=h,h=h.return;return v.tag===3?v.stateNode:null}function Yi(h,u){var v=h.callbackNode;Tf(h,u);var b=ia(h,h===Hn?Ln:0);if(b===0)v!==null&&vo(v),h.callbackNode=null,h.callbackPriority=0;else if(u=b&-b,h.callbackPriority!==u){if(v!=null&&vo(v),u===1)h.tag===0?Yh(ua.bind(null,h)):Xh(ua.bind(null,h)),Ke?Ue(function(){Kt===0&&ba()}):bs(ws,ba),v=null;else{switch(xr(b)){case 1:v=ws;break;case 4:v=Xg;break;case 16:v=Hh;break;case 536870912:v=Gh;break;default:v=Hh}v=Tu(v,gi.bind(null,h))}h.callbackPriority=u,h.callbackNode=v}}function gi(h,u){if(An=-1,jn=0,(Kt&6)!==0)throw Error(l(327));var v=h.callbackNode;if(cr()&&h.callbackNode!==v)return null;var b=ia(h,h===Hn?Ln:0);if(b===0)return null;if((b&30)!==0||(b&h.expiredLanes)!==0||u)u=Wl(h,b);else{u=b;var E=Kt;Kt|=2;var R=ud();(Hn!==h||Ln!==u)&&(Xs(),Or(h,u));do try{Hf();break}catch(se){hd(h,se)}while(!0);Pi(),zl.current=R,Kt=E,wn!==null?u=0:(Hn=null,Ln=0,u=zn)}if(u!==0){if(u===2&&(E=zh(h),E!==0&&(b=E,u=Vl(h,E))),u===1)throw v=Oo,Or(h,0),vi(h,b),Yi(h,$n()),v;if(u===6)vi(h,b);else{if(E=h.current.alternate,(b&30)===0&&!ld(E)&&(u=Wl(h,b),u===2&&(R=zh(h),R!==0&&(b=R,u=Vl(h,R))),u===1))throw v=Oo,Or(h,0),vi(h,b),Yi(h,$n()),v;switch(h.finishedWork=E,h.finishedLanes=b,u){case 0:case 1:throw Error(l(345));case 2:qa(h,qn);break;case 3:if(vi(h,b),(b&130023424)===b&&(u=jl+500-$n(),10<u)){if(ia(h,0)!==0)break;if(E=h.suspendedLanes,(E&b)!==b){fn(),h.pingedLanes|=h.suspendedLanes&E;break}h.timeoutHandle=we(qa.bind(null,h,qn),u);break}qa(h,qn);break;case 4:if(vi(h,b),(b&4194240)===b)break;for(u=h.eventTimes,E=-1;0<b;){var q=31-ri(b);R=1<<q,q=u[q],q>E&&(E=q),b&=~R}if(b=E,b=$n()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*od(b/1960))-b,10<b){h.timeoutHandle=we(qa.bind(null,h,qn),b);break}qa(h,qn);break;case 5:qa(h,qn);break;default:throw Error(l(329))}}}return Yi(h,$n()),h.callbackNode===v?gi.bind(null,h):null}function Vl(h,u){var v=Nr;return h.current.memoizedState.isDehydrated&&(Or(h,u).flags|=256),h=Wl(h,u),h!==2&&(u=qn,qn=v,u!==null&&Hl(u)),h}function Hl(h){qn===null?qn=h:qn.push.apply(qn,h)}function ld(h){for(var u=h;;){if(u.flags&16384){var v=u.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var b=0;b<v.length;b++){var E=v[b],R=E.getSnapshot;E=E.value;try{if(!Ri(R(),E))return!1}catch{return!1}}}if(v=u.child,u.subtreeFlags&16384&&v!==null)v.return=u,u=v;else{if(u===h)break;for(;u.sibling===null;){if(u.return===null||u.return===h)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function vi(h,u){for(u&=~Ws,u&=~ha,h.suspendedLanes|=u,h.pingedLanes&=~u,h=h.expirationTimes;0<u;){var v=31-ri(u),b=1<<v;h[v]=-1,u&=~b}}function ua(h){if((Kt&6)!==0)throw Error(l(327));cr();var u=ia(h,0);if((u&1)===0)return Yi(h,$n()),null;var v=Wl(h,u);if(h.tag!==0&&v===2){var b=zh(h);b!==0&&(u=b,v=Vl(h,b))}if(v===1)throw v=Oo,Or(h,0),vi(h,u),Yi(h,$n()),v;if(v===6)throw Error(l(345));return h.finishedWork=h.current.alternate,h.finishedLanes=u,qa(h,qn),Yi(h,$n()),null}function Bo(h){ur!==null&&ur.tag===0&&(Kt&6)===0&&cr();var u=Kt;Kt|=1;var v=bn.transition,b=tn;try{if(bn.transition=null,tn=1,h)return h()}finally{tn=b,bn.transition=v,Kt=u,(Kt&6)===0&&ba()}}function Gl(){ki=Gs.current,tt(Gs)}function Or(h,u){h.finishedWork=null,h.finishedLanes=0;var v=h.timeoutHandle;if(v!==it&&(h.timeoutHandle=it,Be(v)),wn!==null)for(v=wn.return;v!==null;){var b=v;switch(Uc(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&dn();break;case 3:To(),tt(rn),tt(Ht),Is();break;case 5:zc(b);break;case 4:To();break;case 13:tt(Nn);break;case 19:tt(Nn);break;case 10:_l(b.type._context);break;case 22:case 23:Gl()}v=v.return}if(Hn=h,wn=h=Ur(h.current,null),Ln=ki=u,zn=0,Oo=null,Ws=ha=hr=0,qn=Nr=null,wa!==null){for(u=0;u<wa.length;u++)if(v=wa[u],b=v.interleaved,b!==null){v.interleaved=null;var E=b.next,R=v.pending;if(R!==null){var q=R.next;R.next=E,b.next=q}v.pending=b}wa=null}return h}function hd(h,u){do{var v=wn;try{if(Pi(),wl.current=Ro,ru){for(var b=Dn.memoizedState;b!==null;){var E=b.queue;E!==null&&(E.pending=null),b=b.next}ru=!1}if(Rs=0,oi=si=Dn=null,sr=!1,Ps=0,Wa.current=null,v===null||v.return===null){zn=1,Oo=u,wn=null;break}e:{var R=h,q=v.return,se=v,Ee=u;if(u=Ln,se.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var qe=Ee,_t=se,Xt=_t.tag;if((_t.mode&1)===0&&(Xt===0||Xt===11||Xt===15)){var Ot=_t.alternate;Ot?(_t.updateQueue=Ot.updateQueue,_t.memoizedState=Ot.memoizedState,_t.lanes=Ot.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var Qt=Zc(q);if(Qt!==null){Qt.flags&=-257,Ns(Qt,q,se,R,u),Qt.mode&1&&Tr(R,qe,u),u=Qt,Ee=qe;var pt=u.updateQueue;if(pt===null){var yi=new Set;yi.add(Ee),u.updateQueue=yi}else pt.add(Ee);break e}else{if((u&1)===0){Tr(R,qe,u),ku();break e}Ee=Error(l(426))}}else if(Pn&&se.mode&1){var da=Zc(q);if(da!==null){(da.flags&65536)===0&&(da.flags|=256),Ns(da,q,se,R,u),nu(Ee);break e}}R=Ee,zn!==4&&(zn=2),Nr===null?Nr=[R]:Nr.push(R),Ee=Kc(Ee,se),se=q;do{switch(se.tag){case 3:se.flags|=65536,u&=-u,se.lanes|=u;var xe=zf(se,Ee,u);Zh(se,xe);break e;case 1:R=Ee;var oe=se.type,ke=se.stateNode;if((se.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(Xa===null||!Xa.has(ke)))){se.flags|=65536,u&=-u,se.lanes|=u;var ct=pu(se,R,u);Zh(se,ct);break e}}se=se.return}while(se!==null)}dd(v)}catch(It){u=It,wn===v&&v!==null&&(wn=v=v.return);continue}break}while(!0)}function ud(){var h=zl.current;return zl.current=Ro,h===null?Ro:h}function ku(){(zn===0||zn===3||zn===2)&&(zn=4),Hn===null||(hr&268435455)===0&&(ha&268435455)===0||vi(Hn,Ln)}function Wl(h,u){var v=Kt;Kt|=2;var b=ud();Hn===h&&Ln===u||Or(h,u);do try{Vf();break}catch(E){hd(h,E)}while(!0);if(Pi(),Kt=v,zl.current=b,wn!==null)throw Error(l(261));return Hn=null,Ln=0,zn}function Vf(){for(;wn!==null;)cd(wn)}function Hf(){for(;wn!==null&&!$r();)cd(wn)}function cd(h){var u=pd(h.alternate,h,ki);h.memoizedProps=h.pendingProps,u===null?dd(h):wn=u,Wa.current=null}function dd(h){var u=h;do{var v=u.alternate;if(h=u.return,(u.flags&32768)===0){if(v=yu(v,u,ki),v!==null){wn=v;return}}else{if(v=bu(v,u),v!==null){v.flags&=32767,wn=v;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{zn=6,wn=null;return}}if(u=u.sibling,u!==null){wn=u;return}wn=u=h}while(u!==null);zn===0&&(zn=5)}function qa(h,u){var v=tn,b=bn.transition;try{bn.transition=null,tn=1,Gf(h,u,v)}finally{bn.transition=b,tn=v}return null}function Gf(h,u,v){do cr();while(ur!==null);if((Kt&6)!==0)throw Error(l(327));var b=h.finishedWork,E=h.finishedLanes;if(b===null)return null;if(h.finishedWork=null,h.finishedLanes=0,b===h.current)throw Error(l(177));h.callbackNode=null,h.callbackPriority=0;var R=b.lanes|b.childLanes;if(Vh(h,R),h===Hn&&(wn=Hn=null,Ln=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Fo||(Fo=!0,Tu(Hh,function(){return cr(),null})),R=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||R){R=bn.transition,bn.transition=null;var q=tn;tn=1;var se=Kt;Kt|=4,Wa.current=null,td(h,b),Kg(h,b),K(h.containerInfo),h.current=b,Dl(b),Wg(),Kt=se,tn=q,bn.transition=R}else h.current=b;if(Fo&&(Fo=!1,ur=h,Ys=E),R=h.pendingLanes,R===0&&(Xa=null),vl(b.stateNode),Yi(h,$n()),u!==null)for(v=h.onRecoverableError,b=0;b<u.length;b++)v(u[b]);if(Uo)throw Uo=!1,h=Rn,Rn=null,h;return(Ys&1)!==0&&h.tag!==0&&cr(),R=h.pendingLanes,(R&1)!==0?h===Dr?qs++:(qs=0,Dr=h):qs=0,ba(),null}function cr(){if(ur!==null){var h=xr(Ys),u=bn.transition,v=tn;try{if(bn.transition=null,tn=16>h?16:h,ur===null)var b=!1;else{if(h=ur,ur=null,Ys=0,(Kt&6)!==0)throw Error(l(331));var E=Kt;for(Kt|=4,nt=h.current;nt!==null;){var R=nt,q=R.child;if((nt.flags&16)!==0){var se=R.deletions;if(se!==null){for(var Ee=0;Ee<se.length;Ee++){var qe=se[Ee];for(nt=qe;nt!==null;){var _t=nt;switch(_t.tag){case 0:case 11:case 15:Rr(8,_t,R)}var Xt=_t.child;if(Xt!==null)Xt.return=_t,nt=Xt;else for(;nt!==null;){_t=nt;var Ot=_t.sibling,Qt=_t.return;if(nd(_t),_t===qe){nt=null;break}if(Ot!==null){Ot.return=Qt,nt=Ot;break}nt=Qt}}}var pt=R.alternate;if(pt!==null){var yi=pt.child;if(yi!==null){pt.child=null;do{var da=yi.sibling;yi.sibling=null,yi=da}while(yi!==null)}}nt=R}}if((R.subtreeFlags&2064)!==0&&q!==null)q.return=R,nt=q;else e:for(;nt!==null;){if(R=nt,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:Rr(9,R,R.return)}var xe=R.sibling;if(xe!==null){xe.return=R.return,nt=xe;break e}nt=R.return}}var oe=h.current;for(nt=oe;nt!==null;){q=nt;var ke=q.child;if((q.subtreeFlags&2064)!==0&&ke!==null)ke.return=q,nt=ke;else e:for(q=oe;nt!==null;){if(se=nt,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:pi(9,se)}}catch(It){Ui(se,se.return,It)}if(se===q){nt=null;break e}var ct=se.sibling;if(ct!==null){ct.return=se.return,nt=ct;break e}nt=se.return}}if(Kt=E,ba(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(gl,h)}catch{}b=!0}return b}finally{tn=v,bn.transition=u}}return!1}function Xl(h,u,v){u=Kc(v,u),u=zf(h,u,1),es(h,u),u=fn(),h=us(h,1),h!==null&&(_s(h,1,u),Yi(h,u))}function Ui(h,u,v){if(h.tag===3)Xl(h,h,v);else for(;u!==null;){if(u.tag===3){Xl(u,h,v);break}else if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Xa===null||!Xa.has(b))){h=Kc(v,h),h=pu(u,h,1),es(u,h),h=fn(),u=us(u,1),u!==null&&(_s(u,1,h),Yi(u,h));break}}u=u.return}}function fd(h,u,v){var b=h.pingCache;b!==null&&b.delete(u),u=fn(),h.pingedLanes|=h.suspendedLanes&v,Hn===h&&(Ln&v)===v&&(zn===4||zn===3&&(Ln&130023424)===Ln&&500>$n()-jl?Or(h,0):Ws|=v),Yi(h,u)}function md(h,u){u===0&&((h.mode&1)===0?u=1:(u=zt,zt<<=1,(zt&130023424)===0&&(zt=4194304)));var v=fn();h=us(h,u),h!==null&&(_s(h,u,v),Yi(h,v))}function Wf(h){var u=h.memoizedState,v=0;u!==null&&(v=u.retryLane),md(h,v)}function Xf(h,u){var v=0;switch(h.tag){case 13:var b=h.stateNode,E=h.memoizedState;E!==null&&(v=E.retryLane);break;case 19:b=h.stateNode;break;default:throw Error(l(314))}b!==null&&b.delete(u),md(h,v)}var pd;pd=function(h,u,v){if(h!==null)if(h.memoizedProps!==u.pendingProps||rn.current)hi=!0;else{if((h.lanes&v)===0&&(u.flags&128)===0)return hi=!1,_u(h,u,v);hi=(h.flags&131072)!==0}else hi=!1,Pn&&(u.flags&1048576)!==0&&Pf(u,eu,u.index);switch(u.lanes=0,u.tag){case 2:var b=u.type;h!==null&&(h.alternate=null,u.alternate=null,u.flags|=2),h=u.pendingProps;var E=sn(u,Ht.current);yo(u,v),E=Eo(null,u,b,h,E,v);var R=as();return u.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,gt(b)?(R=!0,Ba(u)):R=!1,u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,xo(u),E.updater=Qh,u.stateNode=E,E._reactInternals=u,Dc(u,b,h,v),u=Mi(null,u,b,!0,R,v)):(u.tag=0,Pn&&R&&Oc(u),Bn(null,u,E,v),u=u.child),u;case 16:b=u.elementType;e:{switch(h!==null&&(h.alternate=null,u.alternate=null,u.flags|=2),h=u.pendingProps,E=b._init,b=E(b._payload),u.type=b,E=u.tag=Zg(b),h=Hi(b,h),E){case 0:u=Cr(null,u,b,h,v);break e;case 1:u=Os(null,u,b,h,v);break e;case 11:u=En(null,u,b,h,v);break e;case 14:u=Mn(null,u,b,Hi(b.type,h),v);break e}throw Error(l(306,b,""))}return u;case 0:return b=u.type,E=u.pendingProps,E=u.elementType===b?E:Hi(b,E),Cr(h,u,b,E,v);case 1:return b=u.type,E=u.pendingProps,E=u.elementType===b?E:Hi(b,E),Os(h,u,b,E,v);case 3:e:{if(Rl(u),h===null)throw Error(l(387));b=u.pendingProps,R=u.memoizedState,E=R.element,Pc(h,u),Jh(u,b,null,v);var q=u.memoizedState;if(b=q.element,yt&&R.isDehydrated)if(R={element:b,isDehydrated:!1,cache:q.cache,transitions:q.transitions},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){E=Error(l(423)),u=Qc(h,u,b,v,E);break e}else if(b!==E){E=Error(l(424)),u=Qc(h,u,b,v,E);break e}else for(yt&&(fi=po(u.stateNode.containerInfo),Li=u,Pn=!0,ka=null,bo=!1),v=Df(u,null,b,v),u.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(wo(),b===E){u=Xi(h,u,v);break e}Bn(h,u,b,v)}u=u.child}return u;case 5:return Of(u),h===null&&ns(u),b=u.type,E=u.pendingProps,R=h!==null?h.memoizedProps:null,q=E.children,rt(b,E)?q=null:R!==null&&rt(b,R)&&(u.flags|=32),Ni(h,u),Bn(h,u,q,v),u.child;case 6:return h===null&&ns(u),null;case 13:return $c(h,u,v);case 4:return iu(u,u.stateNode.containerInfo),b=u.pendingProps,h===null?u.child=Mr(u,null,b,v):Bn(h,u,b,v),u.child;case 11:return b=u.type,E=u.pendingProps,E=u.elementType===b?E:Hi(b,E),En(h,u,b,E,v);case 7:return Bn(h,u,u.pendingProps,v),u.child;case 8:return Bn(h,u,u.pendingProps.children,v),u.child;case 12:return Bn(h,u,u.pendingProps.children,v),u.child;case 10:e:{if(b=u.type._context,E=u.pendingProps,R=u.memoizedProps,q=E.value,Ms(u,b,q),R!==null)if(Ri(R.value,q)){if(R.children===E.children&&!rn.current){u=Xi(h,u,v);break e}}else for(R=u.child,R!==null&&(R.return=u);R!==null;){var se=R.dependencies;if(se!==null){q=R.child;for(var Ee=se.firstContext;Ee!==null;){if(Ee.context===b){if(R.tag===1){Ee=br(-1,v&-v),Ee.tag=2;var qe=R.updateQueue;if(qe!==null){qe=qe.shared;var _t=qe.pending;_t===null?Ee.next=Ee:(Ee.next=_t.next,_t.next=Ee),qe.pending=Ee}}R.lanes|=v,Ee=R.alternate,Ee!==null&&(Ee.lanes|=v),ks(R.return,v,u),se.lanes|=v;break}Ee=Ee.next}}else if(R.tag===10)q=R.type===u.type?null:R.child;else if(R.tag===18){if(q=R.return,q===null)throw Error(l(341));q.lanes|=v,se=q.alternate,se!==null&&(se.lanes|=v),ks(q,v,u),q=R.sibling}else q=R.child;if(q!==null)q.return=R;else for(q=R;q!==null;){if(q===u){q=null;break}if(R=q.sibling,R!==null){R.return=q.return,q=R;break}q=q.return}R=q}Bn(h,u,E.children,v),u=u.child}return u;case 9:return E=u.type,b=u.pendingProps.children,yo(u,v),E=Gi(E),b=b(E),u.flags|=1,Bn(h,u,b,v),u.child;case 14:return b=u.type,E=Hi(b,u.pendingProps),E=Hi(b.type,E),Mn(h,u,b,E,v);case 15:return Ar(h,u,u.type,u.pendingProps,v);case 17:return b=u.type,E=u.pendingProps,E=u.elementType===b?E:Hi(b,E),h!==null&&(h.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,gt(b)?(h=!0,Ba(u)):h=!1,yo(u,v),If(u,b,E),Dc(u,b,E,v),Mi(null,u,b,!0,h,v);case 19:return Fs(h,u,v);case 22:return mi(h,u,v)}throw Error(l(156,u.tag))};function Tu(h,u){return bs(h,u)}function Yf(h,u,v,b){this.tag=h,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ca(h,u,v,b){return new Yf(h,u,v,b)}function Eu(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Zg(h){if(typeof h=="function")return Eu(h)?1:0;if(h!=null){if(h=h.$$typeof,h===T)return 11;if(h===C)return 14}return 2}function Ur(h,u){var v=h.alternate;return v===null?(v=ca(h.tag,u,h.key,h.mode),v.elementType=h.elementType,v.type=h.type,v.stateNode=h.stateNode,v.alternate=h,h.alternate=v):(v.pendingProps=u,v.type=h.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=h.flags&14680064,v.childLanes=h.childLanes,v.lanes=h.lanes,v.child=h.child,v.memoizedProps=h.memoizedProps,v.memoizedState=h.memoizedState,v.updateQueue=h.updateQueue,u=h.dependencies,v.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},v.sibling=h.sibling,v.index=h.index,v.ref=h.ref,v}function Au(h,u,v,b,E,R){var q=2;if(b=h,typeof h=="function")Eu(h)&&(q=1);else if(typeof h=="string")q=5;else e:switch(h){case p:return Ks(v.children,E,R,u);case g:q=8,E|=8;break;case x:return h=ca(12,v,u,E|2),h.elementType=x,h.lanes=R,h;case M:return h=ca(13,v,u,E),h.elementType=M,h.lanes=R,h;case w:return h=ca(19,v,u,E),h.elementType=w,h.lanes=R,h;case L:return Yl(v,E,R,u);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case _:q=10;break e;case S:q=9;break e;case T:q=11;break e;case C:q=14;break e;case I:q=16,b=null;break e}throw Error(l(130,h==null?h:typeof h,""))}return u=ca(q,v,u,E),u.elementType=h,u.type=b,u.lanes=R,u}function Ks(h,u,v,b){return h=ca(7,h,b,u),h.lanes=v,h}function Yl(h,u,v,b){return h=ca(22,h,b,u),h.elementType=L,h.lanes=v,h.stateNode={},h}function Cu(h,u,v){return h=ca(6,h,null,u),h.lanes=v,h}function Iu(h,u,v){return u=ca(4,h.children!==null?h.children:[],h.key,u),u.lanes=v,u.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},u}function Ru(h,u,v,b,E){this.tag=u,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=it,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jh(0),this.expirationTimes=jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jh(0),this.identifierPrefix=b,this.onRecoverableError=E,yt&&(this.mutableSourceEagerHydrationData=null)}function qf(h,u,v,b,E,R,q,se,Ee){return h=new Ru(h,u,v,se,Ee),u===1?(u=1,R===!0&&(u|=8)):u=0,R=ca(3,null,null,u),h.current=R,R.stateNode=h,R.memoizedState={element:b,isDehydrated:v,cache:null,transitions:null},xo(R),h}function Kf(h){if(!h)return Nt;h=h._reactInternals;e:{if(D(h)!==h||h.tag!==1)throw Error(l(170));var u=h;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(gt(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(l(171))}if(h.tag===1){var v=h.type;if(gt(v))return Si(h,v,u)}return u}function Zf(h){var u=h._reactInternals;if(u===void 0)throw typeof h.render=="function"?Error(l(188)):(h=Object.keys(h).join(","),Error(l(268,h)));return h=ee(u),h===null?null:h.stateNode}function Aa(h,u){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var v=h.retryLane;h.retryLane=v!==0&&v<u?v:u}}function ql(h,u){Aa(h,u),(h=h.alternate)&&Aa(h,u)}function Pu(h){return h=ee(h),h===null?null:h.stateNode}function Jf(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var u=fn();Ti(h,134217728,u),ql(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var u=fn(),v=Ya(h);Ti(h,v,u),ql(h,v)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var u=h.stateNode;if(u.current.memoizedState.isDehydrated){var v=ir(u.pendingLanes);v!==0&&(ar(u,v|1),Yi(u,$n()),(Kt&6)===0&&(Xs(),ba()))}break;case 13:var b=fn();Bo(function(){return Ti(h,1,b)}),ql(h,1)}},t.batchedUpdates=function(h,u){var v=Kt;Kt|=1;try{return h(u)}finally{Kt=v,Kt===0&&(Xs(),Wh&&ba())}},t.createComponentSelector=function(h){return{$$typeof:Ul,value:h}},t.createContainer=function(h,u,v,b,E,R,q){return qf(h,u,!1,null,v,b,E,R,q)},t.createHasPseudoClassSelector=function(h){return{$$typeof:js,value:h}},t.createHydrationContainer=function(h,u,v,b,E,R,q,se,Ee){return h=qf(v,b,!0,h,E,R,q,se,Ee),h.context=Kf(null),v=h.current,b=fn(),E=Ya(v),R=br(b,E),R.callback=u??null,es(v,R),h.current.lanes=E,_s(h,E,b),Yi(h,b),h},t.createPortal=function(h,u,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:b==null?null:""+b,children:h,containerInfo:u,implementation:v}},t.createRoleSelector=function(h){return{$$typeof:Vs,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Pr,value:h}},t.createTextSelector=function(h){return{$$typeof:Do,value:h}},t.deferredUpdates=function(h){var u=tn,v=bn.transition;try{return bn.transition=null,tn=16,h()}finally{tn=u,bn.transition=v}},t.discreteUpdates=function(h,u,v,b,E){var R=tn,q=bn.transition;try{return bn.transition=null,tn=1,h(u,v,b,E)}finally{tn=R,bn.transition=q,Kt===0&&Xs()}},t.findAllNodes=Lr,t.findBoundingRects=function(h,u){if(!ot)throw Error(l(363));u=Lr(h,u),h=[];for(var v=0;v<u.length;v++)h.push(ut(u[v]));for(u=h.length-1;0<u;u--){v=h[u];for(var b=v.x,E=b+v.width,R=v.y,q=R+v.height,se=u-1;0<=se;se--)if(u!==se){var Ee=h[se],qe=Ee.x,_t=qe+Ee.width,Xt=Ee.y,Ot=Xt+Ee.height;if(b>=qe&&R>=Xt&&E<=_t&&q<=Ot){h.splice(u,1);break}else if(b!==qe||v.width!==Ee.width||Ot<R||Xt>q){if(!(R!==Xt||v.height!==Ee.height||_t<b||qe>E)){qe>b&&(Ee.width+=qe-b,Ee.x=b),_t<E&&(Ee.width=E-qe),h.splice(u,1);break}}else{Xt>R&&(Ee.height+=Xt-R,Ee.y=R),Ot<q&&(Ee.height=q-Xt),h.splice(u,1);break}}}return h},t.findHostInstance=Zf,t.findHostInstanceWithNoPortals=function(h){return h=V(h),h=h!==null?pe(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return Zf(h)},t.flushControlled=function(h){var u=Kt;Kt|=1;var v=bn.transition,b=tn;try{bn.transition=null,tn=1,h()}finally{tn=b,bn.transition=v,Kt=u,Kt===0&&(Xs(),ba())}},t.flushPassiveEffects=cr,t.flushSync=Bo,t.focusWithin=function(h,u){if(!ot)throw Error(l(363));for(h=Fl(h),u=la(h,u),u=Array.from(u),h=0;h<u.length;){var v=u[h++];if(!O(v)){if(v.tag===5&&Te(v.stateNode))return!0;for(v=v.child;v!==null;)u.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return tn},t.getFindAllNodesFailureDescription=function(h,u){if(!ot)throw Error(l(363));var v=0,b=[];h=[Fl(h),0];for(var E=0;E<h.length;){var R=h[E++],q=h[E++],se=u[q];if((R.tag!==5||!O(R))&&(Bl(R,se)&&(b.push(ls(se)),q++,q>v&&(v=q)),q<u.length))for(R=R.child;R!==null;)h.push(R,q),R=R.sibling}if(v<u.length){for(h=[];v<u.length;v++)h.push(ls(u[v]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return ve(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:c.ReactCurrentDispatcher,findHostInstanceByFiber:Pu,findFiberByHostInstance:h.findFiberByHostInstance||Jf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)h=!0;else{try{gl=u.inject(h),rr=u}catch{}h=!!u.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,u,v,b){if(!ot)throw Error(l(363));h=Lr(h,u);var E=Pe(h,v,b).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(h,u){var v=u._getVersion;v=v(u._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[u,v]:h.mutableSourceEagerHydrationData.push(u,v)},t.runWithPriority=function(h,u){var v=tn;try{return tn=h,u()}finally{tn=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,u,v,b){var E=u.current,R=fn(),q=Ya(E);return v=Kf(v),u.context===null?u.context=v:u.pendingContext=v,u=br(R,q),u.payload={element:h},b=b===void 0?null:b,b!==null&&(u.callback=b),es(E,u),h=Ti(E,q,R),h!==null&&Kh(h,E,q),q},t}),yy}var ib;function dI(){return ib||(ib=1,py.exports=cI()),py.exports}var fI=dI();const mI=qy(fI);var xy={exports:{}},_y={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function pI(){return ab||(ab=1,(function(r){function e(B,Q){var K=B.length;B.push(Q);e:for(;0<K;){var H=K-1>>>1,ae=B[H];if(0<i(ae,Q))B[H]=Q,B[K]=ae,K=H;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var Q=B[0],K=B.pop();if(K!==Q){B[0]=K;e:for(var H=0,ae=B.length,Re=ae>>>1;H<Re;){var Ye=2*(H+1)-1,rt=B[Ye],ce=Ye+1,we=B[ce];if(0>i(rt,K))ce<ae&&0>i(we,rt)?(B[H]=we,B[ce]=K,H=ce):(B[H]=rt,B[Ye]=K,H=Ye);else if(ce<ae&&0>i(we,K))B[H]=we,B[ce]=K,H=ce;else break e}}return Q}function i(B,Q){var K=B.sortIndex-Q.sortIndex;return K!==0?K:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var f=[],m=[],p=1,g=null,x=3,_=!1,S=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var Q=t(m);Q!==null;){if(Q.callback===null)n(m);else if(Q.startTime<=B)n(m),Q.sortIndex=Q.expirationTime,e(f,Q);else break;Q=t(m)}}function L(B){if(T=!1,I(B),!S)if(t(f)!==null)S=!0,ve(F);else{var Q=t(m);Q!==null&&Se(L,Q.startTime-B)}}function F(B,Q){S=!1,T&&(T=!1,w(G),G=-1),_=!0;var K=x;try{for(I(Q),g=t(f);g!==null&&(!(g.expirationTime>Q)||B&&!V());){var H=g.callback;if(typeof H=="function"){g.callback=null,x=g.priorityLevel;var ae=H(g.expirationTime<=Q);Q=r.unstable_now(),typeof ae=="function"?g.callback=ae:g===t(f)&&n(f),I(Q)}else n(f);g=t(f)}if(g!==null)var Re=!0;else{var Ye=t(m);Ye!==null&&Se(L,Ye.startTime-Q),Re=!1}return Re}finally{g=null,x=K,_=!1}}var N=!1,z=null,G=-1,D=5,P=-1;function V(){return!(r.unstable_now()-P<D)}function ee(){if(z!==null){var B=r.unstable_now();P=B;var Q=!0;try{Q=z(!0,B)}finally{Q?ie():(N=!1,z=null)}}else N=!1}var ie;if(typeof C=="function")ie=function(){C(ee)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,me=pe.port2;pe.port1.onmessage=ee,ie=function(){me.postMessage(null)}}else ie=function(){M(ee,0)};function ve(B){z=B,N||(N=!0,ie())}function Se(B,Q){G=M(function(){B(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_continueExecution=function(){S||_||(S=!0,ve(F))},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(B){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var K=x;x=Q;try{return B()}finally{x=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=x;x=B;try{return Q()}finally{x=K}},r.unstable_scheduleCallback=function(B,Q,K){var H=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?H+K:H):K=H,B){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=K+ae,B={id:p++,callback:Q,priorityLevel:B,startTime:K,expirationTime:ae,sortIndex:-1},K>H?(B.sortIndex=K,e(m,B),t(f)===null&&B===t(m)&&(T?(w(G),G=-1):T=!0,Se(L,K-H))):(B.sortIndex=ae,e(f,B),S||_||(S=!0,ve(F))),B},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(B){var Q=x;return function(){var K=x;x=Q;try{return B.apply(this,arguments)}finally{x=K}}}})(_y)),_y}var rb;function gI(){return rb||(rb=1,xy.exports=pI()),xy.exports}var sb=gI();const N0={},vI=r=>void Object.assign(N0,r);function yI(r,e){function t(p,{args:g=[],attach:x,..._},S){let T=`${p[0].toUpperCase()}${p.slice(1)}`,M;if(p==="primitive"){if(_.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const w=_.object;M=sc(w,{type:p,root:S,attach:x,primitive:!0})}else{const w=N0[T];if(!w)throw new Error(`R3F: ${T} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");M=sc(new w(...g),{type:p,root:S,attach:x,memoizedProps:{args:g}})}return M.__r3f.attach===void 0&&(M.isBufferGeometry?M.__r3f.attach="geometry":M.isMaterial&&(M.__r3f.attach="material")),T!=="inject"&&Sy(M,_),M}function n(p,g){let x=!1;if(g){var _,S;(_=g.__r3f)!=null&&_.attach?wy(p,g,g.__r3f.attach):g.isObject3D&&p.isObject3D&&(p.add(g),x=!0),x||(S=p.__r3f)==null||S.objects.push(g),g.__r3f||sc(g,{}),g.__r3f.parent=p,Yy(g),oc(g)}}function i(p,g,x){let _=!1;if(g){var S,T;if((S=g.__r3f)!=null&&S.attach)wy(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){g.parent=p,g.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:g});const M=p.children.filter(C=>C!==g),w=M.indexOf(x);p.children=[...M.slice(0,w),g,...M.slice(w)],_=!0}_||(T=p.__r3f)==null||T.objects.push(g),g.__r3f||sc(g,{}),g.__r3f.parent=p,Yy(g),oc(g)}}function s(p,g,x=!1){p&&[...p].forEach(_=>l(g,_,x))}function l(p,g,x){if(g){var _,S,T;if(g.__r3f&&(g.__r3f.parent=null),(_=p.__r3f)!=null&&_.objects&&(p.__r3f.objects=p.__r3f.objects.filter(L=>L!==g)),(S=g.__r3f)!=null&&S.attach)cb(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){var M;p.remove(g),(M=g.__r3f)!=null&&M.root&&kI(vp(g),g)}const C=(T=g.__r3f)==null?void 0:T.primitive,I=!C&&(x===void 0?g.dispose!==null:x);if(!C){var w;s((w=g.__r3f)==null?void 0:w.objects,g,I),s(g.children,g,I)}if(delete g.__r3f,I&&g.dispose&&g.type!=="Scene"){const L=()=>{try{g.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?sb.unstable_scheduleCallback(sb.unstable_IdlePriority,L):L()}oc(p)}}function c(p,g,x,_){var S;const T=(S=p.__r3f)==null?void 0:S.parent;if(!T)return;const M=t(g,x,p.__r3f.root);if(p.children){for(const w of p.children)w.__r3f&&n(M,w);p.children=p.children.filter(w=>!w.__r3f)}p.__r3f.objects.forEach(w=>n(M,w)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||l(T,p),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),n(T,M),M.raycast&&M.__r3f.eventCount&&vp(M).getState().internal.interaction.push(M),[_,_.alternate].forEach(w=>{w!==null&&(w.stateNode=M,w.ref&&(typeof w.ref=="function"?w.ref(M):w.ref.current=M))})}const f=()=>{};return{reconciler:mI({createInstance:t,removeChild:l,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,g)=>{if(!g)return;const x=p.getState().scene;x.__r3f&&(x.__r3f.root=p,n(x,g))},removeChildFromContainer:(p,g)=>{g&&l(p.getState().scene,g)},insertInContainerBefore:(p,g,x)=>{if(!g||!x)return;const _=p.getState().scene;_.__r3f&&i(_,g,x)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var g;return!!((g=p==null?void 0:p.__r3f)!=null?g:{}).handlers},prepareUpdate(p,g,x,_){var S;if(((S=p==null?void 0:p.__r3f)!=null?S:{}).primitive&&_.object&&_.object!==p)return[!0];{const{args:M=[],children:w,...C}=_,{args:I=[],children:L,...F}=x;if(!Array.isArray(M))throw new Error("R3F: the args prop must be an array!");if(M.some((z,G)=>z!==I[G]))return[!0];const N=Rw(p,C,F,!0);return N.changes.length?[!1,N]:null}},commitUpdate(p,[g,x],_,S,T,M){g?c(p,_,T,M):Sy(p,x)},commitMount(p,g,x,_){var S;const T=(S=p.__r3f)!=null?S:{};p.raycast&&T.handlers&&T.eventCount&&vp(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>sc(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var g;const{attach:x,parent:_}=(g=p.__r3f)!=null?g:{};x&&_&&cb(_,p,x),p.isObject3D&&(p.visible=!1),oc(p)},unhideInstance(p,g){var x;const{attach:_,parent:S}=(x=p.__r3f)!=null?x:{};_&&S&&wy(S,p,_),(p.isObject3D&&g.visible==null||g.visible)&&(p.visible=!0),oc(p)},createTextInstance:f,hideTextInstance:f,unhideTextInstance:f,getCurrentEventPriority:()=>e?e():cc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&On.fun(performance.now)?performance.now:On.fun(Date.now)?Date.now:()=>0,scheduleTimeout:On.fun(setTimeout)?setTimeout:void 0,cancelTimeout:On.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Sy}}var ob,lb;const by=r=>"colorSpace"in r||"outputColorSpace"in r,kw=()=>{var r;return(r=N0.ColorManagement)!=null?r:null},Tw=r=>r&&r.isOrthographicCamera,xI=r=>r&&r.hasOwnProperty("current"),kf=typeof window<"u"&&((ob=window.document)!=null&&ob.createElement||((lb=window.navigator)==null?void 0:lb.product)==="ReactNative")?Ae.useLayoutEffect:Ae.useEffect;function Ew(r){const e=Ae.useRef(r);return kf(()=>void(e.current=r),[r]),e}function _I({set:r}){return kf(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}let Aw=class extends Ae.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};Aw.getDerivedStateFromError=()=>({error:!0});const Cw="__default",hb=new Map,bI=r=>r&&!!r.memoized&&!!r.changes;function Iw(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const Ud=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function vp(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const On={obj:r=>r===Object(r)&&!On.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(On.str(r)||On.num(r)||On.boo(r))return r===e;const s=On.obj(r);if(s&&n==="reference")return r===e;const l=On.arr(r);if(l&&t==="reference")return r===e;if((l||s)&&r===e)return!0;let c;for(c in r)if(!(c in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(c in i?e:r)if(!On.equ(r[c],e[c],{strict:i,objects:"reference"}))return!1}else for(c in i?e:r)if(r[c]!==e[c])return!1;if(On.und(c)){if(l&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function wI(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function sc(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function Xy(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,l)=>s[l],r),{target:t,key:i}}else return{target:t,key:e}}const ub=/-\d+$/;function wy(r,e,t){if(On.str(t)){if(ub.test(t)){const s=t.replace(ub,""),{target:l,key:c}=Xy(r,s);Array.isArray(l[c])||(l[c]=[])}const{target:n,key:i}=Xy(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function cb(r,e,t){var n,i;if(On.str(t)){const{target:s,key:l}=Xy(r,t),c=e.__r3f.previousAttach;c===void 0?delete s[l]:s[l]=c}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function Rw(r,{children:e,key:t,ref:n,...i},{children:s,key:l,ref:c,...f}={},m=!1){const p=r.__r3f,g=Object.entries(i),x=[];if(m){const S=Object.keys(f);for(let T=0;T<S.length;T++)i.hasOwnProperty(S[T])||g.unshift([S[T],Cw+"remove"])}g.forEach(([S,T])=>{var M;if((M=r.__r3f)!=null&&M.primitive&&S==="object"||On.equ(T,f[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return x.push([S,T,!0,[]]);let w=[];S.includes("-")&&(w=S.split("-")),x.push([S,T,!1,w]);for(const C in i){const I=i[C];C.startsWith(`${S}-`)&&x.push([C,I,!1,C.split("-")])}});const _={...i};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(_.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(_.attach=p.memoizedProps.attach),{memoized:_,changes:x}}function Sy(r,e){var t;const n=r.__r3f,i=n==null?void 0:n.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:l,changes:c}=bI(e)?e:Rw(r,e),f=n==null?void 0:n.eventCount;r.__r3f&&(r.__r3f.memoizedProps=l);for(let x=0;x<c.length;x++){let[_,S,T,M]=c[x];if(by(r)){const L="srgb",F="srgb-linear";_==="encoding"?(_="colorSpace",S=S===3001?L:F):_==="outputEncoding"&&(_="outputColorSpace",S=S===3001?L:F)}let w=r,C=w[_];if(M.length&&(C=M.reduce((I,L)=>I[L],r),!(C&&C.set))){const[I,...L]=M.reverse();w=L.reverse().reduce((F,N)=>F[N],r),_=I}if(S===Cw+"remove")if(w.constructor){let I=hb.get(w.constructor);I||(I=new w.constructor,hb.set(w.constructor,I)),S=I[_]}else S=0;if(T&&n)S?n.handlers[_]=S:delete n.handlers[_],n.eventCount=Object.keys(n.handlers).length;else if(C&&C.set&&(C.copy||C instanceof Sh)){if(Array.isArray(S))C.fromArray?C.fromArray(S):C.set(...S);else if(C.copy&&S&&S.constructor&&C.constructor===S.constructor)C.copy(S);else if(S!==void 0){var m;const I=(m=C)==null?void 0:m.isColor;!I&&C.setScalar?C.setScalar(S):C instanceof Sh&&S instanceof Sh?C.mask=S.mask:C.set(S),!kw()&&s&&!s.linear&&I&&C.convertSRGBToLinear()}}else{var p;if(w[_]=S,(p=w[_])!=null&&p.isTexture&&w[_].format===$i&&w[_].type===gr&&s){const I=w[_];by(I)&&by(s.gl)?I.colorSpace=s.gl.outputColorSpace:I.encoding=s.gl.outputEncoding}}oc(r)}if(n&&n.parent&&r.raycast&&f!==n.eventCount){const x=vp(r).getState().internal,_=x.interaction.indexOf(r);_>-1&&x.interaction.splice(_,1),n.eventCount&&x.interaction.push(r)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(t=r.__r3f)!=null&&t.parent&&Yy(r),r}function oc(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function Yy(r){r.onUpdate==null||r.onUpdate(r)}function SI(r,e){r.manual||(Tw(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function hp(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function MI(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return cc.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return cc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return cc.ContinuousEventPriority;default:return cc.DefaultEventPriority}}function Pw(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function kI(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{Pw(t.capturedMap,e,n,i)})}function TI(r){function e(f){const{internal:m}=r.getState(),p=f.offsetX-m.initialClick[0],g=f.offsetY-m.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(f){return f.filter(m=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=m.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function n(f,m){const p=r.getState(),g=new Set,x=[],_=m?m(p.internal.interaction):p.internal.interaction;for(let w=0;w<_.length;w++){const C=Ud(_[w]);C&&(C.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(f,p);function S(w){const C=Ud(w);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var I;C.events.compute==null||C.events.compute(f,C,(I=C.previousRoot)==null?void 0:I.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(w,!0):[]}let T=_.flatMap(S).sort((w,C)=>{const I=Ud(w.object),L=Ud(C.object);return!I||!L?w.distance-C.distance:L.events.priority-I.events.priority||w.distance-C.distance}).filter(w=>{const C=hp(w);return g.has(C)?!1:(g.add(C),!0)});p.events.filter&&(T=p.events.filter(T,p));for(const w of T){let C=w.object;for(;C;){var M;(M=C.__r3f)!=null&&M.eventCount&&x.push({...w,eventObject:C}),C=C.parent}}if("pointerId"in f&&p.internal.capturedMap.has(f.pointerId))for(let w of p.internal.capturedMap.get(f.pointerId).values())g.has(hp(w.intersection))||x.push(w.intersection);return x}function i(f,m,p,g){const x=r.getState();if(f.length){const _={stopped:!1};for(const S of f){const T=Ud(S.object)||x,{raycaster:M,pointer:w,camera:C,internal:I}=T,L=new Y(w.x,w.y,0).unproject(C),F=P=>{var V,ee;return(V=(ee=I.capturedMap.get(P))==null?void 0:ee.has(S.eventObject))!=null?V:!1},N=P=>{const V={intersection:S,target:m.target};I.capturedMap.has(P)?I.capturedMap.get(P).set(S.eventObject,V):I.capturedMap.set(P,new Map([[S.eventObject,V]])),m.target.setPointerCapture(P)},z=P=>{const V=I.capturedMap.get(P);V&&Pw(I.capturedMap,S.eventObject,V,P)};let G={};for(let P in m){let V=m[P];typeof V!="function"&&(G[P]=V)}let D={...S,...G,pointer:w,intersections:f,stopped:_.stopped,delta:p,unprojectedPoint:L,ray:M.ray,camera:C,stopPropagation(){const P="pointerId"in m&&I.capturedMap.get(m.pointerId);if((!P||P.has(S.eventObject))&&(D.stopped=_.stopped=!0,I.hovered.size&&Array.from(I.hovered.values()).find(V=>V.eventObject===S.eventObject))){const V=f.slice(0,f.indexOf(S));s([...V,S])}},target:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:z},currentTarget:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:z},nativeEvent:m};if(g(D),_.stopped===!0)break}}return f}function s(f){const{internal:m}=r.getState();for(const p of m.hovered.values())if(!f.length||!f.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const x=p.eventObject.__r3f,_=x==null?void 0:x.handlers;if(m.hovered.delete(hp(p)),x!=null&&x.eventCount){const S={...p,intersections:f};_.onPointerOut==null||_.onPointerOut(S),_.onPointerLeave==null||_.onPointerLeave(S)}}}function l(f,m){for(let p=0;p<m.length;p++){const g=m[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return m=>{const{internal:p}=r.getState();"pointerId"in m&&p.capturedMap.has(m.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(m.pointerId)&&(p.capturedMap.delete(m.pointerId),s([]))})}}return function(p){const{onPointerMissed:g,internal:x}=r.getState();x.lastEvent.current=p;const _=f==="onPointerMove",S=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",M=n(p,_?t:void 0),w=S?e(p):0;f==="onPointerDown"&&(x.initialClick=[p.offsetX,p.offsetY],x.initialHits=M.map(I=>I.eventObject)),S&&!M.length&&w<=2&&(l(p,x.interaction),g&&g(p)),_&&s(M);function C(I){const L=I.eventObject,F=L.__r3f,N=F==null?void 0:F.handlers;if(F!=null&&F.eventCount)if(_){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const z=hp(I),G=x.hovered.get(z);G?G.stopped&&I.stopPropagation():(x.hovered.set(z,I),N.onPointerOver==null||N.onPointerOver(I),N.onPointerEnter==null||N.onPointerEnter(I))}N.onPointerMove==null||N.onPointerMove(I)}else{const z=N[f];z?(!S||x.initialHits.includes(L))&&(l(p,x.interaction.filter(G=>!x.initialHits.includes(G))),z(I)):S&&x.initialHits.includes(L)&&l(p,x.interaction.filter(G=>!x.initialHits.includes(G)))}}i(M,p,w,C)}}return{handlePointer:c}}const Lw=r=>!!(r!=null&&r.render),Nw=Ae.createContext(null),EI=(r,e)=>{const t=lI((c,f)=>{const m=new Y,p=new Y,g=new Y;function x(w=f().camera,C=p,I=f().size){const{width:L,height:F,top:N,left:z}=I,G=L/F;C.isVector3?g.copy(C):g.set(...C);const D=w.getWorldPosition(m).distanceTo(g);if(Tw(w))return{width:L/w.zoom,height:F/w.zoom,top:N,left:z,factor:1,distance:D,aspect:G};{const P=w.fov*Math.PI/180,V=2*Math.tan(P/2)*D,ee=V*(L/F);return{width:ee,height:V,top:N,left:z,factor:L/ee,distance:D,aspect:G}}}let _;const S=w=>c(C=>({performance:{...C.performance,current:w}})),T=new Ce;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(w=1)=>r(f(),w),advance:(w,C)=>e(w,C,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new C0,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=f();_&&clearTimeout(_),w.performance.current!==w.performance.min&&S(w.performance.min),_=setTimeout(()=>S(f().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:w=>c(C=>({...C,events:{...C.events,...w}})),setSize:(w,C,I,L,F)=>{const N=f().camera,z={width:w,height:C,top:L||0,left:F||0,updateStyle:I};c(G=>({size:z,viewport:{...G.viewport,...x(N,p,z)}}))},setDpr:w=>c(C=>{const I=Iw(w);return{viewport:{...C.viewport,dpr:I,initialDpr:C.viewport.initialDpr||I}}}),setFrameloop:(w="always")=>{const C=f().clock;C.stop(),C.elapsedTime=0,w!=="never"&&(C.start(),C.elapsedTime=0),c(()=>({frameloop:w}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Ae.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(w,C,I)=>{const L=f().internal;return L.priority=L.priority+(C>0?1:0),L.subscribers.push({ref:w,priority:C,store:I}),L.subscribers=L.subscribers.sort((F,N)=>F.priority-N.priority),()=>{const F=f().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(C>0?1:0),F.subscribers=F.subscribers.filter(N=>N.ref!==w))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,l=n.camera;return t.subscribe(()=>{const{camera:c,size:f,viewport:m,gl:p,set:g}=t.getState();if(f.width!==i.width||f.height!==i.height||m.dpr!==s){var x;i=f,s=m.dpr,SI(c,f),p.setPixelRatio(m.dpr);const _=(x=f.updateStyle)!=null?x:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(f.width,f.height,_)}c!==l&&(l=c,g(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>r(c)),t};let up,AI=new Set,CI=new Set,II=new Set;function My(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function Fd(r,e){switch(r){case"before":return My(AI,e);case"after":return My(CI,e);case"tail":return My(II,e)}}let ky,Ty;function Ey(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),ky=e.internal.subscribers,up=0;up<ky.length;up++)Ty=ky[up],Ty.ref.current(Ty.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function RI(r){let e=!1,t=!1,n,i,s;function l(m){i=requestAnimationFrame(l),e=!0,n=0,Fd("before",m),t=!0;for(const g of r.values()){var p;s=g.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(n+=Ey(m,s))}if(t=!1,Fd("after",m),n===0)return Fd("tail",m),e=!1,cancelAnimationFrame(i)}function c(m,p=1){var g;if(!m)return r.forEach(x=>c(x.store.getState(),p));(g=m.gl.xr)!=null&&g.isPresenting||!m.internal.active||m.frameloop==="never"||(p>1?m.internal.frames=Math.min(60,m.internal.frames+p):t?m.internal.frames=2:m.internal.frames=1,e||(e=!0,requestAnimationFrame(l)))}function f(m,p=!0,g,x){if(p&&Fd("before",m),g)Ey(m,g,x);else for(const _ of r.values())Ey(m,_.store.getState());p&&Fd("after",m)}return{loop:l,invalidate:c,advance:f}}function Dw(){const r=Ae.useContext(Nw);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Qa(r=t=>t,e){return Dw()(r,e)}function Ac(r,e=0){const t=Dw(),n=t.getState().internal.subscribe,i=Ew(r);return kf(()=>n(i,e,t),[e,n,t]),null}const Sc=new Map,{invalidate:db,advance:fb}=RI(Sc),{reconciler:sg,applyProps:ac}=yI(Sc,MI),rc={objects:"shallow",strict:!1},PI=(r,e)=>{const t=typeof r=="function"?r(e):r;return Lw(t)?t:new Mw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function LI(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:l,updateStyle:c=t}=e;return{width:n,height:i,top:s,left:l,updateStyle:c}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:l}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:l,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function NI(r){const e=Sc.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||EI(db,fb),l=t||sg.createContainer(s,cc.ConcurrentRoot,null,!1,null,"",i,null);e||Sc.set(r,{fiber:l,store:s});let c,f=!1,m;return{configure(p={}){let{gl:g,size:x,scene:_,events:S,onCreated:T,shadows:M=!1,linear:w=!1,flat:C=!1,legacy:I=!1,orthographic:L=!1,frameloop:F="always",dpr:N=[1,2],performance:z,raycaster:G,camera:D,onPointerMissed:P}=p,V=s.getState(),ee=V.gl;V.gl||V.set({gl:ee=PI(g,r)});let ie=V.raycaster;ie||V.set({raycaster:ie=new gw});const{params:pe,...me}=G||{};if(On.equ(me,ie,rc)||ac(ie,{...me}),On.equ(pe,ie.params,rc)||ac(ie,{params:{...ie.params,...pe}}),!V.camera||V.camera===m&&!On.equ(m,D,rc)){m=D;const K=D instanceof vf,H=K?D:L?new al(0,0,0,0,.1,1e3):new ii(75,0,.1,1e3);K||(H.position.z=5,D&&(ac(H,D),("aspect"in D||"left"in D||"right"in D||"bottom"in D||"top"in D)&&(H.manual=!0,H.updateProjectionMatrix())),!V.camera&&!(D!=null&&D.rotation)&&H.lookAt(0,0,0)),V.set({camera:H}),ie.camera=H}if(!V.scene){let K;_!=null&&_.isScene?K=_:(K=new h0,_&&ac(K,_)),V.set({scene:sc(K)})}if(!V.xr){var ve;const K=(Re,Ye)=>{const rt=s.getState();rt.frameloop!=="never"&&fb(Re,!0,rt,Ye)},H=()=>{const Re=s.getState();Re.gl.xr.enabled=Re.gl.xr.isPresenting,Re.gl.xr.setAnimationLoop(Re.gl.xr.isPresenting?K:null),Re.gl.xr.isPresenting||db(Re)},ae={connect(){const Re=s.getState().gl;Re.xr.addEventListener("sessionstart",H),Re.xr.addEventListener("sessionend",H)},disconnect(){const Re=s.getState().gl;Re.xr.removeEventListener("sessionstart",H),Re.xr.removeEventListener("sessionend",H)}};typeof((ve=ee.xr)==null?void 0:ve.addEventListener)=="function"&&ae.connect(),V.set({xr:ae})}if(ee.shadowMap){const K=ee.shadowMap.enabled,H=ee.shadowMap.type;if(ee.shadowMap.enabled=!!M,On.boo(M))ee.shadowMap.type=Vd;else if(On.str(M)){var Se;const ae={basic:kb,percentage:ug,soft:Vd,variance:Wr};ee.shadowMap.type=(Se=ae[M])!=null?Se:Vd}else On.obj(M)&&Object.assign(ee.shadowMap,M);(K!==ee.shadowMap.enabled||H!==ee.shadowMap.type)&&(ee.shadowMap.needsUpdate=!0)}const B=kw();B&&("enabled"in B?B.enabled=!I:"legacyMode"in B&&(B.legacyMode=I)),f||ac(ee,{outputEncoding:w?3e3:3001,toneMapping:C?vs:Ky}),V.legacy!==I&&V.set(()=>({legacy:I})),V.linear!==w&&V.set(()=>({linear:w})),V.flat!==C&&V.set(()=>({flat:C})),g&&!On.fun(g)&&!Lw(g)&&!On.equ(g,ee,rc)&&ac(ee,g),S&&!V.events.handlers&&V.set({events:S(s)});const Q=LI(r,x);return On.equ(Q,V.size,rc)||V.setSize(Q.width,Q.height,Q.updateStyle,Q.top,Q.left),N&&V.viewport.dpr!==Iw(N)&&V.setDpr(N),V.frameloop!==F&&V.setFrameloop(F),V.onPointerMissed||V.set({onPointerMissed:P}),z&&!On.equ(z,V.performance,rc)&&V.set(K=>({performance:{...K.performance,...z}})),c=T,f=!0,this},render(p){return f||this.configure(),sg.updateContainer(te.jsx(DI,{store:s,children:p,onCreated:c,rootElement:r}),l,null,()=>{}),s},unmount(){Ow(r)}}}function DI({store:r,children:e,onCreated:t,rootElement:n}){return kf(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),te.jsx(Nw.Provider,{value:r,children:e})}function Ow(r,e){const t=Sc.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),sg.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,l,c,f;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(l=s.renderLists)==null||l.dispose==null||l.dispose(),(c=i.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=i.gl)!=null&&f.xr&&i.xr.disconnect(),wI(i),Sc.delete(r)}catch{}},500)})}}sg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ae.version});const Ay={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function OI(r){const{handlePointer:e}=TI(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(Ay).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(l=>({events:{...l.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([l,c])=>{const[f,m]=Ay[l];t.addEventListener(f,c,{passive:m})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,l])=>{if(n&&n.connected instanceof HTMLElement){const[c]=Ay[s];n.connected.removeEventListener(c,l)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function mb(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function UI({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=Ae.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=Ae.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),f=r?typeof r=="number"?r:r.scroll:null,m=r?typeof r=="number"?r:r.resize:null,p=Ae.useRef(!1);Ae.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,x,_]=Ae.useMemo(()=>{const w=()=>{if(!c.current.element)return;const{left:C,top:I,width:L,height:F,bottom:N,right:z,x:G,y:D}=c.current.element.getBoundingClientRect(),P={left:C,top:I,width:L,height:F,bottom:N,right:z,x:G,y:D};c.current.element instanceof HTMLElement&&n&&(P.height=c.current.element.offsetHeight,P.width=c.current.element.offsetWidth),Object.freeze(P),p.current&&!jI(c.current.lastBounds,P)&&l(c.current.lastBounds=P)};return[w,m?mb(w,m):w,f?mb(w,f):w]},[l,n,f,m]);function S(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",_,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function T(){c.current.element&&(c.current.resizeObserver=new i(_),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(w=>w.addEventListener("scroll",_,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const M=w=>{!w||w===c.current.element||(S(),c.current.element=w,c.current.scrollContainers=Uw(w),T())};return BI(_,!!e),FI(x),Ae.useEffect(()=>{S(),T()},[e,_,x]),Ae.useEffect(()=>S,[]),[M,s,g]}function FI(r){Ae.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function BI(r,e){Ae.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function Uw(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...Uw(r.parentElement)]}const zI=["x","y","top","bottom","left","right","width","height"],jI=(r,e)=>zI.every(t=>r[t]===e[t]);var VI=Object.defineProperty,HI=Object.defineProperties,GI=Object.getOwnPropertyDescriptors,pb=Object.getOwnPropertySymbols,WI=Object.prototype.hasOwnProperty,XI=Object.prototype.propertyIsEnumerable,gb=(r,e,t)=>e in r?VI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vb=(r,e)=>{for(var t in e||(e={}))WI.call(e,t)&&gb(r,t,e[t]);if(pb)for(var t of pb(e))XI.call(e,t)&&gb(r,t,e[t]);return r},YI=(r,e)=>HI(r,GI(e)),yb,xb;typeof window<"u"&&((yb=window.document)!=null&&yb.createElement||((xb=window.navigator)==null?void 0:xb.product)==="ReactNative")?Ae.useLayoutEffect:Ae.useEffect;function Fw(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=Fw(n,e,t);if(i)return i;n=n.sibling}}function Bw(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const _b=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=_b;return}return _b.apply(this,arguments)};const D0=Bw(Ae.createContext(null));class zw extends Ae.Component{render(){return Ae.createElement(D0.Provider,{value:this._reactInternals},this.props.children)}}function qI(){const r=Ae.useContext(D0);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ae.useId();return Ae.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const i=Fw(n,!1,s=>{let l=s.memoizedState;for(;l;){if(l.memoizedState===e)return!0;l=l.next}});if(i)return i}},[r,e])}function KI(){const r=qI(),[e]=Ae.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==D0&&!e.has(i)&&e.set(i,Ae.useContext(Bw(i)))}t=t.return}return e}function ZI(){const r=KI();return Ae.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>Ae.createElement(e,null,Ae.createElement(t.Provider,YI(vb({},n),{value:r.get(t)}))),e=>Ae.createElement(zw,vb({},e))),[r])}const JI=Ae.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:l=OI,eventSource:c,eventPrefix:f,shadows:m,linear:p,flat:g,legacy:x,orthographic:_,frameloop:S,dpr:T,performance:M,raycaster:w,camera:C,scene:I,onPointerMissed:L,onCreated:F,...N},z){Ae.useMemo(()=>vI(iI),[]);const G=ZI(),[D,P]=UI({scroll:!0,debounce:{scroll:50,resize:0},...n}),V=Ae.useRef(null),ee=Ae.useRef(null);Ae.useImperativeHandle(z,()=>V.current);const ie=Ew(L),[pe,me]=Ae.useState(!1),[ve,Se]=Ae.useState(!1);if(pe)throw pe;if(ve)throw ve;const B=Ae.useRef(null);kf(()=>{const K=V.current;P.width>0&&P.height>0&&K&&(B.current||(B.current=NI(K)),B.current.configure({gl:s,events:l,shadows:m,linear:p,flat:g,legacy:x,orthographic:_,frameloop:S,dpr:T,performance:M,raycaster:w,camera:C,scene:I,size:P,onPointerMissed:(...H)=>ie.current==null?void 0:ie.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(c?xI(c)?c.current:c:ee.current),f&&H.setEvents({compute:(ae,Re)=>{const Ye=ae[f+"X"],rt=ae[f+"Y"];Re.pointer.set(Ye/Re.size.width*2-1,-(rt/Re.size.height)*2+1),Re.raycaster.setFromCamera(Re.pointer,Re.camera)}}),F==null||F(H)}}),B.current.render(te.jsx(G,{children:te.jsx(Aw,{set:Se,children:te.jsx(Ae.Suspense,{fallback:te.jsx(_I,{set:me}),children:e??null})})})))}),Ae.useEffect(()=>{const K=V.current;if(K)return()=>Ow(K)},[]);const Q=c?"none":"auto";return te.jsx("div",{ref:ee,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...i},...N,children:te.jsx("div",{ref:D,style:{width:"100%",height:"100%"},children:te.jsx("canvas",{ref:V,style:{display:"block"},children:t})})})}),QI=Ae.forwardRef(function(e,t){return te.jsx(zw,{children:te.jsx(JI,{...e,ref:t})})});function og(){return og=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},og.apply(null,arguments)}var $I=Object.defineProperty,eR=(r,e,t)=>e in r?$I(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,tR=(r,e,t)=>(eR(r,e+"",t),t);class nR{constructor(){tR(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,l=i.length;s<l;s++)i[s].call(this,e);e.target=null}}}var iR=Object.defineProperty,aR=(r,e,t)=>e in r?iR(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Bt=(r,e,t)=>(aR(r,typeof e!="symbol"?e+"":e,t),t);const cp=new Ch,bb=new ro,rR=Math.cos(70*(Math.PI/180)),wb=(r,e)=>(r%e+e)%e;let sR=class extends nR{constructor(e,t){super(),Bt(this,"object"),Bt(this,"domElement"),Bt(this,"enabled",!0),Bt(this,"target",new Y),Bt(this,"minDistance",0),Bt(this,"maxDistance",1/0),Bt(this,"minZoom",0),Bt(this,"maxZoom",1/0),Bt(this,"minPolarAngle",0),Bt(this,"maxPolarAngle",Math.PI),Bt(this,"minAzimuthAngle",-1/0),Bt(this,"maxAzimuthAngle",1/0),Bt(this,"enableDamping",!1),Bt(this,"dampingFactor",.05),Bt(this,"enableZoom",!0),Bt(this,"zoomSpeed",1),Bt(this,"enableRotate",!0),Bt(this,"rotateSpeed",1),Bt(this,"enablePan",!0),Bt(this,"panSpeed",1),Bt(this,"screenSpacePanning",!0),Bt(this,"keyPanSpeed",7),Bt(this,"zoomToCursor",!1),Bt(this,"autoRotate",!1),Bt(this,"autoRotateSpeed",2),Bt(this,"reverseOrbit",!1),Bt(this,"reverseHorizontalOrbit",!1),Bt(this,"reverseVerticalOrbit",!1),Bt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Bt(this,"mouseButtons",{LEFT:mh.ROTATE,MIDDLE:mh.DOLLY,RIGHT:mh.PAN}),Bt(this,"touches",{ONE:ph.ROTATE,TWO:ph.DOLLY_PAN}),Bt(this,"target0"),Bt(this,"position0"),Bt(this,"zoom0"),Bt(this,"_domElementKeyEvents",null),Bt(this,"getPolarAngle"),Bt(this,"getAzimuthalAngle"),Bt(this,"setPolarAngle"),Bt(this,"setAzimuthalAngle"),Bt(this,"getDistance"),Bt(this,"getZoomScale"),Bt(this,"listenToKeyEvents"),Bt(this,"stopListenToKeyEvents"),Bt(this,"saveState"),Bt(this,"reset"),Bt(this,"update"),Bt(this,"connect"),Bt(this,"dispose"),Bt(this,"dollyIn"),Bt(this,"dollyOut"),Bt(this,"getScale"),Bt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=$=>{let ye=wb($,2*Math.PI),je=p.phi;je<0&&(je+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let J=Math.abs(ye-je);2*Math.PI-J<J&&(ye<je?ye+=2*Math.PI:je+=2*Math.PI),g.phi=ye-je,n.update()},this.setAzimuthalAngle=$=>{let ye=wb($,2*Math.PI),je=p.theta;je<0&&(je+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let J=Math.abs(ye-je);2*Math.PI-J<J&&(ye<je?ye+=2*Math.PI:je+=2*Math.PI),g.theta=ye-je,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=$=>{$.addEventListener("keydown",Me),this._domElementKeyEvents=$},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Me),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),f=c.NONE},this.update=(()=>{const $=new Y,ye=new Y(0,1,0),je=new ea().setFromUnitVectors(e.up,ye),J=je.clone().invert(),Ve=new Y,He=new ea,Ge=2*Math.PI;return function(){const Ie=n.object.position;je.setFromUnitVectors(e.up,ye),J.copy(je).invert(),$.copy(Ie).sub(n.target),$.applyQuaternion(je),p.setFromVector3($),n.autoRotate&&f===c.NONE&&pe(ee()),n.enableDamping?(p.theta+=g.theta*n.dampingFactor,p.phi+=g.phi*n.dampingFactor):(p.theta+=g.theta,p.phi+=g.phi);let lt=n.minAzimuthAngle,Pt=n.maxAzimuthAngle;isFinite(lt)&&isFinite(Pt)&&(lt<-Math.PI?lt+=Ge:lt>Math.PI&&(lt-=Ge),Pt<-Math.PI?Pt+=Ge:Pt>Math.PI&&(Pt-=Ge),lt<=Pt?p.theta=Math.max(lt,Math.min(Pt,p.theta)):p.theta=p.theta>(lt+Pt)/2?Math.max(lt,p.theta):Math.min(Pt,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(_,n.dampingFactor):n.target.add(_),n.zoomToCursor&&D||n.object.isOrthographicCamera?p.radius=Re(p.radius):p.radius=Re(p.radius*x),$.setFromSpherical(p),$.applyQuaternion(J),Ie.copy(n.target).add($),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,_.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),_.set(0,0,0));let hn=!1;if(n.zoomToCursor&&D){let en=null;if(n.object instanceof ii&&n.object.isPerspectiveCamera){const Xn=$.length();en=Re(Xn*x);const Un=Xn-en;n.object.position.addScaledVector(z,Un),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Xn=new Y(G.x,G.y,0);Xn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix(),hn=!0;const Un=new Y(G.x,G.y,0);Un.unproject(n.object),n.object.position.sub(Un).add(Xn),n.object.updateMatrixWorld(),en=$.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;en!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(en).add(n.object.position):(cp.origin.copy(n.object.position),cp.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(cp.direction))<rR?e.lookAt(n.target):(bb.setFromNormalAndCoplanarPoint(n.object.up,n.target),cp.intersectPlane(bb,n.target))))}else n.object instanceof al&&n.object.isOrthographicCamera&&(hn=x!==1,hn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix()));return x=1,D=!1,hn||Ve.distanceToSquared(n.object.position)>m||8*(1-He.dot(n.object.quaternion))>m?(n.dispatchEvent(i),Ve.copy(n.object.position),He.copy(n.object.quaternion),hn=!1,!0):!1}})(),this.connect=$=>{n.domElement=$,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",kt),n.domElement.addEventListener("pointerdown",ut),n.domElement.addEventListener("pointercancel",O),n.domElement.addEventListener("wheel",Pe)},this.dispose=()=>{var $,ye,je,J,Ve,He;n.domElement&&(n.domElement.style.touchAction="auto"),($=n.domElement)==null||$.removeEventListener("contextmenu",kt),(ye=n.domElement)==null||ye.removeEventListener("pointerdown",ut),(je=n.domElement)==null||je.removeEventListener("pointercancel",O),(J=n.domElement)==null||J.removeEventListener("wheel",Pe),(Ve=n.domElement)==null||Ve.ownerDocument.removeEventListener("pointermove",W),(He=n.domElement)==null||He.ownerDocument.removeEventListener("pointerup",O),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Me)};const n=this,i={type:"change"},s={type:"start"},l={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=c.NONE;const m=1e-6,p=new Vy,g=new Vy;let x=1;const _=new Y,S=new Ce,T=new Ce,M=new Ce,w=new Ce,C=new Ce,I=new Ce,L=new Ce,F=new Ce,N=new Ce,z=new Y,G=new Ce;let D=!1;const P=[],V={};function ee(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ie(){return Math.pow(.95,n.zoomSpeed)}function pe($){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=$:g.theta-=$}function me($){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=$:g.phi-=$}const ve=(()=>{const $=new Y;return function(je,J){$.setFromMatrixColumn(J,0),$.multiplyScalar(-je),_.add($)}})(),Se=(()=>{const $=new Y;return function(je,J){n.screenSpacePanning===!0?$.setFromMatrixColumn(J,1):($.setFromMatrixColumn(J,0),$.crossVectors(n.object.up,$)),$.multiplyScalar(je),_.add($)}})(),B=(()=>{const $=new Y;return function(je,J){const Ve=n.domElement;if(Ve&&n.object instanceof ii&&n.object.isPerspectiveCamera){const He=n.object.position;$.copy(He).sub(n.target);let Ge=$.length();Ge*=Math.tan(n.object.fov/2*Math.PI/180),ve(2*je*Ge/Ve.clientHeight,n.object.matrix),Se(2*J*Ge/Ve.clientHeight,n.object.matrix)}else Ve&&n.object instanceof al&&n.object.isOrthographicCamera?(ve(je*(n.object.right-n.object.left)/n.object.zoom/Ve.clientWidth,n.object.matrix),Se(J*(n.object.top-n.object.bottom)/n.object.zoom/Ve.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function Q($){n.object instanceof ii&&n.object.isPerspectiveCamera||n.object instanceof al&&n.object.isOrthographicCamera?x=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function K($){Q(x/$)}function H($){Q(x*$)}function ae($){if(!n.zoomToCursor||!n.domElement)return;D=!0;const ye=n.domElement.getBoundingClientRect(),je=$.clientX-ye.left,J=$.clientY-ye.top,Ve=ye.width,He=ye.height;G.x=je/Ve*2-1,G.y=-(J/He)*2+1,z.set(G.x,G.y,1).unproject(n.object).sub(n.object.position).normalize()}function Re($){return Math.max(n.minDistance,Math.min(n.maxDistance,$))}function Ye($){S.set($.clientX,$.clientY)}function rt($){ae($),L.set($.clientX,$.clientY)}function ce($){w.set($.clientX,$.clientY)}function we($){T.set($.clientX,$.clientY),M.subVectors(T,S).multiplyScalar(n.rotateSpeed);const ye=n.domElement;ye&&(pe(2*Math.PI*M.x/ye.clientHeight),me(2*Math.PI*M.y/ye.clientHeight)),S.copy(T),n.update()}function Be($){F.set($.clientX,$.clientY),N.subVectors(F,L),N.y>0?K(ie()):N.y<0&&H(ie()),L.copy(F),n.update()}function it($){C.set($.clientX,$.clientY),I.subVectors(C,w).multiplyScalar(n.panSpeed),B(I.x,I.y),w.copy(C),n.update()}function st($){ae($),$.deltaY<0?H(ie()):$.deltaY>0&&K(ie()),n.update()}function Lt($){let ye=!1;switch($.code){case n.keys.UP:B(0,n.keyPanSpeed),ye=!0;break;case n.keys.BOTTOM:B(0,-n.keyPanSpeed),ye=!0;break;case n.keys.LEFT:B(n.keyPanSpeed,0),ye=!0;break;case n.keys.RIGHT:B(-n.keyPanSpeed,0),ye=!0;break}ye&&($.preventDefault(),n.update())}function on(){if(P.length==1)S.set(P[0].pageX,P[0].pageY);else{const $=.5*(P[0].pageX+P[1].pageX),ye=.5*(P[0].pageY+P[1].pageY);S.set($,ye)}}function yt(){if(P.length==1)w.set(P[0].pageX,P[0].pageY);else{const $=.5*(P[0].pageX+P[1].pageX),ye=.5*(P[0].pageY+P[1].pageY);w.set($,ye)}}function Le(){const $=P[0].pageX-P[1].pageX,ye=P[0].pageY-P[1].pageY,je=Math.sqrt($*$+ye*ye);L.set(0,je)}function X(){n.enableZoom&&Le(),n.enablePan&&yt()}function Ne(){n.enableZoom&&Le(),n.enableRotate&&on()}function ze($){if(P.length==1)T.set($.pageX,$.pageY);else{const je=Dt($),J=.5*($.pageX+je.x),Ve=.5*($.pageY+je.y);T.set(J,Ve)}M.subVectors(T,S).multiplyScalar(n.rotateSpeed);const ye=n.domElement;ye&&(pe(2*Math.PI*M.x/ye.clientHeight),me(2*Math.PI*M.y/ye.clientHeight)),S.copy(T)}function Ke($){if(P.length==1)C.set($.pageX,$.pageY);else{const ye=Dt($),je=.5*($.pageX+ye.x),J=.5*($.pageY+ye.y);C.set(je,J)}I.subVectors(C,w).multiplyScalar(n.panSpeed),B(I.x,I.y),w.copy(C)}function Ue($){const ye=Dt($),je=$.pageX-ye.x,J=$.pageY-ye.y,Ve=Math.sqrt(je*je+J*J);F.set(0,Ve),N.set(0,Math.pow(F.y/L.y,n.zoomSpeed)),K(N.y),L.copy(F)}function ot($){n.enableZoom&&Ue($),n.enablePan&&Ke($)}function $e($){n.enableZoom&&Ue($),n.enableRotate&&ze($)}function ut($){var ye,je;n.enabled!==!1&&(P.length===0&&((ye=n.domElement)==null||ye.ownerDocument.addEventListener("pointermove",W),(je=n.domElement)==null||je.ownerDocument.addEventListener("pointerup",O)),wt($),$.pointerType==="touch"?Mt($):ue($))}function W($){n.enabled!==!1&&($.pointerType==="touch"?et($):Te($))}function O($){var ye,je,J;De($),P.length===0&&((ye=n.domElement)==null||ye.releasePointerCapture($.pointerId),(je=n.domElement)==null||je.ownerDocument.removeEventListener("pointermove",W),(J=n.domElement)==null||J.ownerDocument.removeEventListener("pointerup",O)),n.dispatchEvent(l),f=c.NONE}function ue($){let ye;switch($.button){case 0:ye=n.mouseButtons.LEFT;break;case 1:ye=n.mouseButtons.MIDDLE;break;case 2:ye=n.mouseButtons.RIGHT;break;default:ye=-1}switch(ye){case mh.DOLLY:if(n.enableZoom===!1)return;rt($),f=c.DOLLY;break;case mh.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enablePan===!1)return;ce($),f=c.PAN}else{if(n.enableRotate===!1)return;Ye($),f=c.ROTATE}break;case mh.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enableRotate===!1)return;Ye($),f=c.ROTATE}else{if(n.enablePan===!1)return;ce($),f=c.PAN}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(s)}function Te($){if(n.enabled!==!1)switch(f){case c.ROTATE:if(n.enableRotate===!1)return;we($);break;case c.DOLLY:if(n.enableZoom===!1)return;Be($);break;case c.PAN:if(n.enablePan===!1)return;it($);break}}function Pe($){n.enabled===!1||n.enableZoom===!1||f!==c.NONE&&f!==c.ROTATE||($.preventDefault(),n.dispatchEvent(s),st($),n.dispatchEvent(l))}function Me($){n.enabled===!1||n.enablePan===!1||Lt($)}function Mt($){switch(Je($),P.length){case 1:switch(n.touches.ONE){case ph.ROTATE:if(n.enableRotate===!1)return;on(),f=c.TOUCH_ROTATE;break;case ph.PAN:if(n.enablePan===!1)return;yt(),f=c.TOUCH_PAN;break;default:f=c.NONE}break;case 2:switch(n.touches.TWO){case ph.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;X(),f=c.TOUCH_DOLLY_PAN;break;case ph.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ne(),f=c.TOUCH_DOLLY_ROTATE;break;default:f=c.NONE}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(s)}function et($){switch(Je($),f){case c.TOUCH_ROTATE:if(n.enableRotate===!1)return;ze($),n.update();break;case c.TOUCH_PAN:if(n.enablePan===!1)return;Ke($),n.update();break;case c.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ot($),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;$e($),n.update();break;default:f=c.NONE}}function kt($){n.enabled!==!1&&$.preventDefault()}function wt($){P.push($)}function De($){delete V[$.pointerId];for(let ye=0;ye<P.length;ye++)if(P[ye].pointerId==$.pointerId){P.splice(ye,1);return}}function Je($){let ye=V[$.pointerId];ye===void 0&&(ye=new Ce,V[$.pointerId]=ye),ye.set($.pageX,$.pageY)}function Dt($){const ye=$.pointerId===P[0].pointerId?P[1]:P[0];return V[ye.pointerId]}this.dollyIn=($=ie())=>{H($),n.update()},this.dollyOut=($=ie())=>{K($),n.update()},this.getScale=()=>x,this.setScale=$=>{Q($),n.update()},this.getZoomScale=()=>ie(),t!==void 0&&this.connect(t),this.update()}};function oR(r,e,t){const n=Qa(x=>x.size),i=Qa(x=>x.viewport),s=typeof r=="number"?r:n.width*i.dpr,l=n.height*i.dpr,c=(typeof r=="number"?t:r)||{},{samples:f=0,depth:m,...p}=c,g=Ae.useMemo(()=>{const x=new Kr(s,l,{minFilter:Wn,magFilter:Wn,type:ll,...p});return m&&(x.depthTexture=new Ag(s,l,va)),x.samples=f,x},[]);return Ae.useLayoutEffect(()=>{g.setSize(s,l),f&&(g.samples=f)},[f,g,s,l]),Ae.useEffect(()=>()=>g.dispose(),[]),g}const lR=r=>typeof r=="function",hR=Ae.forwardRef(({envMap:r,resolution:e=256,frames:t=1/0,makeDefault:n,children:i,...s},l)=>{const c=Qa(({set:M})=>M),f=Qa(({camera:M})=>M),m=Qa(({size:M})=>M),p=Ae.useRef(null);Ae.useImperativeHandle(l,()=>p.current,[]);const g=Ae.useRef(null),x=oR(e);Ae.useLayoutEffect(()=>{s.manual||(p.current.aspect=m.width/m.height)},[m,s]),Ae.useLayoutEffect(()=>{p.current.updateProjectionMatrix()});let _=0,S=null;const T=lR(i);return Ac(M=>{T&&(t===1/0||_<t)&&(g.current.visible=!1,M.gl.setRenderTarget(x),S=M.scene.background,r&&(M.scene.background=r),M.gl.render(M.scene,p.current),M.scene.background=S,M.gl.setRenderTarget(null),g.current.visible=!0,_++)}),Ae.useLayoutEffect(()=>{if(n){const M=f;return c(()=>({camera:p.current})),()=>c(()=>({camera:M}))}},[p,n,c]),Ae.createElement(Ae.Fragment,null,Ae.createElement("perspectiveCamera",og({ref:p},s),!T&&i),Ae.createElement("group",{ref:g},T&&i(x.texture)))}),uR=Ae.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:l,onStart:c,onEnd:f,...m},p)=>{const g=Qa(N=>N.invalidate),x=Qa(N=>N.camera),_=Qa(N=>N.gl),S=Qa(N=>N.events),T=Qa(N=>N.setEvents),M=Qa(N=>N.set),w=Qa(N=>N.get),C=Qa(N=>N.performance),I=e||x,L=n||S.connected||_.domElement,F=Ae.useMemo(()=>new sR(I),[I]);return Ac(()=>{F.enabled&&F.update()},-1),Ae.useEffect(()=>(s&&F.connect(s===!0?L:s),F.connect(L),()=>void F.dispose()),[s,L,t,F,g]),Ae.useEffect(()=>{const N=D=>{g(),t&&C.regress(),l&&l(D)},z=D=>{c&&c(D)},G=D=>{f&&f(D)};return F.addEventListener("change",N),F.addEventListener("start",z),F.addEventListener("end",G),()=>{F.removeEventListener("start",z),F.removeEventListener("end",G),F.removeEventListener("change",N)}},[l,c,f,F,g,T]),Ae.useEffect(()=>{if(r){const N=w().controls;return M({controls:F}),()=>M({controls:N})}},[r,F]),Ae.createElement("primitive",og({ref:p,object:F,enableDamping:i},m))}),cR=Ae.forwardRef(({children:r,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:l=!1,...c},f)=>{const m=Ae.useRef(null);Ae.useImperativeHandle(f,()=>m.current,[]);const p=Ae.useRef(Math.random()*1e4);return Ac(g=>{var x,_;if(!e||t===0)return;l&&g.invalidate();const S=p.current+g.clock.elapsedTime;m.current.rotation.x=Math.cos(S/4*t)/8*n,m.current.rotation.y=Math.sin(S/4*t)/8*n,m.current.rotation.z=Math.sin(S/4*t)/20*n;let T=Math.sin(S/4*t)/10;T=m1.mapLinear(T,-.1,.1,(x=s==null?void 0:s[0])!==null&&x!==void 0?x:-.1,(_=s==null?void 0:s[1])!==null&&_!==void 0?_:.1),m.current.position.y=T*i,m.current.updateMatrix()}),Ae.createElement("group",c,Ae.createElement("group",{ref:m,matrixAutoUpdate:!1},r))});function dp({position:r,char:e}){const t=Ae.useRef(null);return Ac(n=>{t.current&&(t.current.rotation.y+=.01,t.current.position.y=r[1]+Math.sin(n.clock.elapsedTime+r[0])*.3)}),te.jsx(cR,{speed:1.5,rotationIntensity:.5,floatIntensity:.5,children:te.jsxs("mesh",{ref:t,position:r,children:[te.jsx("planeGeometry",{args:[.5,.5]}),te.jsx("meshBasicMaterial",{color:"#ff8c42",transparent:!0,opacity:.3,side:pr})]})})}function dR(){const r=Ae.useRef(null);return Ac(e=>{r.current&&(r.current.rotation.y=Math.sin(e.clock.elapsedTime*.3)*.1,r.current.position.y=Math.sin(e.clock.elapsedTime*.5)*.2)}),te.jsxs("group",{ref:r,position:[-2.5,-.5,0],children:[te.jsxs("mesh",{position:[0,1.5,0],children:[te.jsx("ringGeometry",{args:[1.2,1.5,32]}),te.jsx("meshBasicMaterial",{color:"#ffb84d",transparent:!0,opacity:.8,side:pr})]}),te.jsxs("mesh",{position:[0,1.2,0],children:[te.jsx("sphereGeometry",{args:[.5,32,32]}),te.jsx("meshStandardMaterial",{color:"#87ceeb"})]}),te.jsxs("mesh",{position:[0,.5,0],children:[te.jsx("cylinderGeometry",{args:[.6,.7,1,32]}),te.jsx("meshStandardMaterial",{color:"#ffd700"})]}),te.jsxs("mesh",{position:[0,1.8,0],rotation:[0,0,.3],children:[te.jsx("coneGeometry",{args:[.15,.4,8]}),te.jsx("meshStandardMaterial",{color:"#2962ff"})]})]})}function fR(){const r=Ae.useRef(null);return Ac(e=>{r.current&&(r.current.rotation.y=Math.sin(e.clock.elapsedTime*.3+Math.PI)*.1,r.current.position.y=Math.sin(e.clock.elapsedTime*.5+Math.PI)*.2)}),te.jsxs("group",{ref:r,position:[2.5,-.5,0],children:[te.jsxs("mesh",{position:[0,1.2,0],children:[te.jsx("sphereGeometry",{args:[.5,32,32]}),te.jsx("meshStandardMaterial",{color:"#f2a65a"})]}),te.jsxs("mesh",{position:[0,.5,0],children:[te.jsx("cylinderGeometry",{args:[.6,.7,1,32]}),te.jsx("meshStandardMaterial",{color:"#ffc107"})]})]})}const mR=({showCharacters:r=!0})=>te.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",style:{opacity:.6},children:te.jsxs(QI,{children:[te.jsx(hR,{makeDefault:!0,position:[0,.5,6],fov:60}),te.jsx("ambientLight",{intensity:.6}),te.jsx("directionalLight",{position:[5,5,5],intensity:1}),te.jsx("pointLight",{position:[-5,-5,-5],intensity:.4,color:"#ff8c42"}),te.jsx("pointLight",{position:[5,5,-5],intensity:.4,color:"#ffb84d"}),r&&te.jsxs(te.Fragment,{children:[te.jsx(dR,{}),te.jsx(fR,{})]}),te.jsx(dp,{position:[-3,2,-1],char:""}),te.jsx(dp,{position:[3,-1,-1],char:""}),te.jsx(dp,{position:[0,3,-2],char:""}),te.jsx(dp,{position:[-2,-2,-1],char:""}),te.jsx(uR,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.5,minPolarAngle:Math.PI/3.5,maxPolarAngle:Math.PI/2.1})]})}),pR=({chapters:r,onSelectChapter:e,onSelectVerse:t})=>{const[n,i]=Ae.useState(""),[s,l]=Ae.useState(!1),[c,f]=Ae.useState([]),m=Ae.useRef(null);Ae.useEffect(()=>{if(n.trim().length>0){const g=n.toLowerCase(),x=[];r.forEach(_=>{(_.name.toLowerCase().includes(g)||_.name_meaning.toLowerCase().includes(g)||_.summary.toLowerCase().includes(g))&&x.push({chapter:_}),_.verses.forEach(T=>{(T.text.toLowerCase().includes(g)||T.transliteration.toLowerCase().includes(g)||T.hindi_meaning&&T.hindi_meaning.toLowerCase().includes(g)||T.meaning.toLowerCase().includes(g))&&(x.find(w=>w.chapter.id===_.id)||x.push({chapter:_,verse:{number:T.verse_number,text:T.text.substring(0,50)+"..."}}))})}),f(x.slice(0,10)),l(!0)}else f([]),l(!1)},[n,r]),Ae.useEffect(()=>{const g=x=>{m.current&&!m.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const p=(g,x)=>{e(g),i(""),l(!1),x&&t&&setTimeout(()=>t(g,x),100)};return te.jsxs("div",{ref:m,className:"relative w-full max-w-md mx-auto",children:[te.jsxs("div",{className:"relative",children:[te.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value),onFocus:()=>n&&l(!0),placeholder:"Search chapters or verses...",className:"w-full px-4 py-2 pl-10 pr-4 bg-white/80 backdrop-blur-sm border border-orange-200 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent text-gray-800 placeholder-gray-500"}),te.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),s&&c.length>0&&te.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-lg shadow-xl border border-orange-200 max-h-96 overflow-y-auto",children:c.map((g,x)=>te.jsx("button",{onClick:()=>{var _;return p(g.chapter,(_=g.verse)==null?void 0:_.number)},className:"w-full text-left px-4 py-3 hover:bg-orange-50 transition-colors border-b border-orange-100 last:border-0",children:te.jsxs("div",{className:"flex items-start",children:[te.jsx("span",{className:"bg-orange-800 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm mr-3 flex-shrink-0",children:g.chapter.chapter_number}),te.jsxs("div",{className:"flex-1 min-w-0",children:[te.jsx("p",{className:"font-semibold text-orange-900 font-sanskrit text-sm",children:g.chapter.name}),g.verse&&te.jsxs("p",{className:"text-xs text-gray-600 mt-1 font-sanskrit",children:["Verse ",g.verse.number,": ",g.verse.text]}),te.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g.chapter.name_meaning})]})]})},`${g.chapter.id}-${x}`))})]})},gR=()=>{const[r,e]=Ae.useState(()=>{const s=localStorage.getItem("fontSize");return s?parseInt(s):100});Ae.useEffect(()=>{document.documentElement.style.fontSize=`${r}%`,localStorage.setItem("fontSize",r.toString())},[r]);const t=()=>{e(s=>Math.min(s+10,150))},n=()=>{e(s=>Math.max(s-10,70))},i=()=>{e(100)};return te.jsxs("div",{className:"flex items-center gap-2 bg-white/80 backdrop-blur-sm border border-orange-200 rounded-lg px-2 py-1",children:[te.jsx("button",{onClick:n,className:"p-1 hover:bg-orange-50 rounded transition-colors","aria-label":"Decrease font size",disabled:r<=70,children:te.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),te.jsxs("span",{className:"text-xs text-gray-600 min-w-[3rem] text-center",children:[r,"%"]}),te.jsx("button",{onClick:t,className:"p-1 hover:bg-orange-50 rounded transition-colors","aria-label":"Increase font size",disabled:r>=150,children:te.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),te.jsx("button",{onClick:i,className:"p-1 hover:bg-orange-50 rounded transition-colors text-xs text-gray-600","aria-label":"Reset font size",children:"Reset"})]})},jw={orange:{gradient:"bg-gradient-to-b from-orange-100 via-orange-50 to-white",name:"Orange Sunrise",description:"Warm and welcoming"},saffron:{gradient:"bg-gradient-to-b from-amber-100 via-yellow-50 to-orange-50",name:"Saffron",description:"Traditional and sacred"},golden:{gradient:"bg-gradient-to-b from-yellow-100 via-amber-50 to-orange-100",name:"Golden",description:"Radiant and divine"},peaceful:{gradient:"bg-gradient-to-b from-blue-50 via-indigo-50 to-purple-50",name:"Peaceful",description:"Calm and serene"},divine:{gradient:"bg-gradient-to-b from-purple-100 via-pink-50 to-orange-50",name:"Divine",description:"Spiritual and mystical"},sunset:{gradient:"bg-gradient-to-b from-orange-200 via-pink-100 to-purple-100",name:"Sunset",description:"Beautiful and inspiring"},lotus:{gradient:"bg-gradient-to-b from-pink-100 via-rose-50 to-white",name:"Lotus",description:"Pure and elegant"},temple:{gradient:"bg-gradient-to-b from-stone-100 via-amber-50 to-orange-50",name:"Temple",description:"Ancient and sacred"}},vR=()=>{const[r,e]=Ae.useState(()=>localStorage.getItem("backgroundTheme")||"orange");return Ae.useEffect(()=>{const t=n=>{e(n.detail)};return window.addEventListener("backgroundChanged",t),()=>{window.removeEventListener("backgroundChanged",t)}},[]),{theme:r,gradient:jw[r].gradient}},yR=()=>{const[r,e]=Ae.useState(()=>localStorage.getItem("backgroundTheme")||"orange");return Ae.useEffect(()=>{localStorage.setItem("backgroundTheme",r),window.dispatchEvent(new CustomEvent("backgroundChanged",{detail:r}))},[r]),te.jsxs("div",{className:"relative group",children:[te.jsx("button",{className:"p-2 rounded-lg bg-white/80 backdrop-blur-sm border border-orange-200 hover:bg-orange-50 transition-colors","aria-label":"Change background",title:"Change background theme",children:te.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),te.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white/95 backdrop-blur-sm border border-orange-200 rounded-lg shadow-xl p-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[te.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2 px-2",children:"Background Themes"}),te.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(jw).map(([t,n])=>te.jsxs("button",{onClick:()=>e(t),className:`p-3 rounded-lg border-2 transition-all text-left ${r===t?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-300 hover:bg-orange-50/50"}`,children:[te.jsx("div",{className:`w-full h-8 rounded mb-2 ${n.gradient}`}),te.jsx("div",{className:"text-xs font-semibold text-gray-800",children:n.name}),te.jsx("div",{className:"text-xs text-gray-500",children:n.description})]},t))})]})]})},xR=()=>te.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),_R={stress:["stress","anxiety","worry","fear","trouble","difficulty","sorrow","grief"],duty:["duty","dharma","responsibility","obligation","work","action","karma"],happiness:["happiness","joy","peace","bliss","contentment","satisfaction","sukha"],suffering:["suffering","pain","sorrow","grief","distress","misery","duhkha"],death:["death","mortal","immortal","soul","atman","eternal","perish"],attachment:["attachment","desire","greed","lust","craving","possess","detachment"],karma:["karma","action","deed","work","duty","fruit","result","consequence"],meditation:["meditation","yoga","dhyana","contemplation","mind","concentration"],self:["self","soul","atman","consciousness","spirit","inner","true nature"],god:["god","krishna","lord","divine","supreme","brahman","absolute"],wisdom:["wisdom","knowledge","understanding","realization","enlightenment","jnana"],devotion:["devotion","bhakti","worship","prayer","faith","love","surrender"],ego:["ego","pride","arrogance","selfish","selfless","humility","modesty"],anger:["anger","wrath","rage","fury","calm","patience","forgiveness"],fear:["fear","afraid","coward","courage","brave","fearless","anxiety"]},bR=(r,e)=>{const t=r.toLowerCase(),n=t.split(/\s+/).filter(l=>l.length>2),i=new Set(n);n.forEach(l=>{Object.entries(_R).forEach(([c,f])=>{f.some(m=>l.includes(m)||m.includes(l))&&f.forEach(m=>i.add(m))})});const s=[];return e.forEach(l=>{l.verses.forEach(c=>{let f=0;const m=`${c.meaning} ${c.hindi_meaning||""} ${l.name_meaning} ${l.summary||""}`.toLowerCase();m.includes(t)&&(f+=20),i.forEach(p=>{const g=(m.match(new RegExp(p,"g"))||[]).length;f+=g*3}),n.forEach(p=>{const g=(m.match(new RegExp(p,"g"))||[]).length;f+=g*2}),c.meaning.toLowerCase().includes(t)&&(f+=8),c.hindi_meaning&&c.hindi_meaning.toLowerCase().includes(t)&&(f+=8),l.summary&&l.summary.toLowerCase().includes(t)&&(f+=5),f>0&&s.push({verse:c,chapter:l,score:f})})}),s.sort((l,c)=>c.score-l.score).slice(0,5)},wR=(r,e)=>{if(e.length===0)return"I couldn't find a specific verse that directly addresses your question. The Bhagavad Gita teaches us about dharma (duty), karma (action), and the path to self-realization. Perhaps you could rephrase your question or explore the chapters to find wisdom that resonates with you.";let t=`Based on the teachings of the Bhagavad Gita, here are some relevant verses that may help answer your question:

`;return e.forEach((n,i)=>{t+=`${i+1}. Chapter ${n.chapter.chapter_number}: ${n.chapter.name_meaning}
`,t+=`   Verse ${n.verse.verse_number}: ${n.verse.meaning}

`}),t+="These teachings from Lord Krishna guide us on the path of righteousness and self-realization. Click on any verse above to read it in detail.",t},SR=({onSelectVerse:r})=>{const[e,t]=Ae.useState(!1),[n,i]=Ae.useState([{id:"1",text:"Namaste!  I am here to help you find wisdom from the Bhagavad Gita. Ask me any question about life, duty, karma, dharma, or spirituality, and I will guide you to relevant verses.",isUser:!1}]),[s,l]=Ae.useState(""),[c,f]=Ae.useState(!1),m=Ae.useRef(null),p=Ae.useRef(null),g=()=>{var T;(T=m.current)==null||T.scrollIntoView({behavior:"smooth"})};Ae.useEffect(()=>{g()},[n]),Ae.useEffect(()=>{e&&p.current&&p.current.focus()},[e]);const x=()=>{if(!s.trim()||c)return;const T={id:Date.now().toString(),text:s.trim(),isUser:!0};i(M=>[...M,T]),l(""),f(!0),setTimeout(()=>{const M=bR(s.trim(),fp),w=wR(s.trim(),M),C={id:(Date.now()+1).toString(),text:w,isUser:!1,verses:M.map(I=>I.verse)};i(I=>[...I,C]),f(!1)},800)},_=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),x())},S=T=>{const M=fp.find(w=>w.chapter_number===T.chapter_number);M&&r&&(r(M,T.verse_number),t(!1))};return te.jsxs(te.Fragment,{children:[te.jsx("button",{onClick:()=>t(!e),className:"fixed bottom-4 right-4 md:bottom-6 md:right-6 z-50 bg-orange-600 hover:bg-orange-700 text-white rounded-full p-4 shadow-lg transition-all duration-300 hover:scale-110","aria-label":"Open Chatbot",children:te.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e&&te.jsxs("div",{className:"fixed bottom-20 right-4 md:bottom-24 md:right-6 z-50 w-[calc(100vw-2rem)] md:w-96 max-w-[calc(100vw-3rem)] h-[600px] max-h-[calc(100vh-8rem)] bg-white/95 backdrop-blur-sm border border-orange-200 rounded-xl shadow-2xl flex flex-col",children:[te.jsxs("div",{className:"bg-orange-600 text-white p-4 rounded-t-xl flex justify-between items-center",children:[te.jsxs("div",{children:[te.jsx("h3",{className:"font-bold text-lg",children:"Gita Guide"}),te.jsx("p",{className:"text-sm text-orange-100",children:"Ask me about life's questions"})]}),te.jsx("button",{onClick:()=>t(!1),className:"text-white hover:text-orange-200 transition-colors","aria-label":"Close Chat",children:te.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:te.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),te.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(T=>te.jsx("div",{className:`flex ${T.isUser?"justify-end":"justify-start"}`,children:te.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${T.isUser?"bg-orange-600 text-white":"bg-orange-50 text-orange-900 border border-orange-200"}`,children:[te.jsx("p",{className:"whitespace-pre-line text-sm leading-relaxed",children:T.text}),!T.isUser&&T.verses&&T.verses.length>0&&te.jsxs("div",{className:"mt-3 pt-3 border-t border-orange-200",children:[te.jsx("p",{className:"text-xs font-semibold mb-2 text-orange-700",children:"Relevant Verses:"}),T.verses.map((M,w)=>{const C=fp.find(I=>I.chapter_number===M.chapter_number);return te.jsxs("button",{onClick:()=>S(M),className:"block w-full text-left text-xs bg-white/50 hover:bg-white/80 rounded px-2 py-1 mb-1 transition-colors text-orange-800",children:["Chapter ",M.chapter_number,", Verse ",M.verse_number,C&&` - ${C.name_meaning}`]},w)})]})]})},T.id)),c&&te.jsx("div",{className:"flex justify-start",children:te.jsx("div",{className:"bg-orange-50 text-orange-900 border border-orange-200 rounded-lg p-3",children:te.jsxs("div",{className:"flex space-x-1",children:[te.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full animate-bounce"}),te.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),te.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),te.jsx("div",{ref:m})]}),te.jsxs("div",{className:"border-t border-orange-200 p-4",children:[te.jsxs("div",{className:"flex gap-2",children:[te.jsx("input",{ref:p,type:"text",value:s,onChange:T=>l(T.target.value),onKeyPress:_,placeholder:"Ask your question...",className:"flex-1 px-4 py-2 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm",disabled:c}),te.jsx("button",{onClick:x,disabled:!s.trim()||c,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-orange-300 text-white px-4 py-2 rounded-lg transition-colors text-sm font-semibold",children:"Send"})]}),te.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:'Try: "How to deal with stress?" or "What is my duty?"'})]})]})]})},MR={gita:{chapters:fp,title:"",subtitle:"The Divine Song of God",footer:"Inspired by the timeless wisdom of the Bhagavad Gita."},hanumanChalisa:{chapters:MS,title:" ",subtitle:"Hanuman Chalisa",footer:"Inspired by the devotion of Lord Hanuman."},sunderkand:{chapters:kS,title:"",subtitle:"Sunderkand - The Beautiful Chapter",footer:"Inspired by the journey of Hanuman to Lanka."},bajrangBaan:{chapters:TS,title:" ",subtitle:"Bajrang Baan - The Thunderbolt Arrow",footer:"Inspired by the power of Lord Hanuman."},yakshaPrashna:{chapters:ES,title:" ",subtitle:"Yaksha Prashna - The Questions of the Yaksha",footer:"Inspired by the wisdom of Yudhishthira and the Yaksha."}},kR=()=>{const[r,e]=Ae.useState("gita"),[t,n]=Ae.useState(null),[i,s]=Ae.useState(null),{gradient:l}=vR(),c=MR[r],f=c.chapters,m=_=>{n(_),s(null),window.scrollTo(0,0)},p=()=>{n(null),s(null),window.scrollTo(0,0)},g=_=>{e(_),n(null),s(null),window.scrollTo(0,0)},x=(_,S)=>{const T=_.verses.findIndex(M=>M.verse_number===S);T!==-1&&(n(_),s(T),window.scrollTo(0,0))};return te.jsxs("div",{className:`min-h-screen ${l} text-gray-800 relative overflow-hidden transition-colors duration-500`,children:[te.jsx(mR,{showCharacters:!t}),te.jsxs("main",{className:"container mx-auto px-4 py-8 relative z-10",children:[te.jsxs("header",{className:"mb-8",children:[te.jsxs("div",{className:"flex justify-between items-center mb-6",children:[te.jsx("div",{className:"flex-1 flex justify-start",children:t&&te.jsxs("button",{onClick:p,className:"flex items-center text-orange-800 hover:text-orange-900 transition-colors z-20 relative","aria-label":"Back to Chapters",children:[te.jsx(xR,{}),te.jsx("span",{className:"ml-2 font-semibold hidden md:inline",children:"Back to Chapters"})]})}),te.jsxs("div",{className:"flex items-center gap-3",children:[te.jsx(yR,{}),te.jsx(gR,{})]})]}),!t&&te.jsx("div",{className:"mb-6 flex justify-center",children:te.jsxs("div",{className:"flex flex-wrap gap-2 bg-white/80 backdrop-blur-sm border border-orange-200 rounded-lg p-2",children:[te.jsx("button",{onClick:()=>g("gita"),className:`px-4 py-2 rounded-md font-semibold transition-colors ${r==="gita"?"bg-orange-600 text-white":"bg-orange-50 text-orange-800 hover:bg-orange-100"}`,children:""}),te.jsx("button",{onClick:()=>g("hanumanChalisa"),className:`px-4 py-2 rounded-md font-semibold transition-colors ${r==="hanumanChalisa"?"bg-orange-600 text-white":"bg-orange-50 text-orange-800 hover:bg-orange-100"}`,children:" "}),te.jsx("button",{onClick:()=>g("sunderkand"),className:`px-4 py-2 rounded-md font-semibold transition-colors ${r==="sunderkand"?"bg-orange-600 text-white":"bg-orange-50 text-orange-800 hover:bg-orange-100"}`,children:""}),te.jsx("button",{onClick:()=>g("bajrangBaan"),className:`px-4 py-2 rounded-md font-semibold transition-colors ${r==="bajrangBaan"?"bg-orange-600 text-white":"bg-orange-50 text-orange-800 hover:bg-orange-100"}`,children:" "}),te.jsx("button",{onClick:()=>g("yakshaPrashna"),className:`px-4 py-2 rounded-md font-semibold transition-colors ${r==="yakshaPrashna"?"bg-orange-600 text-white":"bg-orange-50 text-orange-800 hover:bg-orange-100"}`,children:" "})]})}),te.jsxs("div",{className:"text-center mb-6",children:[te.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-orange-900 font-sanskrit drop-shadow-lg mb-2",children:c.title}),te.jsx("p",{className:"text-xl md:text-2xl text-orange-700 mt-2 drop-shadow-md",children:c.subtitle})]}),!t&&te.jsx("div",{className:"mb-8",children:te.jsx(pR,{chapters:f,onSelectChapter:m,onSelectVerse:x})})]}),t?te.jsx(NS,{chapter:t,initialVerseIndex:i},t.id):te.jsx(CS,{chapters:f,onSelectChapter:m})]}),te.jsx("footer",{className:"text-center py-6 text-orange-700/60 text-sm relative z-10",children:te.jsx("p",{children:c.footer})}),r==="gita"&&te.jsx(SR,{onSelectVerse:x})]})};class TR extends Ae.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?this.props.fallback||te.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-orange-100 via-orange-50 to-white",children:te.jsxs("div",{className:"text-center p-8 bg-white/60 backdrop-blur-sm border border-orange-200/50 rounded-xl shadow-lg max-w-md",children:[te.jsx("h2",{className:"text-2xl font-bold text-orange-900 mb-4",children:"Something went wrong"}),te.jsx("p",{className:"text-gray-700 mb-6",children:"We encountered an error while loading the content. Please refresh the page."}),te.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-orange-800 text-white rounded-lg hover:bg-orange-900 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const Vw=document.getElementById("root");if(!Vw)throw new Error("Could not find root element to mount to");const ER=SS.createRoot(Vw);ER.render(te.jsx(gS.StrictMode,{children:te.jsx(TR,{children:te.jsx(kR,{})})}));
